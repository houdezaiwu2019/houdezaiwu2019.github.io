{"pages":[],"posts":[{"title":"Typoraå…¥é—¨","text":"æœ¬æ–‡ä¸»è¦ä»ç›®å½•è®¾ç½®ã€æ ‡é¢˜è®¾ç½®ã€ç‰¹æ®Šçš„æ ‡è®°ç¬¦å·ã€å¯¼å…¥å…¬å¼å’Œåˆ—è¡¨ä»¥åŠå›¾ç‰‡å›¾åºŠçš„è®¾ç½®ä¸æ’ç‰ˆæ¥è¿›è¡Œæ•´ç†ã€‚ ç›®å½•ç¯‡ä»£ç ï¼š[TOC] æ ‡é¢˜ç¯‡å¯¹äºTyporaæ¥è¯´ï¼Œä¸»è¦åˆ†ä¸ºå¿«æ·é”®æ–¹æ³•å’Œä¸€èˆ¬çš„ç›´æ¥å†™ä»£ç çš„æ–¹æ³•ï¼Œè¿™é‡Œæˆ‘æ¯”è¾ƒæ¨èçš„è¿˜æ˜¯ç›´æ¥å†™ä»£ç çš„æ–¹æ³•ï¼Œä½†æ˜¯æ–°æ‰‹å…¥é—¨è¿˜æ˜¯æ¯”è¾ƒæ¨èå…ˆä½¿ç”¨å¿«æ·é”®æ¥è¿›è¡Œå…¥é—¨ã€‚ æ ‡é¢˜çš„ä»£ç ï¼š==#+ç©ºæ ¼+å†…å®¹== è¿™é‡Œæœ‰å‡ ä¸ª#å°±æ˜¯å‡ çº§æ ‡é¢˜ 123# ä¸€çº§æ ‡é¢˜## äºŒçº§æ ‡é¢˜### ä¸‰çº§æ ‡é¢˜ æ ‡é¢˜çš„å¿«æ·é”®ï¼šCtrl+(æ•°å­—) Ctrl+0 &lt;=&gt; ä¸€èˆ¬æ®µè½ Ctrl+1 &lt;=&gt; ä¸€çº§æ ‡é¢˜ Ctrl+2 &lt;=&gt; äºŒçº§æ ‡é¢˜ è¿ç»­ä¸¤æ¬¡Ctrl+åŒä¸€ä¸ªæ•°å­—ï¼šå–æ¶ˆæ ‡é¢˜æ“ä½œ Ctrl+ +/-ï¼šä»£è¡¨æ ‡é¢˜çš„å‡çº§å’Œé™çº§ æ ‡è®°ç¬¦å·ç¯‡æ ‡è®°ç¬¦å·è¿™é‡Œä¸»è¦è®²çš„æ˜¯åŠ ç²—ã€æ–œä½“ã€ä¸‹æ»‘çº¿ã€é«˜äº®å’Œå†…ç½®å…¬å¼ä¸ä»£ç ã€‚ åŠ ç²—ï¼šå¿«æ·é”®==Ctrl+B==ï¼Œä»£ç **text** æ–œä½“ï¼šå¿«æ·é”®==Ctrl+I==ï¼Œä»£ç *text* ä¸‹æ»‘çº¿ï¼šå¿«æ·é”®==Ctrl+U==ï¼Œä»£ç **&lt;u&gt;text&lt;/u&gt;** é«˜äº®ï¼šä»£ç ==text== å†…ç½®ä»£ç ï¼šå¿«æ·é”®==Ctrl+Shift+`==ï¼Œä»£ç `` ä»£ç å—ï¼šå¿«æ·é”®==Ctrl+Shift+K==ï¼Œ ä»£ç : â€œ```â€+è¯­è¨€(c++/python/java) â€œ```â€ å†…ç½®å…¬å¼ï¼šä»£ç \\aplhaï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯latexä»£ç è¿›è¡Œæ ‡è®°çš„ã€‚ å…¬å¼å—ï¼šå¿«æ·é”®==Ctrl+Shift+M==ï¼Œä»£ç $$$ $$$ 1234$$ E_k = \\frac{1}{2}mv^2 \\tag{1.1}$$ E_k = \\frac{1}{2}mv^2 \\tag{1.1}å¼•ç”¨ï¼šå¿«æ·é”®==Ctrl+Shift+Qï¼Œä»£ç &gt;+ç©ºæ ¼+text ä¹¦ç±æ˜¯äººç±»è¿›æ­¥çš„é˜¶æ¢¯ã€‚â€”â€”é«˜å°”åŸº è¶…çº§é“¾æ¥ï¼šä»£ç [blibli](https://www.bilibili.com) [text](#name) eg1. blibli çš„é“¾æ¥ eg2.ç›®å½• çš„é“¾æ¥ è„šæ³¨ï¼šä»£ç text[^name],ä¹‹ååœ¨åé¢[^name]:text 1,è¿™é‡Œæ·»åŠ æˆåŠŸåï¼Œåé¢ä¼šå‡ºç°å›è½¦ â†©ç¬¦å·ã€‚ ä¸Šæ ‡ï¼šä»£ç X^2 ä¸‹æ ‡ï¼šä»£ç H~2~o æ³¨æ„è¿™é‡Œéœ€è¦çš„ä¸€äº›é¢å¤–çš„è®¾ç½®ï¼š åˆ—è¡¨ç¯‡æœ‰åºåˆ—è¡¨ï¼šå¿«æ·é”®==Ctrl+Shift+[==ï¼Œä»£ç 1.+ç©ºæ ¼+text æ— åºåˆ—è¡¨ï¼šå¿«æ·é”®==Ctrl+Shift+]==ï¼Œä»£ç -+ç©ºæ ¼+text æ³¨æ„ï¼šæ— åºåˆ—è¡¨å¦‚æœæƒ³åˆ‡æ¢åˆ°ä¸‹ä¸€çº§æ—¶å¯ä»¥ç›´æ¥æŒ‰==tab== è¡¨æ ¼ï¼šå¿«æ·é”®==Ctrl+T==ï¼Œä¹‹åå¼¹å‡ºå¯¹è¯æ¡†ï¼Œè‡ªå·±æ¥é€‰æ‹©éœ€è¦çš„è¡Œæ•°å’Œåˆ—æ•°ã€‚ ä»Šå¤© æ˜å¤© æ—©é¥­ åˆé¥­ æ™šé¥­ ä¸Šè¿°è¡¨æ ¼çš„æºä»£ç ï¼š 12345| | ä»Šå¤© | æ˜å¤© || :--: | :--- | :--: || æ—©é¥­ | | || åˆé¥­ | | || æ™šé¥­ | | | è¿™é‡Œè¿˜æ˜¯ç”¨å¿«æ·é”®å§ï¼Œä½¿ç”¨ä»£ç å¤ªéº»çƒ¦äº†ã€‚ å›¾ç‰‡ç¯‡æœ¬åœ°è·¯å¾„å¯¼å…¥å›¾ç‰‡ ä¸€èˆ¬æ¥è¯´ï¼Œå›¾ç‰‡ä½¿ç”¨çš„æ˜¯ç»å¯¹è·¯å¾„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºä¸ºç›´æ¥æˆªå›¾å¹¶ç²˜è´´ç­‰åˆ°çš„å›¾ç‰‡çš„è·¯å¾„ã€‚ä½†è¿™ç§è¯­è¨€ä¸æ˜¯mdçš„è¯­è¨€ã€‚ &lt;img src=&quot;C:\\Users\\dell\\AppData\\Roaming\\Typora\\typora-user-images\\image-20220118215115730.png&quot; alt=&quot;image-20220118215115730&quot; style=&quot;zoom:50%;&quot; /&gt;ã€‚ è¿™é‡Œçš„è·¯å¾„æ˜¯Typoraè‡ªè¡Œç”Ÿæˆçš„ï¼Œä½†å®é™…è¾“å…¥çš„æ—¶å€™è¦è¾“å…¥ä»£ç ![]()ã€‚ ä¹Ÿå¯ä»¥ç”¨ç›¸å¯¹è·¯å¾„ï¼Œä»£ç æ˜¯![](./+name.png/jpg) ./ä»£è¡¨çš„æ˜¯å½“å‰çš„æ–‡ä»¶å¤¹ã€‚ ../ä»£è¡¨çš„æ˜¯ä¸Šä¸€çº§æ–‡ä»¶å¤¹ã€‚ ![](./pic01.png) å¯¹äº.mdæ¥è¯´ï¼Œä¿å­˜å›¾ç‰‡ä¸€èˆ¬ä½¿ç”¨çš„æ˜¯ä¿å­˜å›¾ç‰‡çš„é“¾æ¥ï¼Œè¿™æ ·å¯ä»¥å‡å°æ–‡ä»¶çš„ç©ºé—´ï¼ˆç›¸æ¯”Wordï¼‰ã€‚ä½†è¿™æ ·ä¼šé€ æˆä¿®æ”¹äº†æ–‡ä»¶æˆ–è€…å›¾ç‰‡çš„è·¯å¾„ä»¥åŠæ¸…é™¤çš„Cç›˜çš„ç¼“å­˜æ–‡ä»¶æ—¶ä¼šé€ æˆæ— æ³•æ˜¾ç¤ºçš„é—®é¢˜ã€‚ åˆ©ç”¨å›¾åºŠå¯¼å…¥å›¾ç‰‡è¿™é‡Œæœ‰ä¸ªæ¯”è¾ƒçŸ›ç›¾çš„é—®é¢˜ï¼Œä½¿ç”¨GitHubçš„å›¾åºŠçš„è¯ä¼šé€ æˆå›½å†…æ²¡æœ‰VPNçš„ç”¨æˆ·æ— æ³•è®¿é—®ï¼Œä½†æ˜¯ä½¿ç”¨ä¸€èˆ¬çš„ä¸ƒç‰›äº‘çš„è¯è¦èŠ±é’±ï¼Œå› æ­¤å†ä¸‰è€ƒè™‘æˆ‘ä»¬ä½¿ç”¨ç äº‘giteeæ¥ä½œå›¾åºŠï¼ˆå¼Šç«¯æ˜¯å›¾ç‰‡çš„å¤§å°ä¸èƒ½è¶…è¿‡1Mï¼‰ã€‚ å°†æ’å…¥å›¾ç‰‡çš„æ— ä»»ä½•æ“ä½œ-&gt;ä¸Šä¼ å›¾ç‰‡ æ ¹æ®picgoçš„ä½ç½®æ¥é…ç½®è·¯å¾„ã€‚å¹¶ä¸”è¿™é‡Œè¿˜è¦ä¸‹è½½ä¸€ä¸ªnode.jsï¼Œä¸‹è½½è¿‡ç¨‹è¿™é‡Œçœç•¥ã€‚ åˆ°picgoä¸­ä¸‹è½½giteeçš„æ’ä»¶ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ç¬¬ä¸‰ä¸ªï¼Œå½“ç„¶å…¶ä»–çš„ä¸¤ä¸ªä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä½†ä»¥ä¸‹å°†å›´ç»•ç¬¬ä¸‰ä¸ªgitee-uploaderæ¥é…ç½®ã€‚ åœ¨giteeé‡Œé¢åˆ›å»ºä»“åº“ï¼Œæ³¨æ„åˆ›å»ºæ—¶ä¸€å®šè¦ç‚¹å‡»åˆå§‹åŒ–ï¼Œåªæœ‰è¿™æ ·æ‰å¯ä»¥ä¸Šä¼ å›¾ç‰‡ã€‚å¦‚æœæ²¡æœ‰ç‚¹ï¼Œé‚£ä¹ˆåˆ›å»ºå¥½ä»“åº“æ—¶ä¹Ÿå¯ä»¥ç‚¹åˆå§‹åŒ–ã€‚ è¦ç”Ÿæˆä¸€ä¸ªtokenï¼Œæ‰“å¼€giteeçš„è®¾ç½®ï¼Œç‚¹å‡»ç”Ÿæˆä»¤ç‰Œã€‚ç‚¹å‡»è®¾ç½®-&gt;å®‰å…¨è®¾ç½®-&gt;ç§äººä»¤ç‰Œ è®¾ç½®æƒé™ï¼Œèµ·ä¸ªåå­—ç‚¹å‡»ç”Ÿæˆã€‚æ³¨æ„ä»¤ç‰Œåªå¼¹å‡ºä¸€æ¬¡ï¼Œæœ€å¥½æ‰¾ä¸ªè®°äº‹æœ¬è®°å½•ä¸‹æ¥ï¼Œé˜²æ­¢è‡ªå·±å¿˜è®°ã€‚ é…ç½®picgoï¼Œæ‰“å¼€å›¾åºŠè®¾ç½®-&gt;giteeã€‚ æ³¨æ„ï¼Œè¿™é‡Œè‡ªå·±ä»“åº“å‘½årepoæ ¼å¼ï¼šç”¨æˆ·å/ä»“åº“åã€‚ ä½†æ˜¯ä¹‹å‰é‡åˆ°äº†é—®é¢˜ï¼Œä¸Šä¼ çš„å›¾ç‰‡åœ¨æœ¬åœ°æ— æ³•æ˜¾ç¤ºï¼Œå…¶ä¸­çš„åŸå› æ˜¯giteeè®¾ç½®çš„æ˜¯ç§æœ‰çš„ï¼Œå¯ä»¥åœ¨ä»“åº“çš„ç®¡ç†ç•Œé¢æ›´æ”¹ã€‚ githubçš„æ“ä½œåŒä¸Šï¼Œä½†æ˜¯2022å¹´3æœˆ26æ—¥ï¼Œgiteeå•æ–¹é¢ç¦ç”¨äº†å›¾åºŠåŠŸèƒ½ã€‚ Typoraå›¾ç‰‡æ’ç‰ˆè¿™é‡Œå›¾ç‰‡æ’ç‰ˆéœ€è¦æˆ‘ä»¬æŒæ¡ä¸€ç‚¹ç‚¹HTML(Hyper Text Markup Language)çš„è¯­æ³•çŸ¥è¯†ã€‚ å›¾æ³¨ 12345678# è¿™é‡Œä¸ºä¸Šé¢å›¾ç‰‡çš„HTMLä»£ç &lt;center&gt; &lt;img src='https://cdn.jsdelivr.net/gh/houdezaiwu2019/image-bed/Typora%E7%9A%84%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE%E5%92%8C%E4%BB%A3%E7%A0%81/202201211959259.png' width=25%&gt; &lt;br&gt; // è¿™é‡Œ&lt;br&gt;çš„æ„æ€æ˜¯å›è½¦ï¼Œå¦‚æœæ²¡æœ‰brä¼šå’Œå›¾ç‰‡æ˜¯å¹¶æ’çš„ å›¾æ³¨&lt;/center&gt; å› æ­¤ï¼Œè¦å®ç°ä¸‹é¢ä¸¤ä¸ªå›¾ç‰‡å¹¶æ’çš„æ•ˆæœï¼Œå°±å¯ä»¥ç›´æ¥å°†å›¾ç‰‡çš„æ”¾ä¸€èµ·å³å¯ï¼Œå¦‚æœå®ç°è¿ä¸ªå›¾ç‰‡çš„ä¸Šä¸‹æ’åˆ—ï¼Œè¿™æ˜¯éœ€è¦åœ¨ä¹‹é—´åŠ ä¸€ä¸ª&lt;br&gt;å³å¯ è¿™é‡Œçš„&lt;center&gt;æ˜¯é»˜è®¤å›¾ç‰‡å±…ä¸­çš„æ„æ€ã€‚å¯¼å…¥å›¾ç‰‡é»˜è®¤çš„æƒ…å†µå°±æ˜¯éƒ½æ˜¯å±…ä¸­çš„ï¼Œå¦‚æœè¦æ”¹æˆå·¦å¯¹é½åˆ™å°†&lt;center&gt;--&gt;&gt;&lt;left&gt;å³å¯å®ç°ï¼ŒåŒç†å³å¯¹é½å°±ç”¨&lt;right&gt;ã€‚ å›¾ æ™šå®‰ 123456789&lt;center&gt; &lt;img src='https://cdn.jsdelivr.net/gh/houdezaiwu2019/image-bed/Typora%E7%9A%84%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE%E5%92%8C%E4%BB%A3%E7%A0%81/202201211959259.png' width=25%&gt; &lt;img src='https://cdn.jsdelivr.net/gh/houdezaiwu2019/image-bed/Typora%E7%9A%84%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE%E5%92%8C%E4%BB%A3%E7%A0%81/202201211959259.png' width=25%&gt; &lt;br&gt; å›¾ æ™šå®‰ &lt;img src=&quot;http://latex.codecogs.com/gif.latex? a^2&quot;&gt;&lt;/center&gt; è¿™é‡Œä½¿ç”¨çš„æ˜¯latexä»£ç çš„å½¢å¼æ¥æ˜¾ç¤ºå›¾æ³¨ï¼Œè™½ç„¶ä¸æ˜¯å¾ˆå¥½çœ‹ï¼Œä½†æ˜¯åªæ˜¯å¯ä»¥æ˜¾ç¤ºã€‚","link":"/2022/01/21/Typora%E5%85%A5%E9%97%A8/"},{"title":"Hello World","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new &quot;My New Post&quot; More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","link":"/2022/01/18/hello-world/"},{"title":"Auto-Encoder (2021)","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦ä»auto-encoderçš„Basic Idea of Auto-encoderã€Feature Disentanglementã€Discrete Latent Representationä»¥åŠMore Applicationså››ä¸ªæ–¹é¢è¿›è¡Œå™è¿°ã€‚è¿™é‡Œä¸»è¦å‚è€ƒçš„æ—¶æå®æ¯…2021å¹´çš„æ–°è¯¾ã€‚è¿™é‡Œauto-encoderå’Œ CycleGAN å’Œtransformersæœºåˆ¶æœ‰ä¸€å®šçš„ç›¸ä¼¼ä¹‹å¤„ï¼Œåç»­è¿˜è¦æ·±å…¥äº†è§£ã€‚ Self supervised Learning Framework è‡ªç›‘ç£å­¦ä¹ ï¼šä½¿ç”¨å¤§é‡çš„èµ„æ–™ï¼Œè¿›è¡Œä¸ç”¨æ ‡æ³¨çš„å­¦ä¹ ä»»åŠ¡ï¼Œä¸»è¦æœ‰å¡«ç©ºé¢˜å’Œé¢„æµ‹ä¸‹ä¸€å¥è¯ã€‚ å°†è‡ªç›‘ç£æ¨¡å‹åšä¸€ç‚¹è°ƒæ•´ï¼Œç”¨åœ¨ä¸‹æ¸¸çš„ä»»åŠ¡é‡Œã€‚ BERTå’ŒGPTæ˜¯ä¸»æµçš„è‡ªç›‘ç£å­¦ä¹ çš„æ¡†æ¶ï¼Œä½†æ˜¯ä¹‹å‰çš„Auto-Encoderå…¶å®ä¹Ÿå¯ä»¥ç®—ä½œæ˜¯è‡ªç›‘ç£å­¦ä¹ çš„ä¸€ç§(å› ä¸ºå…¶å¯ä»¥ä¸è¦label)ã€‚ Basic Idea of Auto-encoder Auto-encoderçš„æ€æƒ³å’ŒCycle GANç›¸å½“çš„ç±»ä¼¼ï¼Œå°±æ˜¯å°†è¾“å…¥çš„å›¾ç‰‡è¿›è¡Œä¸¤æ¬¡è½¬æ¢å¾—åˆ°è§£ç åçš„å›¾ç‰‡å’ŒåŸæ¥çš„å›¾ç‰‡ä¹‹é—´çš„å·®è·è¶Šå°è¶Šå¥½ã€‚ ä¸­é—´ç¼–ç çš„å‘é‡å¯ä»¥è§Embeddingã€ä¹Ÿå¯ä»¥å«Representationæˆ–è€…å«Codeã€‚ ä¸‹æ¸¸ä»»åŠ¡ï¼šå°†å›¾ç‰‡å‹ç¼©åè¿›è¡Œç›¸å…³çš„å¤„ç†ã€‚å¦‚More Dimension Reduction æŠ€æœ¯ä¸Šå¯ä»¥ä½¿ç”¨Auto-encoderã€‚ ä¸ºä»€ä¹ˆä½¿ç”¨Auto-encoderè¿™é‡Œä¸¾äº†ç¥é›•ä¾ ä¾£çš„ä¾‹å­ï¼Œå°±æ˜¯æƒ³è¯´æ˜3x3çš„å›¾ç‰‡å…¶å®å—åˆ°å›¾ç‰‡è‡ªèº«çš„é™åˆ¶ï¼Œå†…éƒ¨æ˜¯ç”±ä¸€å®šè§„å¾‹çš„ï¼Œå¯ä»¥å°†å…¶è¿›è¡Œå‹ç¼©ã€‚æŠ‘æˆ–æ˜¯æ­¦å™¨æ˜¯å—åˆ°æ‰‹è‡‚æ´»åŠ¨èŒƒå›´çš„çº¦æŸï¼Œä¸å¯èƒ½å˜åŒ–å¾ˆå¤šã€‚ ç”±äºå›¾ç‰‡çš„è‡ªèº«çš„çº¦æŸï¼Œå¯ä»¥ç®€åŒ–ä¸ºä½ç»´çš„çŠ¶æ€ã€‚ auto-encoder is not a new ideas.assets/image-20220209095443614.png) ä¹‹å‰è®­ç»ƒæ˜¯ä½¿ç”¨å—é™ç»å°”å…¹æ›¼æœºRBMæ¥è®­ç»ƒæ·±åº¦æ¨¡å‹ã€‚ ä¸»è¦æ˜¯åˆ©ç”¨RBMå°†æ¯ä¸€å±‚éƒ½è®­ç»ƒå¥½ï¼Œä¹‹åæ‹¼æ¥èµ·æ¥è¿›è¡Œå¾®è°ƒï¼Œç»§è€Œå®Œæˆæ·±åº¦æ¨¡å‹çš„é¢„è®­ç»ƒã€‚ ä½†æ˜¯2012å¹´ï¼ŒHintonå‘è¡¨æ–‡ç« ï¼Œè¯´æ˜å…¶å®RBMæŠ€æœ¯æ²¡æœ‰å¤ªå¤§çš„å¿…è¦ï¼Œäºæ˜¯è¿›å¹´æ¥æ²¡æœ‰äººå†å»ä½¿ç”¨RBMäº†ã€‚ De-noising Auto encoder é€šè¿‡encoderå’Œdecoderæ¥å»æ‰å™ªå£°ã€‚ BERTæ¨¡å‹å…¶å®æ€æƒ³ä¸Šå’ŒDe-noising Auto encoderç›¸ä¼¼ã€‚ Feature DisentanglementRepresentation includes information of different aspects ä½†æ˜¯ï¼Œè¿™äº›ä¿¡æ¯æ˜¯çº ç¼ åœ¨ä¸€ä¸ªå‘é‡é‡Œé¢çš„ï¼Œæˆ‘ä»¬ä¸çŸ¥é“é‚£äº›ç»´é‡ŒåŒ…å«æœ‰ä¸Šè¿°ä¿¡æ¯çš„ä¸»è¦å†…å®¹ã€‚ Feature Disentanglementï¼šè®­ç»ƒå‡ºæ¥çš„auto-encoder,å¯ä»¥å°†ä¿¡æ¯æŒ‰ç…§ç»´åº¦è¿›è¡Œåˆ†ç±»ï¼Œä¸åŒçš„ç»´åº¦ä»£è¡¨åˆ™ä¸åŒçš„ä¿¡æ¯ã€‚ ä¸»è¦çš„åº”ç”¨æ˜¯ Application: Voice Conversion ä¹‹å‰æ˜¯éœ€è¦æˆå¯¹çš„å£°éŸ³è®¯å·ï¼Œå°±æ˜¯è®©ä¸¤ä¸ªäººè¯»ç›¸åŒçš„å¥å­(ç›‘ç£å­¦ä¹ )ã€‚ ç°åœ¨Aå’ŒBä¸éœ€è¦å°†åŒæ ·çš„å¥å­å’Œè¯­è¨€ï¼Œå°±å¯ä»¥å®ç°å£°éŸ³çš„è½¬æ¢ã€‚ æå–å‡ºæˆ‘è‡ªå·±çš„å†…å®¹è®¯å·å’Œæ–°å£ç»“è¡£çš„å£°éŸ³è®¯å·ï¼Œç»“åˆèµ·æ¥å®ŒæˆVoice Conversionã€‚ Discrete Latent RepresentationDiscrete Representation one-hotå¯ä»¥å®ç°æ‰‹å†™æ•°æ®é›†Mnist çš„åˆ†ç±»ï¼Œä¸€å…±10ç»´ï¼Œæ¯ä¸€ç»´ä»£è¡¨çš„æ˜¯ä¸€ç»´æ•°æ®çš„ã€‚ Codebooké‡Œé¢æ˜¯ä¸€ç³»åˆ—çš„å‘é‡ï¼ŒCodebooké‡Œçš„ç³»åˆ—ä¹Ÿæ˜¯NNä»å­—å…¸ï¼ˆå¤§é‡è®­ç»ƒé›†ï¼‰ä¸­å­¦åˆ°çš„ã€‚ å¾—å‡ºçš„code vector å’ŒCodebooké‡Œé¢çš„æ‰€æœ‰å‘é‡è¿›è¡Œç›¸ä¼¼åº¦çš„è®¡ç®—ï¼Œå–ç›¸ä¼¼åº¦æœ€é«˜çš„å‘é‡ï¼Œè¿›è¡Œdecoderã€‚ decoderçš„è¾“å…¥å¿…é¡»æ˜¯Codebooké‡Œé¢çš„å‘é‡ï¼Œè¿™æ ·æ¥æ¥å®ç°ç¦»æ•£åŒ–ã€‚ è¿™é‡Œç›¸ä¼¼åº¦çš„è®¡ç®—å’Œattentionæœºåˆ¶ç›¸ä¼¼ã€‚ åœ¨è¯­éŸ³ä¸Šé¢ï¼Œcodebookå¯ä»¥å­¦ä¹ åˆ°æœ€åŸºæœ¬çš„å‘éŸ³ã€‚ Text as Representationå°†Embeddingå˜æˆä¸€æ®µæ–‡å­—ï¼Œè¿™æ ·ä¸€æ®µæ–‡å­—æœ‰å¯èƒ½å°±æˆä¸ºæ–‡ç« æ‘˜è¦ã€‚ encoderå’Œdecoderè¦æ˜¯transformeræœºåˆ¶ã€‚ ä½†æ˜¯ï¼Œå®é™…trainä»¥åï¼Œencoderç”Ÿæˆçš„codeæ˜¯äººçœ‹ä¸æ‡‚çš„ï¼Œä½†æ˜¯decoderå°±å¯ä»¥çœ‹æ‡‚ã€‚ å› æ­¤ï¼Œè¦å¢åŠ ä¸€ä¸ªåˆ¤åˆ«å™¨ï¼Œæ¥åˆ¤åˆ«æ˜¯ä¸æ˜¯äººè¯ã€‚ ä¸»è¦çš„æ€æƒ³å‡ å°±æ˜¯CycleGANçš„æ€æƒ³ã€‚ Tree as Embedding More ApplicationsGenerator With some modification, we have variational auto encoder (VAE). è¿™é‡Œåœ¨å¾—åˆ°encoderçš„åŒæ—¶ï¼Œä¹Ÿæ”¶è·åˆ°ä¸€ä¸ªç”Ÿæˆå™¨æ¨¡å‹(decoder)ã€‚ Compression åšå›¾ç‰‡å‹ç¼©ï¼Œä½†æ˜¯ä¼šæœ‰ä¸€å®šå¾—å¤±çœŸã€‚ Anomaly Detection(å¼‚å¸¸æ£€æµ‹æœºåˆ¶) å°±æ˜¯ç»™äº†ä¸€äº›åˆ—çš„è®­ç»ƒèµ„æ–™ ${x^1, x^2,x^3,\\cdots,x^N}$ã€‚ æ£€æµ‹è¾“å…¥çš„$x$ï¼Œæ˜¯å¦å’Œè®­ç»ƒæ•°æ®ç›¸ç±»ä¼¼ã€‚ ç›¸ä¼¼çš„å†…æ¶µæ˜¯è®­ç»ƒæ•°æ®æ¥å®šçš„ã€‚ ä¿¡ç”¨å¡æ¶ˆè´¹æ£€æµ‹ Fraud DetectionTraining data: credit card transactions, ğ‘¥: fraud or notRef: https://www.kaggle.com/ntnu-testimon/paysim1/homeRef: https://www.kaggle.com/mlg-ulb/creditcardfraud/home ç½‘ç»œçš„ä¾µå…¥æ£€æµ‹ Network Intrusion DetectionTraining data: connection, ğ‘¥: attack or notRef: http://kdd.ics.uci.edu/databases/kddcup99/kddcup99.html ç™Œç—‡æ£€æµ‹ Cancer DetectionTraining data: normal cells, ğ‘¥: cancer or notRef: https://www.kaggle.com/uciml/breast-cancer-wisconsin-data/home å¼‚å¸¸æ£€æµ‹çš„éš¾ç‚¹åœ¨äºå¼‚å¸¸çš„èµ„æ–™ç›¸å½“å°‘ï¼Œå› æ­¤ä¸èƒ½çœ‹ä½œäºŒå…ƒåˆ†ç±»å™¨ï¼Œç›¸å½“äºä½¿ç”¨ä¸€å…ƒæ•°æ®è¿›è¡Œåˆ†ç±»ã€‚ å¯¹äºç›¸ä¼¼çš„æ•°æ®ï¼Œdecoderå¯ä»¥é¡ºåˆ©çš„è¿˜åŸå›¾ç‰‡æ•°æ®ã€‚ å¯¹äºå¼‚å¸¸çš„å›¾ç‰‡ï¼Œdecoderå°±å¾ˆéš¾è¿˜åŸï¼Œå› ä¸ºè®­ç»ƒçš„æ—¶å€™æ ¹æœ¬æ²¡è§è¿‡è¿™æ ·çš„æƒ…å†µï¼Œé€šè¿‡è¿™ç§æœºåˆ¶æ¥å®ç°æ£€æµ‹ã€‚ æ ¹æ®é‡æ„çš„è¯¯å·®çš„æŸå¤±æ¥çœ‹æ˜¯å¦å¼‚å¸¸ã€‚ More about Anomaly DetectionPart 1: https://youtu.be/gDp2LXGnVLQPart 2: https://youtu.be/cYrNjLxkoXsPart 3: https://youtu.be/ueDlm2FkCnwPart 4: https://youtu.be/XwkHOUPbc0QPart 5: https://youtu.be/Fh1xFBktRLQPart 6: https://youtu.be/LmFWzmn2rFYPart 7: https://youtu.be/6W8FqUGYyDo","link":"/2022/02/09/Auto-encoder/Auto-encoder-2021/"},{"title":"Deep Auto-EncoderåŸºæœ¬ç†è®º","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦ä»PCAè¿›è¡Œè¿›è¡Œç±»æ¯”å¾—å‡ºauto-encoderï¼Œé€šè¿‡å¢åŠ æ·±åº¦æ¥æé«˜auto-encoderçš„ç‰¹æ€§ï¼Œä»¥åŠå…¶åœ¨æ–‡å­—å¤„ç†ã€é¢„è®­ç»ƒå‚æ•°å’Œå›¾ç‰‡ç›¸ä¼¼åº¦æ¯”è¾ƒä¸Šçš„åº”ç”¨ã€‚ Auto-encoder ç¼–ç å™¨ï¼šå°†å›¾ç‰‡çš„ä¿¡æ¯å‹ç¼©ç§°ä¸ºä¸€ä¸ªcodeï¼Œä»£è¡¨åŸå›¾çš„ä¸€ä¸ªç²¾ç®€çš„è¡¨ç¤ºã€‚ è§£ç å™¨ï¼šæ ¹æ®codeæ¥å°†åŸæ¥çš„å›¾ç‰‡è¿›è¡Œé‡æ„ã€‚ å•ä¸ªencoderï¼Œåªæœ‰inputæ²¡æœ‰outputï¼Œæ˜¯æ²¡æœ‰åŠæ³•å­¦ä¹ çš„ã€‚ å› æ­¤å®é™…äº†ä¸€ä¸ªè§£ç å™¨æ¥å¾—åˆ°è¾“å‡ºã€‚ ç„¶åå°†encoderå’Œdecoderè¿æ¥åˆ°ä¸€èµ·ï¼Œä¸€èµ·æ¥å­¦ä¹ ã€‚ Starting from PCA $W$ä¸ºå˜æ¢çŸ©é˜µï¼ŒPCAä¸€ç§Linear methodã€‚ ç›®æ ‡æ˜¯ä½¿å¾—è¾“å‡ºçš„é‡æ„å›¾ç‰‡å’Œè¾“å…¥çš„åŸå›¾ç‰‡ä¹‹é—´çš„å·®è·è¶Šå°è¶Šå¥½ã€‚ å¯ä»¥å°†$W$çœ‹æˆæ˜¯ä¸€ä¸ªencoderï¼Œå°†$W^T$çœ‹æˆæ˜¯ä¸€ä¸ªdecoderï¼Œä¸­é—´çš„codeç›¸å½“äºæ˜¯ä¸€ä¸ªhidden layerã€‚ encoderå¯ä»¥æ˜¯ä¸€ä¸ªNNï¼Œå› æ­¤å¯ä»¥å¢åŠ ä¸­é—´çš„å±‚æ•°ã€‚ Deep Auto-encoder ä¹‹å‰ï¼ŒDeep Auto-encoderå¾ˆéš¾è®­ç»ƒï¼Œéœ€è¦RBMè¿›è¡Œlayerçš„åˆå§‹åŒ–æ‰èƒ½è®­ç»ƒçš„å¥½ä¸€ç‚¹ã€‚ Symmetric is not necessaryï¼Œå°±æ˜¯å¯ä»¥å°†encoderå’Œdecoderå¯¹åº”èµ·æ¥è®­ç»ƒï¼Œä½†æ˜¯è¿™æ ·å…¶å®æ˜¯ä¸å¿…è¦çš„ï¼Œç›´æ¥è®­ç»ƒä¸¤ä¸ªNNå³å¯ã€‚ ç›¸æ¯”PCAæ¥è¯´ï¼Œé€šè¿‡å¢åŠ æ·±åº¦å¯ä»¥å¾ˆå¥½çš„æé«˜ç»“æœçš„æ¸…æ™°åº¦ã€‚ ä¸‹å›¾ä¸ºä¸€ä¸ªæ•ˆæœä¸Šçš„å¯¹æ¯”ï¼Œå°†æ•°æ®é™ç»´æˆ2ç»´ PCAå¾—å‡ºçš„codeå¾ˆéš¾è®²è¿™ä¸ªæ•°æ®çš„ç‰¹å¾æå–å‡ºæ¥ã€‚ Deep Auto-encoderåˆ™å¯ä»¥æ˜æ˜¾çš„å°†è¿™å‡ ä¸ªç‰¹å¾åˆ†å¼€ã€‚ Text Retrieval(æ–‡å­—å¤„ç†) Vector Space Modelï¼šå°†æ–‡ç« ç¼–ç æˆé«˜ç»´çš„å‘é‡ï¼Œå¯¹æ¯”cosä¸Šçš„ç›¸ä¼¼åº¦ã€‚ Bag-of-wordï¼šé€šè¿‡0å’Œ1çš„å½¢å¼ï¼Œæ¥å®Œæˆå¥å­çš„å–è¯å’Œæ„å»ºã€‚è¿˜æœ‰ä¸€ç§æ˜¯ç”¨[0,1]æ¥è¡¨ç¤ºé‡è¦æ€§ã€‚ä½†æ˜¯æ— æ³•å­¦ä¹ åˆ°å•è¯çš„è¯­ä¹‰ã€‚ é€šè¿‡deep auto-encoderå­¦åˆ°çš„æ–‡æ¡£çš„ä¿¡æ¯æœ‰æ¸…æ™°çš„åˆ†ç±»ã€‚ LSAåˆ™å¾ˆéš¾å°†ä¸åŒçš„æ–‡æ¡£ä¸­çš„ç‰¹å¾è¿›è¡ŒåŒºåˆ†ã€‚ Auto-encoder-similar Image Search å°†å›¾ç‰‡ä¹‹é—´ç›´æ¥è®¡ç®—ç›¸ä¼¼åº¦ï¼Œå¾—å‡ºçš„ç»“æœå’Œé¢„æœŸç›¸å·®è¾ƒå¤§ã€‚ å› æ­¤ä½¿ç”¨è‡ªç¼–ç å™¨å°†æ¯å¼ å›¾ç‰‡è¿›è¡Œç¼–ç ï¼Œç›´æ¥å¯¹ç¼–ç è®¡ç®—ç›¸ä¼¼åº¦å¦‚å›¾æ‰€ç¤ºã€‚ Auto-encoder - Pre-training DNNä½¿ç”¨auto-encoderè¿›è¡Œç¥ç»ç½‘ç»œçš„åˆå§‹åŒ–æ“ä½œã€‚ å…ˆç”¨auto-encoderè¿›è¡Œé¢„è®­ç»ƒï¼Œè¿™é‡Œå¦‚å·¦å›¾æ‰€ç¤ºï¼Œå…ˆå°†784ç»´è½¬æ¢1000ç»´å†784ç»´ï¼Œçœ‹è®­ç»ƒçš„é‡æ„çš„æƒ…å†µã€‚(å°†ä½ä½è½¬æ¢æˆä¸ºé«˜ç»´éœ€è¦å¾ˆå¼ºçš„æ­£åˆ™åŒ–[å¦‚L1ä½¿å¾—ä½†éƒ¨åˆ†ä¸º0åªæœ‰ä¸ªåˆ«å‡ ç»´ä¸ä¸º0]ï¼Œå¦åˆ™ä¼šå‡ºç°ä¸€ä¸ªåˆ†å—çš„å•ä½çŸ©é˜µé‚£æ ·) W= \\begin{pmatrix} 1 & 0 & \\cdots & 0 & 0 & \\cdots & 0 \\\\ 0 & 1 & \\cdots & 0 & 0 & \\cdots & 0 \\\\ \\vdots & \\vdots & \\ddots & \\vdots & \\vdots & \\ddots & \\vdots \\\\ 0 & 0 & \\cdots & 1 & 0 & \\cdots & 0 \\\\ 0 & 0 & \\cdots & 0 & 0 & \\cdots & 0 \\\\ \\vdots & \\vdots & \\ddots & \\vdots & \\vdots & \\ddots & \\vdots \\\\ 0 & 0 & \\cdots & 0 & 0 & \\cdots & 0 \\\\ \\end{pmatrix} ä¹‹åå°±å°†ç¬¬1å±‚è¿›è¡Œå›ºå®šï¼Œå†æ¬¡è¿›è¡Œauto-encoderæ“ä½œã€‚ ç„¶åï¼Œé‡å¤ä¸Šé¢çš„æ“ä½œå¦‚å›¾ï¼Œå†å‘ä¸‹å­¦ä¹ å¾—åˆ°ä¸‹ä¸€å±‚ã€‚ æœ€åä¸€å±‚ç›´æ¥éšæœºåˆå§‹åŒ–å³å¯ã€‚ åœ¨å¤§é‡æ•°æ®è¿›è¡Œè®­ç»ƒçš„æ—¶å€™ï¼Œä¸Šè¿°çš„æŠ€æœ¯è¿˜æ˜¯ååˆ†çš„é‡è¦çš„ã€‚ å…¶ä»–ç±»å‹çš„auto-encoder åŠ å…¥å™ªå£°åçš„auto-encoderï¼Œdecodeæ˜¯è·ŸåŸæ¥æ²¡æœ‰å™ªå£°çš„æ•°æ®è¿›è¡Œå¯¹æ¯”çš„ï¼Œä¸æ˜¯æœ€åŸå§‹çš„ç»“æœã€‚ Auto-encoder for CNN ç›®æ ‡æ˜¯ç›¸åŒçš„ï¼Œå‡å°è§£ç å‰å’Œé‡æ„ä»¥åçš„å·®åˆ«ã€‚ ç›¸æ¯”äºç¼–ç å™¨çš„å·ç§¯å’Œæ± åŒ–æ“ä½œï¼Œè§£ç å™¨çš„æ“ä½œä¸ºåå·ç§¯å’Œåæ± åŒ–ã€‚ CNN-Unpooling Maxpoolingæ˜¯å°†ä¸€ä¸ªkernelé‡Œå»æœ€å¤§çš„ä¸€ä¸ªã€‚ Unpoolingæ˜¯ä¿ç•™åŸæ¥å·ç§¯çš„ä½ç½®ä¿¡æ¯ï¼Œå…¶ä»–åœ°æ–¹ç”¨0æ¥è¡¥é½ã€‚ä½†æ˜¯kerasæ˜¯ç›´æ¥å°†å€¼å¤åˆ¶å››ä»½ã€‚ CNN-Deconvolutionå…¶å®ï¼Œdeconvolutionä¹Ÿæ˜¯ä¸€ç§å·ç§¯ã€‚ ä¸€èˆ¬çš„å·ç§¯æ˜¯å°†å¤šä¸ªå€¼å˜ä¸ºä¸€ä¸ªå€¼ï¼Œåå·ç§¯æ˜¯å°†ä¸€ä¸ªå€¼é€šè¿‡ä¹˜ä»¥ä¸åŒçš„æƒé‡å˜æˆå¤šä¸ªå€¼ã€‚ åå·ç§¯ä¹Ÿå¯ä»¥ç­‰ä»·ä¸ºå¤šä¸ªå€¼è½¬æ¢ä¸ºä¸€ä¸ªå€¼ï¼Œå…¶å®æ˜¯ç­‰ä»·çš„ã€‚ NEXT å°†ç¼–ç å€¼è¿›è¡Œè§£ç ï¼Œå³å¯ä»¥å¾—å‡ºå¦‚å›¾äºŒç»´codeçš„åˆ†å¸ƒï¼Œæ²¡æœ‰åˆ†å¸ƒç‚¹çš„çš„åœ°æ–¹è§£ç ä»¥åçš„ç»“æœä¸æ˜¯å¾ˆå¥½ï¼Œæœ‰ç‚¹åˆ†å¸ƒçš„åœ°æ–¹å¯ä»¥çœ‹åˆ°å¤§æ¦‚çš„æ•°å­—ã€‚ é€šè¿‡äºŒç»´çš„åˆ†å¸ƒæ¥åˆ¤æ–­é‚£è¾¹æ˜¯æœ‰å€¼å­˜åœ¨çš„ï¼Œé‚£è¾¹å–æ ·æ‰å¯èƒ½å‡ºç°ç»“æœã€‚ åœ¨codeä¸Šé¢åŠ L2çš„æ­£åˆ™åŒ–ï¼Œä¿è¯åœ¨0çš„é™„è¿‘éƒ½æ˜¯æœ‰å€¼çš„ã€‚","link":"/2022/02/08/Auto-encoder/Deep-Auto-encoder%E5%9F%BA%E6%9C%AC%E7%90%86%E8%AE%BA/"},{"title":"Auto-Encoderçš„è¡¥å……å†…å®¹","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦ä»‹ç»çš„æ˜¯auto-encoderçš„è¡¥å……å†…å®¹ï¼ŒåŒ…æ‹¬é™¤äº†é‡æ„è¯¯å·®ä»¥å¤–è¯„ä¼°ç¼–ç å™¨æ•ˆæœçš„åˆ¤åˆ«å™¨æ¨¡å‹ï¼Œä»¥åŠç¦»æ•£åŒ–è¡¨ç¤ºå­¦ä¹ çš„æ–¹æ³•æ¥è¿›è¡ŒåµŒå…¥ã€‚ More than minimizing reconstruction error ä»€ä¹ˆæ˜¯å¥½çš„embeddingï¼Œå¥½çš„embeddingå¯ä»¥å¾ˆå¥½çš„è¡¨ç¤ºå…¶ç¼–ç çš„å¯¹è±¡çš„ä¸»è¦ç‰¹å¾ï¼ˆå¦‚äº”ç­‰åˆ†èŠ±å«ä¸­ä¸‰ç–çš„ç‰¹ç‚¹æ˜¯å¸¦è€³æœºï¼‰ã€‚ é™¤äº†Reconstructionï¼Œå¦‚ä½•è¯„ä¼°encoderçš„æ•ˆæœï¼Ÿ(ä¸‹å›¾ä¸º ä¸€ä¸ªç¼–ç çš„ä¾‹å­) ä½¿ç”¨ä¸€ä¸ªåˆ¤åˆ«å™¨discriminatorâ€”â€”binary classifer å¦‚æœç¼–ç æ­£ç¡®è¾“å‡º1ï¼Œé”™è¯¯è¾“å‡º0ã€‚æ­¤æ—¶åˆ†ç±»å™¨å¯ä»¥å¾ˆå®¹æ˜“åˆ¤æ–­è¾“å‡ºç¼–ç çš„äº‰å–ä¸å¦ï¼Œå³ç¼–ç å…·æœ‰å¾ˆå¼ºçš„ä»£è¡¨æ€§ã€‚ å¦‚æœç¼–ç ä¸å…·æœ‰ä»£è¡¨æ€§ï¼Œåˆ†ç±»å™¨å¾ˆéš¾åˆ¤æ–­æ­£ç¡®å’Œé”™è¯¯ï¼Œæ­¤æ—¶ç¼–ç å™¨çš„ä»£è¡¨å¾ˆå·®ã€‚ äºæ˜¯ï¼Œè®­ç»ƒçš„ç›®æ ‡å‡½æ•°å˜æˆæœ€å°åŒ–$\\theta$ ä½¿å¾—æŸå¤±å‡½æ•°$L_D^*$æœ€å°ã€‚ \\begin{align} \\theta^*&=arg\\ \\min_\\limits{\\theta} \\ L_D^*\\\\ &=arg\\ \\min_\\limits{\\theta}\\ \\min_\\limits{\\phi}L_D^*\\\\ \\end{align}Train the encoder ğœƒand discriminator ğœ™ to minimize $L_D^*$ $\\Rightarrow$ (c.f. training encoder and decodert o minimize reconstruction error) ç»å…¸çš„auto-encoderå½¢å¼å…¶å®æ˜¯ä¸€ä¸ªç‰¹ä¾‹ã€‚ ä¸€èˆ¬çš„è®¾è®¡å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š è®­ç»ƒçš„æ—¶å€™ç»™å®šå›¾ç‰‡å’Œç¼–ç å‘é‡ï¼Œè¾“å‡ºçš„ä¸ºé‡æ„çš„è¯¯å·®ï¼Œè¿™é‡Œæ²¡æœ‰äº†positive exampleå’Œnegative exampleçš„å½±å“ï¼Œåªæ˜¯positive exampleçš„score(é‡æ„çš„é”™è¯¯ç‡)è¶Šå°è¶Šå¥½ã€‚ More interpretable embeddingDiscrete Representationä¸€èˆ¬æ–¹æ³• è¦å¾—åˆ°çš„ç¼–ç æ˜¯ä¸€ä¸ªä¸€ç»´å‘é‡ï¼Œæ¯ä¸ªå‘é‡éƒ½æœ‰å¾ˆå¥½çš„å¯è§£é‡Šæ€§ã€‚ non differentiable : https://arxiv.org/pdf/1611.01144.pdf å¤„ç†ä¸èƒ½å¾®åˆ†çš„è®ºæ–‡ã€‚ Binary vectorç›¸æ¯”one hot æ›´å¥½ï¼Œå› ä¸ºå…¶å‚æ•°ç›¸å¯¹æ›´å°‘ï¼Œè€Œä¸”å¯ä»¥äº§ç”Ÿè®­ç»ƒå‚æ•°é‡Œæ²¡æœ‰çš„ä¸œè¥¿ï¼ˆæ³›åŒ–æ€§èƒ½æ›´å¼ºï¼‰ã€‚ Vector Quantized Variational Auto encoder (VQVAE) Codebooké‡Œé¢æ˜¯ä¸€ç³»åˆ—çš„å‘é‡ï¼ŒCodebooké‡Œçš„ç³»åˆ—ä¹Ÿæ˜¯NNå­¦ä¹ å‡ºæ¥çš„ã€‚ å¾—å‡ºçš„code vector å’ŒCodebooké‡Œé¢çš„æ‰€æœ‰å‘é‡è¿›è¡Œç›¸ä¼¼åº¦çš„è®¡ç®—ï¼Œå–ç›¸ä¼¼åº¦æœ€é«˜çš„å‘é‡ï¼Œè¿›è¡Œdecoderã€‚(é€šè¿‡è¿™æ ·æ¥å®ç°ç¦»æ•£åŒ–) ç¦»æ•£åŒ–çš„ä½œç”¨æ˜¯ä¿ç•™å£°éŸ³é‡Œæ–‡å­—çš„éƒ¨åˆ†ï¼Œè¿‡æ»¤æ‰èƒŒæ™¯å™ªå£°çš„å› ç´ ã€‚","link":"/2022/02/08/Auto-encoder/Auto-encoder%E7%9A%84%E8%A1%A5%E5%85%85%E5%86%85%E5%AE%B9/"},{"title":"Variational Autoencoder(2013)","text":"hljs.initHighlightingOnLoad(); å…³äºç”Ÿæˆæ¨¡å‹çš„ç»¼è¿°ï¼š https://openai.com/blog/generative-models/ ç›¸æ¯”PixelRNN(2016)å’ŒGenerative Adversarial Network(2014)ï¼Œ VAEå…¶å®æ˜¯æœ€æ—§çš„æ¨¡å‹ã€‚ æœ¬æ–‡ä¸»è¦ä»‹ç»VAEçš„ä¸€äº›ç†è®ºå’Œç›´è§‚å’Œæ­£å¼çš„è§£é‡Šä»¥åŠä¸€äº›é—®é¢˜å’Œå±€é™ã€‚ Basic introduction ä½†æ˜¯å®é™…ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œauto-encoderçš„æ•ˆæœå¹¶ä¸æ˜¯å¾ˆå¥½ã€‚ VAEçš„encoderç”Ÿæˆçš„æ˜¯ä¸¤ä¸ªå‘é‡ï¼Œç„¶åè®©å…¶ä¸­ä¸€ä¸ªå’Œä¸€ç»„æ­£æ€åˆ†å¸ƒçš„å‘é‡åšå†…ç§¯ï¼Œç„¶åå’Œå¦ä¸€ç»„ç›¸åŠ ä¹‹åä½œä¸ºç¼–ç è¿›è¡Œdecoderã€‚ æŸå¤±å‡½æ•°ä¹Ÿä¸ä»…ä»…æ˜¯ç›´æ¥ä½¿ç”¨æœ€å°åŒ–reconstruction errorï¼Œè€Œæ˜¯å¢åŠ äº†ä¸€ä¸ªæŸå¤±é¡¹ -\\sum_{i=1}^{3}(\\exp(\\sigma_i)-(1+\\sigma_i)+m_i^2) åœ¨ç”Ÿæˆçš„ç»“æœä¸Šä¹Ÿæ˜¯æ¯”è¾ƒä¸€èˆ¬çš„ã€‚ è¿™é‡Œä¸»è¦åšçš„æ˜¯å°†VAEè®­ç»ƒå¥½ä¹‹åï¼Œä½¿ç”¨å°†decoderå•ç‹¬æå–å‡ºæ¥ï¼Œç„¶åå°†codeçš„10-dimä¸­å»å›ºå®š8ä¸ªï¼Œå°†å‰©ä¸‹çš„ä¸¤ä¸ªè¿›è¡Œæµ‹è¯•çœ‹å…¶å¯ä»¥ç”Ÿæˆä»€ä¹ˆæ ·çš„å›¾ç‰‡ã€‚ é€šè¿‡åˆ†æä¸Šè¿°çš„ç»“æœæ¥å‘è§‰æ¯ä¸ªç»´åº¦çš„ä»£è¡¨çš„å¤§æ¦‚å«ä¹‰ã€‚ Why VAEä¸ºä»€ä¹ˆä½¿ç”¨VAEï¼Ÿ ç›´è§‚è§£é‡Š VAEå¢åŠ äº†å™ªå£°é¡¹ï¼Œè¿™æ ·çš„è¯æˆ‘ä»¬åœ¨ä¸€å®šçš„èŒƒå›´å†…ç­‰å¯ä»¥å¾—å‡ºæ»¡æœˆå’Œæ–°æœˆçš„å›¾ç‰‡ï¼› è€Œä¸”VAEç”Ÿæˆæ–°çš„codeçš„è¿‡ç¨‹æ•ˆæœæ¯”ä¼ ç»Ÿåœ°AEè¦å¥½ã€‚ è¿™é‡Œé¢å‡ ä¸ªå‚æ•°åœ°å«ä¹‰ï¼š $\\sigma_i$ ï¼šä»£è¡¨ä¸»è¦åœ°å™ªå£°é¡¹ï¼Œè¡¨ç¤ºé€ æˆçš„æ–¹å·®å¤§å°ï¼Œè¿™é‡ŒåŠ ä¸€ä¸ª$\\exp()$çš„ä½œç”¨æ˜¯ä¿è¯è¾“å‡ºä¸€å®šè¦ä¸ºæ­£çš„ï¼Œå› ä¸ºåªæœ‰ä¸ºæ­£æ‰å¯ä»¥ä¿è¯å…¶å¯ä»¥ä½œä¸ºæ–¹å·®varianceæ¥å‚ä¸è®¡ç®—ã€‚ $e_i$ï¼šä»£è¡¨äº†æ–¹å·®çš„æ”¾å¤§å€æ•°ï¼Œæ˜¯éšæœºäº§ç”Ÿçš„æ•°ã€‚å¦‚æœæ²¡æœ‰$e_i$çš„è¯ï¼Œé‚£ä¹ˆæ–¹å·®éƒ½æ˜¯ç”±encoderè‡ªå·±æ¥å†³å®šï¼Œencoderå¯èƒ½ä¼šè‡ªå·±ç›´æ¥å°†å…¶trainä¸º0ï¼Œè¿™æ ·çš„è¯å°±å’ŒAEæ˜¯ä¸€æ ·çš„äº†ã€‚å› æ­¤è¦ä¿è¯$e_i$ä¸ä¸º0. Loss functionï¼šè¦åŠ å…¥é™åˆ¶$\\sigma_i$ä¸º0çš„é¡¹ï¼Œå› ä¸ºå¦‚æœè¿™æ ·å°±æ˜¯æˆä¸ºä¸€ä¸ªAEäº†ï¼Œæ‰€ä»¥å°±æœ‰äº†ä¸Šé¢çš„ç¬¬äºŒæŸå¤±å‡½æ•°ã€‚ å¦‚å›¾å¯å¾—ï¼Œç»¿çº¿åœ¨æœ€ä½ç‚¹çš„æ—¶å€™ï¼Œæ­¤æ—¶çš„$\\sigma_i=1$ï¼Œé˜²æ­¢å…¶ä¸º0ã€‚ ç¬¬äºŒé¡¹ä¸ºæ­£åˆ™åŒ–é¡¹ã€‚ æ­£è§„è§£é‡Šå°±æ˜¯ç”Ÿæˆä¸€äº›æ•°æ®ç‚¹æ¥ä¼°è®¡æ¦‚ç‡åˆ†å¸ƒã€‚ è¿™é‡Œç”¨é«˜æ–¯æ··åˆæ¨¡å‹æ¥è§£é‡Š GMN Gaussian Mixture Model. å¦‚ä½•ä»é«˜æ–¯åˆ†éƒ¨ä¸­è¿›è¡Œå–æ ·ï¼š é¦–å…ˆï¼Œä»ä¸€ä¸ªç®€å•éšæœºåˆ†å¸ƒä¸­è¿›è¡Œå–æ ·ï¼Œæ¥åˆ¤æ–­æ˜¯ä»é‚£ä¸ªé«˜æ–¯åˆ†å¸ƒä¸­å–æ ·ã€‚$m \\sim P(m)$ ä¹‹åï¼Œé€‰æ‹©ç¬¬ä¸€æ¬¡å¾—åˆ°çš„mï¼Œä»ç¬¬mä¸ªGaussian Model ä¸­å–æ ·ã€‚ $x|m \\sim N(\\mu^m,\\sum^m)$ è¿™æ ·ç›¸å½“äºæœ‰æ— ç©·ä¸ªGaussian åŒæ—¶ï¼Œåœ¨è¿™ä¸ªåˆ†å¸ƒä¸­æœ‰æ¯ä¸€ä¸ªzéƒ½ä¼šå¯¹åº”ä¸€ä¸ªGaussianåˆ†å¸ƒã€‚ p(x)=\\int_zP(z)p(x|z)\\ dz å…¶å® $z$ è¿™ä¸ªåˆ†å¸ƒå¯ä»¥æ˜¯ä»»ä½•åˆ†å¸ƒï¼Œä¸ä¸€å®šéè¦æ˜¯é«˜æ–¯ã€‚ä½†æ˜¯NNçš„é€¼è¿‘èƒ½åŠ›å¾ˆå¼ºï¼Œå› æ­¤å…¶å®ä¸ç”¨å¤ªåœ¨æ„zçš„åˆ†å¸ƒã€‚ æ¨¡å‹ä¼°è®¡â€”â€”MAE æˆ‘ä»¬æå¤§ä¼¼ç„¶ä¸»è¦æ˜¯ç”¨æ¥ä¼°è®¡$\\mu(z),\\sigma(z)$çš„è¡¨è¾¾å¼ã€‚é€šè¿‡æå¤§ä¼¼ç„¶æ¥è°ƒèŠ‚NNçš„å‚æ•°ã€‚ æˆ‘ä»¬è¿˜éœ€è¦å¦ä¸€ä¸ªåˆ†å¸ƒ$q(z|x)$ï¼Œå…¶å¯ä»¥æ˜¯ä»»ä½•çš„åˆ†å¸ƒã€‚ è¿™ä¸€æ­¥ä¸»è¦æ˜¯ç”¨æ¥å‡‘KLæ•£åº¦çš„ï¼ŒKL divä¸»è¦æ˜¯æ¥è®¡ç®—ä¸¤ä¸ªåˆ†å¸ƒçš„è·ç¦»ï¼Œå³ç›¸ä¼¼ç¨‹åº¦ã€‚ å› æ­¤é—®é¢˜è½¬æ¢ä¸ºæ‰¾ä¸€é¡¹$q(z|x) \\rightarrow P(z|x)$ï¼› å¦‚æœç›´æ¥è°ƒ$P(x|z)$ ä¼šä½¿$L,L_b,KL$ ä¸‰ä¸ªåŒæ—¶å˜åŒ–ï¼Œä¸å¤ªå¥½æ§åˆ¶ï¼Œå› æ­¤ä½†æ˜¯$q(z|x)$æ˜¯å’Œ$L$æ— å…³çš„ï¼Œä»…ä»…å½±å“æ•£åº¦å’Œ lower bound. $L_b$ ä¸Šå‡ï¼Œä¹Ÿå°±ä¼šé©±ä½¿Lçš„ä¸Šå‡ï¼Œä»è€Œè¾¾åˆ°æœ€å¤§åŒ–Lçš„ç›®çš„ã€‚åŒæ—¶ä¹Ÿå¾—åˆ°$P(x|z)$çš„ä¸€ä¸ªä¼°è®¡å€¼ã€‚ æ³¨æ„è¿™é‡Œçš„$q(z|x)$æ˜¯ä¸€ä¸ªNNï¼Œå› æ­¤æå¤§ä¼¼ç„¶å°±æ˜¯è°ƒæ•´NNå‚æ•°ï¼Œä½¿å…¶æ¥è¿‘$P(z)$ ï¼Œè‘—å…¶å®å°±æ˜¯ä¸AEçš„ä¸è¦ä¸åŒä¹‹å¤„ã€‚ å› æ­¤å°±å˜æˆä»$z \\sim q(z|x)$ å¾—åˆ°zï¼Œä¹‹ååˆ©ç”¨è¿™ä¸ªzå»äº§ç”Ÿxï¼Œä½¿å¾—æœŸæœ›è¶Šå¤§è¶Šå¥½ï¼Œ$x \\sim P(x|z)$ ã€‚ è¿™é‡Œå°±æ˜¯è®©$\\mu(x)\\rightarrow x$ å…¶å®å°±æ˜¯AEã€‚ æ¡ä»¶VAEï¼Œé“¾æ¥ï¼šhttps://arxiv.org/pdf/1406_5298v2.pdf Problems of VAEVAEå…¶å®å°±æ˜¯åŠªåŠ›è¿›è¡Œé€¼è¿‘å’Œç›¸ä¼¼ï¼Œå¹¶æ²¡æœ‰å¾ˆå¼ºçš„ç”Ÿæˆæ–°çš„èƒ½åŠ›ã€‚ ä»…ä»…æ˜¯åœ¨æ¨¡ä»¿ï¼Œæ²¡æœ‰ç”Ÿæˆåˆ›æ–°èƒ½åŠ›ï¼Œç”Ÿæˆæ–°çš„æ¨¡å‹è¦çœ‹GANã€‚","link":"/2022/03/21/Auto-encoder/Variational-Autoencoder-2013/"},{"title":"Condition_WGAN_GPçš„æ­å»º","text":"hljs.initHighlightingOnLoad(); è¿™ä¸ªæ¨¡å‹å’ŒACGANæœ‰ç›¸ä¼¼ä¹‹å¤„ï¼Œéƒ½å¢åŠ äº†æ ‡ç­¾çš„embeddingå±‚ï¼Œç”¨æ¥è¾…åŠ©è®­ç»ƒã€‚è¿™æ ·å¯ä»¥å®ç°è®­ç»ƒçš„ç»“æœå’ŒåŸæ¥æ ‡ç­¾å®ç°ä¸€ä¸€å¯¹åº”ã€‚ æœ¬æ–‡ä¸»è¦æ˜¯åœ¨WGAN-GPçš„åŸºç¡€ä¸Šä¿®æ”¹ï¼Œä¸»è¦å¢åŠ äº†å’Œlabelä¸embeddingç›¸å…³çš„å‚æ•°ï¼Œå¹¶ä¿®æ”¹äº†æ¨¡å‹ã€‚ä½†æ˜¯è®­ç»ƒçš„æ•ˆæœä¸æ˜¯å¾ˆæ»¡æ„ï¼Œæ”¶æ•›çš„é€Ÿåº¦ä¸å¦‚WGAN-GPã€‚ æ¨¡å‹æ­å»º åœ¨æ¨¡å‹æ­å»ºä¸Šï¼Œè¯¥æ¨¡å‹ä¸»è¦å¢åŠ äº†labelçš„embeddingå±‚ï¼Œå¹¶å°†embeddingå±‚å’ŒåŸæ¥çš„è¾“å…¥å±‚è¿›è¡Œå †å ã€‚ åˆ¤åˆ«å™¨ å¢åŠ äº†embeddingå±‚ï¼š å¢åŠ äº†ä¸labelså’Œembeddingå±‚ç›¸å…³çš„å‚æ•°ï¼š å‰å‘ä¼ æ’­å‡½æ•°å¢åŠ äº†embeddingçš„å†…å®¹ï¼š å®Œæ•´ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152class Discriminator(nn.Module): def __init__(self, channel_img, features_d, num_classes, img_size): super(Discriminator, self).__init__() self.img_size = img_size self.disc = nn.Sequential( # Input: N x channels_img x 64 x 64 nn.Conv2d( in_channels=channel_img+1, # ç”±äºå¢åŠ äº†ä¸€ä¸ªç¼–ç å±‚ å› æ­¤è¦åŠ 1 out_channels=features_d, kernel_size=4, stride=2, padding=1 ), # 32 x 32 nn.LeakyReLU(0.2), self._block(features_d, features_d * 2, 4, 2, 1), # 16 x 16 self._block(features_d * 2, features_d * 4, 4, 2, 1), # 8 x 8 self._block(features_d * 4, features_d * 8, 4, 2, 1), # 4 x 4 nn.Conv2d(features_d * 8, 1, kernel_size=4, stride=2, padding=0), # 1x1 nn.Sigmoid(), ) # å¢åŠ ä¸€ä¸ªç¼–ç å™¨ å°†ä¸€ä¸ªlabelç¼–ç ä¸ºä¸€ä¸ªå›¾ç‰‡ self.embed = nn.Embedding( num_embeddings=num_classes, embedding_dim=img_size*img_size ) def _block(self, in_channels, out_channels, kernel_size, stride, padding): return nn.Sequential( nn.Conv2d( in_channels=in_channels, out_channels=out_channels, kernel_size=kernel_size, stride=stride, padding=padding, bias=False ), nn.LeakyReLU(0.2), nn.BatchNorm2d(out_channels), ) def forward(self, x, labels): # label -&gt; [batch_size, 1] -&gt; N x 1 embedding = self.embed(labels).view([labels.shape[0], 1, self.img_size, self.img_size]) # embedding -&gt; N x 1 x img_size(64) x img_size x = torch.cat([x, embedding], dim=1) # x -&gt; N x channel_img x img_size(64) x img_size # dim=1 ä»£è¡¨åœ¨ç¬¬äºŒç»´ä¸Šè¿›è¡Œå †å  å°±æ˜¯åœ¨channelä¸Šå †å  return self.disc(x) ç”Ÿæˆå™¨ embed_sizeï¼šç¼–ç å™¨å°†num_classesç»´è½¬æ¢ä¸ºembed_sizeã€‚ æ–°å¢embeddingå±‚ï¼š ä¿®æ”¹å‰å‘ä¼ æ’­å‡½æ•°ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546class Generator(nn.Module): def __init__(self, z_dim, channels_img, features_g, num_classes, img_size, embed_size): # z_dim ç”Ÿæˆå™ªå£°çš„ç»´åº¦ # channels_img å›¾ç‰‡çš„ç»´åº¦ super(Generator, self).__init__() self.img_size = img_size self.gen = nn.Sequential( # Input: N x (z_dim + embed_size) x 1 x 1 self._block(z_dim + embed_size, features_g*16, 4, 1, 0), # N x f_g*16 x 4 x 4 self._block(features_g*16, features_g*8, 4, 2, 1), # 8 x 8 self._block(features_g*8, features_g*4, 4, 2, 1), # 16 x 16 self._block(features_g*4, features_g*2, 4, 2, 1), # 32 x 32 nn.ConvTranspose2d( features_g*2, channels_img, kernel_size=4, stride=2, padding=1 ), # 64 x 64 nn.Tanh(), # [-1, 1] # ç”±äºmnistæ•°æ®é›†çš„ç‰¹ç‚¹ï¼Œæˆ‘ä»¬è¾“å…¥æ ‡å‡†åŒ–åçš„æ•°æ®æ˜¯[-1,1] # æœ€åçš„è¾“å‡ºè¦åœ¨[-1,1]ä¹‹é—´ ) # ç¼–ç çš„ç»´åº¦è¦è·Ÿå™ªå£°çš„ç»´åº¦ç›¸åŒ self.embed = nn.Embedding(num_embeddings=num_classes, embedding_dim=embed_size) def _block(self, in_channels, out_channels, kernel_size, stride, padding): return nn.Sequential( nn.ConvTranspose2d( in_channels=in_channels, out_channels=out_channels, kernel_size=kernel_size, stride=stride, padding=padding, bias=False ), nn.BatchNorm2d(out_channels), nn.ReLU(), ) def forward(self, x, labels): embedding = self.embed(labels).unsqueeze(2).unsqueeze(3) # unsqueeze()çš„ä½œç”¨æ˜¯å¢åŠ ç»´åº¦ï¼Œè¿™é‡Œå¢åŠ äº†ç¬¬3ï¼Œ4ç»´ # embedding -&gt; N x embed_size x 1 x 1 # x -&gt; N x z_dim x 1 x 1 x = torch.cat([x, embedding], dim=1) return self.gen(x) æ¢¯åº¦æƒ©ç½šé¡¹å¢åŠ äº†å’Œlabelç›¸å…³çš„å‚æ•°å³å¯ã€‚ 12345678910111213141516171819202122def gradient_penalty(critic, real, labels, fake, device=&quot;cpu&quot;): batch_size, channels, H, W = real.shape epsilon = torch.rand((batch_size, 1, 1, 1)).repeat(1, channels, H, W).to(device) interpolated_images = real * epsilon + fake * (1 - epsilon) # è®¡ç®—åˆ¤åˆ«å™¨è¾“å‡º mix_scores = critic(interpolated_images, labels) # æ±‚å¯¼ gradient = torch.autograd.grad( inputs=interpolated_images, outputs=mix_scores, grad_outputs=torch.ones_like(mix_scores), create_graph=True, retain_graph=True, )[0] gradient = gradient.view(gradient.shape[0], -1) gradient_norm = gradient.norm(2, dim=1) # æ±‚2-èŒƒæ•° gradient_penalty_value = torch.mean((gradient_norm - 1) ** 2) return gradient_penalty_value å‚æ•°è®¾ç½®123# æ–°å¢ç¼–ç å‚æ•°num_classes = 10gen_embedding = 100 å…¶ä»–å‚æ•°å’ŒåŸæ¥ç›¸ä¼¼ï¼Œå®Œæ•´ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465# Hyperparameters etc (è¶…å‚æ•°)device = &quot;cuda&quot; if torch.cuda.is_available() else &quot;cpu&quot;lr = 5e-5# ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸¤ç»„å­¦ä¹ ç‡ï¼Œä¸€ä¸ªæ˜¯ç”Ÿæˆå™¨çš„ã€ä¸€ä¸ªæ˜¯åˆ¤åˆ«å™¨çš„ã€‚z_dim = 64# åŒæ ·çš„å¯ä»¥å°è¯• 128, 256image_size = 64# ganå¯¹äºè¶…å‚æ•°ç›¸å½“çš„æ•æ„Ÿï¼Œ# æ¢ä¸€ä¸ªå…¶ä»–çš„å‚æ•°å¯èƒ½å°±not workäº†batch_size = 64num_epoch = 3channels_img = 1features_disc = 64features_gen = 64# WGANç‰¹æœ‰çš„å‚æ•°critic_iteration = 5# weight_clip = 0.01LAMBEDA_GP = 10# æ–°å¢ç¼–ç å‚æ•°num_classes = 10gen_embedding = 100transforms = transforms.Compose([ transforms.Resize(image_size), transforms.ToTensor(), transforms.Normalize( [0.5 for _ in range(channels_img)], [0.5 for _ in range(channels_img)] ) # è‡ªé€‚åº”æˆ‘ä»¬çš„é€šé“æ•°ï¼Œå‡ ä¸ªé€šé“éƒ½ä¸º0.5 # transforms.Normalize((0.1307,), (0.3081,)) # å‚æ•°è°·æ­Œçš„å‚æ•°ï¼Œè®¡ç®—mnistçš„åå·®å€¼ # ä½†æ˜¯è¿™ç»„å‚æ•°å¯èƒ½ä¼šå¯¼è‡´ä¸æ”¶æ•›ï¼Œå› æ­¤æˆ‘ä»¬æ¢ç”¨åŸæ¥çš„å‚æ•°])dataset = datasets.MNIST(root=&quot;./dataset&quot;, transform=transforms, download=True)loader = DataLoader(dataset, batch_size=batch_size, shuffle=True)disc_critic = Discriminator(channels_img, features_disc, num_classes, image_size).to(device)gen = Generator(z_dim, channels_img, features_gen, num_classes, image_size, gen_embedding).to(device)# åˆå§‹åŒ–æ¨¡å‹initialize_weights(disc_critic)initialize_weights(gen)# è®¾ç½®ä¼˜åŒ–å™¨opt_disc = optim.Adam(disc_critic.parameters(), lr=lr, betas=(0.0, 0.9))opt_gen = optim.Adam(gen.parameters(), lr=lr, betas=(0.0, 0.9))fixed_noise = torch.randn((batch_size, z_dim, 1, 1)).to(device)# æŸå¤±å‡½æ•°# criterion = nn.BCELoss()# Binary Cross Entropywriter_fake = SummaryWriter(f&quot;runs/CWGAN_MNIST/fake&quot;)writer_real = SummaryWriter(f&quot;runs/CWGAN_MNIST/real&quot;) æ¨¡å‹è®­ç»ƒ ä¸»è¦çš„å˜åŒ–æ˜¯åœ¨å¢åŠ äº†å’Œlabelç›¸å…³çš„å‚æ•°ï¼Œå…¶ä»–éƒ¨åˆ†ä¸å˜ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778step = 0gen.train()disc_critic.train()# trainfor epoch in range(num_epoch): for batch_idx, (real, labels) in enumerate(loader): real = real.to(device) labels = labels.to(device) # å°†å›¾ç‰‡åä¸¤ç»´å±•å¹³ ç¬¬ä¸€ç»´ä¸ºbatch_size # batch_size = real.shape[0] for _ in range(critic_iteration): # ------------------------------------------------------------ # Train Discriminator: # max {log(D(real)) + log(1 - D(G(Z))} # ç­‰ä»·äº min{-log(D(real)) - log(1 - D(G(Z))} noise = torch.randn((batch_size, z_dim, 1, 1)).to(device) fake = gen(noise, labels) # G(z) critic_real = disc_critic(real, labels).reshape(-1) critic_fake = disc_critic(fake, labels).reshape(-1) gp = gradient_penalty(disc_critic, real, labels, fake, device=device) # è¿™é‡Œè‡ªå®šä¹‰äº†æŸå¤±å‡½æ•° # (f-GANè®ºæ–‡è®²äº†ï¼Œå…¶å®æŸå¤±å‡½æ•°çš„è®¾ç½®å¯¹ç»“æœçš„å½±å“ä¸å¤§) loss_critic = ( -(torch.mean(critic_real) - torch.mean(critic_fake)) + LAMBEDA_GP*gp ) # åˆå§‹åŒ–æ¢¯åº¦ disc_critic.zero_grad() # åå‘ä¼ æ’­ loss_critic.backward(retain_graph=True) # ä¼˜åŒ–å™¨ä¼˜åŒ– opt_disc.step() # ------------------------------------------------------------ # Train Generator # min log(1 - D(G(z)) -&gt; min -log(D(G(z)) # -&gt; max D(G(z)) # å¼€å§‹çš„æ—¶å€™ä¼šå› ä¸ºæ¢¯åº¦é¥±å’Œè®­ç»ƒä¸åŠ¨ # å› æ­¤æ¢äº†æŸå¤±å‡½æ•° # æˆ‘ä»¬åœ¨è®­ç»ƒç”Ÿæˆå™¨æ—¶è¿˜æƒ³ç”¨ä¹‹å‰åˆ¤åˆ«å™¨çš„æ¢¯åº¦å’Œå‚æ•° # è¿™é‡Œæœ‰ä¸¤ç§åŠæ³• # lossD.backward(retain_grap=True) # disc_fake = disc(fake.detach()).view(-1) output = disc_critic(fake, labels).reshape(-1) # ç”±äºä¸Šé¢retain_graph=True, å› æ­¤ç›¸å½“äºæ­¤æ—¶çš„åˆ¤åˆ«å™¨æ—¶å›ºå®šçš„ loss_gen = - torch.mean(output) gen.zero_grad() loss_gen.backward() opt_gen.step() if batch_idx % 100 == 0: print( f&quot;Epoch [{epoch}/{num_epoch}] Batch {batch_idx}/{len(loader)} &quot; f&quot;loss_critic: {loss_critic:.4f}, loss_gen: {loss_gen:.4f}&quot; ) gen.eval() disc_critic.eval() with torch.no_grad(): fake = gen(noise, labels) # æ¯æ¬¡æµ‹è¯•çš„å™ªå£°æ˜¯ä¸å˜çš„ï¼Œéƒ½æ˜¯å°†ä¸€ç»„å›ºå®šçš„å™ªå£°è½¬æ¢çš„fake å‡çš„å›¾ç‰‡ img_grid_fake = torchvision.utils.make_grid( fake, normalize=True) img_grid_real = torchvision.utils.make_grid( real, normalize=True) writer_fake.add_image( &quot;Mnist Fake Images&quot;, img_grid_fake, global_step=step ) writer_real.add_image( &quot;Mnist real Images&quot;, img_grid_real, global_step=step ) step = step + 1 gen.train() disc_critic.train()","link":"/2022/02/12/Generative%20Adversarial%20Networks/Condition-WGAN-GP%E7%9A%84%E6%90%AD%E5%BB%BA/"},{"title":"DCGAN çš„æ­å»º","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦æ ¹æ®è§†é¢‘æ•™ç¨‹æ¥æ­å»ºçš„ä¸€ä¸ªå·ç§¯å¯¹æŠ—ç½‘è·¯DCGANæ¨¡å‹ï¼Œç›¸æ¯”ä¹‹å‰çš„ç½‘ç»œæ˜¯å°†çº¿æ€§å±‚æ¢æˆå·ç§¯å±‚å’Œåå·ç§¯å±‚ï¼Œæ•°æ®é›†åªè¦éœ€ç”¨çš„æ˜¯Mnistæ‰‹å†™æ•°æ®é›†ï¼Œä¸»è¦ä»æ¨¡å‹æ­å»ºã€å‚æ•°è®¾ç½®å’Œæ¨¡å‹è®­ç»ƒä¸‰ä¸ªæ–¹é¢è¿›è¡Œè®²è§£ã€‚ åŸè®ºæ–‡è¦ç‚¹ ä¸ºäº†ä¿è¯ç½‘ç»œçš„ç¨³å®šæ€§ï¼ŒDCGANå»æ‰äº†æœ€å¤§æ± åŒ–å±‚å’Œå¹³å‡æ± åŒ–å±‚ã€‚ å†åˆ¤åˆ«å™¨å’Œç”Ÿæˆå™¨ä¸­ä½¿ç”¨äº†BatchNormã€‚ å»æ‰çš„å…¨è¿æ¥éšè—å±‚ã€‚ åœ¨ç”Ÿæˆå™¨ä¸­ä½¿ç”¨ReLUæ¿€æ´»å‡½æ•°ï¼Œé™¤äº†æœ€åä¸€ä¸ªè¾“å‡ºå±‚ã€‚ åœ¨åˆ¤åˆ«å™¨ä¸­ä½¿ç”¨LeakyReLUæ¿€æ´»å‡½æ•°ã€‚ å¯¼å…¥ç›¸å…³åŒ…12345678import torchimport torch.nn as nnimport torch.optim as optimimport torchvisionimport torchvision.datasets as datasetsfrom torch.utils.data import DataLoaderfrom torch.utils.tensorboard import SummaryWriterimport torchvision.transforms as transforms æ¨¡å‹æ­å»ºåˆ¤åˆ«å™¨1234567891011121314151617181920212223242526272829303132333435363738class Discriminator(nn.Module): def __init__(self, channel_img, features_d): super(Discriminator, self).__init__() self.disc = nn.Sequential( # Input: N x channels_img x 64 x 64 nn.Conv2d( in_channels=channel_img, out_channels=features_d, kernel_size=4, stride=2, padding=1 ), # 32 x 32 nn.LeakyReLU(0.2), self._block(features_d, features_d * 2, 4, 2, 1), # 16 x 16 self._block(features_d * 2, features_d * 4, 4, 2, 1), # 8 x 8 self._block(features_d * 4, features_d * 8, 4, 2, 1), # 4 x 4 nn.Conv2d(features_d * 8, 1, kernel_size=4, stride=2, padding=0), # 1x1 nn.Sigmoid(), ) def _block(self, in_channels, out_channels, kernel_size, stride, padding): return nn.Sequential( nn.Conv2d( in_channels=in_channels, out_channels=out_channels, kernel_size=kernel_size, stride=stride, padding=padding, bias=False ), nn.LeakyReLU(0.2), nn.BatchNorm2d(out_channels), ) def forward(self, x): return self.disc(x) ä¸»è¦çš„åŒºåˆ«æ˜¯å°†çº¿æ€§è¿æ¥æ¢æˆäº†å·ç§¯ï¼Œå…¶ä»–ä¸å˜ã€‚ ç”Ÿæˆå™¨123456789101112131415161718192021222324252627282930313233343536class Generator(nn.Module): def __init__(self, z_dim, channels_img, features_g): # z_dim ç”Ÿæˆå™ªå£°çš„ç»´åº¦ # channels_img å›¾ç‰‡çš„ç»´åº¦ super(Generator, self).__init__() self.gen = nn.Sequential( # Input: N x z_dim x 1 x 1 self._block(z_dim, features_g*16, 4, 1, 0), # N x f_g*16 x 4 x 4 self._block(features_g*16, features_g*8, 4, 2, 1), # 8 x 8 self._block(features_g*8, features_g*4, 4, 2, 1), # 16 x 16 self._block(features_g*4, features_g*2, 4, 2, 1), # 32 x 32 nn.ConvTranspose2d( features_g*2, channels_img, kernel_size=4, stride=2, padding=1 ), # 64 x 64 nn.Tanh(), # [-1, 1] # ç”±äºmnistæ•°æ®é›†çš„ç‰¹ç‚¹ï¼Œæˆ‘ä»¬è¾“å…¥æ ‡å‡†åŒ–åçš„æ•°æ®æ˜¯[-1,1] # æœ€åçš„è¾“å‡ºè¦åœ¨[-1,1]ä¹‹é—´ ) def _block(self, in_channels, out_channels, kernel_size, stride, padding): return nn.Sequential( nn.ConvTranspose2d( in_channels=in_channels, out_channels=out_channels, kernel_size=kernel_size, stride=stride, padding=padding, bias=False ), nn.BatchNorm2d(out_channels), nn.ReLU(), ) def forward(self, x): return self.gen(x) è¿™é‡Œç”Ÿæˆå™¨ä¸»è¦ä½¿ç”¨çš„æ˜¯åå·ç§¯æ“ä½œã€‚ åˆå§‹åŒ–å’Œæµ‹è¯•1234567891011121314151617181920def initialize_weights(model): for m in model.modules(): if isinstance(m, (nn.Conv2d, nn.ConvTranspose2d, nn.BatchNorm2d)): nn.init.normal_(m.weight.data, mean=0.0, std=.02)def test(): N, in_channels, H, W = 8, 3, 64, 64 z_dim = 100 x = torch.randn((N, in_channels, H, W)) disc = Discriminator(in_channels, 8) initialize_weights(disc) tmp = disc(x).shape == (N, 1, 1, 1) assert tmp gen = Generator(z_dim, in_channels, 8) z = torch.randn((N, z_dim, 1, 1)) tmp = gen(z).shape == (N, in_channels, H, W) assert tmp print(&quot;Success&quot;) å‚æ•°è®¾ç½®è¶…å‚æ•°è®¾è®¡1234567891011121314# Hyperparameters etc (è¶…å‚æ•°)device = &quot;cuda&quot; if torch.cuda.is_available() else &quot;cpu&quot;lr = 2e-4# 3e-4 æ˜¯å¯¹äºAdam æ¥è¯´æœ€å¥½çš„å­¦ä¹ ç‡z_dim = 64# åŒæ ·çš„å¯ä»¥å°è¯• 128, 256image_size = 64# ganå¯¹äºè¶…å‚æ•°ç›¸å½“çš„æ•æ„Ÿï¼Œ# æ¢ä¸€ä¸ªå…¶ä»–çš„å‚æ•°å¯èƒ½å°±not workäº†batch_size = 128num_epoch = 50channels_img = 1features_disc = 64features_gen = 64 features_discã€features_genåˆ†åˆ«ä¸ºåˆ¤åˆ«å™¨å’Œç”Ÿæˆå™¨å·ç§¯å±‚ä¸­çš„ç‰¹å¾é€šé“æ•°ã€‚ channels_img = 1æ•°æ®çš„é€šé“æ•°ã€‚ æ•°æ®åˆå§‹åŒ–123456789101112131415161718transforms = transforms.Compose([ transforms.Resize(image_size), transforms.ToTensor(), transforms.Normalize( [0.5 for _ in range(channels_img)], [0.5 for _ in range(channels_img)] ) # è‡ªé€‚åº”æˆ‘ä»¬çš„é€šé“æ•°ï¼Œå‡ ä¸ªé€šé“éƒ½ä¸º0.5 # transforms.Normalize((0.1307,), (0.3081,)) # å‚æ•°è°·æ­Œçš„å‚æ•°ï¼Œè®¡ç®—mnistçš„åå·®å€¼ # ä½†æ˜¯è¿™ç»„å‚æ•°å¯èƒ½ä¼šå¯¼è‡´ä¸æ”¶æ•›ï¼Œå› æ­¤æˆ‘ä»¬æ¢ç”¨åŸæ¥çš„å‚æ•°])dataset = datasets.MNIST(root=&quot;./dataset&quot;, transform=transforms, download=True)loader = DataLoader(dataset, batch_size=batch_size, shuffle=True) åˆå§‹åŒ–æ¨¡å‹123disc = Discriminator(channels_img, features_disc).to(device)gen = Generator(z_dim, channels_img, features_gen).to(device)fixed_noise = torch.randn((batch_size, z_dim, 1, 1)).to(device) æŸå¤±å‡½æ•°ä¸ä¸ä¼˜åŒ–å™¨çš„åˆå§‹åŒ–123456789# è®¾ç½®ä¼˜åŒ–å™¨opt_disc = optim.Adam(disc.parameters(), lr=lr, betas=(0.5, 0.999))# å¯ä»¥è€ƒè™‘è®¾ç½®betas=çš„å‚æ•°opt_gen = optim.Adam(gen.parameters(), lr=lr, betas=(0.5, 0.999))fixed_noise = torch.randn((batch_size, z_dim, 1, 1)).to(device)# æŸå¤±å‡½æ•°criterion = nn.BCELoss() æ¨¡å‹è®­ç»ƒ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869writer_fake = SummaryWriter(f&quot;runs/DCGAN_MNIST/fake&quot;)writer_real = SummaryWriter(f&quot;runs/DCGAN_MNIST/real&quot;)step = 0# trainfor epoch in range(num_epoch): for batch_idx, (real, _) in enumerate(loader): real = real.to(device) # å°†å›¾ç‰‡åä¸¤ç»´å±•å¹³ ç¬¬ä¸€ç»´ä¸ºbatch_size batch_size = real.shape[0] # ------------------------------------------------------------ # Train Discriminator: # max {log(D(real)) + log(1 - D(G(Z))} # ç­‰ä»·äº min{-log(D(real)) - log(1 - D(G(Z))} noise = torch.randn((batch_size, z_dim, 1, 1)).to(device) fake = gen(noise) # G(z) disc_real = disc(real).reshape(-1) # view()ä¹Ÿå¯ä»¥ lossD_real = criterion(disc_real, torch.ones_like(disc_real)) disc_fake = disc(fake).reshape(-1) # view()ä¹Ÿå¯ä»¥ lossD_fake = criterion(disc_fake, torch.zeros_like(disc_fake)) lossD = (lossD_fake + lossD_real) / 2 # åˆå§‹åŒ–æ¢¯åº¦ disc.zero_grad() # åå‘ä¼ æ’­ lossD.backward(retain_graph=True) # ä¼˜åŒ–å™¨ä¼˜åŒ– opt_disc.step() # ------------------------------------------------------------ # Train Generator # min log(1 - D(G(z)) -&gt; min -log(D(G(z)) # -&gt; max D(G(z)) # å¼€å§‹çš„æ—¶å€™ä¼šå› ä¸ºæ¢¯åº¦é¥±å’Œè®­ç»ƒä¸åŠ¨ # å› æ­¤æ¢äº†æŸå¤±å‡½æ•° # æˆ‘ä»¬åœ¨è®­ç»ƒç”Ÿæˆå™¨æ—¶è¿˜æƒ³ç”¨ä¹‹å‰åˆ¤åˆ«å™¨çš„æ¢¯åº¦å’Œå‚æ•° # è¿™é‡Œæœ‰ä¸¤ç§åŠæ³• # lossD.backward(retain_grap=True) # disc_fake = disc(fake.detach()).view(-1) output = disc(fake).view(-1) # ç”±äºä¸Šé¢retain_graph=True, å› æ­¤ç›¸å½“äºæ­¤æ—¶çš„åˆ¤åˆ«å™¨æ—¶å›ºå®šçš„ lossG = criterion(output, torch.ones_like(output)) gen.zero_grad() lossG.backward() opt_gen.step() if batch_idx % 100 == 0: print( f&quot;Epoch [{epoch}/{num_epoch}] Batch {batch_idx}/{len(loader)}\\ &quot; f&quot;Loss D: {lossD:.4f}, Loss G: {lossG:.4f}&quot; ) with torch.no_grad(): fake = gen(fixed_noise) # æ¯æ¬¡æµ‹è¯•çš„å™ªå£°æ˜¯ä¸å˜çš„ï¼Œéƒ½æ˜¯å°†ä¸€ç»„å›ºå®šçš„å™ªå£°è½¬æ¢çš„fake å‡çš„å›¾ç‰‡ img_grid_fake = torchvision.utils.make_grid( fake, normalize=True) img_grid_real = torchvision.utils.make_grid( real, normalize=True) writer_fake.add_image( &quot;Mnist Fake Images&quot;, img_grid_fake, global_step=step ) writer_real.add_image( &quot;Mnist real Images&quot;, img_grid_real, global_step=step ) step = step + 1 è¿™é‡Œä¸»è¦å’ŒSimple GANçš„åŒºåˆ«æ˜¯ï¼Œæ•°æ®çš„ç»´åº¦ä¸Šçš„å¤„ç†ï¼Œä¹‹å‰æ˜¯å°†å›¾ç‰‡å±•æˆä¸€ç»„å‘é‡ï¼Œè€Œä¸”batch_sizeä¹Ÿæœ‰ä¸€å®šçš„æ”¹å˜ã€‚","link":"/2022/02/11/Generative%20Adversarial%20Networks/DCGAN-%E7%9A%84%E6%90%AD%E5%BB%BA/"},{"title":"Simple NN-GANçš„æ­å»º","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦æ ¹æ®è§†é¢‘æ•™ç¨‹æ¥æ­å»ºçš„ä¸€ä¸ªåªæœ‰çº¿æ€§å±‚çš„ç®€å•ç¥ç»ç½‘ç»œï¼Œæ•°æ®é›†åªè¦éœ€ç”¨çš„æ˜¯Mnistæ‰‹å†™æ•°æ®é›†ï¼Œä¸»è¦ä»æ¨¡å‹æ­å»ºã€å‚æ•°è®¾ç½®å’Œæ¨¡å‹è®­ç»ƒä¸‰ä¸ªæ–¹é¢è¿›è¡Œè®²è§£ã€‚ å¯¼å…¥ç›¸å…³åŒ…12345678import torchimport torch.nn as nnimport torch.optim as optimimport torchvisionimport torchvision.datasets as datasetsfrom torch.utils.data import DataLoaderfrom torch.utils.tensorboard import SummaryWriterimport torchvision.transforms as transforms æ¨¡å‹æ­å»ºåˆ¤åˆ«å™¨12345678910111213141516class Discriminator(nn.Module): def __init__(self, img_dim): super().__init__() self.disc = nn.Sequential( nn.Linear(in_features=img_dim, out_features=128), nn.LeakyReLU(0.1), # åœ¨GANé‡Œé¢LeakyReLUçš„æ•ˆæœæ¯”ReLUå¥½ nn.Linear(128, 1), nn.Sigmoid(), # å› ä¸ºè¾“å‡ºæ˜¯0å’Œ1çš„å¸ƒå°”å€¼ # å› æ­¤è¿™é‡Œçš„æ¿€æ´»å‡½æ•°é€‰ç”¨Sigmoid ) def forward(self, x): return self.disc(x) è¿™é‡Œä½¿ç”¨çš„æ˜¯æœ€ç®€å•çš„ç°è±¡æ¨¡å‹æ¥æ­å»ºçš„ï¼ŒåŸºæœ¬çš„æ¡†æ¶å°±æ˜¯è¿™æ ·ã€‚ åœ¨GANé‡Œé¢æ¿€æ´»å‡½æ•°LeakyReLUçš„æ•ˆæœæ¯”ReLUå¥½ã€‚ å› ä¸ºè¾“å‡ºæ˜¯0å’Œ1çš„å¸ƒå°”å€¼ï¼Œ å› æ­¤è¿™é‡Œçš„æ¿€æ´»å‡½æ•°é€‰ç”¨Sigmoidã€‚ ç”Ÿæˆå™¨1234567891011121314151617class Generator(nn.Module): def __init__(self, z_dim, img_dim): # z_dim ç”Ÿæˆå™ªå£°çš„ç»´åº¦ # img_dim å›¾ç‰‡çš„ç»´åº¦ super().__init__() self.gen = nn.Sequential( nn.Linear(z_dim, 256), nn.LeakyReLU(0.1), nn.Linear(256, img_dim), # 28x28x1 -&gt; 784 nn.Tanh() # ç”±äºmnistæ•°æ®é›†çš„ç‰¹ç‚¹ï¼Œæˆ‘ä»¬è¾“å…¥æ ‡å‡†åŒ–åçš„æ•°æ®æ˜¯[-1,1] # æœ€åçš„è¾“å‡ºè¦åœ¨[-1,1]ä¹‹é—´ ) def forward(self, x): return self.gen(x) å‚æ•°è®¾ç½®è¶…å‚æ•°è®¾è®¡1234567891011121314151617181920# Hyperparameters etc (è¶…å‚æ•°)device = &quot;cuda&quot; if torch.cuda.is_available() else &quot;cpu&quot;lr = 3e-4# lr=1e-4# 3e-4 æ˜¯å¯¹äºAdam æ¥è¯´æœ€å¥½çš„å­¦ä¹ ç‡z_dim = 64# åŒæ ·çš„å¯ä»¥å°è¯• 128, 256image_dim = 28 * 28 * 1 # 784# ganå¯¹äºè¶…å‚æ•°ç›¸å½“çš„æ•æ„Ÿï¼Œ# æ¢ä¸€ä¸ªå…¶ä»–çš„å‚æ•°å¯èƒ½å°±not workäº†batch_size = 32num_epoch = 50transforms = transforms.Compose([ transforms.ToTensor(), transforms.Normalize((0.5,), (0.5,)) # transforms.Normalize((0.1307,), (0.3081,)) # å‚æ•°è°·æ­Œçš„å‚æ•°ï¼Œè®¡ç®—mnistçš„åå·®å€¼ # ä½†æ˜¯è¿™ç»„å‚æ•°å¯èƒ½ä¼šå¯¼è‡´ä¸æ”¶æ•›ï¼Œå› æ­¤æˆ‘ä»¬æ¢ç”¨åŸæ¥çš„å‚æ•°]) è¶…å‚æ•°é‡Œæœ€åŸºæœ¬æœ‰æ•æ„Ÿåº¦çš„æ˜¯å­¦ä¹ ç‡ï¼Œlr=3e-4 æ˜¯å¯¹äºAdam æ¥è¯´æœ€å¥½çš„å­¦ä¹ ç‡ï¼Œæœ‰æ—¶å€™ä¹Ÿä¼šç”¨lr=1e-4ã€‚ å…¶æ¬¡å°±æ˜¯æ ‡å‡†åŒ–å‚æ•°çš„å½±å“æ˜¯æœ€å¤§çš„ã€‚ ç„¶åå†è€ƒè™‘ç”Ÿæˆå™ªå£°æ•°æ®çš„ç»´åº¦ã€æ¯ä¸€æ‰¹æ¬¡çš„æ•°æ®é‡batch_size(æ ¹æ®è‡ªå·±çš„å†…å­˜æ¥è€ƒè™‘ï¼Œé‡åŠ›è€Œè¡Œ) æœ€åè€ƒè™‘æ€»çš„å¾ªç¯æ•°ï¼Œä¸€èˆ¬æ˜¯è¿­ä»£æ¬¡æ•°è¶Šå¤šè¶Šå¥½ã€‚ å®ä¾‹åŒ–æ¨¡å‹123disc = Discriminator(image_dim).to(device)gen = Generator(z_dim, image_dim).to(device)fixed_noise = torch.randn((batch_size, z_dim)).to(device) æ•°æ®é¢„å¤„ç†ã€æŸå¤±å‡½æ•°å’Œä¼˜åŒ–å™¨123456789101112131415161718dataset = datasets.MNIST(root=&quot;/dataset&quot;, transform=transforms, download=True)loader = DataLoader(dataset, batch_size=batch_size, shuffle=True)# è®¾ç½®ä¼˜åŒ–å™¨opt_disc = optim.Adam(disc.parameters(), lr=lr)# å¯ä»¥è€ƒè™‘è®¾ç½®betas=çš„å‚æ•°opt_gen = optim.Adam(gen.parameters(), lr=lr)# æŸå¤±å‡½æ•°criterion = nn.BCELoss()# Binary Cross Entropywriter_fake = SummaryWriter(f&quot;runs/GAN_MNIST/fake&quot;)writer_real = SummaryWriter(f&quot;runs/GAN_MNIST/real&quot;) GANçš„ä¼˜åŒ–å™¨é€‰æ‹©çš„æ˜¯å¸¦æœ‰åŠ¨é‡çš„Adamä¼˜åŒ–å™¨ã€‚ æŸå¤±å‡½æ•°é€‰æ‹©çš„æ˜¯äºŒå…ƒäº¤å‰ç†µå‡½æ•°ã€‚ Parameters weight (Tensor, optional) â€“ a manual rescaling weight given to the loss of each batch element. If given, has to be a Tensor of size nbatch.æƒé‡å‚æ•°ã€‚ size_average (bool, optional) â€“ Deprecated (see reduction). By default, the losses are averaged over each loss element in the batch. Note that for some losses, there are multiple elements per sample. If the field size_average is set to False, the losses are instead summed for each minibatch. Ignored when reduce is False. Default: True reduce (bool, optional) â€“ Deprecated (see reduction). By default, the losses are averaged or summed over observations for each minibatch depending on size_average. When reduce is False, returns a loss per batch element instead and ignores size_average. Default: True reduction (string**, optional) â€“ Specifies the reduction to apply to the output: 'none' | 'mean' | 'sum'. 'none': no reduction will be applied, 'mean': the sum of the output will be divided by the number of elements in the output, 'sum': the output will be summed. Note: size_average and reduce are in the process of being deprecated, and in the meantime, specifying either of those two args will override reduction. Default: 'mean' æ¨¡å‹è®­ç»ƒ1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465step = 0# trainfor epoch in range(num_epoch): for batch_idx, (real, _) in enumerate(loader): real = real.view(-1, 784).to(device) # å°†å›¾ç‰‡åä¸¤ç»´å±•å¹³ ç¬¬ä¸€ç»´ä¸ºbatch_size batch_size = real.shape[0] # ------------------------------------------------------------ # Train Discriminator: # max {log(D(real)) + log(1 - D(G(Z))} # ç­‰ä»·äº min{-log(D(real)) - log(1 - D(G(Z))} noise = torch.randn(batch_size, z_dim).to(device) fake = gen(noise) # G(z) disc_real = disc(real).view(-1) lossD_real = criterion(disc_real, torch.ones_like(disc_real)) disc_fake = disc(fake).view(-1) lossD_fake = criterion(disc_fake, torch.zeros_like(disc_fake)) lossD = (lossD_fake + lossD_real) / 2 # åˆå§‹åŒ–æ¢¯åº¦ disc.zero_grad() # åå‘ä¼ æ’­ lossD.backward(retain_graph=True) # ä¼˜åŒ–å™¨ä¼˜åŒ– opt_disc.step() # ------------------------------------------------------------ # Train Generator # min log(1 - D(G(z)) -&gt; min -log(D(G(z)) # -&gt; max log(D(G(z)) # å¼€å§‹çš„æ—¶å€™ä¼šå› ä¸ºæ¢¯åº¦é¥±å’Œè®­ç»ƒä¸åŠ¨ # å› æ­¤æ¢äº†æŸå¤±å‡½æ•° # æˆ‘ä»¬åœ¨è®­ç»ƒç”Ÿæˆå™¨æ—¶è¿˜æƒ³ç”¨ä¹‹å‰åˆ¤åˆ«å™¨çš„æ¢¯åº¦å’Œå‚æ•° # è¿™é‡Œæœ‰ä¸¤ç§åŠæ³• # lossD.backward(retain_grap=True) # disc_fake = disc(fake.detach()).view(-1) output = disc(fake).view(-1) # ç”±äºä¸Šé¢retain_graph=True, å› æ­¤ç›¸å½“äºæ­¤æ—¶çš„åˆ¤åˆ«å™¨æ—¶å›ºå®šçš„ lossG = criterion(output, torch.ones_like(output)) gen.zero_grad() lossG.backward() opt_gen.step() if batch_idx == 0: print( f&quot;Epoch [{epoch}/{num_epoch}] \\ &quot; f&quot;Loss D: {lossD:.4f} ,Loss G: {lossG:.4f}&quot; ) with torch.no_grad(): fake = gen(fixed_noise).reshape(-1, 1, 28, 28) data = real.reshape(-1, 1, 28, 28) img_grid_fake = torchvision.utils.make_grid( fake, normalize=True) img_grid_real = torchvision.utils.make_grid( data, normalize=True) writer_fake.add_image( &quot;Mnist Fake Images&quot;, img_grid_fake, global_step=step ) writer_real.add_image( &quot;Mnist real Images&quot;, img_grid_real, global_step=step ) step = step + 1 å¯¹äºåˆ¤åˆ«å™¨æ¥è¯´ï¼Œå…¶ç›®æ ‡å‡½æ•°ä¸ºï¼š \\max \\{\\log(D(x_{real})) + \\log(1-D(G(z))\\}\\\\ \\Leftrightarrow \\min \\{ -\\log(D(x_{real})) - \\log(1-D(G(z))\\} è¿™é‡Œæˆ‘ä»¬é€‰æ‹©çš„æŸå¤±å‡½æ•°æ˜¯BCLossï¼š L(x,y) = -[y\\log(x) + (1-y)\\log(1-x)]\\\\ L(x,y)= \\begin{cases} -\\log(x), & if\\quad y=1 \\\\ -\\log(1-x), & if\\quad y=0 \\end{cases}å› æ­¤è¿™é‡Œé€‰æ‹©torch.ones_like()å’Œtorch.zeros_like()æ¥ä½œä¸ºyå‚æ•°ã€‚ å¯¹äºç”Ÿæˆå™¨æ¥è¯´ï¼Œå…¶ç›®æ ‡å‡½æ•°ä¸ºï¼š \\min \\log(1-D(G(z)))ç”±äºè®­ç»ƒå¼€å§‹æ—¶çš„æ¢¯åº¦è¾ƒå°ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç”Ÿæˆå™¨è®­ç»ƒä¸åŠ¨ï¼Œç”Ÿæˆå™¨è¿‡æ—©æ”¶æ•›ã€‚äºæ˜¯å°†ç›®æ ‡å‡½æ•°è½¬æ¢ä¸ºï¼š \\min -\\log(D(G(z))) åŒæ—¶ç”Ÿæˆå™¨ä¸­çš„Dæ—¶å›ºå®šçš„ï¼Œåˆ©ç”¨çš„æ˜¯ä¸Šä¸€è½®ä¸­Dçš„å‚æ•°ï¼Œå› æ­¤è¿™é‡Œè¦å°†å…¶å›ºå®šï¼š 12345# æ–¹æ³•1:ä¿æŒåŠ¨æ€å›¾ä¸å˜lossD.backward(retain_grap=True)# æ–¹æ³•2:ä¿æŒè®¡ç®—å‡ºæ¥çš„fake&lt;-&gt;G(z)ä¿ç•™fake = gen(noise)disc_fake = disc(fake.detach()).view(-1) detach()è¿”å›ä¸€ä¸ªæ–°çš„tensorï¼Œæ˜¯ä»å½“å‰è®¡ç®—å›¾ä¸­åˆ†ç¦»ä¸‹æ¥çš„ï¼Œä½†æ˜¯ä»æŒ‡å‘åŸå˜é‡çš„å­˜æ”¾ä½ç½®ï¼Œå…¶grad_fn=Noneä¸”requires_grad=Falseï¼Œå¾—åˆ°çš„è¿™ä¸ªtensoræ°¸è¿œä¸éœ€è¦è®¡ç®—å…¶æ¢¯åº¦ï¼Œä¸å…·æœ‰æ¢¯åº¦gradï¼Œå³ä½¿ä¹‹åé‡æ–°å°†å®ƒçš„requires_gradç½®ä¸ºtrue,å®ƒä¹Ÿä¸ä¼šå…·æœ‰æ¢¯åº¦gradã€‚ æ³¨æ„ï¼šè¿”å›çš„tensorå’ŒåŸå§‹çš„tensorå…±äº«åŒä¸€å†…å­˜æ•°æ®ã€‚in-placeå‡½æ•°ä¿®æ”¹ä¼šåœ¨ä¸¤ä¸ªtensorä¸ŠåŒæ—¶ä½“ç°(å› ä¸ºå®ƒä»¬å…±äº«å†…å­˜æ•°æ®)ï¼Œæ­¤æ—¶å½“è¦å¯¹å…¶è°ƒç”¨backward()æ—¶å¯èƒ½ä¼šå¯¼è‡´é”™è¯¯ã€‚ æµ‹è¯•æ˜¯å°†ç”Ÿæˆå™¨ä½œç”¨åˆ°ä¸€ä¸ªå›ºå®šçš„å™ªå£°æ•°æ®ä¸­ã€‚ 1fake = gen(fixed_noise).reshape(-1, 1, 28, 28) è¿™é‡Œæ˜¯å°†æ•°æ®æ‹¼æ¥æˆä¸ºç½‘æ ¼å½¢çŠ¶ 1img_grid_fake = torchvision.utils.make_grid(fake, normalize=True)","link":"/2022/02/11/Generative%20Adversarial%20Networks/Simple-NN-GAN%E7%9A%84%E6%90%AD%E5%BB%BA/"},{"title":"WGANçš„æ­å»º","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦ä»‹ç»äº†WGANçš„ç†è®ºå’Œpytorchå®ç°ï¼Œä¸»è¦çš„ç›¸æ¯”ä¹‹å‰DCGANä¿®æ”¹äº†æ¨¡å‹æ­å»ºéƒ¨åˆ†çš„æ¿€æ´»å‡½æ•°ã€æ–°åŠ å…¥äº†ä¸€äº›è¶…å‚æ•°ã€å»æ‰äº†åŸæ¥çš„æŸå¤±å‡½æ•°å¹¶åœ¨æ¨¡å‹è®­ç»ƒä¸­å®šä¹‰äº†æŸå¤±å‡½æ•°ã€‚ WGANç†è®ºç®€ä»‹è¿™é‡Œæœ‰æ—¶é—´å»å¤ä¹ æå®æ¯…çš„WGANç›¸å…³ç†è®ºï¼Œè¿™é‡Œç›´æ¥ä»ä»£ç éƒ¨åˆ†è®²èµ·ã€‚ å‚è€ƒå…¬å¼å¦‚å›¾æ‰€ç¤ºï¼š å­¦ä¹ ç‡$\\alpha$=5e-5, æˆªæ–­ç³»æ•°c=0.01, æ¯ä¸€æ‰¹çš„æ•°æ®batch_size=64, ä»¥åŠæ¯ä¸ªå¾ªç¯é‡Œç”Ÿæˆå™¨è®­ç»ƒä¸€æ¬¡å¯¹åº”çš„åˆ¤åˆ«å™¨è®­ç»ƒçš„æ¬¡æ•°$n_{critic} = 5$ è¿™é‡Œçš„ $\\theta$ ä»£è¡¨ç”Ÿæˆå™¨çš„å‚æ•°ï¼Œ$\\omega$ ä»£è¡¨åˆ¤åˆ«å™¨çš„å‚æ•°ã€‚å¾ªç¯ç»“æŸçš„æ¡ä»¶æ˜¯ç”Ÿæˆå™¨çš„å‚æ•° $\\theta$ æ˜¯å¦æ”¶æ•›ã€‚ ä¸ºäº†ä¿è¯æ•°å­¦ä¸Šçš„å…·æœ‰$1-Lipschitz$ è¿ç»­æ€§(ä¿è¯å‡½æ•°æ˜¯å…‰æ»‘çš„)ï¼Œ äºæ˜¯å¢åŠ äº†æˆªæ–­è¯¯å·®ï¼Œå°±æ˜¯å°†åˆ¤åˆ«å™¨çš„å‚æ•° $\\omega$ è£å‰ªåˆ°ä¸€ä¸ªå°çš„èŒƒå›´ä¹‹å†…ï¼Œ[-0.01, 0.01]ã€‚ ä¼˜åŒ–å™¨ä½¿ç”¨çš„æ˜¯RMSPropä¼˜åŒ–å™¨ï¼Œæ›¿ä»£äº†åŸæ¥çš„Admaä¼˜åŒ–å™¨ã€‚ æ¨¡å‹æ­å»ºæ¨¡å‹çš„ç»“æ„æ˜¯åŸºæœ¬ä¸å˜çš„ï¼Œåˆ¤åˆ«å™¨çš„æœ€åä¸€å±‚å»æ‰äº†Sigmoid()å‡½æ•°ã€‚ å…¶ä»–çš„åœ°æ–¹å‡å’ŒDCGANç›¸åŒã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586import torchimport torch.nn as nnclass Discriminator(nn.Module): def __init__(self, channel_img, features_d): super(Discriminator, self).__init__() self.disc = nn.Sequential( # Input: N x channels_img x 64 x 64 nn.Conv2d( in_channels=channel_img, out_channels=features_d, kernel_size=4, stride=2, padding=1 ), # 32 x 32 nn.LeakyReLU(0.2), self._block(features_d, features_d * 2, 4, 2, 1), # 16 x 16 self._block(features_d * 2, features_d * 4, 4, 2, 1), # 8 x 8 self._block(features_d * 4, features_d * 8, 4, 2, 1), # 4 x 4 nn.Conv2d(features_d * 8, 1, kernel_size=4, stride=2, padding=0), # 1x1 # nn.Sigmoid(), åˆ¤åˆ«å™¨å–æ¶ˆäº†Sigmoid() ) def _block(self, in_channels, out_channels, kernel_size, stride, padding): return nn.Sequential( nn.Conv2d( in_channels=in_channels, out_channels=out_channels, kernel_size=kernel_size, stride=stride, padding=padding, bias=False ), nn.LeakyReLU(0.2), nn.BatchNorm2d(out_channels), ) def forward(self, x): return self.disc(x)class Generator(nn.Module): def __init__(self, z_dim, channels_img, features_g): # z_dim ç”Ÿæˆå™ªå£°çš„ç»´åº¦ # channels_img å›¾ç‰‡çš„ç»´åº¦ super(Generator, self).__init__() self.gen = nn.Sequential( # Input: N x z_dim x 1 x 1 self._block(z_dim, features_g*16, 4, 1, 0), # N x f_g*16 x 4 x 4 self._block(features_g*16, features_g*8, 4, 2, 1), # 8 x 8 self._block(features_g*8, features_g*4, 4, 2, 1), # 16 x 16 self._block(features_g*4, features_g*2, 4, 2, 1), # 32 x 32 nn.ConvTranspose2d( features_g*2, channels_img, kernel_size=4, stride=2, padding=1 ), # 64 x 64 nn.Tanh(), # [-1, 1] # ç”±äºmnistæ•°æ®é›†çš„ç‰¹ç‚¹ï¼Œæˆ‘ä»¬è¾“å…¥æ ‡å‡†åŒ–åçš„æ•°æ®æ˜¯[-1,1] # æœ€åçš„è¾“å‡ºè¦åœ¨[-1,1]ä¹‹é—´ ) def _block(self, in_channels, out_channels, kernel_size, stride, padding): return nn.Sequential( nn.ConvTranspose2d( in_channels=in_channels, out_channels=out_channels, kernel_size=kernel_size, stride=stride, padding=padding, bias=False ), nn.BatchNorm2d(out_channels), nn.ReLU(), ) def forward(self, x): return self.gen(x)def initialize_weights(model): for m in model.modules(): if isinstance(m, (nn.Conv2d, nn.ConvTranspose2d, nn.BatchNorm2d)): nn.init.normal_(m.weight.data, mean=0.0, std=.02) å‚æ•°è®¾ç½®è¶…å‚æ•°çš„è®¾ç½®è¿™é‡Œå‚æ•°é€‰æ‹©å‚è€ƒç†è®ºç®€ä»‹éƒ¨åˆ†ã€‚ä»¥ä¸‹ä¸ºå…·ä½“çš„ä»£ç ï¼š 1234567891011121314151617# Hyperparameters etc (è¶…å‚æ•°)device = &quot;cuda&quot; if torch.cuda.is_available() else &quot;cpu&quot;lr = 5e-5# ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸¤ç»„å­¦ä¹ ç‡ï¼Œä¸€ä¸ªæ˜¯ç”Ÿæˆå™¨çš„ã€ä¸€ä¸ªæ˜¯åˆ¤åˆ«å™¨çš„ã€‚z_dim = 64# åŒæ ·çš„å¯ä»¥å°è¯• 128, 256image_size = 64# ganå¯¹äºè¶…å‚æ•°ç›¸å½“çš„æ•æ„Ÿï¼Œ# æ¢ä¸€ä¸ªå…¶ä»–çš„å‚æ•°å¯èƒ½å°±not workäº†batch_size = 64num_epoch = 6channels_img = 1features_disc = 64features_gen = 64# WGANç‰¹æœ‰çš„å‚æ•°critic_iteration = 5weight_clip = 0.05 ä¼˜åŒ–å™¨å’ŒæŸå¤±å‡½æ•°çš„è®¾ç½®æ³¨æ„WGANçš„æŸå¤±å‡½æ•°éƒ½æ˜¯è‡ªå·±å†™çš„ï¼Œå› æ­¤ä¸è®¾ç½®æŸå¤±å‡½æ•°äº†ã€‚ 123456789101112# è®¾ç½®ä¼˜åŒ–å™¨opt_disc = optim.RMSprop(disc_critic.parameters(), lr=lr)opt_gen = optim.RMSprop(gen.parameters(), lr=lr)fixed_noise = torch.randn((batch_size, z_dim, 1, 1)).to(device)# æŸå¤±å‡½æ•°# criterion = nn.BCELoss()# Binary Cross Entropywriter_fake = SummaryWriter(f&quot;runs/WGAN_MNIST/fake&quot;)writer_real = SummaryWriter(f&quot;runs/WGAN_MNIST/real&quot;) æ¨¡å‹åˆå§‹åŒ–å’Œæ•°æ®é¢„å¤„ç†è¿™è¾¹ä¹Ÿä¿æŒä¸å˜ã€‚ 12345678910111213141516171819202122232425transforms = transforms.Compose([ transforms.Resize(image_size), transforms.ToTensor(), transforms.Normalize( [0.5 for _ in range(channels_img)], [0.5 for _ in range(channels_img)] ) # è‡ªé€‚åº”æˆ‘ä»¬çš„é€šé“æ•°ï¼Œå‡ ä¸ªé€šé“éƒ½ä¸º0.5 # transforms.Normalize((0.1307,), (0.3081,)) # å‚æ•°è°·æ­Œçš„å‚æ•°ï¼Œè®¡ç®—mnistçš„åå·®å€¼ # ä½†æ˜¯è¿™ç»„å‚æ•°å¯èƒ½ä¼šå¯¼è‡´ä¸æ”¶æ•›ï¼Œå› æ­¤æˆ‘ä»¬æ¢ç”¨åŸæ¥çš„å‚æ•°])dataset = datasets.MNIST(root=&quot;./dataset&quot;, transform=transforms, download=True)loader = DataLoader(dataset, batch_size=batch_size, shuffle=True)disc_critic = Discriminator(channels_img, features_disc).to(device)gen = Generator(z_dim, channels_img, features_gen).to(device)# åˆå§‹åŒ–æ¨¡å‹initialize_weights(disc_critic)initialize_weights(gen) æ¨¡å‹è®­ç»ƒ è¿™è¾¹ä¹Ÿä¸å˜ï¼Œæ³¨æ„è¿™é‡Œæœ‰BNå±‚ï¼Œéœ€è¦åŠ model.train() å‡½æ•°ã€‚ æŸå¤±å‡½æ•°ï¼š åˆ¤åˆ«å™¨ï¼š g_{w} \\leftarrow \\nabla_{w}\\left[\\frac{1}{m} \\sum_{i=1}^{m} f_{w}\\left(x^{(i)}\\right)-\\frac{1}{m} \\sum_{i=1}^{m} f_{w}\\left(g_{\\theta}\\left(z^{(i)}\\right)\\right)\\right]\\\\ w \\leftarrow w+\\alpha \\cdot \\mathrm{RMSProp}\\left(w, g_{w}\\right)â€‹ ç”Ÿæˆå™¨ï¼š g_{\\theta} \\leftarrow \\nabla_{\\theta} \\frac{1}{m} \\sum_{i=1}^{m} f_{w}\\left(g_{\\theta}\\left(z^{(i)}\\right)\\right)12345678noise = torch.randn((batch_size, z_dim, 1, 1)).to(device)fake = gen(noise) # G(z)critic_real = disc_critic(real).reshape(-1)critic_fake = disc_critic(fake).reshape(-1)# è¿™é‡Œè‡ªå®šä¹‰äº†æŸå¤±å‡½æ•°# (f-GANè®ºæ–‡è®²äº†ï¼Œå…¶å®æŸå¤±å‡½æ•°çš„è®¾ç½®å¯¹ç»“æœçš„å½±å“ä¸å¤§)loss_critic = - (torch.mean(critic_real) - torch.mean(critic_fake))# - è´Ÿå·ä¸ºäº†ä¿è¯æœ€å°åŒ– è¿™é‡ŒæŸå¤±å‡½æ•°ä¸ºåˆ¤åˆ«å™¨è®¡ç®—å‡ºæ¥çš„æ•°å€¼å–å¹³å‡ï¼Œå³å¯ã€‚ è®­ç»ƒçš„é¡ºåºæ˜¯æ¯æ¬¡å…ˆè®­ç»ƒ$n_{critic}$æ¬¡åˆ¤åˆ«å™¨ï¼Œä¹‹åå†è®­ç»ƒ1æ¬¡ç”Ÿæˆå™¨ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778step = 0gen.train()disc_critic.train()# trainfor epoch in range(num_epoch): for batch_idx, (real, _) in enumerate(loader): real = real.to(device) # å°†å›¾ç‰‡åä¸¤ç»´å±•å¹³ ç¬¬ä¸€ç»´ä¸ºbatch_size # batch_size = real.shape[0] for _ in range(critic_iteration): # ------------------------------------------------------------ # Train Discriminator: # max {log(D(real)) + log(1 - D(G(Z))} # ç­‰ä»·äº min{-log(D(real)) - log(1 - D(G(Z))} noise = torch.randn((batch_size, z_dim, 1, 1)).to(device) fake = gen(noise) # G(z) critic_real = disc_critic(real).reshape(-1) critic_fake = disc_critic(fake).reshape(-1) # è¿™é‡Œè‡ªå®šä¹‰äº†æŸå¤±å‡½æ•° # (f-GANè®ºæ–‡è®²äº†ï¼Œå…¶å®æŸå¤±å‡½æ•°çš„è®¾ç½®å¯¹ç»“æœçš„å½±å“ä¸å¤§) loss_critic = - (torch.mean(critic_real) - torch.mean(critic_fake)) # - è´Ÿå·ä¸ºäº†ä¿è¯æœ€å°åŒ– # åˆå§‹åŒ–æ¢¯åº¦ disc_critic.zero_grad() # åå‘ä¼ æ’­ loss_critic.backward(retain_graph=True) # ä¼˜åŒ–å™¨ä¼˜åŒ– opt_disc.step() # å‚æ•°è¿›è¡Œæˆªæ–­ for p in disc_critic.parameters(): p.data.clamp_(-weight_clip, weight_clip) # ------------------------------------------------------------ # Train Generator # min log(1 - D(G(z)) -&gt; min -log(D(G(z)) # -&gt; max D(G(z)) # å¼€å§‹çš„æ—¶å€™ä¼šå› ä¸ºæ¢¯åº¦é¥±å’Œè®­ç»ƒä¸åŠ¨ # å› æ­¤æ¢äº†æŸå¤±å‡½æ•° # æˆ‘ä»¬åœ¨è®­ç»ƒç”Ÿæˆå™¨æ—¶è¿˜æƒ³ç”¨ä¹‹å‰åˆ¤åˆ«å™¨çš„æ¢¯åº¦å’Œå‚æ•° # è¿™é‡Œæœ‰ä¸¤ç§åŠæ³• # lossD.backward(retain_grap=True) # disc_fake = disc(fake.detach()).view(-1) output = disc_critic(fake).reshape(-1) # ç”±äºä¸Šé¢retain_graph=True, å› æ­¤ç›¸å½“äºæ­¤æ—¶çš„åˆ¤åˆ«å™¨æ—¶å›ºå®šçš„ loss_gen = - torch.mean(output) gen.zero_grad() loss_gen.backward() opt_gen.step() if batch_idx % 100 == 0: print( f&quot;Epoch [{epoch}/{num_epoch}] Batch {batch_idx}/{len(loader)} &quot; f&quot;loss_critic: {loss_critic:.4f}, loss_gen: {loss_gen:.4f}&quot; ) gen.eval() disc_critic.eval() with torch.no_grad(): fake = gen(noise) # æ¯æ¬¡æµ‹è¯•çš„å™ªå£°æ˜¯ä¸å˜çš„ï¼Œéƒ½æ˜¯å°†ä¸€ç»„å›ºå®šçš„å™ªå£°è½¬æ¢çš„fake å‡çš„å›¾ç‰‡ img_grid_fake = torchvision.utils.make_grid( fake, normalize=True) img_grid_real = torchvision.utils.make_grid( real, normalize=True) writer_fake.add_image( &quot;Mnist Fake Images&quot;, img_grid_fake, global_step=step ) writer_real.add_image( &quot;Mnist real Images&quot;, img_grid_real, global_step=step ) step = step + 1 gen.train() disc_critic.train() æ€»ç»“ï¼š å…¶å®WGANçš„æ•ˆæœåœ¨ä¸€èˆ¬çš„Mnistæ•°æ®é›†ä¸Šçš„æ•ˆæœä¸æ˜¯å¾ˆå¥½ï¼Œå› æ­¤å°½ç®¡æ•°å­¦ä¸Šçš„æ•ˆæœå¾ˆå¥½ï¼Œä½†æ˜¯è¯•éªŒè¯å®çš„æ•ˆæœè¿˜æ˜¯ä¸ç†æƒ³ã€‚","link":"/2022/02/12/Generative%20Adversarial%20Networks/WGAN%E7%9A%84%E6%90%AD%E5%BB%BA/"},{"title":"WGAN-GPçš„æ­å»º","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦ä»‹ç»äº†WGAN-GPçš„ç†è®ºå’Œpytorchå®ç°ï¼Œä¸»è¦çš„ç›¸æ¯”ä¹‹å‰WGANä¿®æ”¹äº†ç”Ÿæˆå™¨çš„å½’ä¸€åŒ–å±‚ã€æ–°åŠ å…¥äº†ä¸€äº›è¶…å‚æ•°ã€å¢åŠ äº†æ–°çš„è®¡ç®—æ¢¯åº¦æƒ©ç½šé¡¹çš„å‡½æ•°ã€å»æ‰äº†åŸæ¥çš„æŸå¤±å‡½æ•°å¹¶åœ¨æ¨¡å‹è®­ç»ƒä¸­å®šä¹‰äº†æ–°çš„æŸå¤±å‡½æ•°ã€‚ WGAN-GPç†è®ºç®€ä»‹WGAN-GPæ˜¯WGANçš„æ”¹è¿›ç‰ˆï¼Œå› ä¸ºæˆªæ–­æ“ä½œä¸€æ–¹é¢æµªè´¹æ—¶é—´ï¼Œå…¶æ¬¡æ•ˆæœå®åœ¨ä¸€èˆ¬ï¼Œè¿˜ä¸å¦‚DCGANï¼Œå› æ­¤è¿™é‡Œå¸¦æœ‰æ¢¯åº¦æƒ©ç½šé¡¹çš„å‡½æ•°æ¥è¿›è¡Œä¼˜åŒ–æ“ä½œã€‚ è¿™é‡Œçš„ä¸»è¦å‚æ•°å¦‚ä¸‹ï¼š $\\lambda=10$ æ˜¯æƒ©ç½šé¡¹çš„ç³»æ•°ï¼Œå…¶ä»£è¡¨çš„æ˜¯æ¢¯åº¦æƒ©ç½šé¡¹å‰é¢çš„æƒé‡ã€‚ $\\alpha=1e-4$ æ˜¯å­¦ä¹ ç‡ï¼Œ$\\beta_1=0 \\ ,\\beta_2=0.9$ æ˜¯Adamä¼˜åŒ–å™¨çš„åŠ¨é‡å‚æ•°ã€‚ æ¯ä¸ªå¾ªç¯é‡Œç”Ÿæˆå™¨è®­ç»ƒä¸€æ¬¡å¯¹åº”çš„åˆ¤åˆ«å™¨è®­ç»ƒçš„æ¬¡æ•°$n_{critic} = 5$ $\\hat{\\boldsymbol{x}} \\leftarrow \\epsilon \\boldsymbol{x}+(1-\\epsilon) \\tilde{\\boldsymbol{x}}$ ä»£è¡¨çš„æ˜¯è®¡ç®—çœŸå®å›¾ç‰‡å’Œç”Ÿæˆå›¾ç‰‡çš„åŠ æƒå€¼ã€‚ $\\lambda\\left(\\left|\\nabla_{\\hat{\\boldsymbol{x}}} D_{w}(\\hat{\\boldsymbol{x}})\\right|_{2}-1\\right)^{2}$ ä¹‹åå°†åŠ æƒå€¼æ±‚èŒƒæ•°ï¼Œå¦‚æœèŒƒæ•°å€¼ä¸º1ï¼Œåˆ™æ­¤æ—¶æ»¡è¶³$1-Lipschitz$ ç¨³å®šæ€§ã€‚å¦åˆ™ï¼Œä½œä¸ºæƒ©ç½šé¡¹åŠ å…¥åˆ°æŸå¤±å‡½æ•°ä¸­ã€‚ ç”Ÿé•¿å™¨ä¹Ÿæ˜¯ä½¿ç”¨Adamä¼˜åŒ–å™¨ï¼Œå…¶ä»–çš„åœ°æ–¹ä¸å˜ã€‚ æ¨¡å‹æ­å»ºç”Ÿæˆå™¨å’Œåˆ¤åˆ«å™¨è¿™é‡Œä½¿ç”¨çš„æ˜¯å°†ç”Ÿæˆå™¨çš„BatchNorm2dæ¢æˆäº†InstanceNorm2dï¼Œå…³äºInstanceNorm2dçš„å‚è€ƒCSDNåšæ–‡ ã€‚ å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687import torchimport torch.nn as nnclass Discriminator(nn.Module): def __init__(self, channel_img, features_d): super(Discriminator, self).__init__() self.disc = nn.Sequential( # Input: N x channels_img x 64 x 64 nn.Conv2d( in_channels=channel_img, out_channels=features_d, kernel_size=4, stride=2, padding=1 ), # 32 x 32 nn.LeakyReLU(0.2), self._block(features_d, features_d * 2, 4, 2, 1), # 16 x 16 self._block(features_d * 2, features_d * 4, 4, 2, 1), # 8 x 8 self._block(features_d * 4, features_d * 8, 4, 2, 1), # 4 x 4 nn.Conv2d(features_d * 8, 1, kernel_size=4, stride=2, padding=0), # 1x1 # nn.Sigmoid(), åˆ¤åˆ«å™¨å–æ¶ˆäº†Sigmoid() ) def _block(self, in_channels, out_channels, kernel_size, stride, padding): return nn.Sequential( nn.Conv2d( in_channels=in_channels, out_channels=out_channels, kernel_size=kernel_size, stride=stride, padding=padding, bias=False ), # æ•´ç†ä¿®æ”¹ä¸ºInstanceNorm2d # LayerNorm &lt;-&gt; InstanceNorm nn.InstanceNorm2d(out_channels, affine=True), nn.LeakyReLU(0.2), ) def forward(self, x): return self.disc(x)class Generator(nn.Module): def __init__(self, z_dim, channels_img, features_g): # z_dim ç”Ÿæˆå™ªå£°çš„ç»´åº¦ # channels_img å›¾ç‰‡çš„ç»´åº¦ super(Generator, self).__init__() self.gen = nn.Sequential( # Input: N x z_dim x 1 x 1 self._block(z_dim, features_g*16, 4, 1, 0), # N x f_g*16 x 4 x 4 self._block(features_g*16, features_g*8, 4, 2, 1), # 8 x 8 self._block(features_g*8, features_g*4, 4, 2, 1), # 16 x 16 self._block(features_g*4, features_g*2, 4, 2, 1), # 32 x 32 nn.ConvTranspose2d( features_g*2, channels_img, kernel_size=4, stride=2, padding=1 ), # 64 x 64 nn.Tanh(), # [-1, 1] # ç”±äºmnistæ•°æ®é›†çš„ç‰¹ç‚¹ï¼Œæˆ‘ä»¬è¾“å…¥æ ‡å‡†åŒ–åçš„æ•°æ®æ˜¯[-1,1] # æœ€åçš„è¾“å‡ºè¦åœ¨[-1,1]ä¹‹é—´ ) def _block(self, in_channels, out_channels, kernel_size, stride, padding): return nn.Sequential( nn.ConvTranspose2d( in_channels=in_channels, out_channels=out_channels, kernel_size=kernel_size, stride=stride, padding=padding, bias=False ), nn.BatchNorm2d(out_channels), nn.ReLU(), ) def forward(self, x): return self.gen(x)def initialize_weights(model): for m in model.modules(): if isinstance(m, (nn.Conv2d, nn.ConvTranspose2d, nn.BatchNorm2d)): nn.init.normal_(m.weight.data, mean=0.0, std=.02) æ¢¯åº¦æƒ©ç½šé¡¹å‡½æ•°ä¸ºäº†æ±‚æ¢¯åº¦æƒ©ç½šï¼Œè¿™é‡Œå¢åŠ äº†æ±‚æ¢¯åº¦æƒ©ç½šé¡¹çš„å‡½æ•°å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526import torchimport torch.nndef gradient_penalty(critic, real, fake, device=&quot;cpu&quot;): batch_size, channels, H, W = real.shape epsilon = torch.rand((batch_size, 1, 1, 1)).repeat(1, channels, H, W).to(device) interpolated_images = real * epsilon + fake * (1 - epsilon) # è®¡ç®—åˆ¤åˆ«å™¨è¾“å‡º mix_scores = critic(interpolated_images) # æ±‚å¯¼ gradient = torch.autograd.grad( inputs=interpolated_images, outputs=mix_scores, grad_outputs=torch.ones_like(mix_scores), create_graph=True, retain_graph=True, )[0] gradient = gradient.view(gradient.shape[0], -1) gradient_norm = gradient.norm(2, dim=1) # æ±‚2-èŒƒæ•° gradient_penalty_value = torch.mean((gradient_norm - 1) ** 2) return gradient_penalty_value å‚æ•°è®¾è®¡è¶…å‚æ•°çš„è®¾è®¡è¿™é‡Œå‚æ•°é€‰æ‹©å‚è€ƒç†è®ºç®€ä»‹éƒ¨åˆ†ã€‚ä»¥ä¸‹ä¸ºå…·ä½“çš„ä»£ç ï¼š 123456789101112131415161718# Hyperparameters etc (è¶…å‚æ•°)device = &quot;cuda&quot; if torch.cuda.is_available() else &quot;cpu&quot;lr = 1e-4# ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸¤ç»„å­¦ä¹ ç‡ï¼Œä¸€ä¸ªæ˜¯ç”Ÿæˆå™¨çš„ã€ä¸€ä¸ªæ˜¯åˆ¤åˆ«å™¨çš„ã€‚z_dim = 64# åŒæ ·çš„å¯ä»¥å°è¯• 128, 256image_size = 64# ganå¯¹äºè¶…å‚æ•°ç›¸å½“çš„æ•æ„Ÿï¼Œ# æ¢ä¸€ä¸ªå…¶ä»–çš„å‚æ•°å¯èƒ½å°±not workäº†batch_size = 64num_epoch = 6channels_img = 1features_disc = 64features_gen = 64# WGANç‰¹æœ‰çš„å‚æ•°critic_iteration = 5# weight_clip = 0.01LAMBEDA_GP = 10 ä¼˜åŒ–å™¨å’ŒæŸå¤±å‡½æ•°çš„è®¾ç½®æ³¨æ„WGANçš„æŸå¤±å‡½æ•°éƒ½æ˜¯è‡ªå·±å†™çš„ï¼Œå› æ­¤ä¸è®¾ç½®æŸå¤±å‡½æ•°äº†ã€‚ 123456789101112# è®¾ç½®ä¼˜åŒ–å™¨opt_disc = optim.RMSprop(disc_critic.parameters(), lr=lr)opt_gen = optim.RMSprop(gen.parameters(), lr=lr)fixed_noise = torch.randn((batch_size, z_dim, 1, 1)).to(device)# æŸå¤±å‡½æ•°# criterion = nn.BCELoss()# Binary Cross Entropywriter_fake = SummaryWriter(f&quot;runs/WGAN_MNIST/fake&quot;)writer_real = SummaryWriter(f&quot;runs/WGAN_MNIST/real&quot;) æ¨¡å‹åˆå§‹åŒ–å’Œæ•°æ®é¢„å¤„ç†è¿™è¾¹ä¹Ÿä¿æŒä¸å˜ã€‚ 12345678910111213141516171819202122232425transforms = transforms.Compose([ transforms.Resize(image_size), transforms.ToTensor(), transforms.Normalize( [0.5 for _ in range(channels_img)], [0.5 for _ in range(channels_img)] ) # è‡ªé€‚åº”æˆ‘ä»¬çš„é€šé“æ•°ï¼Œå‡ ä¸ªé€šé“éƒ½ä¸º0.5 # transforms.Normalize((0.1307,), (0.3081,)) # å‚æ•°è°·æ­Œçš„å‚æ•°ï¼Œè®¡ç®—mnistçš„åå·®å€¼ # ä½†æ˜¯è¿™ç»„å‚æ•°å¯èƒ½ä¼šå¯¼è‡´ä¸æ”¶æ•›ï¼Œå› æ­¤æˆ‘ä»¬æ¢ç”¨åŸæ¥çš„å‚æ•°])dataset = datasets.MNIST(root=&quot;./dataset&quot;, transform=transforms, download=True)loader = DataLoader(dataset, batch_size=batch_size, shuffle=True)disc_critic = Discriminator(channels_img, features_disc).to(device)gen = Generator(z_dim, channels_img, features_gen).to(device)# åˆå§‹åŒ–æ¨¡å‹initialize_weights(disc_critic)initialize_weights(gen) æ¨¡å‹è®­ç»ƒä¸»è¦çš„ä¿®æ”¹æ˜¯ç»™ç”Ÿæˆå™¨å»æ‰çš„å‚æ•°æˆªæ–­åŠŸèƒ½ï¼ŒæŸå¤±å‡½æ•°åŠ å…¥äº†æ±‚æ¢¯åº¦æƒ©ç½šé¡¹çš„éƒ¨åˆ†ï¼Œå…·ä½“åŸç†å‚è€ƒç†è®ºç®€ä»‹ã€‚ æŸå¤±å‡½æ•°ï¼š L^{(i)} \\leftarrow D_{w}(\\tilde{\\boldsymbol{x}})-D_{w}(\\boldsymbol{x})+\\lambda\\left(\\left\\|\\nabla_{\\hat{\\boldsymbol{x}}} D_{w}(\\hat{\\boldsymbol{x}})\\right\\|_{2}-1\\right)^{2}ä¸»è¦çš„ä»£ç å¦‚ä¸‹ï¼š 12345678910noise = torch.randn((batch_size, z_dim, 1, 1)).to(device)fake = gen(noise) # G(z)critic_real = disc_critic(real).reshape(-1)critic_fake = disc_critic(fake).reshape(-1)gp = gradient_penalty(disc_critic, real, fake, device=device)# è¿™é‡Œè‡ªå®šä¹‰äº†æŸå¤±å‡½æ•°# (f-GANè®ºæ–‡è®²äº†ï¼Œå…¶å®æŸå¤±å‡½æ•°çš„è®¾ç½®å¯¹ç»“æœçš„å½±å“ä¸å¤§)loss_critic = ( -(torch.mean(critic_real) - torch.mean(critic_fake)) + LAMBEDA_GP*gp) å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677step = 0gen.train()disc_critic.train()# trainfor epoch in range(num_epoch): for batch_idx, (real, _) in enumerate(loader): real = real.to(device) # å°†å›¾ç‰‡åä¸¤ç»´å±•å¹³ ç¬¬ä¸€ç»´ä¸ºbatch_size # batch_size = real.shape[0] for _ in range(critic_iteration): # ------------------------------------------------------------ # Train Discriminator: # max {log(D(real)) + log(1 - D(G(Z))} # ç­‰ä»·äº min{-log(D(real)) - log(1 - D(G(Z))} noise = torch.randn((batch_size, z_dim, 1, 1)).to(device) fake = gen(noise) # G(z) critic_real = disc_critic(real).reshape(-1) critic_fake = disc_critic(fake).reshape(-1) gp = gradient_penalty(disc_critic, real, fake, device=device) # è¿™é‡Œè‡ªå®šä¹‰äº†æŸå¤±å‡½æ•° # (f-GANè®ºæ–‡è®²äº†ï¼Œå…¶å®æŸå¤±å‡½æ•°çš„è®¾ç½®å¯¹ç»“æœçš„å½±å“ä¸å¤§) loss_critic = ( -(torch.mean(critic_real) - torch.mean(critic_fake)) + LAMBEDA_GP*gp ) # åˆå§‹åŒ–æ¢¯åº¦ disc_critic.zero_grad() # åå‘ä¼ æ’­ loss_critic.backward(retain_graph=True) # ä¼˜åŒ–å™¨ä¼˜åŒ– opt_disc.step() # ------------------------------------------------------------ # Train Generator # min log(1 - D(G(z)) -&gt; min -log(D(G(z)) # -&gt; max D(G(z)) # å¼€å§‹çš„æ—¶å€™ä¼šå› ä¸ºæ¢¯åº¦é¥±å’Œè®­ç»ƒä¸åŠ¨ # å› æ­¤æ¢äº†æŸå¤±å‡½æ•° # æˆ‘ä»¬åœ¨è®­ç»ƒç”Ÿæˆå™¨æ—¶è¿˜æƒ³ç”¨ä¹‹å‰åˆ¤åˆ«å™¨çš„æ¢¯åº¦å’Œå‚æ•° # è¿™é‡Œæœ‰ä¸¤ç§åŠæ³• # lossD.backward(retain_grap=True) # disc_fake = disc(fake.detach()).view(-1) output = disc_critic(fake).reshape(-1) # ç”±äºä¸Šé¢retain_graph=True, å› æ­¤ç›¸å½“äºæ­¤æ—¶çš„åˆ¤åˆ«å™¨æ—¶å›ºå®šçš„ loss_gen = - torch.mean(output) gen.zero_grad() loss_gen.backward() opt_gen.step() if batch_idx % 100 == 0: print( f&quot;Epoch [{epoch}/{num_epoch}] Batch {batch_idx}/{len(loader)} &quot; f&quot;loss_critic: {loss_critic:.4f}, loss_gen: {loss_gen:.4f}&quot; ) gen.eval() disc_critic.eval() with torch.no_grad(): fake = gen(fixed_noise) # æ¯æ¬¡æµ‹è¯•çš„å™ªå£°æ˜¯ä¸å˜çš„ï¼Œéƒ½æ˜¯å°†ä¸€ç»„å›ºå®šçš„å™ªå£°è½¬æ¢çš„fake å‡çš„å›¾ç‰‡ img_grid_fake = torchvision.utils.make_grid( fake, normalize=True) img_grid_real = torchvision.utils.make_grid( real, normalize=True) writer_fake.add_image( &quot;Mnist Fake Images&quot;, img_grid_fake, global_step=step ) writer_real.add_image( &quot;Mnist real Images&quot;, img_grid_real, global_step=step ) step = step + 1 gen.train() disc_critic.train() ç›¸æ¯”WGANï¼ŒåŠ å…¥æ¢¯åº¦æƒ©ç½šé¡¹ä»¥åçš„æ•ˆæœè¿˜æ˜¯æ¯”è¾ƒå¥½çš„ã€‚","link":"/2022/02/12/Generative%20Adversarial%20Networks/WGAN-GP%E7%9A%84%E6%90%AD%E5%BB%BA/"},{"title":"Pix2pix GAN è®ºæ–‡åŠæ¨¡å‹æ­å»º","text":"hljs.initHighlightingOnLoad(); è®ºæ–‡ï¼šImage-to-Image Translation with Conditional Adversarial Networksè®ºæ–‡é“¾æ¥ï¼šhttps://arxiv.org/abs/1611.07004ä»£ç é“¾æ¥ï¼šhttps://github.com/junyanz/pytorch-CycleGAN-and-pix2pix æœ¬æ–‡ä¸»è¦ä»‹ç»çš„pix2pixï¼Œå¹¶ä¸”è‡ªå·±å®šä¹‰æŸå¤±å‡½æ•°ï¼Œç”Ÿæˆå™¨ä¸»è¦ä½¿ç”¨çš„æ˜¯U-Net(ä¸»è¦åšè¯­ä¹‰åˆ†å‰²çš„ç½‘ç»œ) ã€‚ åŸè®ºæ–‡ç®€ä»‹æ•™ç¨‹1 å¯¹äºCGANï¼Œæ˜¯å°†æ¡ä»¶ä¿¡æ¯è¿›è¡Œå¦‚labelè¿›è¡Œembeddingä¹‹åï¼Œä¸€èµ·åŠ å…¥åˆ°ç½‘ç»œä¸­è¿›è¡Œè¯†åˆ«ç”Ÿæˆçš„ã€‚æ•´ä½“çš„æ¡ä»¶ä¿¡æ¯è¿˜å¯ä»¥ç›´æ¥æ˜¯å›¾ç‰‡ã€‚ åˆ¤åˆ«å™¨è¦åšä¸¤ä»¶äº‹æƒ…ï¼š ç”Ÿæˆçš„å›¾ç‰‡çš„çœŸå‡é—®é¢˜ï¼Œå¦‚æœæ˜¯ä»æˆ‘ä»¬çš„æ•°æ®é›†ä¸­å¾—åˆ°çš„ï¼Œå°±ä¸ºçœŸï¼›å¦‚æœæ˜¯ç”Ÿæˆå™¨ç”Ÿæˆçš„ï¼Œå°±ä¸ºå‡ã€‚ å…¶æ¬¡è¿˜è¦åˆ¤æ–­ç”Ÿæˆçš„å›¾ç‰‡å’ŒçœŸå®çš„æ¡ä»¶ä¿¡æ¯æ˜¯å¦å¯¹åº”ã€‚ è¿™é‡Œçš„æˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸åŠ å™ªå£°ï¼Œç›´æ¥è¾“å‡ºæ¡ä»¶ä¿¡æ¯(å›¾ç‰‡)ã€‚ è¿™é‡Œæ˜¯åœ¨ç¼–ç çš„è¿‡ç¨‹ä¸­åŠ å…¥äº†éšæœºå™ªå£°ï¼ŒåŠ å¼ºäº†æˆ‘æ¨¡å‹çš„ç¨³å®šæ€§ã€‚ åŸºäºauto-encoderçš„æƒ³æ³•ï¼Œæˆ‘ä»¬å®šä¹‰äº†U-Netç½‘ç»œã€‚ U-Netå°†encoderçš„è¿‡ç¨‹åŠ åˆ°äº†decoderçš„ä¸Šé¢ï¼Œå®ç°äº†è·³è·ƒè¿æ¥ï¼Œè¿™æ ·çš„å¯è®­ç»ƒæ€§æ›´å¥½ã€‚ pix2pixæœ€åè¦ç»è¿‡ä¸€ä¸ªpatchGANï¼Œä½¿å¾—æœ€åå¾—è¾“å‡ºä¸ºä¸€ä¸ªçŸ©é˜µæ¥åˆ¤æ–­çœŸå‡ã€‚å†ä¸çœŸå®çš„ç½‘ç»œè¿›è¡Œä¸€ä¸ªL1losså‡½æ•°ï¼Œå®ç°æ¡ä»¶ä¿¡æ¯å’ŒçœŸå®ä¿¡æ¯çš„å»åˆã€‚ æ•™ç¨‹2æ–‡ç« æ€»è¿°ï¼š pix2pixæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªCGANï¼Œå…¶è¾“å…¥é‡Œæœ‰ä¸€å¼ å›¾ç‰‡ (ç›¸æ¯”ä¼ ç»Ÿçš„CGANçš„è¾“å…¥ä¸ºä¸€ä¸ªlabel+embedding) ï¼Œè€Œä¸æ˜¯ä¸€èˆ¬çš„å™ªå£°é‡ã€‚ è¿™ä¸ªç½‘ç»œé‡Œé¢æ²¡æœ‰æŸå¤±å‡½æ•°ï¼Œå› ä¸ºåˆ¤åˆ«å™¨ç½‘ç»œå…¶å®å­¦ä¹ åˆ°çš„å°±æ˜¯ä¸€ä¸ªæŸå¤±å‡½æ•°ã€‚ ç”±äºä¸€èˆ¬çš„åŸºäºæ¬§å¼è·ç¦»çš„æŸå¤±å‡½æ•°ä¼šé€ æˆå¹³å‡å€¼æ•ˆåº”ï¼Œä½¿å¾—æˆ‘ä»¬ç”Ÿæˆçš„å›¾ç‰‡æ¯”è¾ƒçš„æ¨¡ç³Šã€‚äºæ˜¯æˆ‘ä»¬ç”¨åˆ¤åˆ«å™¨æ¥å­¦ä¹ å‡ºä¸€ç§æŸå¤±å‡½æ•°æ¥åˆ°è¾¾ç”Ÿæˆå›¾ç‰‡çš„é«˜æ¸…çš„æ•ˆæœã€‚ ç›®æ ‡å‡½æ•°ï¼š CGANçš„ç›®æ ‡å‡½æ•°ä¸ºï¼š è¿™é‡Œåˆ¤åˆ«å‡½æ•°çš„è¾“å…¥xâ€”â€”åŸå›¾ç‰‡ï¼Œyâ€”â€”ç›®æ ‡å›¾ç‰‡ã€‚ å°†è¯¥æŸå¤±å‡½æ•°å’Œæ²¡æœ‰éCGANè¿›è¡Œå¯¹æ¯”ï¼Œç»“æœä¸ºï¼šCGANçš„æ•ˆæœæ›´å¥½ã€‚ ä¸ºäº†ç”Ÿæˆå™¨çš„ç²¾åº¦ï¼Œè¦åŠ å…¥æ­£åˆ™åŒ–é¡¹ï¼Œç”±äºL2æ­£åˆ™åŒ–ä¼šé€ æˆå¹³å‡å€¼æŸå¤±ï¼Œäºæ˜¯æˆ‘ä»¬ä½¿ç”¨L1æ­£åˆ™åŒ–é¡¹ã€‚ L1 loss function å¯ä»¥å»é™¤æ¨¡ç³Šï¼Œæé«˜æ¸…æ™°åº¦ï¼š æœ€åçš„æŸå¤±å‡½æ•°ä¸ºï¼š ç½‘ç»œç»“æ„ç”Ÿæˆå™¨ç»“æ„ æ€»ä½“ä¸Šï¼Œè¿˜æ˜¯ä½¿ç”¨çš„æ˜¯å·ç§¯ç½‘ç»œï¼ŒConvolution-BatchNorm-ReLU/LeakyReLUçš„å½¢å¼ã€‚ ç”Ÿæˆå™¨çš„ç½‘ç»œçš„ä½¿ç”¨çš„æ˜¯U-Net è¿™é‡Œå¯ä»¥çœ‹ä½œæ˜¯åŠæ˜¯å°†æˆ‘ä»¬Encoderé€šè¿‡è·³è·ƒè¿æ¥å®ç°encoderå’Œdecoderçš„å †å ã€‚ åˆ¤åˆ«å™¨ç»“æ„ è¿™é‡Œçš„åˆ¤åˆ«å™¨ä½¿ç”¨çš„æ˜¯PatchGANã€‚ å¦‚å›¾patchGANè¾“å…¥æ˜¯ä¸€ä¸ªNXNçš„å—ï¼Œè¾“å‡ºæ˜¯æ•´ä¸ªå—çš„true or fakeï¼Œæœ€åå–æ‰€ä»¥çš„patchå—çš„è¾“å‡ºçš„å¹³å‡å€¼å³å¯ã€‚ è¿™ç§æ–¹æ³•çš„ä¼˜ç‚¹æ˜¯ï¼šå‚æ•°å°‘ï¼Œè¿è¡Œé€Ÿåº¦å¿«ï¼›å¹¶ä¸”ä½¿ç”¨çš„å›¾ç‰‡å¯ä»¥æ˜¯ä»»æ„å¤§çš„å›¾ç‰‡ã€‚ ä¼˜åŒ–å’Œæ¨æ–­ ä½¿ç”¨æ ‡å‡†çš„ä¼˜åŒ–æ–¹æ³•ï¼Œä¸€æ¬¡åˆ¤åˆ«å™¨ï¼Œä¸€æ¬¡ç”Ÿæˆå™¨ã€‚ å¯¹äºç”Ÿæˆå™¨æ¥è¯´ï¼Œæˆ‘ä»¬ä¸ä½¿(ç”¨ä¸€èˆ¬çš„$\\min \\{\\log(1-D(G(x,z)))\\}$ä½œä¸ºæŸå¤±å‡½æ•°ï¼Œæˆ‘ä»¬ä½¿ç”¨$\\max \\{\\log(D(G(x,z))\\}$ ä½œä¸ºæŸå¤±å‡½æ•°ã€‚ è¿™é‡Œçš„ä¼˜åŒ–å™¨ä½¿ç”¨çš„æ˜¯Adamä¼˜åŒ–å™¨ï¼Œå‚æ•°$\\beta_1=0.5, \\beta_2=0.999$ï¼Œå­¦ä¹ ç‡$\\alpha=0.0002=2e-4$. è¯„ä¼°æŒ‡æ ‡è¿™é‡Œä½¿ç”¨äº†we run â€œreal vs. fakeâ€ perceptual studies on Amazon Mechanical Turk(AMT) ç»™1ç§’çš„æ—¶é—´æ¥çœ‹å›¾ç‰‡ï¼Œæ¥åˆ¤æ–­å›¾ç‰‡çš„çœŸå‡ã€‚ é€‰æ‹©patchGANçš„å°ºå¯¸è¿™é‡Œæˆ‘ä»¬é€‰æ‹©1x1-&gt;pixelGANï¼ŒNxN(æ•´å¼ å›¾ç‰‡)-&gt;ImageGANï¼Œä»‹äºä¹‹é—´çš„æ˜¯patchGANï¼Œè®ºæ–‡ä¸­æ¯”è¾ƒäº†ä¸åŒçš„æŒå°ºå¯¸å¯¹ç”Ÿæˆç»“æœçš„å½±å“ã€‚ 16x16 æœ‰è¾ƒé«˜çš„FCN-scores å¹¶ä¸” å¯ä»¥ç”Ÿæˆ artifactsã€‚ 70x70çš„ç»“æœä¹Ÿå¾ˆä¸é”™ï¼Œä¹Ÿè¾¾åˆ°äº†ä¸Šè¿°çš„è¦æ±‚ã€‚ é™„å½•ç”Ÿæˆå™¨çš„ç½‘ç»œç»“æ„ï¼š è¿™é‡Œçš„Ck-&gt;Convolution-BatchNorm-ReLUï¼ˆchannels=kï¼‰ï¼Œ CDK-&gt;Convolution-BatchNorm-Dropout-ReLUï¼ˆchannels=kï¼‰ã€‚ è¿™é‡Œçš„å·ç§¯æ ¸éƒ½æ˜¯4x4ï¼Œstride=2. ä»¥ä¸‹ä¸ºU-Netçš„ç½‘ç»œç»“æ„ï¼š(è¿™é‡Œæ˜¯æ²¡æœ‰è·³è·ƒè¿æ¥çš„) æœ‰è·³è·ƒè¿æ¥çš„U-Netè§£ç å™¨ï¼š ç”Ÿæˆå™¨çš„æœ€åä½¿ç”¨çš„æ˜¯Tanhæ¿€æ´»å‡½æ•°ã€‚ åˆ¤åˆ«å™¨çš„ç½‘ç»œç»“æ„ ä½¿ç”¨çš„æ˜¯LeakyReLU(0.2)ï¼Œæœ€åä¸€å±‚ä½¿ç”¨çš„æ˜¯Sigmoidå‡½æ•°ã€‚ ç¬¬ä¸€ä¸ªå·ç§¯ä¸Šæ²¡æœ‰ä½¿ç”¨BatchNormã€‚ Keraså®ç°ç®€ä»‹ Pytorchå®ç°æ¨¡å‹æ­å»ºç”±äºæ¨¡å‹çš„å·¥ä½œé‡è¾ƒå¤§ï¼Œå› æ­¤æˆ‘ä»¬è¿™é‡Œé‡‡ç”¨çš„å°†æ¨¡å‹ï¼Œè®­ç»ƒè¿‡ç¨‹ä»¥åŠç›¸å…³å‚æ•°çš„é…ç½®åˆ†å¼€å†™ã€‚ åˆ¤åˆ«å™¨çš„æ­å»º1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556import torchimport torch.nn as nnclass CNNBlock(nn.Module): def __init__(self, in_channels, out_channels, stride=2): super(CNNBlock, self).__init__() self.conv = nn.Sequential( nn.Conv2d(in_channels, out_channels, 4, stride, bias=False, padding_mode=&quot;reflect&quot;), # padding_mode # å‚è€ƒhttps://blog.csdn.net/weixin_42211626/article/details/122542323?utm_medium=distribute. # pc_aggpage_search_result.none-task-blog-2~aggregatepage~first_rank_ecpm_v1~rank_v31_ecp # m-4-122542323.pc_agg_new_rank&amp;utm_term=padding_mode&amp;spm=1000.2123.3001.4430 nn.BatchNorm2d(out_channels), # ç”±äºBatchNorm2dçš„å½±å“ï¼Œé€ æˆæˆ‘ä»¬çš„biasè¦è®¾æˆFalse nn.LeakyReLU(0.2), ) def forward(self, x): return self.conv(x)# x, y &lt;- å°†è¾“å…¥å’Œè¾“å‡ºå›¾ç‰‡å †å åœ¨ä¸€èµ·class Discriminator(nn.Module): def __init__(self, in_channels=3, features=[64, 128, 256, 512]): # 256-&gt; 26x26 286-&gt;30x30 æœ€åè¾“å‡ºçš„å½¢çŠ¶æ˜¯å’Œè¾“å…¥ç”±æœ‰å…³çš„ super(Discriminator, self).__init__() self.initial = nn.Sequential( nn.Conv2d(in_channels*2, features[0], kernel_size=4, stride=2, padding=1, padding_mode=&quot;reflect&quot;), nn.LeakyReLU(0.2) ) layer = [] in_channels = features[0] for feature in features[1:]: layer.append( CNNBlock(in_channels, feature, # strideåœ¨æœ€åä¸€å±‚ä¸º1ï¼Œå…¶ä»–ä¸º2 stride=1 if feature == features[-1] else 2), ) in_channels = feature layer.append( nn.Conv2d( in_channels, 1, kernel_size=4, stride=1, padding=1, padding_mode=&quot;reflect&quot; ), ) self.model = nn.Sequential(*layer) def forward(self, x, y): x = torch.cat([x, y], dim=1) x = self.initial(x) return self.model(x) ç”Ÿæˆå™¨çš„æ­å»º123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113import torchimport torch.nn as nnclass Block(nn.Module): def __init__(self, in_channels, out_channels, down=True, act=&quot;relu&quot;, use_dropout=False): super(Block, self).__init__() self.conv = nn.Sequential( # åˆ†æƒ…å†µï¼Œçœ‹æ˜¯ä¸Šå–æ ·è¿˜æ˜¯ä¸‹å–æ · nn.Conv2d(in_channels, out_channels, 4, 2, 1, bias=False, padding_mode=&quot;reflect&quot;) if down else nn.ConvTranspose2d(in_channels, out_channels, 4, 2, 1, bias=False), nn.BatchNorm2d(out_channels), nn.ReLU() if act==&quot;relu&quot; else nn.LeakyReLU(0.2), ) self.use_dropout = use_dropout self.dropout = nn.Dropout(0.5) def forward(self, x): x = self.conv(x) # dropout ä¸»è¦åœ¨ç½‘ç»œçš„ä¸Šä¸‰å±‚æ¥ä½¿ç”¨ return self.dropout(x) if self.use_dropout else xclass Generator(nn.Module): def __init__(self, in_channels=3, features=64): super(Generator, self).__init__() # 256 self.initial_down = nn.Sequential( nn.Conv2d(in_channels, features, 4, 2, 1, padding_mode=&quot;reflect&quot;), nn.LeakyReLU(0.2), ) # 128 x 128 self.down1 = Block(features, features * 2, down=True, act=&quot;leaky&quot;, use_dropout=False) # 64 x 64 self.down2 = Block( features * 2, features * 4, down=True, act=&quot;leaky&quot;, use_dropout=False ) # 32 x 32 self.down3 = Block( features * 4, features * 8, down=True, act=&quot;leaky&quot;, use_dropout=False ) # 16 x 16 self.down4 = Block( features * 8, features * 8, down=True, act=&quot;leaky&quot;, use_dropout=False ) # 8 x 8 self.down5 = Block( features * 8, features * 8, down=True, act=&quot;leaky&quot;, use_dropout=False ) # 4 x 4 self.down6 = Block( features * 8, features * 8, down=True, act=&quot;leaky&quot;, use_dropout=False ) # 2 x 2 self.bottleneck = nn.Sequential( nn.Conv2d(features*8, features*8, 4, 2, 1, padding_mode=&quot;reflect&quot;), nn.ReLU(), ) # 1 x 1 self.up1 = Block( features * 8, features * 8, down=False, act=&quot;relu&quot;, use_dropout=True ) self.up2 = Block( features * 8 * 2, features * 8, down=False, act=&quot;relu&quot;, use_dropout=True ) self.up3 = Block( features * 8 * 2, features * 8, down=False, act=&quot;relu&quot;, use_dropout=True ) self.up4 = Block( features * 8 * 2, features * 8, down=False, act=&quot;relu&quot;, use_dropout=False ) self.up5 = Block( features * 8 * 2, features * 4, down=False, act=&quot;relu&quot;, use_dropout=False ) self.up6 = Block( features * 4 * 2, features * 2, down=False, act=&quot;relu&quot;, use_dropout=False ) self.up7 = Block(features * 2 * 2, features, down=False, act=&quot;relu&quot;, use_dropout=False) self.final_up = nn.Sequential( nn.ConvTranspose2d(features*2, in_channels, kernel_size=4, stride=2, padding=1), nn.Tanh(), # [-1, 1] ) def forward(self, x): d1 = self.initial_down(x) d2 = self.down1(d1) d3 = self.down2(d2) d4 = self.down3(d3) d5 = self.down4(d4) d6 = self.down5(d5) d7 = self.down6(d6) bottleneck = self.bottleneck(d7) up1 = self.up1(bottleneck) up2 = self.up2(torch.cat([up1, d7], 1)) up3 = self.up3(torch.cat([up2, d6], 1)) up4 = self.up4(torch.cat([up3, d5], 1)) up5 = self.up5(torch.cat([up4, d4], 1)) up6 = self.up6(torch.cat([up5, d3], 1)) up7 = self.up7(torch.cat([up6, d2], 1)) return self.final_up(torch.cat([up7, d1], 1))def test(): x = torch.randn((1, 3, 256, 256)) model = Generator(in_channels=3, features=64) print(model) preds = model(x) print(preds.shape)if __name__ == &quot;__main__&quot;: test() print(torch.__version__) æ€»ç»“ Pix2pixæ˜¯ç”¨ä½œå›¾åƒç¿»è¯‘çš„CGAN Pix2pixç”¨æ¯”è¾ƒæ·±çš„ç½‘ç»œï¼Œè¿›è¡Œç²¾å¯†çš„è°ƒå‚äº§ç”Ÿäº†ä¸é”™çš„ç»“æœ Pix2pixéœ€è¦é…å¯¹çš„æ ‡ç­¾å›¾åƒå’Œå®é™…å›¾åƒ pix2pixè·å¾—äº†æ¯”è¾ƒè‰¯å¥½çš„å›¾åƒç¿»è¯‘çš„æ•ˆæœ,ä½†è®­ç»ƒpix2pixéœ€è¦ä¸€ç•ªå·¥å¤«ã€‚","link":"/2022/02/24/Generative%20Adversarial%20Networks/pix2pix-GAN-%E8%AE%BA%E6%96%87%E5%8F%8A%E6%A8%A1%E5%9E%8B%E6%90%AD%E5%BB%BA/"},{"title":"Pytorchä¸­å¸¸ç”¨çš„é«˜çº§æ“ä½œä¸æ­å»ºå®Œæ•´æµç¨‹","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦ä»æ¨¡å‹çš„ä¿å­˜å’Œä¿®æ”¹ã€å¦‚ä½•å¯¼å…¥å’ŒåŠ è½½ç°æœ‰çš„æ¨¡å‹ã€å¦‚ä½•ä½¿ç”¨GPUä»¥åŠå®Œæ•´çš„è®­ç»ƒå’Œæµ‹è¯•è¿‡ç¨‹è¿›è¡Œä»‹ç»ï¼Œä¸»è¦çš„è§†é¢‘æ•™ç¨‹ ã€‚ æœ¬æ•™ç¨‹ä»¥å®˜æ–¹æ–‡æ¡£ä¸ºä¸»ï¼Œè¿™é‡Œå…³æ³¨æœ€å¤šçš„æ˜¯å›¾åƒï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨è·Ÿå›¾åƒå¤„ç†ç›¸å…³çš„åŒ…ï¼Œæ‰“å¼€torchvisionçš„æ–‡æ¡£ã€‚ ç°æœ‰ç½‘ç»œçš„ä½¿ç”¨å’Œä¿®æ”¹æ‰“å¼€torchvisionæ–‡æ¡£ï¼Œé€‰æ‹©modelå¯ä»¥å¾—å‡ºæˆ‘ä»¬çš„ä¸€äº›å¸¸ç”¨çš„æ¨¡å‹ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚ ä¸»è¦çš„æ¨¡å‹æ¶‰åŠäº†å›¾åƒåˆ†ç±»ã€ç›®æ ‡æ£€æµ‹ã€è¯­ä¹‰è¯†åˆ«å’Œè§†é¢‘å¤„ç†ã€‚ è¿™é‡Œä»¥åˆ†ç±»æ¨¡å‹çš„VGGä¸ºä¾‹ï¼Œæ•°æ®é›†ä½¿ç”¨çš„æ—¶CFIAR10 å¦‚æœpretained=trueåˆ™ä½¿ç”¨çš„æ—¶é¢„è®­ç»ƒå¥½çš„å‚æ•°ï¼Œä¸ºFalseåˆ™ç›´æ¥é‡æ–°åˆå§‹åŒ–å‚æ•°æ¥è®­ç»ƒã€‚ progress(bool)ä»£è¡¨æ˜¯å¦æ˜¾ç¤ºé¢„è®­ç»ƒæ¨¡å‹ä¸‹è½½çš„è¿›åº¦æ¡ã€‚ 1234567import torchvisiontrain_data = torchvision.datasets.ImageNet(&quot;./data_image_net&quot;, split='train', download=True)# ../ è¡¨ç¤ºä¸Šçº§ç›®å½•ä¸‹å¯¼å…¥ ./ è¡¨ç¤ºå½“å‰çš„ç›®å½•ä¸‹å¯¼å…¥&gt;&gt;&gt;RuntimeError: The dataset is no longer publicly accessible. You need to download the archives externally and place them in the root directory. ç›®å‰è¿™ä¸ªæ•°æ®é›†ä¸é€‚åˆå…¬å¼€çš„è¢«ä¸‹è½½ï¼Œè¦è‡ªå·±æ‰‹åŠ¨ä¸‹è½½ï¼Œå¯¼å…¥åˆ°å¯¹äºçš„ç›®å½•ä¸‹ï¼Œä½†æ˜¯TM 147Gä¹Ÿå¤ªå¤§äº†ï¼Œæ‰€ä»¥å…¥é—¨è¿˜æ˜¯æ‰¾ä¸€äº›å°ä¸€ç‚¹çš„æ•°æ®é›†å§ã€‚ ç°æœ‰æ¨¡å‹çš„ä½¿ç”¨ä¸‹è½½çš„æ—¶å€™é»˜è®¤ä¼šä¸‹è½½åˆ°æˆ‘ä»¬Cç›˜ä¸­C:\\Users\\dell/.cache\\torch\\hub\\checkpoints\\vgg16-397923af.pth 123456789101112131415161718192021# å¯¼å…¥ç½‘ç»œçš„æ¨¡å‹vgg16_pretrain = vgg16(pretrained=True)# æœ‰é¢„è®­ç»ƒæƒé‡çš„,ä¼šä¸‹è½½ä¸€ä¼šï¼Œ528vgg16_normal = vgg16(pretrained=False)# æ²¡æœ‰æƒé‡ï¼Œä»…æ¨¡å‹æœ¬èº«print(vgg16_pretrain)&gt;&gt;&gt;VGG( (features): Sequential( (0): Conv2d(3, 64, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1)) ...... (30): MaxPool2d(kernel_size=2, stride=2, padding=0, dilation=1, ceil_mode=False) ) (avgpool): AdaptiveAvgPool2d(output_size=(7, 7)) (classifier): Sequential( (0): Linear(in_features=25088, out_features=4096, bias=True) ...... (6): Linear(in_features=4096, out_features=1000, bias=True) )) ç°æœ‰æ¨¡å‹çš„ä¿®æ”¹æ¨¡å‹å±‚æ•°çš„å¢åŠ add_module() 1234567891011121314151617181920212223# æ¨¡å‹å±‚çš„å¢åŠ print(vgg16_normal.classifier[6])# ç›´æ¥åœ¨æ¨¡å‹æœ€åå¢åŠ vgg16_normal.add_module('linear1', nn.Linear(1000, 10))# åŠ å…¥åˆ°æœ€åä¸€ä¸ªæ¨¡å‹å—ä¸­vgg16_normal.classifier.add_module('linear0', nn.Linear(1000, 10))print(vgg16_normal)&gt;&gt;&gt; ( ......(classifier): Sequential( (0): Linear(in_features=25088, out_features=4096, bias=True) (1): ReLU(inplace=True) (2): Dropout(p=0.5, inplace=False) (3): Linear(in_features=4096, out_features=4096, bias=True) (4): ReLU(inplace=True) (5): Dropout(p=0.5, inplace=False) (6): Linear(in_features=4096, out_features=1000, bias=True) (linear0): Linear(in_features=1000, out_features=10, bias=True) ) (linear1): Linear(in_features=1000, out_features=10, bias=True)) æ¨¡å‹çš„ä¿®æ”¹ 12345# -----------------------------------------------# æ¨¡å‹çš„ä¿®æ”¹vgg16_normal.classifier[7] = nn.Linear(1000, 256)vgg16_normal.linear0 = nn.Linear(256, 10)print(vgg16_normal) æ³¨æ„ï¼š åœ¨ Sequentialé‡Œçš„æ¨¡å‹ï¼Œç´¢å¼•éƒ½æ˜¯æŒ‰ç…§0ã€1ã€2ã€â€¦ çš„ç´¢å¼•æ¥é€‰å–çš„ï¼Œå› æ­¤é‡‘å›½æœ€åä¸€å±‚çš„åå­—ä¸ºlinear0ï¼Œä½†æ˜¯è¦æ±‚æ”¹æ—¶è¿˜æ˜¯ç”¨æ•°å€¼7æ¥ç´¢å¼•vgg16_normal.classifier[7] å…¶æ¬¡å¦‚æœvgg16_normal.linear0ä¸å­˜åœ¨æ—¶ï¼Œå°±ä¼šåœ¨æ¨¡å‹çš„æœ€åé‡æ–°å»ºç«‹ä¸€ä¸ªvgg16_normal.linear0çš„å±‚ã€‚ è‡³äºSequential()çš„ä¸€äº›æ“ä½œï¼ŒåæœŸå¯ä»¥å‚è€ƒææ²çš„è¯¾ç¨‹ã€‚ æ¨¡å‹çš„ä¿å­˜å’Œæ¨¡å‹çš„åŠ è½½è¿™é‡Œå°†å±•ç¤ºä¸¤ç§æ¨¡å‹çš„ä¿å­˜å’ŒåŠ è½½çš„æ–¹å¼ï¼Œä¸€ç§å°†ç½‘ç»œçš„å‚æ•°å’Œç»“æ„å…¨éƒ¨ä¿å­˜ä¸‹æ¥ï¼Œå¦ä¸€ç§åªæ˜¯ä¿å­˜æ¨¡å‹çš„å‚æ•°ï¼ˆæˆ‘æ„Ÿè§‰æ¨¡å‹çš„å‚æ•°å ç”¨çš„å†…å­˜åº”è¯¥è¾¾åˆ°90%ä»¥ä¸Šï¼Œåªä¿å­˜å‚æ•°æ„Ÿè§‰ä¸æ€ä¹ˆèŠ‚çœç©ºé—´å…¶å®ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆå®˜æ–¹æ¨èã€‚ï¼‰ ä¿å­˜å’ŒåŠ è½½æ–¹å¼112345678910111213141516171819202122# ä¿å­˜æ–¹å¼1ï¼Œæ¨¡å‹ç»“æ„+æ¨¡å‹å‚æ•°vgg16_1 = vgg16(pretrained=False)torch.save(vgg16_1, &quot;vgg16_method1.pth&quot;)# å¯¹åº”æ–¹å¼1çš„åŠ è½½model = torch.load(&quot;vgg16_method1.pth&quot;)print(model)&gt;&gt;&gt;VGG( (features): Sequential( (0): Conv2d(3, 64, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1)) ...... (30): MaxPool2d(kernel_size=2, stride=2, padding=0, dilation=1, ceil_mode=False) ) (avgpool): AdaptiveAvgPool2d(output_size=(7, 7)) (classifier): Sequential( (0): Linear(in_features=25088, out_features=4096, bias=True) ...... (6): Linear(in_features=4096, out_features=1000, bias=True) )) å› ä¸ºæ¨¡å‹å’Œæƒé‡çš„æ•°æ®éƒ½ä¿å­˜äº†ï¼Œæ‰“å°çš„æ—¶å€™åªæ˜¯æ‰“å°æ¨¡å‹çš„ç»“æ„ï¼Œè€Œä¸æ‰“å°æƒé‡æ•°æ®ã€‚ æ³¨æ„ï¼š å¯¹äºæ–¹å¼1ï¼Œå¦‚æœæ¨¡å‹æ˜¯è‡ªå·±å®šä¹‰ï¼Œé‚£ä¹ˆtorch.load()æ—¶ï¼Œå¦‚æœæ¨¡å‹å®šä¹‰çš„æ–‡ä»¶ä¸æ˜¯åŒä¸€ä¸ªæ–‡ä»¶ï¼Œé‚£ä¹ˆä¼šæŠ¥é”™ã€‚ è§£å†³çš„åŠæ³•å°±æ˜¯å°†æˆ‘ä»¬æˆ‘ä»¬è‡ªå®šä¹‰çš„æ¨¡å‹å’Œtorch.load()æ”¾åœ¨ç”¨ä¸€ä¸ªæ–‡ä»¶(è¿™æ ·æœ‰ç‚¹è ¢)ï¼Œæˆ–è€…å°±æ˜¯å°†å®šä¹‰çš„æ¨¡å‹æ–‡ä»¶from model import *è¿›æ¥å³å¯ã€‚ ä¿å­˜å’ŒåŠ è½½æ–¹å¼2123456789# ä¿å­˜æ–¹å¼2ï¼Œæ¨¡å‹å‚æ•°(å®˜æ–¹æ¨è)vgg16_2 = vgg16(pretrained=False)torch.save(vgg16_2.state_dict(), &quot;vgg16_method2.pth&quot;)# å¯¹åº”æ–¹å¼1çš„åŠ è½½model = torch.load(&quot;vgg16-397923af.pth&quot;)print(model)model = torch.load(&quot;vgg16_method2.pth&quot;)print(model) å®˜æ–¹å¸¦æœ‰é¢„è®­ç»ƒå‚æ•°çš„æ¨¡å‹å’Œè¿™ç§æ–¹æ³•ä¸€æ ·ï¼Œéƒ½æ˜¯é‡‡ç”¨çš„æ˜¯ä¿å­˜å‚æ•°è€Œä¸æ˜¯ä¿å­˜æ¨¡å‹ç»“æ„çš„æ–¹å¼ã€‚ ç›´æ¥torch.load()çš„è¯ç»“æœï¼Œæ‰“å°å‡ºæ¥éƒ½æ˜¯å‚æ•°å­—å…¸çš„å½¢å¼ã€‚ 12345678# å¯¹åº”æ–¹å¼2çš„åŠ è½½# å…ˆåˆå§‹åŒ–æ¨¡å‹vgg16_3 = vgg16(pretrained=False)# è·å–å‚æ•°å­˜å‚¨dictdict_para = torch.load(&quot;vgg16-397923af.pth&quot;)# å°†å­—å…¸å‚æ•°å¯¼å…¥æ¨¡å‹vgg16_3.load_state_dict(dict_para)print(vgg16_3) å®Œæ•´çš„è®­ç»ƒå¥—è·¯å¯¼å…¥æ•°æ®é›†1234567891011121314151617181920212223from torchvision.transforms import transformsfrom torchvision.datasets import CIFAR10# å‡†å¤‡æ•°æ®é›†train_data = CIFAR10(root=&quot;./root&quot;, train=True, transform=transforms.ToTensor(), download=False)test_data = CIFAR10(root=&quot;./root&quot;, train=False, transform=transforms.ToTensor(), download=False)# lengthé•¿åº¦train_data_size = len(train_data)test_data_size = len(test_data)# æ‰“å°ä¿¡æ¯print(&quot;è®­ç»ƒæ•°æ®é›†é•¿åº¦ä¸ºï¼š{}&quot;.format(train_data_size))print(&quot;æµ‹è¯•æ•°æ®é›†é•¿åº¦ä¸ºï¼š{}&quot;.format(test_data_size))# åˆ©ç”¨DataLoaderæ¥åŠ è½½æ•°æ®åº“é›†train_loader = DataLoader(train_data, batch_size=64)test_loader = DataLoader(test_data, batch_size=64) æ­å»ºç½‘ç»œ1234567891011121314151617181920212223242526272829from torch import nnimport torch# æ­å»ºç¥ç»ç½‘ç»œclass Net(nn.Module): def __init__(self): super(Net, self).__init__() self.models = nn.Sequential( nn.Conv2d(in_channels=3, out_channels=32, kernel_size=5, padding=2), nn.MaxPool2d(kernel_size=2, stride=2), nn.Conv2d(in_channels=32, out_channels=32, kernel_size=5, padding=2), nn.MaxPool2d(kernel_size=2, stride=2), nn.Conv2d(in_channels=32, out_channels=64, kernel_size=5, padding=2), nn.MaxPool2d(kernel_size=2, stride=2), nn.Flatten(), nn.Linear(64*4*4, 64), nn.Linear(64, 10), ) def forward(self, x): return self.models(x)# éªŒè¯æ­£ç¡®æ€§if __name__ == '__main__': net = Net() inputs = torch.ones((64, 3, 32, 32)) outputs = net(inputs) print(outputs.shape) åœ¨train.pyä¸­å¯¼å…¥ç½‘ç»œï¼Œåˆ›å»ºç½‘ç»œæ¨¡å‹ï¼š 123from model import Net# åˆ›å»ºç½‘ç»œæ¨¡å‹net = Net() ä¼˜åŒ–å™¨å’ŒæŸå¤±å‡½æ•°123456# æŸå¤±å‡½æ•°loss_fn = nn.CrossEntropyLoss()# ä¼˜åŒ–å™¨learning_rate = 1e-2optimizer = optim.SGD(net.parameters(), learning_rate) åŸºæœ¬çš„è®­ç»ƒè¿‡ç¨‹12345678910111213141516171819202122232425262728293031# è®¾ç½®è®­ç»ƒç½‘ç»œå’Œä¸€äº›å‚æ•°# è®°å½•è®­ç»ƒçš„æ¬¡æ•°total_train_step = 0# è®°å½•æµ‹è¯•æ¬¡æ•°total_test_step = 0# è®­ç»ƒçš„è½®æ•°epoch = 10# æ·»åŠ tensorboardwriter = SummaryWriter(&quot;train_logs&quot;)for i in range(epoch): print(&quot;----------ç¬¬{}è½®è®­ç»ƒå¼€å§‹----------&quot;.format(i+1)) # è®­ç»ƒæ­¥éª¤å¼€å§‹ for data in train_loader: imgs, targets = data outputs = net(imgs) loss = loss_fn(outputs, targets) # ä¼˜åŒ–å™¨ä¼˜åŒ–æ¨¡å‹ optimizer.zero_grad() loss.backward() optimizer.step() total_train_step = total_train_step + 1 if total_train_step % 100 == 0: print(&quot;è®­ç»ƒæ¬¡æ•°ï¼š{}ï¼ŒLoss:{}&quot;.format(total_train_step, loss.item())) writer.add_scalar(&quot;train_loss&quot;, loss.item(), total_train_step) # loss -&gt; tensor([xxx]) # loss.item() -&gt; xxx ç›´æ¥è¿”å›çœŸå®çš„æ•°æ® è¿™é‡Œçš„loss.item()å°±æ˜¯å°†tensorç±»å‹å˜é‡é‡Œå…·ä½“çš„æ•°å­—è¾“å‡ºå‡ºæ¥ã€‚ ä»¥ä¸Šçš„ä»£ç æ˜¯å¯¹æ¨¡å‹è¿›è¡Œè®­ç»ƒï¼Œé‚£ä¹ˆå¦‚ä½•è¯„ä»·è®­ç»ƒçš„å¥½åæƒ…å†µ?â€”â€”é‚£å°±æ˜¯ç›´æ¥åœ¨æµ‹è¯•é›†åˆè¿›è¡Œæµ‹è¯•ã€‚ 12345678910111213141516# æµ‹è¯•æ­¥éª¤å¼€å§‹total_test_loss = 0.0with torch.no_grad(): for data in test_loader: imgs, targets = data outputs = net(imgs) loss = loss_fn(outputs, targets) total_test_loss = total_test_loss + loss.item() print(&quot;æ•´ä½“æµ‹è¯•é›†ä¸Šçš„Loss:{}&quot;.format(total_test_loss)) writer.add_scalar(&quot;test_loss&quot;, total_test_loss, total_test_step) total_test_loss = total_test_step + 1 # æ¨¡å‹çš„ä¿å­˜ è¿™é‡Œæ˜¯å°†æ¯è½®çš„æ¨¡å‹éƒ½è¿›è¡Œä¿å­˜ torch.save(net, &quot;net_{}.pth&quot;.format(i)) print(&quot;æ¨¡å‹å·²ç»ä¿å­˜&quot;) æ¨¡å‹çš„ä¼˜åŒ–è¿‡ç¨‹å¯¹äºç›®æ ‡æ£€æµ‹å’Œè¯­ä¹‰åˆ†å‰²æ¥è¯´ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨æµ‹è¯•è¯¯å·®æ¥ä½œä¸ºè®­ç»ƒè¿‡ç¨‹çš„è¯„ä»·æŒ‡æ ‡ã€‚ä½†æ˜¯åˆ†ç±»é—®é¢˜è¿˜æœ‰å…¶ä»–çš„æ–¹æ³•ï¼Œæ¯”å¦‚æˆ‘ä»¬çš„outputs=[0.1, 0.2, 0.3, 0.4]å…¶å®æ˜¯è¯¥å›¾ç‰‡å±äºå„ç§æƒ…å†µçš„æ¦‚ç‡ï¼Œè€ŒçœŸå®çš„è¾“å‡ºå¯ä»¥æ˜¯outputs=[3] å³ä¸ºæœ€åçš„åˆ¤åˆ«ç±»åˆ«çš„ç¼–å·ã€‚ 12345678910111213total_accuracy = 0for xxx ... ... accuracy = (outputs.argmax(1) == targets).sum() # ä¹Ÿå¯ä»¥ä½¿ç”¨maxå‡½æ•° pred = torch.max(outputs, dim=1)[1] accuracy0 = (pred == targets).sum() total_accuracy = total_accuracy + accuracy # total_accuracy = total_accuracy + accuracy0 print(&quot;æ•´ä½“æµ‹è¯•æ•°æ®çš„æ­£ç¡®ç‡ä¸º:{}&quot;.format(total_accuracy/len(test_loader))) é€šè¿‡ä¸Šè¿°æ–¹æ³•æ¥å®ç°è¾“å‡ºå‡†ç¡®ç‡ã€‚ æ¨¡å‹æ­å»ºçš„ç»†èŠ‚12net.train()net.eval() ç”±äºæˆ‘ä»¬çš„netæ˜¯Netçš„å®ä¾‹åŒ–çš„å¯¹è±¡ï¼ŒåŒæ—¶Netæ˜¯ç»§æ‰¿nn.Moduleçš„ä¸€ä¸ªå­ç±»ã€‚è¦å»nn.Containers-&gt;nn.Moduleå¸®åŠ©æ–‡æ¡£é‡ŒæŸ¥é˜…ã€‚ å…¶å®ï¼Œè¿™ä¸¤ä¸ªå±‚å°±æ˜¯åœ¨æœ‰dropoutå’ŒBatchNormæ˜¯æ‰ä¸»è¦èµ·ä½œç”¨ã€‚ ä½¿ç”¨GPUè®­ç»ƒæ¨¡å‹çš„æ–¹æ³•æ–¹æ³•ä¸€åªè¦æŠŠå¯¹äºçš„ç½‘ç»œæ¨¡å‹ã€æ•°æ®(è¾“å…¥imgsã€æ ‡æ³¨labels)å’ŒæŸå¤±å‡½æ•°è¿›è¡Œ.cuda()ï¼Œç„¶åè¦†ç›–åŸæ¥çš„å³å¯ã€‚ 12345678if torch.cuda.is_available(): # ä¿®æ”¹æ¨¡å‹ net = net.cuda() # ä¿®æ”¹æ•°æ® imgs = imgs.cuda() targets = targets.cuda() # ä¿®æ”¹æŸå¤±å‡½æ•° loss_fn = loss_fn.cuda() åœŸå †çš„æé†’ï¼š colabçš„GPUå…è´¹ç‰ˆæ¯å‘¨å¯ä»¥ä½¿ç”¨å…è´¹30å°æ—¶ã€‚ å¯¹äºcolab,å¦‚æœæƒ³è¦è¿è¡Œåœ¨terminalä¸Šçš„è¯­è¨€ï¼Œéœ€è¦åŠ åœ¨å‘½ä»¤å‰åŠ ï¼ã€‚ upæµ‹è¯•ç»“æœï¼Œcolabçš„é€Ÿåº¦æ˜¯ä¸€èˆ¬ä»–è‡ªå·±ç”µè„‘çš„4å€ã€‚è¿è¡Œä¸€è½®åªè¦0.7sï¼Œè€Œupçš„ç”µè„‘è¦2.5s ä½†æ˜¯ä¸Šè¿°æ–¹æ³•ä¸æ˜¯å¾ˆå¸¸ç”¨ã€‚ æ–¹æ³•äºŒè¿™æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„æ–¹æ³•ã€‚ 1234567891011121314151617# Deviceæ˜¯torch.deviceç±»å‹çš„æ•°æ®Device = torch.device(&quot;cpu&quot;)Device0 = torch.device(&quot;cuda&quot;)# å¯ä»¥é€‰æ‹©ä¸åŒçš„æ˜¾å¡Device1 = torch.device(&quot;cuda:0&quot;)Device2 = torch.device(&quot;cuda:1&quot;)device = torch.device(&quot;cuda:0&quot; if torch.cuda.is_available() else &quot;cpu&quot;)# å¯¼å…¥åˆ°ç½‘ç»œä¸­net = net.to(Device)# ä¿®æ”¹æ•°æ®imgs = imgs.to(Device)targets = targets.to(Device)# ä¿®æ”¹æŸå¤±å‡½æ•°loss_fn = loss_fn.to(Device)# å¯¹äºæœªæ¥å’ŒæŸå¤±å‡½æ•°æ¥è¯´ç›´æ¥to(device)å³å¯ å…¶ä»–ä¸æ–¹æ³•ä¸€ç›¸åŒï¼Œä¹Ÿæ˜¯å¯¹ç½‘ç»œã€æ•°æ®ä»¥åŠæŸå¤±å‡½æ•°è¿›è¡Œè®¾ç½®ã€‚ ä»¥ä¸‹ä¸ºæˆ‘åœ¨å­—èŠ‚ç”µè„‘ä¸Šè®­ç»ƒçš„é€Ÿåº¦ç»“æœã€‚ 123456789101112131415161718-------------CPU------------------------ç¬¬2è½®è®­ç»ƒå¼€å§‹----------æ¶ˆè€—çš„æ—¶é—´ä¸º:0.21944713592529297è®­ç»ƒæ¬¡æ•°ï¼š800ï¼ŒLoss:1.8308976888656616æ¶ˆè€—çš„æ—¶é—´ä¸º:1.417208194732666è®­ç»ƒæ¬¡æ•°ï¼š900ï¼ŒLoss:1.782684564590454æ¶ˆè€—çš„æ—¶é—´ä¸º:2.627971887588501è®­ç»ƒæ¬¡æ•°ï¼š1000ï¼ŒLoss:1.8661954402923584æ¶ˆè€—çš„æ—¶é—´ä¸º:3.8746509552001953è®­ç»ƒæ¬¡æ•°ï¼š1100ï¼ŒLoss:1.9508962631225586æ¶ˆè€—çš„æ—¶é—´ä¸º:5.333733797073364è®­ç»ƒæ¬¡æ•°ï¼š1200ï¼ŒLoss:1.6595017910003662æ¶ˆè€—çš„æ—¶é—´ä¸º:6.635249376296997è®­ç»ƒæ¬¡æ•°ï¼š1300ï¼ŒLoss:1.6205933094024658æ¶ˆè€—çš„æ—¶é—´ä¸º:7.973670244216919è®­ç»ƒæ¬¡æ•°ï¼š1400ï¼ŒLoss:1.7197237014770508æ¶ˆè€—çš„æ—¶é—´ä¸º:9.35597276687622è®­ç»ƒæ¬¡æ•°ï¼š1500ï¼ŒLoss:1.8009873628616333 ä»¥ä¸‹æ˜¯ä½¿ç”¨cpuè®­ç»ƒçš„æ•ˆæœï¼š 123456789101112131415161718192021-------------GPU------------------------ç¬¬2è½®è®­ç»ƒå¼€å§‹----------æ¶ˆè€—çš„æ—¶é—´ä¸º:1.0422132015228271è®­ç»ƒæ¬¡æ•°ï¼š800ï¼ŒLoss:1.8765838146209717æ¶ˆè€—çš„æ—¶é—´ä¸º:6.844691276550293è®­ç»ƒæ¬¡æ•°ï¼š900ï¼ŒLoss:1.856195330619812æ¶ˆè€—çš„æ—¶é—´ä¸º:12.637196063995361è®­ç»ƒæ¬¡æ•°ï¼š1000ï¼ŒLoss:1.9804853200912476æ¶ˆè€—çš„æ—¶é—´ä¸º:18.599247694015503è®­ç»ƒæ¬¡æ•°ï¼š1100ï¼ŒLoss:1.9813154935836792æ¶ˆè€—çš„æ—¶é—´ä¸º:24.597208261489868è®­ç»ƒæ¬¡æ•°ï¼š1200ï¼ŒLoss:1.7226444482803345æ¶ˆè€—çš„æ—¶é—´ä¸º:30.361780405044556è®­ç»ƒæ¬¡æ•°ï¼š1300ï¼ŒLoss:1.6570385694503784æ¶ˆè€—çš„æ—¶é—´ä¸º:36.181212425231934è®­ç»ƒæ¬¡æ•°ï¼š1400ï¼ŒLoss:1.7347835302352905æ¶ˆè€—çš„æ—¶é—´ä¸º:41.99465990066528è®­ç»ƒæ¬¡æ•°ï¼š1500ï¼ŒLoss:1.8110555410385132æ•´ä½“æµ‹è¯•é›†ä¸Šçš„Loss:304.21112048625946æ•´ä½“æµ‹è¯•æ•°æ®çš„æ­£ç¡®ç‡ä¸º:19.764331817626953æ¨¡å‹å·²ç»ä¿å­˜ ä»¥ä¸‹æ˜¯colabçš„cpuä¸GPUçš„æ•ˆæœï¼š å®Œæ•´çš„éªŒè¯/æµ‹è¯•(demo)æ­¥éª¤ä¸»è¦çš„æ ¸å¿ƒå°±æ˜¯ä½¿ç”¨å·²ç»è®­ç»ƒçš„å¥½çš„æ¨¡å‹ã€‚ ä¸»è¦æé†’ï¼š Resize()çš„ç‰¹ç‚¹ï¼šè¾“å…¥çš„å›¾æ ¼å¼å’Œè¾“å‡ºçš„æ ¼å¼æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚ 12345678910111213141516171819202122232425262728293031323334353637import torchfrom PIL import Imagefrom torchvision.transforms import transformsfrom model import Net# å¯¼å…¥å›¾ç‰‡image_path = &quot;&quot;image = Image.open(image_path)print(image)# æ•°æ®å¢å¼ºå¤„ç†transform = transforms.Compose([ transforms.Resize((32, 32)), transforms.ToTensor(),])image = transform(image)image = torch.reshape(image, (1, 3, 32, 32))# å¯¼å…¥æ¨¡å‹# æ³¨æ„ä½¿ç”¨ç¬¬ä¸€ç§æ¨¡å‹ä¿å­˜æ—¶è¦å°†æ¨¡å‹å¯¼å…¥# from model import Net å³å¯torch.load(&quot;net_0.pth&quot;)# ç¬¬äºŒç§å¯¼å…¥æ–¹æ³•net = Net()net.load_state_dict(torch.load(&quot;net_0.pth&quot;))# å…»æˆç»ƒå¥½å¾—åˆ°ä¹ æƒ¯net.eval()with torch.no_grad(): # èŠ‚çº¦å†…å­˜å’Œä½¿ç”¨æ€§èƒ½ outputs = net(image) pred_label = outputs.argmax(1) # è¾“å‡ºé¢„æµ‹çš„ç±»åˆ«print(pred_label) æ¯”è¾ƒæ ‡å‡†çš„æ­¥éª¤è¯·è§æ•™ç¨‹ã€‚ æ³¨æ„ï¼š å¦‚æœæ˜¯ä½¿ç”¨GPUè®­ç»ƒçš„æ¨¡å‹ï¼Œä½†æ˜¯æµ‹è¯•æ—¶çš„è®¾å¤‡å¦‚æœä¸ºCPUï¼Œæ­¤æ—¶éœ€è¦ä¿®æ”¹torch.load(&quot;xxx.pth&quot;,map_location=torch.device(&quot;cpu&quot;)) å®é™…é¡¹ç›®ä¸­çš„å‚æ•°é—®é¢˜ å¯ä»¥å°†requireçš„å‚æ•°æ”¹æˆdefalutçš„ï¼Œå…ˆè®©ä»£ç è·‘èµ·æ¥ã€‚","link":"/2022/02/23/PyTorch%E6%95%99%E7%A8%8B%E4%B8%8E%E6%BA%90%E7%A0%81%E8%AE%B2%E8%A7%A3/Pytorch%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84%E9%AB%98%E7%BA%A7%E6%93%8D%E4%BD%9C%E4%B8%8E%E6%90%AD%E5%BB%BA%E5%AE%8C%E6%95%B4%E6%B5%81%E7%A8%8B/"},{"title":"Pytorché…ç½®å’Œåˆè¯†ç¯‡","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦ä»Pytorchçš„ç¯å¢ƒé…ç½®å’Œå®‰è£…ã€ç¼–è¾‘å™¨çš„é…ç½®æ•™ç¨‹ã€pythonå­¦ä¹ ä¸­æ³•å®ä»¥åŠPycharm å’Œ Jupyter çš„å¯¹æ¯”å››ä¸ªæ–¹é¢è¿›è¡Œä»‹ç»ã€‚ä¸»è¦çš„è§†é¢‘æ•™ç¨‹ ã€‚ Pytorchçš„ç¯å¢ƒé…ç½®å’Œå®‰è£…ä¸»è¦å†…å®¹å¯ä»¥å‚è€ƒè§†é¢‘æ•™ç¨‹ è¿™é‡Œä¸»è¦è®°å½•å¦‚ä½•æŸ¥çœ‹GPUé…ç½®ã€‚ é¦–å…ˆï¼Œå¯ä»¥æ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨ç›´æ¥æŸ¥çœ‹æ˜¾å¡çš„é…ç½®ã€‚ æ‰“å¼€åœ¨cmdé‡Œè¾“å…¥nvidia-smi æ¥æŸ¥çœ‹å½“å‰æ˜¾å¡çš„CUDAç‰ˆæœ¬ã€‚ å¦‚æœæ˜¾ç¤ºæ²¡æœ‰è¯¥å‘½ä»¤ï¼Œåˆ™å¯ä»¥å‚è€ƒä»¥ä¸‹æ•™ç¨‹ã€‚ æ€»ç»“ï¼Œåœ¨é€‰æ‹©æ˜¾å¡pytorchå¯¹åº”çš„æ˜¾å¡çš„é…ç½®æ—¶ å¦‚æœæ— è‹±ä¼Ÿè¾¾æ˜¾å¡:CUDAé€‰æ‹©Noneï¼› å¦‚æœæœ‰è‹±ä¼Ÿè¾¾æ˜¾å¡:CUDAé€‰æ‹©9.2 ç¼–è¾‘å™¨çš„é…ç½®æ•™ç¨‹è¿™é‡Œä¸»è¦ä»¥jupyter notebookä¸ºä¾‹ï¼Œè¯¦ç»†æ•™ç¨‹è¯·å‚è€ƒä»¥ä¸‹è§†é¢‘ã€‚ é¦–å…ˆï¼Œæ‰“å¼€Anaconda Promptï¼Œæ¿€æ´»éœ€è¦çš„ç¯å¢ƒã€‚ ä¹‹åï¼Œconda listæ¥æŸ¥çœ‹å½“å‰å·²ç»å®‰è£…å¥½çš„åŒ…ã€‚ ç„¶åï¼Œå®‰è£…conda install nb_conda æœ€åï¼Œå¯åŠ¨å³å¯ï¼Œcmdä¸­è¾“å…¥jupyter notebook æµ‹è¯•å®‰è£…ã€‚ 12import torchtorch.cuda.is_available() ä½†æ˜¯ï¼Œè¿™ä¸ªæ“ä½œæˆ‘è¿™è¾¹ä¸€ç›´è¡Œä¸é€šï¼Œæˆ‘é€‰æ‹©ç›´æ¥ä¿®æ”¹kernelçš„.jsonæ–‡ä»¶ã€‚ pythonå­¦ä¹ ä¸­æ³•å® dir()å‡½æ•°ï¼Œèƒ½è®©æˆ‘ä»¬çŸ¥é“å·¥å…·ç®±ä»¥åŠå·¥å…·ç®±ä¸­çš„åˆ†éš”åŒºæœ‰ä»€ä¹ˆä¸œè¥¿ã€‚ help()å‡½æ•°ï¼Œèƒ½è®©æˆ‘ä»¬çŸ¥é“æ¯ä¸ªå·¥å…·æ˜¯å¦‚ä½•ä½¿ç”¨çš„ï¼Œå·¥å…·çš„ä½¿ç”¨æ–¹æ³•ã€‚ å®æˆ˜æ¼”ç»ƒï¼š ä»¥torchä¸ºä¾‹ï¼Œæˆ‘ä»¬æ¥æŸ¥æ‰¾torchè¿™ä¸ªåŒ…ä¸‹é¢åŒ…å«çš„åˆ†åŒºã€‚ 1234dir(torch.cuda.is_available)# è¿”å›è¯¥å‡½æ•°ä¸‹é¢çš„å±æ€§dir(torch.cuda.is_available())# è¿”å›çš„æ˜¯è¯¥å‡½æ•°è¿”å›å€¼ä¸‹é¢çš„å±æ€§ï¼Œè¿™é‡Œè¿”å›çš„æ˜¯boolå˜é‡çš„å±æ€§ helpçš„ä½¿ç”¨ä¹Ÿæ˜¯åŒç†çš„ã€‚ è¿”å›æ˜¯ä¸€ä¸ªboolå€¼ï¼Œè¡¨ç¤ºcudaæ˜¯å¦å¯ç”¨ã€‚ å¦‚æœåŠ ä¸Šæ‹¬å·å°±å¾—å‡ºboolå€¼å¾—å¸®åŠ©ã€‚ Pycharm å’Œ Jupyter çš„å¯¹æ¯” pythonçš„æ–‡ä»¶æ˜¯æ•´ä½“æ˜¯ä¸€ä¸ªå—ï¼Œå¦‚æœä¸€æ­¥å‡ºé”™ç¼–è¯‘ä»¥åå†æ¬¡è¿è¡Œæ˜¯ä»å¤´å¼€å§‹è¿è¡Œçš„ã€‚æ•ˆç‡ä½ä¸‹ï¼Œæ¯æ¬¡éƒ½è¦é‡æ–°æ¥ä¸€æ¬¡ ä¼˜ç‚¹ï¼šé€šç”¨ï¼Œä¼ æ’­æ–¹ä¾¿ï¼Œé€‚ç”¨äºå¤§å‹é¡¹ç›® ç¼ºç‚¹ï¼šéœ€è¦ä»å¤´è¿è¡Œ pythonæ§åˆ¶å°ï¼Œæ˜¯ä¸€å¥æ˜¯ä¸€ä¸ªå—ï¼Œä¿®æ”¹ä¹‹åå°±æ˜¯ä»å‡ºé”™çš„åœ°æ–¹å¼€å§‹å¾€ä¸‹è¿è¡Œã€‚ä»£ç çš„é˜…è¯»æ€§ä¸å¥½ å…¶å®å¯ä»¥å¤šè¡Œè¾“å…¥ï¼Œåœ¨è¾“å…¥å®Œä¸€å¥ä¹‹åå¯ä»¥Ctrl+Enterï¼Œå‡ºç°ä¸‰ä¸ªç‚¹ï¼Œç»§ç»­è¾“å…¥ä¸‹ä¸€å¥ã€‚ ä¼˜ç‚¹ï¼šæ˜¾ç¤ºæ¯ä¸ªå˜é‡å±æ€§ ç¼ºç‚¹ï¼šä¸åˆ©äºä»£ç é˜…è¯»åŠä¿®æ”¹ jupyterå¯ä»¥è‡ªå·±å®šä¹‰ä»£ç å—çš„å¤§å°ï¼Œå¯ä»¥æ˜¯ä¸€å¥ï¼Œä¹Ÿå¯ä»¥æ˜¯å¤šå¥ã€‚åŠŸèƒ½ä»‹äºäºŒè€…ä¹‹é—´ ä¼˜ç‚¹ï¼šåˆ©äºä»£ç çš„é˜…è¯»å’Œä¿®æ”¹ ç¼ºç‚¹ï¼šç¯å¢ƒéœ€è¦é…ç½®","link":"/2022/02/10/PyTorch%E6%95%99%E7%A8%8B%E4%B8%8E%E6%BA%90%E7%A0%81%E8%AE%B2%E8%A7%A3/Pytorch%E9%85%8D%E7%BD%AE%E5%92%8C%E5%88%9D%E8%AF%86%E7%AF%87/"},{"title":"PytorchåŸºæœ¬ç½‘ç»œçš„æ­å»ºè¿‡ç¨‹","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦ä»ç½‘ç»œçš„æ­å»ºã€æŸå¤±å‡½æ•°å’Œä¼˜åŒ–å™¨ä¸‰ä¸ªæ–¹é¢è¿›è¡Œä»‹ç»ï¼Œå¹¶ä¸”ä»¥ä¸‹æ•™ç¨‹ä¸»è¦è¿˜æ˜¯å‡ºè‡ªäºå®˜æ–¹çš„æ–‡æ¡£ï¼Œå› æ­¤è¿˜æ˜¯æœ‰æ—¶é—´å¤šçœ‹çœ‹å®˜æ–¹æ–‡æ¡£ï¼Œä¸»è¦çš„è§†é¢‘æ•™ç¨‹ ã€‚ ç¥ç»ç½‘ç»œåŸºæœ¬éª¨æ¶ æœ¬èŠ‚ä¸»è¦è®²çš„æ˜¯nn.Containerså†…çš„å·¥å…·ã€‚ nn.Moduleè¿™æ˜¯ä¸€ä¸ªåŸºç±»ï¼Œæ‰€æœ‰çš„ç¥ç»ç½‘ç»œçš„æ­å»ºéƒ½éœ€è¦å»é›†æˆè¿™ä¸ªç±»ï¼Œå°†æ•´ä¸ªç±»çš„__init__()å’Œforward()è¿›è¡Œé‡å†™å³å¯ã€‚è¿™é‡Œæˆ‘ä»¬ä»¥å®˜ç½‘ä¸Šçš„ä¸€ä¸ªæ•™ç¨‹ä¸ºä¾‹ã€‚ 123456789101112import torch.nn as nnimport torch.nn.functional as Fclass Model(nn.Module): def __init__(self): super(Model, self).__init__() self.conv1 = nn.Conv2d(1, 20, 5) self.conv2 = nn.Conv2d(20, 20, 5) def forward(self, x): x = F.relu(self.conv1(x)) return F.relu(self.conv2(x)) é€šè¿‡è°ƒè¯•å¯ä»¥å‘ç°ï¼Œè¿›å…¥ç±»ä¸­ç¬¬ä¸€æ­¥å°±ä¼šè¿›å…¥åˆ°æˆ‘ä»¬çš„forward()å‡½æ•°ä¸­ï¼Œè¿›è¡Œè¿è¡Œï¼Œå†é€šè¿‡returnè¿”å›åˆ°ç±»çš„å¤–éƒ¨ã€‚ å·ç§¯æ“ä½œConv2d()torchæä¾›äº†ä¸¤ä¸ªä¸€ä¸ªæ˜¯torch.nnä¸€ä¸ªæ˜¯torch.nn.functionalå‰è€…å¯ä»¥çœ‹ä½œæ˜¯åè€…çš„ä¸€ä¸ªå°è£…ï¼Œè°ƒç ”èµ·æ¥ä¼šæ›´æ–¹ä¾¿ï¼Œä½†æ˜¯åè€…å®ç°çš„æ›´åŠ åŸºç¡€ï¼Œç›¸å½“äºå‰è€…çš„ä¸€äº›å…·ä½“çš„å®ç°ã€‚ è¿™é‡Œæ˜¯nn.Conv2dçš„å¸®åŠ©æ–‡æ¡£ï¼Œç›¸æ¯”ä¹‹ä¸‹æ¯”functional.conv2dçš„æ•™ç¨‹è¦è¯¦ç»†å¾ˆå¤šã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142import torchimport torch.nn.functional as Finput = torch.tensor([[1, 2, 0, 3, 1], [0, 1, 2, 3, 1], [1, 2, 1, 0, 0], [5, 2, 3, 1, 1], [2, 1, 0, 1, 1]])# å…»æˆè‰¯å¥½çš„ä¹ æƒ¯ï¼Œå°†çŸ©é˜µå†™æˆä»¥ä¸Šçš„æ ¼å¼kernel = torch.tensor([[1, 2, 1], [0, 1, 0], [2, 1, 0]])input = torch.reshape(input, (1, 1, 5, 5))kernel = torch.reshape(kernel, (1, 1, 3, 3))print(input.shape)print(kernel.shape)output = F.conv2d(input=input, weight=kernel, stride=1)print(output)output2 = F.conv2d(input=input, weight=kernel, stride=2)print(output2)output3 = F.conv2d(input=input, weight=kernel, stride=1, padding=1)print(output3)&gt;&gt;&gt;torch.Size([1, 1, 5, 5])torch.Size([1, 1, 3, 3])tensor([[[[10, 12, 12], [18, 16, 16], [13, 9, 3]]]])tensor([[[[10, 12], [13, 3]]]])tensor([[[[ 1, 3, 4, 10, 8], [ 5, 10, 12, 12, 6], [ 7, 18, 16, 16, 8], [11, 13, 9, 3, 4], [14, 13, 9, 7, 4]]]]) ä»¥ä¸‹ä¸»è¦æ¥è®²è§£çš„æ˜¯nn.Conv2d()çš„æ“ä½œã€‚ Parameterså‚æ•°ï¼ˆè¿™é‡Œé¢æœ€å¸¸ç”¨çš„æ˜¯ä¸Šé¢çš„æ˜¯å‰äº”ä¸ªï¼‰ in_channels (int) â€“ Number of channels in the input image è¾“å…¥çš„é€šé“æ•° out_channels (int) â€“ Number of channels produced by the convolution è¾“å‡ºçš„é€šé“æ•° kernel_size (int or tuple) â€“ Size of the convolving kernel å¯ä»¥è‡ªå®šä¹‰å·ç§¯æ ¸çš„å¤§å°ï¼Œå¯ä»¥ä¸æ˜¯æ–¹å½¢çš„ç»“æ„ã€‚ stride (int or tuple, optional) â€“ Stride of the convolution. æŒ‡çš„æ˜¯å·ç§¯çš„æ­¥é•¿ Default: 1 padding (int, tuple or str, optional) â€“ Padding added to all four sides of the input. æ˜¯å¦å†è¾¹ç¼˜è¿›è¡Œå¡«å……Default: 0 padding_mode (string**, optional) â€“ 'zeros', 'reflect', 'replicate' or 'circular'. Default: 'zeros' dilation (int or tuple, optional) â€“ Spacing between kernel elements. Default: 1 groups (int, optional) â€“ Number of blocked connections from input channels to output channels. åˆ†ç»„å·ç§¯ï¼Œåœ¨ResNeXt ç½‘ç»œä¸­å¤šè§åˆ°ã€‚ Default: 1 bias (bool, optional) â€“ If True, adds a learnable bias to the output. Default: True è¯¦ç»†çš„ç†è§£å¯ä»¥å‚è€ƒLink kernel_size æ˜¯æˆ‘ä»¬å®é™…ä¸æ–­å»å­¦ä¹ çš„å‚æ•°ã€‚ ä»¥ä¸‹ä¸ºè¾“å…¥å’Œè¾“å‡ºçš„å½¢çŠ¶ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950import torchimport torchvisionimport torch.nn as nnfrom torch.nn import Conv2dfrom torch.utils.data import DataLoaderfrom torch.utils.tensorboard import SummaryWriterfrom torchvision.transforms import transformstrain_set = torchvision.datasets.CIFAR10(root=&quot;./root&quot;, train=True, transform=transforms.ToTensor(), download=True)dataloader = DataLoader(dataset=train_set, batch_size=64, num_workers=0, drop_last=False, shuffle=True)# è®¾ç½®ç½‘ç»œclass Net(nn.Module): def __init__(self): super(Net, self).__init__() self.conv1 = Conv2d(in_channels=3, out_channels=6, kernel_size=3, stride=1, padding=0) def forward(self, x): x = self.conv1(x) return xnet = Net()print(net)# æ‰“å°ç½‘ç»œçš„ç›¸å…³çš„å‚æ•°step = 0writer = SummaryWriter(&quot;conv&quot;)for data in dataloader: img, target = data output = net(img) # print(img.shape) # print(output.shape) # torch.Size([64, 3, 32, 32]) writer.add_images(&quot;input&quot;, img, step) # torch.Size([64, 6, 30, 30]) # tensorboard æ˜¯æ²¡æœ‰åŠæ³•æ˜¾ç¤º6 channelçš„å›¾ç‰‡çš„ output = torch.reshape(output, (-1, 3, 30, 30)) writer.add_images(&quot;output&quot;, output, step) step += 1 å¦‚å›¾ä¸ºå·ç§¯å¤„ç†å‰åå›¾ç‰‡çš„å¯¹æ¯”æƒ…å†µã€‚ æ± åŒ–å±‚ Parameters kernel_size â€“ the size of the window to take a max over stride â€“ the stride of the window. Default value is kernel_sizeï¼Œé»˜è®¤æ˜¯å’Œkernel_sizeä¸€æ ·çš„ã€‚ padding â€“ implicit zero padding to be added on both sides dilation â€“ a parameter that controls the stride of elements in the window ç©ºæ´å·ç§¯ã€‚ return_indices â€“ if True, will return the max indices along with the outputs. Useful for torch.nn.MaxUnpool2d later ceil_mode â€“ when True, will use ceil instead of floor to compute the output shape å–æ•´æ–¹å¼ï¼Œä¸Šå–è¯è¿˜æ˜¯ä¸‹å–æ•´ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647import torchimport torchvisionimport torch.nn as nnfrom torch.nn import MaxPool2dfrom torch.utils.data import DataLoaderfrom torch.utils.tensorboard import SummaryWriterfrom torchvision.transforms import transformsinput = torch.tensor([[1, 2, 0, 3, 1], [0, 1, 2, 3, 1], [1, 2, 1, 0, 0], [5, 2, 3, 1, 1], [2, 1, 0, 1, 1]], dtype=torch.float32)# å…»æˆè‰¯å¥½çš„ä¹ æƒ¯ï¼Œå°†çŸ©é˜µå†™æˆä»¥ä¸Šçš„æ ¼å¼# è®¾ç½®ç½‘ç»œclass Net(nn.Module): def __init__(self, ceil_mode): super(Net, self).__init__() self.ceil_mode = ceil_mode self.maxpool1 = MaxPool2d(kernel_size=3, ceil_mode=self.ceil_mode) def forward(self, x): output = self.maxpool1(x) return outputnet1 = Net(ceil_mode=True)net2 = Net(ceil_mode=False)print(net1)print(net2)# æ‰“å°ç½‘ç»œçš„ç›¸å…³çš„å‚æ•°input = torch.reshape(input, (-1, 1, 5, 5))output1 = net1(input)output2 = net2(input)print(&quot;ceil_mode=true\\n&quot;, output1)print(&quot;ceil_mode=False\\n&quot;, output2)&gt;&gt;&gt;ceil_mode=true tensor([[[[2., 3.], [5., 1.]]]])ceil_mode=False tensor([[[[2.]]]]) æœ€å¤§æ± åŒ–æ˜¯ä¿ç•™ä¸»è¦çš„å›¾ç‰‡ç‰¹å¾ï¼Œä¼šå˜æ¨¡ç³Šï¼Œeg.1080P-&gt;720P 12345678910111213141516171819train_set = torchvision.datasets.CIFAR10(root=&quot;./root&quot;, train=True, transform=transforms.ToTensor(), download=True)dataloader = DataLoader(dataset=train_set, batch_size=64, num_workers=0, drop_last=False, shuffle=True)step = 0writer = SummaryWriter(&quot;maxpooling&quot;)for data in dataloader: img, target = data output = net1(img) writer.add_images(&quot;input&quot;, img, step) writer.add_images(&quot;output&quot;, output, step) step += 1 è¿™é‡Œpaddingå±‚çš„ä½œç”¨è·Ÿpaddingæ˜¯æ„ä¹‰çš„ï¼Œå¯ä»¥ç”¨0æˆ–è€…ä»»æ„çš„ä¸€ä¸ªå¸¸æ•°å»è¿›è¡Œï¼Œç”¨çš„æ¯”è¾ƒå°‘ï¼Œæ­¤å¤„ä¸åœ¨è¯¦ç»†ä»‹ç»ã€‚ éçº¿æ€§æ¿€æ´»å‡½æ•°æ¯”è¾ƒå¸¸ç”¨çš„nn.ReLU(inplace=Flase)ï¼Œnn.Sigmoid()ã€‚ inplaceçš„ä½œç”¨å…¶å®å°±æ˜¯æ˜¯å¦åœ¨åŸæ¥çš„ä½ç½®è¿›è¡Œæ›¿æ¢ã€‚ é»˜è®¤inplace=False , è¿™æ ·å¯ä»¥ä¿ç•™åŸå§‹çš„æ•°æ®ä¸ä¸¢å¤±ã€‚ ä»¥ä¸‹æˆ‘ä»¬ä½¿ç”¨Sigmoidæ¿€æ´»å‡½æ•°ä¸ºä¾‹ï¼Œæ¥è§‚å¯Ÿå¤„ç†å‰åçš„æƒ…å†µã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364import torchimport torchvisionimport torch.nn as nnfrom torch.nn import ReLUfrom torch.utils.data import DataLoaderfrom torch.utils.tensorboard import SummaryWriterfrom torchvision.transforms import transformsinput = torch.tensor([[1, -0.5], [-1, 3]])input = torch.reshape(input, (-1, 1, 2, 2))class Net(nn.Module): def __init__(self): super(Net, self).__init__() self.relu = ReLU() def forward(self, input): output = self.relu(input) return outputnet = Net()print(net)output = net(input)print(output)# å›¾ç‰‡æ“ä½œæƒ…å†µ# ----------------------------------------------------train_set = torchvision.datasets.CIFAR10(root=&quot;./root&quot;, train=True, transform=transforms.ToTensor(), download=True)dataloader = DataLoader(dataset=train_set, batch_size=64, num_workers=0, drop_last=False, shuffle=True)class Net2(nn.Module): def __init__(self): super(Net2, self).__init__() self.sigmoid = nn.Sigmoid() def forward(self, input): output = self.sigmoid(input) return outputnet2 = Net2()print(net2)step = 0writer = SummaryWriter(&quot;Sigmoid&quot;)for data in dataloader: img, target = data output = net2(img) writer.add_images(&quot;input&quot;, img, step) writer.add_images(&quot;output&quot;, output, step) step += 1 çº¿æ€§å±‚nn.Linear() 12345678910111213141516171819202122232425262728293031323334353637383940414243import torchimport torchvisionimport torch.nn as nnfrom torch.utils.data import DataLoaderfrom torch.utils.tensorboard import SummaryWriterfrom torchvision.transforms import transformstrain_set = torchvision.datasets.CIFAR10(root=&quot;./root&quot;, train=True, transform=transforms.ToTensor(), download=True)dataloader = DataLoader(dataset=train_set, batch_size=64, num_workers=0, drop_last=False, shuffle=True)# è®¾ç½®ç½‘ç»œclass Net(nn.Module): def __init__(self): super(Net, self).__init__() self.linear1 = nn.Linear(in_features=196608, out_features=10) def forward(self, x): output = self.linear1(x) return outputnet = Net()step = 0writer = SummaryWriter(&quot;maxpooling&quot;)for data in dataloader: img, target = data print(img.shape) # output = torch.reshape(img, (1, 1, 1, -1)) output = torch.flatten(img) print(output.shape) output = net(output) print(output.shape) ä½¿ç”¨torch.flatten()å¾—åˆ°çš„ç»“æœä¸º 123torch.Size([64, 3, 32, 32])torch.Size([196608])torch.Size([10]) å°±æ˜¯æœ€åç›´æ¥å±•å¹³æˆä¸ºä¸€ç»´ã€‚ nn.Sequential()å®æˆ˜è¿™é‡Œæä¾›ä¸€ä¸ªå®é™…çš„ä¾‹å­ï¼Œæ¥å±•ç¤ºnn.Sequential()çš„ä½¿ç”¨è¿‡ç¨‹ã€‚ 1234567891011121314151617181920212223242526272829303132333435import torchimport torch.nn as nnfrom torch.utils.tensorboard import SummaryWriterclass Net(nn.Module): def __init__(self): super(Net, self).__init__() self.models = nn.Sequential( nn.Conv2d(in_channels=3, out_channels=32, kernel_size=5, padding=2), nn.MaxPool2d(kernel_size=2, stride=2), nn.Conv2d(in_channels=32, out_channels=32, kernel_size=5, padding=2), nn.MaxPool2d(kernel_size=2, stride=2), nn.Conv2d(in_channels=32, out_channels=64, kernel_size=5, padding=2), nn.MaxPool2d(kernel_size=2, stride=2), nn.Flatten(), # é»˜è®¤å¼å’Œkernel_sizeç›¸ç­‰çš„ nn.Linear(1024, 64), nn.Linear(64, 10), ) def forward(self, x): return self.models(x)net = Net()print(net)input = torch.ones((64, 3, 32, 32))print(input.shape)output = net(input)writer = SummaryWriter(&quot;Sequential&quot;)writer.add_graph(net, input)writer.close() å¦‚å›¾æ‰€ç¤ºï¼Œä¸ºä½¿ç”¨tensorboardåçš„åŸºæœ¬ç»“æœï¼Œå…¶å¯ä»¥æ˜¾ç¤ºåŸºæœ¬çš„ç½‘ç»œè¿æ¥å’Œç»´åº¦ä¸Šçš„å˜åŒ–ã€‚ æŸå¤±å‡½æ•° æŸå¤±å‡½æ•°æ ¹æ®å®šä¹‰æ¥è®²ä¸€å®šæ˜¯è¶Šå°è¶Šå¥½ã€‚ Loss function è¡¡é‡çš„æ˜¯å®é™…è®¡ç®—å’Œç›®æ ‡ä¹‹é—´çš„å·®è·ã€‚ ä¸ºæˆ‘ä»¬æ›´æ–°å‚æ•°æä¾›ä¾æ®ï¼Œå³åå‘ä¼ æ’­ã€‚ L1Lossä»¥ä¸‹ä»¥L1Lossæ¥ä¸¾ä¾‹ï¼š è¦é‡ç‚¹æ³¨æ„çš„æ—¶è¾“å…¥ä¸è¾“å‡ºçš„Shape: Input: (), where means any number of dimensions. Target: (*), same shape as the input. Output: scalar. If reduction is 'none', then (*), same shape as the input. 12345678910111213141516import torchimport torch.nn as nnfrom torch.nn import L1Loss# æŸå¤±å‡½æ•°ä¸€èˆ¬åœ¨torch.nné‡Œinputs = torch.tensor([1, 2, 3], dtype=torch.float32)targets = torch.tensor([1, 2, 5], dtype=torch.float32)inputs = torch.reshape(inputs, (1, 1, 1, 3))targets = torch.reshape(targets, (1, 1, 1, 3))loss = L1Loss(reduction='mean')# reduction='mean' æ—¶æˆ‘ä»¬çš„inputså’Œtargetsè¦éƒ½æ˜¯floatç±»å‹æ‰å¯¹result = loss(inputs, targets)print(result) MSELossä¹‹åï¼Œæˆ‘ä»¬ä»¥æœ€å°äºŒä¹˜æ³•å¸¸ç”¨çš„MSELossä¸ºä¾‹ï¼š å…¶ä¸»è¦çš„ä½¿ç”¨æ–¹æ³•å’Œä¸Šé¢çš„åŸºæœ¬ç›¸åŒï¼Œè¿™é‡Œä¸åœ¨èµ˜è¿°ã€‚ CrossEntropyLossç„¶åï¼Œæˆ‘ä»¬ä»¥åˆ†ç±»ä»»åŠ¡ä¸­æ¯”è¾ƒå¸¸ç”¨çš„äº¤å‰ç†µæŸå¤±å‡½æ•°ä¸ºä¾‹ï¼š ä»¥ä¸Šå…¬å¼å’Œè§†é¢‘é‡Œçš„å…¬å¼ä¸åŒï¼Œå› ä¸ºè¿™é‡Œå°†äº¤å‰ç†µsoftmaxè¿›è¡Œäº†å†…ç½®å¤„ç†ã€‚ Shape: Input: (N, C) where C = number of classes, or$ (N, C, d_1, d_2, â€¦, d_K)$ with $K \\geq 1$ in the case of K-dimensional loss. è¿™é‡Œè¾“å…¥éœ€è¦è¿ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºåˆ†ç±»æ•°(å°±æ˜¯å…¶æ‰€ç¤ºç±»åˆ«çš„ç¼–å·æ•°) ï¼› å¦‚ä¸Šé¢çš„ä¾‹å­ï¼Œç‹—çš„åˆ†ç±»æ•°ä¸º1ï¼ŒC=[0, 1, 0] è¿™é‡Œè¦è¾“å…¥çš„å¿…é¡»ä¸ºone-hotç¼–ç  Target:ï¼ˆNï¼‰ If containing class indices, shape (N)where each value is $ 0 \\leq \\text{targets}[i] \\leq C-10$, or $(N, d_1, d_2, â€¦, d_K)$ with $K \\geq 1$ in the case of K-dimensional loss. If containing class probabilities, same shape as the input. Output: If reduction is 'none', shape (N) or $(N, d_1, d_2, â€¦, d_K)$ with $K \\geq 1$ in the case of K-dimensional loss. Otherwise, scalar. 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051import torch.nn as nnfrom torch.utils.tensorboard import SummaryWriterfrom torch.utils.data import DataLoaderfrom torchvision.transforms import transformsimport torchvisiontrain_set = torchvision.datasets.CIFAR10(root=&quot;./root&quot;, train=True, transform=transforms.ToTensor(), download=True)dataloader = DataLoader(dataset=train_set, batch_size=1, num_workers=0, drop_last=False, shuffle=True)class Net(nn.Module): def __init__(self): super(Net, self).__init__() self.models = nn.Sequential( nn.Conv2d(in_channels=3, out_channels=32, kernel_size=5, padding=2), nn.MaxPool2d(kernel_size=2, stride=2), nn.Conv2d(in_channels=32, out_channels=32, kernel_size=5, padding=2), nn.MaxPool2d(kernel_size=2, stride=2), nn.Conv2d(in_channels=32, out_channels=64, kernel_size=5, padding=2), nn.MaxPool2d(kernel_size=2, stride=2), nn.Flatten(), # é»˜è®¤å¼å’Œkernel_sizeç›¸ç­‰çš„ nn.Linear(1024, 64), nn.Linear(64, 10), ) def forward(self, x): return self.models(x)net = Net()loss = nn.CrossEntropyLoss()for i, data in enumerate(dataloader): imgs, targets = data outputs = net(imgs) # print(outputs) # print(targets) result = loss(outputs, targets) print(result) result.backward() if i == 10: break æä¾›åå‘ä¼ æ’­ä½¿å…¶æ‹¥æœ‰gradå‚æ•°ã€‚ ä¼˜åŒ–å™¨ä¼˜åŒ–å™¨çš„æ„ä»¶è¿‡ç¨‹12optimizer = optim.SGD(model.parameters(), lr=0.01, momentum=0.9)optimizer = optim.Adam([var1, var2], lr=0.0001) ä¼˜åŒ–å™¨çš„ä½¿ç”¨è¿‡ç¨‹123456for input, target in dataset: optimizer.zero_grad() output = model(input) loss = loss_fn(output, target) loss.backward() optimizer.step() è¿™é‡Œæœ‰å¾ˆå¤šä¼˜åŒ–å™¨ï¼Œä¸åŒçš„ä¼˜åŒ–å™¨æ‰€ä½¿ç”¨çš„å‚æ•°æ˜¯ä¸åŒçš„ï¼Œä½†æ˜¯å…±æœ‰çš„å‚æ•°æ˜¯para=å’Œ lr= (å³è¦ä¼˜åŒ–çš„å‚æ•°å’Œå­¦ä¹ ç‡)","link":"/2022/02/23/PyTorch%E6%95%99%E7%A8%8B%E4%B8%8E%E6%BA%90%E7%A0%81%E8%AE%B2%E8%A7%A3/Pytorch%E5%9F%BA%E6%9C%AC%E7%BD%91%E7%BB%9C%E7%9A%84%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/"},{"title":"Pytorchæ•°æ®å¤„ç†å’Œå¯è§†åŒ–ç¯‡","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦ä»Pytorchæ•°æ®åŠ è½½çš„åˆè¯†ã€æ•°æ®é›†Datasetçš„ä»£ç å®è·µã€TensorBoardåŸºç¡€æ•™ç¨‹ã€transformsè¿›è¡Œå›¾ç‰‡çš„é¢„å¤„ç†ã€Torchvisioné‡Œæ•°æ®é›†çš„ä½¿ç”¨ä»¥åŠDataLoaderçš„ä½¿ç”¨äº”ä¸ªå¤§æ–¹é¢æ¥ä»‹ç»Pytorchåœ¨è¿è¡Œè¿‡ç¨‹ä¸­æ•°æ®çš„ä¿®é¥°å’Œé¢„å¤„ç†è¿‡ç¨‹ã€‚ä¸»è¦çš„è§†é¢‘æ•™ç¨‹ ã€‚ Pytorchæ•°æ®åŠ è½½çš„åˆè¯† æ•°æ®ï¼šå¯ä»¥æ¯”ä½œåƒåœ¾çš„æµ·æ´‹ï¼Œä»æ•°æ®(åƒåœ¾)ä¸­è·å–ç”±äºçš„ä¸œè¥¿ã€‚ Datasetï¼šå–å‡ºå…¶ä¸­çš„æŸä¸€ç±»æœ‰ç”¨çš„æ•°æ®(åƒåœ¾)ï¼Œå¹¶è·å–å¯¹åº”çš„labelå€¼ã€‚ Datesetçš„å‡ ç§ç»„ç»‡å½¢å¼ï¼š ç¬¬ä¸€ç§æ˜¯æ–‡ä»¶å¤¹çš„åç§°ä¸ºå¯¹åº”çš„labelã€‚ ç¬¬äºŒç§æ˜¯å›¾ç‰‡å’Œæ–‡ä»¶å¤¹åˆ†å±åœ¨ä¸åŒçš„æ–‡ä»¶å¤¹ä¸­ï¼Œlabelä»¥.txtå½¢å¼ä¿å­˜ã€‚ DataLoaderï¼šå°†æ•°æ®è¿›è¡Œæ‰“åŒ…å’Œå‹ç¼©ï¼Œä¸ºåé¢çš„ç½‘ç»œæä¾›ä¸åŒçš„æ•°æ®å½¢å¼ã€‚ Datasetç±»çš„ä½¿ç”¨ï¼š 1234567from torch.utils.data import Dataset# å¯¼å…¥datasetç±»help(Dataset)# è·å–ç®€æ˜“çš„æŠŠå¸®åŠ©Dataset??# åœ¨jupyteré‡Œè·å–è¯¦ç»†çš„å¸®åŠ©# åœ¨pycharmé‡Œä¸€èˆ¬æ˜¯æŒ‰ä½ctrlå†ç‚¹å‡»dataset datasetæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œæ‰€æœ‰çš„å­ç±»éƒ½åº”è¯¥é‡å†™__getitme__æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯ç”¨æ¥è·å–æ•°æ®é›†å¯¹åº”çš„labelçš„ã€‚ ä¹Ÿå¯ä»¥é€‰æ‹©é‡å†™__len__ç”¨æ¥è·å–æ•°æ®çš„é•¿åº¦ã€‚ 12345def __getitem__(self, index): raise NotImplementedErrordef __add__(self, other): return ConcatDataset([self, other]) getitemçš„ä½œç”¨ï¼šä½¿å¾—æ•°æ®é›†å¯ä»¥æ”¯æŒä¸‹æ ‡çš„å¼•ç”¨ lençš„ä½œç”¨ï¼šä½¿å¾—æ•°æ®é›†ç±»å¯ä»¥é€šè¿‡len()å‡½æ•°æ¥è¿”å›æˆ‘ä»¬çš„é•¿åº¦ æ•°æ®é›†Datasetçš„ä»£ç å®è·µå›¾ç‰‡çš„è¯»å–12345# æµ‹è¯•å›¾ç‰‡çš„å±æ€§from PIL import Imageimg_path=&quot;flower_photos\\\\daisy\\\\5673551_01d1ea993e_n.jpg&quot;img.size # æµ‹è¯•è¯æ˜è¯»å–æ•°æ®æˆåŠŸimg.show() # å±•ç¤ºå›¾ç‰‡ è·¯å¾„çš„è¯»å–12345678910import os# ç”¨æ¥è¯»å–æ–‡ä»¶å¤¹åœ°å€çš„åŒ…dir_path=&quot;flower_photos/roses&quot;img_path_list=os.listdir(dir_path)# è¯»å–æŒ‡å®šçš„æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶åï¼Œä»¥listçš„å½¢å¼è¯»å–æ–‡ä»¶åroot_dir=&quot;flower_photos&quot;label_dir=&quot;roses&quot;path=os.path.join(root_dir,label_dir)# è¯¥å‡½æ•°å¯ä»¥æŒ‰ç…§ä¸åŒçš„ç³»ç»Ÿæ¥åˆ†é…é€‚å½“çš„è¿æ¥ç¬¦# å¯¹äºwindows ç”¨\\\\è¿æ¥ å¯¹äºlinuxä½¿ç”¨ä¸€èˆ¬çš„ / è¿æ¥ æ„å»ºæ•°æ®é›†ç±»1234567891011121314151617class MyData(Dataset): def __init__(self, root_dir, label_dir): self.root_dir = root_dir self.label_dir = label_dir self.path = os.path.join(self.root_dir, self.label_dir) self.img_path = os.listdir(self.path) # å¾—åˆ°æ–‡ä»¶ä¸‹é¢æ‰€æœ‰å›¾ç‰‡çš„åç§°ï¼Œç»„æˆä¸€ä¸ªåˆ—è¡¨ def __getitem__(self, idx): img_name = self.img_path[idx] img_item = os.path.join(self.root_dir, self.label_dir, img_name) img = Image.open(img_item) label = self.label_dir return img, label def __len__(self): return len(self.img_path) å¸¦åŒä¸‹åˆ’çº¿çš„æ˜¯å±æ€§å‡½æ•°ï¼Œæ˜¯è‡ªåŠ¨è°ƒç”¨çš„å‡½æ•°ï¼Œä¸éœ€è¦æ˜¾å¼çš„è°ƒç”¨ã€‚å¦‚__len__()èµ·ä½œç”¨æ˜¯å½“æˆ‘ä»¬è°ƒç”¨len(MyData)æ—¶ã€‚ æµ‹è¯•æ•°æ®é›†çš„æµ‹è¯•123456789# å›¾ç‰‡çš„è¯»å–root_dir = &quot;flower_photos&quot;label_list = os.listdir(root_dir)label_dir = label_list[1]flower_set = MyData(root_dir, label_dir)# flower_setå¯¹è±¡å…¶å®æ˜¯ä¸€ä¸ªå›¾åƒé›†ï¼Œé ç´¢å¼•æ¥è¯»å–æ•°æ®img, label = flower_set[1]img.show() __getitem__èµ·ä½œç”¨æ—¶æˆ‘ä»¬ä»¥ç´¢å¼•çš„æ–¹å¼è°ƒç”¨æ•°æ®é›†å¯¹è±¡æ—¶ã€‚ ç¨‹åºçš„è¾“å‡ºå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 1234567# æ•°æ®é›†çš„æ‹¼æ¥roses_dir = label_list[3]daisy_dir = label_list[0]rose_set = MyData(root_dir, roses_dir)daisy_set = MyData(root_dir, daisy_dir)flower_set = rose_set + daisy_setprint(len(rose_set), len(daisy_set), len(flower_set)) é€šè¿‡åŠ å·å¯ä»¥ç›´æ¥å®ç°ä¸¤ä¸ªæ•°æ®é›†çš„åˆå¹¶ã€‚ ä»¥ä¸‹ä»£ç åˆ›å»ºç¬¬äºŒç±»ï¼Œæ ‡ç­¾å’Œå›¾ç‰‡åˆ†é‡Œçš„æ•°æ®é›†çš„ä»£ç (å’Œæœ¬å®éªŒä¸åŒï¼Œå¤§æ¦‚è¯»æ‡‚æ„æ€å³å¯ï¼Œå¯ä»¥ä½œä¸ºæ¨¡æ¿æ¥å¥—ç”¨)ï¼š 12345678910root_dir = &quot;dataset/train&quot;target_dir = &quot;ants_image&quot;img_path = os.listdir(os.path.join(root_dirï¼Œarget_dir))label = target_dir.split('_')[0]# ç›¸å½“äºå»é™¤ants_imageçš„ç¬¬ä¸€ä¸ªå­—antsout_dir = &quot;ants_label&quot;for i in img_path: file_name = i.split(&quot;.jpg&quot;)[0] with open(os.path.join(root_dir,out_dir,&quot;{}.txt&quot;.format(file_name)),'w') as f; f.write(label) TensorBoardåŸºç¡€æ•™ç¨‹TensorBoardçš„å®‰è£…tensorboardèµ·åˆåªèƒ½tensorflowæ‰èƒ½ä½¿ç”¨ï¼Œåæ¥pytorch1.1ä¹‹åä¹Ÿå¯ä»¥ä½¿ç”¨äº†ã€‚ SummaryWriterç±»çš„ä½¿ç”¨TensorBoardçš„å¸®åŠ©æ–‡æ¡£å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¸»è¦æ˜¯æƒ³log_dirä¸­å†™å†…å®¹çš„äº‹ä»¶æ–‡ä»¶ï¼Œä¸»è¦çš„å‚æ•°æ˜¯å‰ä¸¤ä¸ªå‚æ•°ï¼Œåé¢çš„å‚æ•°ç›´æ¥ä½¿ç”¨é»˜è®¤å€¼å°±å¥½äº†ã€‚ 1234567891011121314Examples::from torch.utils.tensorboard import SummaryWriter# create a summary writer with automatically generated folder name.writer = SummaryWriter()# folder location: runs/May04_22-14-54_s-MacBook-Pro.local/# create a summary writer using the specified folder name.writer = SummaryWriter(&quot;my_experiment&quot;)# folder location: my_experiment# create a summary writer with comment appended.writer = SummaryWriter(comment=&quot;LR_0.1_BATCH_16&quot;)# folder location: runs/May04_22-14-54_s-MacBook-Pro.localLR_0.1_BATCH_16/ è¿™é‡Œåˆå§‹åŒ–ç±»çš„ä¸»è¦è¿‡ç¨‹ï¼Œå¯ä»¥ç›´æ¥åˆå§‹åŒ–ï¼Œæ­¤æ—¶æ–‡ä»¶ä¿å­˜åœ¨é»˜è®¤çš„è·¯å¾„ä¸‹é¢ï¼Œlocation: runs/May04_22-14-54_s-MacBook-Pro.local/ä¸‹ã€‚ ä¹Ÿå¯ä»¥è®¾ç½®ä¿å­˜çš„è·¯å¾„ä¸ºmy_experiment ï¼Œæ­¤æ—¶æ–‡ä»¶ä¿å­˜åœ¨my_experimentä¸‹ã€‚ pycharm å’Œ jupyterä¸­çš„æ³¨é‡Šä½¿ç”¨ctrl+/ texstdioä¸­çš„æ³¨é‡Šæ˜¯ctrl+t add_scalar()çš„ä½¿ç”¨add_scalar()ç»å¸¸ç”¨æ¥ç»˜åˆ¶train/val_lossã€‚ tagï¼šè¡¨ç¤ºçš„æ˜¯å›¾è¡¨çš„æ•°å€¼ã€‚ scalar_valueï¼šè¡¨ç¤ºéœ€è¦å»ä¿å­˜çš„æ•°å€¼çš„è§„æ¨¡ã€‚(Yè½´çš„è§„æ¨¡) global_stepï¼šè¡¨ç¤ºéœ€è¦ä¿å­˜å¤šå°‘æ­¥ã€‚(Xè½´çš„è§„æ¨¡) 1234567from torch.utils.tensorboard import SummaryWriterwriter = SummaryWriter(&quot;logs&quot;)# å°†äº‹ä»¶æ–‡ä»¶ä¿å­˜åœ¨logsæ–‡ä»¶ä¸‹# y = xfor i in range(100): writer.add_scalar(tag=&quot;y=x&quot;, scalar_value=i, global_step=i)writer.close() tensorboardçš„æ‰“å¼€ï¼Œè¿™é‡Œçš„logdir=äº‹ä»¶æ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹å,åˆ‡è®°ä¸å¯ä»¥æœ‰ä¸­æ–‡å­—ç¬¦ 12345tensorboard --logdir=logs# logdir=äº‹ä»¶æ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹å# ä¸å¯ä»¥æœ‰ä¸­æ–‡å­—ç¬¦# æœ‰æ—¶å®éªŒå®¤æœåŠ¡å™¨çš„6006ç«¯å£æ¯”è¾ƒç´§å¼ ï¼Œå¯ä»¥è‡ªè¡Œè®¾è®¡æ‰“å¼€çš„ç«¯å£tensorboard --logdir=logs --port=6007 tensorboardæ‰“ä¸å¼€çš„åŸå› ï¼šæµè§ˆå™¨çš„é—®é¢˜ï¼Œæ¢æˆåŸå§‹çš„Edgeå°±æ²¡é—®é¢˜äº†ã€‚ å¦‚æœtag=â€œ â€å¿˜è®°æ”¹åï¼Œå°±å¯èƒ½å‡ºç°å¦‚ä¸‹å¤šä¸ªå†…å®¹ç”»åˆ°äº†åŒä¸€å›¾ä¸Šé¢çš„æƒ…å†µã€‚ add_image()çš„ä½¿ç”¨ å…¶ä»–çš„å‚æ•°å¤§æ¦‚éƒ½æ˜¯å’Œadd_scalarç›¸åŒï¼Œä½†æ˜¯å›¾ç‰‡çš„æ•°æ®ç±»å‹è¦æ³¨æ„ï¼Œè¿™é‡Œimg_tensorè¦æ˜¯tensorç±»å‹å’Œnumpy.arrayç±»å‹çš„ã€‚ å¦‚å›¾æ‰€ç¤ºï¼ŒPILè¯»å–çš„æ•°æ®ç±»å‹ä¸ç¬¦åˆè¦æ±‚ï¼Œå› æ­¤è¿™é‡Œä½¿ç”¨opencvæ¥è¯»å–å›¾ç‰‡æ•°æ®ï¼Œopencvè¯»å–å¾—åˆ°çš„ç±»å‹æ˜¯arrayç±»å‹çš„ã€‚ ä¹Ÿå¯ä»¥ç›´æ¥å°†PILçš„ç±»å‹è½¬æ¢ä¸ºarrryã€‚ ä½†æ˜¯ï¼Œè¿™é‡Œè¦æ³¨æ„ï¼Œè¾“å…¥å›¾ç‰‡çš„ç»´åº¦ä¹Ÿæ˜¯æœ‰è¦æ±‚çš„ï¼Œé»˜è®¤æ˜¯(3,H,W)ç±»å‹çš„ï¼Œå¦‚æœè¦æ”¹æˆ(3,H,W)éœ€è¦ä¿®æ”¹dataformats='CHW'ã€‚ 12345678910111213141516from torch.utils.tensorboard import SummaryWriterimport numpy as npimg = np.zeros((3, 100, 100))img[0] = np.arange(0, 10000).reshape(100, 100) / 10000img[1] = 1 - np.arange(0, 10000).reshape(100, 100) / 10000img_HWC = np.zeros((100, 100, 3))img_HWC[:, :, 0] = np.arange(0, 10000).reshape(100, 100) / 10000img_HWC[:, :, 1] = 1 - np.arange(0, 10000).reshape(100, 100) / 10000writer = SummaryWriter()writer.add_image('my_image', img, 0)# If you have non-default dimension setting, set the dataformats argument.writer.add_image('my_image_HWC', img_HWC, 0, dataformats='HWC')writer.close() 123456789101112131415from torch.utils.tensorboard import SummaryWriterimport numpy as npfrom PIL import Imagewriter = SummaryWriter(&quot;logs&quot;)# å°†äº‹ä»¶æ–‡ä»¶ä¿å­˜åœ¨logsæ–‡ä»¶ä¸‹img_path = &quot;flower_photos/roses/145862135_ab710de93c_n.jpg&quot;img_PIL = Image.open(img_path)img_array = np.array(img_PIL)print(type(img_array))# æ˜¯np.arrayç±»å‹ï¼Œä½†æ˜¯æ•°æ®çš„ç»´åº¦æ’åˆ—ä¸æ˜¯å¾ˆåŒ¹é…print(img_array.shape)writer.add_image(&quot;roses&quot;, img_array, 1, dataformats='HWC')writer.close() ä»PILåˆ°numpyï¼Œéœ€è¦åœ¨add_image()ä¸­æŒ‡å®šshapeä¸­æ¯ä¸€ä¸ªæ•°å­—/ç»´è¡¨ç¤ºçš„å«ä¹‰ å¦‚æœtagä¸å˜ï¼Œæ‰€æœ‰çš„å›¾åƒéƒ½ä¼šç”»åœ¨åŒä¸€ä¸ªtagçš„ä¸‹é¢ï¼Œæ³¨æ„éƒ¨ç½²ä¸€å®šè¦ä¿®æ”¹ï¼Œä¸ç„¶å°±ä¼šç›´æ¥è¦†ç›–ï¼Œé€šè¿‡å·¦å³æ»‘åŠ¨æ¥åˆ‡æ¢ã€‚ transformsè¿›è¡Œå›¾ç‰‡çš„é¢„å¤„ç† transformsçš„ç»“æ„å’Œç”¨æ³• æ•´ç†ï¼Œåœ¨pycharmä¸­æ‰“å¼€æ–‡æ¡£ï¼Œåˆ©ç”¨structureæ¥åˆ†æå™¨ç»“æ„ã€‚ å¿«æ·é”®è®¾ç½®ï¼šåˆ°setting-&gt;keymap-&gt;æœç´¢ç›®æ ‡å…³é”®å­—å³å¯ å°è´´å£«ï¼šalt+7å¯ä»¥è°ƒå‡ºstructureçš„æ ç›®ï¼Œä¸»è¦å¯ä»¥ç”¨æ¥æ˜¾ç¤ºæˆ‘ä»¬çš„å‡½æ•°é‡Œæ‰€åŒ…å«çš„ç±»ï¼ˆåŠŸèƒ½ï¼‰å’Œå˜é‡ è¯¥åŒ…ç›¸å½“äºä¸€ä¸ªå·¥å…·çš„æ¨¡å…·ï¼ˆæ¨¡æ¿ï¼‰ ï¼ˆctrl+pç”¨æ¥æ˜¾ç¤ºæ•°è¯¥å‡½æ•°çš„å˜é‡ä¿¡æ¯ï¼‰ tensoræ•°æ®ç±»å‹æ•´ç†é€šè¿‡tensorforms.ToTensor()å»ç†è§£tensorsçš„æ•°æ®ç±»å‹çš„é—®é¢˜ã€‚ è¿™é‡Œçš„__call__ä»£è¡¨çš„æ˜¯ä¼ å…¥çš„å‚æ•°åº”è¯¥çš„ä»€ä¹ˆç±»å‹ã€‚ 1234567891011from torchvision.transforms import transformsfrom PIL import Imageimg_path = &quot;flower_photos/tulips/10791227_7168491604.jpg&quot;img = Image.open(img_path)# ä½¿ç”¨Totensortensor_trans = transforms.ToTensor()tensor_img = tensor_trans(img)print(tensor_img) è¿™é‡ŒTotensor()æ˜¯ä¸€ä¸ªç±»ï¼Œéœ€è¦å®ä¾‹åŒ–æ‰èƒ½ä½¿ç”¨ã€‚ ä»¥ä¸‹ä¸ºæˆ‘ä»¬è½¬ç§»åˆ°äº¤äº’çª—å£çš„è¿›è¡ŒæŸ¥çœ‹è¿‡ç¨‹çš„æ•°æ®ã€‚tensorçš„æ•°æ®ç±»å‹ä¸€å…±åŒ…å«ä»¥ä¸‹æ•°æ®çš„å±æ€§å’Œç±»å‹ã€‚ pycharm å‡ºç°é—®é¢˜æ—¶ï¼Œä½¿ç”¨alt+enterå¯ä»¥å¼¹å‡ºç›¸åº”çš„è§£å†³æ–¹æ¡ˆã€‚ å¸¸è§çš„transforms ToTensor()çš„ä½¿ç”¨ 1234567891011from torchvision.transforms import transformsfrom PIL import Imageimg_path = &quot;flower_photos/tulips/10791227_7168491604.jpg&quot;img = Image.open(img_path)# ä½¿ç”¨Totensortensor_trans = transforms.ToTensor()tensor_img = tensor_trans(img)print(tensor_img) Normalized()çš„ç”¨æ³• æ±‚å›¾ç‰‡å¼ é‡çš„æ¯ä¸€ä¸ªchannelçš„å¹³å‡å€¼å’Œæ ‡å‡†å·®ã€‚ 1234trans_norm = transforms.Normalize([.5, .5, .5], [.5, .5, .5])img_norm = trans_norm(tensor_img)writer.add_image(&quot;Normalized&quot;, img_norm) å…¬å¼ä¸»è¦çš„ä½œç”¨ç›¸å½“äºæ˜¯æ”¹å˜æ•°æ®åˆ†å¸ƒçš„èŒƒå›´ã€‚ $output[channel] = \\dfrac {input[channel] - mean[channel]} {std[channel]}$ PyCharmå°æŠ€å·§è®¾ç½®:å¿½ç•¥å¤§å°å†™ï¼Œè¿›è¡Œæç¤ºåŒ¹é…ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä½ éœ€è¦è¾“å…¥Rï¼Œæ‰èƒ½æç¤ºå‡ºResize æˆ‘ä»¬æƒ³è®¾ç½®ï¼Œå³ä¾¿ä½ è¾“å…¥çš„æ˜¯rï¼Œä¹Ÿèƒ½æç¤ºå‡ºResize ä¹Ÿå°±æ˜¯å¿½ç•¥äº†å¤§å°å†™è¿›è¡ŒåŒ¹é…æç¤ºã€‚ Resize()çš„ä½œç”¨ ä¸»è¦çš„ä½œç”¨æ˜¯æŒ‰ç…§æŒ‡å®šçš„é•¿å®½æ¥ç¼©æ”¾å›¾ç‰‡ã€‚ å¦‚æœè¾“å…¥(h,w)ï¼Œåˆ™å°†å›¾ç‰‡å˜ä¸ºæŒ‡å®šçš„ (h,w) å¦‚æœè¾“å…¥ int a (å°äºæœ€çŸ­çš„è¾¹)ï¼Œåˆ™å°†å›¾ç‰‡çš„æœ€å°è¾¹å˜ä¸ºaï¼Œé•¿è¾¹æŒ‰ç…§æ¯”ä¾‹æ¥ç¼©æ”¾ã€‚å¦‚æœå¤§äºæœ€é•¿çš„è¾¹ï¼Œå›¾ç‰‡æœ€é•¿è¾¹ä¸ºaï¼Œæœ€çŸ­è¾¹å°±æŒ‰æ¯”ä¾‹ç¼©æ”¾ã€‚ å‚æ•°å¿…é¡»ä¸ºä¸€ä¸ªå›¾ç‰‡PILï¼Œä¸å¯ä»¥æ˜¯ä¸€ä¸ªtensorï¼Œå› æ­¤åœ¨composeé‡Œæ’åˆ—çš„é¡ºåºä¸€å®šè¦å…ˆResizeåTotensorã€‚ ä»£ç å¦‚ä¸‹ï¼š 123456789101112# Reszie# æ³¨æ„å…ˆåçš„é¡ºåºï¼Œå…ˆReszieï¼ŒåToTensor# img PIL -&gt; resize -&gt; img_resize PILtrans_resize = transforms.Resize((512, 512))img_resize = trans_resize(img)# img_resize PIL -&gt; totensor -&gt; img_resizetensortensor_trans = transforms.ToTensor()img_resize = tensor_trans(img_resize)writer.add_image(&quot;Reszie&quot;, img_resize)# ------------------------------------------------- Compose()çš„ä½¿ç”¨ è¿™ä¸ªç±»çš„ä¸»è¦ä½œç”¨æ˜¯å°†ä¸åŒçš„transformsç±»è¿›è¡Œåˆå¹¶æ“ä½œã€‚ Compose()ä¸­çš„å‚æ•°éœ€è¦æ˜¯ä¸€ä¸ªåˆ—è¡¨Pythonä¸­ï¼Œåˆ—è¡¨çš„è¡¨ç¤ºå½¢å¼ä¸º[æ•°æ®1ï¼Œæ•°æ®2ï¼Œâ€¦] åœ¨Composeä¸­ï¼Œæ•°æ®éœ€è¦æ˜¯transformsç±»å‹æ‰€ä»¥å¾—åˆ°ï¼ŒCompose([transformså‚æ•°1, transformså‚æ•°2, â€¦]) 1234567891011# Compose# æ³¨æ„å…ˆåçš„é¡ºåºï¼Œå…ˆReszieï¼ŒåToTensortrans_resize = transforms.Resize(512)tensor_trans = transforms.ToTensor()trans_compose = transforms.Compose([trans_resize, tensor_trans])# ä¹Ÿå¯ä»¥ä¸ç”¨å®ä¾‹åŒ–ï¼Œç›´æ¥ç”Ÿæˆtrans_compose = transforms.Compose([ transforms.Resize(512), transforms.ToTensor()])img_resize_2 = trans_compose(img) RandomCropçš„ç”¨æ³• ä¸»è¦çš„ä½œç”¨ï¼šå¯¹å›¾åƒè¿›è¡Œéšæœºè£å‰ª å‚æ•°ï¼šsizeçš„å¦‚æœæ˜¯åºåˆ—(h,w)ï¼Œåˆ™å°†å›¾ç‰‡å˜ä¸ºæŒ‡å®šçš„ (h,w)ï¼Œå¦‚æœè¾“å…¥ int a (å°äºæœ€çŸ­çš„è¾¹)ï¼Œåˆ™å°†å›¾ç‰‡çš„æœ€å°è¾¹å˜ä¸ºaï¼Œé•¿è¾¹æŒ‰ç…§æ¯”ä¾‹æ¥ç¼©æ”¾ã€‚å¦‚æœå¤§äºæœ€é•¿çš„è¾¹ï¼Œå›¾ç‰‡æœ€é•¿è¾¹ä¸ºaï¼Œæœ€çŸ­è¾¹å°±æŒ‰æ¯”ä¾‹ç¼©æ”¾ã€‚ 123456# Randomcroptrans_crop = transforms.RandomCrop(100, 80)trans_compose1 = transforms.Compose([trans_crop, tensor_trans])for i in range(10): img_crop = trans_compose1(img) writer.add_image(&quot;RandomCrop100,80&quot;, img_crop, i) python__call__çš„ç”¨æ³•1234567891011121314class Person: def __call__(self, name): print(&quot;__call__&quot;+&quot;HELLO &quot;+name) def hello(self, name): print(&quot;hello &quot;+name)person = Person()person(&quot;Tom&quot;)person.hello(&quot;Tom&quot;)# output:&gt;&gt;&gt; __call__HELLO Tom&gt;&gt;&gt; hello Tom callçš„æ„æ€å…¶å®å°±æ˜¯è°ƒç”¨ï¼Œä½¿ç”¨å¯¹è±¡åŠ ()å³å¯ä½œä¸ºä¸€ä¸ªå‡½æ•°æ¥è°ƒç”¨ï¼Œæ˜¯ä¸€ä¸ªå†…ç½®çš„æ–¹æ³•ã€‚ hello()æ˜¯å¯¹è±¡é…ç½®çš„ä¸€ä¸ªå±æ€§ï¼Œåªèƒ½ç”¨.hello()æ¥æ˜¾å¼è°ƒç”¨ã€‚ æ€»ç»“ï¼šé¦–å…ˆï¼Œæ³¨æ„è¾“å…¥å’Œè¾“å‡ºï¼›å…¶æ¬¡ï¼Œå…³æ³¨å®˜æ–¹æ–‡æ¡£ï¼›ç„¶åï¼Œå…³æ³¨è¿™ä¸ªæ–¹æ³•éœ€è¦çš„å‚æ•°ã€‚ Torchvisioné‡Œæ•°æ®é›†çš„ä½¿ç”¨è¿™é‡ŒTorchvisionæ˜¯ä¸»è¦æœåŠ¡è®¡ç®—æœºè§†è§‰çš„åŒ…ï¼Œä¸»è¦æä¾›ä¸€äº›æ•°æ®é›†å’Œæ¨¡å‹æ¥ä»¥åŠä¸€äº›é¢„è®­ç»ƒå·çš„å‚æ•°æ¥æ–¹ä¾¿è®­ç»ƒã€‚ CIFARCLASStorchvision.datasets.CIFAR10(root: str, train: bool = True, transform:Optional[Callable] = None, target_transform: Optional[Callable] = None, download:bool = False)[SOURCE] CIFAR10 Datasetçš„å‚æ•°ï¼š root (string) â€“ Root directory of dataset where directory cifar-10-batches-py exists or will be saved to if download is set to True. ä¸»è¦æ˜¯ä¿å­˜æ–‡ä»¶å¤¹çš„ä½ç½®ã€‚ train (bool, optional) â€“ If True, creates dataset from training set, otherwise creates from test set.æ˜¯å¦ä¸ºè®­ç»ƒé›†Trueä»£è¡¨æ˜¯è®­ç»ƒé›†ã€‚ transform (callable**, optional) â€“ A function/transform that takes in an PIL image and returns a transformed version. E.g, transforms.RandomCropä½¿ç”¨çš„transformsçš„æ ¼å¼ã€‚ target_transform (callable**, optional) â€“ A function/transform that takes in the target and transforms it. download (bool, optional) â€“ If true, downloads the dataset from the internet and puts it in root directory. If dataset is already downloaded, it is not downloaded again.æ˜¯å¦ä¸‹è½½ã€‚ è¿™é‡Œå¦‚æœä¸‹è½½é€Ÿåº¦è¿‡æ…¢ï¼Œå¯ä»¥ä½¿ç”¨è¿…é›·è¿›è¡ŒåŠ é€Ÿã€‚ 12345678910111213141516171819202122232425262728import torchvisionfrom torch.utils.tensorboard import SummaryWriterdataset_trans = torchvision.transforms.Compose([ torchvision.transforms.ToTensor()])train_set = torchvision.datasets.CIFAR10(root=&quot;./root&quot;, train=True, transform=dataset_trans, download=True)test_set = torchvision.datasets.CIFAR10(root=&quot;./root&quot;, train=False, transform=dataset_trans, download=True)# è¯»å–æµ‹è¯•img, target = train_set[0]print(train_set[0])# è½¬æ¢å­—å…¸çš„é”®å€¼idx_classes = {}idx = 0for name in train_set.class_to_idx: idx_classes[idx] = name idx = idx + 1print(idx_classes[target])# tensorboardå¯è§†åŒ–writer = SummaryWriter(&quot;p10&quot;)for i in range(10): img, target = test_set[i] writer.add_image(&quot;test&quot;, img, i)writer.close() æºä»£ç é‡Œæœ‰ç›¸å…³çš„ä¸‹è½½é“¾æ¥ã€‚ DataLoaderçš„ä½¿ç”¨datasetç›¸å½“äºä¸€ç»„ç‰Œï¼Œdataloaderç›¸å½“äºå¦‚ä½•æŠ½ä¸€ç»„ç‰Œã€‚ torch.utils.data.DataLoader(dataset, batch_size=1, shuffle=False, sampler=None, batch_sampler=None, num_workers=0, collate_fn=None, pin_memory=False, drop_last=False, timeout=0, worker_init_fn=None, multiprocessing_context=None, generator=None, *, prefetch_factor=2, persistent_workers=False)[SOURCE]** Data loader. Combines a dataset and a sampler, and provides an iterable over the given dataset. The DataLoader supports both map-style and iterable-style datasets with single- or multi-process loading, customizing loading order and optional automatic batching (collation) and memory pinning. See torch.utils.data documentation page for more details. Parametersä¸»è¦å‚æ•°ï¼š dataset (Dataset) â€“ dataset from which to load the data.ä¹‹å‰æˆ‘ä»¬è‡ªå·±åˆ›å»ºæˆ–è€…å¯¼å…¥çš„æ•°æ®é›†ã€‚ batch_size (int, optional) â€“ how many samples per batch to load (default: 1).æ¯ä¸€æ‰¹å–åˆ°çš„æ•°æ®é‡ï¼Œæ¯ä¸€æ‰¹çš„æ•°æ®é‡è¶Šå¤§è¶Šå¥½ã€‚ shuffle (bool, optional) â€“ set to True to have the data reshuffled at every epoch (default: False).æ˜¯å¦æ‹‰ä¹±é¡ºåºï¼Œå¯¹äºè®­ç»ƒé›†ï¼Œæœ€å¥½æ‰“ä¹±é¡ºåº sampler (Sampler or Iterable**, optional) â€“ defines the strategy to draw samples from the dataset. Can be any Iterable with __len__ implemented. If specified, shuffle must not be specified. batch_sampler (Sampler or Iterable**, optional) â€“ like sampler, but returns a batch of indices at a time. Mutually exclusive with batch_size, shuffle, sampler, and drop_last. num_workers (int, optional) â€“ how many subprocesses to use for data loading. 0 means that the data will be loaded in the main process. (default: 0)è¿›ç¨‹æ•°ï¼Œä½†æ˜¯windowsåªèƒ½è®¾ä¸º0 collate_fn (callable**, optional) â€“ merges a list of samples to form a mini-batch of Tensor(s). Used when using batched loading from a map-style dataset. pin_memory (bool, optional) â€“ If True, the data loader will copy Tensors into CUDA pinned memory before returning them. If your data elements are a custom type, or your collate_fn returns a batch that is a custom type, see the example below. drop_last (bool, optional) â€“ set to True to drop the last incomplete batch, if the dataset size is not divisible by the batch size. If False and the size of dataset is not divisible by the batch size, then the last batch will be smaller. (default: False) æ¯æ¬¡æŒ‰ç…§æ‰¹é‡æ¥å­˜å–ï¼Œæœ€åä¸èƒ½é™¤å°½çš„å‡ å¼ æ˜¯å¦èˆå»ã€‚ timeout (numeric**, optional) â€“ if positive, the timeout value for collecting a batch from workers. Should always be non-negative. (default: 0) worker_init_fn (callable**, optional) â€“ If not None, this will be called on each worker subprocess with the worker id (an int in [0, num_workers - 1]) as input, after seeding and before data loading. (default: None) generator (torch.Generator, optional) â€“ If not None, this RNG will be used by RandomSampler to generate random indexes and multiprocessing to generate base_seed for workers. (default: None) prefetch_factor (int, optional**, keyword-only arg) â€“ Number of samples loaded in advance by each worker. 2 means there will be a total of 2 * num_workers samples prefetched across all workers. (default: 2) persistent_workers (bool, optional) â€“ If True, the data loader will not shutdown the worker processes after a dataset has been consumed once. This allows to maintain the workers Dataset instances alive. (default: False) dataloaderæ˜¯å°†imgå’Œtargetåˆ†åˆ«è¿›è¡Œæ‰“åŒ…ï¼Œåœ¨dim=0ä¸Šå¢åŠ ä¸€ä¸ªç»´åº¦ã€‚ 12345678910111213141516171819202122232425262728293031323334import torchvisionfrom torch.utils.tensorboard import SummaryWriterfrom torch.utils.data import DataLoaderdataset_trans = torchvision.transforms.Compose([ torchvision.transforms.ToTensor()])train_set = torchvision.datasets.CIFAR10(root=&quot;./root&quot;,train=True,transform=dataset_trans,download=True)test_set = torchvision.datasets.CIFAR10(root=&quot;./root&quot;,train=False,transform=dataset_trans,download=True)## è®¾ç½®DataLoaderç±»test_loader = DataLoader(dataset=test_set, batch_size=4, num_workers=0, drop_last=False, shuffle=False)# æµ‹è¯•æ•°æ®ä¸­çš„æ¯ä¸€å¼ å›¾ç‰‡åŠtargetimg, target = test_set[0]print(img.shape)print(target)# æµ‹è¯•dataloaderfor data in test_loader: imgs, targets = data print(imgs.shape) print(targets)&gt;&gt;&gt;output:torch.Size([3, 32, 32])3torch.Size([4, 3, 32, 32])tensor([3, 8, 8, 0]) è¿™é‡Œæˆ‘ä»¬é€šè¿‡tensorboardæ¥æµ‹è¯•å…¶æ•ˆæœ 12345678910writer = SummaryWriter(&quot;dataloader&quot;)# æµ‹è¯•dataloaderfor epoch in range(2): for idx, data in enumerate(test_loader): imgs, targets = data # print(imgs.shape) # print(targets) # ç”±äºæ¯æ¬¡è¾“å‡ºä¸ºå¤šå¼ å›¾ç‰‡ï¼Œè¿™é‡Œå°†å…¶å¹³é“ºèµ·æ¥ writer.add_images(&quot;Epoch:{}&quot;.format(epoch), imgs, idx)writer.close() è¿™é‡Œï¼Œæˆ‘ä»¬é€‰æ‹©ç•™ä¸‹æœªé™¤å°½çš„å†…å®¹ï¼Œshuffle=Falseæ—¶ï¼ŒäºŒè€…ä¸€æ¨¡ä¸€æ ·ã€‚åä¹‹ï¼Œä¸¤æ¬¡å°±ä¸ç›¸åŒäº†ã€‚","link":"/2022/02/10/PyTorch%E6%95%99%E7%A8%8B%E4%B8%8E%E6%BA%90%E7%A0%81%E8%AE%B2%E8%A7%A3/pytorch%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E5%92%8C%E5%8F%AF%E8%A7%86%E5%8C%96%E7%AF%87/"},{"title":"å¼ é‡çš„åˆ›å»ºä¸è¿ç®—","text":"å¼ é‡æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ•°æ®ç»“æ„ï¼Œå®ƒäºæ•°ç»„å’ŒçŸ©é˜µå¾ˆç›¸ä¼¼ã€‚æˆ‘ä»¬ç”¨å¼ é‡æ¥æ ‡è®°æ¨¡å‹çš„è¾“å…¥ã€è¾“å‡ºå’Œæ¨¡å‹çš„å‚æ•°ã€‚ å¼ é‡ï¼ˆTensorï¼‰å’Œæ•°ç»„éå¸¸çš„ç›¸ä¼¼ï¼Œä½†æ˜¯Tensorå¯ä»¥å®ç°åœ¨ç¡¬ä»¶çš„åŠ é€Ÿã€‚ tensors and NumPy æ•°ç»„å¯ä»¥å…±äº«åŒä¸€ä¸ªå†…å­˜ã€‚ hljs.initHighlightingOnLoad(); åˆå§‹åŒ–å¼ é‡12import torchimport numpy as np é€šè¿‡åˆ—è¡¨åˆå§‹åŒ– 12345data = [ [1,2],[3,4] ]x_data = torch.tensor(data)type(data) # &lt;class 'list'&gt;type(x_data) # &lt;class 'torch.Tensor'&gt; é€šè¿‡æ•°ç»„åˆå§‹åŒ– 1234np_array = np.array(data)x_np = torch.from_numpy(np_array)# é»˜è®¤çš„æ•°æ®ç±»å‹ä¸º torch.float32 ä»å¦ä¸€ä¸ªå¼ é‡ä¸­åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„å¼ é‡ 1234567891011121314x_ones = torch.ones_like(x_data) # retains the properties of x_dataprint(f&quot;Ones Tensor: \\n {x_ones} \\n&quot;)x_rand = torch.rand_like(x_data, dtype=torch.float) # overrides the datatype of x_dataprint(f&quot;Random Tensor: \\n {x_rand} \\n&quot;)output:Ones Tensor: tensor([[1, 1], [1, 1]])Random Tensor: tensor([[0.4557, 0.7406], [0.5935, 0.1859]]) ç”¨éšæœºæ•°æˆ–å¸¸å€¼ç”Ÿæˆ 12345678shape = ( 2,3,)rand_tensor = torch.rand(shape)ones_tensor = torch.ones(shape)zeros_tensor = torch.zeros(shape)print(f&quot;Random Tensor: \\n {rand_tensor} \\n&quot;)print(f&quot;Ones Tensor: \\n {ones_tensor} \\n&quot;)print(f&quot;Zeros Tensor: \\n {zeros_tensor}&quot;) è¿™é‡Œçš„shapeå¯ä»¥(2,3) or (2,3,) or [2,3] or [2,3,] Tensorçš„å±æ€§123456789101112tensor = torch.rand(3,4)tensor.shape # å½¢çŠ¶ torch.Size([3, 4])tensor.dtype # æ•°æ®ç±»å‹ torch.float32tensor.device # ä½¿ç”¨çš„è®¾å¤‡ device(type='cpu')print(f&quot;Shape of tensor: {tensor.shape}&quot;)print(f&quot;Datatype of tensor: {tensor.dtype}&quot;)print(f&quot;Device tensor is stored on: {tensor.device}&quot;)Shape of tensor: Datatype of tensor: torch.float32Device tensor is stored on: cpu Tensorçš„æ“ä½œTensorçš„ä¸»è¦æ“ä½œåŒ…å«100ç§åŒ…å«çŸ©é˜µè¿ç®—ã€åˆ‡ç‰‡ç­‰ã€‚å…·ä½“çš„æ“ä½œAPIç‚¹å‡»è¿™é‡Œã€‚ å¸¸ç”¨çš„æ“ä½œå¦‚ä¸‹ï¼š å…³äºTensorçš„æ“ä½œ is_tensor(x)åˆ¤æ–­æ˜¯å¦ä¸ºTensor 123&gt;&gt;&gt; x=torch.tensor([1,2,3])&gt;&gt;&gt; torch.is_tensor(x)True is_nonzero(x)åˆ¤æ–­å•ä¸€å…ƒç´ çš„Tensoræ˜¯å¦ä¸º0 12345678910111213141516&gt;&gt;&gt; torch.is_nonzero(torch.tensor([0.]))False&gt;&gt;&gt; torch.is_nonzero(torch.tensor([1.5]))True&gt;&gt;&gt; torch.is_nonzero(torch.tensor([False]))False&gt;&gt;&gt; torch.is_nonzero(torch.tensor([3]))True&gt;&gt;&gt; torch.is_nonzero(torch.tensor([1, 3, 5]))Traceback (most recent call last):...RuntimeError: bool value of Tensor with more than one value is ambiguous&gt;&gt;&gt; torch.is_nonzero(torch.tensor([]))Traceback (most recent call last):...RuntimeError: bool value of Tensor with no values is ambiguous nueml(x)ç»Ÿè®¡å¼ é‡é‡Œçš„å…ƒç´ æ•°ç›® 123456&gt;&gt;&gt; a = torch.randn(1, 2, 3, 4, 5)&gt;&gt;&gt; torch.numel(a)120&gt;&gt;&gt; a = torch.zeros(4,4)&gt;&gt;&gt; torch.numel(a)16 åˆ›å»ºTensoræ“ä½œ tensor(x)åˆ›å»ºå¼ é‡ from_numpy(a)ä¹Ÿæ˜¯åˆ›å»ºå¼ é‡ï¼Œä½†æ˜¯ä¸åŒçš„æ˜¯æ­¤æ–¹æ³•çš„åˆ›å»ºçš„tensorå’Œarrayæ˜¯å…±äº«å†…å­˜çš„ã€‚ 1234567&gt;&gt;&gt; a = numpy.array([1, 2, 3])&gt;&gt;&gt; t = torch.from_numpy(a)&gt;&gt;&gt; ttensor([ 1, 2, 3])&gt;&gt;&gt; t[0] = -1&gt;&gt;&gt; aarray([-1, 2, 3]) zeros() åˆ›å»ºå…¨0çŸ©é˜µ torch.zeros(size, , out=None, dtype=None, layout=torch.strided, device=None, requires_grad=False) ä¸»è¦å‚æ•°ï¼š *sizeï¼šå½¢çŠ¶å¯ä»¥æ˜¯å…ƒç»„ã€åˆ—è¡¨ã€åˆ‡ç‰‡ç­‰ã€‚ requires_grad=Falseï¼šæ˜¯å¦è¦æ±‚æ¢¯åº¦ã€‚ dtype=None:é»˜è®¤æ˜¯None,å› ä¸ºset_default_tensor_type()å‡½æ•°å¯ä»¥è®¾ç½®é»˜è®¤çš„dtype()ç±»å‹ã€‚ arange()å’Œrange()å‡½æ•°éƒ½æ˜¯ç”¨äºä¸€ç»´è®¡æ•°ï¼Œé…åˆforæ¥ä½¿ç”¨ï¼ŒåŸºæœ¬çš„åŠŸèƒ½ä¹Ÿæ˜¯ç»§æ‰¿numpyå’Œpythonçš„åŸºæœ¬è¯­æ³•ã€‚ arange-&gt;[start, end)ï¼Œsize=$\\lceil \\frac{end-start}{step} \\rceil$ï¼Œå¹¶ä¸”startã€endã€step â€”&gt;&gt; int range-&gt;[start, end]ï¼Œsize=$\\lfloor \\frac{end-start}{step} \\rfloor+1$ï¼Œå¹¶ä¸”startã€endã€step â€”&gt;&gt; float eye(n,m=None) å•ä½çŸ©é˜µ full(size,fill_value ) å°±æ˜¯ç”¨æŸä¸ªæ•°å€¼æ¥å¡«å……æŸä¸ªsizeçš„å¼ é‡ã€‚åŒæ ·çš„è¿˜æœ‰full_like() ç´¢å¼•ã€åˆ‡ç‰‡ã€æ—‹è½¬ä»¥åŠèšåˆçš„æ“ä½œ cat(tensors, dim=0) 1234567891011121314151617181920212223242526272829303132&gt;&gt;&gt; x = torch.randn(2, 3)&gt;&gt;&gt; xtensor([[ 0.6580, -1.0969, -0.4614], [-0.1034, -0.5790, 0.1497]])&gt;&gt;&gt; torch.cat((x, x, x), 0)tensor([[ 0.6580, -1.0969, -0.4614], [-0.1034, -0.5790, 0.1497], [ 0.6580, -1.0969, -0.4614], [-0.1034, -0.5790, 0.1497], [ 0.6580, -1.0969, -0.4614], [-0.1034, -0.5790, 0.1497]])&gt;&gt;&gt; torch.cat((x, x, x), 1)tensor([[ 0.6580, -1.0969, -0.4614, 0.6580, -1.0969, -0.4614, 0.6580, -1.0969, -0.4614], [-0.1034, -0.5790, 0.1497, -0.1034, -0.5790, 0.1497, -0.1034, -0.5790, 0.1497]])&gt;&gt;&gt; x1 = torch.randn(2, 3)&gt;&gt;&gt; x2 = torch.randn(2, 2)&gt;&gt;&gt; s = torch.cat((x1,x2),dim=1)&gt;&gt;&gt; stensor([[-0.5980, 0.2570, 1.1660, -0.0306, -1.0363], [ 0.2817, -0.1498, -0.6464, -0.3204, -1.6839]])# è¿™é‡Œdim=1ä¸Šæ˜¯ä¸åŒçš„dim=0ä¸Šæ˜¯ç›¸åŒçš„ï¼Œå› æ­¤å¯ä»¥å®ç°åœ¨dim=1ä¸Šçš„åˆ‡ç‰‡ï¼Œdim=0æ˜¯ç”¨æ¥å¯¹é½çš„ã€‚&gt;&gt;&gt; x3 = torch.randn(3, 2)&gt;&gt;&gt; s = torch.cat([x2,x3],dim=0)&gt;&gt;&gt; stensor([[-0.0306, -1.0363], [-0.3204, -1.6839], [-0.0858, 0.9804], [ 0.1920, -0.1728], [ 1.0318, -1.6507]])","link":"/2022/01/23/PyTorch%E6%95%99%E7%A8%8B%E4%B8%8E%E6%BA%90%E7%A0%81%E8%AE%B2%E8%A7%A3/%E5%BC%A0%E9%87%8F%E7%9A%84%E5%88%9B%E5%BB%BA%E4%B8%8E%E8%BF%90%E7%AE%97/"},{"title":"Latexå…¬å¼æ’ç‰ˆå¿«é€Ÿæ•™ç¨‹","text":"src=\"//cdn.bootcss.com/highlight.js/9.2.0/highlight.min.js\"> hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦å…³æ³¨Latexåœ¨å…¬å¼æ’ç‰ˆçš„æŠ€å·§ï¼Œå¹¶ä¸”é…åˆMarkdownæ›´å¥½çš„ç¼–è¾‘å…¬å¼ã€‚ä¸»è¦åŒ…å«å¸Œè…Šå­—æ¯ã€ä¸Šä¸‹æ ‡ã€åˆ†å¼ä¸æ ¹å¼ã€è¿ç®—ç¬¦ã€æ ‡æ³¨ã€ç®­å¤´ã€æ‹¬å·ä¸å®šç•Œç¬¦ã€å¤šè¡Œå…¬å¼ã€å¤§æ‹¬å·ã€çŸ©é˜µä»¥åŠå®æˆ˜ä¹¦å†™å‡ ä¸ªå…¬å¼ã€‚ typoraæœ‰äº›latexå­—ç¬¦æ˜¯ä¸è¯†åˆ«çš„ï¼Œå› æ­¤å¯èƒ½å‡ºç°ä¸€äº›ä¹±ç é—®é¢˜ã€‚ è¡Œå†…å…¬å¼åˆ›å»ºè¡Œå†…çš„å…¬å¼çš„æ–¹æ³•æœ‰ä¸‰ç§ï¼š ç¾å…ƒå·ï¼ša+b=b+a å°æ‹¬å·ï¼š\\( a+b=b+a\\) mathç¯å¢ƒï¼š\\begin{math} a+b=b+a \\end{math} è¡Œé—´å…¬å¼åˆ›å»ºè¡Œé—´å…¬å¼çš„ä¸»è¦æ–¹æ³•æœ‰ï¼š åŒç¾å…ƒå·ï¼š$$ $$ ä¸­æ‹¬å·ï¼š\\[a+b=b+a\\] displaymathç¯å¢ƒï¼š\\begin{displaymath} a+b=b+a \\end{displaymath} equationç¯å¢ƒ(è‡ªåŠ¨ç”Ÿæˆç¼–å·)ï¼š\\begin{equation} a+b=b+a \\end{equation}ï¼ŒåŒæ—¶å¯ä»¥å¯¹ç”Ÿæˆçš„å…¬å¼ç”¨\\labelè¿›è¡Œäº¤å‰å¼•ç”¨ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ equation*ç¯å¢ƒ(ä¸è‡ªåŠ¨ç”Ÿæˆç¼–å·)ï¼š\\begin{equation*} a+b=b+a \\end{equation*}ï¼ŒåŒæ—¶å¯ä»¥å¯¹ç”Ÿæˆçš„å…¬å¼ç”¨\\labelè¿›è¡Œäº¤å‰å¼•ç”¨ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ æ­¤æ—¶äº¤å‰å¼•ç”¨çš„ç¼–å·ä¸ºå°ç»“çš„ç¼–å·ã€‚ å¸¦æ˜Ÿå·çš„equationç¯å¢ƒéœ€è¦ä½¿ç”¨amsmathå®åŒ…ã€‚ 1\\usepackage{amsmath} å¸Œè…Šå­—æ¯è¾“å…¥æ–¹æ³•ï¼š\\+å­—æ¯çš„æ‹¼å†™ å¸¸ç”¨çš„å¸Œè…Šå­—æ¯è¡¨ å¯¹äºæœ‰å¤§å†™çš„å­—æ¯æ¥è¯´ï¼Œç›´æ¥å°†é¦–å­—æ¯å¤§å†™å³å¯å¾—åˆ°å¤§å†™çš„å¸Œè…Šå­—æ¯ï¼Œå¯¹äºæ²¡æœ‰å¤§å†™çš„å­—æ¯å¦‚$\\alpha$å’Œ$\\beta$ï¼Œå¦‚æœé¦–å­—æ¯å¤§å†™å¯¹åº”çš„æ˜¯$\\Alpha$å’Œ$\\Beta$å³ABã€‚ å¯¹äºå˜ä½“å­—çš„è¾“å…¥ï¼Œç›´æ¥åœ¨å‰é¢åŠ varå³å¯ã€‚ ä¸Šä¸‹æ ‡ ä¸€èˆ¬æ¥è¯´ï¼Œä¸Šä¸‹æ ‡ç›´æ¥ä½¿ç”¨^å’Œ_å³å¯ã€‚ å¯¹äºæ–œä½“çš„è¦åŠ å¤§æ‹¬å·ï¼Œå¦åˆ™å°±ä¼šåªå¯¹ç¬¬ä¸€ä¸ªæœ‰æ•ˆã€‚ 1234$ a^2 , a_2 x^{y+z},p_{ij},p_ij$ a^2 , a_2, \\, x^{y+z},p_{ij},p_ij è‹±æ–‡å­—æ¯åªæœ‰åœ¨è¡¨ç¤ºå˜é‡(æˆ–å•ä¸€å­—ç¬¦çš„å‡½æ•°åç§°ï¼Œå¦‚f(r))æ—¶æ‰å¯ä½¿ç”¨æ–œä½“ï¼Œå…¶ä½™æƒ…å†µéƒ½åº”ä½¿ç”¨ç½—é©¬ä½“(ç›´ç«‹ä½“)ã€‚ 1234567$ x_i æ­¤æ—¶ä¸ºæ–œä½“ x_{\\rm i} æ­¤æ—¶ä¸ºç›´ç«‹ä½“roman x_{\\mathrm i} \\rm is short for \\mathrm x_{\\text i} \\text{e} ,\\text{i} è‡ªç„¶å¯¹æ•°å’Œè™šæ•°å•ä½ä¹Ÿè¦ä¸ºç›´ç«‹ä½“$ x_i, i=1,2...n\\\\ x_{\\rm i} ,iæ˜¯input\\\\ x_{\\mathrm i},x_{\\text i}\\\\ \\text{A B},\\rm{AB}\\\\ \\text{e} è‡ªç„¶å¯¹æ•°,\\text{i} è™šæ•°å•ä½ \\text{}å’Œ\\rm{}çš„åŒºåˆ«æ˜¯å‰è€…æ”¯æŒç©ºæ ¼ï¼Œåè€…ä¸æ”¯æŒç©ºæ ¼ã€‚ åˆ†å¼äºæ ¹å¼\\frac(fraction,åˆ†æ•°) 12345$ \\frac{1}{2}, \\frac 1 2 \\frac{1}{x+y} \\frac{\\frac 1 x +1}{y+1},\\frac{\\dfrac 1 x +1}{y+1}$ å•ä¸ªå­—ç¬¦å¯ä»¥ä¸ç”¨å¤§æ‹¬å·ï¼ŒåŸç†ä¸ä¸Šé¢ç›¸ä¼¼ã€‚ å¦‚æœæ„Ÿè§‰åµŒå¥—æ—¶çš„å­—ç¬¦æ¯”è¾ƒå°çš„è¯ï¼Œå¯ä»¥ç”¨\\dfrac{}{}. \\frac{1}{2}, \\frac 1 2 \\frac{1}{x+y}\\\\ \\frac{\\frac 1 x +1}{y+1},\\frac{\\dfrac 1 x +1}{y+1}\\sqrt[]{}(square root,å¹³æ–¹æ ¹) 123$ \\sqrt 2, \\sqrt{x+y}, \\sqrt[3]{x+z}$ \\sqrt 2, \\sqrt{x+y}, \\sqrt[3]{x+z} å¯¹äºéå¹³æ–¹æ ¹çš„æ•°åœ¨\\sqrtååŠ []æ¥è‡ªå®šä¹‰ã€‚ æ™®é€šè¿ç®—ç¬¦12345678910$ +- \\times,\\cdot,\\div \\pm,\\mp &gt;&lt;,\\ge,\\le,\\gg,\\ll,\\ne,\\approx,\\equiv \\cap,\\cup,\\in,\\notin,\\subseteq,\\subsetneqq,\\subnsetneqq \\varnothing,\\forall,\\exists,\\nexists\\because,\\therefore \\mathbb R,\\R,\\Q,\\N,\\Z_+ \\mathcal F,\\mathscr F$ $\\pm$ ï¼š\\pm(plus-mius æ­£è´Ÿå·) $\\mp$ï¼š\\mp(mius-plus è´Ÿæ­£å·) $\\ge$ï¼š\\ge(greater than or equal å¤§äºç­‰äº) $\\le$ï¼š\\le(less than or equal å¤§äºç­‰äº) $\\gg,\\ll$ï¼š\\gg,\\llï¼ˆè¿œå¤§äº,è¿œå°äºï¼‰ $\\ne$ï¼š\\neï¼ˆnot equal, ä¸ç­‰äºï¼‰ $\\approx$ï¼š\\approx(approximate, çº¦ç­‰äº) $\\equiv$ï¼š\\equiv(equivalent, æ’ç­‰çš„) $\\cap,\\cup$ï¼š\\capï¼Œ\\cupï¼ˆäº¤é›†ï¼Œå¹¶é›†ï¼‰ $\\in,\\notin$ï¼š\\in,\\notinï¼ˆå±äºï¼Œä¸å±äºï¼‰ $\\subseteq,\\subsetneqq,\\subsetneq$ï¼š\\subseteq,\\subsetneqq,\\subsetneqï¼ˆå­é›†ï¼ŒçœŸå­é›†ï¼‰ $\\supseteq,\\supsetneqq,\\supsetneq$ï¼š\\suqseteq,\\suqsetneqq,\\suqsetneqï¼ˆä¸ä¸Šé¢ç›¸åï¼‰ $\\varnothing,\\forall$ï¼š\\varnothingï¼ˆç©ºé›†ï¼‰,\\forall(ä¸ä»»æ„çš„) $\\exists,\\nexists$ï¼š\\exists,\\nexistsï¼ˆå­˜åœ¨ï¼Œä¸å­˜åœ¨ï¼‰ $\\because,\\therefore$ï¼š\\because,\\thereforeï¼ˆå› ä¸ºï¼Œæ‰€ä»¥ï¼‰ $\\R,\\Q,\\N,\\Z$ï¼š\\R,\\Q,\\N,\\Zå¯¹äºæ•°é›†æ¥è¯´ç‰¹æœ‰çš„å­—ç¬¦ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨\\è½¬ä¹‰å³å¯ï¼Œä½†æ˜¯é™¤äº†æ•°é›†ä»¥å¤–çš„å…¶ä»–å­—ç¬¦å°±æ— æ³•ä½¿ç”¨äº†ã€‚å®Œæ•´å†™æ³•ä¸ºï¼š\\mathbb R $\\mathcal F,\\mathscr F$ï¼š\\mathcal F,\\mathscr Fï¼ˆèŠ±ä½“å­—ç¬¦ï¼‰ ä»¥ä¸‹ä¸ºä¸Šé¢å­—ç¬¦çš„è¿è¡Œç»“æœã€‚ +-\\\\ \\times,\\cdot,\\div\\\\ \\pm,\\mp\\\\ >","link":"/2022/01/24/Latex/Latex%E5%85%AC%E5%BC%8F%E6%8E%92%E7%89%88%E5%BF%AB%E9%80%9F%E6%95%99%E7%A8%8B/"},{"title":"LatexæœŸåˆŠè®ºæ–‡çš„æ’ç‰ˆ","text":"æœ¬æ–‡ä¸»è¦é’ˆå¯¹ä¸IEEEçš„ä¸€ä¸ªLatexæ¨¡æ¿ï¼Œä¸»è¦ä»æ¨¡æ¿ä¸‹è½½ã€è¯­å¥è§£é‡Šã€æ’å…¥å›¾ç‰‡ã€æ’å…¥å…¬å¼ã€æ’å…¥ç®—æ³•å›¾ã€æ’å…¥å¼•ç”¨ç­‰æ–¹é¢æ¥è®²è§£å¦‚ä½•ä½¿ç”¨æ¨¡æ¿ã€‚è¯¥æ•™ç¨‹å±äºç®€æ˜“æ•™ç¨‹ï¼Œæ·±å…¥å­¦ä¹ è¯·çœ‹åç»­çš„è¯¦ç»†æ•™ç¨‹ã€‚è§†é¢‘å‚è€ƒ Latexæ¨¡æ¿ä¸‹è½½ æ¨¡æ¿ä¸‹è½½:IEEEæ¨¡æ¿:http://www.ieee.org/publications_standards/publications/authors/author_templates.html é€šç”¨æ¨¡æ¿:https://www.overleaf.com/ å…¶ä»–æ–¹æ³•:ç™¾åº¦,csdnç­‰ç½‘é¡µæ‰¾ Latexçš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯å†…å®¹ä¸æ ¼å¼åˆ†ç¦» æ¨¡æ¿çš„åŸºæœ¬è¯­å¥è§£é‡Š \\begin{document}æ˜¯æ–‡ä»¶çš„å¼€å§‹ï¼Œä¹‹å‰ä¸ºå¯¼è¨€åŒºï¼Œå¯ä»¥åŠ å…¥å„ç§å„æ ·çš„å®åŒ…ã€‚ \\begin{document}ä¹‹ååˆ°\\begin{abstract}ä¹‹å‰ç”¨æ¥å†™ä½œè€…ä¿¡æ¯ï¼Œè”ç³»æ–¹å¼ä»¥åŠè‡´è°¢ç­‰ä¿¡æ¯ã€‚ \\begin{IEEEkeywords} åé¢å†™å…³é”®è¯ã€‚ \\section{Introduction} ä¹‹åä¸ºä»‹ç»ç»¼è¿°éƒ¨åˆ†ã€‚ \\subsection{name} ä¸ºå­æ ‡é¢˜éƒ¨åˆ†ã€‚ \\section{References Section} å‚è€ƒæ–‡çŒ®éƒ¨åˆ†ã€‚ \\begin{IEEEbiography} å¼€å§‹ä½œè€…ç”Ÿå¹³éƒ¨åˆ†ã€‚ æ’å…¥å›¾ç‰‡ é¦–å…ˆï¼Œå¯¼å…¥å®åŒ… \\usepackage{graphicx}ã€‚ å…¶æ¬¡ï¼Œå¯¼å…¥ä»£ç å—ï¼Œå…¶ä¸­çš„åç¼€åå¯ä»¥å»æŸ¥çœ‹è¯¦ç»†çš„æ•™ç¨‹ã€‚ æœ€åï¼Œç¼–è¾‘å›¾ç‰‡çš„å¤§å°æ ·å¼ã€‚ !(https://cdn.jsdelivr.net/gh/houdezaiwu2019/image-bed/latex/202201251022521.png) æ’å…¥å…¬å¼å…¬å¼éƒ¨åˆ†ä¸»è¦çš„å†…å®¹å‚è€ƒä¹‹å‰çš„ä¸“é—¨å†™å…¬å¼é‚£ç¯‡åšå®¢ã€‚ é¦–å…ˆï¼Œå¯¼å…¥å®åŒ… \\usepackage{amsmath,amsfonts} å…¶æ¬¡ï¼Œè¡Œé—´å…¬å¼å¦‚å›¾ï¼Œæ–‡ç« ç»ˆä¼šè‡ªè¡Œæ ‡å·ï¼Œä¹Ÿå¯ä»¥è‡ªè¡Œæ ‡å·\\tag{1.1}ã€‚ \\begin{equation} \\label{deqn_ex1} x = \\sum_{i=0}^{n} 2{i} Q. \\tag{1.1} \\end{equation} æœ€åï¼Œè¡Œå†…çš„å…¬å¼çš„å†™æ³•æ˜¯åœ¨$ $ä¹‹é—´ç›´æ¥å†™å³å¯ï¼Œå¦‚$x^2+y^2=0$ æ’å…¥å‚è€ƒæ–‡çŒ®å®ç”¨åŠæ³•æ’å…¥å‚è€ƒæ–‡çŒ® é¦–å…ˆï¼Œå¼•å…¥å®åŒ… \\usepackage[colorlinks,linkeolor-black,anchorcolor-black,citecolor-black]{hyperref }%ç”¨äºè°ƒæ•´å¤šä¸ªå‚è€ƒæ–‡çŒ®çš„é—´è·ã€‚ç›´æ¥ç”¨å°±å¥½ã€‚ æ¨¡æ¿çš„æ’å…¥æ–¹æ³•ï¼Œç›´æ¥æ’å…¥ã€‚ ä¹Ÿå¯ä»¥è‡ªå·±ä½¿ç”¨BibTexæ ¼å¼çš„æ–‡ä»¶æ¥æ’å…¥ï¼Œä½†æ˜¯åœ¨å®é™…ç¼–è¯‘çš„è¿‡ç¨‹ä¸­è¦è®°å¾—å°†BibTexæ–‡ä»¶ä¹Ÿè¿›è¡Œç¼–è¯‘ã€‚ åˆ°ç™¾åº¦ä¸Šä¸‹è½½ä¸€ä¸ªBibTexçš„æ–‡ä»¶ã€‚ å¼•ç”¨BIbæ–‡ä»¶ã€‚ ä»¥ä¸‹ä¸ºBibTexæ–‡ä»¶çš„å†…å®¹ã€‚ 12345678@article{2021Exploiting,title={Exploiting Vector Attention and Contextual Prior for Ultrasound Image Segmentation},author={ Xu, L. and Gao, S. and Shi, L. and Wei, B. and He, Y. },journal={Neurocomputing},volume={454},number={1},year={2021},} å¼•ç”¨ï¼ŒBibTexä¹Ÿè¦ç¼–è¯‘ï¼Œå¦åˆ™å‡ºç°çš„æ˜¯ï¼Ÿï¼Œä½†æ˜¯ç›®å‰TexStduioæˆ‘è¿˜æ²¡æœ‰æ‰¾åˆ°åœ¨å“ªé‡Œç¼–è¯‘BibTexæ–‡ä»¶ã€‚ æ’å…¥ç®—æ³•å›¾ é¦–å…ˆï¼Œå¯¼å…¥å®åŒ… \\usepackage[ruled,linesnumbered]{algorithm2e}ã€‚ ä¹‹åï¼Œå¯¼å…¥ç®—æ³•å—å³å¯ã€‚ å·¥å…·è¡¥å…… è¡¥å……å¥½ç”¨ç½‘é¡µ:æ‰‹å†™å…¬å¼è½¬latex https://editor.codecogs.com/ æ‰‹å†™ç¬¦å·ï¼Œè½¬latexè¡¨è¾¾ https://detexify.kirelabs.org/classify/html æˆªå›¾çœ‹å…¬å¼ https://mathpix.com/ æ‰‹å†™è¡¨æ ¼ï¼Œè½¬latexè¡¨è¾¾ https://www.tablesgenerator.com/","link":"/2022/01/25/Latex/Latex%E6%9C%9F%E5%88%8A%E8%AE%BA%E6%96%87%E7%9A%84%E6%8E%92%E7%89%88/"},{"title":"LatexåŸºç¡€æ•™ç¨‹(ä¸€)","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»ä¸»è¦åŒ…å«Latexæ–‡ä»¶åŸºæœ¬ç»“æ„ã€å¦‚ä½•å¤„ç†ä¸­æ–‡ã€å­—ä½“å­—å·çš„è®¾ç½®ã€æ–‡æ¡£ç¯‡ç« çš„è®¾ç½®ã€ç‰¹æ®Šå­—ç¬¦çš„è¾“å…¥ä»¥åŠå›¾åƒçš„æ’å…¥å’Œæ’ç‰ˆï¼Œä¸»è¦å‚è€ƒäº†Bç«™çš„latexä¸­æ–‡æ•™ç¨‹-15é›†ä»å…¥é—¨åˆ°ç²¾é€šåŒ…å«å„ç§latexæ“ä½œè§†é¢‘çš„å‰8è®²ã€‚ Latexæ–‡ä»¶çš„åŸºæœ¬ç»“æ„å¯¼è¨€åŒº åœ¨latexä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨% æ¥è¿›è¡Œæ³¨é‡Šã€‚ å¯¼è¨€åŒºä¸»è¦è¿›è¡Œå…¨å±€è®¾ç½® \\title{}è®¾ç½®æ–‡ç« çš„æ ‡é¢˜ \\author{}è®¾ç½®æ–‡ç« çš„çš„ä½œè€… \\date{}è®¾ç½®æ–‡ç« çš„æ—¶é—´ ä½†æ˜¯è®¾ç½®çš„å…¨å±€çš„å±æ€§æ˜¯çœ‹ä¸åˆ°çš„ï¼Œè¦åœ¨æ­£æ–‡åŒºåŠ \\maketitleæ‰å¯ä»¥æ˜¾ç¤ºå‡ºæ¥ å¦‚æœä½¿ç”¨çš„æ˜¯bookç±»ï¼Œåˆ™è¾“å‡ºtitleæ˜¯å•ç‹¬åœ¨ä¸€é¡µçš„ã€‚ 1234567% å¯¼è¨€åŒº\\documentclass{book}% report book letter article\\title{My First Document}\\author{Zhengtong Cao}\\date{\\today} æ­£æ–‡åŒº ä½¿ç”¨\\begin{}å’Œ\\end{}æ¥åˆ›å»ºä¸€ä¸ªç¯å¢ƒã€‚ æ¯ä¸ªæ–‡ç« é‡Œæœ€å¤šæœ‰ä¸€ä¸ªdocumentç¯å¢ƒã€‚ 12345678% æ­£æ–‡åŒº\\begin{document} \\maketitle hello, \\LaTeX Let $f(x)$ be define by the formula $f(x)=3x^2+x-1$ \\end{document} å¦‚æœä¸¤å¥è¯ä¹‹é—´åŠ ä¸€ä¸ªç©ºè¡Œï¼Œåˆ™ç›¸å½“äºä¸€ä¸ªæ¢è¡Œæ“ä½œã€‚ ä¸¤æ®µè¯ä¹‹é—´å¯ä»¥åŠ å…¥å¤šä¸ªç©ºè¡Œï¼Œä½†æ˜¯ç°å®çš„æ—¶å€™å°±åªæœ‰ä¸€ä¸ªç©ºè¡Œäº†ã€‚ è¿™é‡Œçš„ç©ºè¡Œæ˜¯å®å®åœ¨åœ¨çš„ç©ºè¡Œï¼Œä¸å¯ä»¥æ˜¯æ³¨é‡Šè¡Œã€‚ä¹‹å‰é”™è¯¯çš„ä»¥ä¸ºæ³¨é‡Šè¡Œå¯ä»¥ä½œä¸ºä¸€ä¸ªç©ºè¡Œï¼Œä½†æ˜¯ç¼–è¯‘å‡ºæ¥å‘ç°ä¹‹å‰çš„æ¢è¡Œæ¶ˆå¤±äº†ã€‚ å• æ˜¯è¡Œå†…å…¬å¼ï¼ŒåŒ$$$ $$$çš„ä½œç”¨æ˜¯è¡Œé—´å…¬å¼ï¼Œ \\begin{equation},\\end{equation}ç¯å¢ƒå¯ä»¥äº§ç”Ÿå¸¦ç¼–å·çš„è¡Œé—´å…¬å¼ã€‚ 123\\begin{equation} AB^2+BC^2=AC^2\\end{equation} Latexä¸­çš„ä¸­æ–‡å¤„ç†texstdioé…ç½®è®¾ç½®ç¼–è¯‘å™¨ä¸ºXeLateX è®¾ç½®é»˜è®¤ç¼–ç ä¸ºUTF-8 åœ¨å¯¼è¨€åŒºå¯¼å…¥ctexå®åŒ… æœªå®šä¹‰ç¬¦å·çš„å®šä¹‰1234$\\angle$A=90$\\degree$% latexå†…æ²¡æœ‰å¯¹åº”çš„å‘½ä»¤\\degreeçš„å‘½ä»¤ï¼Œç¼–è¯‘æ—¶ä¼šæ˜¾ç¤ºé”™è¯¯ï¼Œè¦åœ¨å¯¼è¨€åŒºé‡æ–°å®šä¹‰\\newcommand{\\degree}{^\\circ} latexå†…æ²¡æœ‰å¯¹åº”çš„å‘½ä»¤\\degreeçš„å‘½ä»¤ï¼Œè¦åœ¨å¯¼è¨€åŒºé‡æ–°å®šä¹‰ï¼Œ\\newcommand{\\degree}{^\\circ} ç”±äºlatexçš„ç¼–è¯‘å™¨ä¸åŒé€ æˆçš„ï¼Œåœ¨typoraé‡Œå°±å®šä¹‰äº†\\degreeå‘½ä»¤ï¼Œä½†åœ¨latexé‡Œå°±æ²¡æœ‰ï¼Œè¦é‡æ–°å®šä¹‰ã€‚ ä¸­æ–‡çš„è¾“å…¥123456\\usepackage{ctex}\\title{\\heiti \\LaTeX å­¦ä¹ ç¬”è®°}%\\author{Zhengtong Cao}\\author{\\kaishu æ›¹æ”¿é€š}\\date{\\today} å­—ä½“çš„è®¾ç½®ï¼š\\heiti é»‘ä½“ã€kaishu æ¥·ä½“ã€‚ å¯¼å…¥å®åŒ…åç›´æ¥è¾“å…¥å³å¯ï¼Œæ— è§†ä¸‹é¢çš„çº¢è‰²ä¸‹æ»‘çº¿ã€‚ åœ¨cmdé‡Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œå¯ä»¥å¼¹å‡ºctexçš„å®åŒ…æ‰‹å†Œã€‚è¿™é‡Œä¹Ÿå¯ä»¥ç›´æ¥å¯¼å…¥\\ctexart,\\ctexbookç­‰ã€‚ 1texdoc ctex å¯ä»¥ä½¿ç”¨texdocå‘½ä»¤æ¥æŸ¥çœ‹å„ç§æ–‡æ¡£ 12texdoc lshort-zh# ä¸€ä¸ªlatexçš„ç®€æ˜“å­¦ä¹ æ–‡ä»¶ï¼Œ112åˆ†é’Ÿå…¥é—¨ Latexå­—ä½“å­—å·çš„è®¾ç½® å­—ä½“æ—è®¾ç½®å­—ä½“æ—ä¸»è¦åˆ†ä¸ºç½—é©¬å­—ä½“\\textrm{Roman Family}ï¼›æ— è¡¬çº¿å­—ä½“\\textsf{San serif Family}ï¼›æ‰“å­—æœºå­—ä½“\\texttt{Typewriter} å¦‚å›¾ï¼Œ\\rmfamily ä»£è¡¨ä»¥åçš„å­—ä½“éƒ½æ˜¯ç½—é©¬ä½“ï¼Œå¦‚æœä¹‹ååˆå…¶ä»–çš„å­—ä½“çš„è®¾ç½®å¦‚\\ttfamily åˆ™ä¸Šä¸ªä½œç”¨è‡ªåŠ¨ç»“æŸï¼Œå¼€å§‹æ–°çš„ä½œç”¨ã€‚ ä¸€èˆ¬ä½¿ç”¨æ—¶ä¼šåŠ ä¸Š{\\rmfamily xxx}æ¥é™å®šå­—ä½“æ—çš„ä½œç”¨èŒƒå›´ã€‚ \\rmfamilyç½—é©¬ä½“ï¼Œ\\sffamily æ— è¡¬çº¿å­—ä½“ï¼Œ\\ttfamilyæ‰“å­—æœºå­—ä½“ã€‚ å­—ä½“ç³»åˆ—è®¾ç½®å­—ä½“ç³»åˆ—ä¸»è¦åˆ†ä¸ºç²—ç»†ã€å®½åº¦è®¾ç½®å¦‚\\textmd{ Medium Series } å’Œ \\textbf{ Boldface Series }ï¼ˆå­—ä½“è®¾ç½®å‘½ä»¤ï¼‰ { \\mdseries xxx }å’Œ{ \\bfseries xxx } (å­—ä½“è®¾ç½®å£°æ˜) å­—ä½“å½¢çŠ¶å‘½ä»¤å­—ä½“å½¢çŠ¶ç›´ç«‹\\textup{upright Shape}ã€æ–œä½“\\textit{Italic Shape}ã€ä¼ªæ–œä½“\\textsl{s1anted Shape}ã€å°å‹å¤§å†™\\textsc{Small caps Shape}ï¼ˆå­—ä½“è®¾ç½®å‘½ä»¤ï¼‰ { \\upshape Upright shape} {\\itshape Italic shape} {\\slshape Slanted Shape} {\\scshape Small caps Shape}(å­—ä½“è®¾ç½®å£°æ˜) ä¸­æ–‡å­—ä½“{\\songti å®‹ä½“} {\\heiti é»‘ä½“} {\\fangsong ä»¿å®‹} {\\kaishu æ¥·ä¹¦}ä¸­æ–‡å­—ä½“çš„\\textbf{ç²—ä½“}ï¼ˆé»‘ä½“ï¼‰ä¸\\textit{æ–œä½“}ï¼ˆæ¥·ä½“ï¼‰ å­—ä½“å¤§å°çš„è®¾ç½® è®¾ç½®å…¨æ–‡çš„é»˜è®¤å­—å·å¤§å°ï¼Œä¸€èˆ¬åªæœ‰ç§10ptã€11ptã€12pt å¯¹äº\\ctexå®åŒ…æ¥è¯´åˆä¸€äº›è®¾ç½®è‡ªå¥½æ“ä½œå‘½ä»¤ã€‚ è‡ªå®šä¹‰å­—ä½“æ“ä½œ latexçš„æ€æƒ³æ—¶å°†å†…å®¹å’Œæ’ç‰ˆåˆ†é‡Œï¼Œå› æ­¤ç»å¸¸åœ¨å¯¼è¨€åŒºè®¾ç½®\\newcommand{}{}æ¥è®¾è®¡å­—ä½“æ ·å¼ã€‚ Latexæ–‡æ¡£çš„ç¯‡ç« ç»“æ„æçº²æ„å»ºçš„å‡ ä¸ªå‘½ä»¤ï¼š 1234\\chapter{âŸ¨titleâŸ©} %ç« \\section{âŸ¨titleâŸ©} %èŠ‚\\subsection{âŸ¨titleâŸ©} %å°èŠ‚\\subsubsection{âŸ¨titleâŸ©} %å­å°èŠ‚ å…¶ä¸­\\chapter åªåœ¨book å’Œreport æ–‡æ¡£ç±»æœ‰å®šä¹‰ã€‚è¿™äº›å‘½ä»¤ç”Ÿæˆç« èŠ‚æ ‡é¢˜ï¼Œå¹¶èƒ½å¤Ÿè‡ªåŠ¨ç¼–å·ã€‚ article æ–‡æ¡£ç±»å¸¦ç¼–å·çš„å±‚çº§ä¸º\\section / \\subsection / \\subsubsection ä¸‰çº§ï¼› report/book æ–‡æ¡£ç±»å¸¦ç¼–å·çš„å±‚çº§ä¸º\\chapter / \\section / \\subsection ä¸‰çº§ å¦‚ä¸‹ï¼Œå¯¹äºèŠ‚æ“ä½œçš„ä¸€äº›å‚æ•°è®¾è®¡ï¼š å¸¦å¯é€‰å‚æ•°çš„å˜ä½“ï¼š\\section[âŸ¨short titleâŸ©]{âŸ¨titleâŸ©}æ ‡é¢˜ä½¿ç”¨âŸ¨titleâŸ© å‚æ•°ï¼Œåœ¨ç›®å½•å’Œé¡µçœ‰é¡µè„šä¸­ä½¿ç”¨âŸ¨short titleâŸ© å‚æ•° å¸¦æ˜Ÿå·çš„å˜ä½“ï¼š\\section*{âŸ¨titleâŸ©}æ ‡é¢˜ä¸å¸¦ç¼–å·ï¼Œä¹Ÿä¸ç”Ÿæˆç›®å½•é¡¹å’Œé¡µçœ‰é¡µè„š åˆ†æ®µæ“ä½œ åˆ†æ®µæ“ä½œä¸€èˆ¬æ˜¯æ’å…¥ä¸€ä¸ªç©ºè¡Œï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨\\par,ä½†æ˜¯å¤šç”¨æ’å…¥ç©ºè¡Œçš„å‘½ä»¤ã€‚\\\\çš„ä½œç”¨æ˜¯æ¢è¡Œè€Œä¸æ˜¯åˆ†æ®µã€‚ \\ctexart å‘½ä»¤ é€šè¿‡\\ctexart è®¾ç½®å¸ƒå±€æ—¶sectionæ˜¯å±…ä¸­æ’ç‰ˆçš„. ä½¿ç”¨\\ctexsetå‘½ä»¤å¯ä»¥è‡ªå®šä¹‰ctexartæ ¼å¼ã€‚ æ’ç‰ˆä»¥åçš„æ ¼å¼å¦‚å›¾æ‰€ç¤ºã€‚ ç›®å½•çš„ç”Ÿæˆ åœ¨LATEX ä¸­ç”Ÿæˆç›®å½•éå¸¸å®¹æ˜“ï¼Œåªéœ€åœ¨åˆé€‚çš„åœ°æ–¹ä½¿ç”¨å‘½ä»¤ï¼š\\tableofcontents è¿™ä¸ªå‘½ä»¤ä¼šç”Ÿæˆå•ç‹¬çš„ä¸€ç« ï¼ˆbook / reportï¼‰æˆ–ä¸€èŠ‚ï¼ˆarticleï¼‰ï¼Œæ ‡é¢˜é»˜è®¤ä¸ºâ€œContentsâ€œ \\tableofcontentsç”Ÿæˆçš„ç« èŠ‚é»˜è®¤ä¸å†™å…¥ç›®å½•ï¼ˆ\\section*æˆ–\\chapter*ï¼‰ Latexä¸­çš„ç‰¹æ®Šå­—ç¬¦ç©ºç™½ç¬¦å· ç©ºè¡Œåˆ†æ®µï¼Œå¤šä¸ªç©ºè¡Œç­‰åŒ1ä¸ªï¼› è‡ªåŠ¨ç¼©è¿›ï¼Œç»å¯¹ä¸èƒ½ä½¿ç”¨ç©ºæ ¼ä»£æ›¿ï¼› è‹±æ–‡ä¸­å¤šä¸ªç©ºæ ¼å¤„ç†ä¸º1ä¸ªç©ºæ ¼ï¼Œä¸­æ–‡ä¸­ç©ºæ ¼å°†è¢«å¿½ç•¥ï¼› æ±‰å­—ä¸å…¶å®ƒå­—ç¬¦çš„é—´è·ä¼šè‡ªåŠ¨ç”±XeLaTeXå¤„ç†ï¼› ç¦æ­¢ä½¿ç”¨ä¸­æ–‡å…¨è§’ç©ºæ ¼ã€‚ é€šè¿‡å‘½ä»¤æ¥ç”Ÿæˆç©ºæ ¼å­—ç¬¦ï¼š 12345678910111213141516171819202122% 1em(å½“å‰å­—ä½“ä¸­Mçš„å®½åº¦)äº§ç”Ÿä¸€ä¸ªç©ºæ ¼çš„å®½åº¦a\\quad b% 2em äº§ç”Ÿçš„ä¸¤ä¸ªç©ºæ ¼çš„å®½åº¦a\\qquad b% çº¦ä¸º1/6ä¸ªç©ºæ ¼çš„å®½åº¦a\\,b a\\thinspace b% 0.5ä¸ªç©ºæ ¼å‘½ä»¤a\\enspace b% äº§ç”Ÿä¸€ä¸ªç©ºæ ¼a\\ b% ç¡¬ç©ºæ ¼a~b% 1pc=12pt=4.218mm % äº§ç”Ÿå›ºå®šå®½åº¦å€¼çš„ç©ºç™½ a\\kern 1pc ba\\kern -1em ba\\hskip 1em ba\\hspace{35pt}b% å ä½å®½åº¦(æ ¹æ®å¤§æ‹¬å·å†…çš„å ä½ç¬¦çš„å®½åº¦äº§ç”Ÿç©ºç™½)a\\hphantom{xyz}b%å¼¹æ€§é•¿åº¦(å³å æ»¡æ•´ä¸ªçš„ç©ºé—´)a\\hfill b Latexçš„æ§åˆ¶ç¬¦ç”±äºæœ‰äº›ç¬¦å·åœ¨Latexä¸­å…·æœ‰ç‰¹æ®Šçš„å«ä¹‰ï¼Œå› æ­¤è¾“å…¥çš„æ—¶å€™å‰é¢è¦åŠ \\ (æ³¨æ„ï¼Œ\\\\ä»£è¡¨æ¢è¡Œæ“ä½œï¼Œå› æ­¤è¿™é‡Œç”¨\\textbackslashæ¥ä»£æ›¿) 1\\# \\$ \\% \\{ \\} \\~{} \\_{} \\&amp; \\textbackslash è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š Latexæ’ç‰ˆç¬¦å·æ’ç‰ˆä¸­çš„ç‰¹æ®Šç¬¦å·å¦‚ä¸‹ï¼š 1\\S \\P \\dag \\ddag \\copyright \\pounds TEXæ ‡å¿—ç¬¦å·123456789101112131415% åŸºæœ¬ç¬¦å·\\Tex{} \\LaTeX{} \\LaTeXe{}\\usepackage{xltxtra}% æä¾›äº†é’ˆå¯¹XeTeXçš„æ”¹è¿›å¹¶ä¸”åŠ å…¥äº†XeTeXçš„LOGO% xltxraå®åŒ…\\XeLaTeX\\usepackage{texnames}% texnameså®åŒ…æä¾›\\AmSTeX{} \\AmS-\\LaTeX{}\\BibTeX{} \\LuaTeX{}\\usepackage{mflogo}% mflogoå®åŒ…\\METAFONT{} \\MF{} \\MP{} è¾“å‡ºç»“æœï¼š å¼•å·1`(å·¦å¼•å·) '(å³å¼•å·) ``(å·¦åŒå¼•å·) ''(å³åŒå¼•å·) è¿å­—ç¬¦ä½¿ç”¨å‡ ä¸ªå‡å·çš„ç´¯åŠ æ¥ä»£è¡¨ä¸åŒé•¿åº¦çš„è¿å­—ç¬¦ã€‚ 1- -- --- éè‹±æ–‡å­—ç¬¦12% éè‹±æ–‡å­—ç¬¦\\oe \\OE \\ae \\AE \\aa \\AA \\o \\O \\l \\L \\ss \\SS !`?` é‡éŸ³ç¬¦å·(ä»¥oä¸ºä¾‹)12%é‡éŸ³ç¬¦å·(ä»¥oä¸ºä¾‹)\\`o \\'o \\^o \\''o \\~o \\=o \\.o \\u{o} \\v{o}\\H{o} \\r{o} \\t{o} \\b{o} \\c{o} \\d{o} Latexçš„å›¾åƒæ’å…¥123456%å¯¼è¨€åŒº: \\usepackage{graphicx}%è¯­æ³•:\\includegraphics[&lt;é€‰é¡¹&gt;]{&lt;æ–‡ä»¶å&gt;}%æ ¼å¼: EPS,PDF,PNG,JPEG,BMP\\usepackage{graphicx}\\graphicspath{{figures/},{pic/}} %å›¾ç‰‡åœ¨å½“å‰ç›®å½•ä¸‹çš„ figuresç›®å½• \\includegraphics[&lt;é€‰é¡¹&gt;]{&lt;æ–‡ä»¶å&gt;} çš„å¿…é€‰å‚æ•°ä¸ºæ–‡ä»¶åï¼Œå¯é€‰å‚æ•°ä¸ºå›¾ç‰‡çš„ç¼©æ”¾å’Œæ—‹è½¬ã€‚ æ–‡ä»¶åï¼Œå¯ä»¥åŠ ç±»å‹åç¼€.jpg .png \\graphicspath{ {figures/},{pic/} } æŒ‡å®šå›¾ç‰‡çš„æœç´¢è·¯å¾„ï¼Œå¤šä¸ªè·¯å¾„ä½¿ç”¨ï¼Œéš”å¼€ã€‚ hexo æ’ç‰ˆä¸­è¿ç»­ä¸¤ä¸ªå¤§æ‹¬å·ä¹‹é—´è¦åŠ ç©ºæ ¼ã€‚ 123456789101112% æŒ‡å®šç¼©æ”¾æ¯”ä¾‹\\includegraphics[scale=0.3]{lion}\\includegraphics[scale=0.03]{mountain}\\includegraphics[scale=0.3]{oscilloscope}% æŒ‡å®šå›ºå®šå®½åº¦å’Œé«˜åº¦\\includegraphics[height=2cm]{lion}\\includegraphics[width=2cm]{lion.jpg}% æŒ‡å®šç›¸å¯¹çš„é«˜åº¦å’Œå®½åº¦\\includegraphics[width=0.2 \\textwidth]{lion}\\includegraphics[width=0.2 \\textheight]{mountain}% æŒ‡å®šå¤šä¸ªå‚æ•°\\includegraphics[angle=-45,width=0.2\\textwidth]{lion} ç»†èŠ‚æŸ¥çœ‹: 1texdoc graphic","link":"/2022/02/08/Latex/Latex%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B(%E4%B8%80)/"},{"title":"LatexåŸºç¡€æ•™ç¨‹ï¼ˆäºŒï¼‰","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»ä¸»è¦åŒ…å«Latexçš„è¡¨æ ¼æ“ã€ä½œæµ®åŠ¨ä½“çš„è®¾ç½®ã€å‚è€ƒæ–‡çŒ®ä»¥åŠè‡ªå®šä¹‰å‘½ä»¤çš„è®¾ç½®ï¼Œä¸»è¦å‚è€ƒäº†Bç«™çš„latexä¸­æ–‡æ•™ç¨‹-15é›†ä»å…¥é—¨åˆ°ç²¾é€šåŒ…å«å„ç§latexæ“ä½œè§†é¢‘çš„å9è®²ã€‚ Latexä¸­çš„è¡¨æ ¼123\\begin{tabular}[&lt;å‚ç›´å¯¹é½æ–¹å¼&gt;]{&lt;åˆ—æ ¼å¼è¯´æ˜&gt;} &lt;è¡¨é¡¹&gt;&amp;&lt;è¡¨é¡¹&gt;&amp; ...&lt;è¡¨é¡¹å…¥&gt; \\\\\\end{tabular} ç”¨\\\\\\è¡¨ç¤ºæ¢è¡Œ ç”¨&amp;è¡¨ç¤ºä¸åŒçš„åˆ— å¯¹äºæ ¼å¼è¯´æ˜å‚æ•°ä¸»è¦æœ‰ï¼š l-æœ¬åˆ—å·¦å¯¹é½ c-æœ¬åˆ—å±…ä¸­å¯¹é½ r-æœ¬åˆ—å³å¯¹é½ p{&lt;å®½&gt;}-æœ¬åˆ—å®½åº¦å›ºå®š,èƒ½å¤Ÿè‡ªåŠ¨æ¢è¡Œ å¦‚å›¾ï¼Œä¸€å…±äº”åˆ—ï¼Œå› æ­¤å°±æœ‰äº”ä¸ªæ ¼å¼è¯´æ˜ç¬¦ã€‚ å…¶æ¬¡ï¼Œä¸¤ä¸ªåˆ—ä¹‹é—´åŠ ä¸€ä¸ªç«–çº¿åŠ ä¸€ä¸ªâ€|â€œï¼Œå¦‚æœåŠ ä¸€ä¸ªåŒç«–çº¿å°±åŠ ä¸€ä¸ªâ€||â€œã€‚ å¦‚æœè¦åŠ ä¸€ä¸ªæ¨ªçº¿äº†ï¼Œå°±åœ¨è¡Œå‰æˆ–è¡ŒååŠ \\hlineã€‚ å¸®åŠ©æ–‡æ¡£çš„æ‰“å¼€ 123texdoc booktab # ä¸‰çº¿è¡¨texdoc longtab # é•¿è¡¨æ ¼å®åŒ…texdoc tabu # ç»¼åˆè¡¨æ ¼å®åŒ… Latexä¸­çš„æµ®åŠ¨ä½“æµ®åŠ¨ä½“çš„åˆ›å»ºæ“ä½œLATEX é¢„å®šä¹‰äº†ä¸¤ç±»æµ®åŠ¨ä½“ç¯å¢ƒfigure å’Œtableã€‚ä¹ æƒ¯ä¸Šfigure é‡Œæ”¾å›¾ç‰‡ï¼Œtable é‡Œæ”¾è¡¨æ ¼ï¼Œä½†å¹¶æ²¡æœ‰ä¸¥æ ¼é™åˆ¶ï¼Œå¯ä»¥åœ¨ä»»ä½•ä¸€ä¸ªæµ®åŠ¨ä½“é‡Œæ”¾ç½®æ–‡å­—ã€å…¬å¼ã€è¡¨æ ¼ã€å›¾ç‰‡ç­‰ç­‰ä»»æ„å†…å®¹ã€‚ å¯¹äºä¸€èˆ¬çš„å›¾åƒï¼Œæœ‰figureæµ®åŠ¨ä½“ç¯å¢ƒã€‚ å¯¹äºè¡¨æ ¼ï¼Œæœ‰tableæµ®åŠ¨ä½“ç¯å¢ƒã€‚ ç»“æœå¯ä»¥çœ‹å‡ºå›¾åƒå’Œè¡¨æ ¼çš„ä½ç½®éƒ½å‘ç”Ÿäº†æµ®åŠ¨æ•ˆæœã€‚ ç»™æµ®åŠ¨ä½“åŠ å±æ€§ä»¥table ç¯å¢ƒçš„ç”¨æ³•ä¸¾ä¾‹ï¼š 123\\begin{table}[âŸ¨placementâŸ©]...\\end{table} âŸ¨placementâŸ© å‚æ•°æä¾›äº†ä¸€äº›ç¬¦å·ç”¨æ¥è¡¨ç¤ºæµ®åŠ¨ä½“å…è®¸æ’ç‰ˆçš„ä½ç½®ï¼Œå¦‚hbp å…è®¸æµ®åŠ¨ä½“æ’ç‰ˆåœ¨å½“å‰ä½ç½®ã€åº•éƒ¨æˆ–è€…å•ç‹¬æˆé¡µã€‚table å’Œfigure æµ®åŠ¨ä½“çš„é»˜è®¤è®¾ç½®ä¸ºtbpã€‚ \\caption{...}ä¸ºè®¾ç½®æµ®åŠ¨ä½“çš„æ ‡é¢˜ã€‚ \\centeringä¸ºè®¾ç½®å›¾ç‰‡çš„å±…ä¸­å’Œåå·¦åå³ã€‚ \\label{...}ä¸ºè®¾ç½®æ ‡ç­¾æ“ä½œï¼Œæ–¹ä¾¿åé¢çš„åº”ç”¨ã€‚ \\ref{...}ä¸ºå¼•ç”¨è®¾ç½®ï¼Œå’Œæ ‡ç­¾åœ¨ä¸€èµ·æ¥å®ç°äº¤å‰å¼•ç”¨ã€‚ è¿™é‡Œæµ®åŠ¨ä½“çš„äº¤å‰å¼•ç”¨å’Œæ ‡å·æ˜¯è‡ªåŠ¨å®Œæˆçš„ã€‚ æ€»ç»“ï¼š æµ®åŠ¨ä½“å¯ä»¥å®ç°çµæ´»çš„åˆ†é¡µï¼ˆé¿å…æ— æ³•åˆ†å‰²çš„å†…å®¹äº§ç”Ÿçš„é¡µé¢å…­ç™¾ç•™ç™½ï¼‰ å¯ä»¥ç»™å›¾è¡¨æ·»åŠ æ ‡é¢˜ã€‚ äº¤å‰å¼•ç”¨ã€‚ 123456789figureç¯å¢ƒ(tableç¯å¢ƒä¸ä¹‹ç±»ä¼¼)\\begin{figure}[&lt;å…è®¸ä½ç½®&gt;]&lt;ä»»æ„å†…å®¹&gt;...\\end{figure}&lt;å…è®¸ä½ç½®&gt;å‚æ•°(é»˜è®¤tbp)% hï¼Œæ­¤å¤„( here)-ä»£ç æ‰€åœ¨çš„ä¸Šä¸‹æ–‡ä½ç½®% tï¼Œé¡µé¡¶(top)-ä»£ç æ‰€åœ¨é¡µé¢æˆ–ä¹‹åé¡µé¢çš„é¡¶éƒ¨% bï¼Œé¡µåº•( bottom)ä¸€ä»£ç æ‰€åœ¨é¡µé¢æˆ–ä¹‹åé¡µé¢çš„åº•éƒ¨% pï¼Œç‹¬ç«‹ä¸€é¡µ(page)-æµ®åŠ¨é¡µé¢ æ ‡é¢˜æ§åˆ¶( captionã€bicaptionç­‰å®åŒ…) å¹¶æ’ä¸å­å›¾è¡¨( subcaptionã€subfigã€floatrowç­‰å®åŒ…) ç»•æ’(picinparã€ wrapfigç­‰å®åŒ…) Latexä¸­çš„å‚è€ƒæ–‡çŒ®thebibliographyç¯å¢ƒçš„ä½¿ç”¨ ä¸€æ¬¡ç®¡ç†ï¼Œä¸€æ¬¡ä½¿ç”¨å‚è€ƒæ–‡çŒ®æ ¼å¼: 12345\\begin{thebibliography}{ç¼–å·æ ·æœ¬}\\bibitem[è®°å·]{å¼•ç”¨æ ‡å¿—}æ–‡çŒ®æ¡ç›®1\\bibitem[è®°å·]{å¼•ç”¨æ ‡å¿—}æ–‡çŒ®æ¡ç›®2end{thebibliography}% å…¶ä¸­æ–‡çŒ®æ¡ç›®åŒ…æ‹¬:ä½œè€…ï¼Œé¢˜ç›®ï¼Œå‡ºç‰ˆç¤¾ï¼Œå¹´ä»£ï¼Œç‰ˆæœ¬ï¼Œé¡µç ç­‰ã€‚ å¦‚ä¸‹ä¸ºä¸€ä¸ªå…·ä½“çš„æ¡ˆä¾‹ï¼š 123456789101112å¼•ç”¨æ–‡ç« \\cite{article1}ï¼Œå¼•ç”¨ä¸€æœ¬ä¹¦\\cite{book1}\\begin{thebibliography}{99}\\bibitem{article1}é™ˆç«‹è¾‰,è‹ä¼Ÿ,è”¡å·,é™ˆæ™“äº‘ï¼Œ\\emph{åŸºäºLaTexçš„Mebæ•°å ‚å…¬å¼æå–æ–¹æ³•ç ”ç©¶}[7].è®¡ç®—æœºç§‘å­¦ï¼2014(86)\\bibitem{book1}William H. Press,saul A. Ieukolsky,william T. Vetterling,Brian P. Elanneny.,\\emph{Numerical Recipes 3rd Edition:The Art of scientific Computing}Cambridge University Press,New York ,2007.\\bibitem{latexGuide} Kopka Helmut,w.Daly Patrick,\\emph{Guide to \\LaTeX}, $4^{th}$ Edition.Available at \\texttt{http://www.amazon.com}.\\bibitem{latexMath} Graetzer. Georgeï¼Œ\\emph{Math Into \\LaTeX},BirkhAtuser Boston;3 edition (June 22ï¼Œ2000).\\end{thebibliography} \\emph{}è¡¨ç¤ºè¦å¼ºè°ƒçš„å…·ä½“å†…å®¹ã€‚ å¼•ç”¨çš„æ—¶å€™å¯ä»¥é‡‡ç”¨ï¼š\\cite{å¼•ç”¨æ ‡å¿—1,å¼•ç”¨æ ‡å¿—2,...}ã€‚å› æ­¤ï¼Œè¿™æ ·ç®¡ç†å‚è€ƒæ–‡çŒ®éœ€è¦ç»™æ¯ä¸ªå‚è€ƒæ–‡çŒ®è¿›è¡Œè¯¦ç»†æ’ç‰ˆï¼Œæ¯”è¾ƒçš„éº»çƒ¦ï¼ŒåŒæ—¶ä¹Ÿæ–¹ä¾¿æ–‡çŒ®çš„è·¨æ–‡çŒ®çš„å¼•ç”¨ã€‚ å› æ­¤éœ€è¦ä¸€ä¸ªå¯ä»¥ä¸€æ¬¡ç®¡ç†å¤šæ¬¡ä½¿ç”¨çš„åŒ…ã€‚ ä½¿ç”¨BibTexæ–‡ä»¶è¿›è¡Œå‚è€ƒæ–‡çŒ®ç®¡ç† bibtexæ–‡ä»¶çš„æ ¼å¼å¦‚ä¸‹ï¼š 12345@âŸ¨typeâŸ©{âŸ¨citationâŸ©, âŸ¨key1âŸ© = {âŸ¨value1âŸ©}, âŸ¨key2âŸ© = {âŸ¨value2âŸ©},...} å…¶ä¸­âŸ¨typeâŸ© ä¸ºæ–‡çŒ®çš„ç±»åˆ«ï¼Œå¦‚article ä¸ºå­¦æœ¯è®ºæ–‡ï¼Œbook ä¸ºä¹¦ç±ï¼Œincollection ä¸ºè®ºæ–‡é›†ä¸­çš„æŸä¸€ç¯‡ï¼Œç­‰ç­‰ã€‚ âŸ¨citationâŸ© ä¸º\\cite å‘½ä»¤ä½¿ç”¨çš„æ–‡çŒ®æ ‡ç­¾ã€‚åœ¨âŸ¨citationâŸ© ä¹‹åä¸ºæ¡ç›®é‡Œçš„å„ä¸ªå­—æ®µï¼Œä»¥âŸ¨keyâŸ© = {âŸ¨valueâŸ©} çš„å½¢å¼ç»„ç»‡ã€‚ æˆ‘ä»¬åœ¨æ­¤ç®€å•åˆ—ä¸¾å­¦æœ¯è®ºæ–‡é‡Œä½¿ç”¨è¾ƒå¤šçš„BIBTEX æ–‡çŒ®æ¡ç›®ç±»åˆ«ï¼š article å­¦æœ¯è®ºæ–‡ï¼Œå¿…éœ€å­—æ®µæœ‰author, title, journal, year; å¯é€‰å­—æ®µåŒ…æ‹¬volume, number,pages, doi ç­‰ï¼› book ä¹¦ç±ï¼Œå¿…éœ€å­—æ®µæœ‰author/editor, title, publisher, year; å¯é€‰å­—æ®µåŒ…æ‹¬volume/number,series, address ç­‰ï¼› incollection è®ºæ–‡é›†ä¸­çš„ä¸€ç¯‡ï¼Œå¿…éœ€å­—æ®µæœ‰author, title,booktitle, publisher, year; å¯é€‰å­—æ®µåŒ…æ‹¬editor, volume/number, chapter, pages, address ç­‰ï¼› inbook ä¹¦ä¸­çš„ä¸€ç« ï¼Œå¿…éœ€å­—æ®µæœ‰author/editor, title,chapter/pages, publisher, year; å¯é€‰å­—æ®µåŒ…æ‹¬volume/number, series, address ç­‰ã€‚ å…·ä½“çš„ä½¿ç”¨ï¼š åœ¨å¯¼è¨€åŒºè®¾ç½®å‚è€ƒæ–‡çŒ®çš„æ ¼å¼ 1234\\bibliographystyle{plain}%plain unsrt alpha abbrv\\bibliographystyle[round]{plain}% å¼•ç”¨çš„æ‹¬å·å˜ä¸ºåœ†æ‹¬å· åœ¨æ­£æ–‡åŒºè®¾ç½®å‚è€ƒæ–‡çŒ® 1234567%æ­£æ–‡åŒº(æ–‡ç¨¿åŒº)\\begin{document} å¼•ç”¨ä¸€ä¸ªæ— äººè½¦çš„æ–‡çŒ®\\cite{__2021} \\bibliography{test} % å¯ä»¥ä¸å†™æ‰©å±•å\\end{document} ç„¶åbibtex.exeä¼šç¼–è¯‘.auxçš„è¾…åŠ©æ–‡ä»¶ï¼Œæ ¹æ®\\citationåœ¨.bibæ–‡ä»¶ä¸­é€‰æ‹©æŒ‡å®šçš„å‚è€ƒæ–‡çŒ®ï¼Œå¹¶æŒ‡å®šçš„å‚è€ƒæ–‡çŒ®æŒ‰ç…§æŒ‡å®šçš„æ ·å¼è¿›è¡Œæ’ç‰ˆï¼Œç”Ÿæˆå¦ä¸€ä¸ª.bblè¾…åŠ©æ–‡ä»¶ã€‚ \\cite {xxx}ï¼Œå¼•ç”¨çš„æ ‡å¿—ä¸ºä¸‹å›¾æ‰€ç¤ºã€‚ ä½¿ç”¨googleçš„ç›¸åº”åŠŸèƒ½æ¥å®ç°æ•°æ®åº“çš„ç»´æŠ¤ã€‚ åœ¨æœç´¢ç»“æœä¸­æ‰“å¼€å¼•ç”¨é“¾æ¥ã€‚ æ‰“å¼€bibtexå¯ä»¥å¾—åˆ°è¯¥æ–‡ä»¶å¯¹äºçš„bibtexæ•°æ®ã€‚ å°†ç”Ÿæˆçš„bibtexæ•°æ®copyåˆ°æ–‡çŒ®æ•°æ®åº“ä¸­å³å¯ã€‚ ä½¿ç”¨çŸ¥ç½‘å¯¼å…¥æ•°æ®ï¼Œéœ€è¦å¯¼å…¥zoteroçš„FireFoxæµè§ˆå™¨ã€‚ 1.æ‰“å¼€æµè§ˆå™¨çš„å…³è”æ’ä»¶ï¼› 2.é€‰æ‹©éœ€è¦çš„æ–‡çŒ®ã€‚ 3.åœ¨Zoteroé‡Œé€‰æ‹©å¯¼å‡ºçš„æ–‡çŒ®ï¼Œæ¥æ‰§è¡Œå¯¼å‡ºæ¡ç›®çš„æ“ä½œã€‚ 4.æ‰“å¼€test.bibæ–‡ä»¶ 5.å¼•ç”¨ä¹‹åçš„æ’ç‰ˆå¦‚ä¸‹ï¼š 1234567%æ­£æ–‡åŒº(æ–‡ç¨¿åŒº)\\begin{document} å¼•ç”¨ä¸€ä¸ªæ— äººè½¦çš„æ–‡çŒ®\\cite{__2021} \\bibliography{test} % å¯ä»¥ä¸å†™æ‰©å±•å\\end{document} é»˜è®¤åªèƒ½æ˜¾ç¤ºå¯¼å…¥æ•°æ®åº“å†…å·²ç»å¼•ç”¨çš„æ–‡çŒ®ã€‚ å¯¹äºè¿˜æœªå¼•ç”¨çš„æ–‡çŒ®ï¼Œå¯ä»¥ä½¿ç”¨\\nocite{}æ¥æ˜¾ç¤ºã€‚ 12\\nocite{*} % è¡¨ç¤ºæ‰€æœ‰æœªå¼•ç”¨çš„å‚è€ƒæ–‡çŒ®\\notice{xxx} % ç‰¹å®šçš„æœªå¼•ç”¨çš„å‚è€ƒæ–‡çŒ® ç‰¹åˆ«æ³¨æ„ï¼Œé‡æ–°ç¼–è¯‘çš„æ—¶å€™è¦æ‰‹åŠ¨åˆ é™¤ä¹‹å‰çš„å‚è€ƒæ–‡çŒ®ï¼Œå¦åˆ™ç¼–è¯‘å®Œä¹‹åæ²¡æœ‰å˜åŒ–ã€‚ 12345678%æ­£æ–‡åŒº(æ–‡ç¨¿åŒº)\\begin{document} å¼•ç”¨ä¸€ä¸ªæ— äººè½¦çš„æ–‡çŒ®\\cite{__2021} \\nocite{*} \\bibliography{test} % å¯ä»¥ä¸å†™æ‰©å±•å\\end{document} è¾“å‡ºçš„ç»“æœå¦‚ä¸‹ï¼š ä½¿ç”¨BibLaTexæ–‡ä»¶è¿›è¡Œå‚è€ƒæ–‡çŒ®ç®¡ç†biblatex å®åŒ…æ˜¯ä¸€å¥—åŸºäºLATEX å®å‘½ä»¤çš„å‚è€ƒæ–‡çŒ®è§£å†³æ–¹æ¡ˆï¼Œæä¾›äº†ä¾¿æ·çš„æ ¼å¼æ§åˆ¶å’Œå¼ºå¤§çš„æ’åºã€åˆ†ç±»ã€ç­›é€‰ã€å¤šæ–‡çŒ®è¡¨ç­‰åŠŸèƒ½ã€‚biblatex å®åŒ…ä¹Ÿå› å…¶å¯¹UTF-8 å’Œä¸­æ–‡å‚è€ƒæ–‡çŒ®çš„è‰¯å¥½æ”¯æŒï¼Œè¢«å›½å†…è¾ƒå¤šLATEX æ¨¡æ¿é‡‡ç”¨ã€‚ æ–°çš„TEXå‚è€ƒæ–‡çŒ®æ’ç‰ˆå¼•æ“biblatex/ biberæ ·å¼æ–‡ä»¶(å‚è€ƒæ–‡çŒ®æ ·å¼æ–‡ä»¶â€”bbxæ–‡ä»¶ï¼Œå¼•ç”¨æ ·å¼æ–‡ä»¶â€”cbxæ–‡ä»¶)ä½¿ç”¨LATExç¼–å†™æ”¯æŒæ ¹æ®æœ¬åœ°åŒ–æ’ç‰ˆï¼Œå¦‚: 12biber -l zh__pinyin texfile %ç”¨äºæŒ‡å®šæŒ‰æ‹¼éŸ³æ’åºbiber -l zh__stroke texfile %ç”¨äºæŒ‰ç¬”ç”»æ’åº é…ç½®ç¼–è¯‘å™¨ï¼Œå°†é»˜è®¤çš„æ–‡çŒ®å·¥å…·è®¾ç½®ä¸ºBiberã€‚ é¦–å…ˆæ˜¯åœ¨å¯¼è¨€åŒºè°ƒç”¨biblatex å®åŒ…ã€‚å®åŒ…æ”¯æŒä»¥âŸ¨keyâŸ©=âŸ¨valueâŸ© å½¢å¼æŒ‡å®šé€‰é¡¹ï¼ŒåŒ…æ‹¬å‚è€ƒæ–‡çŒ®æ ·å¼styleã€å‚è€ƒæ–‡çŒ®è‘—å½•æ’åºçš„è§„åˆ™sorting ç­‰ã€‚ 1\\usepackage[style=numeric,backend=biber]{biblatex} æ¥ç€åœ¨å¯¼è¨€åŒºä½¿ç”¨\\addbibresource å‘½ä»¤ä¸ºbiblatex å¼•å…¥å‚è€ƒæ–‡çŒ®æ•°æ®åº“ã€‚ä¸åŸºäºBIBTEXçš„ä¼ ç»Ÿæ–¹å¼ä¸åŒçš„æ˜¯ï¼Œè¿™é‡Œéœ€è¦å†™å®Œæ•´çš„æ–‡ä»¶åã€‚ 1\\addbibresource{test.bib} åœ¨æ­£æ–‡ä¸­ä½¿ç”¨\\cite å‘½ä»¤å¼•ç”¨å‚è€ƒæ–‡çŒ®ã€‚é™¤æ­¤ä¹‹å¤–è¿˜å¯ä»¥ä½¿ç”¨ä¸°å¯Œçš„å‘½ä»¤è¾¾åˆ°ä¸åŒçš„å¼•ç”¨æ•ˆæœï¼Œ å¦‚\\citeauthor å’Œ\\citeyear åˆ†åˆ«å•ç‹¬å¼•ç”¨ä½œè€…å’Œå¹´ä»½ï¼Œ \\textcite å’Œ\\parenciteåˆ†åˆ«ç±»ä¼¼natbib å®åŒ…æä¾›çš„\\citet å’Œ\\citep å‘½ä»¤ï¼Œä»¥åŠè„šæ³¨å¼å¼•ç”¨\\footcite ç­‰ã€‚ æœ€ååœ¨éœ€è¦æ’ç‰ˆå‚è€ƒæ–‡çŒ®çš„ä½ç½®ä½¿ç”¨å‘½ä»¤\\printbibliography é»˜è®¤çš„titleæ˜¯è‹±æ–‡çš„Referenceï¼Œå¯ä»¥é€šè¿‡å¢åŠ å¯é€‰å‚æ•°æ¥ä¿®æ”¹ã€‚ ```latex\\printbibliography[title={å‚è€ƒæ–‡çŒ®}] 123456789101112 &gt; é‡æ–°ç¼–è¯‘æ—¶ï¼Œè¦æ¸…é™¤ä¸Šä¸€æ¬¡ç”Ÿæˆçš„è¾…åŠ©æ–‡ä»¶ã€‚- **å¼€æºçš„æ ·å¼æ–‡ä»¶**https://gitlab.com/CasperVector/biblatex-caspervector - å…ˆå°†æ ¼å¼æ–‡ä»¶æ‹·è´åˆ°å½“å‰å·¥ä½œç›®å½•ä¸­ã€‚ ![](https://cdn.jsdelivr.net/gh/houdezaiwu2019/image-bed/latex/202202072320093.png) ```latex \\usepackage[style=caspervector,backend=biber,utf8]{biblatex} % ä¿®æ”¹å¯¼è¨€åŒºçš„æ–‡ä»¶ï¼Œä½¿å¾—å¼•ç”¨caspervectoræ ·å¼ ä½†æ˜¯æ–‡ç« æ˜¯ä¸­è‹±æ–‡æ··æ’çš„ï¼Œéœ€è¦ä¿®æ”¹biber.exeçš„ç›¸å…³é…ç½®ã€‚ å¹¶ä¸”ä¿®æ”¹å¯¼è¨€åŒºçš„å®åŒ…é…ç½®ã€‚ 12345678\\usepackage[style=caspervector,backend=biber,utf8,sorting=centy]{biblatex}% sorting=centy å°±æ˜¯æŒ‰å…ˆè‹±æ–‡ã€å†ä¸­æ–‡ã€å†å§“åã€å†æ ‡é¢˜ã€å†å‡ºç‰ˆå¹´ä»½çš„é¡ºåºè¿›è¡Œæ’åº% câ€”â€”chinese ä¸­æ–‡% eâ€”â€”English è‹±æ–‡% nâ€”â€”name ä½œè€…å§“å% tâ€”â€”title æ–‡çŒ®æ ‡é¢˜% yâ€”â€”year å‡ºç‰ˆå¹´ä»½ è¿™é‡Œéœ€è¦è¿ç»­ç¼–è¯‘ä¸¤æ¬¡ï¼Œæ¥äº§ç”Ÿæ­£ç¡®çš„ç¼–å·ã€‚ ä½¿ç”¨.batè¿›è¡Œæ‰¹å¤„ç†ç¼–è¯‘æµç¨‹ã€‚ LaTeXè‡ªå®šä¹‰å‘½ä»¤å’Œç¯å¢ƒ\\newcommandä¸€å®šä¹‰å‘½ä»¤å‘½ä»¤åªèƒ½ç”±å­—æ¯ç»„æˆ,ä¸èƒ½ä»¥ \\endå¼€å¤´ 1\\newcommand&lt;å‘½ä»¤&gt;[&lt;å‚æ•°ä¸ªæ•°&gt;][&lt;é¦–å‚æ•°é»˜è®¤å€¼&gt;]{&lt;å…·ä½“å®šä¹‰&gt;} \\newcommandå¯ä»¥æ˜¯ç®€å•å­—ç¬¦ä¸²æ›¿æ¢12%ä¾‹å¦‚:ä½¿ç”¨\\PRCç›¸å½“äº People 's Republic of \\emph{China}è¿™ä¸€ä¸²å†…å®¹\\newcommand \\PRC{People's Republic of \\emph{china}} \\newcommandä¹Ÿå¯ä»¥ä½¿ç”¨å‚æ•°1234567891011%å‚æ•°ä¸ªæ•°å¯ä»¥ä»1åˆ°9,ä½¿ç”¨æ—¶ç”¨#1,#2,..... .,#9è¡¨ç¤º\\newcommand \\ loves[2]{#1 å–œæ¬¢#2}\\newcommand \\hatedby[2]{#2ä¸å—#1å–œæ¬¢}\\begin{document}\\loves{çŒ«å„¿}{é±¼}\\hatedby{çŒ«å„¿}{èåœ}\\end{document}% çŒ«å„¿å–œæ¬¢é±¼% èåœä¸å—çŒ«å„¿å–œæ¬¢ \\newcommandçš„å‚æ•°ä¹Ÿå¯ä»¥æœ‰é»˜è®¤å€¼123456789%æŒ‡å®šå‚æ•°ä¸ªæ•°çš„åŒæ—¶æŒ‡å®šäº†é¦–ä¸ªå‚æ•°çš„é»˜è®¤å€¼ï¼Œé‚£ä¹ˆè¿™ä¸ªå‘½ä»¤çš„%ç¬¬ä¸€ä¸ªå‚æ•°å°±æˆä¸ºå¯é€‰çš„å‚æ•°(è¦ä½¿ç”¨ä¸­æ‹¬å·æŒ‡å®š)\\newcommand \\love[3][å–œæ¬¢]{#2#1#3}\\begin{document}\\love[æœ€çˆ±]{çŒ«å„¿}{é±¼}\\end{document}% çŒ«å„¿æœ€çˆ±é±¼ \\renewcommand-é‡å®šä¹‰å‘½ä»¤1234%ä¸ \\newcommand å‘½ä»¤ä½œç”¨å’Œç”¨æ³•ç›¸åŒ,ä½†åªèƒ½ç”¨äºå·²æœ‰å‘½ä»¤% \\renewcommand&lt;å‘½ä»¤&gt;[&lt;å‚æ•°ä¸ªæ•°&gt;][&lt;é¦–å‚æ•°é»˜è®¤å€¼&gt;]{&lt;å…·ä½“å®šä¹‰&gt;}\\renewcommand\\abstractname{å†…å®¹ç®€ä»‹}% å°†æ‘˜è¦çš„åç§°æ”¹ä¸ºå†…å®¹ç®€ä»‹ æ³¨æ„ï¼Œè¯¥å‘½ä»¤åªèƒ½ä¿®æ”¹å·²ç»å®šä¹‰çš„å‘½ä»¤ï¼Œä¸èƒ½ä¿®æ”¹è¿˜æ²¡æœ‰çš„å‘½ä»¤ï¼Œå…¶ä»–åœ°æ–¹çš„ä½¿ç”¨æ–¹æ³•ç›¸ä¼¼ã€‚ å®šä¹‰å’Œé‡å®šä¹‰ç¯å¢ƒ12345% åŸºæœ¬ç”¨æ³•å’Œé‡å®šä¹‰å‘½ä»¤ç±»ä¼¼\\newenvironment{&lt;ç¯å¢ƒåç§°&gt;}[&lt;å‚æ•°ä¸ªæ•°&gt;][&lt;é¦–å‚æ•°é»˜è®¤å€¼&gt;] {&lt;ç¯å¢ƒå‰å®šä¹‰&gt;}{&lt;ç¯å¢ƒåå®šä¹‰&gt;}\\renewenvironment{&lt;ç¯å¢ƒåç§°&gt;}[&lt;å‚æ•°ä¸ªæ•°&gt;][&lt;é¦–å‚æ•°é»˜è®¤å€¼&gt;]% {&lt;ç¯å¢ƒå‰å®šä¹‰&gt;}{&lt;ç¯å¢ƒåå®šä¹‰&gt;} ä¸ºbookç±»ä¸­å®šä¹‰æ‘˜è¦( abstract)ç¯å¢ƒ 12345678910111213% å¯¼è¨€\\newenvironment{myabstract}[1][æ‘˜è¦]%{\\small \\begin{center}\\bfseries #1 \\end{center}% \\begin{quotation}}%{\\end{quotation}}% æ­£æ–‡\\begin{document}\\begin{myabstract}[æˆ‘çš„æ‘˜è¦]% æˆ‘çš„æ‘˜è¦ -&gt; #1å‚æ•° è¿™æ˜¯ä¸€æ®µè‡ªå®šä¹‰æ ¼å¼çš„æ‘˜è¦...\\end{document} é‡å®šä¹‰å‚æ•°çš„åµŒå¥—ä½¿ç”¨ï¼š 123456789101112131415% ç¯å¢ƒå‚æ•°åªæœ‰&lt;ç¯å¢ƒå‰å®šä¹‰&gt;ä¸­å¯ä»¥ä½¿ç”¨å‚æ•°ï¼Œ% &lt;ç¯å¢ƒåå®šä¹‰&gt;ä¸­ä¸èƒ½å†ä½¿ç”¨ç¯å¢ƒå‚æ•°ã€‚% å¦‚æœéœ€è¦ï¼Œå¯ä»¥å…ˆæŠŠå‰é¢å¾—åˆ°çš„å‚æ•°ä¿å­˜åœ¨ä¸€ä¸ªå‘½ä»¤ä¸­ï¼Œåœ¨åé¢ä½¿ç”¨:\\newenvironment{Quotation}[1]%{\\newcommand \\quotesource{#1}% \\begin{quotation}}% {\\par \\hfill--- ã€Štextit{\\quotesource}ã€‹% \\end{quotation}} % æ­£æ–‡\\begin{document} \\begin{Quotation}{æ˜“$\\cdot$ä¹¾} åˆä¹,æ½œé¾™å‹¿ç”¨ã€‚ \\end{Quotation}.\\end{document} æ€»ç»“ï¼š å®šä¹‰å‘½ä»¤å’Œç¯å¢ƒæ˜¯è¿›è¡ŒLaTeXæ ¼å¼å®šåˆ¶ã€è¾¾æˆå†…å®¹ä¸æ ¼å¼åˆ†ç¦»ä¸”æ ‡çš„åˆ©å™¨ã€‚ ä½¿ç”¨è‡ªå®šä¹‰çš„å‘½ä»¤å’Œç¯å¢ƒæŠŠå­—ä½“ã€å­—å·ã€ç¼©è¿›ã€å¯¹é½ã€é—´è·ç­‰å„ç§çç»†çš„å†…å®¹åŒ…è£…èµ·æ¥ï¼Œèµ‹ä»¥ä¸€ä¸ªæœ‰æ„ä¹‰çš„åå­—,å¯ä»¥ä½¿æ–‡æŒ¡ç»“æ„æ¸…æ™°ã€ä»£ç æ•´æ´ã€æ˜“äºç»´æŠ¤ã€‚ åœ¨ä½¿ç”¨å®å®šä¹‰çš„åŠŸèƒ½æ—¶ï¼Œè¦ç»¼åˆåˆ©ç”¨å„ç§å·²æœ‰çš„å‘½ä»¤ã€ç¯å¢ƒã€å˜é‡ç­‰åŠŸèƒ½ï¼Œäº‹å®ä¸Šï¼Œå‰é¢æ‰€ä»‹ç»çš„é•¿åº¦å˜é‡ä¸ç›’å­ã€å­—ä½“å­—å·ç­‰å†…å®¹ï¼Œå¤§å¤šå¹¶ä¸•ç›´æ¥å‡ºç°åœ¨æ–‡æ¡£æ­£æ–‡å²ï¼Œè€Œä¸»è¦éƒ½æ˜¯ç”¨åœ¨å®ç°å„ç§ç»“æ„åŒ–çš„å®å®šä¹‰é‡Œã€‚ é—®é¢˜æ±‡æ€» ä¸­æ–‡ä¹±ç é—®é¢˜ã€‚åœ¨ç½‘ä¸Šä¸‹è½½äº†ä¸€ä¸ªä¸­æ–‡æ¨¡æ¿ï¼Œè·‘èµ·æ¥æ²¡é—®é¢˜ï¼Œè¯­å¥æµ‹è¯•ä¹Ÿæ²¡æœ‰é—®é¢˜ã€‚ä½†æ˜¯åœ¨æˆ‘çš„æ–‡ä»¶é‡Œå´ä¸€å†å‡ºç°ä¹±ç ã€‚ åŸå› ï¼šç¼–ç é—®é¢˜ã€‚.texæ–‡ä»¶è¦ä»¥utf-8æ ¼å¼å­˜å‚¨ã€‚ç„¶åå¯¼è¨€åŒºåŠ å…¥ï¼š 1\\usepackage[UTF8,noindent]{ctex} ç¼–è¯‘å™¨çš„é…ç½®ã€‚å³ä¾§çš„Default compileré»˜è®¤å€¼æ˜¯pdflatexã€‚è¿™ä¸ªå¹¶ä¸æ”¯æŒä¸­æ–‡çš„ã€‚å› æ­¤å°†å…¶è®¾ç½®ä¸ºxelatexã€‚ æ›´å¤šæ•™ç¨‹è¯·è§https://www.bilibili.com/video/BV1Zh411y7ps?p=2","link":"/2022/02/08/Latex/Latex%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B(%E4%BA%8C)/"},{"title":"Ch1-Ch2 æ¦‚è¿°å’Œé¢„å¤‡çŸ¥è¯†","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦è®²è§£çš„æ˜¯è§†è§‰SLAMçš„ç¬¬ä¸€ç« å’Œç¬¬äºŒç« çš„å†…å®¹ï¼Œä¸»è¦ä»‹ç»äº†SLAMæ˜¯ä»€ä¹ˆï¼Œæœ‰å‡ éƒ¨åˆ†ç»„æˆï¼Œæœ¬ä¹¦ä¸»è¦ä»‹ç»çš„ä¸»è¦çš„å†…å®¹ç­‰ã€‚å¯¹äºCmakeå’Œç›¸å…³çš„ä½œä¸šåé¢è¿˜ä¼šæœ‰ä¸€äº›å­¦ä¹ çš„è¡¥å……ã€‚ è¯¾ç¨‹å†…å®¹ä¸é¢„å¤‡çŸ¥è¯†SLAMçš„åº”ç”¨å®ä¾‹SLAMæ˜¯åšä»€ä¹ˆçš„ï¼Ÿ å®¤å†…å®¤å¤–çš„å®šä½è¿‡ç¨‹ å¯¹äºè§†è§‰SLAMå…¶å®æ˜¯é€šè¿‡ä½¿ç”¨ç›¸æœºæœ¬èº«çš„æˆåƒæ¥è¿›è¡Œä½ç½®çš„ä¼°è®¡ï¼Œé€šè¿‡æå–ç›¸å…³çš„ç‰¹å¾ç‚¹ï¼Œæ¥åæ¨ç›¸æœºçš„å§¿æ€çš„ã€‚æœ¬è¯¾ç¨‹ä¸»è¦æ¢ç´¢çš„æ˜¯ï¼Œè¿™äº›ç‚¹æ˜¯å¦‚ä½•æå–çš„ï¼Œä»¥åŠå¦‚ä½•æ ¹æ®ç‚¹çš„ä¿¡æ¯æ¥åæ¨ç›¸æœºçš„å§¿æ€ä¿¡æ¯ã€‚ å½“ç„¶ï¼Œå¯ä»¥ä½¿ç”¨GPSæ¿€å…‰ç­‰å…¶ä»–çš„ä¼ æ„Ÿå™¨æ¥è¿›è¡Œåˆ†æçš„ï¼Œä½†æ˜¯ç°é˜¶æ®µç›¸æœºæ˜¯å®Œå…¨å¯ä»¥å®ç°ä¸Šè¿°å®šä½çš„è¿‡ç¨‹çš„ã€‚ ç¨€ç–-åŠç¨ å¯†é‡å»º å¦‚å›¾å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„åŠç¨ å¯†å»ºå›¾semi-denseï¼Œè¿™æ ·çš„å·¥ä½œä¸»è¦æ˜¯ä½¿ç”¨å•ç›®ç›¸æœºç­‰å»‰ä»·çš„ç›¸æœºæ¥å®ç°çš„ã€‚ ç¨ å¯†é‡å»º ä½¿ç”¨çš„æ˜¯æ¯”è¾ƒæ˜‚è´µçš„RGBDç›¸æœºæ¥å®ç°çš„ï¼Œæ—¢å¯ä»¥é‡‡é›†åˆ°å›¾åƒä¹Ÿå¯ä»¥é‡‡é›†åˆ°æ·±åº¦ä¿¡æ¯ã€‚ æ€»ç»“ï¼šSLAMå¯ä»¥åšçš„å°±æ˜¯å®šä½å’Œç¯å¢ƒé‡å»ºã€‚ SLAMå¯ä»¥ç”¨åœ¨ä»€ä¹ˆåœ°æ–¹ï¼Ÿ æ‰‹æŒè®¾å¤‡çš„å®šä½ï¼› è‡ªåŠ¨é©¾é©¶æ±½è½¦ï¼›SLAMçš„ç²¾åº¦è¦æ¯”GPSæï¼ŒGPSä¸€èˆ¬å¯ä»¥è¾¾åˆ°10må·¦å³ã€‚SLAMçš„å®šä½ç²¾åº¦åœ¨5cmï¼Œä½†æ˜¯è¿™ä¸ªå—åˆ°ç›¸æœºç²¾åº¦çš„å½±å“ã€‚ ARå¢å¼ºç°å®ã€‚ è¯¾ç¨‹å†…å®¹ SLAMï¼šSimultaneous Localization and Mappingï¼Œå³åŒæ—¶å®šä½å’Œåœ°å›¾æ„å»ºã€‚ å®ƒæ˜¯æŒ‡æ­è½½ç‰¹å®šçš„ä¼ æ„Ÿå™¨çš„ä¸»ä½“ï¼Œåœ¨æ²¡æœ‰ç¯å¢ƒå…ˆéªŒä¿¡æ¯çš„æƒ…å†µä¸‹ï¼Œäºè¿åŠ¨çš„è¿‡ç¨‹å»ºç«‹ç¯å¢ƒæ¨¡å‹ï¼ŒåŒæ—¶ä¼°è®¡è‡ªå·±çš„è¿åŠ¨ã€‚å¯¹äºä»¥ç›¸æœºä¸ºä¸»ä½“ä¼ æ„Ÿå™¨çš„ç³»ç»Ÿï¼Œè¢«ç§°ä¸ºè§†è§‰SLAMã€‚ SLAMèƒŒåçš„æ•°å­¦çŸ¥è¯†ï¼Œä¸»è¦æ˜¯å‰å…­ç« çš„åœ¨è®²è§£ï¼Œä¸»è¦æœ‰ä¸‰ç»´ç©ºé—´çš„åˆšä½“è¿åŠ¨ï¼Œæç¾¤å’Œæä»£æ•°ã€éçº¿æ€§ä¼˜åŒ–ã€‚ SLAMèƒŒåçš„è®¡ç®—æœºè§†è§‰ï¼Œä¸»è¦æ˜¯ä½äº”ç« çš„ç›¸æœºæ¨¡å‹ï¼ŒPCLå’ŒOpencvç­‰ã€‚ å·¥ç¨‹å®è·µä¸»è¦æ˜¯åä¸ƒç« çš„å†…å®¹ï¼Œä¸»è¦æœ‰è§†è§‰é‡Œç¨‹è®¡VIOã€åç«¯ã€å›ç¯æ£€æµ‹å’Œå»ºå›¾ã€‚ æ•™ææ¨èï¼š è§†è§‰SLAMåå››è®²ï¼Œæ¯”è¾ƒæµ…æ˜¾ï¼Œå®¹æ˜“å…¥é—¨ã€‚ å¤šè§†å›¾å‡ ä½•MVGï¼Œæ¯”è¾ƒå…¨é¢çš„è®¡ç®—æœºå‡ ä½•çš„ä¸€æœ¬ä¹¦ï¼Œå¤ªå…¨é¢äº†ï¼Œä¼šæ·¹æ²¡åœ¨ä¸€äº›ç»†èŠ‚ä¸­ï¼Œå¯¼è‡´æ¯”è¾ƒéš¾ä»¥ç†è§£ã€‚ æœºå™¨äººçŠ¶æ€ä¼°è®¡ï¼Œä½†æ˜¯æ¯”è¾ƒåroboticï¼Œåä¼°è®¡ï¼Œè§†è§‰çš„ä¸œè¥¿æ¯”è¾ƒå°‘ï¼Œæ•°å­¦å…¬å¼æå…¶å¤šï¼Œå¾ˆæ·±åˆ»ã€‚ æœ¬é—¨çœ‹å¼ºè°ƒåœ¨ç†è§£å…¬å¼çš„åŸºç¡€ä¸Šè¿›è¡Œä»£ç çš„å®è·µã€‚ å…¶ä¸­ï¼Œç¬¬ä¹è®²æ˜¯ä¸ªå·¥ç¨‹é—®é¢˜ï¼Œè‡ªå·±ç…§ç€æ•²ä»£ç å°±å¯ä»¥ï¼Œç¬¬åå››è®²æ˜¯å±•æœ›ã€‚ é¢„å¤‡çŸ¥è¯†ä¸è¯¾ç¨‹ä½¿ç”¨çš„ç¯å¢ƒ æ•°å­¦ï¼šé«˜ç­‰æ•°å­¦ã€çº¿æ€§ä»£æ•°ï¼ˆçŸ©é˜µè®ºï¼‰ã€æ¦‚ç‡è®º ç¼–ç¨‹ï¼šC++ã€Linuxï¼Œäº†è§£è¯­æ³•å’ŒåŸºæœ¬å‘½ä»¤å³å¯ è‹±è¯­ï¼šæ–‡çŒ®ã€æ–‡æ¡£é˜…è¯»èƒ½åŠ› ç¯å¢ƒï¼šUbuntu 16.04 åˆè¯†SLAM ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè¿™ä¸¤ä¸ªé—®é¢˜æ˜¯åŒæ—¶è§£å†³çš„ã€‚ ä¼ æ„Ÿå™¨ä¸»è¦åˆ†ä¸ºå†…ç½®çš„å’Œå¤–ç½®çš„ã€‚ å¤–ç½®çš„ä¼ æ„Ÿå™¨ä¼šå¯¹ä½¿ç”¨èŒƒå›´æœ‰é™åˆ¶ï¼Œå¯¹ä½¿ç”¨çš„ç¯å¢ƒæœ‰å¤šçš„ä¾èµ–ï¼Œè€Œå†…ç½®çš„ç›¸å¯¹çš„æ¯”è¾ƒè‡ªç”±ä¸€äº›ã€‚ å†…ç½®çš„ä¼ æ„Ÿå™¨æµ‹é‡çš„æ•°æ®æ¯”è¾ƒç®€ä»‹ï¼Œæ˜¯å°†æµ‹é‡çš„æ•°æ®é€šè¿‡ä¼ æ„Ÿå™¨æ¨¡å‹è¿›è¡Œå¤„ç†æ‰å¯ä»¥å¾—åˆ°æƒ³è¦çš„æ•°æ®ï¼Œè€Œå¤–ç½®ä¼ æ„Ÿå™¨å¦‚GPSï¼Œå¯ä»¥ç›´æ¥è·å–ã€‚ ç›¸æœºçš„ç‰¹ç‚¹æ˜¯ä¾¿å®œï¼Œè½»ä¾¿ï¼Œä¿¡æ¯ä¸°å¯Œï¼Œé€‚åˆæ°‘ç”¨ã€‚ æ·±åº¦ç›¸æœºï¼šä¼šäº§ç”Ÿä¸¤ä¸ªå›¾ï¼ŒRGBå’Œæ·±åº¦å›¾ï¼Œé€šè¿‡ç‰©ç†æ–¹æ³•æ¥è·å–æ·±åº¦ä¿¡æ¯ï¼Œå¯ä»¥è·å–ç«‹ä½“ä¿¡æ¯ã€‚ ä¸»è¦ä½¿ç”¨çš„æ˜¯TOFå’Œçº¢å¤–ç»“æ„å…‰çš„æ–¹æ³•ï¼› ä½†æ˜¯å…¶æµ‹é‡çš„è·ç¦»å¯èƒ½è¾ƒçŸ­ï¼Œå…¶æ¬¡å°±æ˜¯å™ªå£°å¤§å®¹æ˜“å—åˆ°æ—¥å…‰çš„å¹²æ‰°ï¼Œæ— æ³•æµ‹é‡é€è§†çš„ç‰©ä½“ï¼› æ‰€ä»¥å…¶ä¸»è¦åœ¨å®¤å†…ä½¿ç”¨ï¼Œå®¤å¤–è¾ƒéš¾åº”ç”¨ã€‚ åŒç›®ç›¸æœºï¼šä¼šæœ‰ä¸¤ä¸ªå›¾ï¼Œé€šè¿‡è§†å·®æ¥è®¡ç®—æ·±åº¦ä¿¡æ¯ï¼Œå¯ä»¥è·å–ç«‹ä½“çš„ä¿¡æ¯ã€‚ æ˜¯é€šè¿‡ä¸¤ä¸ªç›¸æœºä¹‹é—´çš„è·ç¦»ï¼ŒåŸºçº¿æ¥ç¡®å®šçš„ï¼› å…¶æµ‹é‡çš„èŒƒå›´ä¹Ÿæ˜¯å—åˆ°åŸºçº¿å’Œé•œå¤´åˆ†è¾¨ç‡çš„çš„å½±å“ï¼› å¯¹è®¡ç®—çš„è¦æ±‚è¾ƒé«˜ï¼Œéœ€è¦GPUåŠ é€Ÿã€‚ å•ç›®ç›¸æœºï¼šæ— æ·±åº¦ä¿¡æ¯ï¼Œéœ€è¦å…¶ä»–çš„æ‰‹æ®µæ¥ä¼°è®¡ã€‚ å°±æ˜¯è·ç¦»è¾ƒè¿‘çš„äº‹ç‰©ç§»åŠ¨é€Ÿåº¦å¿«ï¼› è¾ƒè¿œçš„äº‹ç‰©ç§»åŠ¨é€Ÿåº¦æ…¢ï¼Œè¿™æ ·å¯ä»¥è¾ƒå¥½çš„æ¥ä¼°è®¡ä½ç½®çš„ç›¸å¯¹å…³ç³»ï¼› ä½†æ˜¯ï¼Œå…¶å­˜åœ¨ä¸€å®šçš„å°ºåº¦ä¸ç¡®å®šæ€§ï¼Œå°±æ˜¯æˆ‘ä»¬ä¸çŸ¥é“å…¶è¿™æ˜¯çš„å°ºå¯¸ï¼Œåªèƒ½å¾—åˆ°ç›¸å¯¹å€¼ã€‚ æ ¹æ®è¿‘å¤„çš„äº‹ç‰©è¿åŠ¨å¿«ï¼Œè¿œå¤„çš„äº‹ç‰©è¿åŠ¨æ…¢æ¥è¿›è¡Œé—´æ¥çš„æµ‹è·ï¼Œä½†åœ¨ä¸¤å¼ å›¾ä¸Šæ•æ‰åŒä¸€ä¸ªç‰¹å¾ç‚¹æ˜¯æœ‰ç‚¹éš¾åº¦çš„ã€‚å•åŒç›®å…¶å®éƒ½æ˜¯è¿™ä¸ªåŸç† è§£å†³çŸ­è·ç¦»å’Œå°èŒƒå›´çš„æƒ…å†µæ—¶ï¼Œå¯ä»¥ä½¿ç”¨è§†è§‰é‡Œç¨‹è®¡VOï¼Œè¾“å…¥æ—¶ä¸€å¼ ä¸€å¼ çš„å›¾ç‰‡ï¼Œè¾“å‡ºä¸ºé¢„æµ‹å¾—åˆ°çš„è·ç¦»å®šä½çš„ä¿¡æ¯ã€‚ ä½†å¦‚æœæ—¶è¿œè·ç¦»é•¿æ—¶é—´çš„å®šä½å’Œå»ºå›¾çš„ï¼Œä¹‹å‰äº§ç”Ÿè¯¯å·®å’Œå™ªå£°ï¼Œéšç€ä¸–å®è·µä¼šé€æ¸çš„ç´¯ç§¯ï¼Œäº§ç”Ÿæ¼‚ç§»ï¼Œéœ€è¦åç«¯æ¥è¿›è¡Œä¼˜åŒ–ã€‚å…¶ä¸»è¦è§£å†³çš„æ˜¯ä¸€ä¸ªä¼°è®¡å’Œä¼˜åŒ–é—®é¢˜ï¼Œæ²¡æœ‰å¾ˆå¤šè®¡ç®—æœºè§†è§‰çš„å†…å®¹ã€‚ æœ€ååˆå›åˆ°èµ·å§‹ç‚¹ï¼Œæ­¤æ—¶å›æ¥ä»¥åä¸ä¸€å®šä¼šå›åˆ°åŸç‚¹ï¼Œéœ€è¦è¿›è¡Œæ£€æµ‹ï¼Œå°†åç§»çš„è½¨è¿¹å½’ä½ã€‚ æœ‰äº›åœºåˆè¿˜æ˜¯éœ€è¦å»ºå›¾ç®—æ³•ã€‚ å‰ç«¯ï¼Œå³è§†è§‰é‡Œç¨‹è®¡ï¼Œå°±æ˜¯ç”¨æ¥è®¡ç®—å’Œä¼°è®¡å›¾åƒçš„ç›¸å¯¹ä½ç½®ã€‚ åç«¯ï¼Œæ»¤æ³¢å’Œå›¾ä¼˜åŒ–ï¼Œå°±æ˜¯è¿›è¡Œå™ªå£°æ¶ˆé™¤å’Œä¼˜åŒ–è¯¯å·®çš„ã€‚ è§†è§‰SLAMæµç¨‹åŒ…æ‹¬ä»¥ä¸‹æ­¥éª¤: ä¼ æ„Ÿå™¨ä¿¡æ¯è¯»å–: åœ¨è§†è§‰SLAMä¸­ä¸»è¦ä¸ºç›¸æœºå›¾åƒä¿¡æ¯çš„è¯»å–å’Œé¢„å¤„ç†ã€‚å¦‚æœæ˜¯åœ¨æœºå™¨äººä¸­ï¼Œè¿˜å¯èƒ½æœ‰ç ç›˜ã€æƒ¯æ€§ä¼ æ„Ÿå™¨ç­‰ä¿¡æ¯çš„è¯»å–å’ŒåŒæ­¥ã€‚ è§†è§‰é‡Œç¨‹è®¡(Visual Odometry,VO): è§†è§‰é‡Œç¨‹è®¡çš„ä»»åŠ¡æ˜¯ä¼°ç®—ç›¸é‚»å›¾åƒé—´ç›¸æœºçš„è¿åŠ¨,ä»¥åŠå±€éƒ¨åœ°å›¾çš„æ ·å­ã€‚VOåˆç§°ä¸ºå‰ç«¯(Front End)ã€‚ è§†è§‰é‡Œç¨‹è®¡ä¸å¯é¿å…åœ°ä¼šå‡ºç°ç´¯ç§¯æ¼‚ç§»(Accumulating Drift)é—®é¢˜ã€‚ éœ€è¦åç«¯å’Œå›ç¯æ£€æµ‹æ¥å‡å°‘æ¼‚ç§»ç°è±¡ã€‚ å‰ç«¯çš„ä¸»è¦ä»»åŠ¡æ˜¯å›¾åƒçš„ç‰¹å¾æå–å’ŒåŒ¹é…ã€‚ åç«¯ä¼˜åŒ– (Optimization): åç«¯æ¥å—ä¸åŒæ—¶åˆ»è§†è§‰é‡Œç¨‹è®¡æµ‹é‡çš„ç›¸æœºä½å§¿ï¼Œä»¥åŠå›ç¯æ£€æµ‹çš„ä¿¡æ¯,å¯¹å®ƒä»¬è¿›è¡Œä¼˜åŒ–,å¾—åˆ°å…¨å±€ä¸€è‡´çš„è½¨è¿¹å’Œåœ°å›¾ã€‚ç”±äºæ¥åœ¨VOä¹‹åï¼Œåˆç§°ä¸ºåç«¯(Back End)ã€‚ åœ¨è§†è§‰ SLAMä¸­ï¼Œåç«¯åˆ™ä¸»è¦æ˜¯æ»¤æ³¢ä¸éçº¿æ€§ä¼˜åŒ–ç®—æ³•ã€‚ å…¶å®å°±æ˜¯çŠ¶æ€ä¼°è®¡é—®é¢˜ï¼Œæœºå™¨äººå­¦ä¸­çš„çŠ¶æ€ä¼°è®¡å’Œå› å­å›¾ä¸»è¦è§£å†³çš„å…¶å®å°±æ˜¯åç«¯çš„é—®é¢˜ã€‚ å›ç¯æ£€æµ‹ (Loop Closing): å›ç¯æ£€æµ‹åˆ¤æ–­æœºå™¨äººæ˜¯å¦åˆ°è¾¾è¿‡å…ˆå‰çš„ä½ç½®ã€‚å¦‚æœæ£€æµ‹åˆ°å›ç¯ï¼Œå®ƒä¼šæŠŠä¿¡æ¯æä¾›ç»™åç«¯è¿›è¡Œå¤„ç†ã€‚ å›ç¯æ£€æµ‹çš„æ ¸å¿ƒé—®é¢˜å°±æ˜¯å‡å°‘æ¶ˆé™¤ç”±äºæ—¶é—´æ¼‚ç§»é€ æˆçš„ç´¯ç§¯è¯¯å·® å…¶æ¬¡å°±æ˜¯å¦‚ä½•è¯†åˆ«å‡ºæ˜¯å¦å·²ç»å›åˆ°åŸç‚¹äº†ã€‚ å»ºå›¾ (Mapping): å®ƒæ ¹æ®ä¼°è®¡çš„è½¨è¿¹,å»ºç«‹ä¸ä»»åŠ¡è¦æ±‚å¯¹åº”çš„åœ°å›¾. åœ°å›¾çš„å½¢å¼åŒ…æ‹¬ï¼š åº¦é‡åœ°å›¾ï¼šç²¾ç¡®è¡¨ç¤ºåœ°å›¾ç‰©ä½“çš„ä½ç½®å…³ç³»åˆ†ä¸ºç¨€ç–å’Œç¨ å¯†ï¼Œè¿™é‡Œç¨€ç–å›¾ä»…ä»…åŒ…å°±ç‰¹å®šçš„ç‰©ä½“ä½œä¸ºè·¯æ ‡ï¼Œè€Œç¨ å¯†å›¾å°†ä¸‰ç»´ç©ºé—´ç½‘æ ¼åŒ–ï¼Œæ¯ä¸ªç½‘æ ¼ä»…ä»…æœ‰å ç”¨ã€æœªçŸ¥ã€ç©ºé—²ä¸‰ä¸ªçŠ¶æ€ã€‚ æ‹“æ‰‘åœ°å›¾ï¼šæ›´å¼ºè°ƒåœ°å›¾å…ƒç´ ä¹‹é—´çš„å…³ç³»ï¼Œæœ‰èŠ‚ç‚¹å’Œè¾¹ç»„æˆï¼Œå¹¶ä¸”ä»…ä»…è€ƒè™‘èŠ‚ç‚¹çš„è¿é€šæ€§ã€‚ â€‹ è§†è§‰SLAMçš„æ•°å­¦æè¿°è¿™é‡Œçš„æ ¸å¿ƒæ–¹ç¨‹å°±æ˜¯ä¸€ä¸ªè¿åŠ¨æ–¹ç¨‹ï¼Œä¸€ä¸ªè§‚æµ‹æ–¹ç¨‹ï¼Œä¸»è¦è§£å†³çš„å°±æ˜¯å¦‚ä½•é€šè¿‡å¸¦å™ªå£°çš„æ•°æ®ï¼Œæ¥ä¼°è®¡å†…éƒ¨çš„éšå˜é‡(å³ç¡®å®šè¿åŠ¨æ–¹ç¨‹çš„å‚æ•°) è¿™é‡Œï¼Œè®¾$x_k$ä¸ºkæ—¶åˆ»çš„ç›¸æœºçš„çŠ¶æ€ä½ç½®ï¼Œ$y_i$ ä»£è¡¨è·¯æ ‡ï¼› $z_{k,j}$ ä»£è¡¨kæ—¶åˆ»ç¬¬jä¸ªè·¯æ ‡çš„æµ‹é‡å€¼ï¼Œå…¶å¯ä»¥æ˜¯åƒç´ åœ¨ç…§ç‰‡ä¸­çš„åæ ‡ï¼ˆç›¸æœºï¼‰æˆ–æ˜¯ä¸€ä¸ªè·ç¦»å’Œè§’åº¦ä¿¡æ¯ï¼ˆæ¿€å…‰ï¼‰ï¼Œè·Ÿä¼ æ„Ÿå™¨çš„å½¢å¼æœ‰å…³ï¼› $v_{k,j}$ä¸ºæµ‹é‡å™ªå£°ã€‚ x_k \\rightarrow x_{k+1}\\\\ x_{k+1}=f(x_k,u_k) \\quad è¿åŠ¨æ–¹ç¨‹\\quad u_kä¸ºè¾“å…¥\\\\ z_{k,j}=g(x_k,y_j)+v_{k,j} \\quad æµ‹é‡æ–¹ç¨‹ $(u_k,z_{k,j}) \\rightarrow x_k,y_j$ ï¼šè¿™é‡Œå¯¹äº $x_k$ çš„ç¡®å®šç§°ä¸ºå®šä½ï¼Œå¯¹äº $y_j$ çš„ç¡®å®šç§°ä¸ºå»ºå›¾ã€‚ ä»¥ä¸‹æ˜¯é«˜åšçš„æ‰‹ç¨¿ï¼š å™ªå£°$v_{k,j}$ å¯ä»¥åˆ†ä¸ºé«˜æ–¯ç³»ç»Ÿå’Œéé«˜æ–¯ç³»ç»Ÿï¼š æœ€ç®€å•çš„çº¿æ€§é«˜æ–¯ç³»ç»Ÿï¼Œä½¿ç”¨kalman filter å°±å¯ä»¥å¾ˆå¥½çš„è§£å†³ï¼› å¯¹äºå¤æ‚éçº¿æ€§çš„é«˜æ–¯ç³»ç»Ÿï¼Œå¯ä»¥ä½¿ç”¨Extended Kalman Filteræ¥è§£å†³ï¼Œåœ¨21ä¸–çºªåˆæœŸï¼ŒEKFä¸€ç›´éƒ½æ˜¯ä¸»æµç®—æ³•ã€‚ ä½†æ˜¯EKFæœ‰ä¸¤ä¸ªä¸»è¦çš„ç¼ºç‚¹ï¼Œä¸»è¦æ˜¯çº¿æ€§åŒ–ä¹‹åçš„è¯¯å·®å’Œå™ªå£°é«˜æ–¯åŒ–çš„å‡è®¾ï¼Œäºæ˜¯å¼•å…¥äº†ç²’å­æ»¤æ³¢ç­‰ã€‚ ç°å¦‚ä»Šï¼Œæ»¤æ³¢ç®—æ³•éƒ½ä¸å¦‚å›¾ä¼˜åŒ–çš„æ–¹æ³•ï¼Œå¦‚æœè®¡ç®—æ¡ä»¶å…è®¸ï¼Œæˆ‘ä»¬å°†ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨å›¾ä¼˜åŒ–çš„æ–¹æ³•ã€‚ ä»£ç å®æˆ˜æœ¬ç« çš„ä»£ç å®åœ¨å¤ªç®€å•äº†ï¼Œå› æ­¤è¿™é‡Œå°†ä¸€äº›åŸºç¡€çŸ¥è¯†ï¼š ä¹‹å‰æˆ‘ä»¬ç¼–è¯‘å¯ä»¥ç›´æ¥ä½¿ç”¨g++ æˆ– clang (é«˜åšè¯´clangçš„æ•ˆæœæ˜¯æ¯”g++)è¦å¥½ä¸€ç‚¹çš„ï¼Œ 1234g++ helloSLAM.cpp# ä½¿ç”¨g++ç›´æ¥æ¥ç¼–è¯‘ç¨‹åºclang helloSLAM.cpp# ä½¿ç”¨clangæ¥ç¼–è¯‘ç¨‹åº ä½†æ˜¯ï¼Œå¯¹äºå¤§è§„æ¨¡çš„é¡¹ç›®ï¼Œæ¯”å¦‚é‡Œé¢åŒ…å«äº†`xxx.h ä¹‹ç±»çš„åº“æ–‡ä»¶çš„ç›´æ¥ç¼–è¯‘å°±æ˜¾å¾—éº»çƒ¦äº†ï¼Œå› æ­¤è¿™é‡Œä½¿ç”¨Cmakeç¼–è¯‘å·¥å…·ã€‚ 1234567891011121314151617181920212223# å£°æ˜è¦æ±‚çš„ cmake æœ€ä½ç‰ˆæœ¬cmake_minimum_required(VERSION 2.8)# å£°æ˜ä¸€ä¸ª cmake å·¥ç¨‹project(HelloSLAM)# è®¾ç½®ç¼–è¯‘æ¨¡å¼set(CMAKE_BUILD_TYPE &quot;Debug&quot;)# æ·»åŠ ä¸€ä¸ªå¯æ‰§è¡Œç¨‹åº# è¯­æ³•ï¼šadd_executable( ç¨‹åºå æºä»£ç æ–‡ä»¶ ï¼‰add_executable(helloSLAM helloSLAM.cpp)# æ·»åŠ helloåº“add_library(hello libHelloSLAM.cpp)# å…±äº«åº“add_library(hello_shared SHARED libHelloSLAM.cpp)# æ·»åŠ å¯æ‰§è¡Œç¨‹åºè°ƒç”¨helloåº“ä¸­å‡½æ•°add_executable(useHello useHello.cpp)# å°†åº“æ–‡ä»¶é“¾æ¥åˆ°å¯æ‰§è¡Œç¨‹åºä¸Štarget_link_libraries(useHello hello_shared) add_executable å‡½æ•°æ˜¯å°†å«æœ‰mainçš„æ–‡ä»¶ç¼–è¯‘ç§°ä¸ºå¯æ‰§è¡Œæ–‡ä»¶ add_library å‡½æ•°å°†.hæ–‡ä»¶ç¼–æˆä¸ºåº“æ–‡ä»¶ï¼Œæ–¹ä¾¿è°ƒç”¨ã€‚ target_link_librarieså°†åº“æ–‡ä»¶é“¾æ¥åˆ°å¯æ‰§è¡Œç¨‹åºä¸Šï¼Œè¿™æ ·æ‰èƒ½å…¶çœŸæ­£çš„è°ƒç”¨çš„.hæ–‡ä»¶ã€‚","link":"/2022/03/20/SLAM/ch1-ch2-%E6%A6%82%E8%BF%B0%E5%92%8C%E9%A2%84%E5%A4%87%E7%9F%A5%E8%AF%86/"},{"title":"Kalman Filterå°é¡¹ç›®","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡æ˜¯é€šè¿‡ä¸€ä¸ªä½ç½®åˆ¤æ–­çš„é¡¹ç›®ï¼Œæ¥æµ‹è¯•kalman filterçš„ç®€å•ä½¿ç”¨ï¼Œäº†è§£å…¶åœ¨opencvä¸­çš„å…·ä½“å®ç°ã€‚ å®ç°çš„ç®€å•çš„kalman filter123456789101112class KalmanFilter: kf = cv2.KalmanFilter(4, 2) kf.measurementMatrix = np.array([[1, 0, 0, 0], [0, 1, 0, 0]], np.float32) kf.transitionMatrix = np.array([[1, 0, 1, 0], [0, 1, 0, 1], [0, 0, 1, 0], [0, 0, 0, 1]], np.float32) def predict(self, coordX, coordY): ''' This function estimates the position of the object''' measured = np.array([[np.float32(coordX)], [np.float32(coordY)]]) self.kf.correct(measured) predicted = self.kf.predict() x, y = int(predicted[0]), int(predicted[1]) return x, y è¿™ä¸ªkalmanæ»¤æ³¢å™¨ä¸»è¦æ˜¯ç”¨æ¥é¢„æµ‹ä½ç½®çš„ã€‚ ç»˜åˆ¶åæ ‡ç‚¹å¹¶é¢„æµ‹ 1234567891011121314img = cv2.imread(&quot;Pysource Kalman filter/blue_background.webp&quot;)ball_positions = [(50, 100), (100, 100), (150, 100), (200, 100), (250, 100), (300, 100), (350, 100)]for pt in ball_positions: cv2.circle(img, pt, 15, (0, 20, 220), -1) # å‚æ•° ç»˜å›¾å¯¹è±¡ ä½ç½® å¤§å° é¢œè‰²BGR ç²—ç»† -1ä»£è¡¨å®å¿ƒ # ç»˜åˆ¶é¢„æµ‹ç‚¹ predicted = kf.predict(pt[0], pt[1]) cv2.circle(img, predicted, 15, (20, 220, 0), 4)cv2.imshow(&quot;Img&quot;, img)cv2.waitKey(0) 1234567891011121314# æ ¹æ®ä¸Šè¿°å€¼å‘åé¢„æµ‹10ä»£for i in range(10): predicted = kf.predict(predicted[0], predicted[1]) cv2.circle(img, predicted, 15, (20, 220, 0), 4) print(predicted)&gt;&gt;&gt;(550, 99)(600, 98)(649, 97)(698, 96)(747, 95)(796, 94)(845, 92)(894, 90)(942, 88) 123456789101112131415ball2_positions = [(4, 300), (61, 256), (116, 214), (170, 180), (225, 148), (279, 120), (332, 97), (383, 80), (434, 66), (484, 55), (535, 49), (586, 49), (634, 50),(683, 58), (731, 69), (778, 82), (824, 101), (870, 124), (917, 148),(962, 169), (1006, 212), (1051, 249), (1093, 290)]for pt in ball2_positions: cv2.circle(img, pt, 15, (0, 20, 220), -1) # å‚æ•° ç»˜å›¾å¯¹è±¡ ä½ç½® å¤§å° é¢œè‰²BGR ç²—ç»† -1ä»£è¡¨å®å¿ƒ # ç»˜åˆ¶é¢„æµ‹ç‚¹ predicted = kf.predict(pt[0], pt[1]) cv2.circle(img, predicted, 15, (20, 220, 0), 4)# æ ¹æ®ä¸Šè¿°å€¼å‘åé¢„æµ‹10ä»£for i in range(10): predicted = kf.predict(predicted[0], predicted[1]) cv2.circle(img, predicted, 15, (20, 220, 0), 4) print(predicted) åŒç†ï¼Œé¢„æµ‹ç¬¬äºŒä¸ªçƒçš„è½¨è¿¹ã€‚ orangeè½¨è¿¹é¢„æµ‹12# åˆ›å»ºæ©˜å­æ£€æµ‹å™¨od = OrangeDetector() 1234# å®æ—¶çš„æ£€æµ‹orangeçš„è½¨è¿¹orange_bbbox = od.detect(frame)x1, y1, x2, y2 = orange_bbboxcv2.rectangle(frame, (x1, y1), (x2, y2), (255, 0, 0), 4) ä¹‹åæˆ‘ä»¬å°†çŸ©å½¢æ¡†è½¬æ¢ä¸ºä¸­å¿ƒç‚¹ 12345678# è§†é¢‘æ’­å®Œå°±é€€å‡ºorange_bbbox = od.detect(frame)x1, y1, x2, y2 = orange_bbbox# cv2.rectangle(frame, (x1, y1), (x2, y2), (255, 0, 0), 4)# ç¡®å®šorangeçš„ä¸­å¿ƒcx = int((x1 + x2) / 2)cy = int((y1 + y2) / 2)cv2.circle(frame, (cx, cy), 20, (0, 0, 255), -1) ä»¥ä¸Šæ˜¯æ ¹æ®ç›®æ ‡æ£€æµ‹å¾—åˆ°çš„å®æ—¶orangeçš„ä½ç½®ï¼Œä¹‹åæˆ‘ä»¬æ¥ç”¨kalman filteré¢„æµ‹Orangeä½ç½®ã€‚ 123# æ»¤æ³¢å™¨é¢„æµ‹ä¸‹ä¸€æ—¶åˆ»çš„ä½ç½®predicted = kf.predict(cx, cy)cv2.circle(frame, predicted, 20, (220, 20, 0), 5) å®Œæ•´ä»£ç ï¼š 1234567891011121314151617181920212223242526272829303132333435import cv2from orange_detector import OrangeDetectorfrom kalmanfilter import KalmanFilter# è¯»å–è§†é¢‘cap = cv2.VideoCapture(&quot;Pysource Kalman filter/orange.mp4&quot;)# cap = cv2.VideoCapture(0)# åˆ›å»ºæ©˜å­æ£€æµ‹å™¨od = OrangeDetector()# åˆ›å»ºkfkf = KalmanFilter()while True: ret, frame = cap.read() if ret is False: break # è§†é¢‘æ’­å®Œå°±é€€å‡º orange_bbbox = od.detect(frame) x1, y1, x2, y2 = orange_bbbox # cv2.rectangle(frame, (x1, y1), (x2, y2), (255, 0, 0), 4) # ç¡®å®šorangeçš„ä¸­å¿ƒ cx = int((x1 + x2) / 2) cy = int((y1 + y2) / 2) cv2.circle(frame, (cx, cy), 20, (0, 0, 255), -1) # æ»¤æ³¢å™¨é¢„æµ‹ä¸‹ä¸€æ—¶åˆ»çš„ä½ç½® predicted = kf.predict(cx, cy) cv2.circle(frame, predicted, 20, (220, 20, 0), 5) # print(orange_bbbox) cv2.imshow(&quot;Frame&quot;, frame) key = cv2.waitKey(50) if key == 27: break","link":"/2022/02/13/opencv/kalman-filter%E5%B0%8F%E9%A1%B9%E7%9B%AE/"},{"title":"Object_detection_appé¡¹ç›®","text":"hljs.initHighlightingOnLoad(); æœ¬é¡¹ç›®ä¸»è¦æ˜¯åˆ©ç”¨yolov4ç›®æ ‡æ£€æµ‹ç½‘ç»œï¼Œå®ç°å¯¹å›ºå®šç›®æ ‡çš„è¯†åˆ«åŠŸèƒ½ï¼Œæœ€åå°†å…¶æ‰“åŒ…å½¢æˆ.exeæ–‡ä»¶ã€‚ä½†æ˜¯ï¼Œæœ€åç¼–è¯‘çš„è¿‡ç¨‹è¿˜æœ‰ä¸€å®šçš„bug,è¿˜æœªèƒ½å®ç°å°è£…ã€‚ åˆå§‹åŒ–ç›¸æœº12345678910cap = cv2.VideoCapture(0)# ä¿®æ”¹ç›¸æœºå‚æ•° æ•´ç†ä¿®æ”¹çš„æ˜¯ç›¸æœºçš„frameçš„H,Wcap.set(cv2.CAP_PROP_FRAME_WIDTH, 1280)cap.set(cv2.CAP_PROP_FRAME_HEIGHT, 720)while True: # å¦‚æœä¸åŠ whileå¾ªç¯çš„è¯ï¼Œç”Ÿæˆçš„ç¨‹åºä¼šä¸€é—ªè€Œè¿‡ ret, frame = cap.read() cv2.imshow(&quot;Frame&quot;, frame) cv2.waitKey(1) # å•ä½æ˜¯ms # ç­‰å¾…æ—¶é—´è®¾ä¸º0çš„è¯ï¼Œè§†åƒå¤´ä¼šä¼šé™æ­¢ï¼Œå…³é—­ä¸€æ¬¡çª—å£æ‰åˆ·æ–°ä¸€æ¬¡ å¯¼å…¥ç›®æ ‡æ£€æµ‹ç½‘ç»œ1234567# opencv DNNnet = cv2.dnn.readNet(&quot;object_detection_crash_course/dnn_model/yolov4-tiny.weights&quot;, &quot;object_detection_crash_course/dnn_model/yolov4-tiny.cfg&quot;)model = cv2.dnn_DetectionModel(net)# å¯¼å…¥æ¨¡å‹model.setInputParams(size=(320, 320), scale=1/255)# sizeè¶Šå¤§ï¼Œæ¸…æ™°åº¦è¶Šå¤§ï¼Œä½†æ˜¯å¯ä»¥é€Ÿåº¦æ¯”è¾ƒæ…¢# scaleçš„åŠŸèƒ½æ˜¯ç¼©æ”¾ [0,255]-&gt;[0,1] å¯¼å…¥ç±»åˆ«æ–‡ä»¶123456# å¯¼å…¥ç±»åˆ«æ–‡ä»¶classes=[]with open(&quot;object_detection_crash_course/dnn_model/classes.txt&quot;,&quot;r&quot;) as file_object: for class_name in file_object: class_name = class_name.strip() classes.append(class_name) ç›®æ ‡æ£€æµ‹è¿™éƒ¨åˆ†çš„ä»£ç æ”¾åˆ°ç›¸åŠ çš„whieå¾ªç¯ä¸­ï¼š 1234567891011121314151617# ç›®æ ‡æ£€æµ‹class_idx, scores, bboxs = model.detect(frame)# è¿”å›å€¼ä¾æ¬¡æ˜¯ç±»åˆ«çš„idxï¼Œ æ‰€å¾—çš„åˆ†æ•°ï¼Œ boundingboxsè¾¹ç•Œæ¡†# print(f&quot;class_idx:{class_idx}\\n scores:{scores} \\n bboxs:{bboxs}&quot;)for class_id, score, bbox in zip(class_idx, scores, bboxs): (x, y, w, h) = bbox class_name = classes[class_id] # class_name = classes[class_id[0]] # 4.4.0çš„ç‰ˆæœ¬ # ç»˜åˆ¶ç›®æ ‡æ£€æµ‹ä¸‰è§’å½¢, åœ¨çª—å£å¯¹è±¡ä¸Šç»˜åˆ¶ cv2.rectangle(frame, (x, y), (x+w, y+h), (200, 0, 50), 3) # å‚æ•°ä¸ºç»˜åˆ¶çš„å¯¹è±¡, ç»˜åˆ¶é•¿æ–¹å½¢çš„å·¦ä¸Šç‚¹åˆå³ä¸‹ç‚¹, é¢œè‰²RGB, æ¡†çš„ç²—ç»† # è¯†åˆ«çš„ç§ç±»åˆcocoæ•°æ®é›†æœ‰å…³ cv2.putText(frame, str(class_name), (x, y-5), cv2.FONT_HERSHEY_PLAIN, fontScale=2, color=(200, 0, 50), thickness=2) è®¾è®¡é¼ æ ‡ç‚¹å‡»1234567891011121314151617181920button_person = Falsedef click_button(event, x, y, flags, params): global button_person if event == cv2.EVENT_LBUTTONDOWN: # print(x, y) polygan = np.array([[(20, 20), (220, 20), (220, 70), (20, 70)]]) is_inside = cv2.pointPolygonTest(polygan, (x,y), False) if is_inside: print(&quot;inside the button&quot;) if button_person is False: button_person = True else: button_person = False # ç›¸å½“äºä¸€ä¸ªå¼€å…³ï¼Œç‚¹å‡»ä»¥ä¸‹å¼€å§‹è¯†åˆ«ï¼Œå†ç‚¹ä¸€ä¸‹å°±å…³é—­è¯†åˆ«# äº§ç”Ÿä¸€ä¸ªæ–°çš„çª—å£cv2.namedWindow(&quot;Frame&quot;)cv2.setMouseCallback(&quot;Frame&quot;, click_button) ä¹‹åå°±å¯ä»¥æ¥è®¾è®¡çª—å£çš„æ‰“å¼€çš„å¼€å…³ï¼š ç»˜åˆ¶ç±»åˆ«å­—ä½“1234567# åˆ›å»ºæŒ‰é’®# è¿™é‡Œä½¿ç”¨å¤šè¾¹è¡Œæ¥ç»˜åˆ¶polygan = np.array([[(20, 20), (220, 20), (220, 70), (20, 70)]])cv2.fillPoly(frame, polygan, (0, 0, 200))# cv2.rectangle(frame, (20, 20), (220, 70), (0, 0, 200), -1)# åšåº¦ä¸º-1ä»£è¡¨å¸ƒæ»¡cv2.putText(frame, &quot;Person&quot;, (30, 60), cv2.FONT_HERSHEY_PLAIN, 3, (255, 255, 255), 3) ç”±äºç»˜åˆ¶å­—ä½“ç±»åˆ«å’Œè®¾è®¡é¼ æ ‡ç‚¹å‡»çš„é€»è¾‘çš„å†…å®¹æœ‰äº›å¤æ‚ï¼Œå› æ­¤æˆ‘ä»¬ç›´æ¥å¯¼å…¥å†™å¥½çš„æ–‡ä»¶ã€‚ è®¾ç½®æŒ‰é’®è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ªButtonç±»ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081import cv2import numpy as npclass Buttons: def __init__(self): # Font self.font = cv2.FONT_HERSHEY_PLAIN self.text_scale = 3 self.text_thick = 3 self.x_margin = 20 self.y_margin = 10 # Buttons self.buttons = {} self.button_index = 0 self.buttons_area = [] np.random.seed(0) self.colors = [] self.generate_random_colors() def generate_random_colors(self): for i in range(91): random_c = np.random.randint(256, size=3) self.colors.append((int(random_c[0]), int(random_c[1]), int(random_c[2]))) def add_button(self, text, x, y): # Get text size textsize = cv2.getTextSize(text, self.font, self.text_scale, self.text_thick)[0] right_x = x + (self.x_margin * 2) + textsize[0] bottom_y = y + (self.y_margin * 2) + textsize[1] self.buttons[self.button_index] = {&quot;text&quot;: text, &quot;position&quot;: [x, y, right_x, bottom_y], &quot;active&quot;: False} self.button_index += 1 def display_buttons(self, frame): for b_index, button_value in self.buttons.items(): button_text = button_value[&quot;text&quot;] (x, y, right_x, bottom_y) = button_value[&quot;position&quot;] active = button_value[&quot;active&quot;] if active: button_color = (0, 0, 200) text_color = (255, 255, 255) thickness = -1 else: button_color = (0, 0, 200) text_color = (0, 0, 200) thickness = 3 # Get text size cv2.rectangle(frame, (x, y), (right_x, bottom_y), button_color, thickness) cv2.putText(frame, button_text, (x + self.x_margin, bottom_y - self.y_margin), self.font, self.text_scale, text_color, self.text_thick) return frame def button_click(self, mouse_x, mouse_y): for b_index, button_value in self.buttons.items(): (x, y, right_x, bottom_y) = button_value[&quot;position&quot;] active = button_value[&quot;active&quot;] area = [(x, y), (right_x, y), (right_x, bottom_y), (x, bottom_y)] inside = cv2.pointPolygonTest(np.array(area, np.int32), (int(mouse_x), int(mouse_y)), False) if inside &gt; 0: print(&quot;IS Ac&quot;, active) new_status = False if active is True else True self.buttons[b_index][&quot;active&quot;] = new_status def active_buttons_list(self): active_list = [] for b_index, button_value in self.buttons.items(): active = button_value[&quot;active&quot;] text = button_value[&quot;text&quot;] if active: active_list.append(str(text).lower()) return active_list ä¹‹åå¼€å§‹å®ä¾‹åŒ–Button: æ˜¾ç¤ºbuttonï¼š è®¾è®¡ç‚¹å‡»æ¿€æ´»æ“ä½œï¼š å®Œæ•´çš„ä»£ç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107import cv2import numpy as npfrom object_detection_crash_course.gui_buttons import Buttons# åˆå§‹åŒ–Buttonbutton = Buttons()button.add_button(&quot;person&quot;, 20, 20)button.add_button(&quot;cell phone&quot;, 20, 100)button.add_button(&quot;keyboard&quot;, 20, 180)button.add_button(&quot;remote&quot;, 20, 260)button.add_button(&quot;scissors&quot;, 20, 340)colors = button.colors# opencv DNNnet = cv2.dnn.readNet(&quot;object_detection_crash_course/dnn_model/yolov4-tiny.weights&quot;, &quot;object_detection_crash_course/dnn_model/yolov4-tiny.cfg&quot;)model = cv2.dnn_DetectionModel(net)# å¯¼å…¥æ¨¡å‹model.setInputParams(size=(416, 416), scale=1/255)# sizeè¶Šå¤§ï¼Œæ¸…æ™°åº¦è¶Šå¤§ï¼Œä½†æ˜¯å¯ä»¥é€Ÿåº¦æ¯”è¾ƒæ…¢# scaleçš„åŠŸèƒ½æ˜¯ç¼©æ”¾ [0,255]-&gt;[0,1]# å¯¼å…¥ç±»åˆ«æ–‡ä»¶classes=[]with open(&quot;object_detection_crash_course/dnn_model/classes.txt&quot;,&quot;r&quot;) as file_object: for class_name in file_object: class_name = class_name.strip() classes.append(class_name)# åˆå§‹åŒ–ç›¸æœºcap = cv2.VideoCapture(0)# ä¿®æ”¹ç›¸æœºå‚æ•° æ•´ç†ä¿®æ”¹çš„æ˜¯ç›¸æœºçš„frameçš„H,Wcap.set(cv2.CAP_PROP_FRAME_WIDTH, 1280)cap.set(cv2.CAP_PROP_FRAME_HEIGHT, 720)# FULL HD = 1920x1080# button_person = Falsedef click_button(event, x, y, flags, params): # global button_person if event == cv2.EVENT_LBUTTONDOWN: button.button_click(x, y) # print(x, y) # polygan = np.array([[(20, 20), (220, 20), (220, 70), (20, 70)]]) # # is_inside = cv2.pointPolygonTest(polygan, (x,y), False) # if is_inside: # print(&quot;inside the button&quot;) # if button_person is False: # button_person = True # else: # button_person = False # # ç›¸å½“äºä¸€ä¸ªå¼€å…³ï¼Œç‚¹å‡»ä»¥ä¸‹å¼€å§‹è¯†åˆ«ï¼Œå†ç‚¹ä¸€ä¸‹å°±å…³é—­è¯†åˆ«# äº§ç”Ÿä¸€ä¸ªæ–°çš„çª—å£cv2.namedWindow(&quot;Frame&quot;)cv2.setMouseCallback(&quot;Frame&quot;, click_button)while True: # å¦‚æœä¸åŠ whileå¾ªç¯çš„è¯ï¼Œç”Ÿæˆçš„ç¨‹åºä¼šä¸€é—ªè€Œè¿‡ ret, frame = cap.read() # å¯¼å‡ºæ¿€æ´»çš„button active_button = button.active_buttons_list() # ç›®æ ‡æ£€æµ‹ class_idx, scores, bboxs = model.detect(frame) # è¿”å›å€¼ä¾æ¬¡æ˜¯ç±»åˆ«çš„idxï¼Œ æ‰€å¾—çš„åˆ†æ•°ï¼Œ boundingboxsè¾¹ç•Œæ¡† # print(f&quot;class_idx:{class_idx}\\n scores:{scores} \\n bboxs:{bboxs}&quot;) for class_id, score, bbox in zip(class_idx, scores, bboxs): (x, y, w, h) = bbox class_name = classes[class_id] # class_name = classes[class_id[0]] # 4.4.0çš„ç‰ˆæœ¬ color = colors[class_id] # æ ¹æ®idåˆ†é…é¢œè‰² # if button_person and class_name == &quot;person&quot;: if class_name in active_button: # ç»˜åˆ¶ç›®æ ‡æ£€æµ‹ä¸‰è§’å½¢, åœ¨çª—å£å¯¹è±¡ä¸Šç»˜åˆ¶ cv2.rectangle(frame, (x, y), (x+w, y+h), color, 3) # å‚æ•°ä¸ºç»˜åˆ¶çš„å¯¹è±¡, ç»˜åˆ¶é•¿æ–¹å½¢çš„å·¦ä¸Šç‚¹åˆå³ä¸‹ç‚¹, é¢œè‰²RGB, æ¡†çš„ç²—ç»† # è¯†åˆ«çš„ç§ç±»åˆcocoæ•°æ®é›†æœ‰å…³ cv2.putText(frame, str(class_name), (x, y-5), cv2.FONT_HERSHEY_PLAIN, fontScale=2, color=color, thickness=2) # # åˆ›å»ºæŒ‰é’® # # è¿™é‡Œä½¿ç”¨å¤šè¾¹è¡Œæ¥ç»˜åˆ¶ # polygan = np.array([[(20, 20), (220, 20), (220, 70), (20, 70)]]) # cv2.fillPoly(frame, polygan, (0, 0, 200)) # # cv2.rectangle(frame, (20, 20), (220, 70), (0, 0, 200), -1) # # åšåº¦ä¸º-1ä»£è¡¨å¸ƒæ»¡ # cv2.putText(frame, &quot;Person&quot;, (30, 60), cv2.FONT_HERSHEY_PLAIN, 3, (255, 255, 255), 3) # æ˜¾ç¤ºButton button.display_buttons(frame) cv2.imshow(&quot;Frame&quot;, frame) cv2.waitKey(1) # å•ä½æ˜¯ms # ç­‰å¾…æ—¶é—´è®¾ä¸º0çš„è¯ï¼Œè§†åƒå¤´ä¼šä¼šé™æ­¢ï¼Œå…³é—­ä¸€æ¬¡çª—å£æ‰åˆ·æ–°ä¸€æ¬¡ é¡¹ç›®éƒ¨ç½²12345678import sysfrom cx_Freeze import setup, Executablesetup(name=&quot;Simple Object Detection Software&quot;, version=&quot;0.1&quot;, description=&quot;This software detects objects in realtime&quot;, executables=[Executable(&quot;main.py&quot;)] ) ç»“æœå‡ºç°äº†æŠ¥é”™åº”è¯¥æ˜¯cx_Freezeçš„é—®é¢˜ï¼Œç›®å‰æ²¡è§£å†³ã€‚","link":"/2022/02/13/opencv/object-detection-app%E9%A1%B9%E7%9B%AE/"},{"title":"è½¦æµç»Ÿè®¡é¡¹ç›®","text":"hljs.initHighlightingOnLoad(); æœ¬é¡¹ç›®ä¸»è¦æ˜¯æ¥è¯†åˆ«æŸè·¯æ®µçš„è½¦æµæ•°é‡ï¼Œä¸»è¦åˆ†ä¸ºç›®æ ‡è¯†åˆ«å’Œè½¦æµæ•°é‡ç»Ÿè®¡ä¸¤ä¸ªéƒ¨åˆ†ï¼Œå¯¹äºè½¦æµæ•°é‡è®¡ç®—éƒ¨åˆ†è¿˜æ˜¯éœ€è¦å¾ˆå¼ºçš„ç®—æ³•åŸºç¡€ï¼Œåœ¨å†™çš„è¿‡ç¨‹ä¸­ä¸æ–­ä¼šå‡ºç°æ–°çš„é—®é¢˜ï¼Œéœ€è¦ä¸€æ­¥ä¸€æ­¥çš„è°ƒè¯•ã€‚ä½†æ˜¯è¯¥é¡¹ç›®è¿˜æœ‰ä¸€å®šçš„BUGï¼Œè¿˜æœ‰å¾…æ”¹è¿›ã€‚ ç›®æ ‡è¯†åˆ«12345678910from object_detection import ObjectDetection# åˆå§‹åŒ–ç›®æ ‡æ£€æµ‹od = ObjectDetection()# Detect objects on frame(class_ids, scores, boxes) = od.detect(frame)for box in boxes: (x, y, w, h) = box cv2.rectangle(frame, (x, y), (x + w, y + h), (0, 255, 0), 2) è½¦æµæ•°é‡è¯†åˆ«è¯†åˆ«ä¸¤å¸§ä¸­çš„ç›¸åŒè½¦è¾†ä¸‹é¢è¦åˆ¤æ–­è¿ç»­ä¸¤å¸§ä¸­çš„æ±½è½¦æ˜¯å¦ä¸ºåŒä¸€ä¸ªæ±½è½¦ï¼Œæ¥é¿å…é‡å¤è®¡æ•°ã€‚ è¿™é‡Œé€šè¿‡è¿ç»­ç»˜åˆ¶è½¦è¾†è¿è¡Œè¿‡ç¨‹çš„ä¸­å¿ƒç‚¹æ¥è¿›è¡Œè¯†åˆ«æ˜¯å¦ä¸ºåŒä¸€è¾†è½¦ï¼š 1234567891011for box in boxes: (x, y, w, h) = box # print(&quot;FRAME NÂ°&quot;, count, &quot; &quot;, x, y, w, h) cx = int((x + x + w) / 2) cy = int((y + y + h) / 2) center_point.append((cx, cy)) cv2.circle(frame, (cx, cy), 5, (0, 0, 255), -1) cv2.rectangle(frame, (x, y), (x + w, y + h), (0, 255, 0), 2)for pt in center_point: cv2.circle(frame, pt, 5, (0, 0, 255), -1) å¦‚ä¸Šé¢çš„è½¨è¿¹æ£€æµ‹å°†ä¼šé€ æˆæˆ‘ä»¬çš„ä¸­å¿ƒç‚¹çš„æ•°æ®è¶Šæ¥æœ‰å¤šï¼Œå› æ­¤å½“æˆ‘ä»¬åˆ¤æ–­å¥½è¿™ä¸¤é‡è½¦æ˜¯åŒä¸€è¾†æ˜¯ï¼Œå¯ä»¥é‡Šæ”¾æ‰åŒä¸€é‡è½¦å‰é¢æ—¶åˆ»çš„è·¯å¾„ã€‚ 12345&gt;&gt;&gt;CUR[(567, 905), (434, 750), (1724, 626), (930, 534), (857, 567), (1019, 650), (761, 655), (612, 474), (881, 473), (753, 463), (1867, 590), (641, 436), (687, 451), (943, 459), (1347, 984), (1114, 435), (1417, 465)]PRE[(571, 891), (437, 742), (1750, 635), (761, 648), (1018, 647), (928, 533), (856, 565), (612, 473), (881, 473), (1336, 980), (753, 463), (1118, 436), (942, 458), (1877, 605), (642, 435), (688, 450), (1268, 433), (1424, 466)] ä»¥ä¸Šä¸ºä¸¤æ¬¡çš„è¾“å‡ºç»“æœï¼Œç”±æ­¤å¯ä»¥çœ‹å‡ºæ¥æœ‰å‡ å¯¹æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚ 12345678910111213141516tracking_objects = {}# æ£€æµ‹è½¦è¾†çš„åºå·track_id = 0for pt in center_points_cur_frame: for pt2 in center_points_pre_frame: distance = math.hypot(pt2[0] - pt[0], pt2[1] - pt[1]) if distance &lt; 10: tracking_objects[track_id] = pt track_id += 1 # å†å›¾ä¸­ç»˜åˆ¶å‡ºæ¯ä¸€ä¸ªå›¾ç‰‡å¯¹åº”çš„ä½ç½®for object_id, pt in tracking_objects.items(): cv2.circle(frame, pt, 5, (0, 0, 255), -1) cv2.putText(frame, str(object_id), (pt[0], pt[1] - 7), 0, 1, (0, 0, 255), 2) ä½†æ˜¯å‡ºç°äº†ä»¥ä¸‹å¼‚å¸¸çš„æƒ…å†µï¼Œä¸€äº›è½¦è¾†è¢«è¯†åˆ«ä½†æ²¡æœ‰è¢«ç»Ÿè®¡ã€‚ åŸå› å¯èƒ½æ˜¯ï¼Œè¿‘å¤„çš„è½¦ç§»åŠ¨é‡ä¼šå¤§ä¸€ç‚¹ï¼Œé€ æˆè¿èƒŒè®¡ç®—åœ¨å†…ã€‚å°†distance &lt; 10 æ”¹ä¸º distance &lt; 20. ç»Ÿè®¡è½¦è¾†çš„idä½†æ˜¯æ¯å¼ å›¾çš„idéƒ½ä¸ç›¸åŒï¼Œä¼šä¸æ–­çš„æ·»åŠ æ–°çš„idï¼Œäºæ˜¯å‡ºç°ä»¥ä¸‹çš„BUGï¼š å…¶åŸå› æ˜¯ï¼Œç¬¬ä¸€æ¬¡preè¿˜æ²¡æœ‰æ•°æ®ï¼Œcurä¹Ÿæ˜¯åˆšåˆšæ‰æœ‰æ•°æ®ï¼Œäºæ˜¯ç»™æ–°çš„é¡¹ç›®èµ‹äºˆäº†track_idï¼Œ ä¸‹ä¸€æ¬¡çš„æ¯”è¾ƒåˆä¼šç»™æ—§çš„ç›®æ ‡èµ‹äºˆæ–°çš„track_id, äºæ˜¯å‡ºç°ä»¥ä¸Šé”™è¯¯ã€‚ ç¬¬äºŒæ¬¡æ¯”è¾ƒæ—¶ï¼Œè¦å°†tracking_objectçš„æ•°æ®å’Œæ–°çš„ç›®æ ‡ç‚¹æ•°æ®æ•°æ®è¿›è¡Œæ¯”è¾ƒï¼Œä»£ç å¦‚ä¸‹ï¼š 123456789101112131415if count &lt;= 2: for pt in center_points_cur_frame: for pt2 in center_points_pre_frame: distance = math.hypot(pt2[0] - pt[0], pt2[1] - pt[1]) if distance &lt; 20: tracking_objects[track_id] = pt track_id += 1else: for pt in center_points_cur_frame: for object_id, pt2 in tracking_objects.items(): distance = math.hypot(pt2[0] - pt[0], pt2[1] - pt[1]) if distance &lt; 20: tracking_objects[object_id] = pt ä¹‹åï¼Œå¦‚å›¾æ‰€ç¤ºæ²¡æœ‰å‡ºç°æ–°çš„é—®é¢˜ï¼Œå°±æ˜¯è¿è¡Œè¿‡ç¨‹ä¸­çš„idæ‰äº†ä¸€åœ°ï¼Œæ²¡æœ‰è·Ÿç€ä¸€èµ·ç§»åŠ¨ã€‚ 123456789101112131415161718for object_id, pt2 in tracking_objects.items(): object_exist = False # åˆ¤æ–­è¿™ä¸ªå¯¹è±¡æ˜¯å¦å­˜åœ¨ for pt in center_points_cur_frame: distance = math.hypot(pt2[0] - pt[0], pt2[1] - pt[1]) if distance &lt; 20: tracking_objects[object_id] = pt object_exist = True # å·²ç»è¯å®å™¨å­˜åœ¨ä¹‹åï¼Œå°±ä¸ç”¨è¿›è¡Œä¸‹é¢çš„æ“ä½œäº† # å°±æ˜¯è·³å‡ºæœ¬æ¬¡forå¾ªç¯ï¼Œè¿™æ ·å¯ä»¥æé«˜æ•ˆç‡ if object_exist == False: # å¦‚æœè¿™ä¸ªidéå†äº†ä¸€åœˆè¿˜æ²¡æœ‰ç»“æœï¼Œé‚£ä¹ˆå°±ç›´æ¥åˆ é™¤ tracking_objects.pop(object_id) # ä½†æ˜¯ï¼Œå¾ªç¯è¿‡ç¨‹ä¸­æ—¶ä¸å¯ä»¥éšä¾¿çš„æ”¹å˜é‡Œé¢çš„å…ƒç´ çš„ # å› æ­¤è¦åˆ›å»ºå‰¯æœ¬ æ¥ä¸‹æ¥çš„é—®é¢˜å°±æ˜¯å¾ªç¯è¿‡ç¨‹ä¸­æ—¶ä¸å¯ä»¥éšä¾¿çš„æ”¹å˜é‡Œé¢çš„å…ƒç´ çš„ï¼Œå› æ­¤è¦åˆ›å»ºå‰¯æœ¬ï¼Œå…·ä½“çš„æ“ä½œå¦‚ä¸‹ï¼Œå‚ä¸å¾ªç¯çš„æ˜¯å‰¯æœ¬ï¼Œè¿›è¡Œæ”¹å˜çš„æ˜¯çœŸå®å‚æ•°ï¼š ä¸‹é¢æˆ‘ä»¬ä¸ºæ–°è¯†åˆ«å‡ºæ¥çš„è½¦è¾†å¢åŠ æ ‡ç­¾ã€‚ å®Œæ•´ä»£ç ä»¥ä¸‹æ˜¯å®Œæ•´çš„ä»£ç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100import cv2import numpy as npfrom object_detection import ObjectDetectionimport math# åˆå§‹åŒ–ç›®æ ‡æ£€æµ‹od = ObjectDetection()cap = cv2.VideoCapture(&quot;los_angeles.mp4&quot;)# åˆå§‹åŒ–è®¡ç®—å™¨count = 0# center_point = []center_points_pre_frame = []tracking_objects = {}# æ£€æµ‹è½¦è¾†çš„åºå·track_id = 0while True: ret, frame = cap.read() count += 1 if not ret: break # å½“å‰çª—å£å†…çš„ç‚¹ center_points_cur_frame = [] # Detect objects on frame (class_ids, scores, boxes) = od.detect(frame) for box in boxes: (x, y, w, h) = box # print(&quot;FRAME NÂ°&quot;, count, &quot; &quot;, x, y, w, h) cx = int((x + x + w) / 2) cy = int((y + y + h) / 2) center_points_cur_frame.append((cx, cy)) cv2.circle(frame, (cx, cy), 5, (0, 0, 255), -1) cv2.rectangle(frame, (x, y), (x + w, y + h), (0, 255, 0), 2) if count &lt;= 2: for pt in center_points_cur_frame: for pt2 in center_points_pre_frame: distance = math.hypot(pt2[0] - pt[0], pt2[1] - pt[1]) if distance &lt; 20: tracking_objects[track_id] = pt track_id += 1 else: tracking_objects = tracking_objects.copy() center_points_cur_frame_copy = center_points_cur_frame.copy() for object_id, pt2 in tracking_objects.copy().items(): object_exist = False # åˆ¤æ–­è¿™ä¸ªå¯¹è±¡æ˜¯å¦å­˜åœ¨ for pt in center_points_cur_frame: distance = math.hypot(pt2[0] - pt[0], pt2[1] - pt[1]) if distance &lt; 20: tracking_objects[object_id] = pt object_exist = True # å·²ç»è¯å®å™¨å­˜åœ¨ä¹‹åï¼Œå°±ä¸ç”¨è¿›è¡Œä¸‹é¢çš„æ“ä½œäº† # å°±æ˜¯è·³å‡ºæœ¬æ¬¡forå¾ªç¯ï¼Œè¿™æ ·å¯ä»¥æé«˜æ•ˆç‡ if pt in center_points_cur_frame: center_points_cur_frame.remove(pt) # å¦‚æœå­˜åœ¨ï¼Œå°±æ˜¯ä¸ªæ—§çš„ç‚¹ï¼Œå°†å…¶åˆ å»åå°±æ˜¯æ–°çš„ç‚¹äº† # ä½†æ˜¯å¤šæ¬¡å¾ªç¯ä¼šé€ æˆä¸€ä¸ªç‚¹åˆ é™¤äº†å¤šæ¬¡ if object_exist == False: # å¦‚æœè¿™ä¸ªidéå†äº†ä¸€åœˆè¿˜æ²¡æœ‰ç»“æœï¼Œé‚£ä¹ˆå°±ç›´æ¥åˆ é™¤ tracking_objects.pop(object_id) # ä½†æ˜¯ï¼Œå†å¾ªç¯è¿‡ç¨‹ä¸­æ—¶ä¸å¯ä»¥éšä¾¿çš„æ”¹å˜é‡Œé¢çš„å…ƒç´ çš„ # å› æ­¤è¦åˆ›å»ºå‰¯æœ¬ # å¢åŠ æ–°çš„ç‚¹ for pt in center_points_cur_frame: tracking_objects[track_id] = pt track_id += 1 # å†å›¾ä¸­ç»˜åˆ¶å‡ºæ¯ä¸€ä¸ªå›¾ç‰‡å¯¹åº”çš„ä½ç½® for object_id, pt in tracking_objects.items(): cv2.circle(frame, pt, 5, (0, 0, 255), -1) cv2.putText(frame, str(object_id), (pt[0], pt[1] - 7), 0, 1, (0, 0, 255), 2) print(&quot;CUR&quot;) print(center_points_cur_frame) print(&quot;PRE&quot;) print(center_points_pre_frame) # ä¿ç•™ä¸Šä¸€å¸§ä¸­çš„æ•°æ® center_points_pre_frame = center_points_cur_frame.copy() cv2.imshow('Frame', frame) key = cv2.waitKey(1) if key == 27: breakcap.release()cv2.destroyAllWindows()","link":"/2022/02/13/opencv/%E8%BD%A6%E6%B5%81%E7%BB%9F%E8%AE%A1%E9%A1%B9%E7%9B%AE/"},{"title":"ç¬¬ä¸€ç« ç»ªè®º","text":"æŒ¯åŠ¨åŠ›å­¦æ˜¯åŠ›å­¦ä¸“ä¸šçš„é‡è¦ä¸“ä¸šåŸºç¡€è¯¾ï¼Œç”±æ­¤å¼€å§‹è¿›å…¥åŠ¨åŠ›å­¦çš„ç ”ç©¶èŒƒç•´ï¼Œåœ¨èˆªç©ºèˆªå¤©ã€æœºæ¢°ã€åœŸæœ¨ç­‰è®¸å¤šå·¥ç¨‹é¢†åŸŸæœ‰ç€é‡è¦çš„åº”ç”¨èƒŒæ™¯ã€‚æœ¬æ–‡ä¸ºç¬¬ä¸€ç« ç»ªè®ºï¼Œåˆæ­¥çš„ä»‹ç»åŸºæœ¬æ¦‚å¿µã€å­¦ä¹ ç›®çš„ã€é—®é¢˜çš„ææ³•ã€æŒ¯åŠ¨æ¨¡å‹çš„å»ºç«‹ä»¥åŠç³»ç»Ÿçš„åˆ†ç±»ã€‚ 1.1 åŸºæœ¬æ¦‚å¿µä¸å­¦ä¹ ç›®çš„ ä¸€èˆ¬åŠ›å­¦çš„å¯¹è±¡ä¸»è¦æ˜¯æœ‰é™è‡ªç”±åº¦ç³»ç»Ÿçš„è¿åŠ¨åŠå…¶æ§åˆ¶ï¼Œæœ‰æ—¶å®ƒåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªæ— é™è‡ªç”±åº¦å­ç³»ç»Ÿã€‚å®ƒåŒ…æ‹¬è¿åŠ¨ç¨³å®šæ€§ç†è®ºã€æŒ¯åŠ¨ç†è®ºã€åŠ¨åŠ›ç³»ç»Ÿç†è®ºã€å¤šä½“ç³»ç»ŸåŠ›å­¦ã€æœºæ¢°åŠ¨åŠ›å­¦ç­‰ã€‚åŒ…æ‹¬ç†è®ºåŠ›å­¦ã€æŒ¯åŠ¨åŠ›å­¦ã€éçº¿æ€§åŠ›å­¦ã€‚ å›ºä½“åŠ›å­¦æ˜¯ç ”ç©¶å¯å˜å½¢å›ºä½“åœ¨å¤–ç•Œå› ç´ ä½œç”¨ä¸‹æ‰€äº§ç”Ÿçš„åº”åŠ›ã€åº”å˜ã€ä½ç§»å’Œç ´åç­‰çš„åŠ›å­¦åˆ†æ”¯ã€‚å›ºä½“åŠ›å­¦åœ¨åŠ›å­¦ä¸­å½¢æˆè¾ƒæ—©ï¼Œåº”ç”¨ä¹Ÿè¾ƒå¹¿ã€‚åŒ…æ‹¬ææ–™åŠ›å­¦ã€å¼¹æ€§åŠ›å­¦ã€å¡‘æ€§åŠ›å­¦ã€éçº¿æ€§ä»‹è´¨åŠ›å­¦ã€‚ æµä½“åŠ›å­¦æ˜¯ç ”ç©¶æµä½“{æ¶²ä½“å’Œæ°”ä½“)çš„åŠ›å­¦è¿åŠ¨è§„å¾‹åŠå…¶åº”ç”¨çš„å­¦ç§‘ã€‚ä¸»è¦ç ”ç©¶åœ¨å„ç§åŠ›çš„ä½œç”¨ä¸‹ï¼Œæµä½“æœ¬èº«çš„çŠ¶æ€ï¼Œä»¥åŠæµä½“å’Œå›ºä½“å£é¢,æµä½“å’Œæµä½“é—´ã€æµä½“ä¸å…¶ä»–è¿åŠ¨å½¢æ€ä¹‹é—´çš„ç›¸äº’ä½œç”¨çš„åŠ›å­¦åˆ†æ”¯ã€‚åŒ…æ‹¬æµä½“åŠ›å­¦ã€é«˜ç­‰æµä½“åŠ›å­¦ã€‚ å®šä¹‰ï¼š ä»å¹¿ä¹‰ä¸Šè®²ï¼Œå¦‚æœè¡¨å¾ä¸€ç§è¿åŠ¨çš„ç‰©ç†é‡ä½œæ—¶è€Œå¢å¤§æ—¶è€Œå‡å°çš„åå¤å˜åŒ–ï¼Œå°±å¯ä»¥ç§°è¿™ç§è¿åŠ¨ä¸ºæŒ¯åŠ¨ å¦‚æœå˜åŒ–çš„ç‰©ç†é‡æ˜¯ä¸€äº›æœºæ¢°é‡æˆ–åŠ›å­¦é‡ï¼Œä¾‹å¦‚ç‰©ä½“çš„ä½ç§»ã€é€Ÿåº¦ã€åŠ é€Ÿåº¦ã€åº”åŠ›åŠåº”å˜ç­‰ç­‰ï¼Œè¿™ç§æŒ¯åŠ¨ä¾¿ç§°ä¸ºæœºæ¢°æŒ¯åŠ¨ æŒ¯åŠ¨æ˜¯è‡ªç„¶ç•Œæœ€æ™®éçš„ç°è±¡ä¹‹ä¸€ å„ç§ç‰©ç†ç°è±¡ï¼Œè¯¸å¦‚å£°ã€å…‰ã€çƒ­ç­‰éƒ½åŒ…å«æŒ¯åŠ¨ (1ï¼‰å¿ƒè„çš„æåŠ¨ã€è€³è†œå’Œå£°å¸¦çš„æŒ¯åŠ¨ï¼Œ(2ï¼‰æ¡¥æ¢å’Œå»ºç­‘ç‰©åœ¨é£å’Œåœ°éœ‡ä½œç”¨ä¸‹çš„æŒ¯åŠ¨,(3)é£æœºå’Œè½®èˆ¹èˆªè¡Œä¸­çš„æŒ¯åŠ¨ï¼Œï¼ˆ4ï¼‰æœºåºŠå’Œåˆ€å…·åœ¨åŠ å·¥æ—¶çš„æŒ¯åŠ¨ æŒ¯åŠ¨åŠ›å­¦ï¼šå€ŸåŠ©æ•°å­¦ã€ç‰©ç†ã€å®éªŒå’Œè®¡ç®—æŠ€æœ¯ï¼Œæ¢è®¨å„ç§æŒ¯åŠ¨ç°è±¡ï¼Œé˜æ˜æŒ¯åŠ¨çš„åŸºæœ¬è§„å¾‹ï¼Œä»¥ä¾¿å…‹æœæŒ¯åŠ¨çš„æ¶ˆæå› ç´ ï¼Œåˆ©ç”¨å…¶ç§¯æå› ç´ ï¼Œä¸ºåˆç†è§£å†³å„ç§æŒ¯åŠ¨é—®é¢˜æä¾›ç†è®ºä¾æ®ã€‚ å­¦ä¹ çš„ç›®çš„ï¼š è¿ç”¨æŒ¯åŠ¨ç†è®ºå»åˆ›é€ å’Œè®¾è®¡æ–°å‹çš„æŒ¯åŠ¨è®¾å¤‡ã€ä»ªå™¨åŠè‡ªåŠ¨åŒ–è£…ç½® æŒæ¡æŒ¯åŠ¨çš„åŸºæœ¬ç†è®ºå’Œåˆ†ææ–¹æ³•ï¼Œç”¨ä»¥ç¡®å®šå’Œé™åˆ¶æŒ¯åŠ¨å¯¹å·¥ç¨‹ç»“æ„å’Œæœºæ¢°äº§å“çš„æ€§èƒ½ã€å¯¿å‘½å’Œå®‰å…¨çš„æœ‰å®³å½±å“ 1.2æŒ¯åŠ¨é—®é¢˜çš„ææ³• é€šå¸¸çš„ç ”ç©¶å¯¹è±¡è¢«ç§°ä½œç³»ç»Ÿ å®ƒå¯ä»¥æ˜¯ä¸€ä¸ªé›¶éƒ¨ä»¶ã€ä¸€å°æœºå™¨ã€ä¸€ä¸ªå®Œæ•´çš„å·¥ç¨‹ç»“æ„ å¤–éƒ¨çš„æ¿€æŒ¯åŠ›ç­‰å› ç´ è¢«ç§°ä½œæ¿€åŠ±ï¼ˆè¾“å…¥ï¼‰ ç³»ç»Ÿå‘ç”Ÿçš„æŒ¯åŠ¨ç§°ä¸ºå“åº”ï¼ˆè¾“å‡ºï¼‰ æŒ¯åŠ¨çš„é—®é¢˜å¯ä»¥åˆ†ä¸ºä¸‰ç±»ï¼š å·²çŸ¥æ¿€åŠ±å’Œç³»ç»Ÿï¼Œæ±‚å“åº”ï¼ˆæ­£é—®é¢˜ï¼‰ åŠ¨åŠ›å“åº”åˆ†æï¼Œä¸€èˆ¬æ˜¯å»ºç«‹å¾®åˆ†æ–¹ç¨‹ï¼Œæ•°å€¼æ–¹æ³•æ±‚è§£å³å¯ã€‚ ä¸»è¦ä»»åŠ¡åœ¨äºéªŒç®—ç»“æ„ã€äº§å“ç­‰åœ¨å·¥ä½œæ—¶çš„åŠ¨åŠ›å“åº”ï¼ˆå¦‚å˜å½¢ã€ä½ç§»ã€åº”åŠ›ç­‰ï¼‰æ˜¯å¦æ»¡è¶³é¢„å®šçš„å®‰å…¨è¦æ±‚å’Œå…¶å®ƒè¦æ±‚ åœ¨äº§å“è®¾è®¡é˜¶æ®µï¼Œå¯¹å…·ä½“è®¾è®¡æ–¹æ¡ˆè¿›è¡ŒåŠ¨åŠ›å“åº”éªŒç®—ï¼Œè‹¥ä¸ç¬¦åˆè¦æ±‚å†ä½œä¿®æ”¹ï¼Œç›´åˆ°è¾¾åˆ°è¦æ±‚è€Œæœ€ç»ˆç¡®å®šè®¾è®¡æ–¹æ¡ˆï¼Œè¿™ä¸€è¿‡ç¨‹å°±æ˜¯æ‰€è°“çš„æŒ¯åŠ¨è®¾è®¡ è¿™é‡Œæ¯”å¦‚å“åº”ä¸­çš„ååº”è®¾è®¡çš„å®‰å…¨ï¼ŒåŠ é€Ÿåº¦ååº”è®¾è®¡çš„èˆ’é€‚æ€§ç‰¹æ€§ã€‚ é«˜å±‚å»ºç­‘è¦æœ‰æŠ—éœ‡è¦æ±‚ï¼Œæ½œè‰‡è¦æœ‰å£°å­¦è¦æ±‚ã€‚ ç«ç®­-&gt;ç»†é•¿æ†ï¼Œå°¾ç«¯ç‡ƒæ–™æ¨è¿›å™¨ä¼šç»™ç«ç®­æœ¬ä½“é€ æˆæŒ¯åŠ¨ï¼ˆè½´å‘ã€å¼¯æ›²ã€æ‰­æŒ¯ï¼‰ï¼Œä»è€Œå½±å“å«æ˜Ÿï¼Œå› æ­¤ç«ç®­å’Œæ¨è¿›å™¨ä¹‹é—´è¦åŠ å‡éœ‡é€‚é…å™¨ã€‚ ç¬¬äºŒç±»ï¼šå·²çŸ¥å’Œå“åº”ï¼Œæ±‚ç³»ç»Ÿï¼ˆç¬¬ä¸€ä¸ªé—®é¢˜ï¼‰ ç³»ç»Ÿè¯†åˆ«ï¼Œç³»ç»Ÿè¾¨è¯† æ±‚ç³»ç»Ÿï¼Œä¸»è¦æ˜¯æŒ‡è·å¾—å¯¹äºç³»ç»Ÿçš„ç‰©ç†å‚æ•°ï¼ˆå¦‚è´¨é‡ã€åˆšæ•°ç­‰ï¼‰å’Œç³»ç»Ÿå…³äºæŒ¯åŠ¨çš„å›ºæœ‰ç‰¹æ€§ï¼ˆå¦‚å›ºæœ‰é¢‘ç‡ã€ä¸»æŒ¯å‹ç­‰ï¼‰çš„è®¤è¯† ä»¥ä¼°è®¡ç‰©ç†å‚æ•°ä¸ºä»»åŠ¡çš„å«åšç‰©ç†å‚æ•°è¾¨è¯†ï¼Œä»¥ä¼°è®¡ç³»ç»ŸæŒ¯åŠ¨å›ºæœ‰ç‰¹æ€§ä¸ºä»»åŠ¡çš„å«åšæ¨¡æ€å‚æ•°è¾¨è¯†æˆ–è€…è¯•éªŒæ¨¡æ€åˆ†æ æ¿€åŠ±-&gt;å«æ˜Ÿçš„å§¿æ€è°ƒæ•´ï¼›å“åº”-&gt;å«æ˜Ÿçš„ä¼ æ„Ÿå™¨ï¼ˆåŒ…æ‹¬é™€èºä»ªã€ç«¯æ¿ä¸Šçš„åŠ é€Ÿåº¦ä¼ æ„Ÿå™¨ï¼‰ æœºæ¢°è‡‚æœ¬èº«çš„å‚æ•°è¾¨è¯† ; ç©ºé—´æœºæ¢°è‡‚æŠ“å–,è¾“å…¥(æ¿€åŠ±)ä¸ºæŠ“å–å‰å„ä¸ªå…³èŠ‚çš„åŠ›çŸ©å’ŒåŠ é€Ÿåº¦ä¿¡æ¯,è¾“å‡º(å“åº”)ä¸ºæŠ“å–åçš„åŠ›çŸ©å’ŒåŠ é€Ÿåº¦â€”&gt;&gt;å¾—å‡ºè¢«æŠ“å–çš„ç¢ç‰‡çš„è´¨é‡å’Œæƒ¯é‡. ç¬¬ä¸‰ç±»ï¼šå·²çŸ¥ç³»ç»Ÿå’Œå“åº”ï¼Œæ±‚æ¿€åŠ±ï¼ˆç¬¬äºŒä¸ªé€†é—®é¢˜ï¼‰ ç¯å¢ƒé¢„æµ‹ ä¾‹å¦‚:ä¸ºäº†é¿å…äº§å“åœ¨å…¬è·¯è¿è¾“ä¸­çš„æŸåï¼Œéœ€è¦é€šè¿‡å®åœ°è¡Œè½¦è®°å½•æ±½è½¦æŒ¯åŠ¨å’Œäº§å“æŒ¯åŠ¨ï¼Œä»¥ä¼°è®¡è¿è¾“è¿‡ç¨‹ä¸­æ˜¯æ€æ ·çš„ä¸€ç§æŒ¯åŠ¨ç¯å¢ƒï¼Œè¿è¾“è¿‡ç¨‹å¯¹äºäº§å“æ˜¯æ€æ ·çš„ä¸€ç§æ¿€åŠ±ï¼Œè¿™æ ·æ‰èƒ½æœ‰æ ¹æ®åœ°ä¸ºäº§å“è®¾è®¡å¯é çš„å‡éœ‡åŒ…è£… å¯¹äºç«ç®­æ¥è¯´ï¼Œç³»ç»Ÿçš„å“åº”ä¸ºä¼ æ„Ÿå™¨çš„è¾“å‡ºï¼Œç³»ç»Ÿä¸ºç«ç®­ï¼Œåæ¨æ¿€åŠ±-&gt;å‡ç©ºè¿‡ç¨‹ä¸­çš„ç©ºæ°”æŒ¯åŠ¨ã€‚ å¯¹äºå¦å…‹æ¥è¯´ï¼Œå‘å°„çš„ç‚®å¼¹ä¸ºå“åº”ï¼Œå¦å…‹ç³»ç»Ÿï¼Œåæ¨åœ°é¢ç¯å¢ƒå¯¹ç³»ç»Ÿå‘å°„ç‚®å¼¹çš„æ¿€åŠ±ã€‚ ç›¸æ¯”ä¹‹ä¸‹ï¼Œé€†é—®é¢˜çš„æ±‚è§£è¦æ¯”æ­£é—®é¢˜å¤æ‚ï¼Œæ­£é—®é¢˜å»ºç«‹ODEå’ŒPDEï¼Œå†ç”¨æ•°å€¼æ–¹æ³•æ±‚è§£å³å¯ã€‚ 1.3åŠ›å­¦æ¨¡å‹ æŒ¯åŠ¨ç³»ç»Ÿçš„ä¸‰è¦ç´ ï¼šè´¨é‡ã€åˆšåº¦ã€é˜»å°¼ è´¨é‡æ˜¯æ„Ÿå—æƒ¯æ€§ï¼ˆåŒ…æ‹¬è½¬åŠ¨æƒ¯é‡ï¼‰çš„å…ƒä»¶ åˆšåº¦æ˜¯æ„Ÿå—å¼¹æ€§çš„å…ƒä»¶ é˜»å°¼æ˜¯è€—èƒ½å…ƒä»¶ æè¿°æŒ¯åŠ¨ç³»ç»Ÿçš„ä¸¤ç±»åŠ›å­¦æ¨¡å‹:ï¼ˆä¸€èˆ¬æ˜¯å»ºç«‹æ•°å­¦æ¨¡å‹ï¼‰ è¿ç»­ç³»ç»Ÿæ¨¡å‹ï¼ˆæ— é™å¤šè‡ªç”±åº¦ç³»ç»Ÿï¼Œåˆ†å¸ƒå‚æ•°ç³»ç»Ÿï¼‰ ç»“æ„å‚æ•°ï¼ˆè´¨é‡ï¼Œåˆšåº¦ï¼Œé˜»å°¼ç­‰ï¼‰åœ¨ç©ºé—´ä¸Šè¿ç»­åˆ†å¸ƒ æ•°å­¦å·¥å…·ï¼šåå¾®åˆ†æ–¹ç¨‹ æ±‚è§£æ˜¯å°†PDEç¦»æ•£åŒ–è½¬åŒ–ä¸ºODE ç¦»æ•£ç³»ç»Ÿæ¨¡å‹ï¼ˆå¤šè‡ªç”±åº¦ç³»ç»Ÿï¼Œå•è‡ªç”±åº¦ç³»ç»Ÿï¼‰ ç»“æ„å‚æ•°ä¸ºé›†ä¸­å‚é‡ æ•°å­¦å·¥å…·ï¼šå¸¸å¾®åˆ†æ–¹ç¨‹ 1.4æŒ¯åŠ¨åŠç³»ç»Ÿçš„åˆ†ç±»æŒ‰ç…§å¾®åˆ†æ–¹ç¨‹çš„å½¢å¼å¯ä»¥åˆ†ä¸ºï¼š çº¿æ€§æŒ¯åŠ¨ï¼šæè¿°å…¶è¿åŠ¨çš„æ–¹ç¨‹ä¸ºçº¿æ€§å¾®åˆ†æ–¹ç¨‹ï¼Œç›¸åº”çš„ç³»ç»Ÿç§°ä¸ºçº¿æ€§ç³»ç»Ÿã€‚çº¿æ€§ç³»ç»Ÿçš„ä¸€ä¸ªé‡è¦ç‰¹æ€§æ˜¯çº¿æ€§å åŠ åŸç†æˆç«‹ éçº¿æ€§æŒ¯åŠ¨ï¼šæè¿°å…¶è¿åŠ¨çš„æ–¹ç¨‹ä¸ºéçº¿æ€§å¾®åˆ†æ–¹ç¨‹ï¼Œç›¸åº”çš„ç³»ç»Ÿç§°ä¸ºéçº¿æ€§ç³»ç»Ÿã€‚å¯¹äºéçº¿æ€§æŒ¯åŠ¨ï¼Œçº¿æ€§å åŠ åŸç†ä¸æˆç«‹ ç†è®ºä¸Šï¼Œçº¿æ€§æŒ¯åŠ¨æœ‰ç»Ÿä¸€çš„è§£å†³æ–¹æ³•ï¼›è€Œéçº¿æ€§æŒ¯åŠ¨å°±æ²¡æœ‰ç»Ÿä¸€çš„æ–¹æ³•ã€‚ æŒ‰ç…§æ¿€åŠ±çš„æœ‰æ— å’Œæ€§è´¨å¯ä»¥åˆ†ä¸ºï¼š å›ºæœ‰æŒ¯åŠ¨ï¼šæ— æ¿€åŠ±æ—¶ç³»ç»Ÿæ‰€æœ‰å¯èƒ½çš„è¿åŠ¨é›†åˆï¼ˆä¸æ˜¯ç°å®çš„æŒ¯åŠ¨ï¼Œä»…åæ˜ ç³»ç»Ÿå…³äºæŒ¯åŠ¨çš„å›ºæœ‰å±æ€§) è‡ªç”±æŒ¯åŠ¨ï¼šæ¿€åŠ±æ¶ˆå¤±åç³»ç»Ÿæ‰€åšçš„æŒ¯åŠ¨ï¼ˆç°å®çš„æŒ¯åŠ¨) å¼ºè¿«æŒ¯åŠ¨ï¼šç³»ç»Ÿåœ¨å¤–éƒ¨æ¿€åŠ±ä½œç”¨ä¸‹æ‰€åšçš„æŒ¯åŠ¨ éšæœºæŒ¯åŠ¨ï¼šç³»ç»Ÿåœ¨éç¡®å®šæ€§çš„éšæœºæ¿€åŠ±ä¸‹æ‰€åšçš„æŒ¯åŠ¨ï¼Œä¾‹å¦‚è¡Œé©¶åœ¨å…¬è·¯ä¸Šçš„æ±½è½¦çš„æŒ¯åŠ¨ï¼Œæ¿€åŠ±æ— æ³•ä½¿ç”¨å‡½æ•°æ¥è¡¨ç¤ºï¼Œåªèƒ½ç”¨ä¸€ä¸ªéšæœºè¿‡ç¨‹æ¥è¡¨ç¤º è‡ªæ¿€æŒ¯åŠ¨ï¼šç³»ç»Ÿå—å…¶è‡ªèº«è¿åŠ¨è¯±å‘å‡ºæ¥çš„æ¿€åŠ±ä½œç”¨è€Œäº§ç”Ÿå’Œç»´æŒçš„æŒ¯åŠ¨ä¾‹å¦‚æç´å‘å‡ºçš„ä¹å£°ï¼Œåˆ‡å‰ŠåŠ å·¥çš„é«˜é¢‘æŒ¯åŠ¨ï¼Œæœºç¿¼çš„é¢¤æŒ¯ç­‰ å‚æ•°æŒ¯åŠ¨ï¼šæ¿€åŠ±ä»¥ç³»ç»Ÿæœ¬èº«çš„å‚æ•°éšæ—¶é—´å˜åŒ–çš„å½¢å¼å‡ºç°çš„æŒ¯åŠ¨ï¼Œä¾‹å¦‚ç§‹åƒè¢«è¶Šè¡è¶Šé«˜ã€‚ç§‹åƒå—åˆ°çš„æ¿€åŠ±ä»¥æ‘†é•¿éšæ—¶é—´å˜åŒ–çš„å½¢å¼å‡ºç°ï¼Œè€Œæ‘†é•¿çš„å˜åŒ–ç”±äººä½“çš„ä¸‹è¹²åŠç«™ç«‹é€ æˆã€‚","link":"/2022/01/23/%E6%8C%AF%E5%8A%A8%E5%8A%9B%E5%AD%A6/%E7%AC%AC%E4%B8%80%E7%AB%A0%E7%BB%AA%E8%AE%BA/"},{"title":"ç¬¬ä¸‰ç«  å•è‡ªç”±åº¦ç³»ç»Ÿçš„å—è¿«æŒ¯åŠ¨-ç¬¬ä¸€éƒ¨åˆ†","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä»çº¿æ€§ç³»ç»Ÿçš„å—è¿«æŒ¯åŠ¨ã€ç¨³æ€å“åº”çš„ç‰¹æ€§ã€å—è¿«æŒ¯åŠ¨çš„è¿‡æ¸¡é˜¶æ®µã€å•è‡ªç”±åº¦åº“ä»‘æ‘©æ“¦åŠ›ç³»ç»Ÿçš„å—è¿«æŒ¯åŠ¨çš„è¿‘ä¼¼åˆ†æå››ä¸ªæ–¹é¢è¿›è¡Œè®²è§£ã€‚ çº¿æ€§ç³»ç»Ÿçš„å—è¿«æŒ¯åŠ¨ç®€è°åŠ›æ¿€åŠ±ä¸‹çš„å—è¿«æŒ¯åŠ¨ å…¶å®éƒ¨å’Œè™šéƒ¨åˆ†åˆ«å’Œ $F_0cos\\omega t$ ã€$F_0sin\\omega t$ ç›¸å¯¹åº”ã€‚ å—åŠ›åˆ†æï¼š æŒ¯åŠ¨çš„å¾®åˆ†æ–¹ç¨‹ï¼š$m \\ddot{x}(t)+c \\dot{x}(t)+k x(t)=F_{0} e^{i \\omega t}$ ï¼Œæ˜¯æ˜¾å«æ—¶é—´çš„ï¼Œéé½æ¬¡å¾®åˆ†æ–¹ç¨‹ã€‚ è¿™é‡Œxä¸ºå¤æ•°å˜é‡ï¼Œåˆ†åˆ«å¯¹åº” $F_0cos\\omega t$ ã€$F_0sin\\omega t$ è¿™é‡Œè®¾$x=\\bar{x}e^{i\\omega t}$ , å…¶ä¸­çš„$\\bar{x}$ ï¼š ä¸ºç¨³æ€å“åº”çš„å¤æŒ¯å¹… ä»£å…¥åˆ€æŒ¯åŠ¨æ–¹ç¨‹ä¸­å¯å¾—ï¼š$\\left(-m \\omega^{2}+i c \\omega+k\\right) \\bar{x} e^{i \\omega t}=F_{0} e^{i \\omega t}$ $\\Rightarrow \\bar{x} = H(\\omega ) F_0$ å¤é¢‘å“åº”å‡½æ•°ï¼š$H(\\omega) = \\dfrac 1 {k-m\\omega^2+ic\\omega}$ æŒ¯åŠ¨æ–¹ç¨‹åŒ–ä¸ºï¼š$\\ddot{x}(t)+2 \\xi \\omega_{0} \\dot{x}(t)+\\omega_{0}^{2} x(t)=B \\omega_{0}^{2} e^{i \\omega t}$ å…¶ä¸­$\\omega_0=\\sqrt{\\dfrac k m}$, $B=\\dfrac {F_0} k$ (é™å˜å½¢) ï¼Œ$\\xi=\\dfrac{c}{2 \\sqrt{k m}}$ å¼•å…¥å¤–éƒ¨æ¿€åŠ±é¢‘ç‡ä¸ç³»ç»Ÿå›ºæœ‰é¢‘ç‡ä¹‹æ¯”ï¼š$s = \\dfrac \\omega {\\omega_0}$ åˆ™æœ‰ï¼š $H(\\omega)$åŒæ—¶åæ˜ äº†ç³»ç»Ÿå“åº”çš„å¹…é¢‘ç‰¹æ€§å’Œç›¸é¢‘ç‰¹æ€§ å…¶ä¸­æœ‰$\\dfrac{m}{k} \\omega^{2}=\\dfrac{\\omega^{2}}{\\omega_{0}^{2}}=s^{2} \\quad \\dfrac{c \\omega}{k}=\\dfrac{c \\omega}{m \\omega_{0}^{2}}=2 \\xi \\omega_{0} \\dfrac{\\omega}{\\omega_{0}^{2}}=2 \\xi \\dfrac{\\omega}{\\omega_{0}}=2 \\xi s$ $x(t)=\\bar{x} e^{i \\omega t}\\quad \\bar{x}=H(\\omega) F_{0}\\quad H(\\omega)=\\frac{1}{k} \\beta e^{-i \\theta}$ å¸¦å…¥å¾—ï¼š$\\Rightarrow x(t)=\\dfrac{F_{0}}{k} \\beta e^{i(\\omega t-\\theta)}=A e^{i(\\omega t-\\theta)}$ æœ‰ä¸Šå¼å¯å¾—ï¼Œé˜»å°¼æ˜¯äº§ç”Ÿç›¸ä½å·®å¾—æ ¹æºï¼Œè€Œè‡ªç”±æŒ¯åŠ¨ä¸­ç®€è°æŒ¯åŠ¨çš„ç›¸ä½å·®é€ æˆçš„åŸå› æ˜¯åˆå§‹æ¡ä»¶é€ æˆçš„ã€‚ æ²¡æœ‰é˜»å°¼cæ—¶ï¼Œ$\\zeta=0$ æ²¡æœ‰ç›¸ä½å·®ã€‚ ä¸»è¦çš„å…¬å¼æ€»ç»“å¦‚ä¸‹ï¼š ç»“è®ºå¦‚ä¸‹ï¼š çº¿æ€§ç³»ç»Ÿå¯¹ç®€è°æ¿€åŠ±çš„ç¨³æ€å“åº”æ˜¯é¢‘ç‡ç­‰åŒäºæ¿€æŒ¯é¢‘ç‡ã€è€Œç›¸ä½æ»åæ¿€æŒ¯åŠ›çš„ç®€è°æŒ¯åŠ¨ã€‚ä½ç§»ç›¸ä½è¦æ»åäºè¾“å…¥åŠ›çš„ç›¸ä½ã€‚ ç¨³æ€å“åº”çš„æŒ¯å¹…åŠç›¸ä½åªå–å†³äºç³»ç»Ÿæœ¬èº«çš„ç‰©ç†æ€§è´¨ï¼ˆm, k, cï¼‰å’Œæ¿€æŒ¯åŠ›çš„é¢‘ç‡åŠåŠ›å¹…ï¼Œè€Œä¸ç³»ç»Ÿè¿›å…¥è¿åŠ¨çš„æ–¹å¼ï¼ˆå³åˆå§‹æ¡ä»¶ï¼‰æ— å…³ã€‚ å¯¹äºæœ‰é˜»å°¼æŒ¯åŠ¨ï¼Œåˆå§‹æ¡ä»¶çš„å½±å“ä¸ºæš‚æ€çš„ï¼Œæœ€åå°±è¡°å‡æ²¡äº†ã€‚ å¯¹äºæ— é˜»å°¼çš„æŒ¯åŠ¨ï¼Œå…¶æŒ¯åŠ¨çš„è§£åº”è¯¥æ˜¯ç¨³æ€å’Œæš‚æ€çš„å åŠ ï¼Œæ˜¯ä¸åˆå§‹æ¡ä»¶æœ‰å…³çš„ã€‚ ç¨³æ€å“åº”ç‰¹æ€§å¤é¢‘ç‰¹æ€§ å½“$s\\ll 1$æ—¶ï¼Œ$(\\omega \\ll \\omega_0)$: æ¿€æŒ¯é¢‘ç‡ç›¸å¯¹äºç³»ç»Ÿå›ºæœ‰é¢‘ç‡å¾ˆä½ï¼Œ$\\beta \\approx 1$ ç»“è®ºï¼šå“åº”çš„æŒ¯å¹…A ä¸é™ä½ç§»B ç›¸å½“ å°±æ˜¯è¯´å¤–éƒ¨çš„æ¿€åŠ±éå¸¸çš„æ…¢çš„æ—¶å€™ï¼ŒåŸºæœ¬ä¸Šäº§ç”Ÿçš„æŒ¯å¹…å’Œé™ä½ç§»ç›¸å½“äº†ã€‚ å½“$s\\gg 1$æ—¶ï¼Œ$(\\omega \\gg \\omega_0)$: æ¿€æŒ¯é¢‘ç‡ç›¸å¯¹äºç³»ç»Ÿå›ºæœ‰é¢‘ç‡å¾ˆé«˜ï¼Œ$\\beta \\approx 0$ ç»“è®ºï¼šå“åº”çš„æŒ¯å¹…å¾ˆå° å¤–éƒ¨çš„æ¿€åŠ±éå¸¸çš„å¿«çš„æ—¶å€™ï¼Œè´¨é‡mååº”ä¸è¿‡æ¥äº†ï¼ŒæŒ¯å¹…å‡ ä¹æ²¡å•¥å“åº”ã€‚ å¯¹äº$s\\ll 1$å’Œ$s\\gg 1$æƒ…å†µè€Œè¨€ï¼š å¯¹åº”äºä¸åŒ $\\zeta$å€¼ï¼Œæ›²çº¿è¾ƒä¸ºå¯†é›†ï¼Œè¯´æ˜é˜»å°¼çš„å½±å“ä¸æ˜¾è‘— ç»“è®ºï¼šç³»ç»Ÿå³ä½¿æŒ‰æ— é˜»å°¼æƒ…å†µè€ƒè™‘ä¹Ÿæ˜¯å¯ä»¥çš„ å½“$s\\approx 1$æ—¶ï¼Œ$(\\omega \\approx \\omega_0)$: å¯¹åº”äºè¾ƒå° $\\zeta$ å€¼ï¼Œ$\\beta(s)$ è¿…é€Ÿå¢å¤§ï¼Œå½“ $\\zeta$ = 0 $\\Rightarrow$ $\\beta(s) \\rightarrow \\infty$ ç»“è®ºï¼šå…±æŒ¯æŒ¯å¹…æ— ç©·å¤§ï¼› åº”ç”¨ï¼š å¯¹äºæˆåƒå«æ˜Ÿè€Œè¨€ï¼Œå…±æŒ¯ä¼šé€ æˆæ‰€æˆçš„åƒæœ‰æŠ–åŠ¨ï¼Œæ¨¡ç³Šï¼Œæ­¤æ—¶çš„å…±æŒ¯éœ€è¦é˜²æ­¢ã€‚ å¯¹äºçŸ¿å±±ç”¨çš„æŒ¯åŠ¨ç­›ä»¥åŠæ‰‹æœºçš„ä¿¡å·éƒ½æ˜¯åˆ©ç”¨å…±æŒ¯ç°è±¡æ¥æ”¾å¤§æŒ¯å¹…ã€‚ ä½†å…±æŒ¯å¯¹äºæ¥è‡ªé˜»å°¼çš„å½±å“å¾ˆæ•æ„Ÿï¼Œåœ¨s=1 é™„è¿‘çš„åŒºåŸŸå†…ï¼Œå¢åŠ é˜»å°¼ä½¿æŒ¯å¹…æ˜æ˜¾ä¸‹é™ æ³¨æ„$\\beta_{max}$çš„ä½ç½® å¯¹äºæœ‰é˜»å°¼ç³»ç»Ÿï¼Œ$\\beta_{max}$ å¹¶ä¸å‡ºç°åœ¨s=1å¤„ï¼Œè€Œä¸”ç¨åå·¦ $\\dfrac {d\\beta} {ds}=0 \\Rightarrow s=\\sqrt{1-2\\zeta^2} $ å¯¹åº”çš„å³°å€¼ï¼š$\\beta_{max}=\\dfrac 1 {2\\zeta \\sqrt{1-\\zeta^2}}$ å½“$\\zeta &gt; 1/\\sqrt 2$æ—¶ï¼Œ$\\beta&lt;1$: æŒ¯å¹…æ²¡æœ‰å³°å€¼ å“è´¨å› å­å’ŒåŠåŠŸç‡å¸¦å®½ä¹‹é—´çš„å…³ç³»ï¼š é˜»å°¼è¶Šå¼±ï¼Œå¯¹åº”çš„$\\zeta$ ä¼šéå¸¸çš„å°ï¼Œä¼šé€ æˆ Q è¶Šå¤§ï¼Œå¸¦å®½è¶Šçª„ï¼Œå…±æŒ¯å³°è¶Šé™¡å³­ ç›¸é¢‘ç‰¹æ€§ å½“$s\\ll 1$æ—¶ï¼Œ$(\\omega \\ll \\omega_0)$: ç›¸ä½å·® $\\theta \\approx 0$ ä½ç§»ä¸æ¿€æŒ¯åŠ›åœ¨ç›¸ä½ä¸Šå‡ ä¹ç›¸åŒ å½“$s\\gg 1$æ—¶ï¼Œ$(\\omega \\gg \\omega_0)$: $\\theta \\approx \\pi$ ä½ç§»ä¸æ¿€æŒ¯åŠ›åç›¸ (å…¶å®è¿™å°±è§£é‡Šäº†ä¸ºä»€ä¹ˆæ­¤æ—¶çš„å“åº”æŒ¯å¹…å‡ ä¹ä¸º0) å½“$s\\approx 1$æ—¶ï¼Œ$(\\omega \\approx \\omega_0)$: å…±æŒ¯æ—¶çš„ç›¸ä½å·®ä¸º$\\dfrac \\pi 2$ ï¼Œä¸é˜»å°¼æ— å…³ é«˜å±‚ç»“æ„åœ°åŸºä¸Šæœ‰é˜»å°¼ç»“æ„ï¼Œå…¶æ¢å¤åŠ›å’Œä½ç§»ä¹‹é—´å­˜åœ¨æ»å›ç‰¹æ€§æ»å›ç¯ï¼Œæ—¶é—´ä¸Šçš„ä¹‹åã€‚ è€Œæ¿€åŠ±å’Œä½ç§»ä¹‹é—´å­˜åœ¨ç›¸ä½æ˜¯çš„æ»åç‰¹æ€§ã€‚ å—è¿«æŒ¯åŠ¨çš„è¿‡æ¸¡é˜¶æ®µæ— é˜»å°¼å—è¿«æŒ¯åŠ¨çš„è¿‡æ¸¡é˜¶æ®µå—è¿«æŒ¯åŠ¨çš„è¿‡æ¸¡é˜¶æ®µï¼š åœ¨ç³»ç»Ÿå—åˆ°æ¿€åŠ±å¼€å§‹æŒ¯åŠ¨çš„åˆå§‹é˜¶æ®µï¼Œå…¶è‡ªç”±æŒ¯åŠ¨ä¼´éšå—è¿«æŒ¯åŠ¨åŒæ—¶å‘ç”Ÿã€‚ç³»ç»Ÿçš„å“åº”æ˜¯æš‚æ€å“åº”ä¸ç¨³æ€å“åº”çš„å åŠ ã€‚ è€ƒè™‘æ— é˜»å°¼æ­£å¼¦æ¿€åŠ±çš„æƒ…å†µï¼š è§£å¾—é€šè§£æ˜¯ï¼š å¸¦å…¥åˆå§‹çš„æ¡ä»¶ï¼š$x(0)=x_{0} \\quad \\Rightarrow \\quad c_{1}=x_{0}$ $\\dot{x}(0)=\\dot{x}_{0} \\ \\Rightarrow \\ \\dot{x}(0)=c_{2} \\omega_{0}+\\dfrac{B}{1-s^{2}} \\ \\Rightarrow \\ c_{2}=\\dfrac{\\dot{x}_{0}}{\\omega_{0}}-\\dfrac{B s}{1-s^{2}}$ å¾—å‡ºæœ€åçš„è§£ä¸ºï¼š è‡ªç”±ä¼´éšçš„ç‰¹ç‚¹ï¼šä»¥ç³»ç»Ÿå›ºæœ‰é¢‘ç‡ä¸ºæŒ¯åŠ¨é¢‘ç‡ã€‚ é›¶åˆå§‹æ¡ä»¶ï¼š å¦‚æœä¸ºé›¶åˆå§‹æ¡ä»¶ï¼Œåˆ™è‡ªç”±ä¼´éšä¾ç„¶å­˜åœ¨ï¼š å…¶è§£çš„è¡¨è¾¾å¼ï¼š$x(t)=-\\dfrac{B s}{1-s^{2}} \\sin \\omega_{0} t+\\dfrac{B}{1-s^{2}} \\sin \\omega t$ $s","link":"/2022/03/06/%E6%8C%AF%E5%8A%A8%E5%8A%9B%E5%AD%A6/%E7%AC%AC%E4%B8%89%E7%AB%A0-%E5%8D%95%E8%87%AA%E7%94%B1%E5%BA%A6%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%8F%97%E8%BF%AB%E6%8C%AF%E5%8A%A8-%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86/"},{"title":"ç¬¬ä¸‰ç«  å•è‡ªç”±åº¦ç³»ç»Ÿçš„å—è¿«æŒ¯åŠ¨-ç¬¬ä¸‰éƒ¨åˆ†","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä»ä»»æ„å‘¨æœŸçš„æ¿€åŠ±å“åº”ï¼Œéå‘¨æœŸçš„æ¿€åŠ±å“åº”ä»¥åŠä»»æ„æ¿€åŠ±çš„å“åº”ï¼ˆæœå“ˆæ¢…ç§¯åˆ†ï¼‰ä¸‰ä¸ªæ–¹é¢è¿›è¡Œè®²è§£ï¼Œå¹¶å¤ä¹ äº†å…³äºå‚…é‡Œå¶çº§æ•°å¾—ç›¸å…³çŸ¥è¯†ã€‚ ä»»æ„å‘¨æœŸæ¿€åŠ±çš„å“åº”ç†è®ºåŸºç¡€å‰é¢è®¨è®ºçš„å¼ºè¿«æŒ¯åŠ¨ï¼Œéƒ½å‡è®¾äº†ç³»ç»Ÿå—åˆ°æ¿€åŠ±ä¸ºç®€è°æ¿€åŠ±ï¼Œä½†å®é™…å·¥ç¨‹é—®é¢˜ä¸­é‡åˆ°çš„å¤§å¤šæ˜¯å‘¨æœŸæ¿€åŠ±è€Œå¾ˆå°‘ä¸ºç®€è°æ¿€åŠ±ã€‚ å‡å®šç²˜æ€§é˜»å°¼ç³»ç»Ÿå—åˆ°çš„å‘¨æœŸæ¿€æŒ¯åŠ›ï¼š$F(t)=F(t+T)$, Tä¸ºå‘¨æœŸã€‚ åˆ™å‚…é‡Œå¶çº§æ•°å±•å¼€ä¸ºï¼š F(t)=\\frac{a_{0}}{2}+\\sum_{n=1}^{\\infty}\\left(a_{n} \\cos n \\omega_{1} t+b_{n} \\sin n \\omega_{1} t\\right)=\\frac{a_{0}}{2}+\\sum_{n=1}^{\\infty} c_{n} \\sin \\left(n \\omega_{1} t+\\varphi_{n}\\right)å…¶ä¸­ï¼š$c_n=\\sqrt{a_n^2+b_n^2},\\quad \\varphi_n=tg^{-1}\\dfrac {a_n} {b_n}$ , $\\tau$ä¸ºä»»ä¸€æ—¶åˆ»; \\begin{align} a_{0}&=\\frac{2}{T} \\int_{\\tau}^{\\tau+T} F(t) d t\\\\ a_{n}&=\\frac{2}{T} \\int_{\\tau}^{\\tau+T} F(t) \\cos n \\omega_{1} t d t \\quad nçš„å¶å‡½æ•°\\\\ b_{n}&=\\frac{2}{T} \\int_{\\tau}^{\\tau+T} F(t) \\sin n \\omega_{1} t d t \\quad nçš„å¥‡å‡½æ•°\\\\ \\end{align}ä¹‹åå»ºç«‹è¿åŠ¨çš„å¾®åˆ†æ–¹ç¨‹ï¼š å…¶ä¸­ï¼š $s=\\dfrac {\\omega_{1}}{\\omega_{0}} \\quad \\beta=\\dfrac{1}{\\sqrt{\\left(1-n^2s^{2}\\right)^{2}+(2 \\xi ns)^{2}}} \\quad \\theta_n=\\operatorname{tg}^{-1} \\dfrac{2 \\xi n{s}}{1-n^2s^{2}} $ å…¶ä¸­ï¼Œ$\\dfrac {a_0}{2k}$ ä»£è¡¨ç€å¹³è¡¡çš„ä½ç½®ï¼Œå½“$\\dfrac {a_0}{2}$ ä½œç”¨äºç³»ç»Ÿä¸Šæ‰€äº§ç”Ÿçš„é™å˜å½¢ å‘¨æœŸæ¿€åŠ±é€šè¿‡å‚…æ°å˜æ¢è¢«è¡¨ç¤ºæˆäº†ä¸€ç³»åˆ—é¢‘ç‡ä¸ºåŸºé¢‘æ•´æ•°å€çš„ç®€è°æ¿€åŠ±çš„å åŠ ï¼Œè¿™ç§å¯¹ç³»ç»Ÿå“åº”çš„åˆ†æè¢«æˆä¸ºè°æ³¢åˆ†ææ³• ç”±æ¬§æ‹‰å…¬å¼ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶è½¬åŒ–æˆä¸ºå¤æ•°è¡¨ç¤º $ \\sin n \\omega_{1} t=\\dfrac{i}{2}\\left(e^{-i n \\omega_{1} t}-e^{i n \\omega_{1} t}\\right) $, $ \\cos n \\omega_{1} t=\\dfrac{i}{2}\\left(e^{-i n \\omega_{1} t}+e^{i n \\omega_{1} t}\\right) $ æ­¤æ—¶çš„å¯ä»¥å°†åŸæ¥çš„å‚…é‡Œå¶æŠ€æœ¯å¼è½¬åŒ–ä¸ºï¼š \\begin{align} F(t)&=\\frac{a_{0}}{2}+\\sum_{n=1}^{\\infty}\\left(a_{n} \\cos n \\omega_{1} t+b_{n} \\sin n \\omega_{1} t\\right)\\\\ &=\\frac{a_{0}}{2}+\\sum_{n=1}^{\\infty} \\frac {a_n-ib_n} 2 e^{i n \\omega_{1} t} + \\sum_{n=1}^{\\infty} \\frac {a_n+ib_n} 2 e^{-i n \\omega_{1} t}\\\\ &=\\sum_{n=1}^{\\infty} F_ne^{i n \\omega_{1} t} \\end{align}å…¶ä¸­çš„å¯¹äºæ¯ä¸€é¡¹çš„ç³»æ•°ï¼š(å–$\\tau=-\\frac T 2$) \\begin{align} F_n&=\\dfrac {a_n-ib_n} 2= \\frac{1}{T} \\int_{\\tau}^{\\tau+T} F(t) [\\cos n \\omega_{1} t - i\\sin n \\omega_{1}t]\\ d t\\\\ &= \\frac{1}{T} \\int_{\\tau}^{\\tau+T} F(t) e^{- i n \\omega_{1} t} dt = \\frac{1}{T} \\int_{-\\frac T 2}^{\\frac T 2} F(t) e^{- i n \\omega_{1} t} dt \\end{align}æ­¤æ—¶ï¼Œåœ¨å¤æ•°è¡¨ç¤ºä¸‹çš„ç³»ç»ŸåŠ¨åŠ›å­¦æ–¹ç¨‹ä¸ºï¼š m \\ddot{x}(t)+c \\dot{x}(t)+k x(t)=\\sum_{n=1}^{\\infty} F_ne^{i n \\omega_{1} t}æœ‰å åŠ åŸç†å¯å¾—ï¼Œç³»ç»Ÿçš„ç¨³æ€å“åº”ä¸ºï¼š x(t)=\\sum_\\limits{n=-\\infty}^{\\infty} A_ne^{i(n \\omega_{1} t - \\theta_n)} \\quad \\theta_n=\\operatorname{tg}^{-1} \\dfrac{2 \\xi n{s}}{1-n^2s^{2}}å°†ä¸Šå¼è¿›è¡Œæ±‚å¯¼å¯å¾—ï¼š \\dot x(t)=\\sum_\\limits{n=-\\infty}^{\\infty} iA_n n\\omega_{1} e^{i(n \\omega_{1} t - \\theta_n)} \\quad \\ddot x(t)=-\\sum_\\limits{n=-\\infty}^{\\infty} A_n n^2 \\omega_{1}^2 e^{i(n \\omega_{1} t - \\theta_n)}å¸¦å…¥åˆ°åŸè¿åŠ¨æ–¹ç¨‹ä¸­å¯å¾—ï¼š \\sum_{n=-\\infty}^{\\infty}\\left[-m A_{n} n^{2} \\omega_{1}^{2}+i c A_{n} n \\omega_{1}+k A_{n}\\right] e^{i\\left(n \\omega_{1} t-\\theta_{n}\\right)}=\\sum_{n=-\\infty}^{\\infty} F_{n} e^{i n \\omega_{1} t} å› æ­¤æœ‰ï¼š$\\beta=\\dfrac{1}{\\sqrt{\\left(1-n^2s^{2}\\right)^{2}+(2 \\xi ns)^{2}}} \\quad A_n=\\dfrac 1 k \\beta_n F_n$ è§£å¾—ç³»ç»Ÿçš„å“åº”ä¸ºï¼š x(t)=\\sum_{n=-\\infty}^{\\infty} \\frac{1}{k \\sqrt{\\left(1-n^{2} s^{2}\\right)^{2}+(2 \\xi n s)^{2}}} F_{n} e^{i\\left(n \\omega_{1} t-\\theta_{n}\\right)}å…¶ä¸­$\\beta_n$ã€$\\theta_n$ åˆ†åˆ«ä¸ºç¬¬næ¬¡è°æ³¢æ¿€åŠ±æ‰€å¯¹åº”çš„æŒ¯å¹…æ”¾å¤§å› å­å’Œç›¸ä½å·®ã€‚ ç›¸å…³ä¾‹é¢˜ ç†æƒ³æ–¹æ³¢åªæœ‰â€œé«˜â€å’Œâ€œä½â€è¿™ä¸¤ä¸ªå€¼ã€‚ç”µæµæˆ–ç”µå‹çš„æ³¢å½¢ä¸ºçŸ©å½¢çš„ä¿¡å·å³ä¸ºçŸ©å½¢æ³¢ä¿¡å·ã€‚æ–¹æ³¢åœ¨æ•°ç å¼€å…³ç”µè·¯ä¸­å¹¿æ³›åº”ç”¨ã€‚å› ä¸ºæ–¹æ³¢å¯ä»¥å¿«é€Ÿä»ä¸€ä¸ªå€¼è½¬è‡³å¦ä¸€ä¸ª(å³0â†’1æˆ–1â†’0)ï¼Œæ‰€ä»¥æ–¹æ³¢å°±ç”¨ä½œæ—¶é’Ÿè®¯å·æ¥å‡†ç¡®åœ°è§¦å‘åŒæ­¥ç”µè·¯ã€‚å¦‚æœç”¨é¢‘ç‡å®šä¹‰åŸŸæ¥è¡¨ç¤ºæ–¹æ³¢ï¼Œå°±ä¼šå‡ºç°ä¸€è¿ä¸²çš„è°æ³¢ã€‚è¿™å¯èƒ½ä¼šäº§ç”Ÿç”µç£æ³¢å’Œç”µæµè„‰æ³¢ï¼Œå½±å“å‘¨å›´çš„ç”µè·¯ï¼Œäº§ç”Ÿå™ªå£°ã€‚ é¦–å…ˆæ˜¯ç¡®å®šå‚…é‡Œå¶çº§æ•°çš„å±•å¼€å¼ï¼š æ¿€åŠ±çš„å‘¨æœŸï¼š$T=\\dfrac {2\\pi} \\omega=\\dfrac {12\\pi} {\\omega_0}$ , å…¶ä¸­å¼¹ç°§â€”è´¨é‡çš„å›ºæœ‰é¢‘ç‡ï¼› äºæ˜¯æœ‰ï¼š$\\omega_0=\\dfrac {12\\pi} T ,\\quad \\omega_1=\\dfrac {\\omega_0} 6 = \\dfrac {2\\pi} T$ F(t)=\\frac{a_{0}}{2}+\\sum_{n=1}^{\\infty}\\left(a_{n} \\cos n \\omega_{1} t+b_{n} \\sin n \\omega_{1} t\\right)\\\\ \\begin{align} a_{0}&=\\frac{2}{T} \\int_{\\tau}^{\\tau+T} F(t) d t\\\\ a_{n}&=\\frac{2}{T} \\int_{\\tau}^{\\tau+T} F(t) \\cos n \\omega_{1} t d t \\quad nçš„å¶å‡½æ•°\\\\ b_{n}&=\\frac{2}{T} \\int_{\\tau}^{\\tau+T} F(t) \\sin n \\omega_{1} t d t \\quad nçš„å¥‡å‡½æ•°\\\\ \\end{align} å…¶ä¸­ï¼Œ$a_0$ä¸ºä¸€ä¸ªå‘¨æœŸå†…ä¿¡å·å›´æˆçš„æ€»é¢ç§¯ï¼Œå¾—$a_0=0$; åŒºé—´ $[0, T]$ å†…ï¼Œ$F(t)$ å…³äº$\\dfrac T 2$ä¸ºåå¯¹ç§°ï¼Œ è€Œ$\\cos n\\omega_1 t$å…³äº$\\dfrac T 2$å¯¹ç§°çš„ï¼Œå› æ­¤$a_n=0$ ï¼› å¯ä»¥é‚£a1æ¥è¿›è¡Œä¸¾ä¾‹ï¼Œå¾ˆå®¹æ˜“å¯ä»¥çœ‹å‡º åŒºé—´ $\\left[0, \\dfrac T 2 \\right]$ å†…ï¼Œ$F(t)$ å…³äº$\\dfrac T 4$ä¸ºå¯¹ç§°ï¼Œ è€Œ$\\sin n\\omega_1 t$å…³äº $\\dfrac T 4$ åå¯¹ç§°çš„ï¼ŒåŒæ—¶åŒºé—´ $\\left[\\dfrac T 2,T \\right]$ å†…ï¼Œ$F(t)$ å…³äº$\\dfrac {3T} 4$ä¸ºå¯¹ç§°ï¼Œ è€Œ$\\sin n\\omega_1 t$å…³äº $\\dfrac T 4$ åå¯¹ç§°çš„ï¼Œå› æ­¤$b_n=0,\\ n=2,4,6,\\cdots$ ï¼› ç»è¿‡ä¸Šé¢çš„æ¨ç†ï¼ŒåŸè¡¨è¾¾å¼å¯ä»¥åŒ–ç®€æˆï¼š F(t)=\\sum_{n=1}^{\\infty} b_{n} \\sin n \\omega_{1} t, \\\\ b_{n}=\\frac{2}{T} \\int_{\\tau}^{\\tau+T} F(t) \\sin n \\omega_{1} t\\ d t ,\\quad n= 1,3,5,\\cdotsäºæ˜¯åœ¨nå–å¥‡æ•°æ—¶ï¼Œ b_{n}=\\frac{2}{T} \\int_{0}^{T} F(t) \\sin n \\omega_{1} t\\ d t = \\frac{8}{T} \\int_{0}^{T/4} F_0 \\sin n \\omega_{1} t\\ d t=\\frac {4 F_0} {n\\pi}\\\\ n= 1,3,5,\\cdotsæœ€ç»ˆæ±‚å¾—å‘¨æœŸæ€§æ¿€åŠ±$F(t)$çš„å±•å¼€å¼ä¸ºï¼š \\begin{aligned} F(t) &=\\sum_{n=1}^{\\infty} b_{n} \\sin n \\omega_{1} t=\\frac{4 F_{0}}{\\pi} \\sum_{n=1,3,5 \\ldots }^{\\infty} \\frac{1}{n} \\sin n \\omega_{1} t \\\\ &=\\frac{4 F_{0}}{\\pi}\\left(\\sin \\omega_{1} t+\\frac{1}{3} \\sin 3 \\omega_{1} t+\\frac{1}{5} \\sin 5 \\omega_{1} t+\\cdots\\right) \\end{aligned} ä¹‹åå°†æ¿€åŠ±å¸¦å…¥åˆ°ç³»ç»Ÿçš„è¿åŠ¨æ–¹ç¨‹ä¸­å»ï¼š m \\ddot{x}(t)+c \\dot{x}(t)+k x(t)=F(t)\\\\ \\Rightarrow x=\\frac{4 F_{0}}{\\pi} \\sum_{n=1,3,5 \\ldots }^{\\infty} \\beta_n \\sin (n \\omega_{1} t-\\theta_n)å…¶ä¸­ï¼Œ$s=\\dfrac {\\omega_{1}}{\\omega_{0}} \\quad \\beta=\\dfrac{1}{\\sqrt{\\left(1-n^2s^{2}\\right)^{2}+(2 \\xi ns)^{2}}} \\quad \\theta_n=\\operatorname{tg}^{-1} \\dfrac{2 \\xi n{s}}{1-n^2s^{2}} $ ä½†ä¸è®¡é˜»å°¼æ—¶ï¼š x(t)=\\frac{4 F_{0}}{\\pi k} \\sum_{n=1,3,5 \\ldots}^{\\infty} \\frac{1}{n\\left(1-n^{2} s^{2}\\right)} \\sin n \\omega_{1} t å·¥ç¨‹ä¸Šçš„å‘¨æœŸæ¿€åŠ±è¾ƒå¤šï¼Œæ¯”ç®€è°æ¿€åŠ±å°‘ã€‚ é¦–å…ˆï¼Œæ±‚è§£å‚…é‡Œå¶çº§æ•°å±•å¼€çš„è¡¨è¾¾å¼ï¼Œè¿™é‡Œè·Ÿä¸Šé¢˜çš„æ–¹æ³•ç±»ä¼¼ï¼Œè¿˜å¯ä»¥æ ¹æ®å¥‡å¶æ€§è¿›è¡ŒåŒ–ç®€ã€‚ ä¸ºäº†ç®€åŒ–ï¼Œè¿™é‡Œä¸»è¦å–å‰ä¸‰é¡¹,å¸¦å…¥åˆ°ç³»ç»Ÿçš„åŠ¨åŠ›å­¦æ–¹ç¨‹ï¼š F(t) \\approx 25000 A-\\frac{2 \\times 10^{5} A}{\\pi^{2}} \\cos \\omega t-\\frac{2 \\times 10^{5} A}{9 \\pi^{2}} \\cos 3 \\omega t \\\\ m \\ddot{x}(t)+c \\dot{x}(t)+k x(t)=F(t)å¾—å‡ºé˜€ç¨³æ€å“åº”ï¼š \\begin{aligned} x_{p}(t)=& \\frac{25000 A}{k}-\\frac{2 \\times 10^{5} A /\\left(k \\pi^{2}\\right)}{\\sqrt{\\left(1-s^{2}\\right)^{2}+(2 \\xi s)^{2}}} \\cos \\left(\\omega t-\\phi_{1}\\right) \\\\ &-\\frac{2 \\times 10^{5} A /\\left(9 k \\pi^{2}\\right)}{\\sqrt{\\left(1-9 s^{2}\\right)^{2}+(6 \\xi s)^{2}}} \\cos \\left(3 \\omega t-\\phi_{3}\\right) \\end{aligned} éå‘¨æœŸæ¿€åŠ±çš„å“åº”ç†è®ºåŸºç¡€ å¯¹äºè„‰å†²æ¿€åŠ±æƒ…å½¢ï¼Œç³»ç»Ÿåªæœ‰æš‚æ€å“åº”è€Œä¸å­˜åœ¨ç¨³æ€å“åº”ï¼› å•ä½è„‰å†²åŠ›å¯åˆ©ç”¨ç‹„æ‹‰å…‹ï¼ˆDiracï¼‰åˆ†å¸ƒå‡½æ•°Î´(t) è¡¨ç¤ºï¼› Î´å‡½æ•°ä¹Ÿç§°ä¸ºå•ä½è„‰å†²å‡½æ•°ï¼Œå®šä¹‰ä¸ºï¼š $\\delta(t-\\tau)$çš„å›¾è±¡ç”¨ä½äºæ—¶åˆ»Ï„ã€é•¿åº¦ä¸º 1 çš„æœ‰å‘çº¿æ®µè¡¨ç¤ºã€‚ ä»¥ä¸‹å¼•å…¥ä¿¡å·ä¸ç³»ç»Ÿä¸­è®²è¿‡çš„ $\\delta$ å‡½æ•°çš„å®šä¹‰å’Œæ€§è´¨ï¼š å®šä¹‰ \\delta(t-\\tau)=\\left\\{\\begin{array}{ll}\\infty & (t=\\tau) \\\\ 0 & (t \\neq \\tau)\\end{array} \\qquad \\int_{-\\infty}^{+\\infty} \\delta(t-\\tau) d t=1\\right. \\delta(t-\\tau)=\\lim_\\limits{\\varepsilon \\rightarrow 0} \\delta_{\\varepsilon}(t-\\tau)å…¶ä¸­ï¼Œ$\\delta_{\\varepsilon}(t-\\tau)$ ä¹Ÿå¯ä»¥å®šä¹‰ä¸ºå…¶å®ƒå½¢çŠ¶çš„é¢ç§¯ä¸º 1 çš„è„‰å†²ï¼Œå…¶é‡çº²ä¸º1/ç§’ï¼Œè¡¨è¾¾å¼ä¸ºï¼š \\delta_{\\varepsilon}(t-\\tau)=\\left\\{\\begin{array}{ll}\\dfrac 1 \\varepsilon & (\\taut_{1} \\ (2)\\end{array}\\right.ï¼ˆ1ï¼‰å½“ $0 \\le t &lt; t_1$ æ—¶ï¼Œåº”ç”¨ä¸Šé¢ä¾‹é¢˜çš„ç»“æœä¸ºï¼š \\begin{aligned} x(t) & =\\frac{Q_{0}}{k}\\left(1-\\cos \\omega_{0} t\\right) \\end{aligned}ï¼ˆ2ï¼‰å½“ $t_1 \\le t &lt; t_2$ æ—¶ï¼Œ å åŠ å¯å¾—ï¼š \\begin{align} x(t)&=x_{1}(t)+x_{2}(t)\\\\&=\\frac{Q_{1}}{k}\\left[\\cos \\omega_{0}\\left(t-t_{1}\\right)-\\cos \\omega_{0} t\\right]-\\frac{Q_{2}}{k}\\left[1-\\cos \\omega_{0}\\left(t-t_{1}\\right)\\right] \\end{align}ï¼ˆ3ï¼‰å½“$t_2&lt;t$ æ—¶ï¼Œ å¯¹äºQ1ï¼Œåº”ç”¨(2)å¼ï¼š$x_1(t)=\\dfrac{Q_{1}}{k}\\left[\\cos \\omega_{0}\\left(t-t_{1}\\right)-\\cos \\omega_{0} t\\right]$ å¯¹äºQ2ï¼Œåº”ç”¨(2)å¼ï¼Œæ³¨æ„åŠ›çš„ä½œç”¨æ—¶é—´æ»åt1ï¼š \\begin{aligned} x_{2}(t) &=-\\frac{Q_{2}}{k}\\left\\{\\cos \\omega_{0}\\left[\\left(t-t_{1}\\right)-\\left(t_{2}-t_{1}\\right)\\right]-\\cos \\omega_{0}\\left(t-t_{1}\\right)\\right\\} \\\\ &=-\\frac{Q_{2}}{k}\\left[\\cos \\omega_{0}\\left(t-t_{2}\\right)-\\cos \\omega_{0}\\left(t-t_{1}\\right)\\right] \\end{aligned}å°†ä¸¤å¼ç›¸åŠ ï¼š \\begin{align} x(t)&=x_{1}(t)+x_{2}(t)\\\\&=\\frac{Q_{1}}{k}\\left[\\cos \\omega_{0}\\left(t-t_{1}\\right)-\\cos \\omega_{0} t\\right]-\\frac{Q_{2}}{k}\\left[\\cos \\omega_{0}\\left(t-t_{2}\\right)-\\cos \\omega_{0}\\left(t-t_{1}\\right)\\right]\\\\ \\end{align}","link":"/2022/03/09/%E6%8C%AF%E5%8A%A8%E5%8A%9B%E5%AD%A6/%E7%AC%AC%E4%B8%89%E7%AB%A0-%E5%8D%95%E8%87%AA%E7%94%B1%E5%BA%A6%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%8F%97%E8%BF%AB%E6%8C%AF%E5%8A%A8-%E7%AC%AC%E4%B8%89%E9%83%A8%E5%88%86/"},{"title":"ç¬¬ä¸‰ç«  å•è‡ªç”±åº¦ç³»ç»Ÿçš„å—è¿«æŒ¯åŠ¨-ç¬¬äºŒéƒ¨åˆ†","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä»ç®€è°æƒ¯æ€§åŠ›çš„å—è¿«æŒ¯åŠ¨ï¼Œæœºæ¢°é˜»æŠ—ä¸å¯¼çº³ï¼Œä»¥åŠä¸€äº›å·¥ç¨‹ä¸Šçš„å—è¿«æŒ¯åŠ¨ä¸‰ä¸ªæ–¹é¢è¿›è¡Œè®²è§£ï¼Œåœ¨å•è‡ªç”±åº¦æŒ¯åŠ¨ä¸Šé¢èŠ±äº†å¾ˆå¤šçš„æ—¶é—´ï¼ŒåæœŸçš„å¯¹äºå¤šè‡ªç”±åº¦çš„é—®é¢˜å¯ä»¥æ˜¯å‘€æ¨¡æ€å åŠ æ³•æ˜¯æ¥å°†å…¶è½¬åŒ–ä¸ºå•è‡ªç”±åº¦çš„é—®é¢˜ã€‚ ç®€è°æƒ¯æ€§åŠ›çš„å—è¿«æŒ¯åŠ¨èƒŒæ™¯ï¼šåœ°åŸºæŒ¯åŠ¨ï¼Œè½¬å­åå¿ƒå¼•èµ·çš„å—è¿«æŒ¯åŠ¨ ç‰¹ç‚¹ï¼šæ¿€æŒ¯æƒ¯æ€§åŠ›çš„å¹…å€¼ä¸é¢‘ç‡çš„å¹³æ–¹æˆæ­£æ¯”ä¾‹ ä»¥åœ°åŸºçš„ä½ç§»ä¸ºåæ ‡ é€šè¿‡ä¸Šé¢çš„æ¨ç†å¯å¾—ï¼š m_1\\ddot{x_1}(t)+c\\dot x_1(t)+kx_1(t)=mD\\omega^2e^{i\\omega t}è¿™é‡Œæˆ‘ä»¬è®¾ï¼š$mD\\omega^2=F_0$ åŒæ—¶ç”±äº$\\omega_0^2=\\dfrac k m,\\ s=\\dfrac \\omega {\\omega_0}$ æŒ¯åŠ¨çš„è§£æè¡¨è¾¾å¼å¦‚ä¸‹ï¼š x_{1}=\\beta B e^{i\\left(\\omega t-\\theta_{1}\\right)}=\\beta \\frac{F_{0}}{k} e^{i\\left(\\omega t-\\theta_{1}\\right)}=\\beta \\frac{m D \\omega^{2}}{k} e^{i\\left(\\omega t-\\theta_{1}\\right)}\\\\ =\\frac{s^{2}}{\\sqrt{\\left(1-s^{2}\\right)^{2}+\\left(2 \\xi_{s}\\right)^{2}}} D e^{i\\left(\\omega t-\\theta_{1}\\right)}=\\beta_{1} D e^{i\\left(\\omega t-\\theta_{1}\\right)}å…¶ä¸­ï¼ŒæŒ¯å¹…æ”¾å¤§å› å­ä¸ºï¼š$\\beta_1=\\dfrac{s^{2}}{\\sqrt{\\left(1-s^{2}\\right)^{2}+\\left(2 \\xi_{s}\\right)^{2}}}$, ç›¸ä½å·®ä¸ºï¼š\\theta_{1}(s)=\\operatorname{tg}^{-1} \\dfrac{2 \\xi s}{1-s^{2}} è¿™é‡Œæˆ‘ä»¬å¯¹æ¯”ç®€è°æ¿€åŠ±çš„æŒ¯åŠ¨è§£æè¡¨è¾¾å¼ï¼š äºŒè€…çš„ç›¸ä½å·®è¿˜æ˜¯ä¸€æ ·çš„ï¼Œå°±æ˜¯æŒ¯å¹…æ”¾å¤§å› å­å¤šäº†ä¸ª$s^2$ è¿™é‡Œï¼Œæˆ‘ä»¬çš„å¯ä»¥çœ‹å‡ºæœ€å·¦è¾¹å¼s&gt;1ï¼Œè´¨é‡å’Œåœ°åŸºæ˜¯åŒæ­¥çš„ï¼› ä¸­é—´çš„æ˜¯s=1ï¼Œæ­¤æ—¶ç›¸å½“äºå‘ç”Ÿäº†å…±æŒ¯ï¼Œå…¶æŒ¯å¹…ç›¸å½“å¤§ï¼› æœ€å³è¾¹æ˜¯s&lt;1ï¼Œæ­¤æ—¶ç›¸å¯¹çš„æŒ¯åŠ¨çš„ä½ç§»æ˜¯å°äºåœ°åŸºæŒ¯åŠ¨çš„å¹…å€¼çš„ã€‚ ä»¥ç»å¯¹ä½ç§»ä¸ºåæ ‡ å¦‚æœä»¥ç»å¯¹ä½ç§»ä¸ºåæ ‡ï¼š$x(t)=x_{1}(t)+x_{f}(t)$ å…¶ä¸­ï¼š$x_{1}(t)=\\beta_{1} D e^{i\\left(\\omega t-\\theta_{1}\\right)}$ ï¼Œ$x_{f}(t)=D e^{i \\omega t}$ï¼› äºæ˜¯ï¼š$x(t)=\\beta_{1} D e^{i\\left(\\omega t-\\theta_{1}\\right)}+D e^{i \\omega t}=(\\beta_{1}+e^{i\\theta_{1}})D e^{i\\left(\\omega t-\\theta_{1}\\right)}$ å…¶ä¸­ï¼ŒæŒ¯å¹…æ”¾å¤§å› å­ä¸ºï¼š$\\beta_1=\\dfrac{s^{2}}{\\sqrt{\\left(1-s^{2}\\right)^{2}+\\left(2 \\xi_{s}\\right)^{2}}}$, ç›¸ä½å·®ä¸ºï¼š$\\theta_{1}(s)=\\operatorname{tg}^{-1} \\dfrac{2 \\xi s}{1-s^{2}}$ äºæ˜¯æœ‰ï¼š \\begin{align} \\beta_{1}+e^{i \\theta_{1}}&=\\frac{s^{2}}{\\sqrt{\\left(1-s^{2}\\right)^{2}+\\left(2 \\xi_{S}\\right)^{2}}}+\\left(\\cos \\theta_{1}+i \\sin \\theta_{1}\\right)\\\\ &=\\frac{s^{2}}{\\sqrt{\\left(1-s^{2}\\right)^{2}+\\left(2 \\xi_{S}\\right)^{2}}}+\\frac{1-s^{2}}{\\sqrt{\\left(1-s^{2}\\right)^{2}+\\left(2 \\xi_{S}\\right)^{2}}}+i \\frac{2 \\zeta s}{\\sqrt{\\left(1-s^{2}\\right)^{2}+\\left(2 \\xi_{S}\\right)^{2}}}\\\\ &=\\frac{1+2 i \\xi_{S}}{\\sqrt{\\left(1-S^{2}\\right)^{2}+\\left(2 \\xi_{S}\\right)^{2}}}=\\frac{1}{\\sqrt{\\left(1-S^{2}\\right)^{2}+\\left(2 \\zeta_{S}\\right)^{2}}} \\sqrt{1+\\left(2 \\xi_{S}\\right)^{2}} e^{i \\theta_{2}}\\\\ &=\\sqrt{\\frac{1+\\left(2 \\xi_{S}\\right)^{2}}{\\left(1-S^{2}\\right)^{2}+\\left(2 \\xi_{S}\\right)^{2}}} e^{i \\theta_{2}}\\\\ &=\\beta_{2} e^{i \\theta_{2}} \\end{align} äºæ˜¯æœ‰ï¼š è¡¨è¾¾å¼ æŒ¯å¹… ç›¸ä½ åœ°åŸºä½ç§» $\\beta_{1} D e^{i\\left(\\omega t-\\theta_{1}\\right)}$ $\\dfrac{s^{2}}{\\sqrt{\\left(1-s^{2}\\right)^{2}+\\left(2 \\xi_{s}\\right)^{2}}}$ $\\operatorname{tg}^{-1} \\dfrac{2 \\xi s}{1-s^{2}}$ ç»å¯¹ä½ç§» $\\beta_{2} e^{i \\theta_{2}}$ $\\sqrt{\\dfrac{1+\\left(2 \\xi_{S}\\right)^{2}}{\\left(1-S^{2}\\right)^{2}+\\left(2 \\xi_{S}\\right)^{2}}}$ $\\operatorname{tg}^{-1} \\dfrac{2 \\xi s}{1-s^{2}}-\\operatorname{tg}^{-1}\\left(2 \\xi_{S}\\right)$ æœ€åå¸¦å…¥åˆ°è¡¨è¾¾å¼ä¸­ï¼Œå¾—åˆ°æŒ¯åŠ¨çš„è§£æè¡¨è¾¾å¼ä¸ºï¼š $x(t)=\\beta_{2} D e^{i\\left[\\omega t-\\left(\\theta_{1}-\\theta_{2}\\right)\\right]}=\\beta_{2} D e^{i(\\omega t-\\theta)}$ï¼Œå…¶ä¸­$\\theta=\\theta_{1}-\\theta_{2}$ æ— é˜»å°¼æ—¶çš„è¡¨è¾¾å¼ä¸ºï¼š$x(t)=D \\dfrac{1}{1-s^{2}} e^{i \\omega t}$ ä½¿ç”¨å…¶ä»–çš„æ–¹æ³•è¿›è¡Œåˆ†æè§’åº¦ä½ç§»ä¸ºåæ ‡çš„æƒ…å†µ x(t)=\\frac{k D}{k} \\frac{1}{\\sqrt{\\left(1-s^{2}\\right)^{2}+\\left(2 \\xi_{s}\\right)^{2}}} \\sin \\left(\\omega t-\\theta_{1}\\right)+\\frac{c D \\omega}{k} \\frac{1}{\\sqrt{\\left(1-s^{2}\\right)^{2}+\\left(2 \\xi_{s}\\right)^{2}}} \\cos \\left(\\omega t-\\theta_{1}\\right)\\\\ =\\frac{D}{\\sqrt{\\left(1-s^{2}\\right)^{2}+\\left(2 \\xi_{s}\\right)^{2}}}\\left[\\sin \\left(\\omega t-\\theta_{1}\\right)+2 \\xi s \\cos \\left(\\omega t-\\theta_{1}\\right)\\right]å…¶ä¸­æœ‰ï¼Œ $\\dfrac{c \\omega}{k}=\\dfrac{c \\omega}{\\omega_{0}^{2} m}=\\dfrac{c}{m} \\cdot \\dfrac{s}{\\omega_{0}}=2 \\xi \\omega_{0} \\dfrac{s}{\\omega_{0}}=2 \\xi_{S}$ï¼Œ $\\theta_1=\\operatorname{tg}^{-1} \\dfrac{2 \\xi s}{1-s^{2}}$ ä¹‹åï¼Œå°†$\\sin \\theta_{2}=\\dfrac{2 \\xi_{S}}{\\sqrt{1+\\left(2 \\xi_{S}\\right)^{2}}}$å’Œ$\\cos \\theta_{2}=\\dfrac1 {\\sqrt{1+\\left(2 \\xi_{S}\\right)^{2}}}$ æ­¤æ—¶æœ‰$\\theta_2=\\operatorname{tg}^{-1}\\left(2 \\xi_{S}\\right)$ äºæ˜¯ä»¤ï¼š$\\theta = \\theta_1-\\theta_2$ , $\\beta=\\sqrt{\\dfrac{1+\\left(2 \\xi_{S}\\right)^{2}}{\\left(1-s^{2}\\right)^{2}+\\left(2 \\xi_{S}\\right)^{2}}}$ å¸¦å…¥åˆ°ä¸Šè¿°å¼å­ä¸­ã€‚ å’Œå‰é¢ç¬¬ä¸€ç§æ–¹æ³•çš„ç»“æœæ˜¯ä¸€æ ·çš„ã€‚ å®é™…æ¡ˆä¾‹ é¦–å…ˆï¼Œç¡®å®šç³»ç»Ÿè¾“å…¥çš„æ¿€åŠ±ï¼š ä¹‹åï¼Œæ±‚è§£å†ç©ºè½½å’Œæ»¡è½½çš„æ—¶å€™ï¼Œæˆ‘ä»¬çš„é˜»å°¼cæ˜¯ä¸å˜çš„ï¼Œæ”¹å˜çš„åªæœ‰è´¨é‡ï¼› å› æ­¤æ ¹æ®å…¬å¼$c_{cr}=2\\sqrt{km},\\ \\dfrac c m=2\\zeta\\omega_0$ å¯å¾—ï¼š $\\Rightarrow \\ c=\\zeta c_{cr}=2\\zeta \\sqrt{km}$, ç”±äºcå’Œkæ˜¯å¸¸æ•°ï¼Œå› æ­¤å¯ä»¥å¾—å‡ºï¼š$\\zeta$ å’Œ $\\sqrt m$ æˆåæ¯” è¿›è€Œå¾—åˆ°ç©ºè½½æ—¶çš„é˜»å°¼æ¯”ä¸ºï¼š$\\xi_{2}=\\xi_{1} \\sqrt{\\dfrac{m_{1}}{m_{2}}}=1.0$ ; æ»¡è½½å’Œç©ºè½½æ—¶çš„é¢‘ç‡æ¯”ï¼š æ»¡è½½ï¼š$s_{1}=\\dfrac{\\omega}{\\omega_{01}}=\\omega \\sqrt{\\dfrac{m_{1}}{k}}=1.87$ ç©ºè½½ï¼š$s_{2}=\\dfrac{\\omega}{\\omega_{02}}=\\omega \\sqrt{\\dfrac{m_{2}}{k}}=1.87$ ç„¶åï¼Œè®¡ç®—æŒ¯å¹…ï¼Œæ»¡è½½æ—¶æŒ¯å¹… B1ï¼Œç©ºè½½æ—¶æŒ¯å¹… B2ï¼š æ»¡è½½ï¼š$\\dfrac{B_{1}}{a}=\\sqrt{\\dfrac{1+\\left(2 \\xi_{1} s_{1}\\right)^{2}}{\\left(1-s_{1}^{2}\\right)^{2}+\\left(2 \\xi_{1} s_{1}\\right)^{2}}}=0.68$ ç©ºè½½ï¼š$\\dfrac{B_{2}}{a}=\\sqrt{\\dfrac{1+\\left(2 \\xi_{2} s_{2}\\right)^{2}}{\\left(1-s_{2}^{2}\\right)^{2}+\\left(2 \\xi_{2} s_{2}\\right)^{2}}}=1.13$ å› æ­¤å¯å¾—æŒ¯å¹…æ¯”ä¸ºï¼š$B_1/B_2=0.60$ é¦–å…ˆï¼Œå°†æ¨¡å‹è¿›è¡Œç®€åŒ–ï¼Œå¹¶æ±‚è§£ç³»ç»Ÿçš„å›ºæœ‰é¢‘ç‡$\\omega=\\sqrt{k/m}=\\sqrt{g/\\delta}$ï¼š ç­‰æ•ˆçš„æ—¶å€™å¯ä»¥å°†æˆ‘ä»¬çš„æ†å­çœ‹ä½œåˆšä½“ï¼Œå°†Aå¤„çš„è¿åŠ¨ç­‰æ•ˆè¿‡å»ï¼›ç„¶åå†å°†æ†å­çœ‹ä½œæ˜¯æŸ”æ€§ä½“ï¼Œè®¡ç®—åˆšåº¦kã€‚ ä¹‹åï¼Œåˆ—å‡ºåŠ¨åŠ›å­¦æ–¹ç¨‹ï¼š $m \\ddot{x}+k\\left(x-x_{f}\\right)=0 \\Rightarrow m \\ddot{x}+k x=\\dfrac {k b d} a \\sin \\omega t$ æ ¹æ®ä¸Šé¢çš„æ±‚ç»å¯¹ä½ç§»ä¸ºåæ ‡ï¼Œä¸”æ— é˜»å°¼æƒ…å†µä¸‹çš„æ–¹ç¨‹ï¼Œ è®¡ç®—å¯å¾—ï¼š$\\bar{x}=\\dfrac{k b d / a}{k} \\cdot \\dfrac{1}{1-s^{2}}=\\dfrac{b d}{a} \\cdot \\dfrac{1}{1-s^{2}} \\quad s=\\dfrac{\\omega}{\\omega_{0}}$ æ”¯æ’‘è¿åŠ¨çš„å°ç»“ è¿™é‡Œçš„è¾“å…¥ä¸æ˜¯åŠ›ï¼Œæ˜¯åŸºç¡€çš„ä½ç§»ã€‚ è¿™é‡Œæˆ‘ä»¬æœ‰ä¸¤ç§åæ ‡å½¢å¼æ¥è€ƒè™‘åŠ¨åŠ›å­¦æ–¹ç¨‹çš„å»ºç«‹ï¼Œä¸€ä¸ªæ˜¯ä½¿ç”¨ç›¸å¯¹ä½ç§»åæ ‡ï¼Œå¦ä¸€ä¸ªæ˜¯ç ”ç©¶ç»å¯¹ä½ç§»åæ ‡ã€‚ æŒ¯å¹…æ”¾å¤§å› å­ï¼Œä¸¤ç§ä½ç§»åæ ‡ä¸‹æ˜¯ä¸ä¸€æ ·çš„ã€‚ å¦‚æœè¦æƒ³éš”æŒ¯æœ‰æ•ˆæœï¼Œé‚£ä¹ˆ$s&gt;\\sqrt{2}$ è½¬å­åå¿ƒé—®é¢˜é«˜é€Ÿæ—‹è½¬æœºæ¢°ä¸­ï¼Œåå¿ƒè´¨é‡äº§ç”Ÿçš„ç¦»å¿ƒæƒ¯æ€§åŠ›æ˜¯ä¸»è¦çš„æ¿€åŠ±æ¥æºã€‚æ—‹è½¬æœºæ¢°æ€»è´¨é‡ä¸ºMï¼Œè½¬å­åå¿ƒè´¨é‡ä¸ºmï¼Œåå¿ƒè·ä¸ºeï¼Œè½¬å­è½¬åŠ¨è§’é€Ÿåº¦ä¸º $\\omega$ è¿™é‡Œ$me$ï¼šä¸å¹³è¡¡é‡ï¼Œ$me\\omega^2$ï¼šä¸å¹³è¡¡é‡å¼•èµ·çš„ç¦»å¿ƒæƒ¯æ€§åŠ›ã€‚ äºæ˜¯æˆ‘ä»¬è®¾ï¼š$F_0=me\\omega^2$, $x(t)=\\beta B \\sin (\\omega t-\\theta)$ å…¶ä¸­$\\beta=\\dfrac 1 {\\sqrt{\\left(1-s^{2}\\right)^{2}+\\left(2 \\xi_{S}\\right)^{2} } }$, $B=\\dfrac {F_0} k=\\dfrac {me\\omega^2} k$ , $s=\\dfrac{\\omega}{\\omega_{0}}$, $\\theta=\\operatorname{tg}^{-1} \\dfrac{2 \\xi s}{1-s^{2}}$, æ³¨æ„$\\omega = \\sqrt{\\dfrac K M}$ è¿™é‡ŒBå¯ä»¥å†™ä½œä¸ºï¼š$B=\\dfrac {F_0} k=\\dfrac {me\\omega^2} k = \\dfrac {me\\omega^2} {\\omega_0^2M}=\\dfrac {me} {M} s^2$ æ­¤æ—¶æŒ¯åŠ¨çš„è¡¨è¾¾å¼ä¸ºï¼š $x(t)=\\dfrac{s^{2}}{\\sqrt{\\left(1-s^{2}\\right)^{2}+\\left(2 \\xi_{s}\\right)^{2}}} \\dfrac{m e}{M} \\sin (\\omega t-\\theta)=\\beta_{1} B_{1} \\sin (\\omega t-\\theta)$ å…¶ä¸­ï¼Œ$\\beta=\\dfrac 1 {\\sqrt{\\left(1-s^{2}\\right)^{2}+\\left(2 \\xi_{S}\\right)^{2} } }$, $B_1=\\dfrac {me} M$ å…¬å¼ï¼š$x(t)=\\dfrac{s^{2}}{\\sqrt{\\left(1-s^{2}\\right)^{2}+\\left(2 \\xi_{s}\\right)^{2}}} \\dfrac{m e}{M} \\sin (\\omega t-\\theta)$ é¦–å…ˆï¼Œå…±æŒ¯çš„æ—¶å€™ï¼Œæˆ‘ä»¬çš„s=1; ä»£å…¥å¾—å…±æŒ¯æ—¶çš„æœ€å¤§æŒ¯å¹…æ˜¯ï¼š$\\dfrac 1 {2\\zeta} \\dfrac {me}{M}=0.1(m) \\ \\Rightarrow \\ e=0.1(m)$ å…¶æ¬¡ï¼Œè¿™é‡Œå‡è®¾å¢åŠ è´¨é‡åé˜»å°¼æ˜¯ä¸å˜çš„ï¼Œå…¶å®æ˜¯è¦å˜çš„ï¼š $\\dfrac 1 {2\\zeta} \\dfrac {me}{M+\\Delta M}=0.01(m) \\ \\Rightarrow \\ \\dfrac{\\Delta M} {M}=9$ å¾—å‡ºï¼š$\\Delta M=9M$ æœºæ¢°é˜»æŠ—ä¸å¯¼çº³ å·¥ç¨‹ä¸­å¸¸ç”¨æœºæ¢°é˜»æŠ—æ¥åˆ†æç»“æ„çš„åŠ¨åŠ›ç‰¹æ€§ï¼› æœºæ¢°é˜»æŠ—å®šä¹‰ä¸ºï¼šç®€è°æ¿€æŒ¯æ—¶å¤æ•°å½¢å¼çš„è¾“å…¥ä¸è¾“å‡ºä¹‹æ¯”ï¼› ä½ç§»é˜»æŠ— Z_{x}(\\omega)=\\dfrac{F_{0} e^{i \\omega t}}{\\bar{x} e^{i \\omega t}}=\\dfrac{F_{0}}{\\bar{x}}=\\dfrac{1}{H(\\omega)}=k-m \\omega^{2}+i c \\omega\\\\ H(\\omega)=\\frac{1}{k-m \\omega^{2}+i c \\omega}ä½ç§»é˜»æŠ—ä¸å¤é¢‘å“åº”å‡½æ•°äº’ä¸ºå€’æ•°ï¼Œ $H(\\omega)$ ä¹Ÿç§°ä¸ºå¯¼çº³ã€‚ è¾“å‡ºä¹Ÿå¯ä»¥å®šä¹‰ä¸ºé€Ÿåº¦æˆ–åŠ é€Ÿåº¦ï¼Œç›¸åº”çš„æœºæ¢°é˜»æŠ—ç§°ä¸ºé€Ÿåº¦é˜»æŠ—å’ŒåŠ é€Ÿåº¦é˜»æŠ—ã€‚ é€Ÿåº¦é˜»æŠ— Z_{\\dot x}(\\omega)=\\frac{F_{0} e^{i \\omega t}}{\\dot{x}}=\\frac{F_{0} e^{i \\omega t}}{i \\omega \\bar{x} e^{i \\omega t}}=\\frac{1}{i \\omega} Z_{x}(\\omega) åŠ é€Ÿåº¦é˜»æŠ— Z_{\\ddot{x}}(\\omega)=-\\frac{1}{\\omega^{2}} Z_{x}(\\omega) æœºæ¢°é˜»æŠ—çš„å€’æ•°ç§°ä¸ºæœºæ¢°å¯¼çº³ï¼Œç›¸åº” $Z_{x}(\\omega)$ã€$Z_{\\dot x}(\\omega)$ ã€$Z_{\\ddot x}(\\omega)$ åˆ†åˆ«æœ‰ä½ç§»å¯¼çº³ã€é€Ÿåº¦å¯¼çº³å’ŒåŠ é€Ÿåº¦å¯¼çº³ã€‚ æœºæ¢°é˜»æŠ—å’Œæœºæ¢°å¯¼çº³éƒ½ä»…ä»…å–å†³äºç³»ç»Ÿæœ¬èº«çš„åŠ¨åŠ›ç‰¹æ€§ï¼ˆmï¼Œkï¼Œcï¼‰ï¼Œå®ƒä»¬éƒ½æ˜¯å¤æ•°ã€‚ ç°å·²æœ‰å¤šç§ä¸“é—¨æµ‹è¯•æœºæ¢°é˜»æŠ—çš„åˆ†æä»ªå™¨ï¼Œæ ¹æ®ç³»ç»Ÿçš„æœºæ¢°é˜»æŠ—å¯ä»¥ç¡®å®šå’Œåˆ†æç³»ç»Ÿçš„å›ºæœ‰é¢‘ç‡ã€ç›¸å¯¹é˜»å°¼ç³»æ•°ç­‰å‚æ•°åŠå…¶å®ƒåŠ¨åŠ›ç‰¹å¾ å¤é¢‘å“åº”å‡½æ•°åˆå¯å†™ä¸ºï¼š H(\\omega)=\\frac{1}{k-m \\omega^{2}+i c \\omega}=\\frac{1}{k} \\cdot \\frac{1}{\\left(1-s^{2}\\right)+i\\left(2 \\xi_{S}\\right)}å…¶ä¸­çš„æ¨¡ä¸å¹…è§’ä¸ºï¼š |H(\\omega)|=\\frac{1}{k} \\cdot \\frac{1}{\\sqrt{\\left(1-s^{2}\\right)^{2}+(2 \\xi s)^{2}}}=\\frac{\\beta}{k}=\\frac{\\beta}{F_{0} / B}=\\frac{\\beta B}{F_{0}}\\\\ \\arg H(\\omega)=\\operatorname{tg}^{-1} \\frac{2 \\xi_{S}}{\\left(1-S^{2}\\right)^{2}+\\left(2 \\xi_{S}\\right)^{2}}=-\\theta$H(\\omega)$åŒæ—¶åæ˜ äº†ç³»ç»Ÿå“åº”çš„å¹…é¢‘ç‰¹æ€§å’Œç›¸é¢‘ç‰¹æ€§ã€‚ $\\operatorname{Re}(H)=\\dfrac{1}{k} \\cdot \\dfrac{1-s^{2}}{\\left(1-s^{2}\\right)^{2}+\\left(2 \\xi{s}\\right)^{2}} \\quad \\operatorname{Im}(H)=-\\dfrac{1}{k} \\cdot \\dfrac{2 \\xi_{s}}{\\left(1-s^{2}\\right)^{2}+\\left(2 \\xi_{s}\\right)^{2}}$ è¿˜å¯ä»¥ç”¨é¢‘ç‡æ¯” s æˆ–ç›¸å¯¹é˜»å°¼ç³»æ•° $\\xi$ ä½œå‚å˜é‡ï¼ŒæŠŠ $H(\\omega)$ ç”»åœ¨å¤å¹³é¢ä¸Šï¼Œè¿™æ ·å¾—åˆ°çš„æ›²çº¿ç§°ä¸ºä¹ƒå¥æ–¯ç‰¹å›¾(Nyquict plot) å·¥ç¨‹ä¸­çš„å—è¿«æŒ¯åŠ¨é—®é¢˜æƒ¯æ€§å¼æµ‹æŒ¯ä»ª æ­¤æ—¶ï¼Œç”±$s=\\dfrac \\omega {\\omega_0}$ æ­¤æ—¶ $s \\rightarrow \\infty \\Leftrightarrow \\omega&gt;&gt;\\omega_{0}$ æœ‰$\\lim \\limits_{s \\rightarrow \\infty} A_{1} \\approx D$ ä½å›ºæœ‰é¢‘ç‡çš„æµ‹é‡ä»ªç”¨äºæµ‹é‡æŒ¯åŠ¨çš„ä½ç§»å¹…å€¼ï¼Œç§°ä¸ºä½ç§»è®¡ã€‚ å½“ä»ªå™¨å›ºæœ‰é¢‘ç‡è¿œå°äºå¤–å£³æŒ¯åŠ¨é¢‘ç‡æ—¶ï¼Œä»ªå™¨è¯»æ•°å¹…å€¼ A1 æ¥è¿‘å¤–å£³æŒ¯åŠ¨çš„æŒ¯å¹… Dã€‚ A1è¿˜å¯ä»¥å†™æˆï¼š$A_{1}=\\dfrac{1}{\\sqrt{\\left(1-s^{2}\\right)^{2}+\\left(2 \\xi{s}\\right)^{2}}}\\left(\\dfrac{D \\omega^{2}}{\\omega_{0}^{2}}\\right)$ æ­¤æ—¶ï¼Œç”±$s=\\dfrac \\omega {\\omega_0}$ æ­¤æ—¶ $s \\rightarrow 0 \\Leftrightarrow \\omega \\ll \\omega_{0}$ äºæ˜¯æœ‰$\\lim \\limits_{s \\rightarrow 0} A_{1} \\approx \\dfrac 1 {\\omega_0^2}(D\\omega^2)$ ï¼›å…¶ä¸­$D\\omega^2$ï¼šè¢«æµ‹ç‰©ä½“çš„åŠ é€Ÿåº¦å¹…å€¼ã€‚ å½“ä»ªå™¨çš„å›ºæœ‰é¢‘ç‡è¿œå¤§äºå¤–å£³æŒ¯åŠ¨é¢‘ç‡æ—¶ï¼Œä»ªå™¨è¯»æ•°çš„å¹…å€¼ A1ä¸å¤–å£³åŠ é€Ÿåº¦çš„å¹…å€¼æˆæ­£æ¯”ã€‚ é«˜å›ºæœ‰é¢‘ç‡æµ‹é‡ä»ªç”¨äºæµ‹é‡æŒ¯åŠ¨çš„åŠ é€Ÿåº¦å¹…å€¼ï¼Œç§°ä¸ºåŠ é€Ÿè®¡ã€‚ æŒ¯åŠ¨çš„éš”ç¦»ä¸»åŠ¨éš”æŒ¯å°†ä½œä¸ºæŒ¯æºçš„æœºå™¨è®¾å¤‡ä¸åœ°åŸºéš”ç¦»ï¼Œä»¥å‡å°‘å¯¹ç¯å¢ƒçš„å½±å“ç§°ä¸ºä¸»åŠ¨éš”æŒ¯ã€‚ å…·ä½“çš„è®¡ç®—å¦‚ä¸‹æ‰€ç¤ºï¼š å…¶ä¸­ï¼Œ$\\beta=\\dfrac 1 {\\sqrt{\\left(1-s^{2}\\right)^{2}+\\left(2 \\xi_{S}\\right)^{2} } }$,$s=\\dfrac{\\omega}{\\omega_{0}}$, $\\theta=\\operatorname{tg}^{-1} \\dfrac{2 \\xi s}{1-s^{2}}$ å…¶ä¸­ï¼Œ$\\theta_{2}=\\operatorname{tg}^{-1} 2 \\xi s ,\\quad \\dfrac{c \\omega}{k}=\\dfrac{c \\omega}{\\omega_{0}{ }^{2} m}=\\dfrac{c}{m} \\cdot \\dfrac{s}{\\omega_{0}}=2 \\xi \\omega_{0} \\dfrac{s}{\\omega_{0}}=2 \\xi_{S}$ å› æ­¤å¯å¾—éš”æŒ¯ç³»æ•°ä¸ºï¼š$\\eta = \\dfrac{F_{1\\max} } {F_0} = \\sqrt{\\dfrac{1+\\left(2 \\xi_{S}\\right)^{2}}{\\left(1-s^{2}\\right)^{2}+\\left(2 \\xi_{S}\\right)^{2} } }$ ç”»å‡ºä¸»åŠ¨éš”æŒ¯ç³»æ•°çš„å›¾åƒï¼Œå¯å¾—åˆ°ä»¥ä¸‹çš„ç»“è®ºï¼š å…¸å‹ä¾‹é¢˜ï¼š å°ç»“ï¼šæœ¬èŠ‚è¯¾æ˜¯å¦‚ä½•è®¡ç®—éš”æŒ¯åçš„åŠ›ï¼Œä¸»åŠ¨éš”æŒ¯ç³»æ•°çš„è®¡ç®—ã€å·²ç»é¢‘ç‡æ¯”çš„é€‰æ‹©é—®é¢˜ã€‚ è¢«åŠ¨éš”æŒ¯å°†åœ°åŸºçš„æŒ¯åŠ¨ä¸æœºå™¨è®¾å¤‡éš”ç¦»ï¼Œä»¥é¿å…å°†æŒ¯åŠ¨ä¼ è‡³è®¾å¤‡ï¼Œç§°ä¸ºè¢«åŠ¨éš”æŒ¯ã€‚ è¿™é‡Œä¸»åŠ¨éš”æŒ¯ç³»æ•°å’Œè¢«åŠ¨éš”æŒ¯ç³»æ•°çš„è¡¨è¾¾å¼æ—¶ç›¸åŒçš„ï¼Œä½†æ˜¯å…¶ä¸­çš„å†…æ¶µæ˜¯ä¸ä¸€æ ·çš„ã€‚ ä¸»åŠ¨éš”æŒ¯ç³»æ•°æ˜¯åŠ›ä¹‹æ¯”ï¼Œè€Œè¢«åŠ¨éš”æŒ¯ç³»æ•°æ˜¯ä½ç§»ä¹‹æ¯”ã€‚ å…¸å‹ä¾‹é¢˜ï¼š ä¸ºè®¡ç®—æ¢è‡ªèº«è´¨é‡å¯¹å…¶æ¨ªå‘æŒ¯åŠ¨å›ºæœ‰é¢‘ç‡çš„å½±å“ï¼Œéœ€ç¡®å®šæ¢è´¨é‡ç­‰æ•ˆåˆ°è‡ªç”±ç«¯æ—¶çš„ç­‰æ•ˆè´¨é‡ï¼Œç„¶åå¯æŒ‰å•è‡ªç”±åº¦è®¡ç®—æ‚¬è‡‚æ¢æ¨ªå‘æŒ¯åŠ¨çš„å›ºæœ‰é¢‘ç‡ã€‚ è¿™é‡Œæˆ‘ä»¬é¦–å…ˆè®¡ç®—æ˜¯æ‚¬è‡‚æ¢çš„ç­‰æ•ˆè´¨é‡ï¼š ç­‰æ•ˆä¹‹åç³»ç»Ÿç§°ä¸ºä¸€ä¸ªå•è‡ªç”±åº¦ç³»ç»Ÿï¼š æ ¹æ®åˆšåº¦å’Œç­‰æ•ˆçš„è´¨é‡å¯ä»¥å¾—å‡ºï¼š ç”µè·¯æ¿çš„å›ºæœ‰é¢‘ç‡ï¼š$\\omega_0 = \\sqrt{\\dfrac {k_b}{m_{eq}}}=\\sqrt{\\dfrac{1.296\\times10^6}{0.5893}}rad/s=1482.99\\ rad/s$ è®¡ç®—æœºåº•åº§çš„é¢‘ç‡ï¼š$\\omega = \\dfrac{2\\pi \\times 3000}{60} = 312.66\\ rad/s$ é¢‘ç‡ä¹‹æ¯”ï¼š$s=\\dfrac{\\omega}{\\omega_0}=\\dfrac{312.66}{1482.99}=0.2108$ ä½ç§»ä¼ é€’ç‡ï¼š \\eta = \\sqrt{\\dfrac{1+\\left(2 \\xi_{S}\\right)^{2}}{\\left(1-s^{2}\\right)^{2}+\\left(2 \\xi{s}\\right)^{2}}}=\\sqrt{\\dfrac{1+\\left(2 \\times 0.01\\times0.2108\\right)^{2}}{\\left(1-0.2108^{2}\\right)^{2}+\\left(2 \\times0.01\\times{0.2108}\\right)^{2}}}=1.0465 ä½ç§»ä¼ é€’ç‡ï¼ˆ104.65%ï¼‰å·²è¶…è¿‡æœ€å¤§è®¸å¯å€¼ï¼ˆ10%ï¼‰; å› æ­¤è¿™é‡Œå‡è£…äº†éš”æŒ¯å™¨ï¼Œè¿™é‡ŒåŠ å…¥ä»¥åå¯èƒ½ä¼šæˆä¸ºä¸€ä¸ªåŒè‡ªç”±åº¦çš„ç³»ç»Ÿï¼Œå› æ­¤ä¸ºäº†ç®€åŒ–æ¨¡å‹ï¼Œå°†æ¢ç®€åŒ–ä¸ºåˆšä½“ã€‚ äºæ˜¯è®¡ç®—éš”æŒ¯å™¨çš„é¢‘ç‡å’Œåˆšåº¦ï¼š $k=\\dfrac {M\\omega^2} {s^2} = \\dfrac {2.75\\times 312.66^2}{11.0218}N/m = 24390.7309\\ N/m$ éš”æŒ¯å™¨çš„é˜»å°¼å¸¸æ•°ä¸ºï¼š $c=2\\xi\\sqrt{Mk}=2\\times 0.01 \\sqrt {2.75\\times24390.7309}=5.1797\\ N\\cdot s/m$ è½¬å­çš„ä¸´ç•Œè½¬é€Ÿæ°”è½®æœºã€å‘ç”µæœºç­‰é«˜é€Ÿæ—‹è½¬æœºæ¢°åœ¨å¼€æœºæˆ–åœæœºè¿‡ç¨‹ä¸­ç»è¿‡æŸä¸€è½¬é€Ÿé™„è¿‘æ—¶ï¼Œæ”¯æ’‘ç³»ç»Ÿç»å¸¸ä¼šå‘ç”Ÿå‰§çƒˆæŒ¯åŠ¨ã€‚ è½´ä»¥è§’é€Ÿåº¦$\\omega$æ’é€Ÿæ—‹è½¬ï¼Œè½´æ²¿ç€xå’Œyæ–¹å‘çš„æ¨ªå‘åˆšåº¦ï¼š$k=\\dfrac {48EI} {l^3}$ ç”±äºç¦»å¿ƒæƒ¯æ€§åŠ›ï¼Œè½´äº§ç”Ÿçš„é™æ‰°åº¦$OO_1=f$ ç²˜æ€§é˜»å°¼åŠ›æ­£æ¯”äºåœ†ç›˜å½¢å¿ƒ $O_1$ çš„é€Ÿåº¦ è®¾å½¢å¿ƒ $O_1$ çš„åæ ‡$(x,y)$ï¼Œè´¨å¿ƒCçš„åæ ‡ä¸º$(x+e\\cos\\omega t,\\ y+\\sin \\omega t)$ ç”±è´¨å¿ƒçš„è¿åŠ¨å®šç†ï¼š m\\frac{d^2}{dt^2} (x+e\\cos\\omega t)=-kx-c\\dot x\\\\ m\\frac{d^2}{dt^2} (y+e\\sin\\omega t)=-ky-c\\dot y\\\\ è®¾ï¼š$\\omega_0 =\\sqrt{k/m}=\\sqrt{g/l_0}$ ï¼Œå…¶ä¸­$l_0$æ˜¯é™å˜å½¢ï¼Œ$\\omega_0 $ è½¬å­ä¸è½¬åŠ¨è€Œä½œæ¨ªå‘è‡ªç”±æŒ¯åŠ¨æ—¶çš„å›ºæœ‰é¢‘ç‡ æ­¤æ—¶åŠ¨æ‰°åº¦ä¸ºï¼š$f=\\sqrt{x^2+y^2}=e\\beta_1=\\dfrac {es^2} {\\sqrt{\\left(1-s^{2}\\right)^{2}+\\left(2 \\xi{s}\\right)^{2} } }$ å½“s=1æ—¶ï¼š$f=\\dfrac e {2\\xi}$ ,æ­¤æ—¶çš„$\\omega=\\omega_0$,å³è½¬åŠ¨é¢‘ç‡ä¸è½¬å­çš„å›ºæœ‰é¢‘ç‡ç›¸ç­‰ï¼› å¯è§ï¼Œå½“é˜»å°¼æ¯”$\\xi$ è¾ƒå°æ—¶ï¼Œå³ä½¿è½¬å­å¹³è¡¡å¾—å¾ˆå¥½(e å¾ˆå°)ï¼ŒåŠ¨æŒ åº¦f ä¹Ÿä¼šç›¸å½“å¤§ï¼Œå®¹æ˜“ä½¿è½´ç ´åï¼Œè¿™æ ·çš„è½¬é€Ÿç§°ä¸ºä¸´ç•Œè½¬é€Ÿï¼š æ¯åˆ†é’Ÿçš„è½¬é€Ÿè¡¨ç¤ºï¼š$n_f=\\dfrac {60\\omega_f}{2 \\pi} (r/min)$ å…¶ä¸­ï¼Œ$\\omega_f=\\omega_0=\\sqrt{k/m}$ å½“s&gt;&gt;1æ—¶ï¼Œå³$\\omega \\gg \\omega_0$, æœ‰ï¼š$\\beta_1 \\approx1$ , $\\theta_1 \\approx \\pi$ , è½¬åŠ¨é¢‘ç‡è¿œå¤§äºè½¬å­å›ºæœ‰é¢‘ç‡, å‡ºç°è‡ªåŠ¨å®šå¿ƒç°è±¡ã€‚ è¿™é‡Œé¢ä¸»è¦å­¦ä¼šå¦‚ä½•æ±‚ä¸´ç•Œè½¬é€Ÿï¼Œä»¥åŠäº†è§£è‡ªåŠ¨å®šå¿ƒç°è±¡ã€‚ è®¡ç®—å®ä¾‹ è¿™é‡Œï¼Œåœ¨å•è‡ªç”±åº¦æŒ¯åŠ¨ä¸Šé¢èŠ±äº†å¾ˆå¤šçš„æ—¶é—´ï¼ŒåæœŸçš„å¯¹äºå¤šè‡ªç”±åº¦çš„é—®é¢˜å¯ä»¥æ˜¯å‘€æ¨¡æ€å åŠ æ³•æ˜¯æ¥å°†å…¶è½¬åŒ–ä¸ºå•è‡ªç”±åº¦çš„é—®é¢˜ã€‚","link":"/2022/03/08/%E6%8C%AF%E5%8A%A8%E5%8A%9B%E5%AD%A6/%E7%AC%AC%E4%B8%89%E7%AB%A0-%E5%8D%95%E8%87%AA%E7%94%B1%E5%BA%A6%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%8F%97%E8%BF%AB%E6%8C%AF%E5%8A%A8-%E7%AC%AC%E4%BA%8C%E9%83%A8%E5%88%86/"},{"title":"ç¬¬äºŒç« å•è‡ªç”±åº¦ç³»ç»Ÿè‡ªç”±æŒ¯åŠ¨_ç¬¬ä¸€éƒ¨åˆ†","text":"å•è‡ªç”±åº¦ç³»ç»ŸæŒ¯åŠ¨çš„ç¬¬ä¸€éƒ¨åˆ†ï¼Œä¸»è¦è®²çš„æ˜¯æ— é˜»å°¼è‡ªç”±æŒ¯åŠ¨ã€èƒ½é‡æ³•ã€ç‘åˆ©æ³•ä»¥åŠç­‰æ•ˆåˆšåº¦ä¸è´¨é‡ã€‚ æ— é˜»å°¼çš„è‡ªç”±æŒ¯åŠ¨ä»¤$x$ä¸ºä½ç§»ï¼Œä»¥è´¨é‡å—é™å¹³è¡¡ä½ç½®ä¸ºåŸç‚¹ï¼Œ$\\lambda$ä¸ºé™å˜å½¢ã€‚å—åˆ°åˆå§‹æ‰°åŠ¨æ—¶ï¼Œç”±ç‰›é¡¿ç¬¬äºŒå®šå¾‹ï¼Œå¾—ï¼š m\\ddot x(t) = mg - k(\\lambda+x(t))åœ¨é™å¹³è¡¡æ—¶çš„ä½ç½®ï¼š$mg = k\\lambda$ åˆ™ç‰©ä½“çš„æŒ¯åŠ¨æˆ–è‡ªç”±æŒ¯åŠ¨çš„å¾®åˆ†æ–¹ç¨‹ä¸ºï¼š m\\ddot x(t)+kx(t)=0ä»¤ï¼š$\\omega_0=\\sqrt \\frac{k}{m}$ å›ºæœ‰é¢‘ç‡ï¼Œå•ä½ï¼šå¼§åº¦/ç§’ï¼ˆrad/s) åˆ™æœ‰å¾®åˆ†æ–¹ç¨‹ä¸ºï¼š$\\ddot x(t) + \\omega_0^2x(t)=0 \\Rightarrow$ å¯¹åº”å¾—ç‰¹å¾æ–¹ç¨‹ä¸ºï¼š$ms^2+k=0 \\Rightarrow$ ç‰¹å¾æ ¹ï¼š$s_{1,2}=\\pm i\\omega_0$ $s_1ã€s_2$éƒ½æ»¡è¶³ç‰¹å¾æ–¹ç¨‹ï¼Œå› æ­¤é€šè§£å¯ä»¥å†™ä¸º \\begin{align} x(t) &= A_1e^{s_1t}+A_2 e^{s_2t}\\\\ &=A_1e^{i\\omega t}+A_2 e^{-i\\omega t}\\\\ &= c_1 \\cos (\\omega_0t) +c_2 \\sin (\\omega_0t)\\\\ &= A \\sin (\\omega_0t+\\varphi) \\end{align}$c_1å’Œc_2$ä¸ºæ–°å¸¸æ•°ï¼Œä¸»è¦ç”±åˆå§‹æ¡ä»¶æ¥å†³å®š æŒ¯å¹…ï¼š$A=\\sqrt {(c_1^2+c_2^2)}$ åˆç›¸ä½ï¼š$\\varphi=tg^{-1} \\left (\\dfrac {c1}{c2} \\right )$ $\\omega_0$ ï¼šç³»ç»Ÿå›ºæœ‰çš„æ•°å€¼ç‰¹å¾ï¼Œä¸ç³»ç»Ÿæ˜¯å¦æŒ¯åŠ¨ä»¥åŠå¦‚ä½•æŒ¯åŠ¨æ— å…³ã€‚ $A,\\varphi$ï¼šéç³»ç»Ÿå›ºæœ‰æ•°å­—ç‰¹å¾ï¼Œä¸ç³»ç»Ÿæ‰€å—æ¿€åŠ±å’Œåˆå§‹çŠ¶æ€æœ‰å…³ã€‚ è€ƒè™‘ç³»ç»Ÿåœ¨åˆå§‹æ‰°åŠ¨ä¸‹çš„è‡ªç”±æŒ¯åŠ¨ï¼Œè®¾$t=\\tau$çš„åˆå§‹ä½ç§»å’Œåˆå§‹é€Ÿåº¦ä¸ºï¼š$x(\\tau)=x_\\tau \\qquad \\dot x(\\tau)=\\dot x_\\tau$ åˆ™ä»¤ï¼š c_1=b_1 \\cos(\\omega_0 \\tau)-b_2\\sin (\\omega_0\\tau)\\\\ c_2=b_1 \\sin(\\omega_0 \\tau)-b_2\\cos (\\omega_0\\tau)å¸¦å…¥å¾—ï¼š$b_1=x_\\tau \\quad b_2=\\dfrac{\\dot x_\\tau}{\\omega_0}$ å¹¶ä¸”$\\tau$æ—¶åˆ»åå¾—è‡ªç”±æŒ¯åŠ¨çš„è§£ä¸ºï¼š x(t) = x_\\tau \\cos \\omega_0(t-\\tau) +\\frac{\\dot x_\\tau}{\\omega_0} \\sin \\omega_0(t-\\tau)\\\\å¸¦å…¥é›¶æ—¶åˆ»çš„åˆå§‹æ¡ä»¶$x(0)=x_0 \\qquad \\dot x(0)=\\dot x_0$å¯å¾—ï¼š x(t) = x_0 \\cos \\omega_0(t) +\\frac{\\dot x_0}{\\omega_0} \\sin \\omega_0(t)=A\\sin(\\omega_0t+\\varphi)æ­¤æ—¶çš„æŒ¯å¹…ä¸º$A=\\sqrt{x_0^2+\\left(\\frac{\\dot x_0}{\\omega_0}\\right)^2}$ï¼Œç›¸ä½ä¸º$\\varphi=tg^{-1} \\dfrac{x_0\\omega_0}{\\dot x_0}$ æ— é˜»å°¼çš„è´¨é‡å¼¹ç°§ç³»ç»Ÿå—åˆ°åˆå§‹æ‰°åŠ¨åï¼Œå…¶è‡ªç”±æŒ¯åŠ¨æ˜¯ä»¥$\\omega_0$ä¸ºæŒ¯åŠ¨é¡¿ç‡çš„ç®€è°æŒ¯åŠ¨,å¹¶ä¸”æ°¸æ— ä¼‘æ­¢ã€‚ åˆå§‹æ¡ä»¶çš„è¯´æ˜ï¼šåˆå§‹æ¡ä»¶æ˜¯å¤–ç•Œèƒ½é‡è½¬å…¥çš„ä¸€ç§æ–¹å¼ï¼Œ æœ‰åˆå§‹ä½ç§»å³è½¬å…¥äº†å¼¹æ€§åŠ¿èƒ½ã€‚ æœ‰åˆå§‹é€Ÿåº¦å³è½¬å…¥äº†åŠ¨èƒ½ï¼Œç”¨é”¤å­æ•²å‡»çš„è„‰å†²å°±æ˜¯è¾“å…¥äº†åŠ¨èƒ½ã€‚ å¦‚å›¾æ‰€ç¤ºï¼šå¯ä»¥å¾—å‡ºï¼Œ å¼¹ç°§çš„åˆšåº¦ä¸ºè“è‰²æœ€å¤§ã€é»‘è‰²æœ€å°ã€‚ åˆšåº¦è¶Šå¤§ã€åœ†é¢‘ç‡$\\omega_0=\\sqrt{\\dfrac{k}{m}}$ è¶Šå¤§ï¼Œå‘¨æœŸï¼ˆ$T=\\dfrac{2\\pi}{\\omega_0}$ï¼‰è¶Šå°ã€‚ ç”±æ­¤å¾—å‡ºåœ†é¢‘ç‡çš„å¦ä¸€ç§è®¡ç®—æ–¹æ³•ï¼š ç”±äºåœ¨é™æ­¢æƒ…å†µä¸‹$mg=k\\lambda$ å¯å¾—ï¼š$\\omega_0=\\sqrt{\\dfrac{k}{m}}=\\sqrt{\\dfrac{g}{\\lambda}}$ å¯¹äºä¸æ˜“å¾—åˆ°må’Œk çš„ç³»ç»Ÿï¼Œè‹¥èƒ½æµ‹å‡ºé™å˜å½¢$\\lambda$ï¼Œåˆ™ç”¨è¯¥å¼è®¡ç®—è¾ƒä¸ºæ–¹ä¾¿ã€‚ æ— é˜»å°¼æŒ¯åŠ¨çš„è®¡ç®—å®ä¾‹ é¦–å…ˆï¼Œæˆ‘ä»¬è§„å®šçš„åŸç‚¹ä¸€èˆ¬ä¸ºé™å¹³è¡¡ä½ç½®ï¼Œè¿™æ ·å¯ä»¥æ—¶å»ºæ¨¡å¾—åˆ°äº†å¾®åˆ†æ–¹ç¨‹ä¸ºé½æ¬¡çš„ï¼Œåœ¨åŸé•¿å¤„å»ºæ¨¡æ—¶ï¼Œå¾®åˆ†æ–¹ç¨‹ä¸ºéé½æ¬¡çš„ã€‚ m\\ddot x+kx=0\\\\ å¦‚æœä»¥åŸé•¿çš„ä½ç½®è¿›è¡Œå»ºæ¨¡ï¼š\\\\ m\\ddot x+k x=mg ç”±é¢˜å¯å¾—æŒ¯åŠ¨çš„é¢‘ç‡ä¸ºï¼š$\\omega_0=\\sqrt{\\dfrac{gk}{W}}=19.6\\,rad/s$ é‡ç‰©åŒ€é€Ÿä¸‹é™æ—¶å¤„äºé™å¹³è¡¡ä½ç½®ï¼Œè‹¥å°†åæ ‡åŸç‚¹å–åœ¨ç»³è¢«å¡ä½ç¬æ—¶é‡ç‰©æ‰€åœ¨ä½ç½®ï¼Œåˆ™t=0æ—¶æœ‰ï¼Œ$x_0=0\\quad \\dot x_0=v$ äºæ˜¯å¸¦å…¥æŒ¯åŠ¨æ–¹ç¨‹ï¼š \\begin{align} x(t) &= x_0 \\cos \\omega_0(t) +\\frac{\\dot x_0}{\\omega_0} \\sin \\omega_0(t)\\\\ &=\\dfrac{v}{\\omega_0} \\sin(\\omega_0t)=12.8\\sin(19.6t) (cm) \\end{align} æ±‚ç»³å­çš„æœ€å¤§å¼ åŠ›ï¼Œä¸€å®šæ—¶æ˜¯ç»³å­åœ¨æœ€åº•éƒ¨æ—¶çš„ã€‚ç»³ä¸­æœ€å¤§å¼ åŠ›ç­‰äºé™å¼ åŠ›ä¸å› ä¸ºæŒ¯åŠ¨å¼•èµ·åŠ¨çš„å¼ åŠ›ä¹‹å’Œï¼š T_{max}=T_s+kA=W+kA\\\\ =1.47\\times10^5+0.74\\times10^5=2.21\\times10^5 åŠ¨å¼ åŠ›å‡ ä¹æ˜¯é™å¼ åŠ›çš„ä¸€åŠ ç”±äº$kA=k\\dfrac{v}{\\omega_0}=v\\sqrt{km}$ ä¸ºäº†å‡å°‘æŒ¯åŠ¨å¼•èµ·çš„åŠ¨å¼ åŠ›ï¼Œåº”å½“é™ä½å‡é™ç³»ç»Ÿçš„åˆšåº¦ã€‚å°½ç®¡è¿™æ ·å¯èƒ½ä¼šé€ æˆAè¿‡å¤§èˆ’é€‚æ€§ä¸‹é™ï¼Œä½†æ˜¯ç”±äºåŠ é€Ÿåº¦å‡å°ï¼Œå®‰å…¨æ€§å¾—åˆ°ä¿è¯ã€‚ é¦–å…ˆï¼Œå–å¹³è¡¡ä½ç½®ï¼Œä»¥æ¢æ‰¿å—é‡ç‰©é™å¹³è¡¡ä½ç½®ä¸ºåæ ‡åŸç‚¹ï¼ˆå°±åƒç›¸å½“äºå°†é‡ç‰©å¹³ç¨³çš„æ”¾åœ¨ä¸Šé¢äº§ç”Ÿçš„é™å˜å½¢ä¸º$\\lambda$ï¼‰ ç”±ææ–™åŠ›å­¦å¾—ï¼š$\\lambda=\\dfrac{mgl^3}{48EJ}$ è‡ªç”±æŒ¯åŠ¨é¢‘ç‡ï¼š$\\omega_0=\\sqrt{\\dfrac{g}{\\lambda}}=\\sqrt {\\dfrac{48EJ}{ml^3}}$ æ’å‡»æ—¶åˆ»ä¸ºé›¶æ—¶åˆ»ï¼Œåˆ™t=0 æ—¶ï¼Œæœ‰ï¼š$x_0=-\\lambda\\quad\\dot x_0=\\sqrt{2gh}$ è‡ªç”±æŒ¯åŠ¨æŒ¯å¹…ï¼š$A=\\sqrt{x_0^2+\\left(\\frac{\\dot x_0}{\\omega_0}\\right)^2}=\\sqrt{\\lambda^2+2h\\lambda}$ æ¢çš„æœ€å¤§æ‰°åº¦ï¼š$\\lambda_{max}=A+\\lambda$ ç”±ç‰›é¡¿ç¬¬äºŒå®šå¾‹ï¼š I\\ddot \\theta(t)+k_\\theta \\theta(t)=0\\\\ \\ddot \\theta(t)+\\omega_0^2\\theta(t)=0 åˆ™æ‰­æŒ¯çš„å›ºæœ‰é¢‘ç‡ä¸º$\\omega_0=\\sqrt{\\dfrac{k_\\theta}{I}}$ æ€»ç»“ï¼šç”±ä¸Šä¾‹å¯çœ‹å‡ºï¼Œé™¤åæ ‡ä¸åŒå¤–ï¼Œè§’æŒ¯åŠ¨ä¸ç›´çº¿æŒ¯åŠ¨çš„æ•°å­¦æè¿°å®Œå…¨ç›¸åŒã€‚å¦‚æœåœ¨å¼¹ç°§è´¨é‡ç³»ç»Ÿä¸­å°†mã€k ç§°ä¸ºå¹¿ä¹‰è´¨é‡åŠå¹¿ä¹‰åˆšåº¦ï¼Œåˆ™å¼¹ç°§è´¨é‡ç³»ç»Ÿçš„æœ‰å…³ç»“è®ºå®Œå…¨é€‚ç”¨äºè§’æŒ¯åŠ¨ã€‚ä»¥åä¸åŠ ç‰¹åˆ«å£°æ˜æ—¶ï¼Œå¼¹ç°§è´¨é‡ç³»ç»Ÿæ˜¯å¹¿ä¹‰çš„ã€‚ ä»ä¸Šä¸¤ä¾‹è¿˜å¯çœ‹å‡ºï¼Œå•è‡ªç”±åº¦æ— é˜»å°¼ç³»ç»Ÿæ€»åŒ…å«ç€æƒ¯æ€§å…ƒä»¶å’Œå¼¹æ€§å…ƒä»¶ä¸¤ç§åŸºæœ¬å…ƒä»¶ã€‚ æƒ¯æ€§å…ƒä»¶æ˜¯æ„Ÿå—åŠ é€Ÿåº¦çš„å…ƒä»¶ï¼Œå®ƒè¡¨ç°ä¸ºç³»ç»Ÿçš„è´¨é‡æˆ–è½¬åŠ¨æƒ¯é‡ï¼› å¼¹æ€§å…ƒä»¶æ˜¯äº§ç”Ÿä½¿ç³»ç»Ÿæ¢å¤åŸæ¥çŠ¶æ€çš„æ¢å¤åŠ›çš„å…ƒä»¶ï¼Œå®ƒè¡¨ç°ä¸ºå…·æœ‰åˆšåº¦æˆ–æ‰­è½¬åˆšåº¦çš„å¼¹æ€§ä½“ã€‚ åŒä¸€ä¸ªç³»ç»Ÿä¸­ï¼Œè‹¥æƒ¯æ€§å¢åŠ ï¼Œåˆ™ä½¿å›ºæœ‰é¢‘ç‡é™ä½ï¼Œè€Œè‹¥åˆšåº¦å¢åŠ ï¼Œåˆ™å›ºæœ‰é¢‘ç‡å¢å¤§ã€‚ æ±‚å¤æ‘†åœ¨å¹³è¡¡ä½ç½®é™„è¿‘åšå¾®æŒ¯åŠ¨æ—¶çš„å¾®åˆ†æ–¹ç¨‹å’Œå›ºæœ‰é¢‘ç‡ã€‚è¿™é‡Œæˆ‘ä»¬è€ƒè™‘çš„æŒ¯åŠ¨éƒ½æ˜¯å¾®æŒ¯åŠ¨ï¼ˆ$\\sin \\theta \\approx \\theta$ )ã€‚ é¦–å…ˆï¼Œç”±ç‰›é¡¿å®šå¾‹ï¼š$I_0\\ddot \\theta(t)+mga\\sin \\theta(t)=0$ å¾—å‡ºå›ºæœ‰é¢‘ç‡$\\omega_0=\\sqrt{\\dfrac{mga}{I_0}}$ è‹¥å·²æµ‹å‡ºç‰©ä½“çš„å›ºæœ‰é¢‘ç‡ï¼Œåˆ™å¯æ±‚å‡º$\\omega_0$ï¼Œå†ç”±ç§»è½´å®šç†ï¼Œå¯å¾—ç‰©è´¨ç»•è´¨å¿ƒçš„è½¬åŠ¨æƒ¯é‡ï¼š$I_c=I_0-ma^2$ å®éªŒç¡®å®šå¤æ‚å½¢çŠ¶ç‰©ä½“çš„è½¬åŠ¨æƒ¯é‡çš„ä¸€ä¸ªæ–¹æ³•ã€‚ ä»¥é™å¹³è¡¡ä½ç½®ä¸ºåæ ‡åŸç‚¹å»ºç«‹åæ ‡ç³»ï¼ŒæŒ¯åŠ¨å›ºæœ‰é¢‘ç‡ï¼š$\\omega_0=\\sqrt{\\dfrac{K}{m}}=70rad/s$ æŒ¯åŠ¨åˆå§‹æ¡ä»¶ï¼š$kx_0=mg\\times\\sin30Â° \\ \\Rightarrow x_0=-0.1cm$ ç”±é¢˜åˆå§‹é€Ÿåº¦ä¸º$\\dot x_0=0$ï¼Œåˆ™è¿åŠ¨æ–¹ç¨‹ä¸º$x(t)=-0.1\\cos(70t) cm$ å¦‚æœç³»ç»Ÿç«–ç›´æ”¾ç½®ï¼ŒæŒ¯åŠ¨é¢‘ç‡æ˜¯å¦æ”¹å˜ï¼Ÿä¸æ”¹å˜ï¼Œå› ä¸ºè´¨é‡æ˜¯ä¸å˜çš„ï¼Œåªæœ‰åŸé•¿ä¼šæ”¹å˜ã€‚ èƒ½é‡æ³• å¯¹äºä¸è®¡é˜»å°¼å³è®¤ä¸ºæ²¡æœ‰èƒ½é‡æŸå¤±çš„å•è‡ªç”±åº¦ç³»ç»Ÿï¼Œå¯åˆ©ç”¨èƒ½é‡å®ˆæ’åŸç†å»ºç«‹è‡ªç”±æŒ¯åŠ¨å¾®åˆ†æ–¹ç¨‹ï¼Œæˆ–ç›´æ¥æ±‚å‡ºå›ºæœ‰é¢‘ç‡ã€‚ æ— é˜»å°¼ç³»ç»Ÿä¸ºä¿å®ˆç³»ç»Ÿï¼Œå…¶æœºæ¢°èƒ½å®ˆæ’ï¼Œå³åŠ¨èƒ½T å’ŒåŠ¿èƒ½V ä¹‹å’Œä¿æŒä¸å˜ï¼Œå³ï¼š$T+V=const$ \\dfrac{d}{dt} (T+V)=0 å½“åŸç‚¹åœ¨é™å¹³è¡¡ä½ç½®çš„æƒ…å†µï¼š åˆ™æ€»çš„åŠ¿èƒ½ä¸ºï¼š V=-mgx+\\int_0^xk(\\lambda+x)\\,dx\\\\=-mgx+k\\lambda x+\\frac 1 2 k x^2 =\\frac 1 2 kx^2 åˆ™æ€»çš„èƒ½é‡çš„ä¸ºï¼š$T+V=\\dfrac 1 2 k x^2+\\dfrac 1 2m \\dot x^2$ $\\dfrac{d}{dt} (T+V)=(m\\ddot x +kx)\\dot x=0 \\,\\Rightarrow \\, m\\ddot x(t)+kx(t)=0$ èƒ½é‡æ³•çš„æ­¥éª¤ï¼š(1)åˆ—æ–¹ç¨‹ï¼Œ(2)æ±‚å›ºæœ‰é¢‘ç‡ å¦‚æœå°†åæ ‡åŸç‚¹ä¸æ˜¯å–åœ¨ç³»ç»Ÿçš„é™å¹³è¡¡ä½ç½®ï¼Œè€Œæ˜¯å–åœ¨å¼¹ç°§ä¸ºè‡ªç”±é•¿æ—¶çš„ä½ç½®ï¼Œæ­¤æ—¶ç”±èƒ½é‡ä¹‹å’Œçš„å¯¼æ•°ä¸ºé›¶å¯å¾—ï¼š $m\\ddot x \\dot x-mg\\dot x +kx \\dot x=0 \\, \\Rightarrow \\, m\\ddot x(t)+kx(t)=mg$ è®¾æ–°çš„åæ ‡$y=x-\\dfrac {mg} k =x- \\lambda \\ \\Rightarrow \\ m\\ddot y(t)+ky(t)=0$ å¦‚æœé‡åŠ›çš„å½±å“ä»…æ˜¯æ”¹å˜äº†æƒ¯æ€§å…ƒä»¶çš„é™å¹³è¡¡ä½ç½®ï¼Œé‚£ä¹ˆå°†åæ ‡åŸç‚¹å–åœ¨é™å¹³è¡¡ä½ç½®ä¸Šï¼Œæ–¹ç¨‹ä¸­å°±ä¸ä¼šå‡ºç°é‡åŠ›é¡¹ã€‚ ç”±äº$T+V=const$ï¼Œåˆ™æœ‰$T_{max}= V_{max}\\Rightarrow\\frac 1 2m \\dot x_{max}^2=\\frac 1 2 k x_{max}^2$ å³æœ‰$\\dot x_{max}=\\omega_0x_{max}$ï¼Œå¸¦å…¥$x(t)= A \\sin (\\omega_0t+\\varphi) $ï¼Œå¯å¾—$\\omega_0=\\sqrt{\\dfrac{k}{m}}$ å¯¹äºè½¬åŠ¨ï¼š$\\dot \\theta_{max}=\\omega_0\\theta_{max}$ (1) å€’æ‘†ä½œå¾®å¹…æŒ¯åŠ¨æ—¶çš„å›ºæœ‰é¢‘ç‡(2) æ‘†çƒ$m=0.9kg$æ—¶ï¼Œæµ‹å¾—é¢‘ç‡fä¸º1.5HZï¼Œ$m=1.8kg$æ—¶ï¼Œæµ‹å¾—é¢‘ç‡fä¸º0.75HZï¼Œé—®æ‘†çƒè´¨é‡ä¸ºå¤šå°‘åƒå…‹æ—¶æ°ä½¿ç³»ç»Ÿå¤„äºä¸ç¨³å®šå¹³è¡¡çŠ¶æ€ï¼Ÿ è§£æ³•ä¸€ï¼šé™å¹³è¡¡ä½ç½®å¦‚å·¦å›¾ï¼Œå¹¿ä¹‰åæ ‡ä¸º$\\theta$ åŠ¿èƒ½ï¼šç”±äºæ˜¯å¾®æŒ¯åŠ¨ï¼Œæ­£å¼¦éµå¾ªå°è§’è¿‘ä¼¼ï¼Œä½†æ˜¯ä½™å¼¦ä¸éµå¾ª \\begin{align} V&=2 \\times \\frac{1}{2}\\left(\\frac{1}{2} k\\right)(\\theta a)^{2}-m g l(1-\\cos \\theta)\\\\ &=\\frac{1}{2} k a^{2} \\theta^{2}-m g l\\left(1-\\left(1-2 \\sin ^{2} \\frac{\\theta}{2}\\right)\\right)\\\\ &=\\frac{1}{2}\\left(k a^{2} \\theta^{2}-m g l \\theta^{2}\\right)=\\frac{1}{2}\\left(k a^{2}-m g l\\right) \\theta^{2} \\end{align} åŠ¨èƒ½ï¼š$T=\\dfrac{1}{2} I \\dot{\\theta}^{2}=\\dfrac{1}{2} m l^{2} \\dot{\\theta}^{2}$ å¾®åˆ†æ–¹ç¨‹ä¸ºï¼š$T_{max}=U_{max} \\Rightarrow \\frac{1}{2} m l^{2} \\dot{\\theta}_{\\max }^{2}=\\dfrac{1}{2}\\left(k a^{2}-m g l\\right) \\theta_{\\max }^{2}$ æ±‚å›ºæœ‰é¢‘ç‡ï¼š$\\dot \\theta_{max}=\\omega_0\\theta_{max} \\Rightarrow \\omega_{0}=\\sqrt{\\dfrac{k a^{2}-m g l}{m l^{2}}}$ è¿™é‡Œæˆ‘ä»¬å°†$ m l^{2}$è§†ä¸ºç­‰æ•ˆè´¨é‡ï¼Œ$\\left(k a^{2}-m g l\\right) $è§†ä¸ºç­‰æ•ˆåˆšåº¦ã€‚ è§£æ³•äºŒï¼šé™å¹³è¡¡ä½ç½®å¦‚å³å›¾ï¼Œå¹¿ä¹‰åæ ‡ä¸º$\\theta$ åŠ¿èƒ½ï¼šç”±äºæ˜¯å¾®æŒ¯åŠ¨ï¼Œè¿™é‡Œç”¨å°è§’è¿‘ä¼¼ \\begin{align} V&=2 \\times \\frac{1}{2}\\left(\\frac{1}{2} k\\right)(\\theta a)^{2}+m g l\\cos \\theta\\\\ &=\\frac{1}{2} k a^{2} \\theta^{2}+m g l\\left(1-2 \\sin ^{2} \\frac{\\theta}{2}\\right)\\\\ &=\\frac{1}{2}\\left(k a^{2} -m g l \\right)\\theta^{2}+mgl \\end{align} åŠ¨èƒ½ï¼š$T=\\dfrac{1}{2} I \\dot{\\theta}^{2}=\\dfrac{1}{2} m l^{2} \\dot{\\theta}^{2}$ ç”±äº$\\frac{d}{d t}(T+U)=0 \\Rightarrow\\ 2 m l^{2} \\dot{\\theta} \\ddot{\\theta}+2 \\theta\\left(k a^{2}-m g l\\right) \\dot{\\theta}=0$ åˆ™æœ‰ï¼š$2 m l^{2} \\ddot{\\theta}+2\\left(k a^{2}-m g l\\right) \\theta=0 \\Rightarrow \\omega_{0}=\\sqrt{\\dfrac{k a^{2}-m g l}{m l^{2}}}$ ç¡®å®šç³»ç»Ÿå¾®æŒ¯åŠ¨çš„å›ºæœ‰é¢‘ç‡ã€‚ å¹¿ä¹‰åæ ‡ï¼šåœ†æŸ±å¾®è½¬è§’$\\theta$ï¼Œåœ†æŸ±åšä¸€èˆ¬è¿åŠ¨ï¼Œ ç”±æŸ¯å¸Œå°¼å®šç†ï¼ŒåŠ¨èƒ½ï¼š$T=\\frac{1}{2}\\left(\\frac{3}{2} m R^{2}\\right) \\dot{\\theta}^{2}$ Cç‚¹ä¸ºç¬å¿ƒ Aç‚¹é€Ÿåº¦ï¼š$v_{A}=(R+a) \\dot{\\theta} \\ \\Rightarrow \\ x_{A}=(R+a) \\theta$ Bç‚¹çš„é€Ÿåº¦ï¼š$v_{B}=(R-b) \\dot{\\theta}\\ \\Rightarrow \\ x_{B}=(R-b) \\theta$ åˆ™åŠ¿èƒ½ä¸ºï¼š$U=\\dfrac{1}{2}\\left(2 k_{1}\\right)(R+a)^{2} \\theta^{2}+\\dfrac{1}{2}\\left(2 k_{2}\\right)(R-b)^{2} \\theta^{2}$ ç”±äº$T_{\\max }=U_{\\max } \\quad \\Rightarrow \\quad\\dot{\\theta}_{\\max }=\\omega_{0} \\theta_{\\max }$ \\begin{align} \\omega_{0}^{2}&=\\dfrac{2\\left[k_{1}(R+a)^{2}+k_{2}(R-b)^{2}\\right]}{3 m R^{2} / 2}\\\\ &=\\dfrac{4}{3 m}\\left[k_{1}\\left(1+\\dfrac{a}{R}\\right)^{2}+k_{2}\\left(1-\\dfrac{b}{R}\\right)^{2}\\right] \\end{align}è§£å¾—å›ºæœ‰é¢‘ç‡ä¸ºï¼š$\\omega_{0}=\\sqrt{\\dfrac{4}{3 m}\\left[k_{1}\\left(1+\\dfrac{a}{R}\\right)^{2}+k_{2}\\left(1-\\dfrac{b}{R}\\right)^{2}\\right]}$ åæ ‡åŸç‚¹è®¾åœ¨é™å¹³è¡¡ä½ç½®ï¼Œå› ä¸ºè®¡ç®—åŠ¿èƒ½çš„æ—¶å€™é¢„å…ˆå‹ç¼©é€ æˆçš„é‡åŠ›åŠ¿èƒ½å’Œå¼¹æ€§åŠ¿èƒ½ä¸€å®šä¼šè¢«çº¦æ‰ï¼Œå¾—å‡ºå…¶æ¬¡åŠ¨åŠ›å­¦æ–¹ç¨‹ã€‚ å› æ­¤ï¼Œå¹¿ä¹‰çš„åæ ‡ï¼šè´¨é‡å—çš„å‚ç›´ä½ç§»x åŠ¨èƒ½ï¼š \\begin{align} T&=\\frac{1}{2} m \\dot{x}^{2}+\\dfrac{1}{2} M\\left(\\dfrac{1}{2} \\dot{x}\\right)^{2}+\\frac{1}{2}\\left(\\dfrac{1}{2} M R^{2}\\right)\\left(\\dfrac{\\dot{x}}{2 R}\\right)^{2}\\\\ &=\\frac{1}{2}\\left(m+\\frac{1}{4} M+\\frac{1}{8} M\\right) \\dot{x}^{2}\\\\ &=\\frac{1}{2}\\left(m+\\frac{3}{8} M\\right) \\dot{x}^{2} \\end{align} åŠ¿èƒ½ï¼š$U=\\dfrac{1}{2} k_{2} x^{2}+\\dfrac{1}{2} k_{1}\\left(\\dfrac{1}{2} x\\right)^{2}=\\dfrac{1}{2}\\left(k_{2}+\\dfrac{1}{4} k_{1}\\right) x^{2}$ ç”±èƒ½é‡å®ˆæ’å¯çŸ¥ï¼š $T_{\\max }=U_{\\max } \\quad \\Rightarrow \\quad\\dot{x}_{\\max }=\\omega_{0} x_{\\max }$ è§£å¾—ï¼š$\\omega_{0}=\\sqrt{\\dfrac{2 k_{1}+8 k_{2}}{3 M+8 m}}$ ç‘åˆ©æ³•åˆ©ç”¨èƒ½é‡æ³•æ±‚è§£å›ºæœ‰é¢‘ç‡æ—¶ï¼Œå¯¹äºç³»ç»Ÿçš„åŠ¨èƒ½çš„è®¡ç®—åªè€ƒè™‘äº†æƒ¯æ€§å…ƒä»¶çš„åŠ¨èƒ½ï¼Œè€Œå¿½ç•¥ä¸è®¡å¼¹æ€§å…ƒä»¶çš„è´¨é‡æ‰€å…·æœ‰çš„åŠ¨èƒ½ï¼Œå› æ­¤ç®—å‡ºçš„å›ºæœ‰é¢‘ç‡æ˜¯å®é™…å€¼çš„ä¸Šé™ã€‚ è¿™ç§ç®€åŒ–æ–¹æ³•åœ¨è®¸å¤šåœºåˆä¸­éƒ½èƒ½æ»¡è¶³è¦æ±‚ï¼Œä½†æœ‰äº›å·¥ç¨‹é—®é¢˜ä¸­ï¼Œå¼¹æ€§å…ƒä»¶æœ¬èº«çš„è´¨é‡å› å ç³»ç»Ÿæ€»è´¨é‡ç›¸å½“å¤§çš„æ¯”ä¾‹è€Œä¸èƒ½å¿½ç•¥ï¼Œå¦åˆ™ç®—å‡ºçš„å›ºæœ‰é¢‘ç‡æ˜æ˜¾åé«˜ã€‚ å½“å¼¹ç°§çš„è´¨é‡çš„è´¨é‡ä¸æ˜¯è¿œå°äºå°è½¦çš„è´¨é‡æ—¶ï¼Œå°±æ— æ³•å¿½ç•¥å¼¹ç°§çš„è´¨é‡ï¼Œå› æ­¤è¿™é‡Œç”¨ç­‰æ•ˆçš„è´¨é‡æ¥åˆ†æã€‚ ç³»ç»Ÿæœ€å¤§çš„åŠ¿èƒ½ï¼š$V_{\\max }=\\frac{1}{2} k x_{\\max }^{2}$ $T_{\\max }=U_{\\max } \\quad \\Rightarrow \\quad\\dot{x}_{\\max }=\\omega_{0} x_{\\max } \\quad \\Rightarrow \\quad \\omega_{0}=\\sqrt{\\dfrac{k}{m+m_{t}}}$ è‹¥å¿½ç•¥ $m_t$ ï¼Œåˆ™$\\omega_0$å¢å¤§ï¼Œå› æ­¤å¿½ç•¥å¼¹ç°§åŠ¨èƒ½æ‰€ç®—å‡ºçš„å›ºæœ‰é¢‘ç‡æ˜¯å®é™…å€¼çš„ä¸Šé™ã€‚ ç‘åˆ©æ³•æ±‚è§£ç­‰æ•ˆçš„è´¨é‡æ˜¯é€šè¿‡ç§¯åˆ†æ¥æ±‚è§£çš„ã€‚ ç­‰æ•ˆè´¨é‡ä¸ç­‰æ•ˆé˜»å°¼æ–¹æ³•ä¸€ï¼šèƒ½é‡æ³•æ±‚è§£ é€‰å®šå¹¿ä¹‰ä½ç§»åæ ‡åï¼Œå°†ç³»ç»Ÿå¾—åŠ¨èƒ½ã€åŠ¿èƒ½å†™æˆå¦‚ä¸‹å½¢å¼ï¼š$T=\\dfrac{1}{2} M_{e} \\dot{x}^{2} ,\\, V=\\dfrac{1}{2} K_{e} x^{2}$ å½“ $\\dot x,x$åˆ†åˆ«å–æœ€å¤§å€¼æ—¶ï¼š$T \\rightarrow T_{\\max }ï¼Œ \\ V \\rightarrow V_{\\max }$ ï¼Œå¯ä»¥å¾—å‡ºï¼š$\\omega_{0}=\\sqrt{\\dfrac{K_{e}} {M_e}}$ $K_e$ï¼šç®€åŒ–ç³»ç»Ÿçš„ç­‰æ•ˆåˆšåº¦ï¼›$M_e$ï¼šç®€åŒ–ç³»ç»Ÿçš„ç­‰æ•ˆè´¨é‡ã€‚ ç­‰æ•ˆçš„å«ä¹‰æ˜¯æŒ‡ç®€åŒ–å‰åçš„ç³»ç»Ÿçš„åŠ¨èƒ½å’ŒåŠ¿èƒ½åˆ†åˆ«ç›¸ç­‰ã€‚ ä¸»è¦æ­¥éª¤ï¼š é€‰å®šå¹¿ä¹‰åæ ‡ å°†åŠ¨èƒ½å’ŒåŠ¿èƒ½å†™æˆæ ‡å‡†å½¢å¼ æ ¹æ®ç³»æ•°å†™å‡ºç­‰æ•ˆåˆšåº¦å’Œç­‰æ•ˆé˜»å°¼ åŠ¨èƒ½ï¼š$T=\\dfrac{1}{2} m l^{2} \\dot{\\theta}^{2} \\Rightarrow M_{e}=m l^{2}$ åŠ¿èƒ½ï¼š$V=\\frac{1}{2}\\left(k a^{2}-m g l\\right) \\theta^{2} \\Rightarrow K_{e}=k a^{2}-m g l$ å›ºæœ‰é¢‘ç‡ï¼š$\\omega_{0}=\\sqrt{\\dfrac{k a^{2}-m g l}{m l^{2}}}$ åŠ¿èƒ½ï¼š$U=\\frac{1}{2}\\left[\\left(2 k_{1}\\right)(R+a)^{2}+\\left(2 k_{2}\\right)(R-b)^{2}\\right] \\theta^{2}$ ç­‰æ•ˆåˆšåº¦ï¼š$K_{e}=\\left(2 k_{1}\\right)(R+a)^{2}+\\left(2 k_{2}\\right)(R-b)^{2}$ åˆ™å›ºæœ‰é¢‘ç‡ä¸ºï¼š$\\omega_{0}^{2}=\\dfrac{2\\left[k_{1}(R+a)^{2}+k_{2}(R-b)^{2}\\right]}{3 m R^{2} / 2}$ æ–¹æ³•äºŒï¼šå®šä¹‰æ³• ç­‰æ•ˆåˆšåº¦ï¼šä½¿ç³»ç»Ÿåœ¨é€‰å®šçš„åæ ‡ä¸Šäº§ç”Ÿå•ä½ä½ç§»è€Œéœ€è¦åœ¨æ­¤åæ ‡æ–¹å‘ä¸Šæ–½åŠ çš„åŠ›ï¼Œå«åšç³»ç»Ÿåœ¨è¿™ä¸ªåæ ‡ä¸Šçš„ç­‰æ•ˆåˆšåº¦ã€‚ ç­‰æ•ˆè´¨é‡ï¼šä½¿ç³»ç»Ÿåœ¨é€‰å®šçš„åæ ‡ä¸Šäº§ç”Ÿå•ä½åŠ é€Ÿåº¦è€Œéœ€è¦åœ¨æ­¤åæ ‡æ–¹å‘ä¸Šæ–½åŠ çš„åŠ›ï¼Œå«åšç³»ç»Ÿåœ¨è¿™ä¸ªåæ ‡ä¸Šçš„ç­‰æ•ˆè´¨é‡ã€‚ ä½¿ç³»ç»Ÿåœ¨é€‰å®šçš„åæ ‡ä¸Šäº§ç”Ÿå•ä½ä½ç§»è€Œéœ€è¦åœ¨æ­¤åæ ‡æ–¹å‘ä¸Šæ–½åŠ çš„åŠ›ï¼Œå«åšç³»ç»Ÿåœ¨è¿™ä¸ªåæ ‡ä¸Šçš„ç­‰æ•ˆåˆšåº¦ã€‚ ä¸²è”å¼¹ç°§çš„åˆšåº¦çš„å€’æ•°æ˜¯åŸæ¥å„ä¸ªå¼¹ç°§åˆšåº¦å€’æ•°çš„æ€»å’Œ å¹¶è”å¼¹ç°§çš„åˆšåº¦æ˜¯åŸæ¥å„ä¸ªå¼¹ç°§åˆšåº¦çš„æ€»å’Œã€‚ æ±‚ï¼šç³»ç»Ÿå¯¹äºåæ ‡x çš„ç­‰æ•ˆè´¨é‡å’Œç­‰æ•ˆåˆšåº¦ã€‚ æ–¹æ³•1ï¼šèƒ½é‡æ³• åŠ¨èƒ½ï¼š$T=\\dfrac{1}{2} m_{1} \\dot{x}^{2}+\\dfrac{1}{2} m_{2}\\left(\\dfrac{l_{2}}{l_{1}} \\dot{x}\\right)^{2}=\\dfrac{1}{2}\\left(m_{1}+\\dfrac{l_{2}^{2}}{l_{1}^{2}} m_{2}\\right) \\dot{x}^{2}$ ç­‰æ•ˆè´¨é‡ï¼š$M_{e}=m_{1}+\\dfrac{l_{2}^{2}}{l_{1}^{2}} m_{2}$ åŠ¿èƒ½ï¼š$V=\\dfrac{1}{2} k_{1} x^{2}+\\dfrac{1}{2} k_{2}\\left(\\dfrac{l_{3}}{l_{1}} x\\right)^{2}=\\dfrac{1}{2}\\left(k_{1}+\\dfrac{l_{3}^{2}}{l_{1}^{2}} k_{2}\\right) x^{2}$ ç­‰æ•ˆåˆšåº¦ï¼š$K_{e}=k_{1}+\\dfrac{l_{3}^{2}}{l_{1}^{2}} k_{2}$ æ–¹æ³•äºŒï¼šå®šä¹‰æ³• è®¾ä½¿ç³»ç»Ÿåœ¨xæ–¹å‘äº§ç”Ÿå•ä½åŠ é€Ÿåº¦éœ€è¦æ–½åŠ åŠ›Pï¼Œåˆ™åœ¨m1ã€m2ä¸Šäº§ç”Ÿæƒ¯æ€§åŠ›ï¼Œå¯¹æ”¯åº§å–çŸ©ï¼š $P l_{1}=\\left(m_{1} \\cdot 1\\right) l_{1}+\\left(m_{2} \\cdot \\dfrac{l_{2}}{l_{1}}\\right) l_{2}$ ç­‰æ•ˆè´¨é‡ï¼š$M_{e}=m_{1}+\\dfrac{l_{2}^{2}}{l_{1}^{2}} m_{2}$ ç”»è™šçº¿æ˜¯å¤¸å¼ åŒ–çš„mï¼Œå…¶å®å…¶ä½ç§»éå¸¸çš„ä¸ºå¾®å°ï¼Œåœ¨é›¶æ—¶åˆ»äº§ç”Ÿäº†å•ä½åŠ é€Ÿåº¦$\\ddot x=1$ï¼Œ$m_1,m_2$åœ¨å¹³è¡¡ä½ç½®é™å¹³è¡¡ä½ç½®ï¼šé‡åŠ›å’Œå¼¹ç°§é¢„å˜å½¢ç›¸äº’æŠµæ¶ˆï¼Œå› æ­¤å¼¹åŠ›å¯ä»¥å¿½ç•¥ã€‚ è®¾ä½¿ç³»ç»Ÿåœ¨xåæ ‡ä¸Šäº§ç”Ÿå•ä½ä½ç§»éœ€è¦æ–½åŠ åŠ›Pï¼Œåˆ™åœ¨k1ã€k2å¤„å°†äº§ç”Ÿå¼¹æ€§æ¢å¤åŠ›ï¼Œå¯¹æ”¯ç‚¹å–çŸ©ï¼š $P l_{1}=\\left(k_{1} \\cdot 1\\right) l_{1}+\\left(k_{2} \\cdot \\dfrac{l_{3}}{l_{1}}\\right) l_{3}$ ç­‰æ•ˆåˆšåº¦ï¼š$K_{e}=k_{1}+\\dfrac{l_{3}^{2}}{l_{1}^{2}} k_{2}$ ç­‰æ•ˆè´¨é‡(æƒ¯æ€§åŠ›)ï¼šåŠ¨æ€æ±‚è§£(è¾¾æœ—è´å°”åŸç†)ï¼› ç­‰æ•ˆåˆšåº¦(é™åŠ›å¹³è¡¡ï¼šé™æ€æ±‚è§£(åˆ—é™åŠ›å­¦æ–¹ç¨‹)ã€‚","link":"/2022/01/27/%E6%8C%AF%E5%8A%A8%E5%8A%9B%E5%AD%A6/%E7%AC%AC%E4%BA%8C%E7%AB%A0%E5%8D%95%E8%87%AA%E7%94%B1%E5%BA%A6%E7%B3%BB%E7%BB%9F%E8%87%AA%E7%94%B1%E6%8C%AF%E5%8A%A8-%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86/"},{"title":"ç¬¬äº”ç«  çº¿æ€§æŒ¯åŠ¨çš„è¿‘ä¼¼è®¡ç®—æ–¹æ³• ä¼ é€’çŸ©é˜µæ³•","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦ä»‹ç»çš„æ˜¯çº¿æ€§æŒ¯åŠ¨çš„è¿‘ä¼¼è®¡ç®—æ–¹æ³•ä¸­ä¼ é€’çŸ©é˜µæ³•ï¼Œä¸»è¦ä»åœ†ç›˜çš„æ‰­è½¬æŒ¯åŠ¨å’Œæ¢çš„æ¨ªå‘æŒ¯åŠ¨æ¥ä»‹ç»ï¼Œä¸»è¦çš„æ€æƒ³å°±æ˜¯å°†ç»“æ„è½¬åŒ–æˆä¸ºåŸºæœ¬çš„é›†ä¸­è´¨é‡çš„ç»“æ„ï¼Œè¿›è€Œæ±‚è§£ä¼ é€’çŸ©é˜µï¼Œæœ€ååˆ©ç”¨è¾¹ç•Œæ¡ä»¶æ¥æ±‚è§£å›ºæœ‰é¢‘ç‡ã€‚ ä¼ é€’çŸ©é˜µæ³•é€‚ç”¨äºè®¡ç®—é“¾çŠ¶ç»“æ„çš„å›ºæœ‰é¢‘ç‡å’Œä¸»æŒ¯å‹ å¤šä¸ªåœ†ç›˜çš„æ‰­æŒ¯ï¼Œè¿ç»­æ¢ï¼Œæ°”è½®æœºå’Œå‘ç”µæœºçš„è½¬è½´ç³»ç»Ÿ ç‰¹å¾ï¼šå¯ç®€åŒ–ä¸ºæ— è´¨é‡çš„æ¢ä¸Šå¸¦æœ‰è‹¥å¹²ä¸ªé›†ä¸­è´¨é‡çš„æ¨ªå‘æŒ¯åŠ¨ å¦‚å°†æ±½è½®æœºè½´çš„è´¨é‡ç®€åŒ–åˆ°è½®ç›˜ä¸Šé¢ã€‚ ç‰¹ç‚¹ï¼šå°†é“¾çŠ¶ç»“æ„åˆ’åˆ†ä¸ºä¸€ç³»åˆ—å•å…ƒï¼Œæ¯å¯¹å•å…ƒä¹‹é—´çš„ä¼ é€’çŸ©é˜µçš„é˜¶æ•°ç­‰äºå•å…ƒçš„è¿åŠ¨å¾®åˆ†æ–¹ç¨‹çš„é˜¶æ•°ï¼Œå› æ­¤ä¼ é€’çŸ©é˜µæ³•å¯¹å…¨ç³»ç»Ÿçš„è®¡ç®—åˆ†è§£ä¸ºé˜¶æ•°å¾ˆä½çš„å„ä¸ªå•å…ƒçš„è®¡ç®—ï¼Œç„¶ååŠ ä»¥ç»¼åˆï¼Œä»è€Œå¤§å¤§å‡å°‘è®¡ç®—å·¥ä½œé‡ åœ†ç›˜çš„æ‰­è½¬æŒ¯åŠ¨ è½´ä¸è®¡è´¨é‡ï¼Œåªè®¡åˆšåº¦ï¼Œåœ†ç›˜å’Œè½´è‡ªå·¦è‡³å³ç¼–å· ç¬¬ i-1 ä¸ªå’Œç¬¬ i ä¸ªåœ†ç›˜ä»¥åŠè¿æ¥ä¸¤ç›˜çš„è½´æ®µæ„æˆç¬¬ i ä¸ªå•å…ƒ $J_{i-1}ã€J_{i}$ åœ†ç›˜è½¬åŠ¨æƒ¯é‡ï¼›$l_i$ï¼šè½´æ®µé•¿åº¦ ï¼›$k_i$ï¼šè½´æ®µæ‰­è½¬åˆšåº¦ \\begin{aligned} {\\left[\\begin{array}{l}\\theta \\\\ T\\end{array}\\right]_{i}^{R} } &=\\left[\\begin{array}{cc}1 & 0 \\\\ -\\omega^{2} J_{i} & 1\\end{array}\\right]\\left[\\begin{array}{l}\\theta \\\\ T\\end{array}\\right]_{i}^{L} \\quad \\boldsymbol{X}_{i}^{R}=\\boldsymbol{S}_{i}^{P} \\boldsymbol{X}_{i}^{L} \\\\ \\boldsymbol{S}_{i}^{P} &=\\left[\\begin{array}{cc}1 & 0 \\\\ -\\omega^{2} J_{i} & 1\\end{array}\\right] \\quad \\text { ç‚¹ä¼ é€’çŸ©é˜µ } \\end{aligned}å…¶ä¸­ï¼Œ$\\boldsymbol{X}=(\\theta,T)^T$ä¸ºçŠ¶æ€çš„å˜é‡ã€‚ ç¬¬ i ä¸ªè½´æ®µæ¥åˆ†æï¼š \\begin{aligned} {\\left[\\begin{array}{l}\\theta \\\\ T\\end{array}\\right]_{i}^{L} } &=\\left[\\begin{array}{cc}1 & 1/k_i \\\\ 0 & 1\\end{array}\\right]\\left[\\begin{array}{l}\\theta \\\\ T\\end{array}\\right]_{i-1}^{R} \\quad \\boldsymbol{X}_{i}^{L}=\\boldsymbol{S}_{i}^{F} \\boldsymbol{X}_{i-1}^{R} \\\\ \\boldsymbol{S}_{i}^{F} &=\\left[\\begin{array}{cc}1 & 1/k_i \\\\ 0 & 1\\end{array}\\right] \\quad \\text { åœºä¼ é€’çŸ©é˜µ } \\end{aligned} ç¬¬ i-1 ä¸ªåœ†ç›˜å³ä¾§åˆ°ç¬¬ i ä¸ªåœ†ç›˜å³ä¾§çš„çŠ¶æ€å˜é‡ä¼ é€’å…³ç³»ï¼š \\boldsymbol{X}_{i}^{R}=\\boldsymbol{S}_{i}^{P} \\boldsymbol{S}_{i}^{F} \\boldsymbol{X}_{i-1}^{R}=\\boldsymbol{S}_{i} \\boldsymbol{X}_{i-1}^{R} \\\\ S_{i}=S_{i}^{P} S_{i}^{F} \\Rightarrow å•å…ƒä¼ é€’çŸ©é˜µ\\\\\\boldsymbol{S}_{i}=\\boldsymbol{S}_{i}^{P} \\boldsymbol{S}_{i}^{F}=\\left[\\begin{array}{cc}1 & 0 \\\\ -\\omega^{2} J_{i} & 1\\end{array}\\right]\\left[\\begin{array}{cc}1 & 1 / k_{i} \\\\ 0 & 1\\end{array}\\right]=\\left[\\begin{array}{cc}1 & 1 / k_{i} \\\\ -\\omega^{2} J_{i} & 1-\\omega^{2}\\left(J_{i} / k_{i}\\right)\\end{array}\\right]n ä¸ªåœ†ç›˜çš„è½´ç³»ï¼Œæœ€å·¦ç«¯å’Œæœ€å³ç«¯çŠ¶æ€å˜é‡ä¼ é€’å…³ç³»ï¼š$\\boldsymbol{X}_n^R=S\\boldsymbol{X}_1^R$ Sï¼šç¬¬1è‡³ç¬¬nå•å…ƒé€šè·¯ä¸­æ‰€æœ‰å•å…ƒä¼ é€’çŸ©é˜µçš„è¿ä¹˜ç§¯ $S=S_nS_{n-1}â€¦S_1 \\ (\\omega)$çš„å‡½æ•°ã€‚ æœ€åå†å»åˆ©ç”¨ä¸¤ç«¯è¾¹ç•Œæ¡ä»¶å¯ç¡®å®šå›ºæœ‰é¢‘ç‡å’Œæ¨¡æ€ã€‚ ç¬¬ä¸€ä¸ªåœ†ç›˜å·¦ç«¯çŠ¶æ€ï¼š$\\left[\\begin{array}{l}\\theta \\\\ T\\end{array}\\right]_{1}^{L} =\\left[\\begin{array}{c}1 \\\\ 0 \\end{array}\\right]$ ç¬¬ä¸€ä¸ªåœ†ç›˜å³ç«¯çŠ¶æ€ï¼š$\\left[\\begin{array}{l}\\theta \\\\ T\\end{array}\\right]_{1}^{R} =\\left[\\begin{array}{cc}1 &amp; 0 \\\\ -\\omega^{2} J &amp; 1\\end{array}\\right]\\left[\\begin{array}{c}1 \\\\ 0 \\end{array}\\right]=\\left[\\begin{array}{c}1 \\\\ -\\omega^2J \\end{array}\\right]$ æ¢çš„æ¨ªå‘å¼¯æ›²æŒ¯åŠ¨ç³»ç»Ÿ ä¼ é€’çŸ©é˜µæ³•å¯ç”¨äºåˆ†ææ¢çš„æ¨ªå‘å¼¯æ›²æŒ¯åŠ¨ï¼› æ¢ä¸Šæœ‰ n-1 ä¸ªé›†ä¸­è´¨é‡ï¼Œå³åªè€ƒè™‘è´¨é‡ï¼Œè€Œä¸è€ƒè™‘å…¶å½¢çŠ¶ ï¼›æ¢æ®µè´¨é‡ä¸è®¡ï¼Œåªè®¡åˆšåº¦ï¼› æ”¯åº§ã€æ¢æ®µã€é›†ä¸­è´¨é‡è‡ªå·¦å‘å³åˆ†åˆ«ç¼–å·ï¼› ç¬¬ i-1 ä¸ªå’Œç¬¬ i ä¸ªè´¨é‡ä»¥åŠè¿æ¥ä¸¤è´¨é‡çš„æ¢æ®µæ„æˆç¬¬ i ä¸ªå•å…ƒ æ¢æ®µé•¿$l_i$ï¼ŒæŠ—å¼¯åˆšåº¦ $E_iI_i$ï¼Œé›†ä¸­è´¨é‡$m_{i-1}$ã€$m_i$ çŠ¶æ€å˜é‡æ„æˆï¼š$\\boldsymbol{X} = (y \\quad \\theta\\quad M\\quad F_s)^T$ åˆ†åˆ«å¯¹åº”çš„æ˜¯ï¼šé›†ä¸­è´¨é‡å¤„æ¢çš„æ¨ªå‘ä½ç§»(æŒ åº¦)ã€æˆªé¢è½¬è§’ã€å¼¯çŸ©å’Œå‰ªåŠ› è¿™å‡ ä¸ªæ˜¯æœ‰ä¸€å®šå¯¹åº”çš„å…³ç³»çš„ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ª$\\theta=\\partial y/\\partial x$ ï¼Œ$F_s=\\partial M /\\partial x$ ï¼Œå¼¯çŸ©Må’ŒæŒ åº¦yæ˜¯äºŒé˜¶æ›²ç‡çš„å…³ç³»ã€‚ ç¬¬iä¸ªè´¨é‡å—åŠ›åˆ†æ ç”±äºå‡ ç§è´¨é‡ï¼Œå› æ­¤å¯ä»¥ä¸è€ƒè™‘å½¢çŠ¶ç‰¹å¾ï¼Œæ­¤æ—¶çš„æŒ åº¦ã€è½¬è§’å’Œå¼¯çŸ©æ˜¯ç›¸åŒçš„ï¼Œä½†æ˜¯ç”±äºå…¶è´¨é‡æ— æ³•æ— æ³•å¿½ç•¥ï¼Œå› æ­¤å…¶å­˜åœ¨æƒ¯æ€§åŠ›ã€‚ å½“ç³»ç»Ÿä»¥é¢‘ç‡ $\\omega$ ä½œç®€è°æŒ¯åŠ¨æ—¶ ï¼š$\\ddot y_i=-\\omega^2y_i$ è´¨é‡å·¦å³ä¸¤ä¾§çš„ä¼ é€’å…³ç³»ï¼š$\\boldsymbol{X}_{i}^{R}=\\boldsymbol{S}_{i}^{P} \\boldsymbol{X}_{i}^{L}$(ç‚¹ä¼ é€’çŸ©é˜µ) \\left[\\begin{array}{c}y \\\\ \\theta \\\\ M \\\\ F_{s}\\end{array}\\right]_{i}^{R}=\\left[\\begin{array}{cccc}1 & 0 & 0 & 0 \\\\ 0 & 1 & 0 & 0 \\\\ 0 & 0 & 1 & 0 \\\\ \\omega^{2} m_{i} & 0 & 0 & 1\\end{array}\\right]\\left[\\begin{array}{c}y \\\\ \\theta \\\\ M \\\\ F_{s}\\end{array}\\right]_{i}^{L} \\quadç¬¬ i ä¸ªæ¢æ®µå—åŠ›åˆ†æ ç”±äºä¸¤ç«¯æ²¡æœ‰è´¨é‡ï¼Œå› æ­¤å¹³è¡¡çš„æ¡ä»¶æ˜¯ä¸¤ç«¯çš„å‰ªåŠ›ç›¸åŒã€‚ åŒæ—¶ï¼Œææ–™åŠ›å­¦å’ŒæŒ¯åŠ¨åŠ›å­¦æ¶‰åŠçš„éƒ½æ˜¯å¾®å°çš„å˜å½¢ï¼Œå¾®æŒ¯ã€‚ å¯¹äºè½¬è§’ï¼Œç”±ææ–™åŠ›å­¦æœ‰ï¼š \\begin{aligned}\\theta_{i}(x) &=\\theta_{i-1}^{R}+\\frac{1}{E_{i} I_{i}} \\int_{0}^{x} M_{i}(x) d x \\\\&=\\theta_{i-1}^{R}+\\frac{1}{E_{i} I_{i}} M_{i-1}^{R} x+\\frac{1}{2 E_{i} I_{i}} F_{s, i-1}^{R} x^{2}\\end{aligned}å¯¹äºæŒ åº¦ï¼Œæœ‰ææ–™åŠ›å­¦å¾—: y_{i}(x)=y_{i-1}^{R}+\\int_{0}^{x} \\theta_{i}(x) d x \\\\=y_{i-1}^{R}+\\theta_{i-1}^{R} x+\\frac{1}{2 E_{i} I_{i}} M_{i-1}^{R} x^{2}+\\frac{1}{6 E_{i} I_{i}} F_{s, i-1}^{R} x^{3}äºæ˜¯ä»¤$\\theta_i(x)^L,\\ y_i(x)^L,\\ M_i(x)^L$ ä¸­çš„$x=l_i$ï¼š F_{s,i}^L=F_{s,i-1}^R\\\\ M_i^L=M_i^R+F_{s,i-1}^Rl_i\\\\ \\theta_{i}^L =\\theta_{i-1}^{R}+\\frac{1}{E_{i} I_{i}} M_{i-1}^{R}l_i+\\frac{1}{2 E_{i} I_{i}} F_{s, i-1}^{R} {l_i}^{2}\\\\ y_{i}^L=y_{i-1}^{R}+\\theta_{i-1}^{R} l_i+\\frac{1}{2 E_{i} I_{i}} M_{i-1}^{R} {l_i}^{2}+\\frac{1}{6 E_{i} I_{i}} F_{s, i-1}^{R} {l_i}^{3}ç»“åˆæ¢æ®µå—åŠ›å¹³è¡¡æ–¹ç¨‹ï¼Œç¬¬ i ä¸ªæ¢æ®µå·¦å³ä¸¤ç«¯çŠ¶æ€å˜é‡çš„ä¼ é€’å…³ç³»ï¼š ç¬¬ i -1 ä¸ªè´¨é‡å³ä¾§è‡³ç¬¬ iä¸ªè´¨é‡å³ä¾§çš„çŠ¶æ€å˜é‡ä¼ é€’å…³ç³»ï¼š \\boldsymbol{X}_{i}^{R}=\\boldsymbol{S}_{i}^{P} \\boldsymbol{S}_{i}^{F} \\boldsymbol{X}_{i-1}^{R}=\\boldsymbol{S}_{i} \\boldsymbol{X}_{i-1}^{R} \\\\ S_{i}=S_{i}^{P} S_{i}^{F} \\Rightarrow å•å…ƒä¼ é€’çŸ©é˜µ\\\\å¯¹äºå¸¦ n ä¸ªé›†ä¸­è´¨é‡å¾—æ¢ï¼Œæ€»èƒ½åˆ©ç”¨å„å•å…ƒä¼ é€’çŸ©é˜µçš„è¿ä¹˜ç§¯å¯¼å‡ºæ¢çš„æœ€å·¦ç«¯å’Œæœ€å³ç«¯çŠ¶æ€å˜é‡ä¼ é€’å…³ç³»ï¼š$\\boldsymbol{X}_n^R=S\\boldsymbol{X}_1^R$ æœ€åä¸¤ç«¯è¾¹ç•Œæ¡ä»¶å¯ç¡®å®šå›ºæœ‰é¢‘ç‡å’ŒæŒ¯å‹ æœ¬èŠ‚ä¸»è¦å…³æ³¨ï¼š ä¸€ä¸ªåˆå§‹æ¡ä»¶ï¼šå…ˆå¯¹æ¨¡å‹è¿›è¡Œåˆ†æ®µï¼Œå°†ç¡®å®šä¸¤è¾¹çš„è¾¹ç•Œæ¡ä»¶ã€‚ ä¸¤æ¬¡å—åŠ›åˆ†æï¼šä¸€æ¬¡å¯¹é›†ä¸­è´¨é‡ï¼Œä¸€æ¬¡å¯¹è½´æ®µå’Œä¸¤ç«¯ã€‚ ä¸‰ä¸ªä¼ é€’çŸ©é˜µï¼šç‚¹ä¼ é€’çŸ©é˜µã€åœºä¼ é€’çŸ©é˜µã€å•å…ƒä¼ é€’çŸ©é˜µã€‚ å¼•å…¥æ— é‡çº²é‡çš„ç›®çš„æ˜¯æ–¹ä¾¿è®¡ç®— ä¹‹åä½¿ç”¨ä¼ é€’çŸ©é˜µæ³•ï¼Œè®¡ç®—æ¯ä¸ªä¸¤ç«¯å’Œé›†ä¸­è´¨é‡å¤„çš„çŠ¶æ€å˜é‡çš„å€¼ï¼Œæœ€åæˆ‘ä»¬å°†ä¸¤è¾¹çš„ç»“æœä»£å…¥å³å¯ã€‚ ä¸¤æ”¯åº§ä¹‹é—´çš„çŠ¶æ€å…³ç³»ï¼š$ \\boldsymbol{X}_{3}^{L}=\\overline{\\boldsymbol{S}}_{0}^{R} \\quad \\overline{\\boldsymbol{S}}=\\overline{\\boldsymbol{S}}_{3}^{F} \\overline{\\boldsymbol{S}}_{2}^{P} \\overline{\\boldsymbol{S}}_{2}^{F} \\overline{\\boldsymbol{S}}_{1}^{P} \\overline{\\boldsymbol{S}}_{1}^{F} $ åœ¨åˆå§‹æ¡ä»¶ä¸‹ $y_0^R=0,\\ M_0^R=0$ ä»£å…¥å¾—åˆ° $y_3^L,M_3^R$ çš„è¡¨è¾¾å¼ï¼Œåœ¨ä»£å…¥$y_3^L=0,\\ M_3^L=0$ \\overline{\\boldsymbol{S}}=\\left[\\begin{array}{llll}\\alpha_{11} & \\alpha_{12} & \\alpha_{13} & \\alpha_{14} \\\\ \\alpha_{21} & \\alpha_{22} & \\alpha_{23} & \\alpha_{24} \\\\ \\alpha_{31} & \\alpha_{32} & \\alpha_{33} & \\alpha_{34} \\\\ \\alpha_{41} & \\alpha_{42} & \\alpha_{43} & \\alpha_{44}\\end{array}\\right]\\Rightarrow\\left(\\begin{array}{c}\\bar{y} \\\\ \\theta \\\\ \\bar{M} \\\\ \\overline{\\bar{F}}\\end{array}\\right)_{3}^{L}=\\left[\\begin{array}{llll}\\alpha_{11} & \\alpha_{12} & \\alpha_{13} & \\alpha_{14} \\\\ \\alpha_{21} & \\alpha_{22} & \\alpha_{23} & \\alpha_{24} \\\\ \\alpha_{31} & \\alpha_{32} & \\alpha_{33} & \\alpha_{34} \\\\ \\alpha_{41} & \\alpha_{42} & \\alpha_{43} & \\alpha_{44}\\end{array}\\right]\\left(\\begin{array}{c}\\bar{y} \\\\ \\theta \\\\ \\bar{M} \\\\ \\overline{\\bar{F}}\\end{array}\\right)_{0}^{R}ä¸¤ç«¯æ”¯åº§è¾¹ç•Œæ¡ä»¶: \\left\\{\\begin{array}{l}\\alpha_{12} \\theta_{0}+\\alpha_{14} \\bar{F}_{s 0}=0 \\\\ \\alpha_{32} \\theta_{0}+\\alpha_{34} \\bar{F}_{s 0}=0\\end{array}\\right. éé›¶è§£æ¡ä»¶: $\\quad \\Delta \\lambda(\\omega)=\\left|\\begin{array}{ll}\\alpha_{12} &amp; \\alpha_{14} \\\\ \\alpha_{32} &amp; \\alpha_{34}\\end{array}\\right|=0 \\quad $å¾—å‡ºé¢‘ç‡æ–¹ç¨‹ï¼Œæ±‚è§£å¯å¾—ç³»ç»Ÿçš„å›ºæœ‰é¢‘ç‡ã€‚ ä¹Ÿå¯åˆ©ç”¨ç‰¹å¾æ–¹ç¨‹ï¼Œé‡‡ç”¨æ•°å€¼æ–¹æ³•æ±‚è§£å›ºæœ‰é¢‘ç‡ã€‚ é¢‘ç‡å’Œæ¨¡æ€æ˜¯ç”±è¾¹ç•Œå†³å®šï¼Œå› ä¸ºæ‰‹åŠ¨åœ¨è¿™äº›è¿ç»­ä½“ä¸Šé¢çš„ä¼ é€’å¯ä»¥çœ‹ä½œæ˜¯ä¸€ç§æ³¢çš„ä¼ é€’è¿‡ç¨‹ï¼Œè¿™å°±æ˜¯ä¼ é€’çŸ©é˜µæ³•çš„æ„ä¹‰æ‰€åœ¨ã€‚ ä¸‹é¢çœ‹ä¸€ä¸ªæ‚¬è‡‚æ¢çš„ä¾‹å­ã€‚ è¾¹ç•Œæ¡ä»¶ï¼š æœ€å·¦è¾¹è´´è¿‘å›ºå®šç«¯çš„ä¸€ä¾§ï¼Œå…¶æŒ åº¦å’Œè½¬è§’ä¸º0ï¼Œå…è®¸æœ‰å¼¯çŸ©å’Œå‰ªåŠ›ï¼› å¯¹äºè‡ªç”±ç«¯ï¼Œç”±äºæ²¡æœ‰çº¦æŸå…¶è½¬è§’å’ŒæŒ åº¦ä¸ä¸º0ï¼Œå‰ªåŠ›å’Œå¼¯çŸ©ç”±äºæ²¡æœ‰ç›¸å…³çš„çº¦æŸï¼Œå› æ­¤ä¸º0ã€‚ æœ€åçš„ç»“æœæ˜¯ç¬¬ä¸€é˜¶æ¨¡æ€çš„å‡†ç¡®æ€§è¿˜æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯ç¬¬äºŒé˜¶å°±ä¸å‡†ç¡®äº†ã€‚ åŸå› æ˜¯å¯¹äºä¹‹å‰çš„ç®€æ”¯æ¢æ¥è¯´ï¼Œå…¶å·¦å³ä¸¤è¾¹æ˜¯è¢«å›ºå®šä½çš„ï¼Œå› æ­¤è‚¯å®šæ˜¯æ— æ³•å‘ç”Ÿä½ç§»çš„ï¼Œé›†ä¸­è´¨é‡å‡è®¾å¯¹è¯¥æ¨¡å‹æ¥è¯´å½±å“ä¸å¤§ï¼Œå³ç®€åŒ–å‰åçš„æ¨¡æ€å¤§ä½“ä¸Šæ˜¯ç›¸è¿‘çš„æƒ…å†µã€‚ ä½†æ˜¯å¯¹äºæ‚¬è‡‚æ¢è€Œè¨€ï¼Œå…¶æœ‰ä¸€ä¸ªè‡ªç”±ç«¯ï¼Œä¹‹å‰æ˜¯ä¸€ä¸ªå‡åŒ€çš„æ‚¬è‡‚æ¢çš„æŒ¯å‹å’Œé›†ä¸­è´¨é‡ç®€åŒ–åçš„æ±‚å‡ºçš„æ¨¡æ€æœ‰åœ¨è‡ªç”±ç«¯ä¸Šå‡ºç°å·®å¼‚ã€‚","link":"/2022/03/15/%E6%8C%AF%E5%8A%A8%E5%8A%9B%E5%AD%A6/%E7%AC%AC%E4%BA%94%E7%AB%A0-%E7%BA%BF%E6%80%A7%E6%8C%AF%E5%8A%A8%E7%9A%84%E8%BF%91%E4%BC%BC%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95-%E4%BC%A0%E9%80%92%E7%9F%A9%E9%98%B5%E6%B3%95/"},{"title":"ç¬¬äºŒç« å•è‡ªç”±åº¦ç³»ç»Ÿè‡ªç”±æŒ¯åŠ¨-ç¬¬äºŒéƒ¨åˆ†","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦ä»‹ç»æœ‰é˜»å°¼è‡ªç”±æŒ¯åŠ¨å’Œç­‰æ•ˆé˜»å°¼æŒ¯åŠ¨ï¼ŒåŒ…æ‹¬åº“ä¼¦åŠ›ä½†æ‘©æ“¦ç³»ç»Ÿè‡ªç”±æŒ¯åŠ¨çš„ç²¾ç¡®åˆ†æã€‚ é˜»å°¼è‡ªç”±æŒ¯åŠ¨ç†è®ºçŸ¥è¯† å®é™…ç³»ç»Ÿçš„æœºæ¢°èƒ½ä¸å¯èƒ½å®ˆæ’ï¼Œå­˜åœ¨å„ç§å„æ ·çš„é˜»åŠ› æŒ¯åŠ¨ä¸­å°†é˜»åŠ›ç§°ä¸ºé˜»å°¼ï¼šæ‘©æ“¦é˜»å°¼ï¼Œç”µç£é˜»å°¼ï¼Œä»‹è´¨é˜»å°¼å’Œç»“æ„é˜»å°¼ å°½ç®¡å·²ç»æå‡ºäº†è®¸å¤šæ•°å­¦ä¸Šæè¿°é˜»å°¼çš„æ–¹æ³•ï¼Œä½†æ˜¯å®é™…ç³»ç»Ÿä¸­é˜»å°¼çš„ç‰©ç†æœ¬è´¨ä»ç„¶æéš¾ç¡®å®š æœ€å¸¸ç”¨çš„ä¸€ç§é˜»å°¼åŠ›å­¦æ¨¡å‹æ˜¯ç²˜æ€§é˜»å°¼ ä¾‹å¦‚ï¼šåœ¨æµä½“ä¸­ä½é€Ÿè¿åŠ¨æˆ–æ²¿æ¶¦æ»‘è¡¨é¢æ»‘åŠ¨çš„ç‰©ä½“ï¼Œé€šå¸¸å°±è®¤ä¸ºå—åˆ°ç²˜æ€§é˜»å°¼ å¯¹äºé«˜é€Ÿè¿åŠ¨çš„ç‰©ä½“ï¼Œå…¶å—åˆ°çš„æ˜¯é«˜é€Ÿé˜»å°¼åŠ›çš„å½±å“ï¼Œæ¯”å¦‚è¶³çƒåœ¨ç©ºä¸­é«˜é€Ÿçš„é£è¿‡å…¶å—åˆ°çš„é˜»å°¼åŠ›è·Ÿé€Ÿåº¦çš„äºŒæ¬¡æ–¹æˆæ­£ç›¸å…³ã€‚ ç”±äºæŒ¯åŠ¨çš„å­˜åœ¨ï¼Œå› æ­¤é˜»å°¼é€ æˆçš„å»¶è¿Ÿæ˜¯å¹¿æ³›å­˜åœ¨çš„ã€‚ ç²˜æ€§é˜»å°¼åŠ›ä¸ç›¸å¯¹é€Ÿåº¦ç§°æ­£æ¯”ï¼Œå³ï¼š P_d = cv å…¶ä¸­ï¼Œc:ä¸ºç²˜æ€§é˜»å°¼ç³»æ•°ï¼Œæˆ–é˜»å°¼ç³»æ•°å•ä½ï¼š$ N.s /m $ å»ºç«‹å¹³è¡¡ä½ç½®ï¼Œå¹¶å—åŠ›åˆ†æï¼š åŠ¨åŠ›å­¦æ–¹ç¨‹ï¼š m\\ddot x(t) + c\\dot x(t) + kx(t) = 0 æˆ–è€…å†™æˆï¼š \\ddot x(t) + 2\\zeta \\omega_0 \\dot x(t) + \\omega_0^2x(t) = 0\\\\ \\frac c m = 2 \\zeta\\omega_0 è¿™é‡Œæˆ‘ä»¬çš„å›ºæœ‰é¢‘ç‡ï¼š$\\omega_0 = \\sqrt {\\dfrac k m}$ ; ç›¸å¯¹é˜»å°¼ç³»æ•°ä¸º $\\zeta = \\dfrac c {2\\sqrt {km}}$ ä½¿ç”¨ç‰¹å¾æ ¹æ³•æ¥æ±‚è§£å¾—ï¼š è¿™é‡Œåªæœ‰æ¬ é˜»å°¼æ‰ä¼šå¼•èµ·æŒ¯åŠ¨ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ç»“æ„é˜»å°¼éƒ½åœ¨0.05ä»¥ä¸‹ã€‚ è¿‡é˜»å°¼å’Œä¸´ç•Œé˜»å°¼ä¼šé€ æˆç³»ç»Ÿé€æ¸åœæ­¢ã€‚ æƒ…å†µä¸€ï¼šæ¬ é˜»å°¼ $\\zeta &lt; 1$ ç‰¹å¾æ ¹ï¼š$\\lambda_{1,2} = -\\zeta\\omega_0 \\pm i\\omega_d$ æ­¤æ—¶æœ‰ä¸¤ä¸ªå¤æ•°æ ¹ï¼› æ­¤æ—¶å¾—æŒ¯åŠ¨æ–¹ç¨‹è§£ä¸ºï¼š$ x(t)=e^{-\\zeta\\omega_0t}(c_1\\cos\\omega_dt + c_2\\sin\\omega_dt )$ å…¶ä¸­ $c_1,c_2:$åˆå§‹æ¡ä»¶ç¡®å®šï¼› æœ‰é˜»å°¼çš„è‡ªç”±æŒ¯åŠ¨é¢‘ç‡ ï¼š $\\omega_d = \\omega_0\\sqrt{1-\\zeta^2}$ï¼Œä»ä¸­å¾—å‡ºï¼Œæœ‰é˜»å°¼æƒ…å†µä¸‹çš„æŒ¯åŠ¨å‘¨æœŸæ›´é•¿ï¼Œé¢‘ç‡æ›´æ…¢ã€‚ æ­¤æ—¶çš„å‘¨æœŸä¸º$T_d = \\dfrac{2\\pi}{\\omega_0\\sqrt{1-\\zeta^2}} = \\dfrac{T_0}{\\sqrt{1-\\zeta^2}}$ æ˜¯åˆå§‹æ¡ä»¶ï¼š$x(0) = x_0 \\qquad \\dot x(0)=x_0$ æ­¤æ—¶çš„æŒ¯åŠ¨ç•Œä¸ºï¼š$x(t)=e^{-\\zeta\\omega_0t}(x_0\\cos\\omega_dt + \\dfrac {\\dot x_0 + \\zeta\\omega_0x_0} {\\omega_d}\\sin\\omega_dt ) $ æˆ–ç®€å†™æˆï¼š$x(t)=e^{-\\zeta\\omega_0t}Asin(\\omega_d t + \\theta) $ å…¶ä¸­$A = \\sqrt{x_0^2+\\left (\\dfrac {\\dot x_0 + \\zeta\\omega_0x_0} {\\omega_d}\\right )^2}$ , $\\theta = tg^{-1} \\dfrac{x_0\\omega_d}{\\dot x_0 + \\zeta\\omega_0x_0}$ å¦‚å›¾ä¸ºæŒ¯åŠ¨çš„å›¾å½¢ï¼š æ¬ é˜»å°¼ä¸ºæŒ¯å¹…é€æ¸è¡°å‡ï¼Œå‘¨æœŸä¸å˜çš„æŒ¯åŠ¨ã€‚ å¯¹æ¯”é˜»å°¼ä¸‹çš„æŒ¯åŠ¨å¯çŸ¥ï¼šåœ¨é«˜é¢‘çš„æŒ¯åŠ¨ä¸‹å¯ä»¥é€šè¿‡é˜»å°¼ææ–™è¿›è¡Œæ§åˆ¶ï¼Œä½†æ˜¯å¯¹äºä½é¢‘ææ–™æ¥è¯´é˜»å°¼ææ–™çš„ä½œç”¨ä¸å¤§ï¼› é˜»å°¼ææ–™å±äºè¢«åŠ¨æ§åˆ¶çš„ä¸€ç§ï¼Œä¸»è¦æ˜¯æŒ¯åŠ¨çš„èƒ½é‡ å‡å¹…ç³»æ•° $\\eta$ è¯„ä»·é˜»å°¼å¯¹æŒ¯å¹…è¡°å‡å¿«æ…¢çš„å½±å“ï¼Œå®šä¹‰ä¸ºç›¸é‚»ä¸¤ä¸ªæŒ¯å¹…çš„æ¯”å€¼ï¼š \\eta = \\dfrac {\\Delta_i} {\\Delta_{i+1}} = \\dfrac {Ae^{-\\zeta\\omega_0t}} {Ae^{-\\zeta\\omega_0{(t+T_d)}}}=e^{-\\zeta\\omega_0T_d} $\\eta$ å’Œ t æ— å…³ï¼Œä»»æ„ä¸¤ä¸ªç›¸é‚»æŒ¯å¹…ä¹‹æ¯”å‡ä¸º$\\eta$ è¡°å‡æŒ¯åŠ¨çš„é¢‘ç‡ä¸º$\\omega_d$ï¼ŒæŒ¯å¹…è¡°å‡çš„å¿«æ…¢å–å†³äº$\\zeta\\omega_0$ï¼Œè¿™ä¸¤ä¸ªé‡è¦çš„ç‰¹å¾åæ˜ åœ¨ç‰¹å¾æ–¹ç¨‹çš„ç‰¹å¾æ ¹çš„å®éƒ¨å’Œè™šéƒ¨. ä½†æ˜¯ç”±äºå…¶å«æœ‰æŒ‡æ•°é¡¹ï¼Œä¸åˆ©äºå·¥ç¨‹ä¸Šçš„åº”ç”¨ï¼Œå› æ­¤å®é™…ä¸­é‡‡ç”¨å¯¹æ•°è¡°å‡ç‡ï¼Œ$\\Lambda=\\ln \\eta = \\zeta\\omega_0T_d$ ,å¯ä»¥ä½¿ç”¨ä»ªå™¨æµ‹å¾—ã€‚ å®éªŒæµ‹é‡ï¼š åˆ©ç”¨ç›¸éš”j ä¸ªå‘¨æœŸçš„ä¸¤ä¸ªå³°å€¼è¿›è¡Œæ±‚è§£ï¼š \\dfrac {\\Delta_i} {\\Delta_{i+j}} = \\dfrac {\\Delta_i} {\\Delta_{i+1}}\\dfrac {\\Delta_{i+1}} {\\Delta_{i+2}}\\dfrac {\\Delta_{i+2}} {\\Delta_{i+3}}\\dots\\dfrac {\\Delta_{i+j-1}} {\\Delta_{i+j}} å¾—ï¼š$\\Lambda=\\dfrac1 j\\ln \\eta = \\zeta\\omega_0 \\dfrac{2\\pi}{\\omega_0\\sqrt{1-\\zeta^2}} = \\dfrac{2\\pi\\zeta}{\\sqrt{1-\\zeta^2}} \\approx 2\\pi\\zeta$ å…¶ä¸­$\\zeta = \\dfrac{\\Lambda}{2\\pi}$ æƒ…å†µäºŒï¼šè¿‡é˜»å°¼ $\\zeta &gt; 1$ ç‰¹å¾æ ¹ï¼š$\\lambda_{1,2} = -\\zeta\\omega_0 \\pm i\\omega_0\\sqrt{\\zeta^2-1}$ æ­¤æ—¶æœ‰ä¸¤ä¸ªè´Ÿå®æ ¹ï¼› $\\omega^* = \\omega_0\\sqrt{\\zeta^2-1}$ æ­¤æ—¶å¾—æŒ¯åŠ¨æ–¹ç¨‹è§£ä¸ºï¼š$ x(t)=e^{-\\zeta\\omega_0t}(c_1ch\\omega^*t + c_2sh\\omega^*t )$ å…¶ä¸­ $c_1,c_2:$åˆå§‹æ¡ä»¶ç¡®å®šï¼› æ˜¯åˆå§‹æ¡ä»¶ï¼š$x(0) = x_0 \\qquad \\dot x(0)=x_0$ æ­¤æ—¶çš„æŒ¯åŠ¨ç•Œä¸ºï¼š$x(t)=e^{-\\zeta\\omega_0t}(x_0ch\\omega^*t + \\dfrac {\\dot x_0 + \\zeta\\omega_0x_0} {\\omega_d}sh\\omega^*t ) $ å“åº”çš„å›¾å½¢ä¸ºï¼š ä¸€ç§æŒ‰æŒ‡æ•°è§„å¾‹è¡°å‡çš„éå‘¨æœŸè •åŠ¨ï¼Œæ²¡æœ‰æŒ¯åŠ¨å‘ç”Ÿ æƒ…å†µä¸‰ï¼šä¸´ç•Œé˜»å°¼ $\\zeta = 1$ ç‰¹å¾æ ¹ï¼š$\\lambda_{1,2} = -\\omega_0$ æ­¤æ—¶æœ‰ä¸¤ä¸ªé‡æ ¹ï¼› æ­¤æ—¶å¾—æŒ¯åŠ¨æ–¹ç¨‹è§£ä¸ºï¼š$ x(t)=e^{\\omega_0t}(c_1 + c_2t )$ å…¶ä¸­ $c_1,c_2:$åˆå§‹æ¡ä»¶ç¡®å®šï¼› æ˜¯åˆå§‹æ¡ä»¶ï¼š$x(0) = x_0 \\qquad \\dot x(0)=x_0$ æ­¤æ—¶çš„æŒ¯åŠ¨ç•Œä¸ºï¼š$x(t)=e^{-\\zeta\\omega_0t}(x_0+ ({\\dot x_0 + \\omega_0x_0})t)$ è¿™é‡Œä¹Ÿæ˜¯å‘ˆç°æŒ‡æ•°è¡°å‡çš„ï¼Œåªæ˜¯è¡°å‡çš„é€Ÿåº¦æ²¡æœ‰è¿‡é˜»å°¼å¿«ï¼› ä¸´ç•Œé˜»å°¼ç³»æ•°$c_{cr}$ ï¼š $\\zeta = \\dfrac c {2\\sqrt {km}}$ ä½†æ˜¯è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œçš„cæ˜¯ç­‰æ•ˆé˜»å°¼ï¼Œå¯èƒ½æœ‰ç³»æ•°ï¼Œè¦æ•´ä½“æ¥ä¹˜ï¼Œæœ€åå¾—å‡º$c_{cr} = 2\\sqrt{km}$ æ¬ é˜»å°¼æ˜¯ä¸€ç§æŒ¯å¹…é€æ¸è¡°å‡çš„æŒ¯åŠ¨ è¿‡é˜»å°¼æ˜¯ä¸€ç§æŒ‰æŒ‡æ•°è§„å¾‹è¡°å‡çš„éå‘¨æœŸè •åŠ¨ï¼Œæ²¡æœ‰æŒ¯åŠ¨å‘ç”Ÿ ä¸´ç•Œä¹Ÿæ˜¯æŒ‰æŒ‡æ•°è§„å¾‹è¡°å‡çš„éå‘¨æœŸè¿åŠ¨ï¼Œä½†æ¯”è¿‡é˜»å°¼è¡°å‡å¿«äº› åº”ç”¨æ¡ˆä¾‹ ç”±é¢˜çŸ¥ï¼š$x(0) = x_0 \\qquad \\dot x(0)=x_0$ æ­¤æ—¶çš„æŒ¯åŠ¨ç•Œä¸ºï¼š$x(t)=e^{-\\zeta\\omega_0t}(x_0\\cos\\omega_dt + \\dfrac {\\dot x_0 + \\zeta\\omega_0x_0} {\\omega_d}\\sin\\omega_dt ) $ æ±‚å¯¼å¯å¾—ï¼š$\\dot{x}(t)=-\\frac{\\omega_{0}^{2} x_{0}}{\\omega_{d}} e^{-\\zeta \\omega_{0} t} \\sin \\omega_{d} t$ è®¾åœ¨æ—¶åˆ»t1 è´¨é‡è¶Šè¿‡å¹³è¡¡ä½ç½®åˆ°è¾¾æœ€å¤§ä½ç§»ï¼Œæ­¤æ—¶é€Ÿåº¦ï¼š $\\dot{x}(t)=-\\frac{\\omega_{0}^{2} x_{0}}{\\omega_{d}} e^{-\\zeta \\omega_{0} t} \\sin \\omega_{d} t=0 \\Rightarrow t_1 = \\dfrac{\\pi}{\\omega_d}$ å³ç»è¿‡åŠä¸ªå‘¨æœŸåå‡ºç°ç¬¬ä¸€ä¸ªæŒ¯å¹…x1 $x_{1}=x\\left(t_{1}\\right)=-x_{0} e^{-\\zeta \\omega_{0} t_{1}}=-x_{0} e^{-\\frac{\\pi \\zeta}{\\sqrt{1-\\zeta^{2}}}}$ ç”±é¢˜å¯çŸ¥ï¼š$\\left|\\dfrac{x_{1}}{x_{0}}\\right|=e^{-\\frac{\\pi \\zeta}{\\sqrt{1-\\zeta^{2}}}}=10 \\%$ è§£å¾—ï¼š$\\zeta=0.59$ è¿™é‡Œå»ºç«‹å¹¿ä¹‰åæ ‡ $\\theta$ï¼Œè¿™é‡Œæˆ‘ä»¬å‡è®¾åˆå§‹ä½ç½®å·²ç»è¾¾åˆ°äº†é™å¹³è¡¡ä½ç½®äº†ï¼Œå› æ­¤ä¸ç”¨åˆ†æé‡åŠ›å’Œå¼¹æ€§åŠ›(å› ä¸ºå·²ç»æŠµæ¶ˆäº†)ã€‚ é˜»å°¼åŠ›çš„æ–¹å‘å’Œé€Ÿåº¦çš„æ–¹å‘ç›¸åï¼Œå¼¹æ€§åŠ›å’Œä½ç§»çš„æ–¹å‘ç›¸åã€‚ ç”±åŠ›çŸ©å¹³è¡¡å¯å¾—ï¼š m \\ddot{\\theta}(t) l \\cdot l+c \\dot{\\theta}(t) a \\cdot a+k \\theta(t) b \\cdot b=0\\\\ m l^{2} \\ddot{\\theta}(t)+c a^{2} \\dot{\\theta}(t)+k b^{2} \\theta(t)=0 åˆ™æ­¤æ—¶æ ¹æ®å…¬å¼å¯æ±‚å‡ºæ— é˜»å°¼æ—¶çš„å›ºæœ‰é¢‘ç‡ä¸ºï¼š$\\omega_{0}=\\sqrt{\\dfrac{k b^{2}}{m l^{2}}}=\\dfrac{b}{l} \\sqrt{\\dfrac{k}{m}}$ $\\dfrac{c a^{2}}{m l^{2}}=2 \\xi \\omega_{0} \\Rightarrow \\xi=\\dfrac{c a^{2}}{2 m l^{2} \\omega_{0}}=\\dfrac{c a^{2}}{2 m l b} \\sqrt{\\dfrac{m}{k}}$ äºæ˜¯ï¼Œé˜»å°¼æŒ¯åŠ¨çš„å›ºæœ‰é¢‘ç‡ä¸º $\\omega_{d}=\\omega_{0} \\sqrt{1-\\xi^{2}}=\\dfrac{1}{2 m l^{2}} \\sqrt{4 k m b^{2} l^{2}-c^{2} a^{4}}$ è¿›è€Œå¾—åˆ°ä¸´ç•Œé˜»å°¼ç³»æ•°ä¸ºï¼š $\\xi=1 \\quad \\Rightarrow \\quad c_{c r}=\\dfrac{2 b l}{a^{2}} \\sqrt{m k}$ ç­‰æ•ˆç²˜æ€§é˜»å°¼ é˜»å°¼åœ¨æ‰€æœ‰æŒ¯åŠ¨ç³»ç»Ÿä¸­æ˜¯å®¢è§‚å­˜åœ¨çš„ï¼› å¤§å¤šæ•°é˜»å°¼æ˜¯éç²˜æ€§é˜»å°¼ï¼Œå…¶æ€§è´¨å„ä¸ç›¸åŒ éç²˜æ€§é˜»å°¼çš„æ•°å­¦æè¿°æ¯”è¾ƒå¤æ‚ï¼Œå¤„ç†æ–¹æ³•ä¹‹ä¸€ï¼š é‡‡ç”¨èƒ½é‡æ–¹æ³•å°†éç²˜æ€§é˜»å°¼ç®€åŒ–ä¸ºç­‰æ•ˆç²˜æ€§é˜»å°¼ ç­‰æ•ˆåŸåˆ™ï¼šç­‰æ•ˆç²˜æ€§é˜»å°¼åœ¨ä¸€ä¸ªå‘¨æœŸå†…æ¶ˆè€—çš„èƒ½é‡ç­‰äºè¦ç®€åŒ–çš„éç²˜æ€§é˜»å°¼åœ¨åŒä¸€å‘¨æœŸå†…æ¶ˆè€—çš„èƒ½é‡ã€‚ é€šå¸¸å‡è®¾åœ¨ç®€è°æ¿€æŒ¯åŠ›ä½œç”¨$F=F_0\\sin\\omega t$\\ ä¸‹ï¼Œéç²˜æ€§é˜»å°¼ç³»ç»Ÿçš„ç¨³æ€å“åº”ä»ç„¶ä¸ºç®€è°æŒ¯åŠ¨ã€‚ è¯¥å‡è®¾åªæœ‰åœ¨éç²˜æ€§é˜»å°¼æ¯”è¾ƒå°æ—¶æ‰æ˜¯åˆç†çš„ï¼Œå¦åˆ™ä¼šé€ æˆå¤§é‡çš„ç›¸ä½ä¸Šçš„å»¶è¿Ÿã€‚ ç²˜æ€§é˜»å°¼åœ¨ä¸€ä¸ªå‘¨æœŸå†…æ¶ˆè€—çš„èƒ½é‡ $\\Delta E$ å¯è¿‘ä¼¼åœ°åˆ©ç”¨æ— é˜»å°¼æŒ¯åŠ¨è§„å¾‹è®¡ç®—å‡ºï¼š \\Delta E=-\\oint c \\dot{x} d x=-\\int_{0}^{T} c \\dot{x} d t=-c \\omega_{0}^{2} A^{2} \\int_{0}^{T} \\cos ^{2}\\left(\\omega_{0} t+\\theta\\right) d t=-\\pi c A^{2}ç›®çš„æ˜¯ä¸ºäº†é‡‡ç”¨è¯¥å¼è®¡ç®—ç­‰æ•ˆç²˜æ€§é˜»å°¼ç³»æ•° è®¨è®ºä»¥ä¸‹å‡ ç§éç²˜æ€§é˜»å°¼æƒ…å†µï¼š å¹²æ‘©æ“¦é˜»å°¼ã€å¹³æ–¹é˜»å°¼(é«˜é€Ÿè¿åŠ¨çš„ç‰©ä½“)ã€ç»“æ„é˜»å°¼ å¹²æ‘©æ“¦é˜»å°¼ å¹²æ‘©æ“¦é˜»å°¼åˆç§°åº“ä¼¦é˜»å°¼ å…¶æ‘©æ“¦åŠ›ï¼š$F_{d}=-\\mu F_{N} \\operatorname{sgn} \\dot{x}(t)$ ï¼Œ $\\operatorname{sgn} \\dot{x}(t)=\\left\\{\\begin{array}{ll}1, &amp; \\dot{x}(t)&gt;0 \\\\ 0, &amp; \\dot{x}(t)=0 \\\\ -1, &amp; \\dot{x}(t)&lt;0\\end{array}\\right.$ å…¶ä¸­$\\mu:$æ‘©æ“¦ç³»æ•° $F_N:$æ­£å‹åŠ› $sgn\\dot x$ï¼šä¸ºç¬¦å·å‡½æ•° å¹³æ–¹é˜»å°¼ å·¥ç¨‹èƒŒæ™¯ï¼šä½ç²˜åº¦æµä½“ä¸­ä»¥è¾ƒå¤§é€Ÿåº¦è¿åŠ¨çš„ç‰©ä½“æ—¶ï¼Œé˜»å°¼åŠ›ä¸ç›¸å¯¹é€Ÿåº¦çš„å¹³æ–¹æˆæ­£æ¯”ï¼Œæ–¹å‘ç›¸åã€‚ é˜»å°¼åŠ›ï¼š$F_{d}=-c_{d} \\dot{x}^{2}(t) \\operatorname{sgn} \\dot{x}(t)$ $c_d$ï¼šé˜»åŠ›ç³»æ•° åœ¨è¿åŠ¨æ–¹å‘ä¸å˜çš„åŠä¸ªå‘¨æœŸå†…è®¡ç®—è€—æ•£èƒ½é‡ï¼Œå†ä¹˜2ï¼š $\\Delta E=-\\oint c_{d} \\dot{x}^{2}(t) \\operatorname{sgn} \\dot{x}(t) d x=-2 \\int_{-T / 4}^{T / 4} c_{d} \\dot{x}^{3}(t) d t=-\\dfrac{8}{3} c_{d} \\omega_{0}^{2} A^{2}$ ç­‰æ•ˆç²˜æ€§é˜»å°¼ç³»æ•°ï¼š$c_{e}=-\\dfrac{8}{3 \\pi} c_{d} \\omega_{0} A$ ç»“æ„é˜»å°¼ ç”±äºææ–™ä¸ºéå®Œå…¨å¼¹æ€§ï¼Œåœ¨å˜å½¢è¿‡ç¨‹ä¸­ææ–™çš„å†…æ‘©æ“¦æ‰€å¼•èµ·çš„é˜»å°¼ç§°ä¸ºç»“æ„é˜»å°¼ã€‚ ç‰¹å¾ï¼šåº”åŠ›ï¼åº”å˜æ›²çº¿å­˜åœ¨æ»å›æ›²çº¿åŠ è½½å’Œå¸è½½æ²¿ä¸åŒæ›²çº¿ å†…æ‘©æ“¦æ‰€è€—æ•£çš„èƒ½é‡ç­‰äºæ»å›ç¯æ‰€å›´çš„é¢ç§¯ï¼š$\\Delta E=-vA^2$ ç­‰æ•ˆç²˜æ€§é˜»å°¼ç³»æ•°ï¼š$c_e=-\\dfrac {v} {\\pi\\omega_0}$ åº“ä¼¦æ‘©æ“¦å•è‡ªç”±åº¦ç³»ç»Ÿè‡ªç”±æŒ¯åŠ¨çš„ç²¾ç¡®åˆ†ææœ‰åº“ä¼¦åŠ›é˜»å°¼çš„ä¸€èˆ¬æŒ¯åŠ¨ç³»ç»Ÿåœ¨è®¸å¤šæœºæ¢°ç³»ç»Ÿä¸­ï¼Œä¸ºäº†ç®€å•ä¸æ–¹ä¾¿ç»å¸¸é‡‡ç”¨åº“ä¼¦æ‘©æ“¦ $F=\\mu N$, å…¶ä¸­$\\mu$ : åŠ¨åŠ›å­¦ç³»æ•°ï¼ŒNï¼šæ³•å‘åŠ› æ‘©æ“¦è‡ªç”±æŒ¯åŠ¨é—®é¢˜ï¼š åŠ¨åŠ›å­¦æ–¹ç¨‹ï¼š$m\\ddot x+ kx = -\\mu N$ æ˜¯ä¸ªäºŒé˜¶é½æ¬¡çš„å¾®åˆ†æ–¹ç¨‹ é€šè§£ï¼š$x(t)=A_{1} \\cos \\omega_{0} t+A_{2} \\sin \\omega_{0} t-\\dfrac{\\mu N}{k}$ A1å’ŒA2ä¸ºå¸¸æ•°ï¼Œç”±è¿™åŠä¸ªå‘¨æœŸçš„åˆå§‹æ¡ä»¶ç¡®å®šï¼Œ$\\omega_0=\\sqrt{k/m}$ ä¸ºæŒ¯åŠ¨çš„å›ºæœ‰é¢‘ç‡ã€‚ åŠ¨åŠ›å­¦æ–¹ç¨‹ï¼š$m\\ddot x+ kx = -\\mu N$ æ˜¯ä¸ªäºŒé˜¶é½æ¬¡çš„å¾®åˆ†æ–¹ç¨‹ é€šè§£ï¼š$x(t)=A_{1} \\cos \\omega_{0} t+A_{2} \\sin \\omega_{0} t-\\dfrac{\\mu N}{k}$ åŠ¨åŠ›å­¦æ–¹ç¨‹ï¼š$m\\ddot x+ kx = \\mu N$ æ˜¯ä¸ªäºŒé˜¶é½æ¬¡çš„å¾®åˆ†æ–¹ç¨‹ é€šè§£ï¼š$x(t)=A_{1} \\cos \\omega_{0} t+A_{2} \\sin \\omega_{0} t+\\dfrac{\\mu N}{k}$ A3å’ŒA4ä¸ºå¸¸æ•°ï¼Œç”±è¿™åŠä¸ªå‘¨æœŸçš„åˆå§‹æ¡ä»¶ç¡®å®š $\\mu$N / k å¯ä»¥çœ‹åšå¸¸åŠ›ä»¥é™è½½è·æ–¹å¼ä½œç”¨åœ¨è´¨é‡å—ä¸Šæ—¶å¼¹ç°§äº§ç”Ÿçš„è™šä½ç§»ã€‚ è¿™ä¸¤å¼åŒæ—¶è¡¨æ˜ï¼Œåœ¨æ¯ä¸€ä¸ªåŠå‘¨æœŸä¸­è¿åŠ¨éƒ½æ˜¯ç®€è°çš„ï¼Œåªæ˜¯å¯¹åº”çš„å¹³è¡¡ä½ç½®ä»$\\mu$N / kå˜ä¸º$-\\mu$N / kã€‚ åˆå¹¶å¯å¾—ï¼š$m\\ddot x+ \\mu N sgn(\\dot x)kx = 0$ æ˜¯éçº¿æ€§æ–¹ç¨‹ï¼Œæ— è§£æè§£ï¼Œå¯ä»¥åˆ†æ®µæ±‚è§£ã€‚ ç”±äºå¼€å§‹çš„æƒ…å†µä¸‹ï¼Œè´¨é‡å—æ˜¯è¢«æ‹‰åˆ°äº†æœ€å·¦ç«¯ï¼Œç„¶åé‡Šæ”¾ï¼Œåˆ™æ­¤æ—¶çš„æ˜¯ä»å³å‘å·¦è¿åŠ¨çš„ï¼Œæ»¡è¶³æƒ…å†µ2ï¼› å‡å®šåˆå§‹æ¡ä»¶ï¼š$x(0)=x_0, \\dot x(0)=0$ $A_3=x_0-\\dfrac {\\mu N}{k} A_4=0$ $x(t)=\\left(x_{0}-\\dfrac{\\mu N}{k}\\right) \\cos \\omega_{0} t+\\dfrac{\\mu N}{k}$ , åœ¨åŠå‘¨æœŸå†…æˆç«‹$t \\in [0, \\dfrac \\pi {\\omega_0}]$ å½“$t=\\dfrac \\pi {\\omega_0}$æ—¶ï¼Œè´¨é‡å¿«è¾¾åˆ°æœ€å·¦ç«¯ä½ç½®ï¼š $x_{1}=x\\left(t=\\dfrac{\\pi}{\\omega_{0}}\\right)=\\left(x_{0}-\\dfrac{\\mu N}{k}\\right) \\cos \\omega_{0} t+\\dfrac{\\mu N}{k}=-\\left(x_{0}-\\dfrac{2 \\mu N}{k}\\right)$ ç¬¬äºŒä¸ªåŠå‘¨æœŸå†…ï¼Œå‰ä¸€ä¸ªåŠå‘¨æœŸç»ˆæ­¢æ—¶åˆ»çš„è¿åŠ¨æƒ…å†µæ˜¯è¿™åŠä¸ªå‘¨æœŸçš„åˆå§‹æ¡ä»¶ï¼š $x(0)=-(x_0-\\dfrac{2\\mu N}{k}), \\dot x(0)=0$ $\\Rightarrow$ $A_1=-x_0+\\dfrac {3\\mu N}{k} A_2=0$ $x(t)=\\left(x_{0}-\\dfrac{3\\mu N}{k}\\right) \\cos \\omega_{0} t-\\dfrac{\\mu N}{k}$ , åœ¨åŠå‘¨æœŸå†…æˆç«‹$t \\in [\\dfrac \\pi {\\omega_0}, \\dfrac {2\\pi} {\\omega_0}]$ åœ¨è¿™åŠä¸ªå‘¨æœŸçš„æœ€åæ—¶åˆ»çš„ä½ç§»å’Œé€Ÿåº¦ï¼š$x_2=x_0-\\dfrac{4\\mu N}{k}, \\dot x=0$ åœ¨è¿åŠ¨ç»ˆæ­¢å‰ï¼Œå‘ç”Ÿçš„åŠä¸ªå‘¨æœŸçš„ä¸ªæ•°r ä¸ºï¼š$x_{0}-r \\dfrac{2 \\mu N}{k} \\leq \\dfrac{\\mu N}{k} \\Rightarrow r \\geq \\dfrac{x_{0}-\\dfrac{\\mu N}{k}}{\\dfrac{2 \\mu N}{k}}$ æœ‰åº“ä¼¦åŠ›é˜»å°¼çš„æ‰­è½¬æŒ¯åŠ¨ç³»ç»Ÿ ç¬¬2ä¸ªåŠå‘¨æœŸç»“æŸæ—¶æŒ¯å¹…ï¼š$\\theta_{r}=\\theta_{0}-r \\dfrac{2 T}{k_{\\theta}}$ ,å…¶ä¸­$\\theta_0$ä¸ºt=0æ—¶çš„è§’ä½ç§»(t=0æ—¶çš„$\\dot \\theta_0=0$) å½“$r \\geq\\left(\\theta_{0}-\\dfrac{T}{k_{\\theta}}\\right) /\\left(\\dfrac{2 T}{k_{\\theta}}\\right)$æ—¶ï¼Œä¼šåœæ­¢è¿åŠ¨ã€‚ å›ºæœ‰é¢‘ç‡ï¼š$\\omega_{0}=\\sqrt{\\dfrac{k}{m}}=\\dfrac{2 \\pi}{T}=\\dfrac{2 \\pi}{0.4}(\\mathrm{rad} / s)=15.708(\\mathrm{rad} / s)$ åœ¨ä¸€ä¸ªå‘¨æœŸå†…æŒ¯å¹…å‡å°‘é‡ä¸ºï¼š$\\dfrac{4 \\mu N}{k}=\\dfrac{4 \\mu m g}{k}$ ç”±åˆå§‹æ¡ä»¶å¾—ï¼š$5\\times\\dfrac{4 \\mu m g}{k} = 0.10-0.01(m)=0.09(m)$ æ‘©æ“¦ç³»æ•°ï¼š$\\mu=\\dfrac{0.09 k}{20 m g}=\\dfrac{0.09 \\omega_{0}^{2}}{20 g}=\\dfrac{0.09 \\times 15.708^{2}}{20 \\times 9.81}=0.1132$ $r \\geq \\dfrac{0.10472-\\dfrac{400}{49087.5}}{\\dfrac{800}{49087.5}}=5.926$ å› æ­¤å…¶åœæ­¢è¦ç»è¿‡çš„å‘¨æœŸæ•°ä¸º6ä¸ªåŠå‘¨æœŸçš„æ—¶é—´ï¼Œå…¶åˆå§‹çš„ä½ç§» $\\theta_0=0.10472 rad$ ç¬¬ræ ¹åŠå‘¨æœŸç»“æŸåçš„æŒ¯å¹…ä¸ºï¼š$\\theta_{r}=\\theta_{0}-r \\dfrac{2 T}{k_{\\theta}}$ ç»è¿‡6ä¸ªåŠå‘¨æœŸåæ»‘è½®çš„è§’ä½ç§»ä¸ºï¼š$\\theta=0.10472-6 \\times 2 \\times \\dfrac{400}{49087.5}(\\mathrm{rad})=0.006935(\\mathrm{rad})=0.39724^{\\circ}$ æ»‘è½®åœæ­¢çš„ä½ç½®ä¸å¹³è¡¡ä½ç½®çš„å¤¹è§’0.397240Â°ï¼Œä¸”ä¸åˆå§‹è§’ä½ç§»åœ¨å¹³è¡¡ä½ç½®çš„åŒä¾§ã€‚","link":"/2022/03/05/%E6%8C%AF%E5%8A%A8%E5%8A%9B%E5%AD%A6/%E7%AC%AC%E4%BA%8C%E7%AB%A0%E5%8D%95%E8%87%AA%E7%94%B1%E5%BA%A6%E7%B3%BB%E7%BB%9F%E8%87%AA%E7%94%B1%E6%8C%AF%E5%8A%A8-%E7%AC%AC%E4%BA%8C%E9%83%A8%E5%88%86/"},{"title":"ç¬¬äº”ç«  çº¿æ€§æŒ¯åŠ¨çš„è¿‘ä¼¼è®¡ç®—æ–¹æ³• ç¬¬ä¸€éƒ¨åˆ†","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦ä»‹ç»çš„æ˜¯çº¿æ€§æŒ¯åŠ¨çš„è¿‘ä¼¼è®¡ç®—æ–¹æ³•ä¸­é‚“å…‹åˆ©æ³•ï¼Œç‘åˆ©æ³•ï¼Œé‡ŒèŒ¨æ³•ã€‚ åœ¨çº¿æ€§å¤šè‡ªç”±åº¦ç³»ç»ŸæŒ¯åŠ¨ä¸­ï¼ŒæŒ¯åŠ¨é—®é¢˜å½’ç»“ä¸ºåˆšåº¦çŸ©é˜µå’Œè´¨é‡çŸ©é˜µçš„å¹¿ä¹‰ç‰¹å¾å€¼é—®é¢˜ ã€‚ç¼ºç‚¹ä¹‹ä¸€ï¼šå½“ç³»ç»Ÿè‡ªç”±åº¦è¾ƒå¤§æ—¶ï¼Œæ±‚è§£è®¡ç®—å·¥ä½œé‡éå¸¸å¤§ å¯¹äºèˆªå¤©çš„å¸†æ¿è‡ªç”±åº¦æœ‰40ä¸‡ä¸ªï¼Œå¯¹äºé«˜é“è¿‡éš§é“æ—¶æŒ¯åŠ¨çš„è‡ªç”±åº¦ä¸ºä¸Šäº¿ä¸ªã€‚Ansysé‡Œé¢æ±‚è§£ç‰¹å¾æ ¹æ˜¯æœ‰å…¶æ ¸å¿ƒçš„ç®—æ³•çš„ï¼Œå’Œè‡ªå·±åœ¨Matlabé‡Œé¢è‡ªå·±ç¼–ç¨‹æ±‚è§£çš„ç»“æœä¸åŒã€‚ æœ¬ç« ä»‹ç»å‡ ç§è¿‘ä¼¼è®¡ç®—æ–¹æ³•ï¼Œå¯ä½œä¸ºå®ç”¨çš„å·¥ç¨‹è®¡ç®—æ–¹æ³•å¯¹ç³»ç»Ÿçš„æŒ¯åŠ¨ç‰¹æ€§ä½œè¿‘ä¼¼è®¡ç®— å…¶ä¸­ä¸»è¦åŒ…æ‹¬é‚“å…‹åˆ©æ³•ï¼Œç‘åˆ©æ³•ï¼Œé‡ŒèŒ¨æ³•ï¼Œä¼ é€’çŸ©é˜µæ³•ã€‚ æ—©äº›å¹´è®¡ç®—è®¾å¤‡ä¸å¼ºå¤§æ—¶ä¸»è¦ä½¿ç”¨ä¸Šè¿°çš„æ–¹æ³•è¿›è¡Œè¿‘ä¼¼è®¡ç®—ï¼Œè€Œç°åœ¨çš„è®¡ç®—æ–¹æ³•å’Œè½¯ä»¶æ¯”è¾ƒçš„å‘è¾¾ï¼Œå› æ­¤æœ¬ç« çš„æ–¹æ³•åªä½œä¸ºäº†è§£ä¸æ˜¯é‡ç‚¹ã€‚ ä½†æ˜¯ä¼ é€’çŸ©é˜µæ³•æ˜¯é‡ç‚¹ï¼Œç°åœ¨ä¹Ÿæœ‰äººç ”ç©¶ã€‚ é‚“å…‹åˆ©æ³• ç”±é‚“å…‹åˆ©ï¼ˆDunkerleyï¼‰åœ¨å®éªŒç¡®å®šå¤šåœ†ç›˜çš„æ¨ªå‘æŒ¯åŠ¨å›ºæœ‰é¢‘ç‡æ—¶æå‡ºçš„ ä¾¿äºä½œä¸ºç³»ç»ŸåŸºé¢‘çš„è®¡ç®—å…¬å¼ ä¸Šè¿°æ–¹ç¨‹æ±‚è§£å¾—åˆ°çš„æ¨¡æ€çš„ç»“æœæ˜¯ç›¸åŒçš„ï¼Œä¸ä¼šå› ä¸ºä½œç”¨åŠ›æ–¹ç¨‹å’Œä½ç§»æ–¹ç¨‹è€Œæœ‰ä¸åŒï¼Œå…¶ç»“æœæ˜¯ç›¸åŒçš„ã€‚ å…¶ä¸­ï¼Œè¿™é‡Œçš„$a_1$æ˜¯DçŸ©é˜µçš„è¿¹ï¼Œå³å¯¹è§’çº¿å…ƒç´ ä¹‹å’Œã€‚ M é˜µä¸€èˆ¬æ˜¯å¯¹è§’çš„ï¼Œåªæœ‰åœ¨é›†ä¸­è´¨é‡å’Œæ‘†åŠ¨è€¦åˆçš„æƒ…å†µä¸‹æ˜¯å¯¹ç§°éå¯¹è§’çš„. ç‰©ç†æ„ä¹‰ï¼šæ²¿ç¬¬ i ä¸ªåæ ‡æ–½åŠ å•ä½åŠ›æ—¶æ‰€äº§ç”Ÿçš„ç¬¬ i ä¸ªåæ ‡çš„ä½ç§» å¯¹äºåˆšåº¦ï¼š$F=kx \\Rightarrow k = \\dfrac F x$ å•ä½éœ€è¦çš„åŠ›çš„å¤§å°ï¼›å¯¹äºæŸ”åº¦ï¼š$\\dfrac 1 k=\\dfrac x F$ å•ä½åŠ›äº§ç”Ÿä½ç§»ã€‚ å¦‚æœåªä¿ç•™ç¬¬ i ä¸ªè´¨é‡ï¼Œæ‰€å¾—å•è‡ªç”±åº¦ç³»ç»Ÿçš„å›ºæœ‰é¢‘ç‡ä¸ºï¼š $\\bar{\\omega}$ éƒ½æ˜¯å•è‡ªç”±åº¦ç³»ç»Ÿçš„é¢‘ç‡ã€‚ \\sum_{i=1}^{n} \\frac{1}{\\omega_{i}^{2}}=\\sum_{i=1}^{n} f_{i i} m_{i} \\qquad \\bar{\\omega}_{i}^{2}=\\frac{k_{i}}{m_{i}}=\\frac{1}{f_{i i} m_{i}}\\\\ \\sum_{i=1}^{n} \\frac{1}{\\omega_{i}^{2}}=\\frac{1}{\\bar{\\omega}_{1}^{2}}+\\frac{1}{\\bar{\\omega}_{2}^{2}}+\\cdots+\\frac{1}{\\bar{\\omega}_{n}^{2}}å½“ç¬¬äºŒé˜¶åŠä»¥ä¸Šå›ºæœ‰é¢‘ç‡è¿œå¤§äºåŸºé¢‘æ—¶ï¼Œå¾—åˆ°çš„åŸºé¢‘æ˜¯ç²¾ç¡®å€¼çš„ä¸‹é™ï¼š \\frac{1}{\\omega_{1}^{2}} \\approx \\frac{1}{\\bar{\\omega}_{1}^{2}}+\\frac{1}{\\bar{\\omega}_{2}^{2}}+\\cdots+\\frac{1}{\\bar{\\omega}_{n}^{2}}é‚“å…‹åˆ©æ³•ï¼šåˆ©ç”¨å•è‡ªç”±åº¦å›ºæœ‰é¢‘ç‡è¿‘ä¼¼æ±‚è§£å¤šè‡ªç”±åº¦ç³»ç»ŸåŸºé¢‘çš„æ–¹æ³• \\frac{1}{\\omega_{1}^{2}}+a=b \\quad a=\\frac{1}{\\omega_{2}^{2}}+\\frac{1}{\\omega_{3}^{2}}+\\cdots+\\frac{1}{\\omega_{n}^{2}}\\\\ \\omega_{1}^{2}=\\frac{1}{b-a} \\quad b=\\frac{1}{\\bar{\\omega}_{1}^{2}}+\\frac{1}{\\bar{\\omega}_{2}^{2}}+\\cdots+\\frac{1}{\\bar{\\omega}_{n}^{2}}å› åœ¨é‚“å…‹åˆ©æ³•ä¸­å¿½ç•¥äº†aï¼Œå› æ­¤æ‰€å¾—ç»“æœä¸ºåŸºé¢‘ä¸‹é™ æ€»ç»“ï¼šé‚“å…‹åˆ©æ³•çš„ä¸»è¦æ˜¯ç”¨æ¥æ±‚è§£åŸºé¢‘çš„ï¼Œå°†ç”¨nä¸ªå•è‡ªç”±åº¦çš„é¢‘ç‡æ¥ä¼°è®¡nè‡ªç”±åº¦ç³»ç»Ÿçš„åŸºé¢‘çš„ä¸‹é™ã€‚ ç‘åˆ©æ³• åŸºäºèƒ½é‡åŸç†çš„ä¸€ç§è¿‘ä¼¼æ–¹æ³• å¯ç”¨äºè®¡ç®—ç³»ç»Ÿçš„åŸºé¢‘ ç®—å‡ºçš„è¿‘ä¼¼å€¼ä¸ºå®é™…åŸºé¢‘çš„ä¸Šé™ é…åˆé‚“å…‹åˆ©æ³•ç®—å‡ºçš„åŸºé¢‘ä¸‹é™ï¼Œå¯ä»¥ä¼°è®¡å®é™…åŸºé¢‘çš„å¤§è‡´èŒƒå›´ \\phi=\\varphi=a_{1} \\boldsymbol{\\phi}_{N}^{(1)}+a_{2} \\boldsymbol{\\phi}_{N}^{(2)}+\\cdots+a_{N} \\boldsymbol{\\phi}_{N}^{(n)}=\\sum_{j=1} a_{j} \\boldsymbol{\\phi}_{N}^{(j)}=\\boldsymbol{\\Phi}_{N} \\boldsymbol{a}\\\\\\boldsymbol{\\Phi}_{N}=\\left[\\boldsymbol{\\phi}_{N}^{(1)}, \\boldsymbol{\\phi}_{N}^{(2)}, \\cdots, \\boldsymbol{\\phi}_{N}^{(n)}\\right] \\quad \\boldsymbol{a}=\\left[a_{1}, a_{2}, \\cdots, a_{n}\\right]^{T}\\\\R(\\varphi)=\\frac{\\boldsymbol{a}^{T} \\boldsymbol{\\Phi}_{N}^{T} \\boldsymbol{K} \\boldsymbol{\\Phi}_{N} \\boldsymbol{a}}{\\boldsymbol{a}^{T} \\boldsymbol{\\Phi}_{N}^{T} \\boldsymbol{M} \\boldsymbol{\\Phi}_{N} \\boldsymbol{a}}=\\frac{\\boldsymbol{a}^{T} \\boldsymbol{\\Lambda} \\boldsymbol{a}}{\\boldsymbol{a}^{T} \\boldsymbol{I} \\boldsymbol{a}}=\\sum_{j=1}^{n} a_{j}^{2} \\omega_{j}^{2} / \\sum_{j=1}^{n} a_{j}^{2}å¯ä»¥è¯æ˜ï¼Œ $\\omega_1^2$ å’Œ $\\omega_n^2$åˆ†åˆ«ä¸ºç‘åˆ©å•†çš„æå°å€¼å’Œæå¤§å€¼ã€‚ \\omega_{1}^{2} \\leq R(\\varphi) \\leq \\omega_{n}^{2}åˆ†æï¼šå¦‚æœå°†$\\omega_j$æ¢æˆ$\\omega_1$ï¼Œæ­¤æ—¶$\\omega_1$æ˜¯æœ€ä½é˜¶å›ºæœ‰é¢‘ç‡ R(\\varphi)>\\sum_{j=1}^{n} a_{j}^{2} \\omega_{1}^{2} / \\sum_{j=1}^{n} a_{j}^{2}=\\omega_{1}^{2}ç”±ç‘åˆ©å•†å…¬å¼çŸ¥ï¼Œå½“$\\varphi=\\phi^{(1)}$ ç¡®ä¸ºç¬¬ä¸€é˜¶æŒ¯å‹æ—¶ï¼š$R(\\varphi)=\\omega_1^2$ å› æ­¤ï¼Œç‘åˆ©å•†çš„æå°å€¼ä¸º$\\omega_1^2$ï¼ŒåŒç†å¯è¯æ˜ï¼Œç‘åˆ©å•†çš„æå¤§å€¼ä¸º$\\omega_{n}^2$ ä»£å…¥ç‘åˆ©å•†å¯å¾—ï¼š R(\\varphi) \\approx \\omega_{k}^{2}+\\sum_{j=1}^{n}\\left(\\omega_{j}^{2}-\\omega_{k}^{2}\\right) \\varepsilon_{j}^{2} å› æ­¤ï¼Œè‹¥ $\\varphi$ä¸ $\\phi^{(k)}$ çš„å·®å¼‚ä¸ºä¸€é˜¶å°é‡ï¼Œåˆ™ç‘åˆ©å•†ä¸ $\\omega_k^2$ çš„å·®åˆ«ä¸ºäºŒé˜¶å°é‡ å¯¹äºåŸºé¢‘çš„ç‰¹æ®Šæƒ…å†µï¼Œä»¤kï¼1ï¼Œåˆ™ç”±äº $\\omega_j^2-\\omega_1^2&gt;0 \\ (j=2,â€¦,n)$ ï¼Œç‘åˆ©å•†åœ¨åŸºé¢‘å¤„å–æå¤§å€¼ åˆ©ç”¨ç‘åˆ©å•†ä¼°è®¡ç³»ç»Ÿçš„åŸºé¢‘æ‰€å¾—çš„ç»“æœå¿…ä¸ºå®é™…åŸºé¢‘çš„ä¸Šé™ æ„ˆæ¥è¿‘ç³»ç»Ÿçš„çœŸå®æŒ¯å‹ï¼Œç®—å‡ºçš„å›ºæœ‰é¢‘ç‡æ„ˆå‡†ç¡® åœ¨å®é™…è®¡ç®—çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç›´æ¥å°†é™å˜å½¢ä½œä¸ºç¬¬ä¸€é˜¶æ¨¡æ€ä¹‹åä»£å…¥åˆ°ä¸Šé¢å¼å­ä¸­è¿›è¡Œè®¡ç®—ï¼Œå¾—å‡ºåŸºé¢‘çš„ä¸Šé™ã€‚ å¦‚æœå¯ä»¥å¾—å‡ºç¬¬äºŒé˜¶çš„æ¨¡æ€ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¹Ÿå¯å»å¾ˆå¥½çš„ä¼°è®¡ç¬¬äºŒé˜¶æ¨¡æ€ã€‚ é‡ŒèŒ¨æ³• é‡Œå…¹æ³•æ˜¯ç‘åˆ©æ³•çš„æ”¹è¿› ç”¨é‡Œå…¹æ³•ä¸ä»…å¯ä»¥è®¡ç®—ç³»ç»Ÿçš„åŸºé¢‘ï¼Œè¿˜å¯ä»¥ç®—å‡ºç³»ç»Ÿçš„å‰å‡ é˜¶é¢‘ç‡å’ŒæŒ¯å‹ ç‘åˆ©æ³•ç®—å‡ºçš„åŸºé¢‘çš„ç²¾åº¦å–å†³äºå‡è®¾çš„æŒ¯å‹å¯¹ç¬¬ä¸€é˜¶ä¸»æŒ¯å‹çš„è¿‘ä¼¼ç¨‹åº¦ï¼Œè€Œä¸”å¾—åˆ°çš„åŸºé¢‘æ€»æ˜¯ç²¾ç¡®å€¼çš„ä¸Šé™ é‡Œå…¹æ³•å°†å¯¹è¿‘ä¼¼æŒ¯å‹ç»™å‡ºæ›´åˆç†çš„å‡è®¾ï¼Œä»è€Œä½¿ç®—å‡ºçš„åŸºé¢‘å€¼è¿›ä¸€æ­¥ä¸‹é™ é‡Œå…¹æ³•åŸºäºä¸ç‘åˆ©æ³•ç›¸åŒçš„åŸç†ï¼Œä½†å°†ç‘åˆ©ä½¿ç”¨çš„å•ä¸ªå‡è®¾æŒ¯å‹æ”¹è¿›ä¸ºè‹¥å¹²ä¸ªç‹¬ç«‹çš„å‡è®¾æŒ¯å‹çš„çº¿æ€§ç»„åˆï¼š \\varphi=a_{1} \\boldsymbol{\\eta}^{(1)}+a_{2} \\boldsymbol{\\eta}^{(2)}+\\ldots+a_{r} \\boldsymbol{\\eta}^{(r)}=\\sum_{j=1} a_{j} \\boldsymbol{\\eta}^{(j)}=\\boldsymbol{\\Pi} \\boldsymbol{A} \\quad \\boldsymbol{\\eta}^{(i)} \\in R^{n \\times 1}\\\\ \\boldsymbol{\\Pi}=\\left[\\boldsymbol{\\eta}^{(1)}, \\boldsymbol{\\eta}^{(2)}, \\cdots, \\boldsymbol{\\eta}^{(r)}\\right] \\in R^{n \\times r} \\quad \\boldsymbol{A}=\\left[a_{1}, a_{2}, \\cdots, a_{r}\\right]^{T} \\in R^{r \\times 1}å…¶ä¸­$\\eta^{(i)}$ ä¸ºå‡è®¾æ¨¡æ€ï¼ŒAä¸­çš„å…ƒç´ æ•°é‡æ—¶å¾…å®šçš„ã€‚ R(\\varphi)=R(\\boldsymbol{\\Pi} \\boldsymbol{A})=\\frac{\\boldsymbol{A}^{T} \\boldsymbol{\\Pi}^{T} \\boldsymbol{K} \\boldsymbol{\\Pi} \\boldsymbol{A}}{\\boldsymbol{A}^{T} \\boldsymbol{\\Pi}^{T} \\boldsymbol{M} \\boldsymbol{\\Pi} \\boldsymbol{A}}=\\frac{\\boldsymbol{A}^{T} \\overline{\\boldsymbol{K}} \\boldsymbol{A}}{\\boldsymbol{A}^{T} \\overline{\\boldsymbol{M}} \\boldsymbol{A}}=\\bar{\\omega}^{2}\\\\ \\overline{\\boldsymbol{K}}=\\boldsymbol{\\Pi}^{T} \\boldsymbol{K} \\boldsymbol{\\Pi} \\in R^{r \\times r} \\quad \\overline{\\boldsymbol{M}}=\\boldsymbol{\\Pi}^{T} \\boldsymbol{M} \\boldsymbol{\\Pi} \\in R^{r \\times r}ç”±äº $R(\\varphi)$ åœ¨ç³»ç»Ÿä¸­çš„çœŸå®ä¸»æŒ¯å‹å¤„å–é©»å€¼,æ‰€ä»¥ A çš„å„ä¸ªå…ƒç´ åº”å½“ä»ä¸‹å¼ç¡®å®š: \\frac {\\partial R}{\\partial a_j} = 0 \\quad (j=1,2,...,r) $\\dfrac {\\partial} {\\partial A}$ :ä¸ºå°†å‡½æ•°åˆ†åˆ«å¯¹ A å„ä¸ªå…ƒç´ ä¾æ¬¡æ±‚åå¯¼ï¼Œæ’æˆåˆ—å‘é‡ã€‚ åŒç†, æœ‰ï¼š$\\dfrac{\\partial}{\\partial A}\\left(A^{T} \\bar{M} A\\right)=2 \\bar{M} A$ \\frac{\\partial}{\\partial \\boldsymbol{A}}\\left(\\boldsymbol{A}^{T} \\overline{\\boldsymbol{K}} \\boldsymbol{A}\\right)-\\bar{\\omega}^{2} \\frac{\\partial}{\\partial \\boldsymbol{A}}\\left(\\boldsymbol{A}^{T} \\overline{\\boldsymbol{M}} \\boldsymbol{A}\\right)=\\mathbf{0}\\\\ \\Rightarrow \\left(\\overline{\\boldsymbol{K}}-\\bar{\\omega}^{2} \\overline{\\boldsymbol{M}}\\right) A=0 ç”±äº$\\bar{K}ã€\\bar{M}$ é˜¶æ•° r ä¸€èˆ¬è¿œå°äºç³»ç»Ÿè‡ªç”±åº¦æ•° nï¼Œä¸Šå¼çŸ©é˜µç‰¹å¾å€¼é—®é¢˜æ¯”åŸç³»ç»Ÿçš„çŸ©é˜µç‰¹å¾å€¼é—®é¢˜è§£èµ·æ¥å®¹æ˜“å¾—å¤š é‡Œå…¹æ³•æ˜¯ä¸€ç§ç¼©å‡ç³»ç»Ÿè‡ªç”±åº¦æ±‚è§£å›ºæœ‰æŒ¯åŠ¨çš„è¿‘ä¼¼æ–¹æ³• é¢‘ç‡æ±‚å‡ºå³å¯ï¼Œä½†æ˜¯è®¡ç®—å‡ºçš„æ¨¡æ€å¿…é¡»æ»¡è¶³æ­£äº¤çš„è¦æ±‚ã€‚ ä¸‹é¢è¯æ˜æ­£äº¤æ€§ï¼š ä¸æˆ‘ä»¬å‡è®¾çš„è¿™ä¸ª$\\varphi$ æ˜¯è‹¥å¹²ä¸ªç‹¬ç«‹çš„å‡è®¾æŒ¯å‹ï¼Œå› æ­¤å¯çŸ¥Açš„ä¸åŒåˆ†é‡é—´æ˜¯çº¿æ€§ç‹¬ç«‹çš„ï¼š i \\neq j \\text { æ—¶ } \\boldsymbol{A}^{(i) T} \\overline{\\boldsymbol{M}} \\boldsymbol{A}^{(j)}=0, \\quad \\boldsymbol{A}^{(i) T} \\overline{\\boldsymbol{K}} \\boldsymbol{A}^{(j)}=0 \\quad \\text { æˆç«‹ } \\\\\\varphi^{(i) T} \\boldsymbol{M} \\varphi^{(j)} =\\boldsymbol{A}^{(i) T} \\boldsymbol{\\Pi}^{T} \\boldsymbol{M} \\boldsymbol{\\Pi} \\boldsymbol{A}^{(j)}=\\boldsymbol{A}^{(i) T} \\overline{\\boldsymbol{M}} \\boldsymbol{A}^{(j)}=0\\\\ \\varphi^{(i) T} \\boldsymbol{K} \\varphi^{(j)}=\\boldsymbol{A}^{(i) T} \\boldsymbol{\\Pi}^{T} \\boldsymbol{K} \\boldsymbol{\\Pi} \\boldsymbol{A}^{(j)}=\\boldsymbol{A}^{(i) T} \\overline{\\boldsymbol{K}} \\boldsymbol{A}^{(j)}=0å¾—å‡ºçš„è¿‘ä¼¼ä¸»æŒ¯å‹å¼å…³äºçŸ©é˜µ M å’Œ K ç›¸äº’æ­£äº¤ é¦–å…ˆå‡è®¾æŒ¯å‹ï¼š \\boldsymbol{\\Pi}=\\left[\\begin{array}{ll}\\boldsymbol{\\eta}^{(1)} & \\boldsymbol{\\eta}^{(2)}\\end{array}\\right]=\\left[\\begin{array}{cc}1 & 1 \\\\2 & 2 \\\\3 & -1\\end{array}\\right]\\\\ç¼©å‡åçš„æ–°ç³»ç»Ÿçš„åˆšåº¦çŸ©é˜µå’Œè´¨é‡çŸ©é˜µï¼š \\overline{\\boldsymbol{K}}=\\boldsymbol{\\Pi}^{T} \\boldsymbol{K} \\boldsymbol{\\Pi}=\\left[\\begin{array}{cc}4 k & -4 k \\\\-4 k & 20 k\\end{array}\\right] \\quad \\overline{\\boldsymbol{M}}=\\boldsymbol{\\Pi}^{T} \\boldsymbol{M} \\boldsymbol{\\Pi}^{T}=\\left[\\begin{array}{cc}23 m & -m \\\\-m & 7 m\\end{array}\\right]ç‰¹å¾å€¼é—®é¢˜: \\quad\\left[\\begin{array}{cc}4-23 \\alpha & -4+\\alpha \\\\ -4+\\alpha & 20-7 \\alpha\\end{array}\\right]=\\left[\\begin{array}{l}0 \\\\ 0\\end{array}\\right] \\quad \\alpha=\\frac{m \\bar{\\omega}^{2}}{k} \\begin{array}{c}\\alpha_{1}=0.139853 \\quad \\alpha_{2}=2.860147 \\\\\\boldsymbol{A}^{(1)}=\\left[\\begin{array}{ll}4.927547, & 1\\end{array}\\right]^{T} \\quad \\boldsymbol{A}^{(2)}=\\left[\\begin{array}{ll}-0.018449, & 1\\end{array}\\right]^{T}\\end{array} $\\beta_1$ å’Œ $\\beta_2$ æ˜¯ä¸»æŒ¯å‹å½’ä¸€åŒ–æ—¶äº§ç”Ÿçš„å¸¸æ•°ï¼Œä¸å¿…è€ƒè™‘ é‡Œå…¹æ³•æ‰€å¾—åŸºé¢‘ç²¾åº¦æ¯”ç‘åˆ©æ³•é«˜ï¼Œä½†ç¬¬äºŒé˜¶å›ºæœ‰é¢‘ç‡ç²¾åº¦æ¬ ä½³ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥å°†ä¼°è®¡å‡ºçš„å€¼è¿­ä»£å¤šæ¬¡é€æ¸é€¼è¿‘æœ€ä¼˜å€¼ã€‚","link":"/2022/03/15/%E6%8C%AF%E5%8A%A8%E5%8A%9B%E5%AD%A6/%E7%AC%AC%E4%BA%94%E7%AB%A0-%E7%BA%BF%E6%80%A7%E6%8C%AF%E5%8A%A8%E7%9A%84%E8%BF%91%E4%BC%BC%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95-%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86/"},{"title":"ç¬¬å…­ç«  è¿ç»­ç³»ç»Ÿçš„æŒ¯åŠ¨  ä¸€ç»´æ³¢åŠ¨æ–¹ç¨‹","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦ä»‹ç»çš„æ˜¯è¿ç»­ç³»ç»ŸæŒ¯åŠ¨çš„ä¸€ç»´æ³¢åŠ¨æ–¹ç¨‹éƒ¨åˆ†ï¼Œä¸»è¦ä»åŠ¨åŠ›å­¦æ–¹ç¨‹ã€å›ºæœ‰é¢‘ç‡å’Œæ¨¡æ€å‡½æ•°ã€å¸¸è§çš„è¾¹ç•Œã€ä¸»æŒ¯å‹å’Œæ­£äº¤æ€§ã€æ†çš„çºµå‘å—è¿«æŒ¯åŠ¨ä»¥åŠæ¨ªå‘æŒ¯åŠ¨çš„å…¸å‹ä¾‹é¢˜ç­‰æ–¹é¢å°±è¡Œè®²è§£ã€‚ æœ¬ç« ä¸»è¦çš„å‡è®¾ï¼š1ï¼‰æœ¬ç« è®¨è®ºçš„è¿ç»­ä½“éƒ½å‡å®šä¸ºçº¿æ€§å¼¹æ€§ä½“ï¼Œå³åœ¨å¼¹æ€§èŒƒå›´å†…æœä»è™å…‹å®šå¾‹2ï¼‰ææ–™å‡åŒ€è¿ç»­ï¼›å„å‘åŒæ€§3ï¼‰æŒ¯åŠ¨ä¸ºå¾®æŒ¯ å®é™…æŒ¯åŠ¨ç³»ç»Ÿéƒ½æ˜¯è¿ç»­ä½“ï¼Œå…·æœ‰è¿ç»­åˆ†å¸ƒçš„è´¨é‡ä¸å¼¹æ€§ï¼Œåˆç§°è¿ç»­ç³»ç»Ÿæˆ–åˆ†å¸ƒå‚æ•°ç³»ç»Ÿã€‚ ç¡®å®šè¿ç»­ä½“ä¸Šæ— æ•°è´¨ç‚¹çš„ä½ç½®éœ€è¦æ— é™å¤šä¸ªåæ ‡ï¼Œå› æ­¤è¿ç»­ä½“æ˜¯å…·æœ‰æ— é™å¤šè‡ªç”±åº¦çš„ç³»ç»Ÿã€‚ è¿ç»­ä½“çš„æŒ¯åŠ¨è¦ç”¨æ—¶é—´å’Œç©ºé—´åæ ‡çš„å‡½æ•°æ¥æè¿°ï¼Œå…¶è¿åŠ¨æ–¹ç¨‹ä¸å†åƒæœ‰é™å¤šè‡ªç”±åº¦ç³»ç»Ÿé‚£æ ·æ˜¯äºŒé˜¶å¸¸å¾®åˆ†æ–¹ç¨‹ç»„ï¼Œå®ƒæ˜¯åå¾®åˆ†æ–¹ç¨‹ã€‚ åœ¨ç‰©ç†æœ¬è´¨ä¸Šï¼Œè¿ç»­ä½“ç³»ç»Ÿå’Œå¤šè‡ªç”±åº¦ç³»ç»Ÿæ²¡æœ‰ä»€ä¹ˆå·®åˆ«ï¼Œè¿ç»­ä½“æŒ¯åŠ¨çš„åŸºæœ¬æ¦‚å¿µä¸åˆ†ææ–¹æ³•ä¸æœ‰é™å¤šè‡ªç”±åº¦ç³»ç»Ÿæ˜¯å®Œå…¨ç±»ä¼¼çš„ã€‚ åŠ¨åŠ›å­¦æ–¹ç¨‹è¿™é‡Œå¯¹äºç®€å•çš„ç³»ç»Ÿæ¥è¯´æ˜¯å¯ä»¥å°†ä¸Šè¿°çš„ä¸‰ç§è¿åŠ¨è¿›è¡Œè§£è€¦åˆ†æçš„ï¼Œä½†æ˜¯å¯¹äºå¤§æ¨åŠ›ç«ç®­è€Œè¨€ï¼Œä¸‰ç§æŒ¯åŠ¨ç›¸äº’è€¦åˆï¼Œä¸å¯åˆ†å¼€ã€‚ æ†çš„çºµå‘æŒ¯åŠ¨ $p(x,t)$ï¼šä¸ºå•ä½é•¿åº¦æ†ä¸Šåˆ†å¸ƒçš„çºµå‘åˆ†å¸ƒåŠ› å‡å®šæŒ¯åŠ¨è¿‡ç¨‹ä¸­å„æ¨ªæˆªé¢ä»ä¿æŒä¸ºå¹³é¢ï¼Œå¿½ç•¥ç”±çºµå‘æŒ¯åŠ¨å¼•èµ·çš„æ¨ªå‘å˜å½¢ èˆªå¤©é‡Œé¢çš„æ‚¬è‡‚ç»“æ„ï¼Œåœ¨å‘å¤–ä¼¸é•¿çš„æ—¶å€™ï¼Œä¼šäº§ç”Ÿä¸€å®šçš„æ¨ªå‘æŒ¯åŠ¨ã€‚ æ³¨æ„åœ¨å¤ªç©ºä¸­é˜»å°¼æ˜¯å¯ä»¥å¿½ç•¥çš„ è¿™é‡Œçš„$\\dfrac {\\partial^2u} {\\partial t^2} $ ä»£è¡¨çš„æ˜¯å¾®ç«¯çš„åŠ é€Ÿåº¦ï¼›$\\rho Sdx$ ä»£è¡¨çš„æ˜¯å¾®ç«¯çš„è´¨é‡ã€‚ æ¨ªæˆªé¢ä¸Šå†…åŠ›ï¼š$ F=E S \\varepsilon=E S \\dfrac{\\partial u}{\\partial x} $ è¾¾æœ—è´å°”åŸç†ï¼š$ \\rho S d x \\dfrac{\\partial^{2} u}{\\partial t^{2}}=\\left(F+\\dfrac{\\partial F}{\\partial x} d x\\right)-F+p(x, t) d x $ è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯æœ€ä¸€èˆ¬åˆ†å¸ƒåŠ›æ¥é˜è¿°ï¼Œå› ä¸ºé›†ä¸­åŠ›å¯ä»¥çœ‹æˆæ˜¯åˆ†å¸ƒåŠ›çš„ç‰¹æ®Šæƒ…å†µã€‚$F(t)=F_0\\delta(x-x_0)$ ï¼Œå…¶ä¸­$x_0$ä¸ºé›†ä¸­åŠ›çš„ä½œç”¨ä½ç½®ã€‚ æ†çš„çºµå‘å¼ºè¿«æŒ¯åŠ¨æ–¹ç¨‹ä¸ºï¼š \\rho S d x \\dfrac{\\partial^{2} u}{\\partial t^{2}}=\\left(F+\\dfrac{\\partial F}{\\partial x} d x\\right)-F+p(x, t) d x \\\\ \\rho S \\frac{\\partial^{2} u}{\\partial t^{2}}=\\frac{\\partial}{\\partial x}\\left(E S \\frac{\\partial u}{\\partial x}\\right)+p(x, t)ç­‰ç›´æ†ES ä¸ºå¸¸æ•°ï¼š \\frac{\\partial^{2} u}{\\partial t^{2}}=a_{0}^{2} \\frac{\\partial^{2} u}{\\partial x^{2}}+\\frac{1}{\\rho S} p(x, t)å…¶ä¸­ï¼Œ$a_0=\\sqrt {E/\\rho}$ ä¸ºå¼¹æ€§çºµæ³¢æ²¿æ†çš„çºµå‘ä¼ æ’­é€Ÿåº¦ å¼¦çš„æ¨ªå‘æŒ¯åŠ¨ æ³¨æ„ï¼Œè¿™é‡Œæ˜¯çº¦ç­‰äºï¼Œå› ä¸ºæˆ‘ä»¬é‡‡ç”¨äº†$\\sin\\theta \\approx\\theta$ çš„å°è§’è¿‘ä¼¼ã€‚ åŒç†å¯å¾—ï¼Œå¼¦çš„æ¨ªå‘å¼ºè¿«æŒ¯åŠ¨æ–¹ç¨‹ï¼š \\frac{\\partial^{2} y}{\\partial t^{2}}=a_{0}^{2} \\frac{\\partial^{2} y}{\\partial x^{2}}+\\frac{1}{\\rho } p(x, t)å…¶ä¸­ï¼Œ$y(x,t)$ï¼šä¸ºå¼¦ä¸Šx å¤„æ¨ªæˆªé¢t æ—¶åˆ»çš„æ¨ªå‘ä½ç§»ï¼› $a_0$ ï¼šä¸ºå¼¹æ€§æ¨ªæ³¢çš„çºµå‘ä¼ æ’­é€Ÿåº¦ $\\rho$ ï¼šä¸ºå•ä½é•¿åº¦å¼¦è´¨é‡ å¦‚ä¼ é€å¸¦çš®å¸¦ï¼Œç”±äºä¼ é€å¸¦çš„çºµå‘çš„è¿åŠ¨ä¼šå¼•èµ·æ¨ªå‘çš„æŒ¯åŠ¨é—®é¢˜ã€‚ è½´çš„æ‰­è½¬æŒ¯åŠ¨ å…¶ä¸­ï¼ŒTï¼šä¸ºæˆªé¢å¤„çš„æ‰­çŸ©ï¼›$\\rho I_pdx$ï¼šä¸ºå¾®ç«¯ç»•ç€è½´çº¿çš„è½¬åŠ¨æƒ¯é‡ã€‚ è¾¾æœ—è´å°”åŸç†ï¼š \\begin{array}{c}\\rho I_{p} d x \\dfrac{\\partial^{2} \\theta}{\\partial t^{2}}=\\left(\\mathbf{X}+\\dfrac{\\partial T}{\\partial x} d x\\right)-\\mathbf{K}+p d x \\\\\\rho I_{p} \\dfrac{\\partial^{2} \\theta}{\\partial t^{2}}=\\dfrac{\\partial T}{\\partial x}+p(x, t)\\end{array}ææ–™åŠ›å­¦ä¸­æ‰­çŸ©çš„å…¬å¼å¯å¾—ï¼š $T=G I_{p} \\dfrac{\\partial \\theta}{\\partial x} $ \\rho I_{p} \\frac{\\partial^{2} \\theta}{\\partial t^{2}}=\\frac{\\partial}{\\partial x}\\left(G I_{p} \\frac{\\partial \\theta}{\\partial x}\\right)+p(x, t)åœ†æˆªé¢æ†çš„æ‰­è½¬æŒ¯åŠ¨å¼ºè¿«æŒ¯åŠ¨æ–¹ç­‰ç›´æ†, æŠ—æ‰­è½¬åˆšåº¦ $G I_{p} $ ä¸ºå¸¸æ•° \\frac{\\partial^{2} \\theta}{\\partial t^{2}}=a_{0}^{2} \\frac{\\partial^{2} \\theta}{\\partial x^{2}}+\\frac{1}{\\rho_{p}} p(x, t)å…¶ä¸­ï¼Œ$a_0=\\sqrt{\\dfrac{ G} \\rho}$ ï¼šä¸ºå‰ªåˆ‡å¼¹æ€§æ³¢çš„çºµå‘ä¼ æ’­é€Ÿåº¦ å°ç»“ï¼š è™½ç„¶å®ƒä»¬åœ¨è¿åŠ¨è¡¨ç°å½¢å¼ä¸Šå¹¶ä¸ç›¸åŒï¼Œä½†å®ƒä»¬çš„è¿åŠ¨å¾®åˆ†æ–¹ç¨‹æ˜¯ç±»åŒçš„ï¼Œéƒ½å±äºä¸€ç»´æ³¢åŠ¨æ–¹ç¨‹ï¼Œå› æ­¤åˆ†æå¾—åˆ°çš„ä¸€äº›æ€§è´¨æ˜¯å¯ä»¥å…±ç”¨çš„ã€‚ å›ºæœ‰é¢‘ç‡å’Œæ¨¡æ€å‡½æ•° è¿™é‡Œæˆ‘ä»¬ç®€åŒ–é¦–å…ˆè€ƒè™‘è‡ªç”±æŒ¯åŠ¨çš„æƒ…å†µï¼Œæ­¤æ—¶è®¾å¤–éƒ¨åŠ›çš„ä½œç”¨ä¸º0ï¼š \\frac{\\partial^{2} u}{\\partial t^{2}}=a_{0}^{2} \\frac{\\partial^{2} u}{\\partial x^{2}}å‡è®¾æ†çš„å„ç‚¹ä½œåŒæ­¥è¿åŠ¨ï¼š$u(x,t)=\\phi(x)q(t)$ å…¶ä¸­$q(t)$ï¼šä¸ºè¿åŠ¨è§„å¾‹çš„æ—¶é—´å‡½æ•°ï¼› $\\phi(x)$ï¼šä¸ºæ†ä¸ŠçŸ©åŸç‚¹xå¤„çš„æˆªé¢çš„çºµå‘æŒ¯å¹… \\frac{\\ddot{q}(t)}{q(t)}=a_{0}^{2} \\frac{\\phi^{\\prime \\prime}(x)}{\\phi(x)}=-\\lambda è§£å¾—ï¼š q(t)=a \\sin (\\omega t+\\theta) \\quad \\phi(x)=c_{1} \\sin \\frac{\\omega x}{a_{0}}+c_{2} \\cos \\frac{\\omega x}{a_{0}}å…¶ä¸­ï¼Œ$c_1,c_2,\\omega$ ç”±æ†çš„è¾¹ç•Œæ¡ä»¶ç¡®å®š ,$\\phi(x)$ç¡®å®šæ†çºµå‘æŒ¯åŠ¨çš„å½¢æ€ï¼Œç§°ä¸ºæŒ¯å‹ã€‚ æ†çš„è¾¹ç•Œæ¡ä»¶ç¡®å®šå›ºæœ‰é¢‘ç‡ã€‚ ä¸æœ‰é™è‡ªç”±åº¦ç³»ç»Ÿä¸åŒï¼Œè¿ç»­ç³»ç»Ÿçš„æ¨¡æ€ä¸ºåæ ‡çš„è¿ç»­å‡½æ•°ï¼Œè¡¨ç¤ºå„åæ ‡æŒ¯å¹…çš„ç›¸å¯¹æ¯”å€¼ï¼Œç”±é¢‘ç‡æ–¹ç¨‹ç¡®å®šçš„å›ºæœ‰é¢‘ç‡$\\omega_i$æœ‰æ— ç©·å¤šä¸ª è¿™é‡Œï¼Œå›ºæœ‰é¢‘ç‡å’ŒæŒ¯åŠ¨æ¨¡æ€æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚ \\omega_i \\longleftrightarrow \\phi_i(x)ç¬¬ i é˜¶ä¸»æŒ¯åŠ¨ä¸ºï¼š$u^{(i)}(x, t)=a_{i} \\phi_{i}(x) \\sin \\left(\\omega_{i} t+\\theta_{i}\\right), \\quad(i=1,2 \\cdots)$ ç³»ç»Ÿçš„è‡ªç”±æŒ¯åŠ¨æ˜¯æ— ç©·å¤šä¸ªä¸»æŒ¯åŠ¨çš„å åŠ ï¼š$u(x, t)=\\sum_\\limits{i=1}^{\\infty} a_{i} \\phi_{i} \\sin \\left(\\omega_{i} t+\\theta_{i}\\right)$ å‡ ç§å¸¸è§è¾¹ç•Œæ¡ä»¶ä¸‹çš„å›ºæœ‰é¢‘ç‡å’Œæ¨¡æ€å‡½æ•°å›ºæœ‰é¢‘ç‡çš„æ¨¡æ€æ˜¯ç”±è¾¹ç•Œå†³å®šçš„ã€‚ æ±‚è§£é¢‘ç‡æ–¹ç¨‹å¯å¾—ï¼š$\\omega_i=\\dfrac {i\\pi a_0}{l} \\quad (i=0,1,2,â€¦)$ æ— ç©·å¤šç»„è§£ã€‚ æ­¤æ—¶çš„ i=0ï¼Œå¯¹åº”çš„æ˜¯åˆšä½“æ¨¡æ€ï¼Œä½†æ˜¯é¢˜ç›®ä¸¤è¾¹æ˜¯å›ºå®šçš„ï¼Œä¸€å®šå­˜åœ¨åŠ›ï¼Œå› æ­¤è¿™ä¸ªæƒ…å†µæ˜¯ä¸å­˜åœ¨çš„ã€‚ å°†$\\omega_i$ ä»£å…¥æŒ¯å‹å‡½æ•°ï¼š$\\phi_i(x)=c_i\\sin\\dfrac {i\\pi x}{l} \\quad (i=0,1,2,â€¦)$ ç”±äºé›¶å›ºæœ‰é¢‘ç‡å¯¹åº”çš„æŒ¯å‹å‡½æ•°ä¸ºé›¶ï¼Œå› æ­¤é›¶å›ºæœ‰é¢‘ç‡é™¤å»ï¼Œä½†æ˜¯å¯¹äºå¯¼å¼¹è¿™ç§ä¸¤è¾¹å¯ä»¥è‡ªç”±æŒ¯åŠ¨çš„ç³»ç»Ÿï¼Œå°±å¯ä»¥å­˜åœ¨è¿™ç§é¢‘ç‡ä¸º0çš„æƒ…å†µï¼Œæ­¤æ—¶å¯¹åº”çš„æ˜¯åˆšä½“è¿åŠ¨ã€‚ æ±‚è§£é¢‘ç‡æ–¹ç¨‹å¯å¾—ï¼š$\\omega_i=\\dfrac {i\\pi a_0}{l} \\quad (i=0,1,2,â€¦)$ æ— ç©·å¤šç»„è§£ã€‚ æ­¤æ—¶çš„ i=0ï¼Œå¯¹åº”çš„æ˜¯åˆšä½“æ¨¡æ€ã€‚ å°†$\\omega_i$ ä»£å…¥æŒ¯å‹å‡½æ•°ï¼š$\\phi_i(x)=c_i\\cos\\dfrac {i\\pi x}{l} \\quad (i=0,1,2,â€¦)$ é¢‘ç‡æ–¹ç¨‹å’Œå›ºæœ‰é¢‘ç‡ä¸¤ç«¯å›ºå®šæ†çš„æƒ…å†µç›¸åŒï¼Œé›¶å›ºæœ‰é¢‘ç‡å¯¹åº”çš„å¸¸å€¼æŒ¯å‹ä¸ºæ†çš„çºµå‘åˆšæ€§ä½ç§»ã€‚ è¾¹ç•Œæ¡ä»¶ä¸­çš„ç¬¬ä¸€è¡Œä»£è¡¨ç‰©ç†çš„è¾¹ç•Œï¼Œä¹‹åçš„ç¬¬äºŒè¡Œä»£è¡¨æ¨¡æ€çš„è¾¹ç•Œã€‚ æ±‚è§£é¢‘ç‡æ–¹ç¨‹å¯å¾—ï¼š$\\omega_i=\\dfrac {(2i-1)\\pi a_0}{2l} \\quad (i=1,2,â€¦)$æˆ– $\\omega_i=\\dfrac {i\\pi a_0}{2l} \\quad (i=1,3,â€¦)$ æ— ç©·å¤šç»„è§£ã€‚ å°†$\\omega_i$ ä»£å…¥æŒ¯å‹å‡½æ•°ï¼š$\\phi_i(x)=c_i\\sin\\dfrac {(2i-1)\\pi x}{2l} \\quad (i=1,2,â€¦)$ æˆ– $\\phi_i(x)=c_i\\sin\\dfrac {i\\pi x}{2l}\\quad (i=1,3,â€¦)$ ä¾‹ï¼šæ¨å¯¼ç³»ç»Ÿçš„é¢‘ç‡æ–¹ç¨‹ é¦–å…ˆä»¤ç³»ç»Ÿçš„æŒ¯åŠ¨æ–¹ç¨‹ä¸ºï¼š$u(x,t)=\\phi(x)q(t) \\quad \\phi(x)=c_{1} \\sin \\dfrac{\\omega x}{a_{0}}+c_{2} \\cos \\dfrac{\\omega x}{a_{0}}$ ä»£å…¥è¾¹ç•Œæ¡ä»¶å¯å¾—ï¼š å¯¹äºå·¦è¾¹ç•Œè€Œè¨€ï¼Œå…¶ä½ç§»ä¸º0ï¼š u(0, t)=0 \\Rightarrow \\phi(0)=0 \\Rightarrow c_{2}=0å¯¹äºå»å³è¾¹ç•Œï¼Œå…¶å—åˆ°çš„è½´å‘åŠ›ç”¨å¼¹ç°§çš„å½¢å˜æ¥æŠµæ¶ˆï¼š k u(l, t)=-E S \\frac{\\partial u}{\\partial x}(l, t) \\Rightarrow k \\phi(l)=-E S \\frac{\\partial \\phi}{\\partial x}(l, t)\\\\ \\Rightarrow k \\sin \\frac{\\omega l}{a_{0}}=-E S \\frac{\\omega}{a_{0}} \\cos \\frac{\\omega l}{a_{0}}\\\\å³å¾—åˆ°é¢‘ç‡æ–¹ç¨‹ä¸ºï¼š \\Rightarrow \\frac{\\operatorname{tg}\\left(\\omega l / a_{0}\\right)}{\\omega l / a_{0}}=-\\frac{E S}{k l} \\equiv \\text { å¸¸æ•° } åŒæ ·çš„ï¼Œé¦–å…ˆç¡®å®šæŒ¯åŠ¨æ–¹ç¨‹ï¼Œä¹‹åä»£å…¥åˆ°è¾¹ç•Œæ¡ä»¶ï¼š u(0, t)=0\\\\M \\frac{\\partial^{2} u}{\\partial t^{2}}(l, t)=-E S \\frac{\\partial u}{\\partial x}(l, t) æ€»ç»“ï¼š è¿ç»­ä½“çš„é¢‘ç‡å’Œæ¨¡æ€æ˜¯ç”±è¾¹ç•Œæ¡ä»¶å†³å®šçš„ï¼Œè€Œå¤šè‡ªç”±åº¦é—®é¢˜çš„é¢‘ç‡å’Œæ¨¡æ€æ˜¯ç”±å…¶è´¨é‡é˜µå’Œåˆšåº¦é˜µçš„ç‰¹å¾æ ¹é—®é¢˜ã€‚ Nè‡ªç”±åº¦ç³»ç»Ÿä¸­æœ‰Nä¸ªé¢‘ç‡å’ŒNä¸ªæ¨¡æ€ï¼Œä½†æ˜¯å¯¹äºè¿ç»­ä½“é—®é¢˜çš„é¢‘ç‡å’Œæ¨¡æ€æ˜¯æ— ç©·çš„ã€‚ è¾¹ç•Œé—®é¢˜ï¼Œä¸Šè¾¹è®²è¿°äº†ä¸‰ä¸ªç®€å•çš„è¾¹ç•Œå’Œä¸¤ä¸ªå¤æ‚è¾¹ç•Œã€‚ ä¸»æŒ¯å‹çš„æ­£äº¤æ€§åªå¯¹å…·æœ‰ç®€å•è¾¹ç•Œæ¡ä»¶çš„æ†è®¨è®ºä¸»æŒ¯å‹çš„æ­£äº¤æ€§ï¼Œæ†å¯ä»¥æ˜¯å˜æˆªé¢æˆ–åŒ€æˆªé¢çš„ å˜æˆªé¢ï¼šè´¨é‡å¯†åº¦åŠæˆªé¢ç§¯Sç­‰éƒ½å¯ä»¥æ˜¯x çš„å‡½æ•° åŠ¨åŠ›æ–¹ç¨‹ : \\rho S \\dfrac{\\partial^{2} u}{\\partial t^{2}}=\\dfrac{\\partial}{\\partial x}\\left(E S \\dfrac{\\partial u}{\\partial x}\\right)+p(x, t) è¿™é‡Œç”±äºæ˜¯å˜æˆªé¢çš„æƒ…å†µï¼Œå› æ­¤å°†Sæ”¾å¤§åå¾®å·ä¹‹å†…ã€‚ è‡ªç”±æŒ¯åŠ¨æ–¹ç¨‹ï¼š $ \\rho S \\dfrac{\\partial^{2} u}{\\partial t^{2}}=\\dfrac{\\partial}{\\partial x}\\left(E S \\dfrac{\\partial u}{\\partial x}\\right)$ ä¸»æŒ¯åŠ¨ ï¼šè¿™é‡Œä½¿ç”¨åˆ†ç¦»å˜é‡æ³• u(x, t)=\\phi(x) a \\sin (\\omega t+\\theta) \\\\\\left(E S \\phi^{\\prime}\\right)^{\\prime}=-\\omega^{2} \\rho S \\phi è¿™é‡Œå¯ä»¥å¯¹æ¯”å¤šè‡ªç”±åº¦ç³»ç»Ÿçš„ç‰¹å¾æ–¹ç¨‹ï¼š$|K-\\omega^2M|=0$ è¿™é‡Œçš„$\\rho S$ä»£è¡¨çš„æ˜¯å¾®å…ƒçš„è´¨é‡ï¼Œ$ES$ ä»£è¡¨åˆšåº¦å¾®å…ƒé¡¹ã€‚ ä¹˜ $ \\phi_{j}(x) $ å¹¶æ²¿æ†é•¿ç§¯åˆ†: ç”±äºè¿™é‡Œçš„Så¯èƒ½æ˜¯å˜æˆªé¢çš„ï¼Œå› æ­¤Sä¸èƒ½æ‹¿å‡ºæ¥ã€‚ \\int_{0}^{l} \\phi_{j}\\left(E S \\phi_{i}^{\\prime}\\right)^{\\prime} d x=-\\omega_{i}^{2} \\int_{0}^{l} \\rho S \\phi_{i} \\phi_{j} d xåˆ†éƒ¨ç§¯åˆ†: \\int_{0}^{l} \\phi_{j}\\left(E S \\phi_{i}^{\\prime}\\right)^{\\prime} d x=\\left.\\phi_{j}\\left(E S \\phi_{i}\\right)\\right|_{0} ^{l}-\\int_{0}^{l} E S \\phi_{i}^{\\prime} \\phi_{j}^{\\prime} d x å¯¹äºç¬¬ä¸€é¡¹è€Œè¨€ï¼Œæ€»æœ‰ç¬¬ä¸€é¡¹ä¸º0ï¼Œå› ä¸ºå½“å…¶æ˜¯ç®€ç­”è¾¹ç•Œæ—¶ï¼Œç¬¬ä¸€é¡¹ä¸­çš„$\\phi_j$ä¸º0ï¼Œä½†å½“å…¶ä¸ºè‡ªç”±è¾¹ç•Œæ—¶ï¼Œ$ES\\phi_i$ä¸º0ï¼Œæ‰€ä»¥ç¬¬ä¸€é¡¹æ€»æ˜¯0ã€‚ ä»»ä¸€ç«¯ä¸Šæ€»æœ‰ $\\phi=0$ æˆ– $\\phi^{\\prime}=0$ æˆç«‹ \\quad \\int_{0}^{l} E S \\phi_{i}^{\\prime} \\phi_{j}^{\\prime} d x=\\omega_{i}^{2} \\int_{0}^{l} \\rho S \\phi_{i} \\phi_{j} dx æ†çš„ä¸»æŒ¯å‹å…³äºè´¨é‡çš„æ­£äº¤æ€§ï¼š \\left(\\omega_{i}^{2}-\\omega_{j}^{2}\\right) \\int_{0}^{l} \\rho S \\phi_{i} \\phi_{j} d x=0 \\\\i \\neq j \\text { æ—¶ } \\ \\int_{0}^{l} \\rho S \\phi_{i} \\phi_{j} d x=0 \\Rightarrow\\omega_{i} \\neq \\omega_{j}æ†çš„ä¸»æŒ¯å‹å…³äºåˆšåº¦çš„æ­£äº¤æ€§ï¼š \\int_{0}^{l} E S \\phi_{i}^{\\prime} \\phi_{j}^{\\prime} d x=-\\int_{0}^{l} \\phi_{j}\\left(E S \\phi_{i}^{\\prime}\\right)^{\\prime} d x=0 \\quad(i \\neq j) å½“ $ i=j $ æ—¶, è®¾ç¬¬ i é˜¶æ¨¡æ€ä¸»è´¨é‡ä¸º$m_{pi}$ ï¼š \\int_{0}^{l} \\rho S \\phi_{i}^{2} d x=m_{p i} ç¬¬ i é˜¶æ¨¡æ€ä¸»åˆšåº¦ä¸º$k_{pi}$ï¼š \\int_{0}^{l} E S\\left(\\phi_{i}^{\\prime}\\right)^{2} d x=-\\int_{0}^{l} \\phi_{i}\\left(E S \\phi_{i}^{\\prime}\\right)^{\\prime} d x=k_{p i}ç¬¬ i é˜¶å›ºæœ‰é¢‘ç‡ä¸º $\\omega_{i}$ï¼š$\\omega_{i}^{2}=k_{p i} / m_{p i}$ å¯¹æ¯”å¤šè‡ªç”±åº¦ç³»ç»Ÿçš„ä¸»æ¨¡æ€å’Œæ­£åˆ™æ¨¡æ€å¯å¾—ï¼š ä¸»æŒ¯å‹å½’ä¸€åŒ–å¾—å‡ºæ­£åˆ™æŒ¯å‹: $\\int_{0}^{l} \\rho S \\phi_{i}^{2} d x=m_{p i}=1$ è¿™é‡Œå½’ä¸€åŒ–çš„å¯¹è±¡æ˜¯æ¨¡æ€å‡½æ•°å‰é¢çš„é‚£ä¸ªå¾…å®šç³»æ•°$c_1ã€c_2$ $\\phi(x)=c_{1} \\sin \\dfrac{\\omega x}{a_{0}}+c_{2} \\cos \\dfrac{\\omega x}{a_{0}}$ åˆ™ç¬¬ i é˜¶ä¸»åˆšåº¦ï¼š$k_{p i}=\\omega_{i}^{2}$ åˆå†™ä¸º: \\int_{0}^{l} \\rho S \\phi_{i} \\phi_{j} d x=\\delta_{i j} \\quad\\int_{0}^{l} E S \\phi_{i}^{\\prime} \\phi_{j}^{\\prime} d x=\\omega_{i}^{2} \\delta_{i j} \\\\ \\int_{0}^{l} \\phi_{i}\\left(E S \\phi_{j}^{\\prime}\\right)^{\\prime} d x=-\\omega_{i}^{2} \\delta_{i j} \\quad \\delta_{i j}=\\left\\{\\begin{array}{ll}1 & i=j \\\\ 0 & i \\neq j\\end{array}\\right.æ†çš„çºµå‘å¼ºè¿«æŒ¯åŠ¨ æ³¨æ„ï¼šè¿™é‡Œçš„åˆå§‹æ—¶åˆ»æ˜¯ä¸€ä¸ªå‡½æ•°æ–¹ç¨‹ï¼Œè¡¨ç¤ºåˆå§‹çŠ¶æ€ä¸‹çš„å½¢çŠ¶åˆ†å¸ƒå‡½æ•°ã€‚ å…¶æ¬¡ï¼Œè¿™é‡Œçš„$q_i(x)$ä¸å¯ä»¥å†™æˆæ­£å¼¦äº†ï¼Œå› ä¸ºç°åœ¨è®¨è®ºçš„æ˜¯å¼ºè¿«æŒ¯åŠ¨ã€‚ \\rho S \\sum_{i=1}^{\\infty} \\phi_{i} \\ddot{q}=\\sum_{i=1}^{\\infty}\\left(E S \\phi_{i}^{\\prime}\\right)^{\\prime} q_{i}+p(x, t) è¿™é‡Œç”±äº$q_i$æ˜¯æ—¶é—´çš„å‡½æ•°ï¼Œå› æ­¤å¯ä»¥æ”¾åˆ°ç­‰å¼çš„å¤–é¢ã€‚ å¹¶ä¸”ç”±äºæ­£äº¤æ€§ï¼Œ$i \\ne j$çš„é¡¹å…¨éƒ¨è¢«æŠµæ¶ˆäº†ã€‚ ç¬¬jä¸ªæ­£åˆ™æ¨¡æ€åæ ‡å¹¿ä¹‰åŠ›ï¼š$\\ddot{q}_{j}+\\omega_{j}^{2} q_{j}=Q_{j}(t)$ æ¨¡æ€åæ ‡åˆå§‹æ¡ä»¶æ±‚è§£ ï¼š \\left \\{\\begin{array}{l} u(x, 0)=f_{1}(x)=\\sum_\\limits{i=1}^{\\infty} \\phi_{i}(x) q_{i}(0) \\\\ \\left.\\dfrac{\\partial u}{\\partial t}\\right|_{t=0}=f_{2}(x)=\\sum_\\limits{i=1}^{\\infty} \\phi_{i}(x) \\dot{q}_{i}(0)\\end{array}\\right.ä¹˜ $ \\rho S \\phi_{j}(x) $ å¹¶æ²¿æ†é•¿å¯¹ ( x ) ç§¯åˆ†, ç”±æ­£äº¤æ€§æ¡ä»¶ï¼š \\left\\{\\begin{array}{ll}q_{j}(0)=\\int_{0}^{l} \\rho S f_{1}(x) \\phi_{j}(x) d x & \\text { æ±‚å¾— } q_{j}(t) \\text { å } \\\\\\dot{q}_{j}(0)=\\int_{0}^{l} \\rho S f_{2}(x) \\phi_{j}(x) d x & \\text { å¯å¾— } u(x, t)\\end{array}\\right.\\\\q_{j}(t)=q_{j}(0) \\cos \\omega_{j} t+\\frac{\\dot{q}_{j}(0)}{\\omega_{j}} \\sin \\omega_{j} t+\\frac{1}{\\omega_{j}} \\int_{0}^{l} Q_{j}(t) \\sin \\omega_{j}(t-\\tau) d \\tau æœ€åå¯¹åˆå§‹æ¡ä»¶çš„å“åº”è¿›è¡Œæœå“ˆæ¢…ç§¯åˆ†ã€‚ ä¸Šé¢è€ƒè™‘çš„éƒ½æ˜¯åˆ†å¸ƒåŠ›ä½œç”¨æ—¶çš„æƒ…å†µï¼Œç°åœ¨è®¨è®ºé›†ä¸­åŠ›çš„æƒ…å†µï¼š å½“å—åˆ°çš„åŠ›ä¸ºé›†ä¸­åŠ›æ—¶ï¼š$p(x, t)=P(t) \\delta(x-\\xi)$ æ­£åˆ™åæ ‡å¹¿ä¹‰åŠ›ï¼š Q_{j}(t)=\\int_{0}^{l} P(t) \\delta(x-\\xi) \\phi_{j}(x) d x=P(t) \\phi_{j}(\\xi)æ¨ªå‘æŒ¯åŠ¨çš„å…¸å‹ä¾‹é¢˜ä¾‹ï¼šç­‰ç›´æ†ï¼Œè‡ªç”±ç«¯ä½œç”¨æœ‰ï¼š$P(t)=P_0\\sin\\omega t$ ï¼Œå…¶ä¸­$P_0$ä¸ºå¸¸æ•°ï¼Œæ±‚ï¼šæ†çš„çºµå‘ç¨³æ€å“åº”ã€‚ å¯¹äºå¼ºè¿«æŒ¯åŠ¨è¿˜åŒ…æ‹¬è‡ªç”±ä¼´éšï¼Œä½†æ˜¯æœ€åéƒ½ä¼šéšç€æ—¶é—´çš„æ¨ç§»è€Œæ…¢æ…¢æ¶ˆå¤±ã€‚è¿™é‡Œæ±‚è§£çš„å€¼ç¨³æ€çš„æƒ…å†µï¼Œå› æ­¤ç›´æ¥è€ƒè™‘ç¨³æ€å³å¯ã€‚ æ³¨æ„ä»¥ä¸‹å½’ä¸€åŒ–ï¼Œå½’ä¸€åŒ–çš„å‚æ•°æ—¶æ¨¡æ€æ–¹ç¨‹çš„ç³»æ•°$C_i$ ï¼Œå› æ­¤æ­£åˆ™åŒ–çš„ä½œç”¨æ— éæ˜¯ç¡®å®šæ¨¡æ€æ–¹ç¨‹çš„å‰é¢å¾…å®šç³»æ•°ã€‚ å½“å¤–éƒ¨åŠ›é¢‘ç‡ç­‰äºæ†çš„ä»»ä¸€é˜¶å›ºæœ‰é¢‘ç‡æ—¶éƒ½ä¼šå‘ç”Ÿå…±æŒ¯ç°è±¡ åŸºæœ¬çš„æ­¥éª¤ï¼š ç”±è¾¹ç•Œæ¡ä»¶å¾—åˆ°é¢‘ç‡å’Œæ¨¡æ€å‡½æ•°ï¼› æ±‚è§£æ¨¡æ€å¹¿ä¹‰åŠ›ï¼Œå³æ±‚è§£åŠ›åœ¨æ¨¡æ€ç©ºé—´çš„è¡¨è¾¾å¼ï¼› æ±‚è§£æ¨¡æ€ç©ºé—´çš„è§£ï¼Œå³æ±‚è§£æ¨¡æ€åæ ‡$q_i(t)$ï¼Œè½¬æ¢åˆ°ç‰©ç†ç©ºé—´ã€‚ ä¾‹ï¼šä¸€å‡è´¨æ†ä¸¤ç«¯å›ºå®šã€‚å‡å®šåœ¨æ†ä¸Šä½œç”¨æœ‰ä¸¤ä¸ªé›†ä¸­åŠ›ï¼Œå¦‚å›¾æ‰€ç¤ºï¼Œè¯•é—®ï¼šå½“è¿™äº›åŠ›çªç„¶ç§»å»æ—¶ï¼Œæ†å°†äº§ç”Ÿä»€ä¹ˆæ ·çš„æŒ¯åŠ¨ï¼Ÿ ç”±äºåŠ›å»æ‰ä¹‹åæ²¡æœ‰å¤–éƒ¨æ¿€åŠ±äº†ï¼Œå› æ­¤å…¶æŒ¯åŠ¨çš„å½¢å¼ä¸€å®šæ˜¯ç®€è°æŒ¯åŠ¨ã€‚ é€šè¿‡è¾¹ç•Œæ¡ä»¶ï¼Œå³ä¸¤è¾¹ä¸ºå›ºå®šç«¯ï¼Œå¯å¾—å…¶é¢‘ç‡æ–¹ç¨‹ä¸ä½ç§»æ–¹ç¨‹ã€‚ è¾¹ç•Œæ¡ä»¶ä¸Šï¼Œåœ¨0æ—¶åˆ»ä½ç§»æœ‰ä¸€ä¸ªåˆ†å¸ƒå‡½æ•°ï¼Œå…¶å®å°±æ˜¯å¯¹åº”çš„åº”å˜åˆ†å¸ƒã€‚ ç³»ç»Ÿçš„è‡ªç”±æŒ¯åŠ¨æ˜¯æ— ç©·å¤šä¸ªä¸»æŒ¯åŠ¨çš„å åŠ ï¼š \\begin{aligned} u(x, t) &=\\sum_{i=1}^{\\infty} a_{i} \\phi_{i}(x) \\sin \\left(\\omega_{i} t+\\theta_{i}\\right) \\\\ &=\\sum_{i=1}^{\\infty}\\left\\{\\sin \\frac{i \\pi x}{l}\\left[B_{1 i} \\cos \\frac{i \\pi a_{0}}{l} t+B_{2 i} \\sin \\frac{i \\pi a_{0}}{l} t\\right]\\right\\} \\end{aligned}åº”ç”¨ä½ç§»çš„åˆå§‹æ¡ä»¶ $u(x,0)=f(x)$ ä»£å…¥åˆ°ä¸Šè¿°çš„æ–¹ç¨‹ä¸­å¯å¾—ï¼š f(x)=\\sum_\\limits{i=1}^{\\infty} B_{1i}\\sin \\frac{i \\pi x}{l}ä¸¤è¾¹ä¹˜ $\\rho S\\phi_j(x)$ å¹¶æ²¿æ†é•¿ç§¯åˆ†ï¼Œç„¶ååˆ©ç”¨æ­£äº¤æ€§æ¡ä»¶ï¼š B_{1i}=\\frac 2 l \\int_0^1 f(x)\\sin \\frac{i \\pi x}{l}åº”ç”¨é€Ÿåº¦åˆå§‹æ¡ä»¶å¯å¾—ï¼š$B_{2i}=0$ \\begin{aligned} B_{1 i}=& \\frac{2}{l} \\int_{0}^{l} f(x) \\sin \\frac{i \\pi x}{l} d x \\\\=& \\frac{2}{l} \\varepsilon_{0}\\left[\\int_{0}^{l / 4} x \\sin \\frac{i \\pi x}{l} d x+\\int_{l / 4}^{3 l / 4}\\left(\\frac{l}{2}-x\\right) \\sin \\frac{i \\pi x}{l} d x\\right.\\left.+\\int_{3 l / 4}^{l}(l-x) \\sin \\frac{i \\pi x}{l} d x\\right] \\\\=& \\frac{P_{0} l}{i^{2} \\pi^{2} E S}(-1)^{(i-2) / 4} \\qquad (i=2,6,10, \\ldots) \\end{aligned}å°†ä¸Šè¿°çš„å¾…å®šç³»æ•°ï¼Œä»£å…¥åˆ°ç‰©ç†ç©ºé—´çš„æ–¹ç¨‹ä¸­è§£å¾—ç³»ç»Ÿçš„å“åº”ä¸ºï¼š \\begin{aligned} u(x, t) &=\\sum_{i=1}^{\\infty}\\left\\{\\sin \\frac{i \\pi x}{l}\\left[B_{1 i} \\cos \\frac{i \\pi a_{0}}{l} t+B_{2 i} \\sin \\frac{i \\pi a_{0}}{l} t\\right]\\right\\} \\\\ &=\\frac{P_{0} l}{\\pi^{2} E S} \\sum_{i=2,6,10, \\ldots}^{\\infty} \\frac{(-1)^{(i-2) / 4}}{i^{2}} \\sin \\frac{i \\pi x}{l} \\cos \\frac{i \\pi a_{0}}{l} t \\end{aligned}è¿™é‡Œï¼Œç¬¬äºŒé“ä¾‹é¢˜æ˜¯è‡ªç”±å“åº”ï¼Œå› æ­¤å¯ä»¥å°†$q_i(t)=a_i\\sin(\\omega_it+\\theta_i)$ æ¥è¿›è¡Œè¡¨ç¤ºï¼Œä»£å…¥è¾¹ç•Œæ¡ä»¶æ±‚è§£å¾…å®šç³»æ•°ï¼Œè¿™ç§æ–¹æ³•ç§°ä¸ºç›´æ¥æ³•ã€‚ ç›¸åï¼Œç¬¬ä¸€é“ä¾‹é¢˜çš„æ˜¯å—è¿«æŒ¯åŠ¨ï¼Œæ— æ³•ä½¿ç”¨ç›´æ¥æ³•ä»£å…¥æ¨¡æ€åæ ‡$q_i(t)$çš„è¡¨è¾¾å¼ï¼Œéœ€è¦å»ºç«‹æ­£åˆ™æ–¹ç¨‹å»æ±‚è§£ã€‚ æ€è€ƒé¢˜ï¼š æœ‰ä¸€æ ¹ä»¥å¸¸é€Ÿåº¦væ²¿xè½´è¿åŠ¨çš„æ†ã€‚å¦‚æœæ†çš„ä¸­ç‚¹å¤„çªç„¶è¢«å¡ä½åœæ­¢ï¼Œè¯•æ±‚å‡ºæ‰€äº§ç”Ÿçš„è‡ªç”±æŒ¯åŠ¨è¡¨è¾¾å¼ã€‚ åœ¨æ­¤ç§æƒ…å†µä¸‹ï¼Œå¯ä»æ†çš„ä¸­ç‚¹åˆ†å¼€ï¼Œåˆ†å¼€çš„å·¦å³ä¸¤éƒ¨åˆ†çš„æŒ¯åŠ¨å½¢å¼ç›¸åŒï¼Œå› æ­¤åªåˆ†æå³åŠéƒ¨åˆ†å³å¯ è¾¹ç•Œæ¡ä»¶ï¼šå³åŠéƒ¨åˆ†ä¸ºä¸€ç«¯å›ºå®šã€å¦ä¸€ç«¯è‡ªç”±çš„æ† æ†çš„è‡ªç”±æŒ¯åŠ¨æ–¹ç¨‹ï¼š$\\dfrac{\\partial^{2} u}{\\partial t^{2}}=a_{0}^{2} \\dfrac{\\partial^{2} u}{\\partial x^{2}}+\\dfrac{1}{\\rho S} p(x, t) \\quad a_0=\\sqrt{\\dfrac E \\rho}$ è¾¹ç•Œæ¡ä»¶ä¸ºï¼š$u(0,t)=0, \\quad \\left. \\dfrac{\\partial u}{\\partial x}\\right|_{x=\\frac l 2}=0$ åˆå§‹æ¡ä»¶ä¸ºï¼š$u(x,0)=0, \\quad \\left. \\dfrac{\\partial u}{\\partial t}\\right|_{t=0}=0$ ä¾‹ï¼šæœ‰ä¸€æ ¹x=0 ç«¯ä¸ºè‡ªç”±ã€x=l ç«¯å¤„ä¸ºå›ºå®šçš„æ†ï¼Œå›ºå®šç«¯æ‰¿å—æ”¯æ’‘è¿åŠ¨ $u_g(t)=d\\sin\\omega t$ï¼Œd ä¸ºæŒ¯åŠ¨çš„å¹…å€¼ï¼Œè¯•æ±‚æ†çš„ç¨³æ€å“åº” è¿™é‡ŒåŸºç¡€å­˜åœ¨ä½ç§»ï¼Œå‚è€ƒåŸºåœ¨åŠ¨ï¼Œå› æ­¤è¿™é‡Œçš„å—åŠ›åˆ†æå’Œä¹‹å‰ä¸åŒã€‚ æ­¤æ—¶$u^*$æ‰æ˜¯çœŸæ­£çš„æ†çš„ä½ç§»ã€‚ ä»£å…¥æ–¹ç¨‹å¯å¾—ï¼š$\\rho S\\ddot u^*-ES\\ddot u^*=-\\rho S\\ddot u_g=-\\rho Sd\\omega^2\\sin\\omega t$ è¿™é‡Œï¼Œå°½ç®¡ç›¸å¯¹çš„å‚è€ƒç³»æœ‰æ‰€å˜åŒ–ï¼Œä½†æ˜¯ç”±äºè¾¹ç•Œæ¡ä»¶ä¸å˜ï¼Œå› æ­¤æœ€åè§£å¾—æ¨¡æ€å’Œé¢‘ç‡ä¸å˜ï¼Œè®¾ä¸º u^{*}=\\sum_\\limits{i=1}^{\\infty} \\phi_{i}(x) q_{i}(t)\\\\ \\phi_{i}(x)=\\sqrt{\\frac{2}{l}} \\cos \\frac{i \\pi}{2 l} x, \\quad i=1,3,5, \\ldotså…¶ä¸­ $\\phi_i(x)$ä¸ºå½’ä¸€åŒ–çš„æ­£åˆ™æ¨¡æ€å‡½æ•°ï¼Œ$q_i(t)$ ä¸ºæ¨¡æ€åæ ‡ï¼Œ $u^{*}=u-u_{g}$ å°†å…¶ä»£å…¥åˆ°æ–¹ç¨‹ä¸­ï¼Œæ±‚è§£æ¨¡æ€åæ ‡å»å¯å¾—ï¼š \\sum_{i=1,3,5, \\ldots}^{\\infty}\\left(\\rho S \\ddot{q}_{i} \\phi_{i}-E S q_{i} \\phi_{i}\\right)=\\rho S d \\omega^{2} \\sin \\omega tç”¨ $ \\phi_{j}(x) $ ä¹˜ä¸Šå¼, å¹¶æ²¿æ†é•¿ç§¯åˆ†ï¼šè¿™é‡Œå°±æ˜¯åœ¨åˆ©ç”¨æ­£äº¤æ€§çš„ç‰¹æ€§æ¥æ±‚è§£ç³»æ•° ä»¥ä¸Šå¼å¸¸è§„æ“ä½œï¼Œå»ºè®®è®°ä½ \\sum_{i=1}^{\\infty}\\left(\\ddot{q}_{i} \\int_{0}^{l} \\rho S \\phi_{i} \\phi_{j} d x-q_{i} \\int_{0}^{l} E S \\phi_{i}^{\\prime \\prime} \\phi_{j} d x\\right)=\\rho S d \\omega^{2} \\sin \\omega t \\int_{0}^{l} \\phi_{j}\\ dxåˆ©ç”¨æ­£äº¤æ€§å¯å¾—ï¼š \\ddot{q}_{i}+\\omega_{i}^{2} q_{i}=\\sqrt{\\frac{2}{l}} \\frac{2 l}{i \\pi}(-1)^{(i-1) / 2} d \\omega^{2} \\sin \\omega tæ¨¡æ€åæ ‡ç¨³æ€è§£ï¼š $q_{i}=\\dfrac{\\omega^{2}}{\\omega_{i}^{2}} \\eta_{i} \\sqrt{\\dfrac{2}{l}} \\dfrac{2 l}{i \\pi}(-1)^{(i-1) / 2} d \\sin \\omega t $ å…¶ä¸­ï¼Œ$\\eta_{i}=\\dfrac{1}{1-\\left(\\omega / \\omega_{i}\\right)^{2}}$ è§£å¾—æ†çš„å˜å½¢æ–¹ç¨‹ä¸ºï¼š u^{*}=\\frac{16 \\rho l^{2} \\omega^{2}}{\\pi^{3} E} \\sum_{i=1,3,5, \\ldots}^{\\infty} \\frac{(-1)^{(i-1) / 2}}{i^{3}} d \\eta_{i} \\cos \\frac{i \\pi x}{2 l} \\sin \\omega t\\\\æœ€åæ±‚è§£å‚è€ƒåŸºä¸‹çš„ç»å¯¹ä½ç§»ï¼š \\begin{aligned} u &=u^{*}+u_{g} \\\\ &=\\left[1+\\frac{16 \\rho l^{2} \\omega^{2}}{\\pi^{3} E} \\sum_{i=1,3,5, \\ldots .}^{\\infty} \\frac{\\eta_{i}}{i^{3}}(-1)^{(i-1) / 2} \\cos \\frac{i \\pi x}{2 l}\\right] d \\sin \\omega t \\end{aligned} u(x,t)ä¸ºæ†ä¸Šé¢å·¦å³ç‚¹çš„å“åº”ã€‚ è¿™é‡Œçš„åŸºç¡€æŒ¯åŠ¨å°±æ˜¯å‚è€ƒç³»çš„æŒ¯åŠ¨ã€‚","link":"/2022/03/18/%E6%8C%AF%E5%8A%A8%E5%8A%9B%E5%AD%A6/%E7%AC%AC%E5%85%AD%E7%AB%A0-%E8%BF%9E%E7%BB%AD%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%8C%AF%E5%8A%A8-%E4%B8%80%E7%BB%B4%E6%B3%A2%E5%8A%A8%E6%96%B9%E7%A8%8B/"},{"title":"ç¬¬å…­ç«  è¿ç»­ç³»ç»Ÿçš„æŒ¯åŠ¨  æ¢çš„å¼¯æ›²æŒ¯åŠ¨","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦ä»‹ç»çš„æ˜¯è¿ç»­ç³»ç»ŸæŒ¯åŠ¨çš„è¿‘ä¼¼æ±‚è§£æ–¹æ³•éƒ¨åˆ†æœ¬æ–‡ä¸»è¦ä»‹ç»çš„æ˜¯è¿ç»­ç³»ç»ŸæŒ¯åŠ¨çš„ä¸€ç»´æ³¢åŠ¨æ–¹ç¨‹éƒ¨åˆ†ï¼Œä¸»è¦ä»åŠ¨åŠ›å­¦æ–¹ç¨‹ã€å›ºæœ‰é¢‘ç‡å’Œæ¨¡æ€å‡½æ•°ã€æŒ¯å‹å‡½æ•°å’Œæ­£äº¤æ€§ä»¥åŠæ¢çš„çºµå‘å—è¿«æŒ¯åŠ¨ç­‰æ–¹é¢å°±è¡Œè®²è§£ã€‚ å¼¯æ›²æŒ¯åŠ¨å³æ¨ªå‘æŒ¯åŠ¨ï¼Œè½´å‘çš„æŒ¯åŠ¨ç›¸æ¯”æ¨ªå‘çš„æŒ¯åŠ¨æ—¶å¯ä»¥å¿½ç•¥çš„ã€‚ åŠ¨åŠ›å­¦æ–¹ç¨‹ å¯¹äºå¾®æŒ¯æ¥è¯´ï¼Œå…¶å˜å½¢æ¯”è¾ƒå°ï¼Œå˜å½¢å‰ååœ¨è½´å‘ä¸Šçš„æŠ•å½±æ—¶ç›¸åŒçš„ã€‚ æ»¡è¶³ä¸Šè¿°æ¡ä»¶å’Œå‡è®¾çš„æ¢ç§°ä¸ºä¼¯åŠªåˆ©ï¼æ¬§æ‹‰æ¢ï¼ˆBernoulli-Euler Beamï¼‰å³é•¿æ¢ã€‚å¯¹äºçŸ­æ¢è€Œè¨€ï¼Œå°±ä¸èƒ½å¿½ç•¥å‰ªåˆ‡å˜å½¢ä»¥åŠæˆªé¢ç»•ä¸­æ€§è½´è½¬åŠ¨æƒ¯é‡çš„å½±å“ è‘—åçš„ç­‰æˆªé¢å‡è®¾ï¼šå°±æ˜¯å¼¯çŸ©å’ŒæŒ åº¦åˆäºŒé˜¶åå¯¼çš„å…³ç³» å˜æˆªé¢æ¢çš„åŠ¨åŠ›å­¦æ–¹ç¨‹ï¼š \\frac{\\partial^{2}}{\\partial x^{2}}\\left[E I \\frac{\\partial^{2} y(x, t)}{\\partial x^{2}}\\right]+\\rho S \\frac{\\partial^{2} y(x, t)}{\\partial t^{2}}=f(x, t)-\\frac{\\partial}{\\partial x} m(x, t) $EI$é¡¹ä¸ºåˆšåº¦é¡¹ï¼Œ$\\rho S$é¡¹ä¸ºæƒ¯æ€§é¡¹ï¼Œæ•´ä½“çš„é‡çº²æ˜¯åŠ›çš„é‡çº²ã€‚ ç­‰æˆªé¢æ¢çš„åŠ¨åŠ›å­¦æ–¹ç¨‹ï¼š E I \\frac{\\partial^{4} y}{\\partial x^{4}}+\\rho S \\frac{\\partial^{2} y}{\\partial t^{2}}=f(x, t)-\\frac{\\partial}{\\partial x} m(x, t) å¯¹äºçš„æˆªé¢è€Œè¨€ï¼Œ$I$ æ˜¯ä¸ªå®šå€¼ï¼Œå¯ä»¥æå‡ºæ¥ã€‚ å›ºæœ‰é¢‘ç‡å’Œæ¨¡æ€å‡½æ•°åŸºæœ¬ç†è®º åœ¨è‡ªç”±æŒ¯åŠ¨çš„æ¡ä»¶ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ—¶é—´çš„å‡½æ•°(æ¨¡æ€åæ ‡)å†™æˆç®€è°çš„ã€‚ å…¶ä¸­ï¼Œ$C_i(i=1,2,3,4)$ å’Œ $\\omega$ åº”è¯¥æ»¡è¶³çš„é¢‘ç‡æ–¹ç¨‹å½¢å¼æ˜¯ç”±æ¢çš„è¾¹ç•Œæ¡ä»¶ç¡®å®šçš„ã€‚ è¿™é‡Œçš„$\\omega_i \\longleftrightarrow \\phi_i(x)$ æœ‰æ— ç©·å¤šä¸ªä¸”ä¸€ä¸€å¯¹åº”ã€‚ ç¬¬ $ i $ é˜¶ä¸»æŒ¯åŠ¨ï¼š$ \\quad y^{(i)}(x, t)=a_{i} \\phi_{i}(x) \\sin \\left(\\omega_{i} t+\\theta_{i}\\right) $ $a_{i}$ å’Œ $\\theta_{i}$ ç”±ç³»ç»Ÿçš„åˆå§‹æ¡ä»¶ç¡®å®šç³»ç»Ÿçš„è‡ªç”±æŒ¯åŠ¨æ˜¯æ— ç©·å¤šä¸ªä¸»æŒ¯åŠ¨çš„å åŠ ï¼š y(x, t)=\\sum_{i=1}^{\\infty} a_{i} \\phi_{i}(x) \\sin \\left(\\omega_{i} t+\\theta_{i}\\right)å¸¸è§çš„çº¦æŸå’Œè¾¹ç•Œæ¡ä»¶ å¯¹äºå›ºå®šç«¯ï¼Œç”±äºå›ºå®šçš„ä¸€ç«¯æ˜¯ä¸å—çº¦æŸçš„ï¼Œå› æ­¤å›ºå®šçš„é‚£ä¸€ç«¯ä¸Šçš„è½¬è§’å’Œä½ç§»éƒ½æ˜¯0. å¯¹äºç®€æ”¯ç«¯ï¼Œç”±äºå…¶ä½ç§»æ˜¯åˆ«å›ºå®šä½çš„ï¼Œå› æ­¤ä½ç§»æ˜¯0ï¼Œå…¶æ¬¡ç”±äºç®€æ”¯ç«¯æ˜¯é“°æ¥çš„ï¼Œå¯ä»¥éšä¾¿çš„è½¬åŠ¨ï¼Œå› æ­¤å¼¯çŸ©æ˜¯0ã€‚ å¯¹äºè‡ªç”±ç«¯ï¼Œå…¶å¼¯çŸ©å’Œå‰ªåŠ›éƒ½æ˜¯0ã€‚ é¦–å…ˆï¼Œä»£å…¥å›ºå®šç«¯çš„æ¡ä»¶å¯å¾—ï¼š$C_{1}=-C_{3} \\quad C_{2}=-C_{4}$ ä¹‹åï¼Œä»£å…¥è‡ªç”±ç«¯çš„æ¡ä»¶å¯å¾—ï¼š \\left\\{\\begin{array}{l}C_{1}(\\cos \\beta l+\\cosh \\beta l)+C_{2}(\\sin \\beta l+\\sinh \\beta l)=0 \\\\ -C_{1}(\\sin \\beta l-\\sinh \\beta l)+C_{2}(\\cos \\beta l+\\cosh \\beta l)=0\\end{array}\\right. $ C_{1} ã€ C_{2} $ éé›¶è§£æ¡ä»¶: $ \\left|\\begin{array}{cc}\\cos \\beta l+\\cosh \\beta l &amp; \\sin \\beta l+\\sinh \\beta l \\\\ -\\sin \\beta l+\\sinh \\beta l &amp; \\cos \\beta l+\\cosh \\beta l\\end{array}\\right|=0 $ ç­‰æˆªé¢æ¢ï¼š$\\phi^{(4)}(x)-\\beta^{4} \\phi(x)=0 \\quad \\beta^{4}=\\dfrac{\\omega^{2}}{a_{0}^{2}} \\quad a_{0}^{2}=\\dfrac{E I}{\\rho S} $ é€šè§£ï¼š $\\phi(x)=C_{1} \\cos \\beta x+C_{2} \\sin \\beta x+C_{3} \\cosh \\beta x+C_{4} \\sinh \\beta x $ ä»£å…¥$\\beta^{4}=\\dfrac{\\omega^{2}}{a_{0}^{2}}$ ä¸­å¯å¾—ï¼Œç³»ç»Ÿçš„å„é˜¶é¢‘ç‡ï¼š \\omega_{i}=\\left(\\beta_{i} l\\right)^{2} \\sqrt{\\frac{E I}{\\rho S l^{4}}}, \\quad(i=1,2, \\cdots)å¯¹åº”çš„å„é˜¶æŒ¯å‹å‡½æ•°ï¼š \\phi_{i}(x)=\\cos \\beta_{i} x-\\cosh \\beta_{i} x+\\underline{\\xi_{i}}\\left(\\sin \\beta_{i} x-\\sinh \\beta_{i} x\\right), \\quad(i=1,2, \\cdots) \\\\\\xi_{i}=\\frac{\\cos \\beta_{i} l+\\cosh \\beta_{i} l}{\\sin \\beta_{i} l+\\sinh \\beta_{i} l}, \\quad(i=1,2, \\cdots) \\quad \\beta^{4}=\\frac{\\omega^{2}}{a_{0}^{2}} \\quad a_{0}^{2}=\\frac{E I}{\\rho S}è¿™é‡Œçš„ $\\xi_i$ å…¶å®å°±æ˜¯å„é˜¶æ¨¡æ€ä¸‹$C_1å’ŒC_3$çš„æ¯”å€¼ã€‚ æµ‹é‡çš„ä¼ æ„Ÿå™¨è¦é¿å¼€èŠ‚ç‚¹çš„ä½ç½®ã€‚ ä¹‹åï¼Œä»£å…¥è¾¹ç•Œæ¡ä»¶å¯å¾—ï¼š$C_{1}=C_{3}=0$ \\begin{array}{l} \\left\\{\\begin{array}{l}C_{2} \\sin \\beta l+C_{4} \\sinh \\beta l=0 \\\\-C_{2} \\sin \\beta l+C_{4} \\sinh \\beta l=0\\end{array} \\quad \\Longrightarrow \\quad C_{4}=0\\right.\\end{array}é¢‘ç‡æ–¹ç¨‹:ï¼š$\\sin \\beta l=0 \\quad \\Rightarrow \\quad \\beta_{i} l=i \\pi, \\quad(i=1,2, \\cdots) $ å›ºæœ‰é¢‘ç‡: $\\quad \\omega_{i}=\\left(\\dfrac{i \\pi}{l}\\right)^{2} \\sqrt{\\dfrac{E I}{\\rho S}}, \\quad(i=1,2, \\cdots) $ ä¾‹ï¼šä¸¤ç«¯è‡ªç”±æ¢çš„å›ºæœ‰é¢‘ç‡å’ŒæŒ¯å‹å‡½æ•°ï¼ŒèƒŒæ™¯ï¼šå¯¼å¼¹é£è¡Œç³»ç»Ÿç±»åˆ«ï¼šåŠæ­£å®šç³»ç»Ÿ ã€å­˜åœ¨åˆšä½“æ¨¡æ€ã€‚ æ³¨æ„ï¼šè¿™é‡Œç¬¬äºŒé˜¶çš„æ¨¡æ€å’Œé™å¹³è¡¡ä½ç½®æœ‰æ‰€ä¸åŒï¼Œç”±äºå­˜åœ¨å¤§èŒƒå›´çš„å› æ­¤å…¶å­˜åœ¨ä¸¤ä¸ªç»“ç‚¹ï¼Œå¯¹äºé™å¹³è¡¡çš„ç»“æ„æ¥è¯´åº”è¯¥ä¸å­˜åœ¨è¿™ç§ç»“æ„ã€‚ ä¹‹å‰æ˜¯å‡ ä¸ªç®€å•çš„ç»“æ„ï¼Œä¸å­˜åœ¨é‡å¤çº¦æŸçš„é™å®šç»“æ„ï¼Œä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªé™ä¸å®šç»“æ„çš„ä¾‹å­ã€‚ ä¾‹ï¼šè¯•ç”¨æ•°å€¼ç¡®å®šä¸€æ ¹ä¸€ç«¯å›ºå®šå¦ä¸€ç«¯ç®€æ”¯çš„æ¢çš„é¢‘ç‡æ–¹ç¨‹ï¼Œå¹¶ä¸”ç»˜å‡ºç¬¬ä¸€é˜¶æŒ¯å‹å’Œç¬¬äºŒé˜¶æŒ¯å‹çš„æŒ åº¦æ›²çº¿ã€‚ å¯¹äºå›ºå®šç«¯æ¥è¯´ï¼Œä½ç§»å’Œè½¬è§’çš„0ï¼›å¯¹äºç®€æ”¯ç«¯æ¥è¯´ï¼Œä½ç§»å’Œå¼¯çŸ©ä¸º0ï¼Œå¼¯çŸ©å¯¹äºçš„æ˜¯$M=EI\\dfrac {\\partial^2 y(x,t)} {\\partial x^2}$ å°†è¾¹ç•Œæ¡ä»¶ä»£å…¥åˆ°æŒ¯å‹å‡½æ•°ä¸­å»ï¼š \\phi(x)=C_{1} \\cos \\beta x+C_{2} \\sin \\beta x+C_{3} \\cosh \\beta x+C_{4} \\sinh \\beta x \\\\ \\phi(0)=0 \\Longrightarrow C_{1}+C_{3}=0 \\Longrightarrow C_{3}=-C_{1} \\\\ \\phi^{\\prime}(0)=0 \\Longrightarrow C_{2}+C_{4}=0 \\Longrightarrow C_{4}=-C_{2} \\\\ \\phi(l)=0 \\Longrightarrow C_{1}(\\cos \\beta l-\\cosh \\beta l)+C_{2}(\\sin \\beta l-\\sinh \\beta l)=0 \\\\ \\phi^{\\prime \\prime}(l)=0 \\Longrightarrow C_{1}(\\cos \\beta l+\\cosh \\beta l)+C_{2}(\\sin \\beta l+\\sinh \\beta l)=0 è§£å¾—ï¼š$\\beta_1l=3.927,\\beta_2l=7.069$ é¦–å…ˆï¼Œè®¾å¼¯æ›²å˜å½¢æ–¹ç¨‹ä¸º$y(x,t)=\\phi(x)q(t)$ è¾¹ç•Œæ¡ä»¶: å›ºå®šç«¯ï¼šæŒ åº¦å’Œæˆªé¢è½¬è§’ä¸ºé›¶ $\\phi(0)=0 \\quad \\phi^{\\prime}(0)=0$ å¼¹æ€§æ”¯æ’‘ç«¯ï¼šå‰ªåŠ›ã€å¼¯çŸ©åˆ†åˆ«ä¸ç›´çº¿å¼¹ç°§ååŠ›ã€å·ç°§ååŠ›çŸ©ç›¸ç­‰ å‰ªåŠ›å¹³è¡¡æ¡ä»¶ï¼š$ \\dfrac{\\partial}{\\partial x}\\left(E I \\dfrac{\\partial^{2} y(l, t)}{\\partial x^{2}}\\right)=k_{2} y(l, t) \\Rightarrow E I \\phi^{\\prime \\prime \\prime}(l)=k_{2} \\phi(l) $ å¼¯çŸ©å¹³è¡¡æ¡ä»¶ï¼š$E I \\dfrac{\\partial^{2} y(l, t)}{\\partial x^{2}}=-k_{1} \\dfrac{\\partial y(l, t)}{\\partial x} \\Rightarrow E I \\phi^{\\prime \\prime}(l)=-k_{1} \\phi^{\\prime}(l) $ ç”±å¼¹æ€§æ”¯æ’‘å›ºå®šç«¯æ¡ä»¶è§£å¾—ï¼š \\begin{array}{l}C_{1}\\left[E I \\beta(\\cos \\beta l+\\cosh \\beta l)+k_{1}(\\sin \\beta l+\\sinh \\beta l)\\right]+ \\\\C_{2}\\left[E I \\beta(\\sin \\beta l+\\sinh \\beta l)-k_{1}(\\cos \\beta l-\\cosh \\beta l)\\right]=0 \\\\C_{1}\\left[E I \\beta^{3}(\\sin \\beta l-\\sinh \\beta l)-k_{2}(\\cos \\beta l-\\cosh \\beta l)\\right]- \\\\C_{2}\\left[E I \\beta^{3}(\\cos \\beta l+\\cosh \\beta l)+k_{2}(\\sin \\beta l-\\sinh \\beta l)\\right]=0\\end{array} $C_{1} ã€ C_{2} $ éé›¶è§£æ¡ä»¶å¯¼å‡ºé¢‘ç‡æ–¹ç¨‹ï¼š \\cos \\beta l \\cosh \\beta l+1=-\\frac{k_{1}}{E I \\beta}(\\cos \\beta l \\sinh \\beta l+\\sin \\beta l \\cosh \\beta l), \\quad\\left(k_{2}=0\\right) \\\\ \\cos \\beta l \\cosh \\beta l+1=-\\frac{k_{2}}{E I \\beta^{3}}(\\cos \\beta l \\sinh \\beta l-\\sin \\beta l \\cosh \\beta l), \\quad\\left(k_{1}=0\\right) $k_2=0$ï¼šä»£è¡¨æ²¡æœ‰ç›´çº¿å¼¹ç°§åªæœ‰æ‰­ç°§çš„æƒ…å†µä¸‹ï¼Œç³»ç»Ÿçš„æŒ¯åŠ¨æ–¹ç¨‹ã€‚ $k_1=0$ï¼šä»£è¡¨æ²¡æœ‰æ‰­ç°§åªæœ‰ç›´çº¿å¼¹ç°§çš„æƒ…å†µä¸‹ï¼Œç³»ç»Ÿçš„æŒ¯åŠ¨æ–¹ç¨‹ã€‚ è®¨è®ºï¼š è‹¥k1ã€k2 åŒæ—¶ä¸ºé›¶ï¼Œåˆ™é€€åŒ–ä¸ºæ‚¬è‡‚æ¢çš„æƒ…å½¢ã€‚$\\cos\\beta l\\cosh \\beta l+1=0$ è‹¥k1ï¼0ã€k2 æ— ç©·å¤§ï¼Œåˆ™é€€åŒ–ä¸ºä¸€ç«¯å›ºå®šå¦ä¸€ç«¯ç®€æ”¯çš„æƒ…å½¢ $k_2=\\dfrac a b \\quad b=0 \\quad \\cos\\beta l\\sinh\\beta l-\\sin\\beta\\cosh \\beta l=0$ æ‰€è°“çš„æœ‰è´¨é‡æ²¡å°ºå¯¸çš„æƒ…å†µï¼Œæ­¤æ—¶é›†ä¸­è´¨é‡æ²¡æœ‰å¼¯çŸ©ã€‚ è¯´æ˜ï¼š è€ƒè™‘å‰ªåˆ‡å˜å½¢ä½¿å¾—æ¢çš„åˆšåº¦é™ä½ï¼Œè€ƒè™‘è½¬åŠ¨æƒ¯é‡ä½¿å¾—æ¢çš„æƒ¯æ€§å¢åŠ ï¼Œè¿™ä¸¤ä¸ªå› ç´ éƒ½ä¼šä½¿æ¢çš„å›ºæœ‰é¢‘ç‡é™ä½ æ€»ç»“ï¼šæ¢çš„å›ºæœ‰é¢‘ç‡å’Œæ¨¡æ€æ˜¯ç”±è¾¹ç•Œæ¥å†³å®šçš„ï¼›å¤æ‚è¾¹ç•Œï¼Œå°±æ˜¯åœ¨æ¢çš„è‡ªç”±ç«¯å¢åŠ é›†ä¸­è´¨é‡ã€ç›´çº¿å¼¹ç°§å’Œå·ç°§ã€‚ æŒ¯å‹å‡½æ•°çš„æ­£äº¤æ€§ äºæ˜¯è®¾ï¼š$\\omega_i \\leftrightarrow \\phi_i(x)$ï¼Œ $\\omega_j \\leftrightarrow \\phi_j(x)$ åœ¨æ¢çš„ç®€å•è¾¹ç•Œä¸Šï¼Œæ€»æœ‰æŒ åº¦$\\phi(x)$æˆ–å‰ªåŠ›$\\phi^{\\prime\\prime\\prime}(x)$ä¸­çš„ä¸€ä¸ªä¸è½¬è§’æˆ–$\\phi^{\\prime}(x)$å¼¯çŸ©$\\phi^{\\prime\\prime}(x)$ä¸­çš„ä¸€ä¸ªåŒæ—¶ä¸ºé›¶ ç®€å•è¾¹ç•Œï¼šè‡ªç”±ç«¯ï¼Œå›ºå®šç«¯ï¼Œç®€æ”¯ç«¯ã€‚ ä»£å…¥è¾¹ç•Œæ¡ä»¶å¯å¾—ï¼š$\\int_{0}^{l} \\phi_{j}\\left(E I \\phi_{i}^{\\prime \\prime}\\right)^{\\prime \\prime} d x=\\int_{0}^{l} E I \\phi_{i}^{\\prime \\prime} \\phi_{j}^{\\prime \\prime} d x$ ä»£å…¥ (3) å¼ï¼š$\\int_{0}^{l} E I \\phi_{i}^{\\prime \\prime} \\phi_{j}^{\\prime \\prime} d x=\\omega_{i}^{2} \\int_{0}^{l} \\rho S \\phi_{i} \\phi_{j} d x$ åŒç†, (2)å¼ä¸¤è¾¹ä¹˜ $ \\phi_{i} $ å¹¶æ²¿æ¢é•¿ç§¯åˆ†ï¼š $ \\int_{0}^{l} E I \\phi_{i}^{\\prime \\prime} \\phi_{j}^{\\prime \\prime} d x=\\omega_{j}^{2} \\int_{0}^{l} \\rho S \\phi_{i} \\phi_{j} d x $ ç›¸å‡å¯å¾—: $ \\quad\\left(\\omega_{i}^{2}-\\omega_{j}^{2}\\right) \\int_{0}^{l} \\rho S \\phi_{i} \\phi_{j} d x=0 $ è®¨è®ºï¼š å½“$ i \\neq j $ æ—¶ï¼Œä¸»æŒ¯å‹å…³äºè´¨é‡çš„æ­£äº¤æ€§ä¸ºï¼š \\omega_{i} \\neq \\omega_{j} \\quad \\int_{0}^{l} \\rho S \\phi_{i} \\phi_{j} d x=0, \\quad i \\neq jä¸»æŒ¯å‹å…³äºåˆšåº¦çš„æ­£äº¤æ€§ä¸ºï¼š \\int_{0}^{l} \\phi_{j}\\left(E I \\phi_{i}^{\\prime \\prime}\\right)^{\\prime \\prime} d x=\\int_{0}^{l} E I \\phi_{i}^{\\prime \\prime} \\phi_{j}^{\\prime \\prime} d x=0, \\quad i \\neq jå½“$i=j$ æ—¶ï¼Œç¬¬ j é˜¶ä¸»è´¨é‡ï¼š \\int_{0}^{l} \\rho S \\phi_{j}^{2} d x=m_{p j}ç¬¬ j é˜¶ä¸»åˆšåº¦ï¼š \\int_{0}^{l} \\phi_{j}\\left(E I \\phi_{j}^{\\prime \\prime}\\right)^{\\prime \\prime} d x=\\int_{0}^{l} E I\\left(\\phi_{j}^{\\prime \\prime}\\right)^{2} d x=k_{p j}ç¬¬ j é˜¶å›ºæœ‰é¢‘ç‡ä¸ºï¼š $ \\omega_{j}=k_{p j} / m_{p j} $ ä¸»æŒ¯å‹ä¸­çš„å¸¸æ•°ï¼ˆ$\\phi_j$çš„ç³»æ•°ï¼‰æŒ‰å½’ä¸€åŒ–æ¡ä»¶ç¡®å®š ï¼š$\\int_{0}^{l} \\rho S \\phi_{j}^{2} d x=m_{p j}=1$ æ­£åˆ™æŒ¯å‹çš„æ­£äº¤æ€§ï¼š$\\int_{0}^{l} \\phi_{j}\\left(E I \\phi_{j}^{\\prime \\prime}\\right)^{\\prime \\prime} d x=\\int_{0}^{l} E I\\left(\\phi_{j}^{\\prime \\prime}\\right)^{2} d x=k_{p j}=\\delta_{ij}\\omega_j^2$ æ¢æ¨ªå‘æŒ¯åŠ¨çš„å¼ºè¿«å“åº” è¿™è¾¹å…¶å®é»˜è®¤ç§¯åˆ†å’Œæ±‚å’Œæ—¶å¯ä»¥æ¢ä½ç½®çš„ï¼Œå› ä¸ºæŒ¯åŠ¨çš„æ–¹ç¨‹æ»¡è¶³ä¸€è‡´è¿ç»­çš„æ¡ä»¶ã€‚ å¾—å‡º$q_j(t)$ä¹‹åï¼Œå³å¯ä»¥å¾—åˆ°æ¢çš„å“åº”$y(x,t)$ ã€‚ å¦‚æœä½œç”¨åœ¨æ¢ä¸Šçš„è½½è·ä¸æ˜¯åˆ†å¸ƒåŠ›çŸ©ï¼Œè€Œæ˜¯é›†ä¸­åŠ›å’Œé›†ä¸­åŠ›çŸ©ã€‚ Q_{j}(t)= \\int_{0}^{l}\\left[f(x, t) \\phi_{j}+m(x, t) \\phi_{j}^{\\prime}\\right] d x \\quad \\int_{0}^{t} f(t) \\delta(t-\\tau) d t=f(\\tau)å°†å…¶ä»£å…¥åˆ°ä¸Šé¢çš„è¡¨è¾¾å¼å¯å¾—ï¼š \\begin{aligned} Q_{j}(t) &=\\int_{0}^{l}\\left[F_{0}(t) \\delta\\left(x-\\xi_{1}\\right) \\phi_{j}(x)+M_{0}(t) \\delta\\left(x-\\xi_{2}\\right) \\phi_{j}^{\\prime}(x)\\right] d x \\\\ &=F_{0}(t) \\phi_{j}\\left(\\xi_{1}\\right)+M_{0}(t) \\phi_{j}^{\\prime}\\left(\\xi_{2}\\right) \\\\ \\end{aligned} è§£ï¼š é¦–å…ˆï¼Œç”±æåŠ›å¾—åˆå§‹æ¡ä»¶ï¼š y(x, 0)=f_{1}(x)=\\left\\{\\begin{array}{ll}y_{s t}\\left[3\\left(\\dfrac{x}{l}\\right)-4\\left(\\dfrac{x}{l}\\right)^{3}\\right], & 0 \\leq x \\leq \\dfrac{l}{2} \\\\y_{s t}\\left[3\\left(\\dfrac{l-x}{x}\\right)-4\\left(\\dfrac{l-x}{l}\\right)^{3}\\right], & \\dfrac{l}{2} \\leq x \\leq l\\end{array}\\right.\\\\ \\left.\\frac{\\partial y}{\\partial t}\\right|_{t=0}=f_{2}(x)=0 \\quad y_{s t}=-\\frac{P l^{3}}{48 E I} \\quad æ¢ä¸­ç‚¹çš„é™æŒ åº¦ å…¶æ¬¡ï¼Œå¯ä»¥è¾¹ç•Œæ¡ä»¶æ±‚è§£å›ºæœ‰é¢‘ç‡å’Œæ¨¡æ€å‡½æ•°ï¼š å½’ä¸€åŒ–æ¡ä»¶: \\int_{0}^{l} \\rho S\\left(C_{i} \\sin \\frac{i \\pi x}{l}\\right)^{2} d x=\\frac{\\rho S l}{2} C_{i}^{2}=1 \\quad C_{i}=\\sqrt{\\frac{2}{\\rho A l}} ç„¶åï¼Œæ ¹æ®åˆå§‹æ¡ä»¶æ±‚æ¨¡æ€åæ ‡ ä»£å…¥å…¬å¼å°†å¤–ç•Œå¹¿ä¹‰åŠ›è½¬åŒ–åˆ°æ¨¡æ€åæ ‡ï¼Œè¿™é‡Œçš„$f_1(x)$ä¸ºåˆå§‹æ¡ä»¶ä¸‹æ¢çš„å˜å½¢æ›²çº¿ã€‚ q_{j}(0)=\\int_{0}^{l} \\rho S f_{1}(x) \\phi_{j}(x) d x\\\\ \\dot{q}_{j}(0)=\\int_{0}^{l} \\rho S f_{2}(x) \\phi_{j}(x) d xæ¨¡æ€åæ ‡åˆå§‹æ¡ä»¶ä¸‹ï¼Œå½“ä½œç”¨åŠ›åˆšåˆšæ’¤å»å—åˆ°çš„åŠ›äº§ç”Ÿçš„ä½ç§»ï¼Œå³æ­£åˆ™å¹¿ä¹‰åŠ›ä¸ºï¼š \\begin{align} q_{i}(0) &=\\int_{0}^{\\frac{l}{2}} \\rho S y_{s t}\\left[3\\left(\\frac{x}{l}\\right)^{3}-4\\left(\\frac{x}{l}\\right)^{3}\\right] C_{i} \\sin \\frac{i \\pi x}{l} d x + \\int_{\\frac{l}{2}}^{l} \\rho S y_{s t}\\left[3\\left(\\frac{l-x}{l}\\right)-4\\left(\\frac{l-x}{l}\\right)^{3}\\right] C_{i} \\sin \\frac{i \\pi x}{l} d x \\\\&=-\\frac{P l^{4} \\rho S}{i^{4} \\pi^{4} E I} \\qquad i=1,3,5, \\cdots \\end{align} è¿™é‡Œæ ¹æ®ç§¯åˆ†çš„è¡¨è¾¾å¼å¯å¾—ï¼šåœ¨ i ä¸ºå¶æ•°çš„æƒ…å†µä¸‹ç§¯åˆ†çš„ç»“æœå¯èƒ½ä¸º0ã€‚ åˆå§‹æ¡ä»¶ä¸‹ï¼Œç”±äºå¤–åŠ›æ˜¯åˆšåˆšæ’¤å»çš„ï¼Œå› æ­¤æ­¤æ—¶çš„é€Ÿåº¦ä¸º0ï¼Œæ²¡æœ‰æ¿€åŠ±ï¼Œå› æ­¤æ­£åˆ™å¹¿ä¹‰åŠ›ä¸º0ï¼š $\\dot{q}_{i}(0)=0 \\quad i=1,3,5, \\cdots $ æœ€åï¼Œä»£å…¥æ±‚è§£åœ¨ç‰©ç†ç©ºé—´çš„å“åº” æ¨¡æ€åæ ‡å“åº”: $ \\quad q_{i}(t)=q_{i}(0) \\cos \\omega_{i} t $ ç‰©ç†ç©ºé—´ä¸Šçš„æ¢å“åº”ï¼š y(x, t)=\\sum_{i=1}^{\\infty} \\phi_{i}(x) q_{i}(t)=-\\frac{2 P l^{3}}{\\pi^{4} E I} \\sum_{i=1,3,5 \\cdots}^{\\infty} \\frac{(-1)^{\\frac{i-1}{2}}}{i^{4}} \\sin \\frac{i \\pi x}{l} \\cos \\omega_{i} t ä¾‹ï¼šç®€æ”¯æ¢ï¼Œä¸­ç‚¹å—åŠ›çŸ©ä½œ$M_0\\sin\\omega t$ ç”¨ï¼Œæ±‚ï¼šæ¢çš„å“åº” ä¸Šé¢çš„ä¸¤ä¸ªé¢˜ç›®éƒ½æ˜¯ç›´æ¥æ±‚è§£ï¼Œå›ºæœ‰é¢‘ç‡ã€æŒ¯å‹æ–¹ç¨‹ã€å¹¿ä¹‰æ­£åˆ™åŠ›ï¼Œä¹‹åå¾—å‡ºæ­£åˆ™æ–¹ç¨‹ï¼Œæ±‚è§£æ­£åˆ™æ–¹ç¨‹ï¼Œæœ€åå°†æ±‚è§£çš„ç»“æœä»£å…¥å¾—åˆ°ç‰©ç†ç©ºé—´ï¼Œå¾—å‡ºæœ€åçš„æ¨¡æ€ã€‚ ä¸Šè¿°ä¸¤é¢˜çš„æ–¹æ³•æ€»ç»“ï¼š é¦–å…ˆæ ¹æ®è¾¹ç•Œæ¡ä»¶ä½¿ç”¨ä¹‹å‰ä¾‹é¢˜çš„ä¸€äº›ç»“è®ºç›´æ¥å¾—å‡ºå›ºæœ‰é¢‘ç‡å’ŒæŒ¯å‹å‡½æ•°(åˆšæ‰æˆ‘ä»¬æ¨å¯¼äº†ä¸åŒè¾¹ç•Œä¸‹çš„æŒ¯åŠ¨è¿‡ç¨‹) ä¹‹åæ ¹æ®å¤–åŠ›çš„å…¬å¼ï¼Œç›´æ¥ç§¯åˆ†å¾—å‡ºæ­£åˆ™å¹¿ä¹‰åŠ›å³æ¨¡æ€åæ ‡ æœ€åæ ¹æ®æ¨¡æ€å‡½æ•°å’Œæ¨¡æ€åæ ‡ç›¸ä¹˜å¹¶ç´¯åŠ  å…¶å®ç›´æ¥æ³•å’Œå®šä¹‰æ³•æ˜¯å·®ä¸å¤šçš„ï¼Œä½†æ˜¯ä½¿ç”¨å®šä¹‰æ³•ä¸å®¹æ˜“å‡ºé”™ã€‚ æ±‚ç¨³æ€å¼ºè¿«æŒ¯åŠ¨ï¼Œä»¥åŠæ¢è‡ªç”±ç«¯çš„å“åº”ã€‚ ä¸¤è¾¹ä¹˜ $ \\phi_{j} $ å¹¶æ²¿æ¢é•¿å¯¹ x ç§¯åˆ†ï¼š \\sum_{i=1}^{\\infty}\\left(q_{i} \\int_{0}^{l} E I \\phi_{i}^{\\prime \\prime \\prime} \\phi_{j} d x+\\ddot{q}_{i} \\int_{0}^{l} \\rho S \\phi_{i} \\phi_{j} d x\\right)=P \\sin \\omega t \\int_{0}^{l} \\delta(x-l) \\phi_{j} d xåˆ©ç”¨æ­£åˆ™æŒ¯å‹æ­£äº¤æ€§æ¡ä»¶ : \\ddot{q}_{i}+\\omega_{i}^{2} q_{i}=P \\phi_{i}(l) \\sin \\omega tæ¨¡æ€ç¨³æ€è§£ : $q_{i}=\\dfrac{P \\phi_{i}(l)}{\\omega_{i}^{2}\\left[1-\\left(\\omega / \\omega_{i}\\right)^{2}\\right]} \\sin \\omega t, \\quad i=1,2, \\ldots $ æ¢çš„å“åº”ï¼š y(x, t) =\\sum_\\limits{i=1}^{\\infty} \\phi_{i}(x) q_{i}(t) =P \\sin \\omega t \\sum_\\limits{i=1}^{\\infty} \\dfrac{\\phi_{i}(l) \\phi_{i}(x)}{\\omega_{i}^{2}\\left[1-\\left(\\omega / \\omega_{i}\\right)^{2}\\right]}, \\quad i=1,2, \\ldotsæ­¤æ—¶è‡ªç”±ç«¯çš„å“åº”ä¸ºï¼š ä»¤ $ x=l: \\quad y(l, t)=P \\sin \\omega t \\sum_\\limits{i=1}^{\\infty} \\dfrac{\\phi_{i}^{2}(l)}{\\omega_{i}^{2}\\left[1-\\left(\\omega / \\omega_{i}\\right)^{2}\\right]}, \\quad i=1,2, \\ldots $ \\left.\\phi_{i}(x)\\right|_{x=l}=\\cos \\beta_{i} l-\\cosh \\beta_{i} l+\\frac{\\cos \\beta_{i} l+\\cosh \\beta_{i} l}{\\sin \\beta_{i} l+\\sinh \\beta_{i} l}\\left(\\sin \\beta_{i} l-\\sinh \\beta_{i} l\\right), \\quad(i=1,2, \\cdots) \\\\ \\beta_{1} l=1.875 \\quad \\beta_{2} l=4.694 \\quad \\beta_{3} l=7.855 \\quad \\beta_{i} l \\approx \\frac{2 i-1}{2} \\pi, \\quad(i=3,4, \\cdots) \\\\ y(l, t)=\\frac{4 P l^{3}}{E I}\\left[\\frac{\\eta_{1}}{(1.875)^{4}}+\\frac{\\eta_{2}}{(4.694)^{4}}+\\frac{\\eta_{3}}{(7.855)^{4}}+\\ldots . .\\right] \\sin \\omega t \\\\ \\eta_{i}=\\frac{1}{1-\\left(\\omega / \\omega_{i}\\right)^{2}}, \\quad i=1,2, \\ldotsä¾‹ï¼šç®€æ”¯æ¢ï¼Œå·¦ç«¯æ‰¿å—æ­£å¼¦æ”¯æ’‘è¿åŠ¨ $g(t)=y_0\\sin(\\omega t)$ è¯•æ±‚æ¢çš„å“åº”ã€‚ $y_g(x,t)$ ä¸ºå‚è€ƒåŸºçš„ä½ç§»ï¼Œ$y-y_g$ ä»£è¡¨ç›¸å¯¹ä½ç§»ï¼Œå°±æ˜¯å‡è®¾åŸºç¡€ä¸åŠ¨æ˜¯çš„ä½ç§»ã€‚ ä»¥å³æˆªé¢ä¸Šä»»ä¸€ç‚¹ä¸ºçŸ©å¿ƒï¼ŒåŠ›çŸ©å¹³è¡¡ï¼š \\left(M+\\frac{\\partial M}{\\partial x} d x\\right)-M-F_{s} d x+\\rho S d x \\frac{\\partial^{2} y}{\\partial t^{2}} \\frac{d x}{2}=0ç•¥å»é«˜é˜¶æ— ç©·å°é‡ï¼š$F_s=\\dfrac {\\partial M}{\\partial x}$ ææ–™åŠ›å­¦çš„ç­‰æˆªé¢å‡è®¾ï¼Œå¼¯çŸ©ä¸æŒ åº¦çš„å…³ç³»ï¼š M(x, t)=E I \\dfrac{\\partial^{2}\\left[y(x, t)-y_{g}(x, t)\\right]}{\\partial x^{2}}äºæ˜¯å¯å¾—æ¢çš„æŒ¯åŠ¨æ–¹ç¨‹ä¸ºï¼š E I \\frac{\\partial^{4}\\left(y-y_{g}\\right)}{\\partial x^{4}}+\\rho S \\frac{\\partial^{2} y}{\\partial t^{2}}=0ä¹‹åä»¤ $y^{}=y-y_{g},\\quad y=y^{}+y_{g}$ ï¼Œå¹¶ä»£å…¥$y_g(x,t)$ å¾—ï¼š ä»£å…¥æ–¹ç¨‹ï¼š $E I y^{(4)}+\\rho S \\dot{y}^{}=-\\rho S \\dot{y}_{g}=-\\rho S \\omega^{2} y_{0} \\sin \\omega t\\left(1-\\dfrac{x}{l}\\right)$ è®¾è§£ä¸º: $y^{*}=\\sum_\\limits{i=1}^{\\infty} {\\phi_{i}(x) q_{i}(t)}$ ä»£å…¥åˆ°æ–¹ç¨‹ä¸­å¯å¾—ï¼š \\quad \\sum_{i=1}^{\\infty}\\left(E I q_{i} \\phi_{i}^{\\prime \\prime \\prime}+\\rho S \\ddot{q}_{i} \\phi_{i}\\right)=\\rho S \\omega^{2} y_{0}\\left(1-\\frac{x}{l}\\right) \\sin \\omega tå…¶ä¸­ï¼Œå½’ä¸€åŒ–æ­£åˆ™æŒ¯å‹ä¸ºï¼š $ \\phi_{i}(x) =\\sqrt{\\dfrac{2}{l}} \\sin \\dfrac{i \\pi x}{l}$ ç”¨ $\\phi_{j}(x)$ ä¹˜ä¸Šå¼, å¹¶æ²¿æ†é•¿ç§¯åˆ†: \\sum_{i=1}^{\\infty}\\left(q_{i} {\\int_{0}^{l} E I \\phi_{i}^{\\prime \\prime \\prime} \\phi_{j} d x}+{\\left.\\ddot{q}_{i} \\int_{0}^{l} \\rho S \\phi_{i} \\phi_{j} d x \\right)}=\\rho S \\omega^{2} y_{0} \\sin \\omega t \\int_{0}^{l} \\phi_{j}\\left(1-\\frac{x}{l}\\right) d x\\right.è¿™é‡Œï¼Œ$\\int_{0}^{l} E I \\phi_{i}^{\\prime \\prime \\prime} \\phi_{j} d x=\\omega_i^2$ , $\\int_{0}^{l} \\rho S \\phi_{i} \\phi_{j} d x=1$. æ­£äº¤æ€§: $\\quad \\ddot{q}_{i}+\\omega_{i}^{2} q_{i}=\\sqrt{\\dfrac{2}{l}} \\dfrac{l \\omega^{2} y_{0} \\sin \\omega t}{i \\pi}, \\quad i=1,2, \\ldots$ æ¨¡æ€åæ ‡ç¨³æ€è§£: q_{i}=\\sqrt{\\frac{2}{l}} \\frac{l \\omega^{2} y_{0} \\eta_{i}}{i \\pi \\omega_{i}^{2}} \\sin \\omega t =\\sqrt{\\frac{2}{l}} \\frac{l^{5} \\omega^{2} y_{0}}{i^{5} \\pi^{5} a_{0}^{2}} \\eta_{i} \\sin \\omega t, \\quad i=1,2, \\ldots\\\\ \\eta_{i}=\\frac{1}{1-\\left(\\omega / \\omega_{i}\\right)^{2}}ç®€æ”¯æ¢å›ºæœ‰é¢‘ç‡ï¼š$\\omega_{i}=\\left(\\dfrac{i \\pi}{l}\\right)^{2} \\sqrt{\\dfrac{E I}{\\rho S}}, \\quad(i=1,2, \\cdots), \\quad a_{0}^{2}=\\dfrac{E I}{\\rho S}$$ y^{*}=\\frac{2 l^{4} \\omega^{2} y_{0} \\sin \\omega t}{\\pi^{5} a_{0}^{2}} \\sum_{i=1}^{\\infty} \\frac{\\eta_{i}}{i^{5}} \\sin \\frac{i \\pi x}{l}\\\\y=y^{*}+y_{g}=y_{0} \\sin \\omega t\\left[1-\\frac{x}{l}+\\frac{2 l^{4} \\omega^{2}}{\\pi^{5} a_{0}^{2}} \\sum_{i=1}^{\\infty} \\frac{\\eta_{i}}{i^{5}} \\sin \\frac{i \\pi x}{l}\\right]","link":"/2022/03/18/%E6%8C%AF%E5%8A%A8%E5%8A%9B%E5%AD%A6/%E7%AC%AC%E5%85%AD%E7%AB%A0-%E8%BF%9E%E7%BB%AD%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%8C%AF%E5%8A%A8-%E6%A2%81%E7%9A%84%E5%BC%AF%E6%9B%B2%E6%8C%AF%E5%8A%A8/"},{"title":"ç¬¬å…­ç«  è¿ç»­ç³»ç»Ÿçš„æŒ¯åŠ¨ è¿‘ä¼¼æ±‚è§£æ–¹æ³• ç¬¬ä¸€éƒ¨åˆ†","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦ä»‹ç»çš„æ˜¯è¿ç»­ç³»ç»ŸæŒ¯åŠ¨çš„è¿‘ä¼¼æ±‚è§£æ–¹æ³•éƒ¨åˆ†ï¼Œä¸»è¦ä»‹ç»å…¶ä¸­çš„é›†ä¸­è´¨é‡æ³•ã€å‡è®¾æ¨¡æ€æ³•ã€ç‘åˆ©æ³•ä»¥åŠé‡Œå…¹æ³•ã€‚ è¿ç»­ç³»ç»Ÿçš„ç²¾ç¡®è§£ä»…é€‚ç”¨äºç®€å•æ„ä»¶å½¢çŠ¶å’Œè¾¹ç•Œæ¡ä»¶ï¼Œå¯¹äºå¤æ‚æ„ä»¶æ¥è¯´åªèƒ½æ±‚è§£æ•°å€¼è§£ã€‚ å½“æ„ä»¶å½¢çŠ¶å¤æ‚æˆ–è¾¹ç•Œæ¡ä»¶å¤æ‚æ—¶å¯ä»¥é‡‡ç”¨è¿‘ä¼¼è§£æ³• è¿‘ä¼¼æ–¹æ³•ä¸»è¦åŒ…æ‹¬ï¼šé›†ä¸­è´¨é‡æ³•ã€å‡è®¾æŒ¯å‹æ³•ã€æœ‰é™å…ƒæ³• é›†ä¸­è´¨é‡æ³•æ˜¯å°†è¿ç»­ç³»ç»Ÿçš„è´¨é‡é›†ä¸­åˆ°æœ‰é™ä¸ªç‚¹æˆ–æˆªé¢ä¸Šï¼Œå°†è¿ç»­çš„é—®é¢˜ç¦»æ•£åŒ–åæ±‚è§£ã€‚ å‡è®¾æŒ¯å‹æ³•æ˜¯ç”¨æœ‰é™ä¸ªå‡½æ•°çš„çº¿æ€§ç»„åˆæ¥æ„é€ è¿ç»­ç³»ç»Ÿçš„è§£ æœ‰é™å…ƒæ³•å…¼æœ‰ä»¥ä¸Šä¸¤ç§æ–¹æ³•çš„ç‰¹ç‚¹ å„ç§è¿‘ä¼¼è§£æ³•çš„å…±åŒç‰¹ç‚¹ï¼šç”¨æœ‰é™è‡ªç”±åº¦çš„ç³»ç»Ÿå¯¹æ— é™è‡ªç”±åº¦çš„ç³»ç»Ÿè¿›è¡Œè¿‘ä¼¼ï¼Œè¿™æ ·å¯ä»¥å°†æ— é™è‡ªç”±åº¦çš„é—®é¢˜è½¬åŒ–ä¸ºæœ‰é™è‡ªç”±åº¦çš„å¤šè‡ªç”±åº¦ç³»ç»Ÿæ±‚è§£é—®é¢˜ã€‚ é›†ä¸­è´¨é‡æ³• å·¥ç¨‹ç³»ç»Ÿçš„ç‰©ç†å‚æ•°å¸¸å¸¸åˆ†å¸ƒä¸å‡åŒ€ æƒ¯æ€§å’Œåˆšæ€§è¾ƒå¤§çš„éƒ¨ä»¶å¯çœ‹ä½œè´¨é‡é›†ä¸­çš„è´¨ç‚¹å’Œåˆšä½“ æƒ¯æ€§å°å’Œå¼¹æ€§å¼ºçš„éƒ¨ä»¶å¯æŠ½è±¡ä¸ºæ— è´¨é‡çš„å¼¹ç°§ï¼Œå®ƒä»¬çš„è´¨é‡å¯ä»¥ä¸è®¡æˆ–æŠ˜åˆåˆ°é›†ä¸­è´¨é‡ä¸Š å¦‚åœ†ç›˜ä¹‹é—´çš„è½´æˆ–è€…æ»‘å—ä¹‹é—´çš„å¼¹ç°§ã€‚ ç‰©ç†å‚æ•°åˆ†å¸ƒå‡åŒ€çš„ç³»ç»Ÿï¼Œä¹Ÿå¯è¿‘ä¼¼åœ°åˆ†è§£ä¸ºæœ‰é™ä¸ªé›†ä¸­è´¨é‡ å°†æ‚¬è‡‚æ¢ç­‰æ•ˆä¸ºä¸€äº›é›†ä¸­è´¨é‡çš„ç»„åˆ é›†ä¸­è´¨é‡çš„æ•°é‡å–å†³äºæ‰€è¦æ±‚çš„è®¡ç®—ç²¾åº¦ ç­‰æ•ˆçš„é›†ä¸­è´¨é‡è¶Šå¯†é›†ä¸ªæ•°è¶Šå¤šï¼Œè®¡ç®—å¾—åˆ°çš„ç²¾åº¦å°±è¶Šé«˜ è¿ç»­ç³»ç»Ÿç¦»æ•£ä¸ºæœ‰é™è‡ªç”±åº¦ç³»ç»Ÿåï¼Œå¯ä»¥é‡‡ç”¨å¤šè‡ªç”±åº¦ç³»ç»Ÿçš„åˆ†ææ–¹æ³•è¿›è¡Œåˆ†æ è¿™é‡Œï¼Œä¸¤ç«¯è¾¹ç•Œçš„è´¨é‡å¯¹æŒ åº¦ä¸ä¼šäº§ç”Ÿå½±å“ï¼Œå› æ­¤ä¸¤ç«¯çš„è´¨é‡å¯ä»¥å»æ‰ï¼Œæœ€åç­‰æ•ˆä¸‡ä»¥åçš„æ€»è´¨é‡æ˜¯0.75mï¼Œä¸åŸæ¥çš„è´¨é‡ä¸åŒã€‚ æœ€ç»ˆç­‰æ•ˆä¸ºï¼Œ$m_1=m_2=m_3=\\dfrac m 4$ çš„ä¸‰è‡ªç”±åº¦çš„ç³»ç»Ÿã€‚ å¤šè‡ªç”±åº¦ç³»ç»Ÿåˆ†è´¨é‡çŸ©é˜µä¸º$M=\\dfrac m 4 \\left[\\begin{array}\\\\ 1 &amp; 0 &amp; 0\\\\ 0 &amp; 1 &amp; 0\\\\ 0 &amp; 0 &amp; 1 \\end{array}\\right]$ ä¸‰ä¸ªè´¨ç‚¹ä¹‹é—´çš„æ¢æ®µå…·æœ‰ç›¸åŒçš„å¼¹æ€§æ€§è´¨ï¼Œç”±ææ–™åŠ›å­¦ï¼Œå¾—æŸ”åº¦å½±å“ç³»æ•°ï¼š f_{11}=f_{33}=\\dfrac {9l^3} {768EI}\\\\ f_{12}=f_{21}=f_{23}=f{32} =\\dfrac {11l^3} {768EI}\\\\ f_{22}=\\dfrac {16l^3} {768EI}\\\\ f_{13}=f_{31}=\\dfrac {7l^3} {768EI}\\\\å¯å¾—æŸ”åº¦çŸ©é˜µä¸ºï¼š$F=\\dfrac {l^3} {768EI} \\left[\\begin{array}\\\\ 9 &amp; 11 &amp; 7\\\\ 11 &amp; 16 &amp; 11\\\\ 7 &amp; 11 &amp; 9 \\end{array}\\right]$ è¿ç»­ä½“è¿‘ä¼¼æˆäº†ä¸‰è‡ªç”±åº¦ç³»ç»Ÿï¼Œä¹Ÿå¯å°†è¿ç»­æ¢ç¦»æ•£ä¸ºä¸¤è‡ªç”±åº¦æˆ–å•è‡ªç”±åº¦ç³»ç»Ÿï¼Œåœ¨æ±‚å¾—ç³»ç»Ÿçš„è´¨é‡çŸ©é˜µå’ŒæŸ”åº¦çŸ©é˜µåï¼Œå¯ä»¥è®¡ç®—å‡ºç›¸åº”çš„ç³»ç»Ÿå›ºæœ‰é¢‘ç‡ï¼š éšç€è‡ªç”±åº¦æ•°ç›®çš„å¢åŠ ï¼Œè®¡ç®—ç²¾åº¦æé«˜ï¼› åŸºé¢‘ç²¾åº¦è¾ƒé«˜ï¼Œä½†æ˜¯å…¶ä»–çš„æœ¬æ¥è¯¯å·®å°±æ¯”è¾ƒå¤§ï¼› é¢‘ç‡é˜¶æ•°å¢é«˜ï¼Œè¯¯å·®å¢å¤§ã€‚ æ³¨ï¼šåœ¨é‡‡ç”¨é›†ä¸­è´¨é‡æ³•æ—¶ï¼Œè®¡ç®—ç²¾åº¦ä¸è¾¹ç•Œæ¡ä»¶æœ‰å…³ï¼Œä¾‹å¦‚å°†åŒä¸€æ¨¡å‹ç”¨äºæ‚¬è‡‚æ¢ç³»ç»Ÿï¼Œè®¡ç®—ç²¾åº¦æ˜æ˜¾ä¸‹é™è¿ç»­ç³»ç»Ÿçš„æŒ¯åŠ¨ ç”±äºæ‚¬è‡‚æ¢çš„å³è¾¹æ˜¯è‡ªç”±çš„ï¼Œçº¦æŸå‡å°‘äº†ã€‚ å‡è®¾æ¨¡æ€æ³•ä¸»è¦åŒ…æ‹¬åŠ¨åŠ›å­¦æ–¹ç¨‹ã€ç‘åˆ©æ³•å’Œé‡Œå…¹æ³•ã€‚ åˆ©ç”¨æœ‰é™ä¸ªå·²çŸ¥çš„æŒ¯å‹å‡½æ•°æ¥ç¡®å®šç³»ç»Ÿçš„è¿åŠ¨è§„å¾‹ï¼Œåœ¨é‡‡ç”¨æŒ¯å‹å åŠ æ³•è®¨è®ºè¿ç»­ç³»ç»Ÿçš„å“åº”æ—¶ï¼Œæ˜¯å°†è¿ç»­ç³»ç»Ÿçš„è§£å†™ä½œå…¨éƒ¨æŒ¯å‹å‡½æ•°çš„çº¿æ€§ç»„åˆï¼š y(x, t)=\\sum_\\limits{i=1}^{\\infty} \\phi_{i}(x) q_{i}(t)å…¶ä¸­ï¼Œ$\\phi_i(x)$ ä¸ºæŒ¯å‹å‡½æ•°ï¼›$q_i(t)$ ä¸ºæ¨¡æ€åæ ‡ã€‚ è‹¥å–å‰ n ä¸ªæœ‰é™é¡¹ä½œä¸ºè¿‘ä¼¼è§£ï¼š y(x, t)=\\sum_\\limits{i=1}^{n} \\phi_{i}(x) q_{i}(t)å…¶ä¸­ï¼Œ$\\phi_i(x)$ï¼šåº”è¯¥æ˜¯ç³»ç»Ÿçš„æŒ¯å‹å‡½æ•°ï¼Œä½†å®é™…ä¸­ç”±äºæ— æ³•å¾—åˆ°ç­‰åŸå› è€Œä»£ä»¥å‡è®¾æ¨¡æ€ï¼Œå³æ»¡è¶³éƒ¨åˆ†æˆ–å…¨éƒ¨è¾¹ç•Œæ¡ä»¶ï¼Œä½†ä¸ä¸€å®šæ»¡è¶³åŠ¨åŠ›å­¦æ–¹ç¨‹çš„è¯•å‡½æ•°æ—ã€‚$q_i(t)$ ï¼šä¸å‡è®¾æŒ¯å‹æ‰€å¯¹åº”çš„å¹¿ä¹‰åæ ‡ã€‚ åŠ¨èƒ½ï¼š \\begin{align} T&=\\frac{1}{2} \\int_{0}^{l} \\rho S\\left(\\frac{\\partial y(x, t)}{\\partial t}\\right)^{2} d x=\\frac{1}{2} \\int_{0}^{l} \\rho S\\left(\\dot{\\boldsymbol{q}}^{T} \\boldsymbol{\\Phi}^{T}\\right)(\\boldsymbol{\\Phi} \\dot{\\boldsymbol{q}}) d x\\\\&=\\frac{1}{2} \\dot{\\boldsymbol{q}}^{T}\\left(\\int_{0}^{l} \\rho S \\boldsymbol{\\Phi}^{T} \\boldsymbol{\\Phi} d x\\right) \\dot{\\boldsymbol{q}}=\\frac{1}{2} \\dot{\\boldsymbol{q}}^{T} \\boldsymbol{M} \\dot{\\boldsymbol{q}} \\end{align} åŠ¿èƒ½ï¼š V=\\frac{1}{2} \\int_{0}^{l} E I\\left(\\frac{\\partial^{2} y(x, t)}{\\partial x^{2}}\\right)^{2} d x=\\frac{1}{2} \\int_{0}^{l} E I\\left(\\boldsymbol{q}^{T} \\boldsymbol{\\Phi}^{\\prime \\prime}\\right)\\left(\\boldsymbol{\\Phi}^{\\prime \\prime} \\boldsymbol{q}\\right) d x=\\frac{1}{2} \\boldsymbol{q}^{T} \\boldsymbol{K} \\boldsymbol{q}\\\\\\boldsymbol{K}=\\int_{0}^{l} E I \\boldsymbol{\\Phi}^{\\prime \\prime T} \\boldsymbol{\\Phi}^{\\prime \\prime} d x \\in R^{n \\times n} \\quad åˆšåº¦é˜µ\\\\k_{i j}=k_{j i}=\\int_{0}^{l} E I \\phi_{i}^{\\prime \\prime}(x) \\phi_{j}^{\\prime \\prime}(x) d x \\quad åˆšåº¦é˜µä¸ºå¯¹ç§°æœ‰æ¿€åŠ±å­˜åœ¨çš„æ‹‰æ ¼æœ—æ—¥æ–¹ç¨‹ï¼š \\frac{d}{d t}\\left(\\frac{\\partial T}{\\partial \\dot{q}_{i}}\\right)-\\frac{\\partial T}{\\partial q_{i}}+\\frac{\\partial V}{\\partial q_{i}}=Q_{i}\\\\ \\frac{d}{d t}\\left(\\frac{\\partial L}{\\partial \\dot{q}_{i}}\\right)-\\frac{\\partial L}{\\partial q_{i}}=Q_{i} \\quad L=T-Våˆ†å¸ƒåŠ›çš„è™šåŠŸ: \\quad \\delta W(t)=\\int_{0}^{l} p(x, t) \\delta y d x=\\sum_\\limits{i=1}^{n}\\left({\\int_{0}^{l} p(x, t) \\phi_{i}(x) d x}\\right) \\delta q_{i}= \\sum_{i=1}^{n} Q_{i} \\delta q_{i} \\\\Q_{i}(t) =\\int_{0}^{l} p(x, t) \\phi_{i}(x) d x \\quad \\text { å¹¿ä¹‰åŠ› }çŸ©é˜µå½¢å¼: $\\quad \\boldsymbol{Q}(t)=\\left[Q_{1}(t), Q_{2}(t), \\cdots, Q_{n}(t)\\right]^{T} \\in R^{n \\times 1}$ æ‹‰æ ¼æœ—æ—¥æ–¹ç¨‹çŸ©é˜µå½¢å¼ï¼š \\frac{d}{d t}\\left(\\frac{\\partial T}{\\partial \\dot{q}}\\right)-\\frac{\\partial T}{\\partial q}+\\frac{\\partial V}{\\partial \\boldsymbol{q}}=\\boldsymbol{Q} \\\\{M} \\ddot{q}+\\boldsymbol{K} \\boldsymbol{q}=\\boldsymbol{Q}(t)å¼¹æ€§ä½“çš„å—è¿«æŒ¯åŠ¨è½¬æ¢æˆäº† n è‡ªç”±åº¦ç³»ç»Ÿçš„å¼ºè¿«æŒ¯åŠ¨é—®é¢˜. ä»¥ä¸Šå‡è´¨æ¢çš„åŠ¨èƒ½å’ŒåŠ¿èƒ½çš„è¡¨ç¤ºå‡½æ•°ã€‚ å¦‚æœå‡è´¨ä¸Šé¢æœ‰å¤šä½™çš„å·ç°§å’Œç›´çº¿å¼¹ç°§ï¼Œåˆ™ç®—æ³•ä¸ºä»¥ä¸‹æ‰€ç¤ºã€‚ å…¸å‹ä¾‹é¢˜ è‹¥å¯¹ç¬¬ä¸‰é˜¶å›ºæœ‰é¢‘ç‡çš„ç²¾åº¦è¦æ±‚ä¸é«˜ï¼Œå– nï¼3ï¼Œä½†æ˜¯ä¸€èˆ¬æ±‚å‰ä¸‰é˜¶æ—¶æˆ‘ä»¬ä¼šæ±‚å‰äº”é˜¶çš„æ¨¡æ€å‡½æ•°ï¼Œè¿™é‡Œå¯¹è¿›åº¦çš„è¦æ±‚ä¸é«˜å°±å…ˆæ±‚å‰ä¸‰é˜¶ã€‚ å¯¹äºè¿™ç§è¾¹ç•Œæ¯”è¾ƒå¤æ‚çš„å‡½æ•°æ¥è®²ï¼Œæ±‚è§£æ¨¡æ€å°±æ¯”è¾ƒå¤æ‚äº†ï¼Œå› æ­¤æœ€å¥½ä½¿ç”¨å‡è®¾çš„æ¯”è¾ƒç®€å•çš„æ¨¡æ€æ¥è¿‘ä¼¼é€¼è¿‘ï¼Œè¿™é‡Œæˆ‘ä»¬æ—¶å‡è®¾çš„æ˜¯ç®€æ”¯æ¢çš„æ¨¡æ€$\\phi_i(x)=\\sin\\dfrac {i \\pi x}{l}$ã€‚ æ­¤æ—¶å…¶æŒ¯å‹çš„å‡½æ•°é˜µï¼š äºæ˜¯å…¶å¯¹åº”çš„ç‰¹å¾æ ¹é—®é¢˜ä¸ºï¼š$(K-\\omega^2M)\\Psi=0$ è§£å¾—å›ºæœ‰é¢‘ç‡ä¸ºï¼š \\omega_{1}=5.6825 \\sqrt{\\dfrac{E I}{\\rho S l^{4}}} \\quad \\omega_{2}=39.4784 \\sqrt{\\dfrac{E I}{\\rho S l^{4}}} \\quad \\omega_{3}=68.9944 \\sqrt{\\dfrac{E I}{\\rho S l^{4}}}æ­£åˆ™åŒ–ç‰¹å¾å‘é‡ï¼š $\\psi^{(1)}=\\sqrt{\\frac{2}{\\rho S l}}\\left[\\begin{array}{c}0.5742 \\\\ 0 \\\\ -0.0048\\end{array}\\right] \\psi^{(2)}=\\sqrt{\\frac{2}{\\rho S l}}\\left[\\begin{array}{l}0 \\\\ 1 \\\\ 0\\end{array}\\right] \\quad \\psi^{(3)}=\\sqrt{\\frac{2}{\\rho S l}}\\left[\\begin{array}{c}0.5199 \\\\ 0 \\\\ 0.7746\\end{array}\\right]$ æ¢çš„ç¨³æ€å“åº”ï¼š y(x,t)=\\sum_\\limits{i=1}^3\\phi_i(x)q_i(x)=\\sum_\\limits{i=1}^3q_i(t)\\sin \\frac {i\\pi x}{l} ç‘åˆ©æ³•è¿ç»­ç³»ç»Ÿçš„ç‘åˆ©æ³•æ˜¯åŸºäºèƒ½é‡æ³•çš„å‡è®¾æŒ¯å‹æ³•ï¼Œæ˜¯å¤šè‡ªç”±åº¦ç³»ç»Ÿçš„ç‘åˆ©æ³•çš„æ¨å¹¿ä»¥æ¢çš„å¼¯æ›²æŒ¯åŠ¨ä¸ºä¾‹ å‡è®¾æ¢ä»¥æŸé˜¶æŒ¯å‹å‡½æ•°ä½œé¢‘ç‡ä¸º $\\omega$ çš„è‡ªç”±æŒ¯åŠ¨ï¼š$y(x,t)=\\phi\\sin \\omega t$ è®¾ç³»ç»Ÿä¸ºä¿å®ˆç³»ç»Ÿï¼Œæœºæ¢°èƒ½å®ˆæ’ï¼Œå³$T_{max}=V_{max}$ å®šä¹‰ç‘åˆ©å•†ï¼š$R(\\phi)=\\dfrac {V_{max}} {T^{*}}=\\omega^2$ å½“ $\\phi(x)$ ä¸ºå‡†ç¡®çš„ç¬¬ i é˜¶æŒ¯å‹å‡½æ•°æ—¶ï¼Œç‘åˆ©å•†å³ä¸ºç›¸åº”çš„ç‰¹å¾å€¼ï¼Œå³ç¬¬ i é˜¶å›ºæœ‰é¢‘ç‡$\\omega_i$ ã€‚ è‹¥$\\phi(x)$æ˜¯è¯•å‡½æ•°ï¼Œå®ƒæ»¡è¶³æ¢çš„å‡ ä½•è¾¹ç•Œæ¡ä»¶ï¼Œä½†ä¸æ»¡è¶³åŠ¨åŠ›å­¦æ–¹ç¨‹ï¼Œåˆ™ç‘åˆ©å•†æ˜¯ä¸€ä¸ªä¾èµ–äº $\\phi(x)$ çš„æ ‡é‡ã€‚ è¯•å‡½æ•° $\\phi(x)$ è¶Šæ¥è¿‘æŸé˜¶çœŸå®æŒ¯å‹$\\Rightarrow$ç‘åˆ©å•†è¶Šæ¥è¿‘è¯¥é˜¶å›ºæœ‰é¢‘ç‡ã€‚ ä¸å¤šè‡ªç”±åº¦ç³»ç»Ÿç›¸åŒï¼Œç‘åˆ©å•†å¤§äºåŸºé¢‘ $R(\\phi)&gt;\\omega_0^2$ ã€‚ å®é™…è®¡ç®—æ—¶å¯é€‰æ‹©æ¢çš„é™å˜å½¢å‡½æ•°ï¼Œæˆ–é€‰æ‹©æ¡ä»¶ç›¸è¿‘çš„æ¢çš„ç²¾ç¡®è§£ä½œä¸ºè¯•å‡½æ•°ã€‚æ¯”å¦‚ï¼Œå¯¹äºçœŸå®æƒ…å†µä¸‹çš„æ‚¬è‡‚æ¢ï¼Œæˆ‘ä»¬ä½¿ç”¨æ ‡å‡†çš„åŒ€è´¨ï¼Œç­‰æˆªé¢çš„æ‚¬è‡‚æ¥æ¢æ¥è¿›è¡Œè¿‘ä¼¼ã€‚ T^{*}=\\dfrac{1}{2}\\left[\\int_{0}^{l} \\rho S \\phi^{2}(x) d x+m \\phi^{2}\\left(x_{a}\\right)\\right] \\quad R(\\phi)=\\dfrac{V_{\\max }}{T^{*}} é€‰æ‹©ç­‰æˆªé¢æ‚¬è‡‚æ¢åœ¨å‡å¸ƒè½½è·ä¸‹çš„é™æŒ åº¦æ›²çº¿ä½œä¸ºè¯•å‡½æ•°ï¼š \\phi(x)=A_{1}\\left(x^{4}-4 l x^{3}+6 l^{2} x^{2}\\right) \\Longrightarrow \\omega_{1}=1.1908 \\sqrt{\\dfrac{E I}{\\rho S l^{4}}} é€‰æ‹©ç«¯éƒ¨é›†ä¸­è´¨é‡ä½œç”¨ä¸‹çš„é™æŒ åº¦æ›²çº¿ä½œä¸ºè¯•å‡½æ•°ï¼š \\phi(x)=A_{2}\\left(3 l x^{2}-x^{3}\\right) \\quad \\Longrightarrow \\quad \\omega_{1}=1.1584 \\sqrt{\\frac{E I}{\\rho S l^{4}}} å› é›†ä¸­è´¨é‡å¤§äºæ¢çš„åˆ†å¸ƒè´¨é‡ï¼Œé€‰ç”¨åä¸€ç§è¯•å‡½æ•°å¥½ ç‘åˆ©æ³•ç†è®ºæ˜¯åªè¦æ¨¡æ€ä¼°è®¡çš„å¥½åŸºæœ¬éƒ½å¯ä»¥å¾ˆå¥½çš„ä¼°è®¡ï¼Œå°¤å…¶ä¼°è®¡åŸºé¢‘å¯¹åº”çš„æ›²çº¿æ¯”è¾ƒçš„å®¹æ˜“ï¼Œä½†æ˜¯ä¼°è®¡ä¸‰é˜¶æˆ–è€…æ›´é«˜é˜¶çš„å˜å½¢æ›²çº¿å°±æ¯”è¾ƒçš„å›°éš¾äº†ã€‚ é‡ŒèŒ¨æ³• é‡Œå…¹æ³•æ˜¯ç‘åˆ©æ³•çš„æ”¹è¿› ç‘åˆ©æ³•ä½¿ç”¨å•ä¸ªè¯•å‡½æ•°ï¼Œè€Œé‡Œå…¹æ³•ä½¿ç”¨è‹¥å¹²ä¸ªç‹¬ç«‹çš„è¯•å‡½æ•°çš„çº¿æ€§ç»„åˆï¼š \\phi(x)=\\sum_\\limits{i=1}^{n} a_i \\eta_i(x) é‡Œå…¹æ³•çš„ä¸»è¦ç²¾é«“å°±æ˜¯å¦‚ä½•é€‰æ‹©å‚æ•°$a_i\\quad (i=1,2,â€¦,n)$ ï¼Œä½¿å¾—ç‘åˆ©å•†å–é©»å€¼ï¼š \\dfrac {\\partial R} {\\partial a_i}=0,\\quad (i=1,2,...,n)å¾—åˆ° $a_i$ çš„é½æ¬¡ä»£æ•°æ–¹ç¨‹ç»„ï¼Œå…¶éé›¶è§£æ¡ä»¶å¯ç”¨æ¥è®¡ç®—ç³»ç»Ÿçš„å›ºæœ‰é¢‘ç‡ã€‚ è€ƒè™‘æ¢çš„å¼¯æ›²æŒ¯åŠ¨ï¼Œå…¶å‚è€ƒåŠ¨èƒ½ä¸ºï¼š \\begin{align} T^{*}&=\\frac{1}{2} \\int_{0}^{l} \\rho S \\phi^{2}(x) d x=\\frac{1}{2} \\int_{0}^{l} \\rho S\\left[\\sum_{i=1}^{n} a_{i} \\eta_{i}(x)\\right]\\left[\\sum_{j=1}^{n} a_{j} \\eta_{j}(x)\\right] d x\\\\ &=\\frac{1}{2} \\sum_{i=1}^{n} \\sum_{j=1}^{n} \\tilde{m}_{i j} a_{i} a_{j}=\\frac{1}{2} \\boldsymbol{a}^{T} \\widetilde{\\boldsymbol{M}} \\boldsymbol{a} \\\\ &\\widetilde{m}_{i j}=\\frac{1}{2} \\int_{0}^{l} \\rho S \\eta_{i}(x) \\eta_{j}(x) d x, \\quad(i, j=1,2, \\cdots, n) \\quad \\\\&å®šä¹‰: \\tilde{\\boldsymbol{M}}=\\left[\\tilde{m}_{i j}\\right] \\in R^{n \\times n} \\quad \\boldsymbol{a}=\\left[a_{i}\\right] \\in R^{n \\times 1} \\end{align} æ¢çš„å¼¯æ›²æŒ¯åŠ¨ï¼Œå…¶æœ€å¤§åŠ¿èƒ½ï¼š \\begin{align} V_{\\max } &=\\frac{1}{2} \\int_{0}^{l} E I \\phi^{\\prime \\prime 2}(x) d x=\\frac{1}{2} \\int_{0}^{l} E I\\left[\\sum_{i=1}^{n} a_{i} \\eta_{i}^{\\prime \\prime}(x)\\right]\\left[\\sum_{j=1}^{n} a_{j} \\eta_{j}^{\\prime \\prime}(x)\\right] d x\\\\ &=\\frac{1}{2} \\sum_{i=1}^{n} \\sum_{j=1}^{n} \\widetilde{k}_{i j} a_{i} a_{j} =\\frac{1}{2} \\boldsymbol{a}^{T} \\widetilde{\\boldsymbol{K}} \\boldsymbol{a}\\\\ \\tilde{k}_{i j} &=\\frac{1}{2} \\int_{0}^{l} E I \\eta_{i}^{\\prime \\prime}(x) \\eta_{j}^{\\prime \\prime}(x) d x, \\quad(i, j=1,2, \\cdots, n) \\end{align}å®šä¹‰: $ \\widetilde{\\boldsymbol{K}}=\\left[\\widetilde{k}_{i j}\\right] \\in R^{n \\times n} $ å›ºæœ‰é¢‘ç‡çš„è¿‘ä¼¼å€¼ï¼š R(\\phi)=\\frac{\\boldsymbol{a}^{T} \\widetilde{\\boldsymbol{K}} \\boldsymbol{a}}{\\boldsymbol{a}^{T} \\widetilde{\\boldsymbol{M}} \\boldsymbol{a}}=\\widetilde{\\omega}^{2} é‡Œå…¹æ³•æ”¹å–„äº†ç‘åˆ©æ³•å¯¹åŸºé¢‘çš„ä¼°è®¡ï¼Œè¿˜å¯è®¡ç®—é«˜é˜¶å›ºæœ‰é¢‘ç‡ n æ„ˆå¤§ï¼Œè®¡ç®—ç²¾åº¦æ„ˆé«˜ è®¡ç®—ç²¾åº¦ä¹Ÿä¸åŸºå‡½æ•° $\\eta_i(i=1,2,â€¦,n)$ çš„é€‰æ‹©æœ‰å…³ï¼Œé€šå¸¸é‡‡ç”¨å¹‚å‡½æ•°ã€ä¸‰è§’å‡½æ•°ã€è´å¡å°”å‡½æ•°æˆ–æ¡ä»¶ç›¸è¿‘çš„æœ‰ç²¾ç¡®è§£çš„æ¢çš„æŒ¯å‹å‡½æ•°ä½œä¸ºåŸºå‡½æ•° å¯¹äºæœºæ¢°è‡‚è€Œè¨€ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ä¸€ä¸ªä¸€èˆ¬çš„å‡è´¨ç­‰æˆªé¢æ¢çš„å„é˜¶æ¨¡æ€ä½œä¸ºåŸºå‡½æ•°æ¥è¿›è¡Œå‡½æ•°é€¼è¿‘ã€‚ è§£ï¼šé€‰å–æ— é›†ä¸­è´¨é‡æ—¶çš„æ¢çš„æŒ¯å‹å‡½æ•°ä½œä¸ºé‡Œå…¹åŸºå‡½æ•°ï¼š è¿™é‡Œå°±æ˜¯é€‰ç”¨ç®€æ”¯æ¢çš„æ¨¡æ€å‡½æ•°æ¥ä½œä¸ºä¸Šè¿°ç»“æ„çš„é‡Œå…¹åŸºã€‚ \\eta_i(x)=\\sin \\dfrac {i\\pi x}{l},(i=1,2,...)åŸºå‡½æ•°æ»¡è¶³è‡ªç„¶è¾¹ç•Œæ¡ä»¶(ä¸¤ç«¯æŒ åº¦å’Œå¼¯çŸ©ä¸ºé›¶)ï¼š \\eta_i(x)=0,\\eta_i^{\\prime \\prime}=0 \\quad (x=0\\,\\ or\\,\\ l)è‹¥å¯¹ç¬¬ä¸‰é˜¶å›ºæœ‰é¢‘ç‡çš„ç²¾åº¦è¦æ±‚ä¸é«˜ï¼Œå– nï¼3 æŒ¯å‹è¯•å‡½æ•°ï¼š$\\phi(x)=\\sum_\\limits{i=1}^{3} a_i \\eta_i(x)=\\sum_\\limits{i=1}^{3} a_i \\sin \\dfrac {i \\pi x} l$ ç¦»æ•£åŒ–å¼ºè¿«æŒ¯åŠ¨æ–¹ç¨‹ï¼š$\\boldsymbol{M \\ddot q} + \\boldsymbol{Kq}=\\boldsymbol{Q(t)}$ æ¢çš„æŒ¯å‹å‡½æ•°è¿‘ä¼¼è§£ï¼š \\begin{aligned} \\phi^{(1)}(x) &=\\sqrt{\\frac{2}{\\rho S l}}\\left(0.5742 \\sin \\frac{\\pi x}{l}-0.0048 \\sin \\frac{3 \\pi x}{l}\\right) \\\\ \\phi^{(2)}(x) &=\\sqrt{\\frac{2}{\\rho S l}} \\sin \\frac{2 \\pi x}{l} \\\\ \\phi^{(3)}(x) &=\\sqrt{\\frac{2}{\\rho S l}}\\left(0.5199 \\sin \\frac{\\pi x}{l}-0.7746 \\sin \\frac{3 \\pi x}{l}\\right) \\end{aligned} ç”¨é‡Œå…¹æ³•æ±‚åŸºé¢‘ã€‚ æœ‰ææ–™åŠ›å­¦å¯å¾—æ ¹éƒ¨æˆªé¢å¯¹ä¸­æ€§è½´çš„æƒ¯æ€§çŸ©ä¸ºï¼š$I_0=\\dfrac 1 {12} \\left({2b}\\right)^3$ æˆªé¢å¯¹ä¸­æ€§è½´çš„æƒ¯æ€§çŸ©ï¼š$I_0=\\dfrac 1 {12} \\left(\\dfrac {2bx} {l}\\right)^3=I_0\\dfrac {x^3} {l^3}$ å–åŸºå‡½æ•°ï¼š$\\eta_i=\\left(1-\\dfrac x l\\right)^2\\left(\\dfrac x l\\right)^{i-1},(i=1,2,â€¦,n)$ å¯ä»¥éªŒè¯ï¼ŒåŸºå‡½æ•°æ»¡è¶³æ‰€æœ‰ä½ç§»è¾¹ç•Œæ¡ä»¶å’ŒåŠ›è¾¹ç•Œæ¡ä»¶ï¼š è¿™é‡Œæˆ‘ä»¬å–$n=2$å¯å¾—ï¼š m_{i j}=\\frac{1}{2} \\int_{0}^{l} \\rho S \\eta_{i}(x) \\eta_{j}(x) d x \\quad k_{i j}=\\frac{1}{2} \\int_{0}^{l} E I \\eta_{i}^{\\prime \\prime}(x) \\eta_{j}^{\\prime \\prime}(x) d x \\left|\\boldsymbol{K}-\\omega^{2} \\boldsymbol{M}\\right|=0 \\Longrightarrow \\omega_{1}=5.319 \\sqrt{\\frac{E I_{0}}{\\rho A_{0} l^{4}}} \\\\ \\text { è‹¥å– } n=1: \\quad \\omega_{1}=5.477 \\sqrt{\\frac{E I_{0}}{\\rho A_{0} l^{4}}} \\\\ \\text { ç²¾ç¡®è§£: } \\quad \\omega_{1}=5.315 \\sqrt{\\frac{E I_{0}}{\\rho A_{0} l^{4}}}","link":"/2022/03/18/%E6%8C%AF%E5%8A%A8%E5%8A%9B%E5%AD%A6/%E7%AC%AC%E5%85%AD%E7%AB%A0-%E8%BF%9E%E7%BB%AD%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%8C%AF%E5%8A%A8-%E8%BF%91%E4%BC%BC%E6%B1%82%E8%A7%A3%E6%96%B9%E6%B3%95-%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86/"},{"title":"ç¬¬å…­ç«  è¿ç»­ç³»ç»Ÿçš„æŒ¯åŠ¨ è¿‘ä¼¼æ±‚è§£æ–¹æ³• ç¬¬ä¸‰éƒ¨åˆ†","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦ä»‹ç»çš„æ˜¯è¿ç»­ç³»ç»ŸæŒ¯åŠ¨çš„è¿‘ä¼¼æ±‚è§£æ–¹æ³•éƒ¨åˆ†ï¼Œä¸»è¦ä»‹ç»å…¶ä¸­çš„æ¨¡æ€ç»¼åˆæ³•çš„è¿›ä¸€æ­¥åˆ†æå’Œé˜è¿°ã€åŠ¨æ€å­ç»“æ„æ–¹æ³•çš„åŸºæœ¬æ€æƒ³ã€è‡ªç”±ç•Œé¢æ¨¡æ€ç»¼åˆæ³•å’Œå›ºå®šæ¨¡æ€ç»¼åˆæ³•ã€‚æœ¬èŠ‚å†…å®¹æ˜¯è¯¾æœ¬å†…å®¹çš„æ·±å…¥å’Œæ‹”é«˜ã€‚ æ¨¡æ€ç»¼åˆæ³•çš„è¿›ä¸€æ­¥é˜è¿° æœ‰é™å•å…ƒæ³•å¯æˆåŠŸå°†ä¸€è¿ç»­ç³»ç»Ÿè½¬åŒ–ä¸ºä¸€ä¸ªå¤šè‡ªç”±åº¦ç³»ç»Ÿé—®é¢˜ã€‚ å¯æ±‚å¾—ï¼šç³»ç»Ÿçš„å›ºæœ‰é¢‘ç‡ï¼ŒæŒ¯å‹ï¼ŒåŠ¨åŠ›å“åº”ï¼› ç°ä»£å·¥ç¨‹ç»“æ„ç‰¹å¾ï¼šåºå¤§ï¼Œå¤æ‚ï¼› é£æœºï¼Œå¤§å‹è½®èˆ¹ï¼Œé«˜å±‚å»ºç­‘ï¼Œå¤§å‹æœºæ¢°ï¼Œèˆªå¤©å™¨ï¼› ç³»ç»Ÿè‡ªç”±åº¦æˆåƒä¸Šä¸‡é˜¶ï¼Œç”šè‡³å‡ åä¸‡é˜¶ï¼› ä¼ ç»Ÿçš„åŠ¨åŠ›ç‰¹æ€§å’ŒåŠ¨åŠ›å“åº”åˆ†æå¾€å¾€ååˆ†å›°éš¾ï¼› è‡ªç”±åº¦è¿‡é«˜ï¼Œé€ æˆç³»ç»Ÿçš„æ§åˆ¶æ¯”è¾ƒå›°éš¾ã€‚ å¯¹ç­–ï¼šä»é‡çº§ä¸Šå¤§å¹…ç¼©å‡æ•´ä½“ç»“æ„è‡ªç”±åº¦è€Œä¸æ”¹å˜é—®é¢˜çš„æœ¬è´¨ï¼Œåœ¨ä¿è¯é—®é¢˜çš„ä¸»è¦ç‰¹å¾çš„æƒ…å†µä¸‹è¿›è¡Œå‡å°é—®é¢˜çš„è‡ªç”±åº¦ã€‚ æœ¬èŠ‚æ˜¯å¯¹æ¨¡æ€ç»¼åˆæ³•çš„è¡¥å……ï¼Œä¸»è¦ä»‹ç»çš„æ˜¯æ¨¡æ€ç»¼åˆæ³•/åŠ¨æ€å­ç»“æ„æ³•/æ¨¡å‹ç¼©èšã€‚ ä¸Šä¸–çºª60å¹´ä»£åˆï¼Œäººä»¬ä¸ºäº†è§£å†³å¤§å‹å¤æ‚ç»“æ„ç³»ç»Ÿæ•´ä½“åŠ¨åŠ›åˆ†æå›°éš¾é—®é¢˜è€Œæå‡ºäº†æ¨¡æ€ç»¼åˆæŠ€æœ¯ Hurtyå’ŒGladWellç­‰äººäºä¸Šä¸–çºª60å¹´ä»£åˆå¥ å®šäº†æ¨¡æ€ç»¼åˆæŠ€æœ¯çš„ç†è®ºåŸºç¡€ 60å¹´ä»£æœ«è‡³70å¹´ä»£é—´ï¼ŒCraigå’ŒBamptonã€Rubinã€Houã€Hintzç­‰äººå…ˆåä»å„ä¸ªä¸åŒä¾§é¢å¯¹å¤å…¸çš„æ¨¡æ€ç»¼åˆæŠ€æœ¯è¿›è¡Œäº†æ”¹è¿›å’Œæ€»ç»“ æˆ‘å›½å­¦è€…ç‹æ–‡äº®ã€ç‹æ°¸å²©ã€å¼ æ±æ¸…ç­‰äººä¹Ÿåšäº†å¤§é‡ç ”ç©¶å·¥ä½œï¼Œä½¿æ¨¡æ€ç»¼åˆæ–¹æ³•å¾—åˆ°äº†è¿›ä¸€æ­¥å‘å±• æ¨¡æ€ç»¼åˆæ³•ä¸»è¦åˆ†ä¸ºå›ºå®šç•Œé¢æ¨¡æ€ç»¼åˆæ³•å’Œè‡ªç”±ç•Œé¢æ¨¡æ€ç»¼åˆæ³•ã€‚ åŠ¨æ€å­ç»“æ„æ–¹æ³•çš„åŸºæœ¬æ€æƒ³æŒ‰ç…§å·¥ç¨‹çš„è§‚ç‚¹æˆ–ç»“æ„çš„å‡ ä½•è½®å»“ï¼Œéµå¾ªæŸäº›åŸåˆ™è¦æ±‚ï¼ŒæŠŠå®Œæ•´çš„å¤§å‹å¤æ‚ç»“æ„äººä¸ºåœ°æŠ½è±¡æˆè‹¥å¹²ä¸ªå­ç»“æ„ã€‚é¦–å…ˆå¯¹è‡ªç”±åº¦å°‘å¾—å¤šçš„å„ä¸ªå­ç»“æ„è¿›è¡ŒåŠ¨æ€åˆ†æï¼Œç„¶åç»ç”±å„ç§æ–¹æ¡ˆï¼ŒæŠŠå®ƒä»¬çš„ä¸»è¦æ¨¡æ€ä¿¡æ¯äºˆä»¥ä¿ç•™ï¼Œä»¥ç»¼åˆæ€»ä½“ç»“æ„çš„åŠ¨æ€ç‰¹æ€§ å†ç°å­ç»“æ„ï¼šäºæ•´ä½“ç»“æ„ä¸­å†ç°ç”±æ¨¡æ€åæ ‡è¿”å›åˆ°ç‰©ç†åæ ‡åçš„å„å­ç»“æ„ï¼Œä»¥å¾—åˆ°å®é™…ç»“æ„çš„ä¸»æŒ¯å‹å’Œä½ç§»åŠåº”åŠ›ç­‰åŠ¨æ€å“åº” å®é™…æ¡ˆä¾‹åˆ†æ æ¯ä¸ªå­ç»“æ„çš„è‡ªç”±åº¦åˆ†ä¸ºå†…éƒ¨è‡ªç”±åº¦${u_I}$å’Œç•Œé¢è‡ªç”±åº¦${u_J}$ï¼š \\left\\{u^{a}\\right\\}=\\left\\{\\begin{array}{l}u_{I}^{a} \\\\u_{J}^{a}\\end{array}\\right\\}, \\quad\\left\\{u^{b}\\right\\}=\\left\\{\\begin{array}{l}u_{I}^{b} \\\\u_{J}^{b}\\end{array}\\right\\}æ ¹æ®ç•Œé¢è¿ç»­æ€§æ¡ä»¶, æœ‰: $\\quad\\left\\{u_{J}^{a}\\right\\}=\\left\\{u_{J}^{b}\\right\\}$ ç”±åŠ›çš„å¯¹æ¥æ¡ä»¶, æœ‰: $\\left\\{f_{J}^{a}\\right\\}+\\left\\{f_{J}^{b}\\right\\}=\\{0\\}$ ç•Œé¢å†…åŠ›åˆåŠ›ä¸º è¿™é‡Œ$\\left\\{u_a \\right\\},\\left\\{u_b \\right\\}$ ä¸ºç‰©ç†åæ ‡ï¼Œå¯ä»¥å†™æˆæ¨¡æ€ä¹˜ä»¥æ¨¡æ€åæ ‡çš„å½¢å¼ï¼Œä½†æ˜¯è¿™é‡Œæ˜¯è¿‘ä¼¼æ±‚è§£ï¼Œ$\\left\\{u_a \\right\\},\\left\\{u_b \\right\\}$ éƒ½æœ‰ä¸€å®šçš„æˆªæ–­ï¼Œä½†æ˜¯æˆªæ–­çš„ä½æ•°ä¸ä¸€å®šç›¸ç­‰ã€‚ ç¬¬ä¸€æ¬¡åæ ‡å˜æ¢ï¼Œå°†ç‰©ç†ç©ºé—´å­ç»“æ„çš„å·¦è¾¹å˜åŒ–ä¸ºæ¨¡æ€åæ ‡ T=T^{a}+T^{b}=\\frac{1}{2}\\left\\{\\dot{u}^{a}\\right\\}^{T}\\left[m^{a}\\right]\\left\\{\\dot{u}^{a}\\right\\}+\\frac{1}{2}\\left\\{\\dot{u}^{b}\\right\\}^{T}\\left[m^{b}\\right]\\left\\{\\dot{u}^{b}\\right\\}\\\\ V=V^{a}+V^{b}=\\frac{1}{2}\\left\\{u^{a}\\right\\}^{T}\\left[k^{a}\\right]\\left\\{u^{a}\\right\\}+\\frac{1}{2}\\left\\{u^{b}\\right\\}^{T}\\left[k^{b}\\right]\\left\\{u^{b}\\right\\}\\\\ T=\\frac{1}{2}\\left\\{\\dot{p}^{a}\\right\\}^{T}[M]^{a}\\left\\{\\dot{p}^{a}\\right\\}+\\frac{1}{2}\\left\\{\\dot{p}^{b}\\right\\}^{T}[M]^{b}\\left\\{\\dot{p}^{b}\\right\\}=\\frac{1}{2}\\{\\dot{p}\\}^{T}[M]\\{\\dot{p}\\}\\\\V=\\frac{1}{2}\\left\\{p^{a}\\right\\}^{T}[K]^{a}\\left\\{p^{a}\\right\\}+\\frac{1}{2}\\left\\{p^{b}\\right\\}^{T}[K]^{b}\\left\\{p^{b}\\right\\}=\\frac{1}{2}\\{p\\}^{T}[K]\\{p\\}\\\\{[M]^{a}=[\\Phi]^{a T}\\left[m^{a}\\right][\\Phi]^{a}, \\quad[M]^{b}=[\\Phi]^{b T}\\left[m^{b}\\right][\\Phi]^{b} }\\\\ [K]^{a}=[\\Phi]^{a T}\\left[k^{a}\\right][\\Phi]^{a}, \\quad[K]^{b}=[\\Phi]^{b T}\\left[k^{b}\\right][\\Phi]^{b}å°†a,bç»„é›†æˆä¸ºä¸€ä¸ªçŸ©é˜µï¼š [M]å’Œ[K]å®é™…ä¸Šæ˜¯ç‹¬ç«‹å¤„ç†å„å­ç»“æ„åå¾—åˆ°çš„ï¼Œè€Œæ¯ä¸ªå­ç»“æ„çš„ç•Œé¢è‡ªç”±åº¦${u_J^a}$ã€${u_J^b}$ä¸æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œå› æ­¤åæ ‡${p}$ä¸­çš„å…ƒç´ ä¸æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œä¸ç‹¬ç«‹åæ ‡çš„ä¸ªæ•°dæ’ç­‰äºç•Œé¢è‡ªç”±åº¦æ•°ï¼Œä¾‹å¦‚ä¸Šå›¾ä¸­dï¼3 åœ¨ç•Œé¢ä¸ŠäºŒè€…æ˜¯é‡åˆçš„ï¼Œå› æ­¤éœ€è¦å°†äºŒè€…é‡å çš„éƒ¨åˆ†å»æ‰ä¸€ä¸ªï¼Œè¿›è€Œä¿è¯ç‹¬ç«‹æ€§æˆç«‹ã€‚ æ–°æ–¹ç¨‹çš„é˜¶æ•°ç­‰äºæ‰€é€‰å–çš„å…¨éƒ¨ä¿ç•™æ¨¡æ€çš„æ€»æ•°å‡å»å¯¹æ¥è‡ªç”±åº¦æ•°ã€‚ ç³»ç»Ÿçš„æ— é˜»å°¼è‡ªç”±æŒ¯åŠ¨çš„è¿åŠ¨æ–¹ç¨‹: \\begin{array}{c}{[M]^{*}\\{\\ddot{q}\\}+[K]^{*}\\{q\\}=\\{0\\}} \\\\{[M]^{*}=[S]^{T}[M][S], \\quad[K]^{*}=[S]^{T}[K][S]}\\end{array}å¯¹äºä¸€èˆ¬çš„åŠ¨åŠ›å­¦åˆ†æé—®é¢˜, ä¹Ÿå¯ä»¥å¾—åˆ°ç¼©èšæ–¹ç¨‹ä¸º: \\begin{array}{l}{[M]^{*}\\{\\ddot{q}\\}+[C]^{*}\\{\\dot{q}\\}+[K]^{*}\\{q\\}=\\{R\\}^{*}} \\\\{[C]^{*}=[S]^{T}[C][S], \\quad\\{R\\}^{*}=[S]^{T}\\{R\\}}\\end{array} ä¸Šè¿°åˆ†æå¾ˆå®¹æ˜“æ¨å¹¿åˆ°å¤šä¸ªå­ç»“æ„ç»„æˆçš„ç»“æ„ç³»ç»Ÿï¼Œå›°éš¾çš„æ˜¯å¦‚ä½•æ„é€ å’Œè·å–å„å­ç»“æ„çš„ä¿ç•™æ¨¡æ€æ¥æ„æˆæå…¹åŸºã€‚å„ç§ä¸åŒçš„è·å–æ–¹æ³•ï¼Œä¾¿å½¢æˆäº†ä¸åŒçš„æ¨¡æ€ç»¼åˆæŠ€æœ¯ã€‚ åœ¨æ¨¡æ€ç»¼åˆæ³•ä¸­ï¼Œå¸¸å¸¸éœ€å–å­ç»“æ„ä½é˜¶ä¸»æŒ¯å‹æ¥ç»„æˆä¸»æŒ¯å‹çŸ©é˜µ[Ğ¤k]ï¼Œä»¥åç§°ä¹‹ä¸ºä¿ç•™ä¸»æŒ¯å‹ï¼Œæ¨¡æ€ç»¼åˆæ³•æ­£æ˜¯å› ä¸ºèˆå»äº†å­ç»“æ„çš„é«˜é˜¶ä¸»æŒ¯å‹è€Œè¾¾åˆ°æ•´ä½“é™é˜¶çš„ç›®çš„ äºæ˜¯è§£å¾—è§£è€¦åçš„è´¨é‡é˜µå’Œåˆšåº¦é˜µï¼š åŸç»“æ„ç¬¬äºŒé˜¶é¢‘ç‡å…·æœ‰ä¸­ç‚¹ä¸åŠ¨çš„æŒ¯å‹ï¼Œå®ƒæ°å¯ç”±å›ºå®šç•Œé¢å­ç»“æ„çš„åŸºæœ¬æŒ¯å‹ç²¾ç¡®åœ°ç»„åˆï¼Œå› æ­¤ç¬¬äºŒé˜¶é¢‘ç‡ä¸ºç²¾ç¡®è§£ã€‚ è‡ªç”±ç•Œé¢æ¨¡æ€ç»¼åˆæ³• 1968å¹´SNHouå’ŒGoldmanå·®ä¸å¤šåŒæ—¶æå‡ºçš„ å°†å­ç»“æ„ä»æ•´ä½“ä¸­åˆ†å‰²å‡ºæ¥åï¼Œè§£å‡ºå…¨éƒ¨çº¦æŸï¼Œè¿™ä¸å›ºå®šç•Œé¢ç»¼åˆæ³•å®Œå…¨ä¸åŒ ä¾¿äºä¸è¯•éªŒç›¸ç»“åˆ è‡ªç”±ç•Œé¢æ¨¡æ€ç»¼åˆæ³•åˆ†ææ–¹æ³•ï¼šå°†æ•´ä½“ç»“æ„åˆ’åˆ†ä¸ºè‡ªç”±ç•Œé¢çš„ä¸€ç³»åˆ—å­ç»“æ„ï¼Œç„¶åå®Œæˆæ¯ä¸€å­ç»“æ„çš„æ¨¡æ€æï¼Œä»¥æå‡ºå„å­ç»“æ„çš„ä¸»æŒ¯å‹ä¿¡æ¯ã€‚ç”¨è‡ªç”±ç•Œé¢ä¸»æŒ¯å‹ä¸­çš„ä¿ç•™ä¸»æŒ¯å‹ä½œä¸ºå„å­ç»“æ„çš„å‡è®¾æŒ¯å‹å‚ä¸ç»¼åˆï¼Œä½†æ˜¯ä¸»æŒ¯å‹æ•°å¿…é¡»å¤§äºç•Œé¢è‡ªç”±åº¦æ•°å›ºå®šç•Œé¢æ¨¡æ€ç»¼åˆæ³•å¾ˆéš¾ä¸è¯•éªŒç›¸ç»“åˆï¼Œå› ä¸ºå›ºå®šå¯¹ç•Œé¢åœ¨è¯•éªŒä¸­å¾ˆéš¾å®ç° ä¸ºä¸ç¬¬äºŒæ¬¡å˜æ¢ä¸­çš„å˜é‡é¡ºåºä¿æŒä¸€è‡´ï¼Œä¿®æ”¹ç¬¬ä¸€æ¬¡å˜æ¢æ‰€å¾—åˆ°äº†è´¨é‡é˜µå’Œåˆšåº¦é˜µçš„é¡ºåº ç¬¬äºŒæ¬¡å˜æ¢åçš„åˆšåº¦é˜µå’Œè´¨é‡é˜µï¼š ç»¼åˆå‡ºçš„åŸºé¢‘æ˜¯ç²¾ç¡®è§£ï¼ŒåŸå› ï¼šåŸç»“æ„çš„ç¬¬ä¸€é˜¶æ¨¡æ€æ°å·§æ˜¯ç”±ä¸¤ä¸ªå­ç»“æ„çš„ç¬¬ä¸€é˜¶æ¨¡æ€ç»„æˆçš„ï¼Œæ˜¯åå¯¹ç§°æ¨¡æ€ å…¸å‹ä¾‹é¢˜ å¯¹äºå­ç»“æ„3ä½œåŒæ ·å¤„ç†ï¼Œå­ç»“æ„3ä¸å­ç»“æ„1ã€2å¯¹æ¥ï¼Œæœ€ç»ˆå¾—åˆ°ç¬¬äºŒæ¬¡å˜æ¢ï¼š å¾—åˆ°ç¬¬äºŒæ¬¡å˜æ¢çŸ©é˜µåï¼Œå¯ä»¥å¾—åˆ°æ•´ä½“ç»“æ„æœ€ç»ˆçš„è´¨é‡é˜µå’Œåˆšåº¦é˜µï¼Œç„¶åå°±å¯è¿›è¡Œå›ºæœ‰é¢‘ç‡å’ŒæŒ¯å‹åˆ†æã€‚ é•¿æ¢ä¸æ¯æ ¹çŸ­æ¢äº’ç›¸è€¦åˆ4ä¸ªè‡ªç”±åº¦ï¼Œæ‰€ä»¥å‡å»8ä¸ªè‡ªç”±åº¦ï¼Œæœ€åå»ºç«‹çš„æœ‰é™å…ƒæ¨¡å‹ä¸º181é˜¶æ–¹ç¨‹ã€‚ é‡‡ç”¨è‡ªç”±ç•Œé¢æ¨¡æ€ç»¼åˆæ³•æ—¶ï¼Œå¯¹æ¯ä¸ªå­ç»“æ„ä¿ç•™1/3å·¦å³æ­£åˆ™ä¸»æ¨¡æ€ï¼Œæœ€åå¾—åˆ°åˆ©ç”¨è‡ªç”±ç•Œé¢æ¨¡æ€ç»¼åˆæ³•æ‰€å»ºç«‹çš„æ¨¡å‹ä¸º63é˜¶æ–¹ç¨‹ï¼Œå¯ä»¥çœ‹å‡ºç»è¿‡å±€éƒ¨é™é˜¶ï¼Œå³æ¨¡æ€ç»¼åˆæ³•å»ºæ¨¡ï¼Œæ¨¡å‹é˜¶æ•°å·²ç»è¾ƒå¤§ç¨‹åº¦çš„é™ä½ã€‚","link":"/2022/03/19/%E6%8C%AF%E5%8A%A8%E5%8A%9B%E5%AD%A6/%E7%AC%AC%E5%85%AD%E7%AB%A0-%E8%BF%9E%E7%BB%AD%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%8C%AF%E5%8A%A8-%E8%BF%91%E4%BC%BC%E6%B1%82%E8%A7%A3%E6%96%B9%E6%B3%95-%E7%AC%AC%E4%B8%89%E9%83%A8%E5%88%86/"},{"title":"ç¬¬å…­ç«  è¿ç»­ç³»ç»Ÿçš„æŒ¯åŠ¨ è¿‘ä¼¼æ±‚è§£æ–¹æ³• ç¬¬äºŒéƒ¨åˆ†","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦ä»‹ç»çš„æ˜¯è¿ç»­ç³»ç»ŸæŒ¯åŠ¨çš„è¿‘ä¼¼æ±‚è§£æ–¹æ³•éƒ¨åˆ†ï¼Œä¸»è¦ä»¥æ†çš„çºµå‘æŒ¯åŠ¨å’Œæ¢çš„å¼¯æ›²æŒ¯åŠ¨ä¸ºä¾‹æ¥ä»‹ç»å…¶ä¸­çš„æ¨¡æ€ç»¼åˆæ³•å’Œæœ‰é™å…ƒæ³•ã€‚ æ¨¡æ€ç»¼åˆæ³• å¯¹äºç”±å¤šä¸ªæ„ä»¶ç»„æˆçš„å¤æ‚ç³»ç»Ÿï¼Œå¾ˆéš¾æ‰¾åˆ°é€‚åˆäºæ•´ä¸ªç³»ç»Ÿçš„å‡è®¾æ¨¡æ€ã€‚ å¯¹ç­–ï¼šå°†å¤æ‚ç»“æ„åˆ†è§£æˆè‹¥å¹²ä¸ªè¾ƒç®€å•çš„å­ç»“æ„ï¼Œå¯¹æ¯ä¸ªå­ç»“æ„é€‰å®šå‡è®¾æ¨¡æ€ï¼Œç„¶åæ ¹æ®å¯¹æ¥é¢ä¸Šçš„ä½ç§»å’ŒåŠ›çš„åè°ƒæ¡ä»¶ï¼Œå°†å„ä¸ªå­ç»“æ„çš„å‡è®¾æŒ¯å‹ç»¼åˆæˆæ€»ä½“ç³»ç»Ÿçš„æŒ¯å‹å‡½æ•°ã€‚ å®é™…å·¥ç¨‹é—®é¢˜ä¸­ä½é˜¶æ¨¡æ€å ä¸»è¦æˆåˆ†ï¼Œå› æ­¤å¯¹æ¯ä¸ªå­ç»“æ„åªéœ€è¦è®¡ç®—å°‘é‡ä½é˜¶æ¨¡æ€ï¼Œç„¶ååŠ ä»¥ç»¼åˆã€‚ å­ç»“æ„çš„åˆ’åˆ†åº”ä½¿å¾—å­ç»“æ„æ˜“äºåˆ†æï¼Œå¹¶ä¸”å¯¹æ¥é¢å°½é‡ç¼©å°ï¼Œä»¥å‡å°‘å­ç»“æ„ä¹‹é—´çš„è€¦åˆã€‚ æ¨¡æ€ç»¼åˆæ³•æ˜¯è®¡ç®—æœºä¸å‘è¾¾æ—¶æœŸä¸»è¦äº§ç‰©ï¼Œå› ä¸ºå½“æ˜¯çš„ç®—ä¾‹å’Œå‚¨å­˜éƒ½è¾¾ä¸åˆ°è¦æ±‚ã€‚ ç”±äº$o_3$ä¸ºäº¤ç•Œé¢ï¼Œå› æ­¤åœ¨$o_3$å¤„çš„åŠ›ã€ä½ç§»å’Œè½¬è§’éƒ½æ˜¯ä¸€æ ·çš„ã€‚ å›ºå®šç•Œé¢æ³•ï¼šå°†ä¸¤å­ç»“æ„çš„ç•Œé¢ $o_3 $åŠ ä»¥å›ºå®šï¼Œä½¿ä¸¤å­ç»“æ„æˆä¸ºä¸¤ç«¯å›ºå®šçš„ç›´æ¢ã€‚ è‡ªç”±ç•Œé¢æ³•ï¼šå°†ä¸¤ä¸ªç»“æ„çœ‹åšå‡ºæˆä¸ºä¸¤ä¸ªæ‚¬è‡‚æ¢ã€‚ æ­¤æ—¶æ»¡è¶³å‡ ä½•è¾¹ç•Œæ¡ä»¶çš„æŒ¯å‹å‡½æ•°ï¼š$\\phi_1(x_i)=\\left(1-\\dfrac {x_i} l\\right)^2\\left(\\dfrac {x_i} l\\right)^{2}$ æ»¡è¶³åœ¨$x=0 /l$æ—¶çš„ä½ç§»å’Œè½¬è§’éƒ½ä¸º0ã€‚ ä½ç§»è¾¹ç•Œæ¡ä»¶æ»¡è¶³ï¼š \\phi_{1}\\left(x_{i}\\right)=\\left(\\frac{x_{i}}{l}\\right)^{2}\\left[1-\\left(\\frac{x_{i}}{l}\\right)\\right]^{2} \\\\x=0 \\text { æˆ– } l: \\quad \\phi_{1}\\left(x_{i}\\right)=0\\\\è§’ä½ç§»è¾¹ç•Œæ¡ä»¶æ»¡è¶³ï¼š \\frac{\\partial \\phi_{1}\\left(x_{i}\\right)}{\\partial x_{i}}=\\left(\\frac{2 x_{i}}{l^{2}}\\right)\\left[1-\\left(\\frac{x_{i}}{l}\\right)\\right]^{2}+\\left(\\frac{x_{i}}{l}\\right)^{2}\\left[1-\\left(\\frac{x_{i}}{l}\\right)\\right]^{2}\\left(-\\frac{2}{l}\\right)\\\\ x=0\\ æˆ–\\ l: \\frac{\\partial \\phi_{1}\\left(x_{i}\\right)}{\\partial x_{i}}=0å½“ç•Œé¢ $o_3 $äº§ç”Ÿè§’ä½ç§»æ—¶ï¼Œå„å­ç»“æ„æ»¡è¶³å‡ ä½•è¾¹ç•Œæ¡ä»¶çš„æ¨¡æ€ç§°ä¸ºçº¦æŸæŒ¯å‹ï¼Œå–ä¸ºï¼š \\phi_{2}\\left(x_{i}\\right)=\\left(\\frac{x_{i}}{l}\\right)^{2}\\left[1-\\left(\\frac{x_{i}}{l}\\right)\\right]æ ¹æ®ç›¸å…³çš„çº¦æŸæ±‚å¯¼å¯å¾—ï¼š \\frac{\\partial \\phi_{2}\\left(x_{i}\\right)}{\\partial x_{i}}=\\left(\\frac{2 x_{i}}{l^{2}}\\right)\\left[1-\\left(\\frac{x_{i}}{l}\\right)\\right]+\\left(\\frac{x_{i}}{l}\\right)^{2}\\left(-\\frac{1}{l}\\right)\\\\ x= l: \\frac{\\partial \\phi_{2}\\left(x_{i}\\right)}{\\partial x_{i}}=-\\frac 1 läºæ˜¯æˆ‘ä»¬æŠŠä»¥ä¸Šçš„ä¸¤ä¸ªæ¨¡æ€ä½œä¸ºåŸºå‡†ï¼š äºæ˜¯è®¡ç®—ç³»ç»Ÿçš„åŠ¨èƒ½å¯å¾—ï¼š T=\\frac{1}{2} \\int_{0}^{l} \\rho A\\left(\\left(\\frac{\\partial y_{1}\\left(x_{1}, t\\right)}{\\partial t}\\right)^{2}+\\left(\\frac{\\partial y_{2}\\left(x_{2}, t\\right)}{\\partial t}\\right)^{2}\\right) d x \\quad \\widetilde{\\boldsymbol{M}}=\\left[\\begin{array}{cc}\\widetilde{\\boldsymbol{M}}_{1} & \\\\ & \\widetilde{\\boldsymbol{M}}_{2}\\end{array}\\right] \\\\ =\\frac{1}{2} \\dot{\\boldsymbol{\\Psi}}_{1}^{T} \\widetilde{\\boldsymbol{M}}_{1} \\dot{\\boldsymbol{\\Psi}}_{1}+\\frac{1}{2} \\dot{\\boldsymbol{\\Psi}}_{2}^{T} \\widetilde{\\boldsymbol{M}}_{2} \\dot{\\boldsymbol{\\Psi}}_{2}=\\frac{1}{2} \\dot{\\boldsymbol{\\Psi}}^{T} \\widetilde{\\boldsymbol{M}} \\dot{\\boldsymbol{\\Psi}} \\quad \\boldsymbol{\\Psi}=\\left(\\begin{array}{llll}\\zeta_{1} & \\zeta_{2} & \\zeta_{3} & \\zeta_{4}\\end{array}\\right)^{T}è®¡ç®—ç³»ç»Ÿçš„åŠ¿èƒ½å¯å¾—ï¼š V=\\frac{1}{2} \\int_{0}^{l} E I\\left(\\left(\\frac{\\partial^{2} y_{1}\\left(x_{1}, t\\right)}{\\partial x_{1}^{2}}\\right)^{2}+\\left(\\frac{\\partial^{2} y_{2}\\left(x_{2}, t\\right)}{\\partial x_{2}^{2}}\\right)^{2}\\right) d x =\\frac{1}{2} \\boldsymbol{\\Psi}^{T} \\widetilde{\\boldsymbol{K}} \\boldsymbol{\\Psi} \\\\ \\boldsymbol{\\Psi}=\\left(\\begin{array}{llll}\\zeta_{1} & \\zeta_{2} & \\zeta_{3} & \\zeta_{4}\\end{array}\\right)^{T} \\quad \\widetilde{\\boldsymbol{K}}=\\left[\\begin{array}{ll}\\widetilde{\\boldsymbol{K}}_{1} & \\\\ & \\widetilde{\\boldsymbol{K}}_{2}\\end{array}\\right] $\\Psi$ åªæ˜¯å•çº¯çš„ç»„åˆæ’åˆ—ï¼Œå…¶ä¸­å‘é‡çš„ç‹¬ç«‹æ€§æ˜¯æœªçŸ¥çš„ï¼Œå…¶æ­£äº¤æ€§æˆ–ç‹¬ç«‹æ€§éœ€è¦è¿›è¡Œåˆ†æå’ŒéªŒè¯ã€‚ ç”±ä¸Šè¿°çš„è®¡ç®—ç»“æœå¯çŸ¥ï¼Œå‘é‡çš„1ã€3ä¸ç‹¬ç«‹ï¼Œ2ã€4ä¸ç‹¬ç«‹ï¼Œä¸‹é¢æ¥åˆ†æä»¥ä¸‹1ã€2çš„ç‹¬ç«‹æ€§ã€‚ ä¸‹é¢æ˜¯$\\xi_1=\\xi_3,\\xi_2=\\xi_4$çš„ç‹¬ç«‹æ€§è¯æ˜ï¼Œä½¿ç”¨äº†ä½ç§»å’Œå¼¯çŸ©çš„åè°ƒæ¡ä»¶ã€‚ \\frac{\\partial y_{1}(l, t)}{\\partial x_{1}}=\\left.\\frac{\\partial \\phi_{1}\\left(x_{1}\\right)}{\\partial x_{1}}\\right|_{x=l} \\zeta_{1}(t)+\\left.\\frac{\\partial \\phi_{2}\\left(x_{1}\\right)}{\\partial x_{1}}\\right|_{x=l} \\zeta_{2}(t)=\\left(-\\frac{1}{l}\\right) \\zeta_{2}(t)\\\\ \\frac{\\partial y_{2}(l, t)}{\\partial x_{2}}=\\left.\\frac{\\partial \\phi_{1}\\left(x_{2}\\right)}{\\partial x_{2}}\\right|_{x=l} \\zeta_{3}(t)+\\left.\\frac{\\partial \\phi_{2}\\left(x_{2}\\right)}{\\partial x_{2}}\\right|_{x=l} \\zeta_{4}(t)=\\left(-\\frac{1}{l}\\right) \\zeta_{4}(t) ç”±å¼¯çŸ©çš„åè°ƒæ¡ä»¶å¯å¾—ï¼š$\\xi_1=\\xi_3$ ç”±ä½ç§»çš„åè°ƒæ¡ä»¶å¯å¾—ï¼š$\\xi_2=\\xi_4$ å…¶ä¸­ï¼Œ$\\beta=\\left[\\begin{array}[c]\\ 1 &amp; 0 \\\\ 0 &amp; 1 \\\\ 1 &amp; 0\\\\ 0 &amp; 1 \\end{array}\\right]$ ï¼Œé€šè¿‡ä¸Šè¿°è½¬æ¢æˆ‘ä»¬å¯ä»¥çš„å¾—å‡ºä¸€ä¸ªç›¸äº’ç‹¬ç«‹çš„æ¨¡æ€åæ ‡ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹å‡º$y_2(x,t)$ çš„æ¨¡æ€åæ ‡å’Œ $y_1$æ˜¯ä¸€æ ·çš„ã€‚ æ€»ç»“ï¼š å°†åŸç³»ç»Ÿåˆç†çš„å·®åˆ†ä¸ºè‹¥å¹²ä¸ªç‹¬ç«‹çš„å­ç»“æ„ï¼› æ ¹æ®å­ç»“æ„ï¼Œåˆ—å‡ºåˆç†çš„è´¨é‡é˜µå’Œåˆšåº¦é˜µï¼Œå¹¶å¾—åˆ°ç³»ç»Ÿçš„åŠ¨åŠ›å­¦æ–¹ç¨‹ï¼› ç„¶åæ ¹æ®åè°ƒæ¡ä»¶ï¼Œå¯¹åŠ¨åŠ›å­¦æ–¹ç¨‹è¿›è¡Œä¿®æ”¹ï¼Œä½¿å¾—æ¨¡æ€åæ ‡å½¼æ­¤ç‹¬ç«‹ï¼Œ å¾—å‡ºæ–°çš„ç³»ç»ŸåŠ¨åŠ›å­¦æ–¹ç¨‹ã€‚ æœ‰é™å…ƒæ³• 20ä¸–çºªäº”å…­åå¹´ä»£å‘å±•èµ·æ¥çš„æ–¹æ³• å¸å–äº†é›†ä¸­è´¨é‡æ³•ä¸å‡è®¾æŒ¯å‹æ³•çš„ä¼˜ç‚¹ å°†å¤æ‚ç»“æ„åˆ†å‰²æˆæœ‰é™ä¸ªå•å…ƒï¼Œå•å…ƒç«¯ç‚¹ç§°ä¸ºèŠ‚ç‚¹ï¼Œå°†èŠ‚ç‚¹çš„ä½ç§»ä½œä¸ºå¹¿ä¹‰åæ ‡ï¼Œå¹¶å°†å•å…ƒçš„è´¨é‡å’Œåˆšåº¦é›†ä¸­åˆ°èŠ‚ç‚¹ä¸Šï¼› æ¯ä¸ªå•å…ƒä½œä¸ºå¼¹æ€§ä½“ï¼Œå•å…ƒå†…å„ç‚¹çš„ä½ç§»ç”¨èŠ‚ç‚¹ä½ç§»çš„æ’å€¼å‡½æ•°è¡¨ç¤º(å•å…ƒçš„å‡è®¾æ¨¡æ€)ï¼› ç”±äºæ˜¯ä»…å¯¹å•å…ƒã€è€Œéæ•´ä¸ªç»“æ„å–å‡è®¾æŒ¯å‹ï¼Œå› æ­¤æŒ¯å‹å‡½æ•°å¯å–å¾—ååˆ†ç®€å•ï¼Œå¹¶ä¸”å¯ä»¤å„ä¸ªå•å…ƒçš„æ¨¡æ€ç›¸åŒ æœ‰é™å…ƒæ³•æ˜¯ç›®å‰å·¥ç¨‹ä¸­è®¡ç®—å¤æ‚ç»“æ„å¹¿æ³›ä½¿ç”¨çš„æ–¹æ³• ä»¥æ†çš„çºµå‘æŒ¯åŠ¨å’Œæ¢çš„å¼¯æ›²æŒ¯åŠ¨ä¸ºä¾‹è¿›è¡Œä»‹ç» æ†çš„çºµå‘æŒ¯åŠ¨å•å…ƒè´¨é‡çŸ©é˜µå’Œåˆšåº¦çŸ©é˜µçš„æ±‚è§£ ä»¥ä¸Šå…¶å®å°±æ˜¯ä¸€ä¸ªæ†çš„ä¸€ä¸ªå¾®å°çš„å•å…ƒä½“ï¼Œå…¶å®æ˜¯å¾ˆå°çš„ã€‚ å¯¹äºxä½ç½®æˆªé¢çš„ä½ç§»$u(x,t)$çš„è¡¨è¾¾å¼æ˜¯ï¼š u(x, t)=\\sum_{i=1}^{2} N_{i}(x) u_{i}(t) \\\\ N_{1}(x)=1-\\frac{x}{l} \\quad N_{2}(x)=\\frac{x}{l} \\\\ u(x, t)=\\boldsymbol{N}^{T} \\boldsymbol{u}_{e} \\\\ u_{e}=[u_1(t),u_2(t)]^T,\\ N=\\left(1-\\dfrac x l,\\dfrac x l \\right)^T $u_e=[u_1(t),u_2(t)]^T$ ä¸ºå¹¿ä¹‰åæ ‡ã€‚ è®¡ç®—å•å…ƒä½“çš„åŠ¨èƒ½å¯å¾—ï¼š T_{e}=\\frac{1}{2} \\int_{0}^{l} \\rho A\\left(\\frac{\\partial u(x, t)}{\\partial t}\\right)^{2} d x=\\frac{1}{2} \\dot{\\boldsymbol{u}}_{e}^{T} \\boldsymbol{m}_{e} \\dot{\\boldsymbol{u}} \\\\ m_{e}=\\int_{0}^{l} \\rho A \\mathbf{N} \\mathbf{N}^{T} d x=\\frac{\\rho A l}{6}\\left(\\begin{array}{ll}2 & 1 \\\\ 1 & 2\\end{array}\\right) \\\\å…¶ä¸­ï¼Œ$m_e$ ä¸ºå•å…ƒè´¨é‡é˜µã€‚ å•å…ƒä½“çš„åŠ¿èƒ½ä¸º: V_{e}=\\frac{1}{2} \\int_{0}^{l} E A\\left(\\frac{\\partial u(x, t)}{\\partial x}\\right)^{2} d x =\\frac{1}{2} \\boldsymbol{u}_{e}^{T} \\boldsymbol{k}_{e} \\boldsymbol{u}_{e} \\quad E: å¼¹æ€§æ¨¡é‡ \\\\ \\boldsymbol{k}_{e}=\\int_{0}^{l} E A \\boldsymbol{N}^{\\prime} \\boldsymbol{N}^{\\prime T} d x=\\frac{E A}{l}\\left(\\begin{array}{cc}1 & -1 \\\\ -1 & 1\\end{array}\\right) \\quad \\quad \\boldsymbol{N}^{\\prime}=\\left(\\begin{array}{ll}-\\dfrac{1}{l} & \\dfrac{1}{l}\\end{array}\\right)^{T} $f(x, t)$å¯¹è™šä½ç§» $\\delta u(x, t) $ çš„è™šåŠŸï¼Œç”±$u(x, t)=\\boldsymbol{N}^{T}\\boldsymbol{u}_{e}$ å¯å¾—ï¼š \\delta W=\\frac{1}{2} \\int_{0}^{l} f(x, t) \\delta u(x, t) d x=\\boldsymbol{F}_{e}^{T} \\delta \\boldsymbol{u}_{e}å…¶ä¸­ï¼Œ$\\boldsymbol{F}_{e} $ä¸èŠ‚ç‚¹åæ ‡ $\\boldsymbol{u}_{e} $ å¯¹åº”çš„å•å…ƒå¹¿ä¹‰åŠ›åˆ—é˜µä¸ºï¼š$\\boldsymbol{F}_{e}=\\int_{0}^{l} f(x, t) \\boldsymbol{N} d x$ å¦‚æœè½´å‘åŠ›ä¸ºå¸¸å€¼åŠ›ï¼Œå¯å¾—ï¼š$\\boldsymbol{F}_{e} =\\dfrac {fl} 2 (1 \\quad 1)^T$ å…¨ç³»ç»Ÿçš„åŠ¨åŠ›å­¦æ–¹ç¨‹ å•å…ƒè´¨é‡çŸ©é˜µï¼š $\\boldsymbol{m}_{e 1}=\\boldsymbol{m}_{e 2}=\\frac{\\rho A l}{3}\\left(\\begin{array}{ll}2 &amp; 1 \\\\ 1 &amp; 2\\end{array}\\right) \\quad \\boldsymbol{m}_{e 3}=\\frac{\\rho A l}{6}\\left(\\begin{array}{ll}2 &amp; 1 \\\\ 1 &amp; 2\\end{array}\\right) $ å•å…ƒåˆšåº¦çŸ©é˜µï¼š$\\boldsymbol{k}_{e 1}=\\boldsymbol{k}_{e 2}=\\frac{2 E A}{l}\\left(\\begin{array}{cc}1 &amp; -1 \\\\ -1 &amp; 1\\end{array}\\right) \\quad \\boldsymbol{k}_{e 3}=\\frac{E A}{l}\\left(\\begin{array}{cc}1 &amp; -1 \\\\ -1 &amp; 1\\end{array}\\right) $ è¿™é‡Œä¿è¯æˆ‘ä»¬çš„$q_1,q_2,q_3$æ˜¯ç›¸äº’ç‹¬ç«‹ã€‚ å…¨ç³»ç»Ÿçš„åŠ¨èƒ½ï¼š T=\\sum_{i=1}^{3} T_{e i}=\\frac{1}{2} \\sum_{i=1}^{3} \\dot{\\boldsymbol{u}}_{e i}^{T} \\boldsymbol{m}_{e i} \\dot{\\boldsymbol{u}}_{e i}=\\frac{1}{2} \\dot{\\boldsymbol{U}}^{T} \\widetilde{\\boldsymbol{M}} \\dot{\\boldsymbol{U}}=\\frac{1}{2} \\dot{\\boldsymbol{q}}^{T} \\boldsymbol{M} \\dot{\\boldsymbol{q}}\\\\ T_{e}=\\frac{1}{2} \\dot{\\boldsymbol{u}}_{e}^{T} \\boldsymbol{m}_{e} \\dot{\\boldsymbol{u}}_{e} \\quad \\boldsymbol{U}=\\boldsymbol{\\beta} \\boldsymbol{q}å…¶ä¸­ï¼Œ$ \\tilde{\\boldsymbol{M}}=\\left(\\begin{array}{ccc}\\boldsymbol{m}_{e 1} &amp; \\boldsymbol{0} &amp; \\boldsymbol{0} \\\\ \\boldsymbol{0} &amp; \\boldsymbol{m}_{e 2} &amp; 0 \\\\ \\boldsymbol{0} &amp; \\boldsymbol{0} &amp; \\boldsymbol{m}_{e 3}\\end{array}\\right) \\in R^{6 \\times 6} $ï¼Œ$\\boldsymbol{M}=\\boldsymbol{\\beta}^{T} \\tilde{\\boldsymbol{M}} \\boldsymbol{\\beta} \\in R^{3 \\times 3} $ Mä¸ºè¿›è¡Œåæ ‡ç‹¬ç«‹æ­£äº¤åŒ–ä¹‹åçš„å½¢å¼ã€‚ è´¨é‡çŸ©é˜µ M ä¹Ÿå¯ç›´æ¥åˆ©ç”¨å•å…ƒè´¨é‡çŸ©é˜µç»„é›†è€Œæˆ (å åŠ æ³•)ï¼šå°†å•å…ƒè´¨é‡çŸ©é˜µ $m_{e1}$ã€$m_{e2}$ å’Œ $m_{e3}$ çš„å„ä¸ªå…ƒç´ ç»Ÿä¸€æŒ‰ $q_i(i=1,2,3)$ çš„ä¸‹æ ‡é‡æ–°ç¼–å·ï¼Œæ”¾å…¥M ä¸­ä¸ç¼–å·ç›¸å¯¹åº”çš„è¡Œå’Œåˆ—ä¸­ $q_{1}=u_{2}=u_{3}, \\quad q_{2}=u_{4}=u_{5}, \\quad q_{3}=u_{6}$ è¿™é‡Œ$u_1=0$ï¼Œå› æ­¤å¯¹åº”çš„éƒ½æ˜¯0 è¿™é‡Œå…¶å®å°±æ˜¯å°†åŸæ¥çš„å•å…ƒä½“(i=1,2,3,4,5,6)çš„è´¨é‡é˜µä½¿ç”¨å¹¿ä¹‰åæ ‡(1,2,3)é‡æ–°è¿›è¡Œç¼–å·ï¼Œç›¸åŒçš„åœ°æ–¹ç›´æ¥ç›¸åŠ ã€‚ å’Œå¹¿ä¹‰åæ ‡ $q=(q_1\\quad q_2 \\quad q_3)^T$ ç›¸å¯¹åº”çš„è´¨é‡çŸ©é˜µï¼š \\boldsymbol{M}=\\left(\\begin{array}{lll}m_{11} & m_{12} & m_{13} \\\\m_{21} & m_{22} & m_{23} \\\\m_{31} & m_{32} & m_{33}\\end{array}\\right)=\\frac{\\rho A l}{6}\\left(\\begin{array}{ccc}{4+4} & 2 & 0 \\\\2 & 4+2 & 1 \\\\ 0 & 1 & 2\\end{array}\\right)å…¨ç³»ç»Ÿçš„åŠ¿èƒ½ï¼š V=\\sum_{i=1}^{3} V_{e i}=\\frac{1}{2} \\sum_{i=1}^{3} \\boldsymbol{u}_{e i}^{T} \\boldsymbol{k}_{e i} \\boldsymbol{u}_{e i}=\\frac{1}{2} \\dot{\\boldsymbol{U}}^{T} \\widetilde{\\boldsymbol{K}} \\dot{\\boldsymbol{U}}=\\frac{1}{2} \\boldsymbol{q}^{T} \\boldsymbol{K} \\boldsymbol{q}\\\\ V_{e}=\\frac{1}{2} \\boldsymbol{u}_{e}^{T} \\boldsymbol{k}_{e} \\boldsymbol{u}_{e} \\quad \\boldsymbol{U}=\\boldsymbol{\\beta} \\boldsymbol{q} \\quad \\boldsymbol{K}=\\boldsymbol{\\beta}^{T} \\widetilde{\\boldsymbol{K}} \\boldsymbol{\\beta} \\\\ \\widetilde{\\boldsymbol{K}}=\\left(\\begin{array}{ccc}\\boldsymbol{k}_{e 1} & \\boldsymbol{0} & 0 \\\\ \\boldsymbol{0} & \\boldsymbol{k}_{e 2} & \\boldsymbol{0} \\\\ 0 & \\boldsymbol{0} & \\boldsymbol{k}_{e 3}\\end{array}\\right) \\in R^{6 \\times 6}å…¶ä¸­ï¼Œ$\\boldsymbol{\\beta}=\\left(\\begin{array}{cccccc}0 &amp; 1 &amp; 1 &amp; 0 &amp; 0 &amp; 0 \\\\ 0 &amp; 0 &amp; 0 &amp; 1 &amp; 1 &amp; 0 \\\\ 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1\\end{array}\\right)^{T} $ ä¹Ÿå¯ä»¥ä½¿ç”¨ç»„é›†æ–¹æ³•å¾—ï¼š$\\boldsymbol{K}=\\frac{E A}{l}\\left(\\begin{array}{ccc}2+2 &amp; -2 &amp; 0 \\\\ -2 &amp; 2+1 &amp; -1 \\\\ 0 &amp; -1 &amp; 1\\end{array}\\right)$ å½“æ†ä¸Šæœ‰å¸¸å€¼è½´å‘åŠ›ä½œç”¨æ—¶ï¼Œä¸‰æ ¹æ†çš„å¹¿ä¹‰å¤–åŠ›é˜µä¸ºï¼š \\boldsymbol{F}_{e 1}=\\boldsymbol{F}_{e 2}=\\boldsymbol{F}_{e 3}=\\frac{f l}{2}\\left(\\begin{array}{ll}1 & 1\\end{array}\\right)^{T}ç³»ç»Ÿçš„å¹¿ä¹‰åŠ›é˜µï¼š$\\boldsymbol{F}=\\left(\\begin{array}{lll}\\boldsymbol{F}_{e 1}^{T} \\quad \\boldsymbol{F}_{e 2}^{T} \\quad \\boldsymbol{F}_{e 3}^{T}\\end{array}\\right)^{T} \\in R^{6 \\times 1}$ ä½œç”¨åŠ›çš„æ€»è™šåŠŸï¼š$\\delta W=\\boldsymbol{F}^{T} \\delta \\boldsymbol{U}=\\boldsymbol{Q}^{T} \\delta \\boldsymbol{q} \\quad \\boldsymbol{U}=\\boldsymbol{\\beta} \\boldsymbol{q}$ è¿™é‡Œ$Q=\\beta^TF$ å’Œå¹¿ä¹‰çš„åæ ‡$q$ å¯¹åº”çš„å¹¿ä¹‰åŠ›é˜µ (å åŠ æ³•)ä¹Ÿå¯å°†$F_{e1}$ã€$F_{e2}$å’Œ $F_{e3}$ çš„å„ä¸ªå…ƒç´ ç»Ÿä¸€æŒ‰ $q_i (i=1,2,3)$ çš„ä¸‹æ ‡é‡æ–°ç¼–å·ï¼Œæ”¾å…¥ Q ä¸­ä¸ç¼–å·ç›¸å¯¹åº”çš„è¡Œå’Œåˆ—ä¸­ï¼š \\boldsymbol{Q}=\\frac{f l}{2}(1+1 \\quad 1 \\quad 1)^{T}=\\frac{f l}{2}\\left(\\begin{array}{lll}2 & 1 & 1\\end{array}\\right)^{T}ç”¨å¹¿ä¹‰åæ ‡é˜µ q è¡¨ç¤ºçš„å¹¿ä¹‰è´¨é‡é˜µã€å¹¿ä¹‰åˆšåº¦é˜µå’Œå¹¿ä¹‰å¤–åŠ›é˜µï¼š ç”¨å¹¿ä¹‰åæ ‡é˜µ q è¡¨ç¤ºçš„å…¨ç³»ç»Ÿçš„åŠ¨åŠ›å­¦æ–¹ç¨‹ï¼š \\boldsymbol{M} \\ddot{\\boldsymbol{q}}+\\boldsymbol{K} \\boldsymbol{q}=\\boldsymbol{Q}\\\\ \\frac{\\rho A l}{6}\\left(\\begin{array}{ccc}8 & 2 & 0 \\\\ 2 & 6 & 1 \\\\ 0 & 1 & 2\\end{array}\\right)\\left(\\begin{array}{l}\\ddot{q}_{1} \\\\ \\ddot{q}_{2} \\\\ \\ddot{q}_{3}\\end{array}\\right)+\\frac{E A}{l}\\left(\\begin{array}{ccc}4 & -2 & 0 \\\\ -2 & 3 & -1 \\\\ 0 & -1 & 1\\end{array}\\right)\\left(\\begin{array}{l}q_{1} \\\\ q_{2} \\\\ q_{3}\\end{array}\\right)=\\frac{f l}{2}\\left(\\begin{array}{l}2 \\\\ 1 \\\\ 1\\end{array}\\right) å…¶å®æœ‰é™å…ƒæ–¹æ³•çš„åŸºæœ¬æ­¥éª¤å’Œæ¨¡æ€å åŠ æ³•åŸºæœ¬ç±»ä¼¼ï¼š é¦–å…ˆï¼Œåˆ’åˆ†ä¸ºæœ‰é™ä¸ªå•å…ƒï¼›ä¹‹åï¼Œé‡‡ç”¨èƒ½é‡æ³•æ¥å¾—åˆ°åˆšåº¦é˜µå’Œè´¨é‡é˜µï¼›æœ€åï¼Œä¸€èŠ‚ç‚¹çš„åæ ‡ä¸ºç³»ç»Ÿçš„å¹¿ä¹‰åæ ‡ï¼Œæ¥å»ºç«‹ç³»ç»Ÿçš„åŠ¨åŠ›å­¦æ–¹ç¨‹ã€‚ æœ‰é™å…ƒæ–¹æ³•å»ºç«‹çš„æ¨¡å‹æ˜¯æœ‰é™è‡ªç”±åº¦æ¨¡å‹ï¼Œå¹¿ä¹‰åæ ‡æ˜¯èŠ‚ç‚¹çš„ä½ç§»ï¼Œæ˜¯åœ¨ç‰©ç†ç©ºé—´ä¸Šçš„ï¼Œä½†æ˜¯æ¨¡æ€ç»¼åˆæ³•å»ºç«‹çš„åŠ¨åŠ›å­¦æ–¹ç¨‹çš„åæ ‡æ˜¯æ¨¡æ€åæ ‡ï¼Œåœ¨æ¨¡æ€ç©ºé—´ä¸Šçš„ã€‚ æ¢çš„å¼¯æ›²æŒ¯åŠ¨å•å…ƒè´¨é‡çŸ©é˜µå’Œåˆšåº¦çŸ©é˜µçš„æ±‚è§£ é€‰ä¸ºå‡è´¨æ¢åœ¨ç«¯ç‚¹å¸¸å€¼ä½ç§»ä½œç”¨ä¸‹çš„é™æŒ åº¦æ›²çº¿(å¤šé¡¹å¼å‡½æ•°)ï¼š N_{i}(x)=a_{0}+a_{1} x+a_{2} x^{2}+a_{3} x^{3}, \\quad(i=1,2,3,4) $N_{3}(0)=N_{3}^{\\prime}(0)=0,N_{3}(l)=1,N_3^{\\prime}(l)=1$ $N_{4}(0)=N_{4}^{\\prime}(l)=N_{4}(0)=0, \\quad N_{4}^{\\prime}(l)=1$ ä¸Šè¿°è¾¹ç•Œæ¡ä»¶çš„æ„ä¹‰å°±æ˜¯è·Ÿ$u_i(t)$æ˜¯å¯¹åº”çš„ï¼Œæ¯”å¦‚$N_1(0)=1$ æ˜¯ç”±äº$u_1(t)$ å¯¹åº”çš„æ˜¯x=0å¤„çš„ä½ç§»ï¼Œ$N_2(0)^{\\prime}=0$ æ˜¯ç”±äº$u_2(t)$ å¯¹åº”çš„æ˜¯x=0å¤„çš„è½¬è§’ï¼Œä¾æ¬¡ç±»æ¨ã€‚ å½¢å‡½æ•°åˆ—é˜µï¼š$\\boldsymbol{N}=\\left[\\begin{array}{llll}N_{1}(x) &amp; N_{2}(x) &amp; N_{3}(x) &amp; N_{4}(x)\\end{array}\\right]^{T}$ ä»£å…¥$y(x, t)=\\boldsymbol{N}^{T} \\boldsymbol{u}_{e}$ å¯å¾—å•å…ƒçš„åŠ¨èƒ½ä¸ºï¼š T_{e}=\\dfrac{1}{2} \\int_{0}^{l} \\rho A\\left(\\dfrac{\\partial y(x, t)}{\\partial t}\\right)^{2} d x=\\dfrac{1}{2} \\dot{\\boldsymbol{u}}_{e}^{T} \\boldsymbol{m}_{e} \\dot{\\boldsymbol{u}}_{e}å…¶ä¸­ï¼Œ$\\rho$ä»£è¡¨ææ–™å¯†åº¦ï¼ŒAä»£è¡¨æˆªé¢ç§¯ã€‚ åŒç†ä»£å…¥å¯å¾—å•å…ƒçš„åŠ¿èƒ½ï¼š V_{e}=\\frac{1}{2} \\int_{0}^{l} E I\\left(\\frac{\\partial y^{2}(x, t)}{\\partial x^{2}}\\right)^{2} d x=\\frac{1}{2} \\boldsymbol{u}_{e}^{T} \\boldsymbol{k}_{e} \\boldsymbol{u}_{e} \\quad E I:æŠ—å¼¯åˆšåº¦ å‡è®¾æ¢ä¸Šæœ‰åˆ†å¸ƒå¤–åŠ›ï¼Œ$f(x, t)$å¯¹è™šä½ç§» $\\delta u(x, t) $ çš„è™šåŠŸï¼Œç”±$y(x, t)=\\boldsymbol{N}^{T}\\boldsymbol{u}_{e}$ å¯å¾—ï¼š \\delta W=\\frac{1}{2} \\int_{0}^{l} f(x, t) \\delta y(x, t) d x=\\boldsymbol{F}_{e}^{T} \\delta \\boldsymbol{u}_{e}å…¶ä¸­ï¼Œ$\\boldsymbol{F}_{e} $ä¸èŠ‚ç‚¹åæ ‡ $\\boldsymbol{u}_{e} $ å¯¹åº”çš„å•å…ƒå¹¿ä¹‰åŠ›åˆ—é˜µä¸ºï¼š$\\boldsymbol{F}_{e}=\\int_{0}^{l} f(x, t) \\boldsymbol{N} d x$ å¯¹äºå‡å¸ƒè½½è·ï¼Œ$f$ä¸ºå¸¸æ•°ï¼Œå¯å¾—ï¼š$\\boldsymbol{F}_{e} =\\dfrac {fl} 2 (1 \\quad \\dfrac 1 6 \\quad 1 \\quad -\\dfrac 1 6)^T$ å…¨ç³»ç»Ÿçš„åŠ¨åŠ›å­¦æ–¹ç¨‹ä»¥ä¸Šå¯¹å•å…ƒæ‰€ä½œçš„åˆ†æå¿…é¡»è¿›è¡Œç»¼åˆï¼Œä»¥æ‰©å±•åˆ°æ€»ä½“ç»“æ„ T=\\frac{1}{2} \\dot{\\boldsymbol{q}}^{T} \\boldsymbol{M} \\dot{\\boldsymbol{q}} \\quad \\boldsymbol{M}=\\boldsymbol{\\beta}^{T} \\tilde{\\boldsymbol{M}} \\boldsymbol{\\beta} \\\\\\boldsymbol{\\beta}=\\left(\\begin{array}{llllllll}0 & 0 & 1 & 0 & 1 & 0 & 0 & 0 \\\\ 0 & 0 & 0 & 1 & 0 & 1 & 0 & 0 \\\\ 0 & 0 & 0 & 0 & 0 & 1 & 0 & 0 \\\\ 0 & 0 & 0 & 0 & 0 & 0 & 0 & 1\\end{array}\\right)^{T} \\quad \\widetilde{\\boldsymbol{M}}=\\left(\\begin{array}{cc}\\boldsymbol{m}_{e 1} & \\boldsymbol{0} \\\\ 0 & \\boldsymbol{m}_{e 2}\\end{array}\\right)å› æ­¤, æœ‰ å‡è®¾æ¢ä¸Šæœ‰ç®€è°å˜åŒ–çš„å‡å¸ƒè½½è· $f(x,t)=f_0\\sin\\omega t$ \\boldsymbol{F}_{e 1}^{T}=\\boldsymbol{F}_{e 2}^{T}=(1 \\quad \\dfrac 1 6 \\quad 1 \\quad -\\dfrac 1 6)^T\\dfrac {f_0l} 2\\sin\\omega tç³»ç»Ÿçš„å¹¿ä¹‰åŠ›é˜µï¼š$\\boldsymbol{F}=\\left(\\begin{array}{lll}\\boldsymbol{F}_{e 1}^{T} \\quad \\boldsymbol{F}_{e 2}^{T} \\end{array}\\right)^{T} \\in R^{4 \\times 1}$ ä¸èŠ‚ç‚¹åæ ‡Uå¯¹åº”çš„å¹¿ä¹‰åŠ›é˜µ $\\boldsymbol{U}=\\left(\\begin{array}{llll}u_{1} &amp; u_{2} &amp; \\cdots &amp; u_{8}\\end{array}\\right)^{T}_{8 \\times1}$ ä½œç”¨åŠ›çš„æ€»è™šåŠŸï¼š$\\delta W=\\boldsymbol{F}^{T} \\delta \\boldsymbol{U}=\\boldsymbol{Q}^{T} \\delta \\boldsymbol{q}$ è¿™é‡Œ$Q=\\beta^TF$ å’Œå¹¿ä¹‰çš„åæ ‡$q$ å¯¹åº”çš„å¹¿ä¹‰åŠ›é˜µ (å åŠ æ³•)ä¹Ÿå¯å°†$F_{e1}$ã€$F_{e2}$å’Œ $F_{e3}$ çš„å„ä¸ªå…ƒç´ ç»Ÿä¸€æŒ‰ $q_i (i=1,2,3)$ çš„ä¸‹æ ‡é‡æ–°ç¼–å·ï¼Œæ”¾å…¥ Q ä¸­ä¸ç¼–å·ç›¸å¯¹åº”çš„è¡Œå’Œåˆ—ä¸­ï¼š \\boldsymbol{Q}=(1 \\quad 0 \\quad \\dfrac1 2\\quad -\\dfrac l {12})^{T}\\dfrac {f_0l} 2\\sin\\omega tç”¨å¹¿ä¹‰åæ ‡é˜µ q è¡¨ç¤ºçš„å¹¿ä¹‰è´¨é‡é˜µã€å¹¿ä¹‰åˆšåº¦é˜µå’Œå¹¿ä¹‰å¤–åŠ›é˜µï¼š ç”¨å¹¿ä¹‰åæ ‡é˜µ q è¡¨ç¤ºçš„å…¨ç³»ç»Ÿçš„åŠ¨åŠ›å­¦æ–¹ç¨‹ï¼š$\\boldsymbol{M} \\ddot{\\boldsymbol{q}}+\\boldsymbol{K} \\boldsymbol{q}=\\boldsymbol{Q}$ æœ‰é™å…ƒæ–¹æ³•çš„ä¸»è¦æ€æƒ³ï¼šæ˜¯å°†ç»“æ„åˆ’åˆ†ä¸ºéå¸¸å¤šçš„æœ‰é™å•å…ƒï¼Œæ¯ä¸ªå•å…ƒéƒ½æ˜¯å¼¹æ€§ä½“ï¼Œå°†å•å…ƒçš„è´¨é‡å’Œåˆšåº¦éƒ½å‘èŠ‚ç‚¹è¿›è¡Œé›†ä¸­ï¼Œæœ€åä»¥æ‰€æœ‰èŠ‚ç‚¹çš„ä½ç§»ä¸ºå¹¿ä¹‰åæ ‡ï¼Œæ¥å»ºç«‹ä¸€ä¸ªæœ‰é™å¤šè‡ªç”±åº¦ç³»ç»Ÿçš„åŠ¨åŠ›å­¦æ–¹ç¨‹ã€‚","link":"/2022/03/19/%E6%8C%AF%E5%8A%A8%E5%8A%9B%E5%AD%A6/%E7%AC%AC%E5%85%AD%E7%AB%A0-%E8%BF%9E%E7%BB%AD%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%8C%AF%E5%8A%A8-%E8%BF%91%E4%BC%BC%E6%B1%82%E8%A7%A3%E6%96%B9%E6%B3%95-%E7%AC%AC%E4%BA%8C%E9%83%A8%E5%88%86/"},{"title":"ç¬¬å››ç«  å¤šè‡ªç”±åº¦æŒ¯åŠ¨-å¤šè‡ªç”±åº¦ç³»ç»Ÿçš„åŠ¨åŠ›å­¦æ–¹ç¨‹ ç¬¬ä¸€éƒ¨åˆ†","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦ä»‹ç»çš„æ˜¯å¤šè‡ªç”±æŒ¯åŠ¨ç³»ç»Ÿä¸­åŠ¨åŠ›å­¦æ–¹ç¨‹çš„ç¬¬ä¸€éƒ¨åˆ†ï¼Œä¸»è¦æ˜¯ä»‹ç»ä½œç”¨åŠ›æ–¹ç¨‹ã€åˆšåº¦çŸ©é˜µä¸è´¨é‡çŸ©é˜µä»¥åŠç›¸å…³çš„ç³»ç»Ÿï¼Œç”±äºå¤šè‡ªç”±åº¦ç³»ç»Ÿè¾ƒä¸ºå¤æ‚ï¼Œå› æ­¤åç»­çš„åˆ†èŠ‚ä¸æ¯”è¾ƒçš„ç»†è‡´ã€‚ å»ºæ¨¡æ–¹æ³•1ï¼šå°†è½¦ã€äººç­‰å…¨éƒ¨ä½œä¸ºä¸€ä¸ªè´¨é‡è€ƒè™‘ï¼Œå¹¶è€ƒè™‘å¼¹æ€§å’Œé˜»å°¼ ä¼˜ç‚¹ï¼šæ¨¡å‹ç®€å• ç¼ºç‚¹ï¼šæ¨¡å‹ç²—ç³™ï¼Œæ²¡æœ‰è€ƒè™‘äººä¸è½¦ã€è½¦ä¸è½¦è½®ã€è½¦è½®ä¸åœ°é¢ä¹‹é—´çš„ç›¸äº’å½±å“ å»ºæ¨¡æ–¹æ³•2ï¼šè½¦ã€äººçš„è´¨é‡åˆ†åˆ«è€ƒè™‘ï¼Œå¹¶è€ƒè™‘å„è‡ªçš„å¼¹æ€§å’Œé˜»å°¼ ä¼˜ç‚¹ï¼šæ¨¡å‹è¾ƒä¸ºç²¾ç¡®ï¼Œè€ƒè™‘äº†äººä¸è½¦ä¹‹é—´çš„è€¦åˆ ç¼ºç‚¹ï¼šæ²¡æœ‰è€ƒè™‘è½¦ä¸è½¦è½®ã€è½¦è½®ä¸åœ°é¢ä¹‹é—´çš„ç›¸äº’å½±å“ å»ºæ¨¡æ–¹æ³•3ï¼šè½¦ã€äººã€è½¦è½®çš„è´¨é‡åˆ†åˆ«è€ƒè™‘ï¼Œå¹¶è€ƒè™‘å„è‡ªçš„å¼¹æ€§å’Œé˜»å°¼ ä¼˜ç‚¹ï¼šåˆ†åˆ«è€ƒè™‘äº†äººä¸è½¦ã€è½¦ä¸è½¦è½®ã€è½¦è½®ä¸åœ°é¢ä¹‹é—´çš„ç›¸äº’è€¦åˆï¼Œæ¨¡å‹è¾ƒä¸ºç²¾ç¡® é—®é¢˜ï¼šå¦‚ä½•æè¿°å„ä¸ªè´¨é‡ä¹‹é—´çš„ç›¸äº’è€¦åˆæ•ˆåº”ï¼Ÿ å¯¹äºèˆªå¤©é¢†åŸŸçš„ç«ç®­ï¼Œè¿‘ä¼¼å¯ä»¥å¯ä»¥çœ‹ä½œæ˜¯åˆšä½“ï¼Œå› æ­¤é¢‘ç‡æ–¹ç¨‹æœ‰é›¶æ ¹ï¼Œå¯¹äºé£èˆ¹è¿™æ ·æ¯”è¾ƒæŸ”æ€§çš„å¯ä»¥çœ‹ä½œé¢‘ç‡æ–¹ç¨‹æœ‰é‡æ ¹ã€‚ ä½œç”¨åŠ›æ–¹ç¨‹å¹³åŠ¨çš„æ¡ˆä¾‹ä¾‹1ï¼šåŒè´¨é‡å¼¹ç°§ç³»ç»Ÿï¼Œä¸¤è´¨é‡åˆ†åˆ«å—åˆ°æ¿€æŒ¯åŠ›ä¸è®¡æ‘©æ“¦å’Œå…¶ä»–å½¢å¼çš„é˜»å°¼ï¼Œè¯•å»ºç«‹ç³»ç»Ÿçš„è¿åŠ¨å¾®åˆ†æ–¹ç¨‹ è§£ï¼šåæ ‡åŸç‚¹ï¼šå– $m_1ã€m_2$ çš„é™å¹³è¡¡ä½ç½®è®¾æŸä¸€ç¬æ—¶ï¼š$m_1ã€m_2$ä¸Šåˆ†åˆ«æœ‰ä½ç§» $x_1 ã€x_2$ , åŠ é€Ÿåº¦$\\ddot x_1ã€ ã€\\ddot x_2$ å—åŠ›åˆ†æï¼š å»ºç«‹åŠ¨åŠ›å­¦æ–¹ç¨‹ï¼š(å…¶ä¸»è¦çš„é‡çº²ä¸ºåŠ›é‡çº²) \\left\\{\\begin{array}{l}m_{1} \\ddot{x}_{1}(t)+k_{1} x_{1}(t)+k_{2}\\left(x_{1}(t)-x_{2}(t)\\right)=P_{1}(t) \\\\ m_{2} \\ddot{x}_{2}(t)-k_{2}\\left(x_{1}(t)-x_{2}(t)\\right)+k_{3} x_{3}(t)=P_{2}(t)\\end{array}\\right. å°†å…¶å‡†åŒ–ä¸ºçŸ©é˜µå½¢å¼å¯å¾—ï¼š \\left[\\begin{array}{cc}m_{1} & 0 \\\\ 0 & m_{2}\\end{array}\\right]\\left[\\begin{array}{l}\\ddot{x}_{1}(t) \\\\ \\ddot{x}_{2}(t)\\end{array}\\right]+\\left[\\begin{array}{cc}k_{1}+k_{2} & -k_{2} \\\\ -k_{2} & k_{2}+k_{3}\\end{array}\\right]\\left[\\begin{array}{l}x_{1}(t) \\\\ x_{2}(t)\\end{array}\\right]=\\left[\\begin{array}{c}P_{1}(t) \\\\ P_{2}(t)\\end{array}\\right]å…¶ä¸­çš„$-k_2$ ä¸ºåæ ‡é—´çš„è€¦åˆé¡¹ï¼Œå¦‚æœæ²¡æœ‰æ­¤é¡¹å°±å˜æˆäº†ä¸€ä¸ªå•è‡ªç”±åº¦çš„ç³»ç»Ÿäº†ã€‚ è½¬åŠ¨çš„æ¡ˆä¾‹ä¾‹2ï¼šè½¬åŠ¨è¿åŠ¨ï¼Œå¤–åŠ›çŸ©ä¸º$M_1(t)\\ M_2(t)$ ï¼Œå…¶è½¬åŠ¨æƒ¯é‡ä¸º$I_1ã€I_2$ï¼Œè½´çš„ä¸‰æ®µçš„æ‰­è½¬åˆšåº¦ä¸º $k_{\\theta_1}ã€k_{\\theta_2}ã€k_{\\theta_3}$ ï¼Œå»ºç«‹ç³»ç»Ÿçš„åŠ¨åŠ›å­¦å¾®åˆ†æ–¹ç¨‹ã€‚ é¦–å…ˆï¼Œå»ºç«‹åæ ‡ï¼Œè®¾åœ¨æŸä¸ªç¬æ—¶çš„è§’ä½ç§»ä¸º$\\theta_1\\ \\theta_2$, å¯¹åº”çš„è§’åŠ é€Ÿåº¦ä¸º $\\ddot\\theta_1\\ \\ddot\\theta_2$ ï¼Œä¹‹åå—åŠ›åˆ†æå¯å¾—ï¼š äºæ˜¯å¯å¾—ï¼š \\left\\{\\begin{array}{l}I_{1} \\ddot{\\theta}_{1}(t)+k_{\\theta 1} \\theta_{1}(t)+k_{\\theta 2}\\left[\\theta_{1}(t)-\\theta_{2}(t)\\right]=M_{1}(t) \\\\ I_{2} \\ddot{\\theta}_{2}(t)+k_{\\theta 2}\\left[\\theta_{2}(t)-\\theta_{1}(t)\\right]+k_{3} \\theta_{3}(t)=M_{2}(t)\\end{array}\\right.æ”¹å†™æˆä¸ºçŸ©é˜µå½¢å¼å¯å¾—ï¼š \\left[\\begin{array}{cc}I_{1} & 0 \\\\ 0 & I_{2}\\end{array}\\right]\\left[\\begin{array}{c}\\ddot{\\theta}_{1}(t) \\\\ \\ddot{\\theta}_{2}(t)\\end{array}\\right]+\\left[\\begin{array}{cc}k_{\\theta 1}+k_{\\theta 2} & -k_{\\theta 2} \\\\ -k_{\\theta 2} & k_{\\theta 2}+k_{\\theta 3}\\end{array}\\right]\\left[\\begin{array}{l}\\theta_{1}(t) \\\\ \\theta_{2}(t)\\end{array}\\right]=\\left[\\begin{array}{c}M_{1}(t) \\\\ M_{2}(t)\\end{array}\\right] å¤šè‡ªç”±åº¦ç³»ç»Ÿçš„è§’æŒ¯åŠ¨ä¸ç›´çº¿æŒ¯åŠ¨åœ¨æ•°å­¦æè¿°ä¸Šç›¸åŒ å¦‚åŒåœ¨å•è‡ªç”±åº¦ç³»ç»Ÿä¸­æ‰€å®šä¹‰çš„ï¼Œåœ¨å¤šè‡ªç”±åº¦ç³»ç»Ÿä¸­ä¹Ÿå°†è´¨é‡ã€åˆšåº¦ã€ä½ç§»ã€åŠ é€Ÿåº¦åŠåŠ›éƒ½ç†è§£ä¸ºå¹¿ä¹‰çš„ å¯¹äºå€’ç«‹æ‘†ç­‰ç»“æ„ï¼Œå…¶MçŸ©é˜µä¸ºè´¨é‡å’ŒåŠ›çŸ©è€¦åˆã€‚ åŸºäºKçŸ©é˜µæ¥è®²ï¼Œåå¯¹è§’ä¸Šçš„å…ƒç´ æ˜¯ç›¸ç­‰çš„ã€‚ äºæ˜¯å¯ä»¥å¾—å‡ºä½œç”¨åŠ›çš„æ–¹ç¨‹ï¼š è‹¥ç³»ç»Ÿæœ‰nä¸ªè‡ªç”±åº¦ï¼Œåˆ™å„é¡¹çš„çš†ä¸ºnç»´çŸ©é˜µæˆ–å‘é‡ã€‚ ä¸€èˆ¬æƒ…å†µä¸‹Mã€KçŸ©é˜µæ˜¯äºŒé˜¶å¸¸å¾®åˆ†çš„ï¼Œå¦‚æœå†å¤æ‚ä¸€ç‚¹å¯èƒ½æ˜¯å®å˜çš„ã€‚ å¯¹äºè¿ç»­ä½“æ¥è¯´ï¼Œå…¶æ–¹ç¨‹å¼åå¾®çš„ï¼Œå¯ä»¥ç¦»æ•£åŒ–çš„æ–¹æ³•å˜ä¸ºå¸¸å¾®çš„ åå¾®åˆ†å¾ˆéš¾æ±‚è§£ï¼Œå› æ­¤è¦ç¦»æ•£åŒ–è¿‘ä¼¼ã€‚ åˆšåº¦çŸ©é˜µå’Œè´¨é‡çŸ©é˜µå½“æˆ‘ä»¬å¾—åˆ°ä½œç”¨åŠ›æ–¹ç¨‹æ—¶ï¼Œåªè¦Mã€Kç¡®å®šåï¼Œç³»ç»Ÿçš„åŠ¨åŠ›å¯ä»¥å®Œå…¨ç¡®å®šï¼Œé‚£ä¹ˆMã€Kè¦å¦‚ä½•ç¡®å®šï¼Ÿ åˆšåº¦çŸ©é˜µKçš„ç¡®å®šé¦–å…ˆï¼Œå…ˆç¡®å®šKï¼Œè¿™é‡Œè¦æ’é™¤å¤–åŠ›ä»¥å‡†é™æ€æ–¹ç¨‹çš„æ–¹å¼æ–½åŠ äºç³»ç»Ÿï¼Œå°±æ˜¯ç¼“æ…¢çš„åŠ åŠ›ï¼Œæ­¤æ—¶çš„åŠ é€Ÿåº¦ä¸ºé›¶ $\\ddot X(t)=0$ å¸¦å…¥åˆ°ä½œç”¨åŠ›æ–¹ç¨‹ï¼š æ­¤æ—¶çš„$P(t)$ ä¸ºå‡†é™æ€å¤–åŠ›åˆ—å‘é‡ ã€‚ å‡è®¾ä½œç”¨äºç³»ç»Ÿçš„æ˜¯è¿™æ ·ä¸€ç»„å¤–åŠ›ï¼šå®ƒä»¬ä½¿ç³»ç»Ÿåªåœ¨ç¬¬ j ä¸ªåæ ‡ä¸Šäº§ç”Ÿå•ä½çš„ä½ç§»ï¼Œè€Œåœ¨å…¶ä»–å„ä¸ªåæ ‡ä¸Šä¸äº§ç”Ÿä½ç§» å³ï¼š è¿™é‡Œçš„ç†è®ºåŸºç¡€å°±æ˜¯ $F=kx$ \\boldsymbol{X}(t)=\\left[x_{1}(t), \\ldots, x_{j-1}(t), x_{j}(t), x_{j+1}(t), \\ldots, x_{n}(t)\\right]^{T}=[0, \\ldots, 0,1,0, \\ldots, 0]^{T} å…¶ä¸­å¾—XçŸ©é˜µåªæœ‰ç¬¬ j é¡¹ä¸º1ï¼Œå…¶ä½™éƒ½æ˜¯0 å¸¦å…¥å¾—ï¼Œï¼ˆåªæœ‰KçŸ©é˜µç¬¬ j åˆ—çš„æ•°ä¿ç•™äº†ä¸‹æ¥ï¼‰ \\boldsymbol{P}(t)=\\left[\\begin{array}{l}P_{1}(t) \\\\ P_{2}(t) \\\\ \\vdots \\\\ P_{n}(t)\\end{array}\\right]=\\left[\\begin{array}{l}k_{11} \\ldots k_{1 j} \\ldots k_{1 n} \\\\ k_{21} \\ldots k_{2 j} \\ldots k_{2 n} \\\\ \\ldots \\ldots \\ldots \\ldots \\ldots . \\\\ k_{n 1} \\ldots k_{n j} \\ldots k_{n n}\\end{array}\\right]\\left[\\begin{array}{c}0 \\\\ \\vdots \\\\ 0 \\\\ 1 \\\\ 0 \\\\ \\vdots \\\\ 0\\end{array}\\right]=\\left[\\begin{array}{l}k_{1 j} \\\\ k_{2 j} \\\\ \\vdots \\\\ k_{n j}\\end{array}\\right] æ‰€æ–½åŠ çš„è¿™ç»„å¤–åŠ›æ•°å€¼ä¸Šæ­£æ˜¯åˆšåº¦çŸ©é˜µK çš„ç¬¬ j åˆ—; å…¶ä¸­çš„$k_{ij} $ $(i=1,2,â€¦n)$æ˜¯åœ¨ç¬¬ i å„åæ ‡ä¸Šé¢æ–½åŠ çš„åŠ›ã€‚ æ ¹æ®çŸ©é˜µå¾—æ€§è´¨å¯å¾—ï¼Œè¿™ç»„å¤–åŠ›æ˜¯å”¯ä¸€çš„ã€‚ ç»“è®ºï¼šåˆšåº¦çŸ©é˜µK ä¸­çš„å…ƒç´  $k_{ij}$ æ˜¯ä½¿ç³»ç»Ÿä»…åœ¨ç¬¬j ä¸ªåæ ‡ä¸Šäº§ç”Ÿå•ä½ä½ç§»è€Œç›¸åº”äºç¬¬ i ä¸ªåæ ‡ä¸Šæ‰€éœ€æ–½åŠ çš„åŠ›ã€‚ äºæ˜¯å°±å°†KçŸ©é˜µç¡®å®šï¼Œä¸‹é¢è®¨è®ºMçŸ©é˜µçš„ç¡®å®šã€‚ è´¨é‡çŸ©é˜µMçš„ç¡®å®šä¹‹åï¼Œç¡®å®šMçŸ©é˜µï¼Œå‡è®¾ç³»ç»Ÿå—åˆ°å¤–åŠ›ä½œç”¨çš„ç¬æ—¶ï¼Œåªäº§ç”ŸåŠ é€Ÿåº¦è€Œä¸äº§ç”Ÿä»»ä½•ä½ç§»ï¼Œè¿™æ ·å¯ä»¥ä½¿å¾—$X(t)=0$ å‡è®¾ä½œç”¨äºç³»ç»Ÿçš„æ˜¯è¿™æ ·ä¸€ç»„å¤–åŠ›ï¼šå®ƒä»¬ä½¿ç³»ç»Ÿåªåœ¨ç¬¬ j ä¸ªåæ ‡ä¸Šäº§ç”Ÿå•ä½åŠ é€Ÿåº¦ï¼Œè€Œåœ¨å…¶ä»–å„ä¸ªåæ ‡ä¸Šä¸äº§ç”ŸåŠ é€Ÿåº¦ã€‚ è¿™é‡Œçš„ç†è®ºåŸºç¡€å°±æ˜¯ $F=ma$ \\boldsymbol{P}(t)=\\left[\\begin{array}{l}P_{1}(t) \\\\ P_{2}(t) \\\\ \\vdots \\\\ P_{n}(t)\\end{array}\\right]=\\left[\\begin{array}{l}m_{11} \\ldots m_{1 j} \\ldots m_{1 n} \\\\ m_{21} \\ldots m_{2 j} \\ldots m_{2 n} \\\\ \\ldots \\ldots \\ldots \\ldots \\ldots \\ldots \\\\ m_{n 1} \\ldots m_{n j} \\ldots m_{n n}\\end{array}\\right]\\left[\\begin{array}{c}0 \\\\ \\vdots \\\\ 0 \\\\ 1 \\\\ 0 \\\\ \\vdots \\\\ 0\\end{array}\\right]=\\left[\\begin{array}{l}m_{1 j} \\\\ m_{2 j} \\\\ \\vdots \\\\ m_{n j}\\end{array}\\right]åŒç†ï¼Œæœ€åå°±å‰©ä¸‹äº†MçŸ©é˜µçš„ç¬¬ j åˆ—ï¼Œå…¶å«ä¹‰å°±æ˜¯å…¶ä»–åæ ‡æ–½åŠ çš„å¤–åŠ›ã€‚ ç»“è®ºï¼šè´¨é‡çŸ©é˜µ M ä¸­çš„å…ƒç´ $m_{ij}$æ˜¯ä½¿ç³»ç»Ÿä»…åœ¨ç¬¬ j ä¸ªåæ ‡ä¸Šäº§ç”Ÿå•ä½åŠ é€Ÿåº¦è€Œç›¸åº”äºç¬¬ i ä¸ªåæ ‡ä¸Šæ‰€éœ€æ–½åŠ çš„åŠ› ã€‚ ç»“è®º åˆšåº¦çŸ©é˜µ K ä¸­çš„å…ƒç´  $k_{ij}$ æ˜¯ä½¿ç³»ç»Ÿä»…åœ¨ç¬¬ j ä¸ªåæ ‡ä¸Šäº§ç”Ÿå•ä½ä½ç§»è€Œç›¸åº”äºç¬¬ i ä¸ªåæ ‡ä¸Šæ‰€éœ€æ–½åŠ çš„åŠ›; è´¨é‡çŸ©é˜µ M ä¸­çš„å…ƒç´  $m_{ij}$ æ˜¯ä½¿ç³»ç»Ÿä»…åœ¨ç¬¬ j ä¸ªåæ ‡ä¸Šäº§ç”Ÿå•ä½åŠ é€Ÿåº¦è€Œç›¸åº”äºç¬¬ i ä¸ªåæ ‡ä¸Šæ‰€éœ€æ–½åŠ çš„åŠ›; $m_{ij}ã€k_{ij}$åˆåˆ†åˆ«ç§°ä¸ºè´¨é‡å½±å“ç³»æ•°å’Œåˆšåº¦å½±å“ç³»æ•°ã€‚æ ¹æ®å®ƒä»¬çš„ç‰©ç†æ„ä¹‰å¯ä»¥ç›´æ¥å†™å‡ºç³»ç»Ÿè´¨é‡çŸ©é˜µMå’Œåˆšåº¦çŸ©é˜µKï¼Œä»è€Œå»ºç«‹ä½œç”¨åŠ›æ–¹ç¨‹ï¼Œè¿™ç§æ–¹æ³•ç§°ä¸ºå½±å“ç³»æ•°æ–¹æ³•. ç»å…¸ä¾‹é¢˜ å…ˆè€ƒè™‘å‡†é™æ€çš„æƒ…å†µï¼š ä»¤ $X=[1\\quad 0\\quad 0]^T$ ,åªä½¿ $m_1$ äº§ç”Ÿå•ä½ä½ç§»ï¼Œ$m_2$ å’Œ $m_3$ ä¸åŠ¨ï¼Œå¯ä»¥æ±‚å‡ºKé˜µçš„ç¬¬ä¸€åˆ—ï¼› $k_{11}$ â€”â€”ä½¿ $m_1$ äº§ç”Ÿå•ä½ä½ç§»æ‰€éœ€æ–½åŠ çš„åŠ›ï¼š$k_{11}=k_1+k_2$ $k_{21}$ â€”â€”ä¿æŒ$m_2$ä¸åŠ¨æ‰€éœ€æ–½åŠ çš„åŠ›ï¼š$k_{21}=-k_2$ $k_{31}$ â€”â€”ä¿æŒ$m_3$ä¸åŠ¨æ‰€éœ€æ–½åŠ çš„åŠ›ï¼š$k_{31}=0$ åŒç†ï¼Œä»¤ $X=[0\\quad 1\\quad 0]^T$ ,åªä½¿ $m_2$ äº§ç”Ÿå•ä½ä½ç§»ï¼Œ$m_1$ å’Œ $m_3$ ä¸åŠ¨ï¼Œå¯ä»¥æ±‚å‡ºKé˜µçš„ç¬¬äºŒåˆ—ï¼› $k_{22}$ â€”â€”ä½¿ $m_2$ äº§ç”Ÿå•ä½ä½ç§»æ‰€éœ€æ–½åŠ çš„åŠ›ï¼š$k_{22}=k_2+k_3+k_5+k_6$ $k_{12}$ â€”â€”ä¿æŒ$m_1$ä¸åŠ¨æ‰€éœ€æ–½åŠ çš„åŠ›ï¼š$k_{21}=-k_2$ $k_{32}$ â€”â€”ä¿æŒ$m_3$ä¸åŠ¨æ‰€éœ€æ–½åŠ çš„åŠ›ï¼š$k_{33}= -k_3$ ä»¤ $X=[0\\quad 0\\quad 1]^T$ ,åªä½¿ $m_3$ äº§ç”Ÿå•ä½ä½ç§»ï¼Œ$m_1$ å’Œ $m_2$ ä¸åŠ¨ï¼Œå¯ä»¥æ±‚å‡ºKé˜µçš„ç¬¬ä¸‰åˆ—ï¼› $k_{33}$ â€”â€”ä½¿ $m_3$ äº§ç”Ÿå•ä½ä½ç§»æ‰€éœ€æ–½åŠ çš„åŠ›ï¼š$k_{33}=k_3+k_4$ $k_{23}$ â€”â€”ä¿æŒ$m_2$ä¸åŠ¨æ‰€éœ€æ–½åŠ çš„åŠ›ï¼š$k_{23}= -k_3$ $k_{13}$ â€”â€”ä¿æŒ$m_1$ä¸åŠ¨æ‰€éœ€æ–½åŠ çš„åŠ›ï¼š$k_{13}= 0$ åªè€ƒè™‘åŠ¨æ€çš„æƒ…å†µï¼š è¿åŠ¨å¾®åˆ†æ–¹ç¨‹ï¼šæ­¤æ—¶çš„Mé˜µæ˜¯è§£è€¦çš„ï¼ŒKé˜µæ˜¯è€¦åˆçš„ã€‚ \\left[\\begin{array}{ccc}m_{1} & 0 & 0 \\\\ 0 & m_{2} & 0 \\\\ 0 & 0 & m_{3}\\end{array}\\right]\\left[\\begin{array}{l}\\ddot{x}_{1}(t) \\\\ \\ddot{x}_{2}(t) \\\\ \\ddot{x}_{3}(t)\\end{array}\\right]+\\left[\\begin{array}{ccc}k_{1}+k_{2} & -k_{2} & 0 \\\\ -k_{2} & k_{2}+k_{3}+k_{5}+k_{6} & -k_{3} \\\\ 0 & -k_{3} & k_{3}+k_{4}\\end{array}\\right]\\left[\\begin{array}{c}x_{1}(t) \\\\ x_{2}(t) \\\\ x_{3}(t)\\end{array}\\right]=\\left[\\begin{array}{c}P_{1}(t) \\\\ P_{2}(t) \\\\ P_{3}(t)\\end{array}\\right]ä¾‹ï¼šåŒæ··åˆæ‘†ï¼Œè¿™é‡Œåˆšåº¦çš„è´¨é‡ä¸º$m_1,m_2$ ï¼Œè´¨å¿ƒä¸º$c_1,c_2$ ï¼Œç»•é€šè¿‡è‡ªèº«çš„è´¨å¿ƒçš„zè½´çš„è½¬åŠ¨æƒ¯é‡ä¸º$I_1,I_2$ï¼Œæ±‚ä»¥å¾®å°è½¬è§’$\\theta_1,\\theta_2$ä¸ºåæ ‡ï¼Œå†™å‡ºx-yå¹³é¢å†…çš„æ‘†åŠ¨ä½œç”¨åŠ›æ–¹ç¨‹ã€‚ é—®ï¼šåˆšä½“2çš„è½¬è§’æ˜¯ç›¸å¯¹äºåˆšä½“1çš„ã€è¿˜æ˜¯ç›¸å¯¹äºå‚è€ƒç³»çš„ï¼Ÿç›¸å¯¹äºå‚è€ƒç³»çš„ å…ˆæ±‚è´¨é‡å½±å“ç³»æ•° ä»¤ $\\ddot \\theta_1=1,\\ddot \\theta_2=0$ ï¼Œåˆ™æ­¤æ—¶éœ€è¦åœ¨ä¸¤æ†ä¸Šæ–½åŠ åŠ›çŸ© $m_{11},m_{21}$ ä¸‹æ‘†å¯¹Aå–çŸ©ï¼š$m_{21}=m_{2} l h_{2}$ æ•´ä½“å¯¹Bå–çŸ©ï¼š$m_{11}=I_{1}+m_{1} h_{1}^{2}+m_{2} l\\left(l+h_{2}\\right)-m_{21}=I_{1}+m_{1} h_{1}^{2}+m_{2} l^{2}$ ä¸ºä»€ä¹ˆä¸è€ƒè™‘é‡åŠ›çš„å½±å“ï¼Œâ€”â€”å› ä¸ºæˆ‘ä»¬è€ƒè™‘çš„æ˜¯ç¬æ—¶åŠ¨æ€ï¼Œä¹Ÿå°±æ˜¯æ­¤æ—¶çš„ç³»ç»Ÿè¿˜æ²¡æ¥å¾—åŠå˜å½¢ï¼Œå› æ­¤é‡åŠ›åœ¨æ­¤æ—¶å¯ä»¥å¿½ç•¥ä¸è®°ã€‚ä¸Šé¢çš„å›¾åªæ˜¯ä¸ªç¤ºæ„å›¾ã€‚ ä»¤ $\\ddot \\theta_1=0,\\ddot \\theta_2=1$ ï¼Œåˆ™æ­¤æ—¶éœ€è¦åœ¨ä¸¤æ†ä¸Šæ–½åŠ åŠ›çŸ© $m_{12},m_{22}$ ä¸‹æ‘†å¯¹Aå–çŸ©ï¼š$m_{22}=I_{2}+m_{2} h_{2}^{2}$ æ•´ä¸ªå¯¹Bå–çŸ©ï¼š$m_{12}=I_{2}+m_{2} h_{2}\\left(l+h_{2}\\right)-m_{22}=m_{2} l h_{2}$ ç»¼ä¸Šå¯å¾—MçŸ©é˜µä¸ºï¼š è¿™é‡ŒMä¸ºå¯¹é˜µçŸ©é˜µï¼Œä¸æ˜¯å¯¹è§’çŸ©é˜µã€‚ \\boldsymbol{M}=\\left[\\begin{array}{cc}I_{1}+m_{1} h_{1}^{2}+m_{2} l^{2} & m_{2} l h_{2} \\\\ m_{2} l h_{2} & I_{2}+m_{2} h_{2}^{2}\\end{array}\\right] æ±‚åˆšåº¦å½±å“ç³»æ•° ç”±äºæ¢å¤åŠ›æ˜¯é‡åŠ›ï¼Œæ‰€ä»¥å®é™…ä¸Šæ˜¯æ±‚é‡åŠ›å½±å“ç³»æ•° ä»¤ $\\theta_1=1,\\theta_2=0$ ï¼Œåˆ™æ­¤æ—¶éœ€è¦åœ¨ä¸¤æ†ä¸Šæ–½åŠ åŠ›çŸ© $k_{11},k_{21}$ ä¸‹æ‘†å¯¹Aå–çŸ©ï¼š$k_{21}=0$ æ­¤æ—¶ä¸ºå‡†é™æ€ï¼Œé‡åŠ›æ­¤æ—¶è¿˜æ²¡æœ‰äº§ç”Ÿæ¢å¤åŠ›çŸ© æ•´ä½“å¯¹Bå–çŸ©ï¼š$k_{11}=m_{1} g h_{1}+m_{2} g l$ ä»¤ $\\theta_1=0,\\theta_2=1$ ï¼Œåˆ™æ­¤æ—¶éœ€è¦åœ¨ä¸¤æ†ä¸Šæ–½åŠ åŠ›çŸ© $k_{12},k_{22}$ ä¸‹æ‘†å¯¹Aå–çŸ©ï¼š$k_{22}=m_2gh_2 $ æ•´ä½“å¯¹Bå–çŸ©ï¼š$k_{21}=m_{2} g h_{2}-k_{22}=0$ ç»¼ä¸Šï¼Œåˆšåº¦çŸ©é˜µä¸ºï¼š \\boldsymbol{K}=\\left[\\begin{array}{cc}\\left(m_{1} h_{1}+m_{2} l\\right) g & 0 \\\\ 0 & m_{2} g h_{2}\\end{array}\\right] å¾—åˆ°è¿åŠ¨æ–¹ç¨‹ä¸ºï¼š(æ­¤æ—¶çš„å¼¹æ€§ä¸å­˜åœ¨è€¦åˆï¼Œæƒ¯æ€§æ˜¯è€¦åˆçš„) \\left[\\begin{array}{cc}I_{1}+m_{1} h_{1}^{2}+m_{2} l^{2} & m_{2} l h_{2} \\\\ m_{2} l h_{2} & I_{2}+m_{2} h_{2}^{2}\\end{array}\\right]\\left[\\begin{array}{c}\\ddot{\\theta}_{1}(t) \\\\ \\ddot{\\theta}_{2}(t)\\end{array}\\right]+\\left[\\begin{array}{cc}\\left(m_{1} h_{1}+m_{2} l\\right) g & 0 \\\\ 0 & m_{2} g h_{2}\\end{array}\\right]\\left[\\begin{array}{c}\\theta_{1}(t) \\\\ \\theta_{2}(t)\\end{array}\\right]=\\left[\\begin{array}{l}0 \\\\ 0\\end{array}\\right] ä¾‹ï¼šåŒæ†ç³»ç»Ÿï¼Œæ¯æ†è´¨é‡mï¼Œæ†é•¿åº¦lï¼Œæ°´å¹³å¼¹ç°§åˆšåº¦kï¼Œå¼¹ç°§è·ç¦»å›ºå®šç«¯aï¼Œæ±‚ä»¥å¾®å°è½¬è§’$\\theta_1,\\theta_2$ä¸ºåæ ‡ï¼Œå†™å‡ºx-yå¹³é¢å†…çš„æ‘†åŠ¨ä½œç”¨åŠ›æ–¹ç¨‹ å…ˆæ±‚åˆšåº¦å½±å“ç³»æ•° è¿™é‡Œï¼Œç”±äºæ˜¯å¾®å°æŒ¯åŠ¨ï¼Œå› æ­¤$\\sin \\theta \\approx\\theta$ å¾—å‡ºåˆšåº¦å½±å“çŸ©é˜µä¸ºï¼š \\boldsymbol{K}=\\left[\\begin{array}{cc}\\dfrac{1}{2} m g l+k a^{2} & -k a^{2} \\\\ -k a^{2} & \\dfrac{1}{2} m g l+k a^{2}\\end{array}\\right]åæ±‚æƒ¯æ€§å½±å“ç³»æ•° è¿åŠ¨çš„å¾®åˆ†æ–¹ç¨‹ä¸º \\left[\\begin{array}{cc}\\dfrac{1}{3} m l^{2} & 0 \\\\ 0 & \\dfrac{1}{3} m l^{2}\\end{array}\\right]\\left[\\begin{array}{l}\\ddot{\\theta}_{1}(t) \\\\ \\ddot{\\theta}_{2}(t)\\end{array}\\right]+\\left[\\begin{array}{cc}\\dfrac{1}{2} m g l+k a^{2} & -k a^{2} \\\\ -k a^{2} & \\dfrac{1}{2} m g l+k a^{2}\\end{array}\\right]\\left[\\begin{array}{c}\\theta_{1}(t) \\\\ \\theta_{2}(t)\\end{array}\\right]=\\left[\\begin{array}{l}0 \\\\ 0\\end{array}\\right]ä¾‹ï¼šä¸¤è‡ªç”±åº¦ç³»ç»Ÿï¼Œæ‘†é•¿lï¼Œæ— è´¨é‡ï¼Œå¾®æ‘†åŠ¨ï¼Œæ±‚è¿åŠ¨å¾®åˆ†æ–¹ç¨‹ é¦–å…ˆæ±‚åˆšåº¦å½±å“ç³»æ•° ç³»ç»Ÿåˆšåº¦çŸ©é˜µï¼š$\\boldsymbol{K}=\\left[\\begin{array}{cc}k_{1}+k_{2} &amp; 0 \\\\ 0 &amp; m_{2} g l\\end{array}\\right]$ ä¹‹åæ±‚æƒ¯æ€§å½±å“ç³»æ•° ç³»ç»Ÿæ°´å¹³æ–¹å‘åŠ›å¹³è¡¡ï¼š$m_{11}=\\left(m_{1}+m_{2}\\right) \\times \\ddot{x}=m_{1}+m_{2}$ æ†å¯¹Aç‚¹åŠ›çŸ©å¹³è¡¡ï¼š$m_{21}=\\left(m_{2} \\ddot{x}\\right) \\times l=m_{2} l$ ä»¤ $\\ddot{x}=0 \\quad \\ddot{\\theta}=1$ æ­¤æ—¶ç¬æ—¶çŠ¶æ€åˆ†æå¯å¾—ï¼š$\\ddot{\\vec{x}}_{B}=\\ddot{\\vec{x}}_{A}+\\ddot{\\vec{\\theta}} l+\\vec{\\omega}^{2} l$ è¿™é‡Œçš„$\\ddot{\\vec{x}}_{A}ã€\\vec{\\omega}^{2} l$ éƒ½ä¸º0ã€‚ æ°´å¹³æ–¹å‘åŠ›å¹³è¡¡ï¼š$m_{12}=m_2l$ æ†Aç‚¹åŠ›çŸ©å¹³è¡¡ï¼š$m_22=m_2l^2$ è´¨é‡çŸ©é˜µï¼š$\\boldsymbol{M}=\\left[\\begin{array}{cc}m_{1}+m_{2} &amp; m_{2} l \\\\ m_{2} l &amp; m_{2} l^{2}\\end{array}\\right]$ è¿åŠ¨æ–¹ç¨‹ä¸ºï¼š \\left[\\begin{array}{cc}m_{1}+m_{2} & m_{2} l \\\\ m_{2} l & m_{2} l^{2}\\end{array}\\right]\\left[\\begin{array}{l}\\ddot{x}(t) \\\\ \\ddot{\\theta}(t)\\end{array}\\right]+\\left[\\begin{array}{cc}k_{1}+k_{2} & 0 \\\\ 0 & m_{2} g l\\end{array}\\right]\\left[\\begin{array}{l}x(t) \\\\ \\theta(t)\\end{array}\\right]=\\left[\\begin{array}{l}0 \\\\ 0\\end{array}\\right]","link":"/2022/03/09/%E6%8C%AF%E5%8A%A8%E5%8A%9B%E5%AD%A6/%E7%AC%AC%E5%9B%9B%E7%AB%A0-%E5%A4%9A%E8%87%AA%E7%94%B1%E5%BA%A6%E6%8C%AF%E5%8A%A8-%E5%A4%9A%E8%87%AA%E7%94%B1%E5%BA%A6%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%8A%A8%E5%8A%9B%E5%AD%A6%E6%96%B9%E7%A8%8B-%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86/"},{"title":"ç¬¬å››ç«  å¤šè‡ªç”±åº¦æŒ¯åŠ¨-å¤šè‡ªç”±åº¦ç³»ç»Ÿçš„åŠ¨åŠ›å­¦æ–¹ç¨‹ ç¬¬äºŒéƒ¨åˆ†","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦è®²çš„æ˜¯å¤šè‡ªç”±æŒ¯åŠ¨ç³»ç»Ÿä¸­åŠ¨åŠ›å­¦æ–¹ç¨‹çš„ç¬¬äºŒéƒ¨åˆ†ï¼Œä¸»è¦ä»‹ç»ä½ç§»æ–¹ç¨‹å’ŒæŸ”åº¦çŸ©é˜µã€è´¨é‡çŸ©é˜µä¸åˆšåº¦çŸ©é˜µçš„æ­£å®šæ€§è´¨ä»¥åŠè€¦åˆä¸åæ ‡å˜æ¢ã€‚ ä½ç§»æ–¹ç¨‹å’ŒæŸ”åº¦çŸ©é˜µåŸºæœ¬ç†è®º å¯¹äºé™å®šç»“æ„ï¼Œæœ‰æ—¶é€šè¿‡æŸ”åº¦çŸ©é˜µå»ºç«‹ä½ç§»æ–¹ç¨‹æ¯”é€šè¿‡åˆšåº¦çŸ©é˜µå»ºç«‹ä½œç”¨åŠ›æ–¹ç¨‹æ¥å¾—æ›´æ–¹ä¾¿äº› æŸ”åº¦å®šä¹‰ä¸ºå¼¹æ€§ä½“åœ¨å•ä½åŠ›ä½œç”¨ä¸‹äº§ç”Ÿçš„å˜å½¢ è¿™é‡Œå’Œåˆšåº¦æ˜¯ç›¸åçš„ï¼Œåˆšåº¦çš„å®šä¹‰æ˜¯å•ä½å˜å½¢ä¸‹æ‰€éœ€è¦çš„åŠ›çš„å¤§å°ï¼Œè€ŒæŸ”åº¦æ˜¯å•ä½ä½œç”¨åŠ›/åŠ›çŸ©ä¸‹æ‰€äº§ç”Ÿçš„å˜å½¢ ç‰©ç†æ„ä¹‰åŠé‡çº²ä¸åˆšåº¦æ°å¥½ç›¸å é›†ä¸­è´¨é‡â€”â€”æ¢åªæœ‰åˆšåº¦ï¼Œæ²¡æœ‰è´¨é‡ æ±‚æŸ”åº¦çŸ©é˜µ å‡è®¾ $P_1ã€P_2$ æ˜¯å¸¸åŠ› ä»¥å‡†é™æ€æ–¹å¼ä½œç”¨åœ¨æ¢ä¸Šæ¢åªäº§ç”Ÿä½ç§»(å³æŒ åº¦)ï¼Œä¸äº§ç”ŸåŠ é€Ÿåº¦ å–è´¨é‡ $m_1 ã€m_2$ çš„é™å¹³è¡¡ä½ç½®ä¸ºåæ ‡ $x_1ã€x_2$ çš„åŸç‚¹ å…·ä½“çš„è®¡ç®—å¯ä»¥å‚è€ƒææ–™åŠ›å­¦çš„æ‰‹å†Œã€‚ æ”¹å†™æˆçŸ©é˜µå½¢å¼å¯å¾—ï¼š \\boldsymbol{X}=\\boldsymbol{F}\\boldsymbol{P}\\\\ \\boldsymbol{X}=\\left[\\begin{array}{l}x_{1} \\\\ x_{2}\\end{array}\\right] \\quad \\boldsymbol{F}=\\left[\\begin{array}{ll}f_{11} & f_{12} \\\\ f_{21} & f_{22}\\end{array}\\right] \\quad \\boldsymbol{P}=\\left[\\begin{array}{l}P_{1} \\\\ P_{2}\\end{array}\\right] å…¶ä¸­Fè¢«ç§°ä¸ºæ˜¯æŸ”åº¦çŸ©é˜µï¼Œå’Œæ˜¾ç„¶å…¶å°±æ˜¯KçŸ©é˜µçš„å€’æ•°ã€‚ ç»¼ä¸Šï¼Œç­‰åˆ°æŸ”åº¦çš„ç‰©ç†æ„ä¹‰æ˜¯ï¼š ç³»ç»Ÿä»…åœ¨ç¬¬ j ä¸ªåæ ‡å—åˆ°å•ä½åŠ›ä½œç”¨æ—¶ï¼Œç›¸åº”äºç¬¬ i ä¸ªåæ ‡ä¸Šäº§ç”Ÿçš„ä½ç§» æ±‚åˆšåº¦çŸ©é˜µ å½“ $P_1$ã€$P_2$ æ˜¯åŠ¨è½½è·æ—¶é›†ä¸­è´¨é‡ä¸Šæœ‰æƒ¯æ€§åŠ›å­˜åœ¨ï¼Œè¿™é‡Œé€šè¿‡è¾¾æœ—è´å°”åŸç†å°†å…¶è½¬åŒ–ä¸ºæƒ¯æ€§åŠ›æ–½åŠ åœ¨å¯¹äºçš„è´¨é‡ä¸Šé¢ã€‚ è€ƒè™‘æƒ¯æ€§åŠ›ä¹‹åçš„ä½ç§»æ–¹ç¨‹ï¼š {\\left[\\begin{array}{l}x_{1} \\\\ x_{2}\\end{array}\\right]=\\left[\\begin{array}{ll}f_{11} & f_{12} \\\\ f_{21} & f_{22}\\end{array}\\right]\\left[\\begin{array}{c}P_{1}(t)-m_{1} \\ddot{x}_{1} \\\\ P_{2}(t)-m_{2} \\ddot{x}_{2}\\end{array}\\right] } å°†ä¸Šè¿°æ–¹ç¨‹åˆ†è§£å¯å¾—ï¼š {\\left[\\begin{array}{l}x_{1} \\\\ x_{2}\\end{array}\\right]=\\left[\\begin{array}{ll}f_{11} & f_{12} \\\\ f_{21} & f_{22}\\end{array}\\right]\\left(\\left[\\begin{array}{l}P_{1}(t) \\\\ P_{2}(t)\\end{array}\\right]-\\left[\\begin{array}{cc}m_{1} & 0 \\\\ 0 & m_{2}\\end{array}\\right]\\left[\\begin{array}{l}\\ddot{x}_{1} \\\\ \\ddot{x}_{2}\\end{array}\\right]\\right) } å¾—å‡ºæœ€åçš„ä½ç§»æ–¹ç¨‹ä¸ºï¼š \\boldsymbol{X}=\\boldsymbol{F}(\\boldsymbol{P}-\\boldsymbol{M} \\ddot{\\boldsymbol{X}}) ä½œç”¨åŠ›æ–¹ç¨‹â€”â€”å·¦å³ä¸¤è¾¹éƒ½æ˜¯åŠ›çš„é‡çº²ï¼› ä½ç§»æ–¹ç¨‹â€”â€”å·¦å³ä¸¤è¾¹éƒ½æ˜¯ä½ç§»çš„é‡çº²ã€‚ è¦æ³¨æ„çš„é—®é¢˜ï¼š å¯¹äºå…è®¸åˆšä½“è¿åŠ¨äº§ç”Ÿçš„ç³»ç»Ÿ(å³å…·æœ‰åˆšä½“è‡ªç”±åº¦çš„ç³»ç»Ÿ)ï¼ŒæŸ”åº¦çŸ©é˜µä¸å­˜åœ¨ã€‚å³ä½ç§»æ–¹ç¨‹ä¸é€‚ç”¨äºå…·æœ‰åˆšä½“è‡ªç”±åº¦çš„ç³»ç»Ÿã€‚ å³ç³»ç»Ÿåœ¨ç‰¹å®šçš„ä½œç”¨ä¸‹æœ‰ä½ç§»çš„å¹³è¡¡ä½ç½®ï¼Œæ•´ä¸ªç³»ç»Ÿå’Œå‰é¢æœ‰ä¸€ç‚¹çš„è¿æ¥ï¼Œä½†æ˜¯å¦‚å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬çš„æ–½åŠ åŠ›ä»¥åç³»ç»Ÿç›´æ¥è¿åŠ¨ï¼Œå…¶å¹³è¡¡ä½ç½®ç›¸å½“äºæœ‰æ— æ•°ä¸ªã€‚ å¦‚å·¦è¾¹çš„ç³»ç»Ÿï¼Œå…¶å­˜åœ¨ä¸€ä¸ªæ¨¡æ€ï¼Œå¼¹ç°§æ˜¯ä¸Šé¢æ²¡æœ‰åŠ›ï¼Œä¸‰ä¸ªä»¥ç³»ç»Ÿçš„é€Ÿåº¦ç›¸åŒçš„åŠ é€Ÿåº¦ä»¥åŒä¸€ä¸ªæ–¹å‘ç§»åŠ¨è¿‡å»ã€‚ åŸå› ï¼šåœ¨ä»»æ„ä¸€ä¸ªåæ ‡ä¸Šæ–½åŠ å•ä½åŠ›ï¼Œç³»ç»Ÿå°†äº§ç”Ÿåˆšä½“è¿åŠ¨è€Œæ— æ³•è®¡ç®—å„ä¸ªåæ ‡ä¸Šçš„ä½ç§»ï¼Œæ­¤æ—¶ç³»ç»Ÿçš„åˆšåº¦çŸ©é˜µKæ˜¯å¥‡å¼‚çš„ã€‚ å…¸å‹ä¾‹é¢˜ä¾‹ï¼š æ±‚å›¾ç¤ºä¸¤è‡ªç”±åº¦ç®€æ”¯æ¢æ¨ªå‘æŒ¯åŠ¨çš„ä½ç§»æ–¹ç¨‹æ¢ä¸è®¡è´¨é‡ï¼ŒæŠ—å¼¯åˆšåº¦$EJ$ ç”±ææ–™åŠ›å­¦çŸ¥ï¼Œå½“Bç‚¹ä½œç”¨æœ‰å•ä½åŠ›æ—¶ï¼ŒAç‚¹çš„æŒ åº¦ä¸ºï¼š f_{AB}=\\frac {ab} {6EJl} (l^2-a^2-b^2) æŸ”åº¦å½±å“ç³»æ•°ä¸ºï¼š$f_{11}=f_{22}=8f \\quad f_{21}=f_{12}=7f \\quad f=\\dfrac {l^3} {486EJ}$ å¾—å‡ºä½ç§»æ–¹ç¨‹ä¸ºï¼š {\\left[\\begin{array}{l}x_{1} \\\\ x_{2}\\end{array}\\right]=\\left[\\begin{array}{ll}8f & 7f \\\\ 7f & 8f\\end{array}\\right]\\left(\\left[\\begin{array}{l}P_{1} \\\\ P_{2}\\end{array}\\right]-\\left[\\begin{array}{cc}m_{1} & 0 \\\\ 0 & m_{2}\\end{array}\\right]\\left[\\begin{array}{l}\\ddot{x}_{1} \\\\ \\ddot{x}_{2}\\end{array}\\right]\\right) } åœ¨åæ ‡ $x_1$ ä¸Šå¯¹è´¨é‡ $m_1$ ä½œç”¨å•ä½åŠ›ç³»ç»Ÿåœ¨åæ ‡$x_1$ã€$x_2$ã€$x_3$ ä¸Šäº§ç”Ÿä½ç§»: $f_{11}=f_{21}=f_{31}=\\dfrac 1 {k_1}$ åœ¨åæ ‡ $x_2$ä¸Šå¯¹è´¨é‡ $m_2$ ä½œç”¨å•ä½åŠ› $ f_{12}=\\dfrac{1}{k_{1}} \\quad f_{22}=\\dfrac{1}{k_{1}}+\\dfrac{1}{k_{2}} \\quad f_{32}=\\dfrac{1}{k_{1}}+\\dfrac{1}{k_{2}} $ åœ¨åæ ‡ $x_3$ä¸Šå¯¹è´¨é‡ $m_3$ ä½œç”¨å•ä½åŠ› $ f_{13}=\\dfrac{1}{k_{1}} \\quad f_{23}=\\dfrac{1}{k_{1}}+\\dfrac{1}{k_{2}} \\quad f_{33}=\\dfrac{1}{k_{1}}+\\dfrac{1}{k_{2}}+\\dfrac{1}{k_{3}} $ è¿™é‡Œå’Œä¹‹å‰æ±‚åˆšåº¦çŸ©é˜µæœ‰ä¸åŒï¼Œä¹‹å‰æ±‚åˆšåº¦å’Œæƒ¯æ€§çŸ©é˜µæ—¶ï¼Œåªæ˜¯è®©æŸä¸ªè¿™é‡Œå‘ç”Ÿä½ç§»è€Œå…¶ä»–çš„éƒ¨åˆ†æ ·æ–½åŠ ç›¸åº”çš„åŠ›æ¥ä¿è¯ä½ç§»æ˜¯0. äºæ˜¯å¾—å‡ºæŸ”åº¦çŸ©é˜µä¸ºï¼š F=\\left[\\begin{array}{ccc}\\dfrac{1}{k_{1}} & \\dfrac{1}{k_{1}} & \\dfrac{1}{k_{1}} \\\\ \\dfrac{1}{k_{1}} & \\dfrac{1}{k_{1}}+\\dfrac{1}{k_{2}} & \\dfrac{1}{k_{1}}+\\dfrac{1}{k_{2}} \\\\ \\dfrac{1}{k_{1}} & \\dfrac{1}{k_{1}}+\\dfrac{1}{k_{2}} & \\dfrac{1}{k_{1}}+\\dfrac{1}{k_{2}}+\\dfrac{1}{k_{3}}\\end{array}\\right] \\quad \\begin{array}{c}\\text { å¯ä»¥éªŒè¯ï¼Œæœ‰ : } \\\\ \\boldsymbol{F}\\boldsymbol{K}=\\boldsymbol{I}\\end{array} å°ç»“ï¼š åå‘½é¢˜ï¼Œå¦‚æœKé˜µä¸ºå¥‡å¼‚çš„ï¼Œæ­¤æ—¶ä¸€å®šä¸ºåˆšä½“è¿åŠ¨ã€‚$\\omega^2=k/m$ å½“Kä¸º0æ—¶ä¸€å®šæœ‰$\\omega=0$ï¼Œç³»ç»Ÿä¸æŒ¯åŠ¨ã€‚ è´¨é‡çŸ©é˜µå’Œåˆšåº¦çŸ©é˜µçš„æ­£å®šæ€§è´¨n é˜¶æ–¹é˜µ A æ­£å®šï¼Œå³ $A_{n\\times n}&gt;0$ , å¯¹äºä»»æ„çš„ n ç»´åˆ—å‘é‡ yï¼Œæ€»æœ‰ $y^TA\\ y&gt;0$ (æ ‡é‡) æˆç«‹ å¹¶ä¸”ç­‰å·ä»…åœ¨ $y=0$ æ—¶æ‰æˆç«‹ å¦‚æœ $y \\ne 0$ æ—¶ï¼Œç­‰å·ä¹Ÿæˆç«‹ï¼Œé‚£ä¹ˆç§°çŸ©é˜µAæ˜¯åŠæ­£å®šçš„ $A \\ge0 $ å¯¹äºåŠ¨èƒ½ï¼ŒåŠ¨èƒ½å§‹ç»ˆæ˜¯å¤§äºç­‰äº0çš„ã€‚ å¯¹äºåŠ¿èƒ½ï¼ŒæŒ¯åŠ¨ç³»ç»Ÿçš„åˆšåº¦çŸ©é˜µè‡³å°‘ä¸ºåŠæ­£å®šã€‚ ç†è§£ï¼š$\\omega^2=k/m$ æ ¹æ®å…¬å¼å¯å¾—ï¼Œå¯¹äºä¸€èˆ¬çš„ç³»ç»Ÿæ¥è¯´ï¼Œkéƒ½æ˜¯å¤§äº0çš„ï¼›å¯¹äºéšé‡å¹³è¡¡ç³»ç»Ÿï¼Œå…¶K=0ï¼Œå› æ­¤å¯ä»¥ä¸ºåŠæ­£å®šã€‚ æŒ¯åŠ¨é—®é¢˜ä¸­ä¸»è¦è®¨è®ºï¼ˆ1ï¼‰Mé˜µæ­£å®šã€K é˜µæ­£å®š $\\Leftrightarrow$ æ­£å®šæŒ¯åŠ¨ç³»ç»Ÿï¼ˆ2ï¼‰Mé˜µæ­£å®šã€K é˜µåŠæ­£å®š $\\Leftrightarrow$ åŠæ­£å®šæŒ¯åŠ¨ç³»ç»Ÿ è€¦åˆä¸åæ ‡å˜æ¢åŸºæœ¬ç†è®º ä¸å‡ºç°æƒ¯æ€§è€¦åˆæ—¶ï¼Œä¸€ä¸ªåæ ‡ä¸Šäº§ç”Ÿçš„åŠ é€Ÿåº¦åªåœ¨è¯¥åæ ‡ä¸Šå¼•èµ·æƒ¯æ€§åŠ›ã€‚ \\left[\\begin{array}{cc}m_{11} & 0 \\\\ 0 & m_{22}\\end{array}\\right]\\left[\\begin{array}{c}\\ddot{x}_{1} \\\\ 0\\end{array}\\right]=\\left[\\begin{array}{c}m_{11} \\ddot{x}_{1} \\\\ 0\\end{array}\\right] å‡ºç°æƒ¯æ€§è€¦åˆæ—¶ï¼Œä¸€ä¸ªåæ ‡ä¸Šäº§ç”Ÿçš„åŠ é€Ÿåº¦è¿˜ä¼šåœ¨åˆ«çš„åæ ‡ä¸Šå¼•èµ·æƒ¯æ€§åŠ›ã€‚ \\left[\\begin{array}{cc}m_{11} & m_{12} \\\\ m_{21} & m_{22}\\end{array}\\right]\\left[\\begin{array}{c}\\ddot{x}_{1} \\\\ 0\\end{array}\\right]=\\left[\\begin{array}{c}m_{11} \\ddot{x}_{1} \\\\ m_{21} \\ddot{x}_{1}\\end{array}\\right]åŒç†ï¼Œä¸å‡ºç°å¼¹æ€§è€¦åˆæ—¶ï¼Œä¸€ä¸ªåæ ‡ä¸Šäº§ç”Ÿçš„ä½ç§»åªåœ¨è¯¥åæ ‡ä¸Šå¼•èµ·å¼¹æ€§æ¢å¤åŠ›ï¼›è€Œå‡ºç°å¼¹æ€§è€¦åˆæ—¶ï¼Œä¸€ä¸ªåæ ‡ä¸Šäº§ç”Ÿçš„ä½ç§»è¿˜ä¼šåœ¨åˆ«çš„åæ ‡ä¸Šå¼•èµ·å¼¹æ€§æ¢å¤åŠ›ã€‚ è€¦åˆçš„è¡¨ç°å½¢å¼å–å†³äºåæ ‡çš„é€‰æ‹© é€‰å–Dç‚¹çš„å‚ç›´ä½ç§»$x_D$å’Œç»•Dç‚¹çš„è§’ä½ç§» $\\theta_D$ ä¸ºåæ ‡ï¼Œå†™å‡ºè½¦ä½“å¾®æŒ¯åŠ¨çš„å¾®åˆ†æ–¹ç¨‹ã€‚ è§£æ³•ä¸€ï¼š(ç†è®ºåŠ›å­¦çš„æ–¹æ³•ï¼‰ ç”±äºæ†æ˜¯åˆšä½“ï¼Œå› æ­¤å…¶ä¸Šé¢çš„ç‚¹ä¸Šçš„è§’é€Ÿåº¦æ˜¯å¤„å¤„ç›¸ç­‰çš„ $\\theta_C = \\theta_D$ è¿™é‡Œæ¶‰åŠåˆ°åˆšä½“ä¸ŠåŠ›å¦‚æœä»ä¸€ä¸ªç‚¹å¹³ç§»åˆ°å¦ä¸€ä¸ªç‚¹ä¼šäº§ç”Ÿä¸€ä¸ªä¼´éšåŠ›å¶æ¥ç¡®ä¿æ•´ä¸ªç³»ç»Ÿçš„åŠ›çŸ©å¹³è¡¡ã€‚ è¿™é‡Œçš„å¹¿ä¹‰åæ ‡çš„å–å¾—æ˜¯Dç‚¹ã€‚ åŒç†å¯¹äºåŠ¿èƒ½æ¥è¯´æœ‰ï¼š \\begin{aligned} V= \\frac{1}{2} k_{1}\\left(x_{D}-a_{1} \\theta_{D}\\right)^{2} +\\frac{1}{2} k_{2}\\left(x_{D}+a_{2} \\theta_{D}\\right)^{2} \\end{aligned} å°†åŠ¨èƒ½å’ŒåŠ¿èƒ½å¸¦å…¥æ‹‰æ ¼æœ—æ—¥æ–¹ç¨‹å¯å¾—ï¼š m \\ddot{x}_{D}+m e \\ddot{\\theta}_{D}+\\left(k_{1}+k_{2}\\right) x_{D}+\\left(k_{2} a_{2}-k_{1} a_{1}\\right) \\theta_{D}=P_{D}\\\\m e \\ddot{x}_{D}+\\left(I_{C}+m e^{2}\\right) \\ddot{\\theta}_{D}+\\left(k_{1}+k_{2}\\right) x_{D}+\\left(k_{1} a_{1}^{2}+k_{2} a_{2}^{2}\\right) \\theta_{D}=M_{D}å†™æˆçŸ©é˜µå½¢å¼å¯å¾—ï¼š ä½¿ç”¨Dç‚¹ä¸ºå¹¿ä¹‰åæ ‡ï¼Œæ±‚è§£å‡ºæ¥çš„æŒ¯åŠ¨æ–¹ç¨‹ï¼Œè´¨é‡å’Œåˆšåº¦çŸ©é˜µåŒæ—¶è€¦åˆï¼Œä¸‹é¢æˆ‘ä»¬ä½¿ç”¨å½±å“ç³»æ•°æ³•æ¥æ±‚è§£ã€‚ è§£æ³•äºŒï¼šï¼ˆæŒ¯åŠ¨åŠ›å­¦çš„æ–¹æ³•ï¼‰ é¦–å…ˆæ±‚è§£åˆšåº¦çŸ©é˜µ ä¹‹åæ±‚è§£è´¨é‡çŸ©é˜µ è¿™é‡Œçš„Cç‚¹æ˜¯è´¨å¿ƒï¼Œç¬é—´çš„æƒ¯æ€§çš„å°±ä½œç”¨åœ¨Cä¸Šé¢ï¼Œç”±äºæ²¡æœ‰è§’åŠ é€Ÿåº¦ï¼Œå› æ­¤åªæœ‰æƒ¯æ€§åŠ›è€Œæ²¡æœ‰åŠ›å¶ã€‚ ä¸ºäº†ä¿è¯åŠ›çš„å¹³è¡¡ï¼Œè¦åœ¨Då¤„ç›¸åº”çš„æ–½åŠ ä¸€ä¸ªç­‰å¤§çš„åŠ›ä»¥åŠä¸€ä¸ªé˜²æ­¢å‡ºç°è§’é€Ÿåº¦çš„åŠ›å¶ã€‚ äº§ç”Ÿè¾¾æœ—è´å°”æƒ¯æ€§åŠ›å¶çš„åŒæ—¶ä¹Ÿä¼šäº§ç”Ÿå¯¹åº”çš„æƒ¯æ€§åŠ›ã€‚ å¾—å‡ºå¾®åˆ†æ–¹ç¨‹ä¸ºï¼š \\left[\\begin{array}{cc}m & m e \\\\ m e & I_{C}+m e^{2}\\end{array}\\right]\\left[\\begin{array}{c}\\ddot{x}_{D} \\\\ \\ddot{\\theta}_{D}\\end{array}\\right]+\\left[\\begin{array}{cc}k_{1}+k_{2} & k_{2} a_{2}-k_{1} a_{1} \\\\ k_{2} a_{2}-k_{1} a_{1} & k_{1} a_{1}^{2}+k_{2} a_{2}^{2}\\end{array}\\right]\\left[\\begin{array}{c}x_{D} \\\\ \\theta_{D}\\end{array}\\right]=\\left[\\begin{array}{c}P_{D} \\\\ M_{D}\\end{array}\\right]è§£è€¦åˆ†æï¼š å°†å¼¹æ€§è€¦åˆè¿›è¡Œè§£è€¦å¯å¾—ï¼Œæ­¤æ—¶å³ç«¯é¡¹ä¸ºæ‰€æœ‰çš„å¤–åŠ›å‘Dç‚¹ç®€åŒ–çš„ç»“æœï¼š å°†æƒ¯æ€§è€¦åˆè¿›è¡Œè§£è€¦å¯å¾—ï¼Œæ­¤æ—¶å³ç«¯é¡¹ä¸ºæ‰€æœ‰çš„å¤–åŠ›å‘Cç‚¹ç®€åŒ–çš„ç»“æœï¼š é—®ï¼šèƒ½å¦æ‰¾åˆ°è¿™æ ·ä¸€ç§åæ ‡ä½¿å¾—ç³»ç»Ÿçš„è¿åŠ¨å¾®åˆ†æ–¹ç¨‹æ—¢ä¸å‡ºç°æƒ¯æ€§è€¦åˆï¼Œä¹Ÿä¸å‡ºç°å¼¹æ€§è€¦åˆï¼Ÿ ä½¿ç³»ç»Ÿè¿åŠ¨å¾®åˆ†æ–¹ç¨‹çš„å…¨éƒ¨è€¦åˆé¡¹å…¨éƒ¨è§£è€¦çš„åæ ‡ç§°ä¸ºä¸»åæ ‡,ï¼Œæ­¤å†…å®¹ä¸ºä¸‹æ¬¡è¯¾ç¨‹æ¨¡æ€è¿™è¾¹çš„é‡ç‚¹ã€‚ ä¸åŒå¹¿ä¹‰åæ ‡ä¸‹æ–¹ç¨‹çš„è”ç³»è®¨è®ºï¼šèƒ½å¯¹åŒä¸€ä¸ªç³»ç»Ÿé€‰å–ä¸¤ä¸ªä¸åŒçš„åæ ‡ï¼Œå®ƒä»¬æ‰€æè¿°çš„è¿åŠ¨å¾®åˆ†æ–¹ç¨‹ä¹‹é—´æœ‰ç€æ€æ ·çš„è”ç³»ï¼Ÿ é¦–å…ˆï¼Œå¯»æ‰¾Dç‚¹å’ŒCç‚¹ä¹‹é—´çš„è”ç³»ï¼š å¯ä»¥å¾—åˆ°ï¼š$\\left[\\begin{array}{l}x_{D} \\\\ \\theta_{D}\\end{array}\\right]=\\left[\\begin{array}{cc}1 &amp; -e \\\\ 0 &amp; 1\\end{array}\\right]\\left[\\begin{array}{l}x_{C} \\\\ \\theta_{C}\\end{array}\\right]$ åŠ›åœ¨ç§»åŠ¨ä»¥åä¼šäº§ç”Ÿé™„åŠ åŠ›å¶ $-eP_D$ Tä¸ºéå¥‡å¼‚çš„ï¼Œå› æ­¤ï¼š$F_D=(T^T)^{-1}F_C$ æ€»ç»“ æ¨¡æ€å åŠ ï¼šå°†ç‰©ç†ç©ºé—´çš„è€¦åˆçš„é—®é¢˜å¯ä»¥é€šè¿‡æŸä¸ªè½¬æ¢çš„å…³ç³»æ¥ï¼Œè½¬åŒ–åˆ°å¦ä¸€ä¸ªè§£è€¦çš„ç©ºé—´è¿›è€Œå®ç°æ±‚è§£ä¸¤ä¸ªå•è‡ªç”±åº¦çš„ç³»ç»Ÿï¼Œä¹‹åå†è½¬æ¢å›åˆ°åŸæ¥çš„ç‰©ç†ç©ºé—´ã€‚ å¹¿ä¹‰åæ ‡çš„é€‰æ‹©ä¸åŒï¼Œä¸å½±å“åˆšåº¦å’Œæƒ¯æ€§çŸ©é˜µçš„æ€§è´¨ï¼Œå¦‚æ­£å®šæ€§å’Œå¯¹ç§°æ€§ã€‚","link":"/2022/03/10/%E6%8C%AF%E5%8A%A8%E5%8A%9B%E5%AD%A6/%E7%AC%AC%E5%9B%9B%E7%AB%A0-%E5%A4%9A%E8%87%AA%E7%94%B1%E5%BA%A6%E6%8C%AF%E5%8A%A8-%E5%A4%9A%E8%87%AA%E7%94%B1%E5%BA%A6%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%8A%A8%E5%8A%9B%E5%AD%A6%E6%96%B9%E7%A8%8B-%E7%AC%AC%E4%BA%8C%E9%83%A8%E5%88%86/"},{"title":"ç¬¬å››ç«  å¤šè‡ªç”±åº¦ç³»ç»ŸæŒ¯åŠ¨ å¤šè‡ªç”±åº¦ç³»ç»Ÿçš„è‡ªç”±æŒ¯åŠ¨ ç¬¬ä¸€éƒ¨åˆ†","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦è®²çš„æ˜¯å¤šè‡ªç”±æŒ¯åŠ¨ç³»ç»Ÿä¸­çš„å¤šè‡ªç”±åº¦ç³»ç»Ÿçš„è‡ªç”±æŒ¯åŠ¨ï¼Œä¸»è¦ä»‹ç»äº†å›ºæœ‰é¢‘ç‡çš„è®¡ç®—ä»¥åŠæ¨¡æ€(ä¸»æŒ¯å‹)çš„è®¡ç®—æ–¹æ³•ç­‰ã€‚ å›ºæœ‰é¢‘ç‡ åœ¨è€ƒè™‘ç³»ç»Ÿçš„å›ºæœ‰æŒ¯åŠ¨æ—¶ï¼Œæœ€æ„Ÿå…´è¶£çš„æ˜¯ç³»ç»Ÿçš„åŒæ­¥æŒ¯åŠ¨ï¼Œå³ç³»ç»Ÿåœ¨å„ä¸ªåæ ‡ä¸Šé™¤äº†è¿åŠ¨å¹…å€¼ä¸ç›¸åŒå¤–ï¼Œéšæ—¶é—´å˜åŒ–çš„è§„å¾‹éƒ½ç›¸åŒçš„è¿åŠ¨ åŒæ­¥æŒ¯åŠ¨ï¼šç³»ç»Ÿåœ¨å„ä¸ªåæ ‡ä¸Šé™¤äº†è¿åŠ¨å¹…å€¼ä¸ç›¸åŒå¤–ï¼Œéšæ—¶é—´å˜åŒ–çš„è§„å¾‹éƒ½ç›¸åŒçš„è¿åŠ¨ã€‚ ç¬¬ä¸€é˜¶æ¨¡æ€çš„ä»»æ„æ—¶é—´åŠè·ç¦»å¹³è¡¡ä½ç½®çš„è·ç¦»æˆæ»¡è¶³ä¸€å®šçš„æ¯”ä¾‹ ä¸€èˆ¬æ¥è¯´ï¼Œå®é™…çš„æŒ¯åŠ¨æ—¶è¿™ä¸‰ç§ä¸»æŒ¯åŠ¨çš„çº¿æ€§å åŠ  æ³¨æ„ï¼šè¿™é‡Œçš„å¸¸å€¼åˆ—é˜µ$\\Phi$ ä»£è¡¨è¿åŠ¨çš„å½¢çŠ¶ï¼Œ$f(t)$ ä¸ºæ—¶é—´çš„å‡½æ•°ã€‚ éšé‡å¹³è¡¡çš„ç³»ç»Ÿï¼Œåªèƒ½å»ºç«‹åŠæ­£å®šç³»ç»Ÿï¼Œæ­¤æ—¶å¯èƒ½æ²¡æœ‰å¹³è¡¡ä½ç½®ã€‚ è¿™é‡ŒMçš„ä¸€å®šæ—¶å¤§äº0çš„ï¼Œæ­£å®šï¼›ä½†æ˜¯Ké˜µæ˜¯ä¸ä¸€å®šçš„ï¼Œå› ä¸ºå¯¹äºéšé‡å¹³è¡¡ä½ç½®æ¥è¯´è‚¯å®šæ˜¯Ké˜µçš„è¡Œåˆ—å¼ä¸º0ï¼Œæ­¤æ—¶é¢‘ç‡ä¸º0. (1) æ­£å®šç³»ç»Ÿ $\\omega&gt;0$ åªå¯èƒ½å‡ºç°å½¢å¦‚ $X(t)=\\Phi a\\sin(\\omega t+\\varphi)$ çš„åŒæ­¥è¿åŠ¨ ç³»ç»Ÿåœ¨å„ä¸ªåæ ‡ä¸Šéƒ½æ˜¯æŒ‰ç›¸åŒé¢‘ç‡åŠåˆç›¸ä½ä½œç®€è°æŒ¯åŠ¨ (2) åŠæ­£å®šç³»ç»Ÿ $\\omega \\ge 0$ å¯èƒ½å‡ºç°å½¢å¦‚ $X(t)=\\Phi a\\sin(\\omega t+\\varphi)$ çš„åŒæ­¥è¿åŠ¨ ä¹Ÿå¯èƒ½å‡ºç°å½¢å¦‚ $X(t)=\\Phi (a t+ b)$ çš„åŒæ­¥è¿åŠ¨ï¼ˆä¸å‘ç”Ÿå¼¹æ€§å˜å½¢ ï¼‰ æ­£å®šç³»ç»Ÿçš„ä¸»æŒ¯åŠ¨ \\left|\\begin{array}{cccc}k_{11}-\\omega^{2} m_{11} & k_{12}-\\omega^{2} m_{12} & \\cdots & k_{1 n}-\\omega^{2} m_{1 n} \\\\ k_{21}-\\omega^{2} m_{21} & k_{22}-\\omega^{2} m_{22} & \\cdots & k_{2 n}-\\omega^{2} m_{2 n} \\\\ \\vdots & \\vdots & \\ddots & \\vdots \\\\ k_{n 1}-\\omega^{2} m_{n 1} & k_{n 2}-\\omega^{2} m_{n 2} & \\cdots & k_{n n}-\\omega^{2} m_{n n}\\end{array}\\right|=0 è¿™é‡Œç‰¹å¾æ ¹å¯¹äºçš„æ˜¯ç³»ç»Ÿçš„å›ºæœ‰é¢‘ç‡ï¼Œç‰¹å¾å‘é‡å¯¹äºçš„æ˜¯æ¨¡æ€ã€‚ å°†ç‰¹å¾æ–¹ç¨‹åŒ–ç®€å¯å¾—ï¼š ç»“æ„å»ºç«‹èµ·æ¥ä¹‹åå›ºæœ‰é¢‘ç‡å°±ç¡®å®šäº†ï¼Œå’Œæ˜¯å¦æŒ¯åŠ¨æ—¶æ— å…³çš„ã€‚ é‡‡ç”¨ä½ç§»æ–¹ç¨‹æ±‚è§£å›ºæœ‰é¢‘ç‡ ç”±æ­¤å¯å¾—ç‰¹å¾æ–¹ç¨‹ä¸ºï¼š$|FM-\\lambda I|=0$ ç‰¹å¾æ ¹æŒ‰ç…§é™åºæ’åˆ—ï¼š$\\lambda_1\\ge\\lambda_2\\ge\\cdots\\ge\\lambda_n&gt;0 \\Rightarrow \\lambda_i=\\dfrac 1 {\\omega_i^2}$ æ³¨æ„ï¼Œè¿™é‡Œä¸€å®šè¦æŒ‰ç…§å‡åºè¿›è¡Œæ’åˆ—ã€‚ $\\omega_{1}=\\sqrt{k / m} \\quad \\omega_{2}=1.732 \\sqrt{k / m} \\quad \\omega_{3}=2 \\sqrt{k / m}$ å¤šè‡ªç”±åº¦ç³»ç»Ÿçš„æ¨¡æ€(ä¸»æŒ¯å‹)æ±‚è§£ç‰¹å¾æ–¹ç¨‹çš„ç‰¹å¾æ ¹é—®é¢˜ä¸»è¦æ±‚è§£çš„æ˜¯ç‰¹å¾æ ¹ï¼Œè€Œæ±‚è§£ç‰¹å¾å‘é‡å°±æ˜¯æ±‚è§£æ¨¡æ€(ä¸»æŒ¯å‹)çš„è¿‡ç¨‹ã€‚ é—´æ¥æ³•æ±‚æ¨¡æ€ ä¸ç‰¹å¾æ ¹ä¸ç‰¹å¾æ–¹ç¨‹ç±»ä¼¼ï¼Œæˆ‘ä»¬çš„è¿™é‡Œçš„å›ºæœ‰é¢‘ç‡å’Œæ¨¡æ€ä¹Ÿæ˜¯ä¸€ä¸€å¯¹åº”çš„å…³ç³»ã€‚ $\\omega_{i} ã€ \\boldsymbol{\\phi}^{(i)}$ ä»£å…¥åˆ°ç‰¹å¾æ–¹ç¨‹ä¸­å¯å¾—ï¼š$\\left(\\boldsymbol{K}-\\omega_{i}^{2} \\boldsymbol{M}\\right) \\boldsymbol{\\phi}^{(i)}=\\boldsymbol{0}$ ç¬¬ i é˜¶æ¨¡æ€ç‰¹å¾å€¼é—®é¢˜ å½“ $\\omega_i$ ä¸æ˜¯ç‰¹å¾å¤šé¡¹å¼é‡æ ¹æ—¶(å³æ­¤æ—¶æ²¡æœ‰é‡æ ¹)ï¼Œä¸Šå¼ n ä¸ªæ–¹ç¨‹åªæœ‰ä¸€ä¸ªä¸ç‹¬ç«‹ ã€‚ è®¾æœ€åä¸€ä¸ªæ–¹ç¨‹ä¸ç‹¬ç«‹ï¼ŒæŠŠæœ€åä¸€è¡Œåˆ’å»ï¼Œå¹¶ä¸”æŠŠå«æœ‰ $\\phi^{(i)} $ çš„æŸä¸ªå…ƒç´ ï¼ˆä¾‹å¦‚$\\phi^{(i)}_n $ï¼‰çš„é¡¹å…¨éƒ¨ç§»åˆ°ç­‰å·å³ç«¯ï¼Œå³å°†æœ€åä¸€åˆ—å…ƒç´ æ”¾åˆ°ç­‰å·çš„ä¹Ÿå³è¾¹ï¼Œæ­¤æ—¶å·¦è¾¹ä¸ºä¸€ä¸ª$(n-1) \\times (n-1)$ çš„çŸ©é˜µã€‚ ä¸ºäº†ç®€åŒ–è®¡ç®—ï¼Œå¯ä»¥å°†$\\phi^{(i)}_n=1 $ï¼Œ $\\boldsymbol{\\phi}^{(i)}=\\left[\\begin{array}{lllll}\\phi_{1}^{(i)} &amp; \\phi_{2}^{(i)} &amp; \\cdots &amp; \\phi_{n-1}^{(i)} &amp; 1\\end{array}\\right]^{T}$ \\left[\\begin{array}{ccc}3-\\alpha & -1 & 0 \\\\ -1 & 2-\\alpha & -1 \\\\ 0 & -1 & 3-\\alpha\\end{array}\\right]\\left[\\begin{array}{l}\\phi_{1} \\\\ \\phi_{2} \\\\ \\phi_{3}\\end{array}\\right]=0 \\quad \\alpha_{1}=1 \\quad \\alpha_{2}=3 \\quad \\alpha_{3}=4ä»¥ $\\alpha=1$ ä¸ºä¾‹è¿›è¡Œè¯´æ˜ï¼Œå°†å…¶å¸¦å…¥åˆ°æ–¹ç¨‹ä¸­å¯å¾—ï¼š $\\phi^{(i)}_n$çš„å–å€¼ä¹Ÿå¯ä»¥å–ä»»æ„éé›¶çš„å¸¸æ•°$\\alpha_i$ å°†å…¶æ±‚è§£å¯å¾—ï¼š$a_i\\phi^{(i)}$ (ä¹Ÿå¯ä»¥æ˜¯ç‰¹å¾å‘é‡) åœ¨ç‰¹å¾å‘é‡ä¸­è§„å®šæŸä¸ªå…ƒç´ çš„å€¼ä»¥ç¡®å®šå…¶ä»–å„å…ƒç´ çš„å€¼çš„è¿‡ç¨‹ç§°ä¸ºå½’ä¸€åŒ–å¤„ç†ã€‚ è¿™é‡Œè¦æ³¨æ„ï¼Œå½’ä¸€åŒ–ä»¥åï¼Œå‰é¢çš„æ–¹ç¨‹ä¸èƒ½ä¸º0 ç³»ç»Ÿåœ¨å„ä¸ªåæ ‡ä¸Šéƒ½å°†ä»¥ç¬¬ i é˜¶å›ºæœ‰é¢‘ç‡ $\\omega_i$ åšç®€è°æŒ¯åŠ¨ï¼Œå¹¶ä¸”åŒæ—¶é€šè¿‡é™å¹³è¡¡ä½ç½®ã€‚ \\left[\\begin{array}{c}x_{1}^{(i)}(t) \\\\ x_{2}^{(i)}(t) \\\\ \\vdots \\\\ x_{n}^{(i)}(t)\\end{array}\\right]=\\left[\\begin{array}{c}\\phi_{1}^{(i)} \\\\ \\phi_{2}^{(i)} \\\\ \\vdots \\\\ \\phi_{n}^{(i)}\\end{array}\\right] a_{i} \\sin \\left(\\omega_{i} t+\\varphi_{i}\\right) \\Rightarrow\\\\ \\frac{x_{1}^{(i)}(t)}{\\phi_{1}^{(i)}}=\\frac{x_{2}^{(i)}(t)}{\\phi_{2}^{(i)}}=\\ldots \\ldots=\\frac{x_{n}^{(i)}(t)}{\\phi_{n}^{(i)}}=a_{i} \\sin \\left(\\omega_{i} t+\\varphi_{i}\\right) ç¬¬ i é˜¶ç‰¹å¾å‘é‡$\\phi^{(i)}$ä¸­çš„ä¸€åˆ—å…ƒç´ ï¼Œå°±æ˜¯ç³»ç»Ÿåšç¬¬ i é˜¶ä¸»æŒ¯åŠ¨æ—¶å„ä¸ªåæ ‡ä¸Šä½ç§»ï¼ˆæˆ–æŒ¯å¹…ï¼‰çš„ç›¸å¯¹æ¯”å€¼ã€‚ $\\phi^{(i)}$ æè¿°äº†ç³»ç»Ÿåšç¬¬ i é˜¶ä¸»æŒ¯åŠ¨æ—¶å…·æœ‰çš„æŒ¯åŠ¨å½¢æ€ï¼Œç§°ä¸ºç¬¬ i é˜¶ä¸»æŒ¯å‹ï¼Œæˆ–æ˜¯æŒ¯å‹ã€‚ è™½ç„¶å„åæ ‡ä¸ŠæŒ¯å¹…çš„ç²¾ç¡®å€¼å¹¶æ²¡æœ‰ç¡®å®šï¼Œä½†æ˜¯æ‰€è¡¨ç°çš„ç³»ç»ŸæŒ¯åŠ¨å½¢æ€å·²ç¡®å®šã€‚ ä¸»æŒ¯åŠ¨ä»…å–å†³äºç³»ç»Ÿçš„M é˜µã€K é˜µç­‰ç‰©ç†å‚æ•°ï¼Œè¿™ä¸€é‡è¦æ¦‚å¿µæ˜¯å•è‡ªç”±åº¦ç³»ç»Ÿæ‰€æ²¡æœ‰çš„ã€‚ å°†æ¨¡æ€å åŠ å¯å¾—ï¼š(nä¸ªæ¨¡æ€çš„å åŠ ï¼Œæ¨¡æ€å åŠ æ³•) \\begin{align} \\boldsymbol{X}(t)&=\\boldsymbol{\\phi}^{(1)} a_{1} \\sin \\left(\\omega_{1} t+\\varphi_{1}\\right)+\\boldsymbol{\\phi}^{(2)} a_{2} \\sin \\left(\\omega_{2} t+\\varphi_{2}\\right)+\\ldots+\\boldsymbol{\\phi}^{(n)} a_{n} \\sin \\left(\\omega_{n} t+\\varphi_{n}\\right)\\\\ &=\\sum_{i=1}^{n} \\boldsymbol{\\phi}^{(i)} a_{i} \\sin \\left(\\omega_{i} t+\\varphi_{i}\\right) \\qquad a_{i}, \\varphi_{i}(i=1 \\sim n): åˆå§‹æ¡ä»¶å†³$ \\end{align} ç”±äºå„ä¸ªä¸»æŒ¯åŠ¨çš„å›ºæœ‰é¢‘ç‡ä¸ç›¸åŒï¼Œå¤šè‡ªç”±åº¦ç³»ç»Ÿçš„å›ºæœ‰æŒ¯åŠ¨ä¸€èˆ¬ä¸æ˜¯ç®€è°æŒ¯åŠ¨ï¼Œç”šè‡³ä¸æ˜¯å‘¨æœŸæŒ¯åŠ¨ ç›´æ¥æ³•æ±‚æ¨¡æ€ \\left(\\boldsymbol{K}-\\omega_{i}^{2} \\boldsymbol{M}\\right) \\boldsymbol{\\phi}^{(i)}=\\boldsymbol{0} \\quad \\boldsymbol{\\phi}^{(i)}=\\left[\\begin{array}{lll}\\phi_{1}^{(i)} & \\cdots & \\phi_{n}^{(i)}\\end{array}\\right]^{T} æ³¨æ„è¿™ç§æ–¹æ³•åªé™äºæ±‚è§£æ— é‡æ ¹æƒ…å†µä¸‹çš„ï¼Œå³ç‰¹å¾çŸ©é˜µçš„ç§©ä¸ºçŸ©é˜µçš„ç»´æ•°ï¼Œæˆ–ç‰¹å¾å¤šé¡¹å¼çš„è¡Œåˆ—å¼ä¸º0ã€‚ä½†æ˜¯ï¼Œå…¶å®åœ¨æ‰‹ç®—çš„æƒ…å†µä¸‹ï¼Œä¼´éšçŸ©é˜µä¸æ˜¯å¾ˆå¥½æ±‚çš„ï¼Œä¸€èˆ¬è¿˜æ˜¯ç”¨é—´æ¥æ³•ã€‚ ä¾‹ï¼šä¸¤è‡ªç”±åº¦å¼¹ç°§ï¼è´¨é‡ç³»ç»Ÿï¼Œæ±‚ï¼šå›ºæœ‰é¢‘ç‡å’Œä¸»æŒ¯å‹ åŠ¨åŠ›å­¦æ–¹ç¨‹: \\left[\\begin{array}{cc}m & 0 \\\\ 0 & 2 m\\end{array}\\right]\\left[\\begin{array}{c}\\ddot{x}_{1}(t) \\\\ \\ddot{x}_{2}(t)\\end{array}\\right]+\\left[\\begin{array}{cc}2 k & -k \\\\ -k & 3 k\\end{array}\\right]\\left[\\begin{array}{c}x_{1}(t) \\\\ x_{2}(t)\\end{array}\\right]=\\left[\\begin{array}{l}0 \\\\ 0\\end{array}\\right]ä»¤ä¸»æŒ¯åŠ¨ä¸ºï¼š \\left[\\begin{array}{l}x_{1}(t) \\\\ x_{2}(t)\\end{array}\\right]=\\left[\\begin{array}{l}\\phi_{1} \\\\ \\phi_{2}\\end{array}\\right] \\sin (\\omega t+\\varphi) \\\\ \\left(\\boldsymbol{K}-\\omega^{2} \\boldsymbol{M}\\right) \\boldsymbol{\\phi}=\\boldsymbol{0}æœ€åè§£å¾—ï¼š \\left[\\begin{array}{cc}2 k-m \\omega^{2} & -k \\\\ -k & 3 k-2 m \\omega^{2}\\end{array}\\right]\\left[\\begin{array}{l}\\phi_{1} \\\\ \\phi_{2}\\end{array}\\right]=\\left[\\begin{array}{l}0 \\\\ 0\\end{array}\\right] ç‰¹å¾æ–¹ç¨‹ä¸ºï¼š \\left|\\begin{array}{cc}2-\\alpha & -1 \\\\ -1 & 3-2 \\alpha\\end{array}\\right|=2 \\alpha^{2}-7 \\alpha+5=0 \\quad \\Rightarrow \\quad \\alpha_{1}=1, \\quad \\alpha_{2}=2.5 åˆ†åˆ«å¸¦å…¥ç‰¹å¾æ ¹ï¼Œå³ç‰¹å¾é¢‘ç‡ï¼Œæ±‚è§£æ¨¡æ€ï¼š ç”»å›¾ï¼šæ¨ªåæ ‡è¡¨ç¤ºé™å¹³è¡¡ä½ç½®ï¼Œçºµåæ ‡è¡¨ç¤ºä¸»æŒ¯å‹ä¸­å„å…ƒç´ çš„å€¼ ä¸¤ä¸ªè´¨é‡ä»¥$\\omega_1$ ä¸ºæŒ¯åŠ¨é¢‘ç‡ï¼ŒåŒæ—¶ç»è¿‡å„è‡ªçš„å¹³è¡¡ä½ç½®ï¼Œæ–¹å‘ç›¸åŒï¼Œè€Œä¸”æ¯ä¸€æ—¶åˆ»çš„ä½ç§»é‡éƒ½ç›¸åŒã€‚ ä¸¤ä¸ªè´¨é‡ä»¥ $ \\omega_2$ä¸ºæŒ¯åŠ¨é¢‘ç‡ï¼ŒåŒæ—¶ç»è¿‡å„è‡ªçš„å¹³è¡¡ä½ç½®ï¼Œæ–¹å‘ç›¸åï¼Œæ¯ä¸€æ—¶åˆ»ç¬¬ä¸€ä¸ªè´¨é‡çš„ä½ç§»éƒ½ç¬¬äºŒä¸ªè´¨é‡çš„ä½ç§»çš„ä¸¤å€ã€‚ å¦‚æœä¼ æ„Ÿå™¨æ”¾åœ¨èŠ‚ç‚¹ä½ç½®ï¼Œåˆ™æµ‹é‡çš„ä¿¡å·ä¸­å°†ä¸åŒ…å«æœ‰ç¬¬äºŒé˜¶æ¨¡æ€çš„ä¿¡æ¯ã€‚ ä¾‹ï¼šä¸‰è‡ªç”±åº¦å¼¹ç°§ï¼è´¨é‡ç³»ç»Ÿï¼Œæ±‚ï¼šå›ºæœ‰é¢‘ç‡å’Œä¸»æŒ¯å‹ åŠ¨åŠ›å­¦æ–¹ç¨‹ï¼š \\left[\\begin{array}{ccc}m & 0 & 0 \\\\ 0 & m & 0 \\\\ 0 & 0 & m\\end{array}\\right]\\left[\\begin{array}{l}\\ddot{x}_{1} \\\\ \\ddot{x}_{2} \\\\ \\ddot{x}_{3}\\end{array}\\right]+\\left[\\begin{array}{ccc}3 k & -k & 0 \\\\ -k & 2 k & -k \\\\ 0 & -k & 3 k\\end{array}\\right]\\left[\\begin{array}{l}x_{1} \\\\ x_{2} \\\\ x_{3}\\end{array}\\right]=\\left[\\begin{array}{l}0 \\\\ 0 \\\\ 0\\end{array}\\right] æ­¤æ—¶è®¾ä¸»æŒ¯åŠ¨åŠ›ï¼š \\left[\\begin{array}{l}x_{1} \\\\ x_{2} \\\\ x_{3}\\end{array}\\right]=\\left[\\begin{array}{l}\\phi_{1} \\\\ \\phi_{2} \\\\ \\phi_{3}\\end{array}\\right] \\sin (\\omega t+\\varphi) \\quad or \\quad\\left(\\boldsymbol{K}-\\omega^{2} \\boldsymbol{M}\\right) \\boldsymbol{\\phi}=\\boldsymbol{0} \\left[\\begin{array}{ccc}3 k-m \\omega^{2} & -k & 0 \\\\-k & 2 k-m \\omega^{2} & -k \\\\0 & -1 & 3 k-m \\omega^{2}\\end{array}\\right]\\left[\\begin{array}{l}\\phi_{1} \\\\\\phi_{2} \\\\\\phi_{3}\\end{array}\\right]=\\left[\\begin{array}{l}0 \\\\0 \\\\0\\end{array}\\right] æˆ–è€…ï¼Œæˆ‘ä»¬æ±‚è§£ç‰¹å¾çŸ©é˜µçš„ä¼´éšçŸ©é˜µå¯å¾—ï¼š adj \\left[\\begin{array}{ccc}3-\\alpha & -1 & 0 \\\\ -1 & 2-\\alpha & -1 \\\\ 0 & -1 & 3-\\alpha\\end{array}\\right]=\\left[\\begin{array}{ccc}(3-\\alpha)(2-\\alpha)-1 & 3-\\alpha & 1 \\\\ 3-\\alpha & (3-\\alpha)^{2} & 3-\\alpha \\\\ 1 & 3-\\alpha & (3-\\alpha)(2-\\alpha)-1\\end{array}\\right]ä¹‹åï¼Œå°†$\\alpha_{1}=1, \\quad \\alpha_{2}=3, \\quad \\alpha_{3}=4$ åˆ†åˆ«ä»£å…¥åˆ°æ–¹ç¨‹ä¸­ï¼š \\phi^{(1)}=\\left[\\begin{array}{l}1 \\\\ 2 \\\\ 1\\end{array}\\right], \\quad \\phi^{(2)}=\\left[\\begin{array}{c}-1 \\\\ 0 \\\\ 1\\end{array}\\right], \\quad \\phi^{(3)}=\\left[\\begin{array}{c} 1\\\\ -1 \\\\ 1\\end{array}\\right] ç¬¬ä¸€èŠ‚æŒ¯å‹æ²¡æœ‰èŠ‚ç‚¹ï¼Œç¬¬äºŒé˜¶æŒ¯å‹æœ‰1 ä¸ªèŠ‚ç‚¹ï¼Œç¬¬ä¸‰é˜¶æŒ¯å‹æœ‰2 ä¸ªèŠ‚ç‚¹ï¼Œè¿™ç”±ä¸»æŒ¯å‹å†…å…ƒç´ ç¬¦å·å˜å·çš„æ¬¡æ•°å¯ä»¥åˆ¤æ–­å‡º è¦è®¾è®¡ä¼ æ„Ÿå™¨çš„ä½ç½®ï¼Œä½¿å¾—æˆ‘ä»¬çš„æµ‹é‡çš„ä¿¡æ¯å°½å¯èƒ½çš„å…¨ã€‚ å°ç»“ï¼š","link":"/2022/03/13/%E6%8C%AF%E5%8A%A8%E5%8A%9B%E5%AD%A6/%E7%AC%AC%E5%9B%9B%E7%AB%A0-%E5%A4%9A%E8%87%AA%E7%94%B1%E5%BA%A6%E7%B3%BB%E7%BB%9F%E6%8C%AF%E5%8A%A8-%E5%A4%9A%E8%87%AA%E7%94%B1%E5%BA%A6%E7%B3%BB%E7%BB%9F%E7%9A%84%E8%87%AA%E7%94%B1%E6%8C%AF%E5%8A%A8-%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86/"},{"title":"ç¬¬å››ç«  å¤šè‡ªç”±åº¦ç³»ç»ŸæŒ¯åŠ¨ å¤šè‡ªç”±åº¦ç³»ç»Ÿçš„è‡ªç”±æŒ¯åŠ¨ ç¬¬äºŒéƒ¨åˆ†","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦ä»‹ç»çš„æ˜¯å¤šè‡ªç”±æŒ¯åŠ¨ç³»ç»Ÿä¸­å¤šè‡ªç”±åº¦ç³»ç»Ÿçš„è‡ªç”±æŒ¯åŠ¨éƒ¨åˆ†ï¼Œä¸»è¦ä»‹ç»æ¨¡æ€çš„æ­£äº¤æ€§ã€ä¸»è´¨é‡å’Œä¸»åˆšåº¦ã€æ¨¡æ€å åŠ æ³•çš„ä½¿ç”¨ä»¥åŠæ¨¡æ€æˆªæ–­æ³•çš„åº”ç”¨ã€‚ æ¨¡æ€çš„æ­£äº¤æ€§ï¼Œä¸»è´¨é‡å’Œä¸»åˆšåº¦ K \\phi^{(i)}=\\omega_{i}^{2} M \\phi^{(i)} \\Rightarrow \\phi^{(i)^{T}} K \\phi^{(j)}=\\omega_{i}^{2} \\phi^{(i)^{T}} M \\phi^{(j)} \\quad æ ‡é‡ \\\\ K \\phi^{(j)}=\\omega_{i}^{2} M \\phi^{(j)} \\Rightarrow \\phi^{(i)^{T}} K \\phi^{(j)}=\\omega_{j}^{2} \\phi^{(i)^{T}} M \\phi^{(j)} \\quad æ ‡é‡ \\\\ å½“ $i \\ne j$ æ—¶ï¼Œ$\\omega_i \\ne \\omega_j$ ,æ­¤æ—¶ $\\phi^{(i)^{T}} M \\phi^{(j)}=0 $ å³æœ‰è´¨é‡çš„æ­£äº¤æ€§ï¼› åŒç†å¸¦å…¥åŸå¼ä¸­å¯å¾—ï¼š$\\phi^{(i)^{T}} K \\phi^{(j)}=0 $ æ­¤æ—¶åˆšåº¦å…·æœ‰æ­£äº¤æ€§ã€‚ å½“ $i=j$ æ—¶ï¼Œ $\\phi^{(i)^{T}} M \\phi^{(j)}=m_{pi}$ ç¬¬ i é˜¶æ¨¡æ€çš„ä¸»è´¨é‡ $\\phi^{(i)^{T}} K \\phi^{(j)}=k_{pi} $ ç¬¬ i é˜¶æ¨¡æ€çš„ä¸»åˆšåº¦ ç¬¬ i é˜¶å›ºæœ‰é¢‘ç‡ï¼š$\\omega_i=\\dfrac {k_{pi}} {m_{pi}} \\quad (i=1,2\\cdots n)$ è¿™é‡Œç»™æ¨¡æ€ä¹˜ä»¥ä¸€ä¸ªç³»æ•°ï¼Œè®©ä¸»è´¨é‡å˜ä¸º1ï¼Œä¸»åˆšåº¦ä¹Ÿå˜æˆäº†å›ºæœ‰é¢‘ç‡çš„å¹³æ–¹ã€‚ åˆ©ç”¨æ¨¡æ€ä¹‹é—´çš„æ­£äº¤æ€§å¯ä»¥å®ç°è´¨é‡çŸ©é˜µå’Œåˆšåº¦çŸ©é˜µå®ç°è§£è€¦ã€‚ å¯¹äºä¸»æŒ¯å‹å°† $ \\boldsymbol{\\phi}^{(i)}(i=1 \\sim n) $ ç»„æˆçŸ©é˜µ $ \\boldsymbol{\\Phi}=\\left[\\begin{array}{lll}\\boldsymbol{\\phi}^{(1)} &amp; \\cdots &amp; \\boldsymbol{\\phi}^{(n)}\\end{array}\\right] \\in R^{n \\times n} $æŒ¯å‹çŸ©é˜µ \\left\\{\\begin{array}{ll}\\boldsymbol{\\Phi}^{T} \\boldsymbol{M} \\boldsymbol{\\Phi}=\\operatorname{diag}\\left(m_{p 1}, \\cdots, m_{p n}\\right)=\\boldsymbol{M}_{p} & \\text { ä¸»è´¨é‡çŸ©é˜µ } \\\\ \\boldsymbol{\\Phi}^{T} \\boldsymbol{K} \\boldsymbol{\\Phi}=\\operatorname{diag}\\left(k_{p 1}, \\cdots, k_{p n}\\right)=\\boldsymbol{K}_{p} & \\text { ä¸»åˆšåº¦çŸ©é˜µ }\\end{array}\\right. \\begin{align} \\boldsymbol{\\Phi}^{T} \\boldsymbol{M} \\boldsymbol{\\Phi}&=\\left[\\begin{array}{llll}\\boldsymbol{\\phi}^{(1)} & \\cdots & \\boldsymbol{\\phi}^{(n)}\\end{array}\\right]^{T} \\boldsymbol{M}\\left[\\begin{array}{lll}\\boldsymbol{\\phi}^{(1)} & \\cdots & \\boldsymbol{\\phi}^{(n)}\\end{array}\\right] \\\\ &=\\left[\\begin{array}{c}\\boldsymbol{\\phi}^{(1)^{T}} \\\\ \\vdots \\\\ \\boldsymbol{\\phi}^{(n)^{T}}\\end{array}\\right] \\boldsymbol{M}\\left[\\begin{array}{lll}\\boldsymbol{\\phi}^{(1)} & \\cdots & \\boldsymbol{\\phi}^{(n)}\\end{array}\\right] =\\left[\\begin{array}{c}\\boldsymbol{\\phi}^{(1)^{T}} \\boldsymbol{M} \\\\ \\vdots \\\\ \\boldsymbol{\\phi}^{(n)^{T}} \\boldsymbol{M}\\end{array}\\right]\\left[\\begin{array}{lll}\\boldsymbol{\\phi}^{(1)} & \\cdots & \\boldsymbol{\\phi}^{(n)}\\end{array}\\right] \\\\ &=\\left[\\begin{array}{ccc}\\boldsymbol{\\phi}^{(1)^{T}} \\boldsymbol{M} \\boldsymbol{\\phi}^{(1)} & \\cdots & \\boldsymbol{\\phi}^{(1)^{T}} \\boldsymbol{M} \\boldsymbol{\\phi}^{(n)} \\\\ \\vdots & \\ddots & \\vdots \\\\ \\boldsymbol{\\phi}^{(n)^{T}} \\boldsymbol{M} \\boldsymbol{\\phi}^{(1)} & \\cdots & \\boldsymbol{\\phi}^{(n)^{T}} \\boldsymbol{M} \\boldsymbol{\\phi}^{(n)}\\end{array}\\right]=\\left[\\begin{array}{ccc}m_{p 1} & & 0 \\\\ & \\ddots & \\\\ 0 & & m_{p n}\\end{array}\\right] \\end{align}å¯¹æ­£åˆ™æŒ¯å‹å°† $ \\boldsymbol{\\phi}^{(i)}_N(i=1 \\sim n) $ ç»„æˆçŸ©é˜µ $ \\boldsymbol{\\Phi}_N=\\left[\\begin{array}{lll}\\boldsymbol{\\phi}^{(1)}_N &amp; \\cdots &amp; \\boldsymbol{\\phi}^{(n)}_N\\end{array}\\right] \\in R^{n \\times n} $æ­£åˆ™æŒ¯å‹çŸ©é˜µ \\left\\{\\begin{array}{ll}\\boldsymbol{\\Phi}^{T}_N \\boldsymbol{M} \\boldsymbol{\\Phi}_N=I & \\text { å•ä½çŸ©é˜µ } \\\\ \\boldsymbol{\\Phi}^{T}_N \\boldsymbol{K} \\boldsymbol{\\Phi}_N= \\boldsymbol{\\Lambda}& \\text { è°±çŸ©é˜µ }\\end{array}\\right.\\qquad \\boldsymbol{\\Lambda}=\\left[\\begin{array}{lll}\\omega_{1}^{2} & & \\\\ & \\ddots & \\\\ & & \\omega_{n}^{2}\\end{array}\\right] ä¾æ¬¡å–$i=1 \\sim n$ ï¼Œå¾—åˆ°çš„ n ä¸ªæ–¹ç¨‹ï¼Œå¯åˆå†™ä¸ºï¼š$K \\Phi=M \\Phi \\Lambda$ å·¦ä¹˜ $\\boldsymbol{\\Phi}^{T}$ å¯å¾—: $\\boldsymbol{K}_{p}=\\boldsymbol{M}_{p} \\boldsymbol{\\Lambda} ,\\quad \\boldsymbol{\\Lambda}=\\boldsymbol{M}_{p}^{-1} \\boldsymbol{K}_{p}$ ä¸éš¾éªŒè¯, æœ‰: $\\boldsymbol{\\Phi}_{N}^{T} \\boldsymbol{K} \\boldsymbol{\\Phi}_{N}=\\boldsymbol{\\Lambda} \\quad \\boldsymbol{\\Phi}_{N}^{T} \\boldsymbol{M}\\boldsymbol{\\Phi}_{N}=\\boldsymbol{I}$ æ­¤æ—¶çš„æ­£åˆ™æŒ¯å‹çŸ©é˜µä¸ºï¼š \\boldsymbol{\\Phi}_{N}=\\left[\\frac{\\phi^{(1)}}{\\sqrt{m_{p 1}}}, \\frac{\\phi^{(2)}}{\\sqrt{m_{p 2}}}, \\frac{\\phi^{(3)}}{\\sqrt{m_{p 3}}}\\right]=\\frac{1}{\\sqrt{6 m}}\\left[\\begin{array}{ccc}1 & -\\sqrt{3} & \\sqrt{2} \\\\ 2 & 0 & -\\sqrt{2} \\\\ 1 & \\sqrt{3} & \\sqrt{2}\\end{array}\\right]\\\\æ­£åˆ™æŒ¯å‹å’Œä¸»æŒ¯å‹ä¹‹é—´çš„å…³ç³»ï¼š$\\boldsymbol{\\phi}_{N}^{(i)}=\\dfrac{1}{\\sqrt{m_{p i}}} \\boldsymbol{\\phi}^{(i)} $ æ¨¡æ€å åŠ æ³•ä¸»è¦çš„ä¸¤ç§æ¨¡æ€åæ ‡ä¸¤ç§ä¸»è¦çš„æ¨¡æ€çš„åæ ‡ï¼š ä¸»æ¨¡æ€åæ ‡ï¼š$X_P=[x_{p1},x_{p2},\\cdots,x_{pn}]^T$ï¼› æ­£åˆ™æ¨¡æ€åæ ‡ï¼š$X_N=[x_{N1},x_{N2},\\cdots,x_{Nn}]^T$ æ¨¡æ€ $\\phi^{(i)} \\ (i=1 \\sim n)$ ï¼Œç›¸äº’æ­£äº¤ï¼Œè¡¨æ˜å®ƒä»¬æ˜¯çº¿æ€§ç‹¬ç«‹çš„ï¼Œå¯ç”¨äºæ„æˆn ç»´ç©ºé—´çš„åŸºã€‚ ç³»ç»Ÿçš„ä»»æ„ n ç»´è‡ªç”±æŒ¯åŠ¨å¯å”¯ä¸€åœ°è¡¨ç¤ºä¸ºå„é˜¶æŒ¯å‹çš„çº¿æ€§ç»„åˆ \\boldsymbol{X}=\\sum_{i=1}^{n} \\boldsymbol{\\phi}^{(i)} x_{p i} \\quad \\boldsymbol{X} \\in R^{n} \\quad \\boldsymbol{\\phi}^{(i)} \\in R^{n \\times 1} ç³»ç»Ÿåœ¨æ­£åˆ™æ¨¡æ€çš„åæ ‡ä¸‹ï¼Œå“åº”çš„è¡¨è¾¾å¼ä¸ºï¼š \\boldsymbol{X}=\\boldsymbol{\\Phi_N}X_N=\\sum_{i=1}^{n} \\boldsymbol{\\phi}^{(i)}_N x_{N i} \\quad \\boldsymbol{X} \\in R^{n} \\quad \\boldsymbol{\\phi}^{(i)} \\in R^{n \\times 1} å°ç»“ï¼š æ±‚è§£æ— é˜»å°¼ç³»ç»Ÿå¯¹åˆå§‹æ¡ä»¶çš„å“åº”æ±‚è§£çš„åŸºæœ¬é—®é¢˜ï¼š \\left\\{\\begin{array}{l}\\boldsymbol{M} \\ddot{\\boldsymbol{X}}+\\boldsymbol{K} \\boldsymbol{X}=0 \\quad \\boldsymbol{X} \\in R^{n}\\\\ \\boldsymbol{X}(0)=\\boldsymbol{X}_{0}, \\dot{\\boldsymbol{X}}(0)=\\dot{\\boldsymbol{X}}_{0} \\quad \\boldsymbol{M} ã€ \\boldsymbol{K} \\in R^{n \\times n}\\\\ \\end{array}\\right.\\\\ \\boldsymbol{X}_{0}=\\left[x_{1}(0), x_{2}(0), \\cdots, x_{n}(0)\\right]^{T} \\quad \\dot{\\boldsymbol{X}}_{0}=\\left[\\dot{x}_{1}(0), \\dot{x}_{2}(0), \\cdots, \\dot{x}_{n}(0)\\right]^{T}å¯åˆ†åˆ«é‡‡ç”¨ä¸¤ç±»æ¨¡æ€åæ ‡æ±‚è§£ ä¸»æ¨¡æ€åæ ‡æ±‚è§£ æ­¤æ—¶å¯ä»¥è½¬æ¢ä¸ºnä¸ªå•è‡ªç”±åº¦çš„é—®é¢˜ï¼Œå³å°†ç‰©ç†ç©ºé—´è€¦åˆçš„é—®é¢˜ï¼Œè½¬åŒ–ä¸ºæ¨¡æ€ç©ºé—´çš„è§£è€¦çš„é—®é¢˜ã€‚ m_{p i} \\ddot{x}_{p i}+k_{p i} x_{p i}=0 \\quad(i=1 \\sim n)\\\\ x_{p i}=x_{p i}(0) \\cos \\omega_{i} t+\\frac{\\dot{x}_{p i}(0)}{\\omega} \\sin \\omega_{i} t \\quad(i=1 \\sim n)åœ¨æ±‚å¾— $x_{pi} (i=1,2,â€¦ n)$ åï¼Œå¯åˆ©ç”¨ $\\boldsymbol{X}=\\boldsymbol{\\Phi}\\boldsymbol{X_P} $ å¼æ±‚å¾—åŸç³»ç»Ÿçš„è§£ã€‚ æ­£åˆ™æ¨¡æ€åæ ‡æ±‚è§£ \\ddot{x}_{N i}+\\omega_{i}^{2} x_{N i}=0, \\quad(i=1 \\sim n)\\\\ x_{N i}=x_{N i}(0) \\cos \\omega_{i} t+\\frac{\\dot{x}_{N i}(0)}{\\omega_{i}} \\sin \\omega_{i} t, \\quad(i=1 \\sim n)åœ¨æ±‚å¾— $x_{Ni} (i=1,2,â€¦ n)$ åï¼Œå¯åˆ©ç”¨ $\\boldsymbol{X}=\\boldsymbol{\\Phi}\\boldsymbol{X_N} $ å¼æ±‚å¾—åŸç³»ç»Ÿçš„è§£ã€‚ ä¾‹é¢˜ä¾‹ï¼šä¸‰è‡ªç”±åº¦å¼¹ç°§ï¼è´¨é‡ç³»ç»Ÿï¼Œæ±‚ï¼šç³»ç»Ÿåœ¨åˆå§‹æ¡ä»¶ä¸‹çš„å“åº”ã€‚ é¦–å…ˆï¼Œæ±‚è§£å‡ºåŠ¨åŠ›å­¦æ–¹ç¨‹ï¼š \\left[\\begin{array}{ccc}m & 0 & 0 \\\\ 0 & m & 0 \\\\ 0 & 0 & m\\end{array}\\right]\\left[\\begin{array}{l}\\ddot{x}_{1} \\\\ \\ddot{x}_{2} \\\\ \\ddot{x}_{3}\\end{array}\\right]+\\left[\\begin{array}{ccc}3 k & -k & 0 \\\\ -k & 2 k & -k \\\\ 0 & -k & 3 k\\end{array}\\right]\\left[\\begin{array}{l}x_{1} \\\\ x_{2} \\\\ x_{3}\\end{array}\\right]=\\left[\\begin{array}{l}0 \\\\ 0 \\\\ 0\\end{array}\\right]å›ºæœ‰é¢‘ç‡ï¼š$\\omega_{1}=\\sqrt{k / m}ã€\\omega_{2}=\\sqrt{3 k / m}ã€\\omega_{3}=2 \\sqrt{k / m}$ æ­£åˆ™æŒ¯å‹çš„çŸ©é˜µï¼š$\\boldsymbol{\\Phi}_N=\\dfrac 1 {\\sqrt{6m}}\\left[\\begin{array}{ccc}1 &amp; -\\sqrt 3 &amp; \\sqrt 2 \\\\ 2 &amp; 0 &amp; -\\sqrt 2 \\\\ 1 &amp; \\sqrt 3 &amp; \\sqrt 2\\end{array}\\right] $ æ­¤æ—¶ï¼Œå¸¦å…¥æ¨¡æ€åæ ‡çš„åˆå§‹æ¡ä»¶ï¼š \\boldsymbol{X}_{N}(0)=\\boldsymbol{\\Phi}_{N}^{-1} \\boldsymbol{X}_{0}=\\sqrt{m / 6}\\left[\\begin{array}{c}6 \\\\ -2 \\sqrt{3} \\\\ 0\\end{array}\\right] \\quad \\dot{\\boldsymbol{X}}_{N}(0)=\\boldsymbol{\\Phi}_{N}^{-1} \\dot{\\boldsymbol{X}}_{0}=\\left[\\begin{array}{l}0 \\\\ 0 \\\\ 0\\end{array}\\right]ä»£å…¥å…¬å¼å¾—æ¨¡æ€åæ ‡çš„å“åº”ï¼š \\boldsymbol{X}_{N}=\\left[\\begin{array}{c}x_{N 1} \\\\ {x_{N 2}} \\\\ {x_{N 3}}\\end{array}\\right]=\\sqrt{\\frac{m}{6}}\\left[\\begin{array}{c}6 \\cos \\omega_{1} t \\\\ -2 \\sqrt{3} \\cos \\omega_{2} t \\\\ 0\\end{array}\\right]\\\\x_{N i}=x_{N i}(0) \\cos \\omega_{i} t+\\frac{\\dot{x}_{N i}(0)}{\\omega_{i}} \\sin \\omega_{i} tæ­¤æ—¶åŸç‰©ç†ç©ºé—´çš„å“åº”ä¸ºï¼š \\begin{aligned} \\boldsymbol{X}(t) &=\\left[\\begin{array}{l}x_{1}(t) \\\\ x_{2}(t) \\\\ x_{3}(t)\\end{array}\\right]=\\boldsymbol{\\Phi}_{N} \\boldsymbol{X}_{N}=\\frac{1}{\\sqrt{6 m}}\\left[\\begin{array}{ccc}1 & -\\sqrt{3} & \\sqrt{2} \\\\ 2 & 0 & -\\sqrt{2} \\\\ 1 & \\sqrt{3} & \\sqrt{2}\\end{array}\\right] \\times \\sqrt{\\frac{m}{6}}\\left[\\begin{array}{c}6 \\cos \\omega_{1} t \\\\ -2 \\sqrt{3} \\cos \\omega_{2} t \\\\ 0\\end{array}\\right] \\\\ &=\\left[\\begin{array}{l}\\cos \\omega_{1} t+\\cos \\omega_{2} t \\\\ 2 \\cos \\omega_{1} t \\\\ \\cos \\omega_{1} t-\\cos \\omega_{2} t\\end{array}\\right] \\end{aligned} å°ç»“ï¼š è¿™é‡Œçš„å åŠ å…¶å®å°±æ˜¯å°†æ¨¡æ€ç©ºé—´çš„æŒ¯å‹åˆ†åˆ«äºå¯¹äºçš„è½¬æ¢çŸ©é˜µç›¸ä¹˜åå åŠ æ¥æ±‚è§£æœ€ååœ¨ç‰©ç†ç©ºé—´çš„æŒ¯åŠ¨æƒ…å†µã€‚ æ¨¡æ€æˆªæ–­æ³• å¯¹è‡ªç”±åº¦æ•°n å¾ˆå¤§çš„å¤æ‚æŒ¯åŠ¨ç³»ç»Ÿï¼Œä¸å¯èƒ½æ±‚å‡ºå…¨éƒ¨çš„å›ºæœ‰é¢‘ç‡å’Œç›¸åº”çš„ä¸»æŒ¯å‹ï¼Œç„¶åç”¨æŒ¯å‹å åŠ æ³•åˆ†æç³»ç»Ÿå¯¹æ¿€åŠ±çš„å“åº” å½“æ¿€åŠ±é¢‘ç‡ä¸»è¦åŒ…å«ä½é¢‘æˆåˆ†æ—¶ï¼Œå¯ä»¥æ’‡å»é«˜é˜¶æŒ¯å‹åŠå›ºæœ‰é¢‘ç‡å¯¹å“åº”çš„è´¡çŒ®ï¼Œè€Œåªåˆ©ç”¨è¾ƒä½çš„å‰é¢è‹¥å¹²é˜¶å›ºæœ‰é¢‘ç‡åŠä¸»æŒ¯å‹è¿‘ä¼¼åˆ†æç³»ç»Ÿå“åº” å—è¿«æŒ¯åŠ¨æ—¶ï¼Œé«˜é˜¶é¢‘ç‡çš„æŒ¯åŠ¨å¯¹ç³»ç»Ÿçš„å½±å“éå¸¸å°ï¼Œå¯ä»¥å¿½ç•¥ã€‚ å¯¹äºn è‡ªç”±åº¦ç³»ç»Ÿï¼Œå°†å‰ r é˜¶æŒ¯å‹$\\Phi^{(r)} (i=1,2,â€¦,r)$ ç»„æˆçš„æˆªæ–­æŒ¯å‹çŸ©é˜µè®°ä¸º : $\\boldsymbol{\\Phi}^{*}=\\left[\\begin{array}{llll}\\boldsymbol{\\phi}^{(1)} &amp; \\boldsymbol{\\phi}^{(2)} &amp; \\ldots &amp; \\boldsymbol{\\phi}^{(r)}\\end{array}\\right] \\in R^{n \\times r}$ è¿™é‡Œ$\\boldsymbol{\\Phi}^{*}$ è¦å’ŒMç›¸ä¹˜ï¼Œè¿™é‡ŒMæ˜¯$n\\times n$çš„. æˆªæ–­çš„ä¸»è´¨é‡çŸ©é˜µå’Œä¸»åˆšåº¦çŸ©é˜µ ç³»ç»Ÿçš„ä»»æ„n é˜¶æŒ¯åŠ¨è¿‘ä¼¼åœ°è¡¨ç¤ºä¸ºæˆªæ–­åçš„ r é˜¶æ¨¡æ€çš„çº¿æ€§ç»„åˆï¼š \\boldsymbol{X}=\\sum_{i=1}^{r} \\boldsymbol{\\phi}^{(i)} \\boldsymbol{X}_{p i}=\\boldsymbol{\\Phi}^{*} \\boldsymbol{X}_{p}^{*}â€‹ $ \\boldsymbol{X}_{p}^{*} $ æˆªæ–­åçš„ä¸»åæ ‡åˆ—é˜µ $\\quad \\boldsymbol{X}_{p}^{*}=\\left[\\begin{array}{llll}x_{p 1} &amp; x_{p 2} &amp; \\ldots &amp; x_{p r}\\end{array}\\right]^{T} $ åˆ©ç”¨æ¨¡æ€æˆªæ–­æ³•å¯å°†n è‡ªç”±åº¦ç³»ç»ŸåŸæœ‰çš„n ä¸ªåæ ‡å˜æ¢æˆè¾ƒå°‘çš„å‰ r ä¸ªä¸»åæ ‡","link":"/2022/03/13/%E6%8C%AF%E5%8A%A8%E5%8A%9B%E5%AD%A6/%E7%AC%AC%E5%9B%9B%E7%AB%A0-%E5%A4%9A%E8%87%AA%E7%94%B1%E5%BA%A6%E7%B3%BB%E7%BB%9F%E6%8C%AF%E5%8A%A8-%E5%A4%9A%E8%87%AA%E7%94%B1%E5%BA%A6%E7%B3%BB%E7%BB%9F%E7%9A%84%E8%87%AA%E7%94%B1%E6%8C%AF%E5%8A%A8-%E7%AC%AC%E4%BA%8C%E9%83%A8%E5%88%86/"},{"title":"ç¬¬å››ç«  å¤šè‡ªç”±åº¦ç³»ç»ŸæŒ¯åŠ¨ å¤šè‡ªç”±ç³»ç»Ÿçš„å—è¿«æŒ¯åŠ¨","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦ä»‹ç»çš„æ˜¯å¤šè‡ªç”±æŒ¯åŠ¨ç³»ç»Ÿä¸­å¤šè‡ªç”±åº¦ç³»ç»Ÿçš„å—è¿«æŒ¯åŠ¨ï¼Œä¸»è¦ä»‹ç»ç³»ç»Ÿå¯¹ç®€è°åŠ›æ¿€åŠ±çš„å“åº”ã€åŠ¨åŠ›å¸æŒ¯å™¨å’ŒæŒ¯å‹å åŠ æ³•æ±‚è§£ä»»æ„æ¿€åŠ±ä¸‹å“åº”ã€‚ ç³»ç»Ÿå¯¹ç®€è°åŠ›æ¿€åŠ±çš„å“åº”å›é¡¾å•è‡ªç”±åº¦çš„ç®€è°æ¿€åŠ±çš„æƒ…å†µï¼š å¤šè‡ªç”±åº¦ç³»ç»Ÿå—åˆ°å¤–åŠ›æ¿€åŠ±æ‰€äº§ç”Ÿçš„è¿åŠ¨ä¸ºå—è¿«è¿åŠ¨ è®¾ n è‡ªç”±åº¦ç³»ç»Ÿæ²¿å„ä¸ªå¹¿ä¹‰åæ ‡å‡å—åˆ°é¢‘ç‡å’Œç›¸ä½ç›¸åŒçš„å¹¿ä¹‰ç®€è°åŠ›çš„æ¿€åŠ± å—è¿«æŒ¯åŠ¨æ–¹ç¨‹ï¼š$ \\boldsymbol{M} \\ddot{\\boldsymbol{X}}(t)+\\boldsymbol{K} \\boldsymbol{X}(t)=\\boldsymbol{F}_{0} e^{i \\omega t} \\quad \\boldsymbol{X} \\in R^{n} $ ç¨³æ€è§£ï¼š$\\boldsymbol{X}(t)=\\overline{\\boldsymbol{X}} e^{i \\omega t} \\quad \\overline{\\boldsymbol{X}} \\in R^{n} $ æŒ¯å¹…åˆ—å‘é‡ ï¼š$ \\overline{\\boldsymbol{X}}=\\left[\\begin{array}{llll}\\bar{X}_{1} &amp; \\bar{X}_{2} &amp; \\ldots \\ldots &amp; \\bar{X}_{n}\\end{array}\\right]^{T} $ æœ€åå¯å¾—ï¼š \\left(\\boldsymbol{K}-\\omega^{2} \\boldsymbol{M}\\right) \\overline{\\boldsymbol{X}}=\\boldsymbol{F}_{0} æ­¤æ—¶è®°$H(\\omega)=\\left[\\boldsymbol{K}-\\omega^{2} \\boldsymbol{M}\\right]^{-1}$ å¤šè‡ªç”±åº¦ç³»ç»Ÿçš„å¹…é¢‘å“åº”çŸ©é˜µ åˆ™æœ‰$\\overline{\\boldsymbol{X}}=HF_0 \\quad X(t)=HF_0e^{i\\omega t}$ ç®€è°æ¿€åŠ±ä¸‹ï¼Œç³»ç»Ÿç¨³æ€å“åº”ä¹Ÿä¸ºç®€è°å“åº”ï¼Œå¹¶ä¸”æŒ¯åŠ¨é¢‘ç‡ä¸ºå¤–éƒ¨æ¿€åŠ±çš„é¢‘ç‡ï¼Œä½†æ˜¯å„ä¸ªè‡ªç”±åº¦ä¸Šçš„æŒ¯å¹…å„ä¸ç›¸åŒã€‚ åœ¨å®é™…çš„å·¥ç¨‹ä¸­ï¼šé˜»æŠ—çŸ©é˜µ$\\left(\\boldsymbol{K}-\\omega^{2} \\boldsymbol{M}\\right)$ ,å¯¼çº³çŸ©é˜µ $H(\\omega)=\\left[\\boldsymbol{K}-\\omega^{2} \\boldsymbol{M}\\right]^{-1}$ $H_{ij}$çš„ç‰©ç†æ„ä¹‰ä¸ºä»…æ²¿ j åæ ‡ä½œç”¨é¢‘ç‡ä¸º $\\omega$ çš„å•ä½å¹…åº¦ç®€è°åŠ›æ—¶ï¼Œæ²¿ i åæ ‡æ‰€å¼•èµ·çš„å—è¿«æŒ¯åŠ¨çš„å¤æŒ¯å¹…ã€‚ H(\\omega)=\\left[\\boldsymbol{K}-\\omega^{2} \\boldsymbol{M}\\right]^{-1}=\\dfrac {adj(\\boldsymbol{K}-\\omega^{2} \\boldsymbol{M})} {|\\boldsymbol{K}-\\omega^{2} \\boldsymbol{M}|}å½“å¤–éƒ¨æ¿€åŠ±é¢‘ç‡æ¥è¿‘ç³»ç»Ÿä»»ä¸€é˜¶å›ºæœ‰é¢‘ç‡æ—¶ï¼š$|\\boldsymbol{K}-\\omega^{2} \\boldsymbol{M}|=0$ ï¼Œå—è¿«æŒ¯åŠ¨çš„æŒ¯å¹…æ— é™å¢å¤§ï¼Œäº§ç”Ÿå…±æŒ¯ã€‚ å¦‚æœç³»ç»Ÿåˆnä¸ªä¸åŒçš„å›ºæœ‰é¢‘ç‡ï¼Œä¹Ÿå°±åˆnä¸ªå…±æŒ¯ç‚¹ã€‚ åŠ¨åŠ›å¸æŒ¯å™¨åŠ¨åŠ›å¸æŒ¯å™¨çš„åŸºæœ¬åŸç†è®¸å¤šæœºå™¨æˆ–éƒ¨ä»¶ç”±äºæ—‹è½¬éƒ¨åˆ†çš„è´¨é‡åå¿ƒè€Œäº§ç”Ÿå¼ºè¿«æŒ¯åŠ¨ï¼Œä¸ºå‡å°è¿™ç§æŒ¯åŠ¨æœ‰æ—¶å¯ä»¥é‡‡ç”¨åŠ¨åŠ›å¸æŒ¯å™¨ å¿½ç•¥ä¸»ç³»ç»Ÿé˜»å°¼ ï¼Œ ä¸»ç³»ç»Ÿå›ºæœ‰é¢‘ç‡ï¼š$\\omega_1=\\sqrt{\\dfrac {k_1}{m_1}}$ ä¸ºäº†æŠ‘åˆ¶ä¸»ç³»ç»Ÿçš„æŒ¯åŠ¨ï¼Œåœ¨ä¸»ç³»ç»Ÿä¸Šé™„åŠ ä¸€ä¸ªå¼¹ç°§-è´¨é‡ç³»ç»Ÿ ç³»ç»Ÿå¼ºè¿«æŒ¯åŠ¨çš„æ–¹ç¨‹ï¼š \\left[\\begin{array}{cc}m_{1} & 0 \\\\ 0 & m_{2}\\end{array}\\right]\\left[\\begin{array}{l}\\ddot{x}_{1}(t) \\\\ \\ddot{x}_{2}(t)\\end{array}\\right]+\\left[\\begin{array}{cc}c & -c \\\\ -c & c\\end{array}\\right]\\left[\\begin{array}{c}\\dot{x}_{1}(t) \\\\ \\dot{x}_{2}(t)\\end{array}\\right]+\\left[\\begin{array}{cc}k_{1}+k_{2} & -k_{2} \\\\ -k_{2} & k_{2}\\end{array}\\right]\\left[\\begin{array}{l}x_{1}(t) \\\\ x_{2}(t)\\end{array}\\right]=\\left[\\begin{array}{c}F_{0} \\sin \\omega t \\\\ 0\\end{array}\\right]ä»¥ä¸‹ä¸ºæœ‰é˜»å°¼çš„åŠ¨åŠ›å¸æŒ¯å™¨ç³»ç»Ÿï¼š ç®€åŒ–ç³»ç»Ÿï¼Œå»æ‰é˜»å°¼åçš„æ— é˜»å°¼å¸æŒ¯å™¨ï¼š å¯¹äºç®€è°æŒ¯åŠ¨å¯ä»¥ä½¿ç”¨ç›´æ¥ä½¿ç”¨å…¬å¼$\\left(\\boldsymbol{K}-\\omega^{2} \\boldsymbol{M}\\right) \\overline{\\boldsymbol{X}}=\\boldsymbol{F}_{0}$ æ¥æ±‚è§£ï¼Œä½†æ˜¯å¯¹äºä¸€èˆ¬çš„ç³»ç»Ÿå°±ä¸å¯ä»¥äº†ã€‚ \\left[\\begin{array}{c}\\bar{x}_{1} \\\\ \\bar{x}_{2}\\end{array}\\right]=\\left[\\begin{array}{cc}k_{1}+k_{2}-m_{1} \\omega^{2} & -k_{2} \\\\ -k_{2} & k_{2}-m_{2} \\omega^{2}\\end{array}\\right]^{-1}\\left[\\begin{array}{c}F_{0} \\\\ 0\\end{array}\\right]=\\frac{F_{0}}{\\Delta(\\omega)}\\left[\\begin{array}{c}{k_{2}-m_{2} \\omega^{2}} \\\\{k_{2}} \\end{array}\\right]å…¶ä¸­ï¼Œ$\\Delta(\\omega) $: ç³»ç»Ÿç‰¹å¾å¤šé¡¹å¼ $\\Delta(\\omega)=\\left|\\boldsymbol{K}-\\omega^{2} \\boldsymbol{M}\\right| $ \\begin{aligned} \\Delta(\\omega) &=\\left(k_{1}+k_{2}-m_{1} \\omega^{2}\\right)\\left(k_{2}-m_{2} \\omega^{2}\\right)-k_{2}^{2} \\\\ &=m_{1} m_{2} \\omega^{4}-\\left(k_{1} m_{2}+k_{2} m_{1}+k_{2} m_{2}\\right) \\omega^{2}+k_{1} k_{2} \\end{aligned}äºæ˜¯å½“$\\omega=\\sqrt{\\dfrac {k_2} {m_2}}$ æ—¶ï¼Œå¤–éƒ¨æ¿€åŠ±é¢‘ç‡ç­‰äºå¸æŒ¯å™¨çš„å›ºæœ‰é¢‘ç‡ï¼Œæ­¤æ—¶ä¸æœ‰$\\bar{x}_1=0$ ,ä¸»ç³»ç»Ÿä¸å†æŒ¯åŠ¨ï¼Œè¿™ç§ç°è±¡ç§°ä¸ºåå…±æŒ¯ã€‚ æ­¤æ—¶ï¼Œ$\\Delta(\\omega)=-k_2^2$ å¸æŒ¯å™¨çš„æŒ¯å¹…ä¸º $\\bar{x}_2=-\\dfrac {F_0} {k_2}$ ä¸»ç³»ç»Ÿä¸Šå—åˆ°çš„æ¿€æŒ¯åŠ›æ°å¥½è¢«æ¥è‡ªå¸æŒ¯å™¨çš„å¼¹æ€§æ¢å¤åŠ›å¹³è¡¡ã€‚ ä¸Šå›¾ä¸ºæ—¶æ»å¸å°˜å™¨ï¼Œå°±æ˜¯å°†åå…±æŒ¯çš„é¢‘å¸¦æ”¾å®½ï¼Œä¹‹ååå…±æŒ¯çš„èŒƒå›´å°±æ‰©å¤§åˆ°æ›´å¹¿æ³›çš„é¢‘ç‡ä¸Šäº†ï¼Œå°½é‡å‡å°‘ç”±äºæ¿€åŠ±çš„æ”¹å˜è€Œé€ æˆçš„ä½†ä¸åˆ°åå…±æŒ¯æƒ…å†µã€‚ åœ¨å»ºç­‘é¢†åŸŸï¼Œä¸€èˆ¬åœ¨æ¥¼çš„é¡¶å±‚åŠ è£…å¼¹æ€§å°è½¦å……å½“åŠ¨åŠ›å¸æŒ¯å™¨ï¼ŒATMDã€TMDã€MTMD(åœ¨æ¯ä¸€å±‚éƒ½åŠ ä¸€ä¸ªé˜»å°¼å¸æŒ¯å™¨)ï¼Œè¿™æ ·å¯ä»¥é˜²éœ‡ã€‚ è‹¥æœºæ¢°åœ¨ä½¿ç”¨åŠ¨åŠ›å¸æŒ¯å™¨ä¹‹å‰ï¼Œåœ¨æ¥è¿‘å…±æŒ¯çš„æƒ…å†µä¸‹å·¥ä½œï¼Œå³ï¼š$\\omega\\approx \\omega_1=\\sqrt{k_1/m_1}$ å› æ­¤è‹¥åœ¨è®¾è®¡å¸æŒ¯å™¨æ—¶ï¼Œä½¿å¾—$\\omega=\\sqrt{k_2/m_2}=\\sqrt{k_1/m_1}$ ã€‚åˆ™å½“æœºæ¢°åœ¨å®ƒåŸå§‹çš„å…±æŒ¯é¢‘ç‡ä¸‹è¿è¡Œæ—¶ï¼ŒæŒ¯å¹…å°†ä¼šä¸ºé›¶ã€‚ æ­¤æ—¶ï¼Œ$k_2\\bar{x}_2=-F_0=m_2\\omega^2\\bar{x}_2$ , å…¶ä¸­$k_2ï¼Œm_2$ æ—¶ç”±$\\bar{x}_2$çš„å…è®¸å€¼å†³å®šï¼Œä¸€èˆ¬å‚æ•°é€‰ä¸ºï¼š \\frac {k_2} {k_1} = \\frac {m_2} {m_1}=\\muä½¿å¸æŒ¯å™¨çš„å›ºæœ‰é¢‘ç‡å’Œä¸»ç³»ç»Ÿçš„å›ºæœ‰é¢‘ç‡ç›¸ç­‰ã€‚ è®° $\\omega_0=\\sqrt{k_1/m_1}=\\sqrt{k_2/m_2} \\quad s=\\omega/\\omega_0$ äºæ˜¯å¸¦å…¥åˆ°ç‰¹å¾è¡¨è¾¾å¼å¯å¾—ï¼š$\\Delta(\\omega)=k_1k_2[s^4-(2+\\mu)s^2+1]$ äºæ˜¯å¯ä»¥æ¨å¾—ï¼š \\Delta(\\omega)=m_{1} m_{2} \\omega^{4}-\\left(k_{1} m_{2}+k_{2} m_{1}+k_{2} m_{2}\\right) \\omega^{2}+k_{1} k_{2}\\\\ \\frac{k_{2}}{k_{1}}=\\frac{m_{2}}{m_{1}}=\\mu, \\quad \\omega_{0}=\\sqrt{\\frac{k_{1}} {m_{1}}}=\\sqrt{\\frac{k_{2}} {m_{2}}}, \\quad s=\\frac{\\omega}{\\omega_0}\\\\ \\Rightarrow \\Delta(\\omega)=k_{1} k_{2}\\left[s^{4}-(2+\\mu) s^{2}+1\\right]è¯¦ç»†çš„æ¨å¯¼ï¼š \\Delta(\\omega)=k_{1} k_{2}\\left[\\frac{m_{1} m_{2} \\omega^{4}}{k_{1} k_{2}}-\\frac{\\left(k_{1} m_{2}+k_{2} m_{1}+k_{2} m_{2}\\right) \\omega^{2}}{k_{1} k_{2}}+1\\right]å…¶ä¸­çš„ç¬¬äºŒé¡¹çš„åŒ–ç®€ä¸º \\frac{\\left(k_{1} m_{2}+k_{2} m_{1}+k_{2} m_{2}\\right) \\omega^{2}}{k_{1} k_{2}}=\\frac{\\left(\\mu k_{1} m_{1}+\\mu k_{1} m_{1}+\\mu^{2} k_{1} m_{1}\\right) \\omega^{2}}{\\mu k_{1} k_{1}} \\\\=\\frac{\\left(m_{1}+m_{1}+\\mu m_{1}\\right) \\omega^{2}}{k_{1}}=\\frac{(2+\\mu) \\omega^{2}}{k_{1} / m_{1}}=\\frac{(2+\\mu) \\omega^{2}}{\\omega_{0}^{2}}=(2+\\mu) s^{2} å°†$\\Delta(\\omega)$ ä»£å…¥ï¼Œå¹¶ä¸”è®¾ä¸»è´¨é‡çš„é™å˜å½¢ä¸ºï¼š$\\bar{x}_0=F_0/k_1$ äºæ˜¯å¯å¾—ï¼š \\frac{\\bar{x}_{1}}{\\bar{x}_{0}}=\\frac{1-s^{2}}{s^{4}-(2+\\mu) s^{2}+1} \\quad \\frac{\\bar{x}_{2}}{\\bar{x}_{0}}=\\frac{1}{s^{4}-(2+\\mu) s^{2}+1} å‡ºç°åå…±æŒ¯ï¼Œä½†åœ¨åå…±æŒ¯ä¸¤æ—å­˜åœ¨ä¸¤ä¸ªå…±æŒ¯ç‚¹ã€‚ æ³¨æ„ï¼š (1) è‹¥æœºæ¢°çš„è¿è¡Œé€Ÿåº¦åœ¨ä¸»ç³»ç»Ÿå›ºæœ‰é¢‘ç‡é™„è¿‘ï¼Œæœºæ¢°å¯åŠ¨å’Œåˆ¶æ­¢æ—¶å¿…ç„¶ç»è¿‡s1ï¼Œè¿™ä¼šå¼•èµ·å¤§æŒ¯å¹…ã€‚ (2) å› ä¸ºå¸æŒ¯å™¨æ—¶æ ¹æ®ä¸€ä¸ªç‰¹å®šçš„æ¿€åŠ±é¢‘ç‡è®¾è®¡çš„ï¼Œåªæœ‰å½“å›ºæœ‰é¢‘ç‡ç­‰äºå¤–éƒ¨æ¿€åŠ±é¢‘ç‡æ—¶ä¸»ç³»ç»ŸæŒ¯å¹…æ‰ä¸ºé›¶ã€‚å¦‚æœæœºæ¢°åœ¨å…¶ä»–é¢‘ç‡ä¸‹è¿è¡Œæˆ–è€…æœºæ¢°ä¸Šçš„åŠ›åŒ…å«å‡ ä¸ªä¸åŒçš„é¢‘ç‡æˆåˆ†ï¼Œåˆ™å…¶æŒ¯å¹…ä¹Ÿå¯èƒ½ä¼šå¾ˆå¤§ã€‚ ä¸ºäº†å…è®¸æ¿€åŠ±é¢‘ç‡$\\omega $ åœ¨ s =1 é™„è¿‘æœ‰ä¸€å®šèŒƒå›´çš„å˜åŒ–ï¼Œs1ã€s2 åº”å½“ç›¸è·è¿œäº›ã€‚éœ€è¦$\\mu$ çš„å€¼å¾ˆå¤§ï¼Œæ­¤æ—¶åªéœ€è¦å°†$k_2ï¼Œm_2$çš„é—´è·è°ƒå¤§å³å¯ï¼Œä½†æ˜¯è¿™æ ·ä¼šä½¿å¾—åŠ¨åŠ›å¸æŒ¯å™¨å¾ˆç¬¨æ‹™ï¼Œå› æ­¤æˆ‘ä»¬é‡‡ç”¨é˜»å°¼åŠ¨åŠ›å¸æŒ¯å™¨ã€‚ éçº¿æ€§åŠ¨åŠ›å¸æŒ¯å™¨ ç¨³æ€å“åº”æŒ¯å¹…ï¼ˆå¤æŒ¯å¹…ï¼‰: \\begin{align} {\\left[\\begin{array}{l}\\bar{x}_{1} \\\\\\bar{x}_{2}\\end{array}\\right] \\left[\\begin{array}{cc}k_{1}+k_{2}-m_{1} \\omega^{2}+i c \\omega & -\\left(k_{2}+i c \\omega\\right) \\\\-\\left(k_{2}+i c \\omega\\right) & k_{2}-m_{2} \\omega^{2}+i c \\omega\\end{array}\\right]^{-1}\\left[\\begin{array}{c}F_{0} \\\\0\\end{array}\\right] } \\frac{F_{0}}{\\Delta(\\omega)}\\left[\\begin{array}{c}k_{2}-m_{2} \\omega^{2}+i c \\omega \\\\k_{2}+i c \\omega\\end{array}\\right] \\\\ \\end{align} \\begin{align} å…¶ä¸­: \\Delta(\\omega)&=\\left(k_{1}+k_{2}-m_{1} \\omega^{2}+i c \\omega\\right)\\left(k_{2}-m_{2} \\omega^{2}+i c \\omega\\right)-\\left(k_{2}+i c \\omega\\right)^{2} \\\\ &=\\left(k_{1}-m_{1} \\omega^{2}\\right)\\left(k_{2}-m_{2} \\omega^{2}\\right)-k_{2} m_{2} \\omega^{2}+i c \\omega\\left(k_{1}-m_{1} \\omega^{2}-m_{2} \\omega^{2}\\right) \\end{align}ä¸»ç³»ç»Ÿå¤æŒ¯å¹…ï¼š \\bar{x}_{1}=\\frac{F_{0}\\left(k_{2}-m_{2} \\omega^{2}+i c \\omega\\right)}{\\left(k_{1}-m_{1} \\omega^{2}\\right)\\left(k_{2}-m_{2} \\omega^{2}\\right)-k_{2} m_{2} \\omega^{2}+i c \\omega\\left(k_{1}-m_{1} \\omega^{2}-m_{2} \\omega^{2}\\right)} è½¬åŒ–ä¸ºæ— é‡çº²çš„å½¢å¼å¯å¾—ï¼š \\frac{\\bar{x}_{1}}{\\delta_{s t}}=\\frac{\\sqrt{\\left(s^{2}-\\alpha^{2}\\right)^{2}+\\left(2 \\xi_{s}\\right)^{2}}}{\\sqrt{\\left[\\mu s^{2} \\alpha^{2}-\\left(s^{2}-1\\right)\\left(s^{2}-\\alpha^{2}\\right)\\right]^{2}+\\left(2 \\xi{s}\\right)^{2}\\left(s^{2}-1+\\mu s^{2}\\right)^{2}}} å¯¹ä¸Šé¢å›¾åƒåœ¨ä¸åŒé˜»å°¼ä¸‹çš„ç»“æœè¿›è¡Œåˆ†æå¯å¾—ï¼š å½“ $\\xi=0$ æ—¶ï¼Œ ç³»ç»Ÿä¸­æ— é˜»å°¼ï¼Œæœ‰ä¸¤ä¸ªå…±æŒ¯é¢‘ç‡ç‚¹ï¼Œs1=0.895,s2=1.12 åœ¨s=1æ—¶ï¼Œå‘ç”Ÿåå…±æŒ¯ç°è±¡ å½“$\\xi=\\infty$ æ—¶ï¼Œç³»ç»Ÿ å˜æˆåŠ›ä¸€ä¸ªå•è‡ªç”±åº¦ç³»ç»Ÿï¼Œå…±æŒ¯ç‚¹ä¸ºs=0.976 é˜»å°¼éå¸¸å¤§ï¼Œå¯ä»¥çœ‹ä½œæ—¶ä¸»è´¨é‡å’Œå¸æŒ¯å™¨ç„Šæ¥åœ¨ä¸€èµ·äº†ã€‚ å½“ $\\xi=0.10$ å’Œ $\\xi=0.32$ æ—¶ï¼Œå¯è§å½“ sï¼1 æ—¶ï¼Œä¸»ç³»ç»ŸæŒ¯å¹…å¹¶ä¸ä¸ºé›¶ï¼Œä½†æ˜¯å’Œæ— é˜»å°¼ç³»ç»Ÿçš„ä¸¤ä¸ªå…±æŒ¯æŒ¯å¹…ç›¸æ¯”ï¼Œå…±æŒ¯æŒ¯å¹…æ˜æ˜¾ä¸‹é™ã€‚ æ— è®ºé˜»å°¼å–å¤šå°‘ï¼Œæ‰€æœ‰æ›²çº¿éƒ½è¿‡ Sã€T ä¸¤ç‚¹ã€‚å®é™…è®¾è®¡æœ‰é˜»å°¼åŠ¨åŠ›å¸æŒ¯å™¨æ—¶ï¼Œä¸€èˆ¬é€‰å–é€‚å½“çš„ m2 ä¸ k2ï¼Œä½¿æ›²çº¿åœ¨ S å’Œ Tç‚¹æœ‰ç›¸åŒçš„å¹…å€¼ï¼Œå¹¶ä¸”é€‚å½“é€‰å–é˜»å°¼ï¼Œä½¿æ›²çº¿åœ¨ Sã€T ä¸¤ç‚¹å…·æœ‰æ°´å¹³åˆ‡çº¿ åŠ¨åŠ›å¸æŒ¯å™¨å…¸å‹ä¾‹é¢˜ä¾‹: ä¸€å°é‡3000Nçš„æŸ´æ²¹æœºï¼Œå®‰è£…åœ¨æ”¯æ¶ä¸Šã€‚å½“å…¶ä»¥6000 r/minè½¬é€Ÿå·¥ä½œæ—¶ï¼Œå¯ä»¥è§‚å¯Ÿåˆ°å®ƒçš„æŒ¯åŠ¨é€šè¿‡æ”¯æ¶å¯¹å‘¨å›´ç¯å¢ƒé€ æˆäº†å½±å“ã€‚è¯•ç¡®å®šéœ€è¦å®‰è£…åœ¨æ”¯æ¶ä¸Šçš„å¸æŒ¯å™¨çš„å‚æ•°ã€‚æ¿€æŒ¯åŠ›çš„å¹…å€¼ä¸º250Nï¼Œè¾…åŠ©è´¨é‡çš„æœ€å¤§è®¸å¯ä½ç§»ä¸º2mmã€‚ ä¾‹: ä¸€å°ç”µåŠ¨æœº-å‘ç”µæœºç»„ï¼Œè®¾è®¡è¿è¡Œé€Ÿåº¦ä¸º2000-4000 r/minã€‚ä½†æ˜¯ç”±äºè½¬å­å­˜åœ¨å¾®å°çš„ä¸å¹³è¡¡ï¼Œè¯¥æœºæ¢°åœ¨è¿è¡Œé€Ÿåº¦ä¸º3000 r/minæ—¶å‘ç”Ÿå‰§çƒˆæŒ¯åŠ¨ã€‚ä¸ºæ­¤è®¾è®¡å®‰è£…ä¸€ä¸ªæ‚¬è‡‚å¼é›†ä¸­è´¨é‡å¸æŒ¯å™¨æ¥æ¶ˆé™¤æŒ¯åŠ¨ã€‚å½“ä¸€ä¸ªæœ‰2kgå®éªŒè½½è·çš„æ‚¬è‡‚å®‰è£…åˆ°æœºå™¨ä¸Šä¹‹åï¼Œæ‰€å¾—ç³»ç»Ÿçš„å›ºæœ‰é¢‘ç‡ä¸º2500 r/minå’Œ3500 r/minã€‚è®¾è®¡å¸æŒ¯å™¨çš„è´¨é‡å’Œåˆšåº¦ï¼Œä½¿å¾—æ•´ä¸ªç³»ç»Ÿçš„å›ºæœ‰é¢‘ç‡åœ¨ç”µåŠ¨æœº-å‘ç”µæœºç»„çš„è½¬é€ŸèŒƒå›´ä¹‹å¤–ã€‚ æ³¨æ„ï¼Œè¿™é‡Œçš„2kgæ—¶å®éªŒçš„è½½è·ï¼Œæœ€ä¼˜çš„è½½è·éœ€è¦æˆ‘ä»¬æ±‚è§£ã€‚ æ ¹æ®å®éªŒè½½è·çš„è´¨é‡ä»¥åŠå…±æŒ¯é¢‘ç‡ï¼Œå¯ä»¥æ±‚å‡ºä¸»è´¨é‡çš„å°†è´¨é‡ï¼Œä¸‹é¢æ¥è®¡ç®—æ‰€éœ€çš„å¸æŒ¯å™¨çš„åˆšåº¦å’Œä¸»åŠ›ã€‚ è¿™é‡Œè®¾è®¡æ—¶ï¼Œå…ˆç¡®å®šçš„æ˜¯é¢‘ç‡æ¯”çš„ä¸‹é™ï¼Œç”±ä¸‹é™s1æ¥æ±‚å‡ºè´¨é‡æ¯”$\\mu$ ,ä¹‹åå¸¦å›æ¥æ±‚è§£å…±æŒ¯è´¨é‡æ¯”çš„ä¸Šé™ï¼Œå¹¶æ±‚è§£å‡ºå…±æŒ¯é¢‘ç‡ï¼Œåˆ¤æ–­æ˜¯æ˜¯å¦æ»¡è¶³è¦æ±‚ï¼Œä¸æ»¡è¶³åˆ™å…ˆç¡®å®šä¸Šé™åç¡®å®šä¸‹é™ã€‚ å·¥ç¨‹åº”ç”¨(è°ƒè°è´¨é‡é˜»å°¼å™¨) è°ƒè°è´¨é‡é˜»å°¼å™¨ï¼ˆTuned Mass Damperï¼ŒTMDï¼‰ï¼Œæœ€æ—©çš„ç»“æ„æŒ¯åŠ¨è¢«åŠ¨æ§åˆ¶è£…ç½®ä¹‹ä¸€ï¼Œåœ¨å»ºç­‘ã€æ¡¥æ¢ã€è½¦è¾†ã€èˆ¹èˆ¶åŠæœºæ¢°é¢†åŸŸå‡æœ‰å¹¿æ³›åº”ç”¨ã€‚ TMDä¸‰ä¸ªåŸºæœ¬å•å…ƒï¼š å¸æ”¶æŒ¯åŠ¨èƒ½é‡çš„è´¨é‡å—mã€è€—æ•£èƒ½é‡çš„é˜»å°¼è£…ç½®Cï¼Œä»¥åŠåˆšåº¦å•å…ƒKã€‚ ä»èƒ½é‡è§’åº¦è¯´æ˜¯ä¸€ç§èƒ½é‡è½¬ç§»ï¼Œå³å°†ä¸»ç³»ç»Ÿçš„æŒ¯åŠ¨èƒ½é‡è½¬ç§»åˆ°TMDä¸Šã€‚ TMDå‡æŒ¯æ–¹æ³•çš„ä¼˜ç‚¹ï¼š (1) å‡æŒ¯æ•ˆæœæ˜¾è‘—ã€‚åªè¦TMDå›ºæœ‰é¢‘ç‡ä¸ä¸»ç³»ç»Ÿå›ºæœ‰é¢‘ç‡ä¸€è‡´ï¼Œç†è®ºä¸Šä¸»ç³»ç»Ÿçš„æŒ¯åŠ¨å¯å®Œå…¨æ¶ˆé™¤ï¼Œå®é™…å·¥ç¨‹ä¸­ä¹Ÿèƒ½è¾¾åˆ°80ï¼…ä»¥ä¸Šã€‚ (2) ç»“æ„è®¾è®¡çµæ´»ã€‚å¯æ ¹æ®æŒ¯åŠ¨ä¸»ç³»ç»Ÿç»“æ„ç‰¹å¾å’Œå®‰è£…ç©ºé—´ï¼Œå°†TMDå¤–å½¢ç»“æ„è®¾è®¡æˆä¸åŒå½¢çŠ¶ï¼Œå¦‚å¯è®¾è®¡æˆæ‘†å¼TMDï¼Œæ‚¬è‡‚å¼TMDæˆ–ç¯å½¢TMDã€‚ TMDå‡æŒ¯æ–¹æ³•çš„ç¼ºç‚¹ï¼š (1) æœ€å¤§ç¼ºç‚¹æ˜¯å‡æŒ¯é¢‘å¸¦è¾ƒçª„ã€‚åªå½“TMDå›ºæœ‰é¢‘ç‡ä¸è¢«æ§å¯¹è±¡æ¿€æŒ¯é¢‘ç‡ä¸€è‡´æˆ–æ¥è¿‘æ—¶ï¼Œå‡æŒ¯æ‰æœ‰æ•ˆï¼Œè‹¥åç¦»æ—¶ä¾¿ä¼šäº§ç”Ÿä¸¤ä¸ªæ–°å…±æŒ¯å³°ã€‚å› æ­¤ï¼Œå¦‚æœTMDä½¿ç”¨ä¸å½“ï¼Œä¸ä½†ä¸èƒ½å¸æŒ¯ï¼Œåè€Œæ˜“äº§ç”Ÿæ–°çš„å…±æŒ¯ï¼Œå³ï¼‚é¢‘ç‡å¤±è°ƒï¼‚ç°è±¡ã€‚ (2) TMDï¼æ—¦å‘ç”Ÿé¢‘ç‡å¤±è°ƒï¼Œä¸»ç³»ç»Ÿä¼šå› å…±æŒ¯è€Œäº§ç”Ÿæ›´å¤§æŒ¯åŠ¨ã€‚è¯¥ç°è±¡åœ¨å½“TMDè´¨é‡è¾ƒå°æ—¶æ›´ä¸ºæ˜æ˜¾ï¼Œè¿™å¯¹TMDå›ºæœ‰é¢‘ç‡çš„è®¾è®¡æå‡ºäº†æ›´é«˜è¦æ±‚ã€‚ (3) TMDå¯åŠ¨é€Ÿåº¦å…·æœ‰ä¸€å®šæ»åæ€§ï¼Œå¯¹å†²å‡»æˆ–çªå‘è½½è·ç­‰æ— æ³•è¿…é€Ÿååº”ã€‚ç”±äºTMDå¯¹è°ƒè°é¢‘ç‡çš„æ•æ„Ÿå‹ï¼Œè®¸å¤šå­¦è€…å¯¹å…¶æœ‰æ•ˆé¢‘å¸¦æ‹“å®½æ–¹æ³•è¿›è¡Œç ”ç©¶ï¼Œå‡ºç°äº†å„ç§ä¸»åŠ¨ã€åŠä¸»åŠ¨è°ƒè°è´¨é‡é˜»å°¼å™¨ä¾¿è°ƒè°å…¶ç›®æ ‡é¢‘ç‡ã€‚ å¯¹äºé£æŒ¯æœ‰å¾ˆå¥½çš„æŠ‘åˆ¶ä½œç”¨ï¼Œä½†æ˜¯å¯¹äºåœ°éœ‡å°±ç”±ä¸€å®šçš„å»¶è¿Ÿã€‚ å‡ ç§æœ€æ–°çš„è°ƒè°è´¨é‡é˜»å°¼å™¨ï¼š ä¸»åŠ¨å‹è°ƒè°è´¨é‡é˜»å°¼å™¨(ATMD)ï¼šä»20ä¸–çºª90å¹´ä»£åˆæœŸèµ·ç”±äºç°ä»£æ§åˆ¶ç†è®ºçš„æ™®åŠå¦‚PIDæ§åˆ¶ã€LQRæ§åˆ¶ç­‰ï¼Œå¾—åˆ°å¹¿æ³›çš„ç ”ç©¶ã€‚ATMDæœ€æœ‰é­…åŠ›çš„åœ°æ–¹å°±æ˜¯å¯åˆ©ç”¨ä¸€ä¸ªTMDå°±å¯å®ç°å¤šä¸ªæŒ¯åŠ¨æ¨¡æ€çš„æ§åˆ¶ã€‚ATMDä¼˜äºè¢«åŠ¨TMDï¼Œä½†ATMDéœ€è¦æä¾›é¢å¤–èƒ½é‡æ¥è·å¾—æœŸæœ›çš„å‡æŒ¯æ•ˆæœã€‚ å‘ç”Ÿåœ°éœ‡ä¼šæ–­ç”µï¼Œæ²¡æœ‰èƒ½é‡æ¥æºåŸºæœ¬å°±åºŸäº†ï¼Œè·Ÿè¢«åŠ¨çš„æ²¡ä»€ä¹ˆåŒºåˆ«ã€‚ åŠè‡ªåŠ¨å‹è°ƒè°è´¨é‡é˜»å°¼å™¨(SATMD)ï¼šç”±äºå…·æœ‰åˆšåº¦å’Œé˜»å°¼å¯è°ƒçš„èƒ½åŠ›ï¼ŒåŠè¾ƒå¼ºçš„é€‚åº”èƒ½åŠ›ï¼Œè‡ª1980å¹´è¢«æå‡ºåä¾¿å¾—åˆ°äº†å¹¿æ³›å…³æ³¨ã€‚SATMDç»´æŠ¤ç®€å•ï¼Œå¯¹å¤–éƒ¨èƒ½æºéœ€æ±‚æ¯”ATMDä½ï¼Œå¯é æ€§å’Œé²æ£’æ€§å¥½ã€‚ç›¸å…³æ–‡çŒ®æŒ‡å‡ºï¼ŒSATMDæ¯”TMDå’ŒATMDæ›´æœ‰æ•ˆå’Œæ›´å…·æœ‰å‘å±•æ½œåŠ›ã€‚ æŒ¯å‹å åŠ æ³• æ±‚è§£å¤šè‡ªç”±åº¦ç³»ç»Ÿçš„é—®é¢˜çš„æœ¬è´¨ï¼Œå°±æ˜¯æ±‚è§£ä¸€ä¸ªæ¨¡æ€çŸ©é˜µï¼Œä½¿å¾—Mã€KçŸ©é˜µå¯ä»¥å®ç°æ­£äº¤ï¼Œå¯¹è§’åŒ–ã€‚ æŒ¯å‹å åŠ æ³•å¯ç”¨äºåˆ†æå¤šè‡ªç”±åº¦ç³»ç»Ÿçš„å—è¿«æŒ¯åŠ¨ å‰é¢è®¨è®ºçš„å¤–éƒ¨æ¿€åŠ±ä¸ºç®€è°æ¿€åŠ±ï¼Œå› æ­¤å¯é‡‡ç”¨$X(t)=\\bar{X}e^{i\\omega t} $ ç›´æ¥æ³•è¿›è¡Œæ±‚è§£ å½“å¤–éƒ¨æ¿€åŠ±ä¸æ˜¯ç®€è°æ¿€åŠ±æ—¶ï¼Œåˆ™ä¸èƒ½ç”¨ç›´æ¥æ³•ï¼Œæ­¤æ—¶å¯é‡‡ç”¨æŒ¯å‹å åŠ æ³•ä¸‹é¢å…ˆç”¨æŒ¯å‹å åŠ æ³•å¯¹ç®€è°æ¿€åŠ±çš„å¤šè‡ªç”±åº¦ç³»ç»Ÿçš„å—è¿«æŒ¯åŠ¨è¿›è¡Œæ±‚è§£ï¼Œä»¥è¿›ä¸€æ­¥é˜è¿°å¤šè‡ªç”±åº¦ç³»ç»Ÿçš„å…±æŒ¯ç‰¹æ€§ ç„¶åé‡‡ç”¨æŒ¯å‹å åŠ æ³•å¯¹ä»»æ„å¤–éƒ¨æ¿€åŠ±æ—¶ç³»ç»Ÿçš„å“åº”è¿›è¡Œæ±‚è§£ ç®€è°æ¿€åŠ±æ—¶çš„æƒ…å†µè€ƒè™‘ç®€è°æ¿€åŠ±çš„æƒ…å†µï¼Œä½¿ç”¨æ ‡å‡†çš„æ¨¡æ€å åŠ æ³•æ±‚è§£ï¼Œå°±æ˜¯å…ˆå°†ç©ºé—´ç”±ç‰©ç†ç©ºé—´è½¬æ¢ä¸ºæ¨¡æ€ç©ºé—´ï¼Œåˆ†åˆ«æ±‚è§£ä¹‹ååœ¨è½¬åŒ–æˆä¸ºç‰©ç†ç©ºé—´ã€‚ $ n $ è‡ªç”±åº¦ç³»ç»Ÿ: $\\boldsymbol{M} \\ddot{\\boldsymbol{X}}(t)+\\boldsymbol{K} \\boldsymbol{X}(t)=\\boldsymbol{F}_{0} e^{i \\omega t} \\quad \\boldsymbol{X} \\in R^{n} \\quad \\boldsymbol{F}_{0} \\in R^{n \\times 1} $ å°†ç‰©ç†ç©ºé—´è½¬æ¢ä¸ºæ¨¡æ€ç©ºé—´å¯å¾—ï¼š \\boldsymbol{X}(t)=\\boldsymbol{\\Phi} \\boldsymbol{X}_{p}(t) \\quad \\boldsymbol{M}_{p} \\ddot{\\boldsymbol{X}}_{p}(t)+\\boldsymbol{K}_{p} \\boldsymbol{X}_{p}(t)=\\boldsymbol{F}_{p} e^{i \\omega t} \\quad \\boldsymbol{F}_{p}=\\boldsymbol{\\Phi}^{T} \\boldsymbol{F}_{0} \\in R^{n \\times 1} \\\\m_{p j} \\ddot{x}_{p j}(t)+k_{p j} x_{p j}(t)={F_{p j} e^{i \\omega t}}\\quad j=1 \\sim n\\\\ F_{p j}=\\phi^{(j)^{T}} \\boldsymbol{F}_{0}ä½œç”¨åŠ›æ¨¡æ€å˜æ¢çš„å…·ä½“è§£é‡Š: F_p=\\left[\\begin{array}{c}F_{p_{1}} \\\\ \\vdots \\\\ F_{p} \\\\ \\vdots \\\\ F_{p_{n}}\\end{array}\\right]=\\boldsymbol{\\Phi}^{T} \\boldsymbol{F}_{0}=\\left[\\begin{array}{lllll}\\phi^{(1)} & \\cdots & \\phi^{(j)} & \\cdots & \\phi^{(n)}\\end{array}\\right]^{T}\\left[\\begin{array}{c}F_{01} \\\\ \\vdots \\\\ F_{0 n}\\end{array}\\right]=\\left[\\begin{array}{c}\\phi^{(1)^{T}} \\\\ \\vdots \\\\ \\phi^{(j)^{T}} \\\\ \\vdots \\\\ \\phi^{(n)^{T}}\\end{array}\\right] \\boldsymbol{F}_{0}=\\left[\\begin{array}{c}\\phi^{(1)^{T}} \\boldsymbol{F}_{0} \\\\ \\vdots \\\\ \\phi^{(j)^{T}} \\boldsymbol{F}_{0} \\\\ \\vdots \\\\ \\phi^{(n)^{T}} \\boldsymbol{F}_{0}\\end{array}\\right]æ¨¡æ€åæ ‡è§£ï¼š x_{p j}(t)=\\frac{F_{p j}}{k_{p j}} \\cdot \\frac{1}{1-s_{j}^{2}} e^{i \\omega t}=\\frac{\\phi^{(j)^{T}} \\boldsymbol{F}_{0}}{k_{p j}\\left(1-s_{j}^{2}\\right)} e^{i \\omega t} å…¶ä¸­ï¼Œå¤–éƒ¨æ¿€åŠ±é¢‘ç‡ä¸ç¬¬ j é˜¶å›ºæœ‰é¢‘ç‡ä¹‹æ¯” :$ s_{j}=\\dfrac{\\omega}{\\omega_{j}}$ å„åæ ‡çš„å—è¿«æŒ¯åŠ¨è§„å¾‹å®Œå…¨ç±»ä¼¼äºå•è‡ªç”±åº¦ç³»ç»Ÿçš„å—è¿«æŒ¯åŠ¨è§„å¾‹ï¼š \\boldsymbol{X}(t)=\\boldsymbol{\\Phi} \\boldsymbol{X}_{p}(t)=\\sum_{j=1}^{n} \\boldsymbol{\\phi}^{(j)} x_{p j}(t)=\\sum_{j=1}^{n} \\frac{\\phi^{(j)} \\phi^{(j)^{T}}}{k_{p j}\\left(1-s_{j}^{2}\\right)} \\boldsymbol{F}_{0} e^{i \\omega t}å½“ $\\omega \\rightarrow \\omega_j$ æ—¶ï¼Œ $s_j \\rightarrow 1$ äºæ˜¯å°±ä¼šå‘ç”Ÿå…±æŒ¯ã€‚å³ç¬¬ j é˜¶ä¸»åæ ‡çš„å—è¿«æŒ¯åŠ¨å¹…åº¦å°†æ€¥å‰§å¢å¤§ï¼Œå¯¼è‡´ç¬¬ j é˜¶é¢‘ç‡çš„å…±æŒ¯ã€‚ ç³»ç»Ÿå…·æœ‰ n ä¸ªä¸ç›¸ç­‰çš„å›ºæœ‰é¢‘ç‡æ—¶ï¼Œå¯ä»¥å‡ºç° n ç§ä¸åŒé¢‘ç‡çš„å…±æŒ¯ ç›´æ¥æ³•å°±æ˜¯å°†å¤æ•°é¡¹å»æ‰ï¼Œç›´æ¥å»ºç«‹æ¨¡é•¿$\\bar{X},\\bar{F_0}$ çš„å…³ç³»æ¥æ±‚è§£ã€‚ä½†æ˜¯ç›´æ¥æ³•çš„å‰ææ˜¯å¿…é¡»æ˜¯ç®€è°æ¿€åŠ±ã€‚ ä¾‹ï¼šä¸‰è‡ªç”±åº¦ç³»ç»Ÿ æ±‚ï¼šç³»ç»Ÿç¨³æ€å“åº” è¿™é‡Œå¯ä»¥çœ‹å‡ºï¼Œå…¶ç¬¬äºŒé˜¶çš„å›ºæœ‰é¢‘ç‡å’Œç³»ç»Ÿå¤–éƒ¨æ¿€åŠ±æ¯”è¾ƒæ¥è¿‘ã€‚ æ¿€æŒ¯é¢‘ç‡æ¥è¿‘ç¬¬äºŒé˜¶å›ºæœ‰é¢‘ç‡ï¼Œåœ¨ç¨³æ€å“åº”ä¸­ç¬¬äºŒé˜¶æŒ¯å‹å ä¸»è¦æˆåˆ†ã€‚ ä»»æ„å¤–éƒ¨æ¿€åŠ±æ—¶çš„æƒ…å†µ$ n $ è‡ªç”±åº¦ç³»ç»Ÿçš„åŠ¨åŠ›å­¦æ–¹ç¨‹ä¸ºï¼š \\boldsymbol{M} \\ddot{\\boldsymbol{X}}(t)+\\boldsymbol{K} \\boldsymbol{X}(t)=\\boldsymbol{F}_{0}(t) \\quad \\boldsymbol{X} \\in R^{n} \\quad \\boldsymbol{X}(0), \\dot{\\boldsymbol{X}}(0) \\\\ \\boldsymbol{X}(t)=\\ddot{\\boldsymbol{\\Phi}}_{N} \\boldsymbol{X}_{N}(t) \\quad \\boldsymbol{\\Lambda} \\boldsymbol{X}_{N}(t)=\\boldsymbol{F}_{N}(t)æ­£åˆ™æŒ¯å‹çŸ©é˜µ: \\ddot{x}_{N i}(t)+\\omega_{i}^{2} x_{N i}(t)=F_{N i}(t), \\quad i=1 \\sim n \\quad æ¨¡æ€å¹¿ä¹‰åŠ›\\\\ \\boldsymbol{F}_{N}=\\boldsymbol{\\Phi}_{N}^{T} \\boldsymbol{F}_{0}=\\left[F_{N 1}, F_{N 2}, \\cdots, F_{N n}\\right]^{T}æ¨¡æ€åæ ‡åˆå§‹æ¡ä»¶ï¼š$ \\boldsymbol{X}_{N}(0)=\\boldsymbol{\\Phi}_{N}^{-1} \\boldsymbol{X}(0) \\quad \\dot{\\boldsymbol{X}}_{N}(0)=\\boldsymbol{\\Phi}_{N}^{-1} \\dot{\\boldsymbol{X}}(0)$ \\\\ x_{N i}(t)=x_{N i}(0) \\cos \\omega_{i} t+\\frac{\\dot{x}_{N i}(0)}{\\omega_{i}} \\sin \\omega_{i} t+\\frac{1}{\\omega_{i}} \\int_{0}^{t} F_{N i}(\\tau) \\sin \\omega_{i}(t-\\tau) d \\tau \\quad (i=1 \\sim n)åœ¨å¾—åˆ° $\\boldsymbol{X}_{N}$åï¼Œåˆ©ç”¨ $\\boldsymbol{X}=\\boldsymbol{\\phi}_{N}\\boldsymbol{X}_{N}$å¾—å‡ºåŸç³»ç»Ÿçš„è§£ã€‚ ä¸»æŒ¯å‹çŸ©é˜µï¼š \\boldsymbol{M} \\ddot{\\boldsymbol{X}_p}(t)+\\boldsymbol{K} \\boldsymbol{X}_p(t)=\\boldsymbol{F}_{p}(t) \\\\ m_{p i} \\ddot{x}_{p i}(t)+k_{p i} x_{p i}(t)=F_{p i}(t), \\quad i=1 \\sim n \\quad \\\\ æ¨¡æ€å¹¿ä¹‰åŠ› \\quad\\boldsymbol{F}_{p}=\\boldsymbol{\\Phi}^{T} \\boldsymbol{F}_{0}=\\left[F_{p 1}, F_{p 2}, \\cdots, F_{p n}\\right]^{T}æ¨¡æ€åæ ‡åˆå§‹æ¡ä»¶: $ \\boldsymbol{X}_{p}(0)=\\boldsymbol{\\Phi}^{-1} \\boldsymbol{X}(0) \\quad \\dot{\\boldsymbol{X}}_{p}(0)=\\boldsymbol{\\Phi}^{-1} \\dot{\\boldsymbol{X}}(0) $ x_{P i}(t)=x_{P i}(0) \\cos \\omega_{i} t+\\frac{\\dot{x}_{P i}(0)}{\\omega_{i}} \\sin \\omega_{i} t+\\frac{1}{m_{p i} \\omega_{i}} \\int_{0}^{t} F_{P i}(\\tau) \\sin \\omega_{i}(t-\\tau) d \\tauåœ¨å¾—åˆ°$ X_{p} $å, åˆ©ç”¨ $\\boldsymbol{X}=\\boldsymbol{\\Phi} \\boldsymbol{X}_{p} $ å¾—å‡ºåŸç³»ç»Ÿçš„è§£ã€‚ ä¾‹ï¼šå››è‡ªç”±åº¦ç³»ç»Ÿï¼Œåœ¨ç¬¬ä¸€ä¸ªå’Œç¬¬å››ä¸ªè´¨é‡ä¸Šä½œç”¨æœ‰é˜¶æ¢¯åŠ›Fï¼Œé›¶åˆå§‹æ¡ä»¶ï¼Œæ±‚ï¼šç³»ç»Ÿå“åº”ã€‚ è§£ï¼šç”±é¢˜å¯å¾—åŠ¨åŠ›æ–¹ç¨‹ä¸ºï¼š {\\left[\\begin{array}{cccc}m & 0 & 0 & 0 \\\\ 0 & m & 0 & 0 \\\\ 0 & 0 & m & 0 \\\\ 0 & 0 & 0 & m\\end{array}\\right]\\left[\\begin{array}{c}\\ddot{x}_{1}(t) \\\\ \\ddot{x}_{2}(t) \\\\ \\ddot{x}_{3}(t) \\\\ \\ddot{x}_{4}(t)\\end{array}\\right]+k\\left[\\begin{array}{cccc}1 & -1 & 0 & 0 \\\\ -1 & 2 & -1 & 0 \\\\ 0 & -1 & 2 & -1 \\\\ 0 & 0 & -1 & 1\\end{array}\\right]\\left[\\begin{array}{c}x_{1}(t) \\\\ x_{2}(t) \\\\ x_{3}(t) \\\\ x_{4}(t)\\end{array}\\right]=\\left[\\begin{array}{l}F \\\\ 0 \\\\ 0 \\\\ F\\end{array}\\right]=F_{0}(t) } \\\\\\omega_{1}^{2}=0, \\quad \\omega_{2}^{2}=(2-\\sqrt{2}) \\frac{k}{m}, \\quad \\omega_{3}^{2}=\\frac{2 k}{m}, \\quad \\omega_{4}^{2}=(2+\\sqrt{2}) \\frac{k}{m} \\ddot{x}_{N i}(t)+\\omega_{i}^{2} x_{N i}(t)=F_{N i}(t), \\quad i=1 \\sim 4 \\\\ i=1: \\quad \\omega_{1}^{2}=0 \\quad \\Rightarrow \\quad \\ddot{x}_{N1}(t)=F_{Ni} \\quad \\Rightarrow \\quad x_{Ni}=\\frac 1 2F_{Ni}t^2 \\\\i \\neq 1: \\quad x_{N i}(t)=\\frac{1}{\\omega_{1}} \\int_{0}^{t} F_{N i} \\sin \\omega_{i}(t-\\tau) d \\tau=\\frac{F_{N i}}{\\omega_{i}^{2}}\\left(1-\\cos \\omega_{i} t\\right)\\\\çŸ©é˜µå½¢å¼: $\\quad \\boldsymbol{X}_{N}(t)=\\left[\\begin{array}{c}x_{N 1}(t) \\\\ x_{N 2}(t) \\\\ x_{N 3}(t) \\\\ x_{N 4}(t)\\end{array}\\right]=\\frac{F}{\\sqrt{m}}\\left[\\begin{array}{c}0.5 t^{2} \\\\ 0 \\\\ m\\left(1-\\cos \\omega_{3} t\\right) / 2 k \\\\ 0\\end{array}\\right]$ åŸç³»ç»Ÿå“åº”: \\boldsymbol{X}(t)= \\boldsymbol{\\Phi}_{N} \\boldsymbol{X}_{N}(t) =\\frac{F}{4 m}\\left[\\begin{array}{l}t^{2}+\\left(1-\\cos \\omega_{3} t\\right) m / k \\\\ t^{2}-\\left(1-\\cos \\omega_{3} t\\right) m / k \\\\ t^{2}-\\left(1-\\cos \\omega_{3} t\\right) m / k \\\\ t^{2}+\\left(1-\\cos \\omega_{3} t\\right) m / k\\end{array}\\right]","link":"/2022/03/14/%E6%8C%AF%E5%8A%A8%E5%8A%9B%E5%AD%A6/%E7%AC%AC%E5%9B%9B%E7%AB%A0-%E5%A4%9A%E8%87%AA%E7%94%B1%E5%BA%A6%E7%B3%BB%E7%BB%9F%E6%8C%AF%E5%8A%A8-%E5%A4%9A%E8%87%AA%E7%94%B1%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%8F%97%E8%BF%AB%E6%8C%AF%E5%8A%A8/"},{"title":"ç¬¬å››ç«  å¤šè‡ªç”±åº¦ç³»ç»ŸæŒ¯åŠ¨ æœ‰é˜»å°¼çš„å¤šè‡ªç”±åº¦ç³»ç»Ÿ","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦ä»‹ç»çš„æ˜¯å¤šè‡ªç”±æŒ¯åŠ¨ç³»ç»Ÿä¸­æœ‰é˜»å°¼çš„å¤šè‡ªç”±åº¦ç³»ç»Ÿçš„å¤„ç†ï¼Œä¸»è¦ä»‹ç»å¤šè‡ªç”±åº¦ç³»ç»Ÿé˜»å°¼çš„æ±‚è§£ä»¥åŠä¸€èˆ¬ç²˜æ€§é˜»å°¼ç³»ç»Ÿçš„å“åº”ã€‚ å¤šè‡ªç”±åº¦ç³»ç»Ÿçš„é˜»å°¼ å®é™…æœºæ¢°ç³»ç»Ÿä¸­ä¸å¯é¿å…åœ°å­˜åœ¨ç€é˜»å°¼ ææ–™çš„ç»“æ„é˜»å°¼ï¼Œä»‹è´¨çš„ç²˜æ€§é˜»å°¼ç­‰ é˜»å°¼åŠ›æœºç†å¤æ‚ï¼Œéš¾ä»¥ç»™å‡ºæ°å½“çš„æ•°å­¦è¡¨è¾¾ åœ¨é˜»å°¼åŠ›è¾ƒå°æ—¶ï¼Œæˆ–æ¿€åŠ±è¿œç¦»ç³»ç»Ÿçš„å›ºæœ‰é¢‘ç‡æ—¶ï¼Œå¯ä»¥å¿½ç•¥é˜»å°¼åŠ›çš„å­˜åœ¨ï¼Œè¿‘ä¼¼åœ°å½“ä½œæ— é˜»å°¼ç³»ç»Ÿ å½“æ¿€åŠ±çš„é¢‘ç‡æ¥è¿‘ç³»ç»Ÿçš„å›ºæœ‰é¢‘ç‡ï¼Œæ¿€åŠ±æ—¶é—´åˆä¸æ˜¯å¾ˆçŸ­æš‚çš„æƒ…å†µä¸‹ï¼Œé˜»å°¼çš„å½±å“æ˜¯ä¸èƒ½å¿½ç•¥çš„ ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¯å°†å„ç§ç±»å‹çš„é˜»å°¼åŒ–ä½œç­‰æ•ˆç²˜æ€§é˜»å°¼ æœ‰é˜»å°¼çš„ n è‡ªç”±åº¦ç³»ç»Ÿï¼š \\boldsymbol{M} \\ddot{\\boldsymbol{X}}(t)+C \\dot{\\boldsymbol{X}}(t)+\\boldsymbol{K} \\boldsymbol{X}(t)=\\boldsymbol{F}(t) \\quad \\boldsymbol{X} \\in R^{n}å…¶ä¸­ï¼ŒCä¸ºé˜»å°¼çŸ©é˜µï¼Œå…ƒç´  $c_{ij}$ ï¼šé˜»å°¼å½±å“ç³»æ•° ç‰©ç†æ„ä¹‰ï¼šä½¿ç³»ç»Ÿä»…åœ¨ç¬¬ j ä¸ªå¹¿ä¹‰åæ ‡ä¸Šäº§ç”Ÿå•ä½é€Ÿåº¦è€Œç›¸åº”äºç¬¬ i ä¸ªåæ ‡ä¸Šæ‰€éœ€æ–½åŠ çš„åŠ›ã€‚ é˜»å°¼åŠ›ä¸ºå¹¿ä¹‰é€Ÿåº¦çš„çº¿æ€§å‡½æ•° : Q_{d i}(t)=-\\sum_{j=1}^{n} c_{i j} \\dot{x}_{j}(t)é˜»å°¼çŸ©é˜µä¸€èˆ¬æ˜¯æ­£å®šæˆ–åŠæ­£å®šçš„å¯¹ç§°çŸ©é˜µ é˜»å°¼çŸ©é˜µçš„å»ºæ¨¡æ–¹æ³• è¿™é‡ŒCé˜µçš„å»ºæ¨¡æ–¹æ³•æ˜¯ï¼Œå…ˆç…§æŠ„Ké˜µï¼Œä¹‹åå°†æ²¡æœ‰é˜»å°¼çš„åœ°æ–¹çš„$c_i=0$å³å¯ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œåªæœ‰$c_1$å­˜åœ¨å› æ­¤ä¿ç•™ï¼Œå…¶ä½™çš„å…¨éƒ¨ä¸º0. è™½ç„¶ä¸»è´¨é‡çŸ©é˜µä¸ä¸»åˆšåº¦çŸ©é˜µæ˜¯å¯¹è§’é˜µï¼Œä½†é˜»å°¼çŸ©é˜µä¸€èˆ¬éå¯¹è§’é˜µï¼Œå› è€Œä¸»åæ ‡Yä¸‹çš„å¼ºè¿«æŒ¯åŠ¨æ–¹ç¨‹ä»ç„¶å­˜åœ¨è€¦åˆã€‚ æ­¤æ—¶çš„Cé˜µæ˜¯ä¸è§£è€¦çš„ï¼Œå› æ­¤æ¨¡æ€å åŠ æ³•å°±æ— æ³•ä½¿ç”¨ã€‚ è‹¥ $C_p$ éå¯¹è§’ï¼Œåˆ™åœ¨æ— é˜»å°¼ç³»ç»Ÿä¸­ä»‹ç»çš„ä¸»åæ ‡æ–¹æ³•æˆ–æ­£åˆ™åæ ‡æ–¹æ³•éƒ½ä¸å†é€‚ç”¨ï¼ŒæŒ¯åŠ¨åˆ†æå°†å˜å¾—ååˆ†å¤æ‚ã€‚ å¯¹äºå®æ¨¡æ€åˆ†æè€Œè¨€ï¼Œéè§£è€¦çš„æƒ…å†µæ—¶æ— æ³•åˆ†æçš„ï¼Œä½†æ˜¯å¯ä»¥ç”¨å¤æ¨¡æ€åˆ†æçš„æ–¹æ³•æ¥å¤„ç†ã€‚ ä¸ºäº†èƒ½æ²¿ç”¨æ— é˜»å°¼ç³»ç»Ÿä¸­çš„åˆ†ææ–¹æ³•ï¼Œå·¥ç¨‹ä¸­å¸¸é‡‡ç”¨ä¸‹åˆ—è¿‘ä¼¼å¤„ç†æ–¹æ³• (1) å¿½ç•¥$C_p$ çŸ©é˜µä¸­å…¨éƒ¨çš„éå¯¹è§’çº¿å…ƒç´  å…¶ä¸­$C_{Pi}$ä¸ºç¬¬ié˜¶ä¸»æŒ¯å‹çš„é˜»å°¼çŸ©é˜µï¼Œæˆ–ç¬¬ié˜¶æŒ¯å‹çš„é˜»å°¼æˆ–æ¨¡æ€é˜»å°¼ \\boldsymbol{C}_{P}=\\left[\\begin{array}{ccc}c_{p 1} & & \\\\ & \\ddots & \\\\ & & c_{p n}\\end{array}\\right] ä½†æ˜¯å½“æˆ‘ä»¬çš„é˜»å°¼å¾ˆå¤§ï¼Œç›¸æ¯”ä¹‹ä¸‹æ— æ³•å¿½ç•¥ã€‚ å…¶ä¸­ï¼Œ$\\xi_i$: ç¬¬ié˜¶æŒ¯å‹é˜»å°¼æ¯”æˆ–æ¨¡æ€é˜»å°¼æ¯” (2) å°†çŸ©é˜µ C å‡è®¾ä¸ºæ¯”ä¾‹é˜»å°¼ å‡è®¾Cç”±ä»¥ä¸‹çš„å½¢å¼ï¼š$C=aM+bK$ ï¼Œå…¶ä¸­aã€bä¸ºå¸¸æ•°ï¼ŒCä¸ºç‰©ç†ç©ºé—´çš„é˜»å°¼çŸ©é˜µã€‚ è¿™è¾¹çš„a,bçš„ç¡®å®šéœ€è¦è¿›è¡Œå®éªŒï¼Œå¦‚èˆªç©ºèˆªå¤©çš„åœ°é¢è¯•éªŒï¼Œé€šè¿‡æµ‹è¯•ä¸åŒçš„å‚æ•°å’Œæœ€åçš„ç»“æœè¿›è¡Œå¯¹æ¯”æ¥éªŒè¯ã€‚ ä»£å…¥ $C_{p}=\\boldsymbol{\\Phi}^{T} \\boldsymbol{C} \\boldsymbol{\\Phi}$ ä¸­å¯å¾—ï¼š \\boldsymbol{C}_{p}=\\boldsymbol{\\Phi}^{T}(a \\boldsymbol{M}+b \\boldsymbol{K}) \\boldsymbol{\\Phi}=a \\boldsymbol{M}_{p}+b \\boldsymbol{K}_{p} \\quad å¯¹è§’é˜µç›¸å¯¹é˜»å°¼ç³»æ•°: $\\quad \\xi_{i}=\\dfrac{c_{p i}}{2 \\omega_{i} m_{p i}}=\\dfrac{a m_{p i}+b k_{p i}}{2 \\omega_{i} m_{p i}}=\\dfrac{1}{2}\\left(\\dfrac{a}{\\omega_{i}}+b \\omega_{i}\\right)$ (3) ç”±å®éªŒæµ‹å®šné˜¶æŒ¯å‹é˜»å°¼ç³»æ•° $\\xi_i \\quad (i=1,2,â€¦,n)$ å®éªŒæ³•åœ¨å·¥ç¨‹ä¸­ä½¿ç”¨çš„æ¯”è¾ƒå¤šã€‚ä¸€èˆ¬æƒ…å†µä¸‹ä½é˜¶æ¨¡æ€å äº†ä¸»è¦çš„æˆåˆ†ï¼Œæµ‹é‡æ‚¬è‡‚æ¢çš„æ¨¡æ€æ—¶ï¼Œä¸€èˆ¬å¯¹æœ«ç«¯åŠ ä¸€ä¸ªæ¿€åŠ±å¾—å‡ºæŒ¯å‹ä¸ºç¬¬ä¸€é˜¶å äº†ä¸»è¦æˆåˆ†ï¼Œå¯¹ä¸­é—´çš„ç»“ç‚¹ç»™ä¸€ä¸ªæ¿€åŠ±ï¼Œå¾—å‡ºçš„å“åº”çš„ç¬¬äºŒé˜¶ä¸ºä¸»è¦æˆåˆ†ã€‚ å®éªŒæµ‹é‡é«˜é˜¶å¾ˆå¥½æµ‹ï¼Œä½†ä½é˜¶å¾—æ¨¡æ€ä¸æ˜“åšã€‚ ä¸€èˆ¬ç²˜æ€§é˜»å°¼ç³»ç»Ÿçš„å“åº”å½“é˜»å°¼çŸ©é˜µ C ä¸å…è®¸å¿½ç•¥éå¯¹è§’å…ƒç´ ï¼Œå¹¶ä¸”é˜»å°¼æ— æ³•ç®€åŒ–ä¸ºç­‰æ•ˆç²˜æ€§é˜»å°¼ï¼ˆæ©¡èƒ¶å­˜åœ¨ç²˜æ€§æ»å›ç°è±¡ï¼Œæ— æ³•è¿›è¡Œç­‰æ•ˆå¤„ç†ï¼‰ï¼Œä¸ºä»¥ä¸Šè¿‘ä¼¼æ–¹æ³•ä¸æˆç«‹ï¼Œ é¡»ç”¨å¤æ¨¡æ€è¿›è¡Œæ±‚è§£ã€‚ 2n ä¸ªç‰¹å¾å€¼ï¼š$\\lambda_1,\\lambda_2,â€¦,\\lambda_{2n},$ è¿™2nä¸ªç‰¹å¾æ ¹ä¸­ï¼Œæœ‰å¤æ•°ä¹Ÿæœ‰å®æ•° 2nä¸ªç‰¹å¾å‘é‡ï¼š$\\phi^{(1)},\\phi^{(2)},â€¦,\\phi^{(2n)}$ $\\phi^{(i)}\\in R^{n \\times 1}$ å› ä¸ºç‰¹å¾æ–¹ç¨‹çš„ç³»æ•°éƒ½æ˜¯å®çš„,æ‰€ä»¥ç‰¹å¾å€¼ä¸ºå¤æ•°æ—¶ï¼Œå¿…å®šä»¥å…±è½­å½¢å¼æˆå¯¹å‡ºç°ã€‚ç›¸åº”åœ°ï¼Œç‰¹å¾å‘é‡ä¹Ÿæ˜¯å…±è½­æˆå¯¹çš„å¤å‘é‡å¤æŒ¯å‹ï¼Œè¿™ç§ç°è±¡ä¸ºå¤æ¨¡æ€æˆ–å¤æŒ¯å‹ã€‚ è¿™æ˜¯ä¸€ç§å…·æœ‰ç›¸ä½å…³ç³»çš„æŒ¯å‹ï¼Œä¸å†å…·æœ‰åŸæ¥ä¸»æŒ¯å‹çš„æ„ä¹‰ã€‚ ä¹‹å‰çš„æ¨¡æ€ä»£è¡¨ç€ä¸€ç§æŒ¯å‹çš„å½¢çŠ¶ã€‚ å½“ç‰¹å¾å€¼ä¸ºå…·æœ‰è´Ÿå®éƒ¨çš„å¤æ•°æ—¶ï¼Œæ¯ä¸€å¯¹è¿™æ ·çš„å…±è½­ç‰¹å¾å€¼å¯¹åº”ç³»ç»Ÿä¸­å…·æœ‰ç‰¹å®šçš„é¢‘ç‡å’Œè¡°å‡ç³»æ•°çš„è‡ªç”±è¡°å‡æŒ¯åŠ¨ã€‚ è¿™é‡Œé€šè¿‡è¡¥å……ä¸€ä¸ªæ–¹ç¨‹ï¼Œå°†åŸæ–¹ç¨‹ä»ä¸€ä¸ªäºŒé˜¶å¾®åˆ†æ–¹ç¨‹ï¼Œè½¬åŒ–ä¸ºä¸€ä¸ªä¸€é˜¶çŠ¶æ€æ–¹ç¨‹ã€‚ è®¨è®ºè‡ªç”±æŒ¯åŠ¨æ­¤æ—¶çš„çŠ¶æ€æ–¹ç¨‹ä¸ºï¼š \\hat{\\boldsymbol{M}} \\dot{\\boldsymbol{Y}}(t)+\\hat{\\boldsymbol{K}} \\boldsymbol{Y}(t)=\\mathbf{0} \\\\ \\text{åˆå§‹æ¡ä»¶ä¸º:} \\boldsymbol{X_0} ,\\boldsymbol{\\dot X_0} \\quad \\boldsymbol{Y}=\\left[\\begin{array}{l}\\dot{\\boldsymbol{X}} \\\\ \\boldsymbol{X}\\end{array}\\right] \\in R^{2 n} \\\\ä»£å…¥ä»¥ä¸‹å½¢å¼çš„è§£: $Y(t)=\\psi e^{\\lambda t}\\quad (\\psi\\in R^{2n \\times1})$ ç‰¹å¾å€¼é—®é¢˜: $(\\hat{\\boldsymbol{K}}+\\lambda \\hat{\\boldsymbol{M}}) \\psi=0 $ å°†æ–¹ç¨‹è½¬åŒ–æˆä¸ºçŠ¶æ€æ–¹ç¨‹ä¹‹åï¼Œæ–¹ç¨‹çš„ç»´æ•°å’Œç‰¹å¾æ ¹çš„æ•°ç›®å¢åŠ äº†ä¸€å€ã€‚ $2n$ ä¸ªç‰¹å¾å‘é‡: \\psi^{(1)}, \\psi^{(2)}, \\cdots, \\psi^{(2 n)} \\quad\\left(\\psi^{(i)} \\in R^{2 n \\times 1}\\right)\\\\ \\boldsymbol{\\Psi}=\\left[\\psi^{(1)}, \\psi^{(2)}, \\cdots, \\psi^{(2 n)}\\right] \\in R^{2 n \\times 2 n}æ±‚è§£å‡ºæ¥çš„å¤æ¨¡æ€å…·æœ‰æ­£äº¤æ€§: \\boldsymbol{\\Psi}^{T} \\hat{\\boldsymbol{M}} \\boldsymbol{\\Psi}=\\hat{\\boldsymbol{M}}_{p} \\in R^{2 n \\times 2 n}=\\operatorname{diag}\\left(\\hat{m}_{p 1}, \\cdots, \\hat{m}_{p(2 n)}\\right) \\\\\\boldsymbol{\\Psi}^{T} \\hat{\\boldsymbol{K}} \\boldsymbol{\\Psi}=\\hat{\\boldsymbol{K}}_{p} \\in R^{2 n \\times 2 n}=\\operatorname{diag}\\left(\\hat{k}_{p 1}, \\cdots, \\hat{k}_{p(2 n)}\\right)å¤ç‰¹å¾å€¼åˆ—ä¸ºå¯¹è§’é˜µ(è°±çŸ©é˜µ) : $ \\boldsymbol{\\Lambda}=\\operatorname{diag}\\left(\\lambda_{1}, \\cdots, \\lambda_{2 n}\\right) \\in R^{2 n \\times 2 n} $ æ­¤æ—¶çš„åŠ¨åŠ›å­¦æ–¹ç¨‹ä¸ºï¼š M \\ddot{X}(t)+\\boldsymbol{C} \\dot{\\boldsymbol{X}}(t)+\\boldsymbol{K} \\boldsymbol{X}(t)=\\boldsymbol{0} \\quad \\boldsymbol{X} \\in R^{n}ä»£å…¥å¾—æ–¹ç¨‹çš„ç‰¹è§£: $\\boldsymbol{X}(t)=\\phi e^{\\lambda t} \\quad\\left(\\phi \\in R^{n \\times 1}\\right)$ ç‰¹å¾å€¼é—®é¢˜ï¼š $\\left(M \\lambda^{2}+C \\lambda+\\boldsymbol{K}\\right) \\boldsymbol{\\varphi}=\\mathbf{0} $ $ \\psi$ ä¸ $\\phi$ ä¹‹é—´å…³ç³»ï¼Œå³ $ \\Psi$ ä¸ $\\Phi$ ä¹‹é—´å…³ç³»ä¸ºï¼š \\psi=\\left[\\begin{array}{c}\\lambda \\phi \\\\\\phi\\end{array}\\right] \\quad \\Psi=\\left[\\begin{array}{c}\\Phi\\Lambda \\\\\\Phi\\end{array}\\right]ä¹‹åå¯¹Yè¿›è¡Œå˜æ¢ $Y=\\Psi Z$, ä»£å…¥åˆ°åŸæ¥çš„çŠ¶æ€æ–¹ç¨‹ä¸­å¯å¾—ï¼š \\boldsymbol{\\Psi}^{T} \\hat{\\boldsymbol{M}} \\boldsymbol{\\Psi} \\dot{\\boldsymbol{Z}}(t)+\\boldsymbol{\\Psi}^{T} \\hat{\\boldsymbol{K}} \\boldsymbol{\\Psi} \\boldsymbol{Z}(t)=\\mathbf{0}\\\\ \\begin{array}{l}\\hat{m}_{p_{i}} \\dot{z}_{i}(t)+\\hat{k}_{p_{i}} z_{i}(t)=0, \\quad i=1 \\sim 2 n \\\\\\dot{z}_{i}(t)-\\lambda_{i} z_{i}(t)=0 \\quad z_{i}(t)=z_{i}(0) e^{\\lambda_{i} t}\\end{array}åˆå§‹æ¡ä»¶ï¼š$\\boldsymbol{Z}(0)=\\boldsymbol{\\Psi}^{-1} \\boldsymbol{Y}(0)$ è¿™é‡Œçš„c,é˜»å°¼çŸ©é˜µçš„é¡¹è¢«å¹¶å…¥åˆ° $\\hat{\\boldsymbol{M}}$ ä¸­ã€‚ å¾—$z_i(i=1,2,â€¦,2n)$ äºæ˜¯$Zã€Yã€Xã€\\dot X$ å°±å¯ä»¥å…¨éƒ¨æ±‚å‡ºã€‚ \\boldsymbol{\\psi}^{(i)^{T}} \\hat{\\boldsymbol{M}} \\boldsymbol{\\psi}^{(j)}=\\delta_{i j} \\hat{m}_{p i} \\quad \\boldsymbol{\\psi}^{(i)^{T}} \\hat{\\boldsymbol{K}} \\boldsymbol{\\psi}^{(j)}=\\delta_{i j} \\hat{k}_{p i} å¯¹äº$Z(0)$ çŸ©é˜µçš„æ¥è¯´ï¼Œå…¶ç¬¬ i ä¸ªåˆ†é‡ä¸ºï¼š z_{i}(0)=\\frac{1}{\\hat{m}_{p i}} \\boldsymbol{\\Psi}^{T} \\hat{\\boldsymbol{M}} \\boldsymbol{Y}(0) =\\frac{1}{\\hat{m}_{p i}}\\left[\\begin{array}{ll}\\lambda_{i} \\phi_{i}^{T} & \\phi_{i}^{T}\\end{array}\\right]\\left[\\begin{array}{cc}\\boldsymbol{0} & \\boldsymbol{M} \\\\ \\boldsymbol{M} & \\boldsymbol{C}\\end{array}\\right]\\left[\\begin{array}{c}\\dot{\\boldsymbol{X}}_{0} \\\\ \\boldsymbol{X}_{0}\\end{array}\\right] \\\\ =\\frac{1}{\\hat{m}_{p i}} \\boldsymbol{\\phi}_{i}^{T}\\left(\\lambda_{i} \\boldsymbol{M} \\boldsymbol{X}_{0}+\\boldsymbol{M} \\dot{\\boldsymbol{X}}_{0}+\\boldsymbol{C} \\boldsymbol{X}_{0}\\right)æ±‚è§£å®Œ$z_i(0)$ ä»£å…¥å…¬å¼ $z_i(t)=z_i(0)e^{\\lambda_i t}$ ä¸­æ¥æ±‚è§£$z_i(t)$ï¼Œè¿›è€Œå¾—å‡º$Z(t)$ ï¼Œå°†$Z(t)$ ä»£å…¥åˆ°ä¸‹åˆ—æ–¹ç¨‹å¾—ï¼š \\boldsymbol{Y}(t)=\\left[\\begin{array}{c}\\dot{\\boldsymbol{X}}(t) \\\\ \\boldsymbol{X}(t)\\end{array}\\right]=\\boldsymbol{\\Psi} \\boldsymbol{Z}(t)=\\left[\\begin{array}{c}\\boldsymbol{\\Phi} \\boldsymbol{\\Lambda} \\\\ \\boldsymbol{\\Phi}\\end{array}\\right] \\boldsymbol{Z}(t)\\\\ \\boldsymbol{X}(t)=\\boldsymbol{\\Phi} \\boldsymbol{Z}(t) \\quad \\dot{\\boldsymbol{X}}(t)=\\boldsymbol{\\Phi} \\boldsymbol{\\Lambda} \\boldsymbol{Z}(t)\\\\ \\boldsymbol{\\Lambda}=\\operatorname{diag}\\left(\\lambda_{1}, \\cdots, \\lambda_{2 n}\\right) \\in R^{2 n \\times 2 n} \\\\ \\boldsymbol{\\Phi}=\\left[\\boldsymbol{\\phi}^{(1)}, \\quad \\boldsymbol{\\phi}^{(2)}, \\cdots, \\quad \\boldsymbol{\\phi}^{(2 n)}\\right] \\in R^{n \\times 2 n} \\quad\\left(\\boldsymbol{\\phi}^{(i)} \\in R^{n \\times 1}\\right)æœ€ç»ˆè§£å‡º$X(t)$çš„è¡¨è¾¾å¼ä¸ºï¼š \\boldsymbol{X}(t)=\\boldsymbol{\\Phi} \\boldsymbol{Z}(t)=\\sum_{i=1}^{2 n} \\boldsymbol{\\phi}_{i} z_{i}(t)=\\sum_{i=1}^{2 n} \\frac{e^{\\lambda_{i} t}}{\\hat{m}_{p i}} \\boldsymbol{\\phi}_{i} \\boldsymbol{\\phi}_{i}^{T}\\left(\\lambda_{i} \\boldsymbol{M} \\boldsymbol{X}_{0}+\\boldsymbol{M}_{0}\\dot{\\boldsymbol{X_0}}+{\\boldsymbol{C}}{\\boldsymbol{X}}_{0}\\right) å¤æ¨¡æ€ä¸å†å…·æœ‰ä¸»æ¨¡æ€çš„æ„ä¹‰ï¼Œè€Œæ˜¯å…·æœ‰ç›¸ä½å…³ç³»çš„æŒ¯å‹ï¼Œå®éƒ¨ä»£è¡¨è¡°å‡ç‡ï¼Œè™šéƒ¨ä»£è¡¨è¡°å‡ç³»ç»Ÿçš„å›ºæœ‰é¢‘ç‡ã€‚ å…¶æ¨¡é•¿æ‰æ˜¯çœŸæ­£çš„å›ºæœ‰é¢‘ç‡ã€‚ å¤æ¨¡æ€åˆ†æçš„æ˜¯ä¸€é˜¶çš„çŠ¶æ€æ–¹ç¨‹ï¼Œå¹¶ä¸”ç»´åº¦æ‰©å¤§äº†ä¸€å€ã€‚ å…¸å‹ä¾‹é¢˜ è¿™é‡Œé¦–å…ˆæ±‚å‡ºåœ¨æ­£å¸¸æƒ…å†µä¸‹ç³»ç»Ÿçš„å›ºæœ‰é¢‘ç‡å’Œæ¨¡æ€ï¼Œæ³¨æ„è¿™é‡Œè§£å‡ºçš„å›ºæœ‰ç‰¹å¾æ ¹å’Œæ¨¡æ€éƒ½æ˜¯å¤æ•°çš„å½¢å¼ï¼Œå…¶çœŸæ­£çš„å›ºæœ‰é¢‘ç‡ä¸ºç‰¹å¾æ ¹çš„æ¨¡é•¿ã€‚ ä¹‹åï¼Œæ ¹æ®ç³»ç»Ÿå¯¹åˆå§‹çŠ¶æ€ä¸‹çš„å“åº”å¯å¾—ï¼Œä»£å…¥åˆ°åˆšæ‰æ±‚å‡ºçš„è¡¨è¾¾å¼ä¸­ã€‚ \\boldsymbol{X}(t)=\\sum_{i=1}^{2 n} \\frac{e^{\\lambda_{i} t}}{\\hat{m}_{p i}} \\boldsymbol{\\phi}_{i} \\boldsymbol{\\phi}_{i}^{T}\\left(\\lambda_{i} \\boldsymbol{M} \\boldsymbol{X}_{0}+\\boldsymbol{M}_{0}\\dot{\\boldsymbol{X_0}}+{\\boldsymbol{C}}{\\boldsymbol{X}}_{0}\\right)\\\\ \\boldsymbol{X}(t)=\\sum_{i=1}^{4} \\frac{e^{\\lambda_{i} t}}{\\hat{m}_{p i}} \\boldsymbol{\\phi}_{i} \\boldsymbol{\\phi}_{i}^{T} \\boldsymbol{M} \\dot{\\boldsymbol{X}}_{0}=\\sum_{i=1}^{4} e^{\\lambda_{, t}} \\frac{\\left(\\boldsymbol{\\phi}_{i}^{T} \\boldsymbol{M} \\dot{\\boldsymbol{X}}_{0}\\right)}{\\hat{m}_{p i}} \\boldsymbol{\\phi}_{i} 2å’Œ4ç”±å…±è½­å…³ç³»å¯ä»¥ç›´æ¥æ¨å¯¼å‡ºï¼š è™šéƒ¨ä¹‹é—´ç›¸äº’æŠµæ¶ˆå¯å¾—æœ€åçš„ç»“æœè¡¨è¾¾å¼ã€‚ ä½¿ç”¨å¿½ç•¥éå¯¹è§’é¡¹æ–¹æ³•æ±‚è§£ï¼š","link":"/2022/03/15/%E6%8C%AF%E5%8A%A8%E5%8A%9B%E5%AD%A6/%E7%AC%AC%E5%9B%9B%E7%AB%A0-%E5%A4%9A%E8%87%AA%E7%94%B1%E5%BA%A6%E7%B3%BB%E7%BB%9F%E6%8C%AF%E5%8A%A8-%E6%9C%89%E9%98%BB%E5%B0%BC%E7%9A%84%E5%A4%9A%E8%87%AA%E7%94%B1%E5%BA%A6%E7%B3%BB%E7%BB%9F/"},{"title":"ç¬¬å››ç«  å¤šè‡ªç”±åº¦ç³»ç»ŸæŒ¯åŠ¨ é¢‘ç‡æ–¹ç¨‹çš„é›¶æ ¹å’Œé‡æ ¹æƒ…å½¢","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦ä»‹ç»çš„æ˜¯å¤šè‡ªç”±æŒ¯åŠ¨ç³»ç»Ÿä¸­é¢‘ç‡æ–¹ç¨‹çš„é›¶æ ¹å’Œé‡æ ¹çš„å¤„ç†ï¼Œä¸»è¦ä»‹ç»é›¶æ ¹å’Œé‡æ ¹çš„å¤„ç†ä»¥åŠåˆšä½“æ¨¡æ€çš„å­˜åœ¨æ¡ä»¶ã€‚ å¯¹äºé›¶æ ¹çš„æƒ…å½¢Kçš„é€†ä¸å­˜åœ¨ï¼Œæ­¤æ—¶æ¨¡æ€çŸ©é˜µçš„é€†ä¹Ÿæ˜¯ä¸å­˜åœ¨çš„ã€‚å¯¹äºé‡æ ¹çš„æƒ…å½¢ï¼Œå…¶æ¨¡æ€çŸ©é˜µå¯èƒ½æœ‰ä¸¤åˆ—æ˜¯ä¸€è‡´çš„ã€‚ æœ¬è´¨éƒ½æ˜¯å¯¹æ¨¡æ€çŸ©é˜µçš„å­˜åœ¨æ€§å’Œæ¨¡æ€çŸ©é˜µçš„ç§©è¿›è¡Œåˆ†æçš„ï¼Œåªè¦æ¨¡æ€çŸ©é˜µå­˜åœ¨ä¸”æ»¡ç§©ï¼Œå°±å­˜åœ¨è´¨é‡å’Œåˆšåº¦çš„æ­£äº¤æ€§çš„è½¬æ¢ï¼Œå°±å¯ä»¥ç”¨å åŠ æ³•æ¥æ±‚è§£ã€‚ é¢‘ç‡æ–¹ç¨‹é›¶æ ¹çš„æƒ…å½¢ \\omega=0 \\quad \\Rightarrow \\quad\\boldsymbol|{K}|=0 K ä¸ºå¥‡å¼‚çŸ©é˜µæ˜¯é›¶å›ºæœ‰é¢‘ç‡å­˜åœ¨çš„å……è¦æ¡ä»¶ï¼Œæ»¡è¶³æ­¤æ¡ä»¶æ—¶ç³»ç»Ÿçš„åˆšåº¦çŸ©é˜µ K æ˜¯åŠæ­£å®šçš„ã€‚ \\omega=0 \\quad \\Rightarrow \\quad\\boldsymbol{K}\\phi=0 å½“åŠæ­£å®šç³»ç»ŸæŒ‰åˆšä½“æŒ¯å‹è¿åŠ¨æ—¶ï¼Œä¸å‘ç”Ÿå¼¹æ€§å˜å½¢ï¼Œå› æ­¤ä¸äº§ç”Ÿå¼¹æ€§æ¢å¤åŠ›ã€‚ å› æ­¤å‡å®šç³»ç»Ÿä¸­,$\\omega_1=0$ ä¸€èˆ¬æƒ…å†µä¸‹åªæœ‰ä¸€é˜¶é¢‘ç‡ä¸º0ï¼Œå› ä¸ºä¸€é˜¶é¢‘ç‡åœ¨å…¶ä¸­æ˜¯æœ€å°çš„ï¼Œæ­¤æ—¶å…¶å¯¹åº”çš„ä¸»åæ ‡æ–¹ç¨‹ä¸ºï¼š m_{p 1} \\ddot{x}_{p 1}(t)+k_{p 1} x_{p 1}(t)=0 \\Rightarrow \\ddot{x}_{p 1}(t)+\\omega_{1}^2 x_{p 1}(t)=0\\\\ \\Rightarrow \\ddot{x}_{p 1}(t)=0 \\Rightarrow {x}_{p 1}(t)=at+bå…¶ä¸­ï¼Œa,bæ˜¯ç”±åˆå§‹æ¡ä»¶å†³å®šçš„ã€‚ æ­¤æ—¶å¯¹åº”çš„æ¨¡æ€çŸ©é˜µ$\\phi^{(1)}=[1 \\quad 1 \\quad 1]^T, $ ä¸‰ä¸ªè´¨é‡çš„è¿åŠ¨æ˜¯åŒæ­¥çš„ï¼Œä¸”æ²¡æœ‰ç›¸å¯¹çš„ä½ç§»ã€‚ æ³¨æ„$\\omega=0$ å¯ä»¥å¾—åˆ° $\\phi^{(1)}=[1 \\quad 1 \\quad 1]^T, $ æ˜¯ä¸ä¸º0çš„ï¼Œä½†æ˜¯åä¹‹ä¸ä¸€å®šæˆç«‹ã€‚å³æ ¹æ®é¢‘ç‡å¯ä»¥åˆ¤æ–­æ¨¡æ€çš„æƒ…å†µï¼Œä½†æ˜¯æ— æ³•æ ¹æ®æ¨¡æ€åˆ¤æ–­é¢‘ç‡ã€‚ è¡¨æ˜æ­¤ä¸»æŒ¯åŠ¨ä¸ºéšæ—¶é—´åŒ€é€Ÿå¢å¤§çš„åˆšä½“ä½ç§»ã€‚ æœ¬èŠ‚ä¸»è¦è€ƒè™‘çš„æ˜¯åœ¨æœ‰é›¶æ ¹å’Œé‡æ ¹çš„æ¡ä»¶ä¸‹ï¼Œå¦‚ä½•æ¥æ±‚è§£æ¨¡æ€çŸ©é˜µï¼Œä½¿å¾—å…¶æ­£äº¤æ€§å­˜åœ¨ã€‚ ç³»ç»Ÿçš„åˆšä½“è‡ªç”±åº¦å¯ä»¥åˆ©ç”¨æŒ¯å‹çš„æ­£äº¤æ€§æ¡ä»¶æ¶ˆé™¤ã€‚ è®¾ $\\phi^{(1)}$ ä¸ºä¸ $\\omega_1=0$ å¯¹åº”çš„åˆšä½“ä½ç§»æŒ¯å‹ï¼Œç”±äºæ­£äº¤æ€§æ¡ä»¶ $\\boldsymbol{\\phi}^{(i) T} \\boldsymbol{M} \\boldsymbol{\\phi}^{(j)}=0(i \\neq j)$ å¯å¾—ï¼š \\boldsymbol{\\phi}^{(1) T} \\boldsymbol{M} \\boldsymbol{\\phi}^{(i)}=0\\quad (i=2,3,...,n)å…¶ä¸­$\\boldsymbol{\\phi}^{(j)}(i=2,3,â€¦,n)$ é™¤åˆšä½“ä½ç§»ä¹‹å¤–çš„å…¶å®ƒæŒ¯å‹ã€‚ ${x}_{p i}(t)(i=2,3,â€¦,n)$ ä¸ºä¸ $\\boldsymbol{\\phi}^{(i)}(i=2,3,â€¦,n)$ æ‰€å¯¹åº”çš„ä¸»åæ ‡ å³ä¹˜${x}_{p i}(t)$ ï¼š$\\boldsymbol{\\phi}^{(1) T} \\boldsymbol{M} \\boldsymbol{\\phi}^{(i)}=0\\quad (i=2,3,â€¦,n)$ ä»¤$\\boldsymbol{X}=\\sum\\limits_{i=1}^{n} \\boldsymbol{\\phi}^{(i)} x_{p i} $ç³»ç»Ÿæ¶ˆé™¤åˆšä½“ä½ç§»åçš„è‡ªç”±æŒ¯åŠ¨å¯å¾—çº¦æŸæ¡ä»¶ï¼š \\boldsymbol{\\phi}^{(1) T} \\boldsymbol{M} \\boldsymbol{X(t)}=0\\quad (i=2,3,...,n) åˆ©ç”¨æ­¤çº¦æŸæ¡ä»¶å¯æ¶ˆå»ç³»ç»Ÿçš„ä¸€ä¸ªè‡ªç”±åº¦ï¼Œå¾—åˆ°ä¸å«åˆšä½“ä½ç§»çš„ç¼©å‡ç³»ç»Ÿï¼Œç¼©å‡ç³»ç»Ÿçš„åˆšåº¦çŸ©é˜µæ˜¯éå¥‡å¼‚çš„ã€‚ ç›¸å½“äºç«™åœ¨$m_1$ä¸Šçœ‹ç³»ç»Ÿï¼Œå•ä¸‰è€…æ˜¯åˆšä½“è¿åŠ¨æ—¶ä»$m_1$ä¸Šçœ‹å°±æ˜¯é‚£ä¸¤ä¸ªå°±æ˜¯é™æ­¢ä¸åŠ¨çš„ã€‚ ä¾‹ï¼šå››è‡ªç”±åº¦ç³»ç»Ÿï¼Œæ±‚ç³»ç»Ÿå“åº”ã€‚ æ–¹æ³•ä¸€(æ ¹æ®å®é™…æƒ…å†µåˆ†æƒ…å†µæ±‚è§£): ç”±ç³»ç»Ÿå¯å¾—åŠ¨åŠ›æ–¹ç¨‹ä¸º : \\left[\\begin{array}{cccc}m & 0 & 0 & 0 \\\\ 0 & m & 0 & 0 \\\\ 0 & 0 & m & 0 \\\\ 0 & 0 & 0 & m\\end{array}\\right]\\left[\\begin{array}{c}\\ddot{x}_{1}(t) \\\\ \\ddot{x}_{2}(t) \\\\ \\ddot{x}_{3}(t) \\\\ \\ddot{x}_{4}(t)\\end{array}\\right]+k\\left[\\begin{array}{cccc}1 & -1 & 0 & 0 \\\\ -1 & 2 & -1 & 0 \\\\ 0 & -1 & 2 & -1 \\\\ 0 & 0 & -1 & 1\\end{array}\\right]\\left[\\begin{array}{l}x_{1}(t) \\\\ x_{2}(t) \\\\ x_{3}(t) \\\\ x_{4}(t)\\end{array}\\right]=0å›ºæœ‰é¢‘ç‡ä¸ºï¼š \\omega_{1}^{2}=0 \\quad \\omega_{2}^{2}=(2-\\sqrt{2}) \\frac{k}{m} \\quad \\omega_{3}^{2}=2 \\frac{k}{m} \\quad \\omega_{4}^{2}=(2+\\sqrt{2}) \\frac{k}{m} æ­£åˆ™æ¨¡æ€æ–¹ç¨‹: \\ddot{\\boldsymbol{X}}_{N}(t)+\\boldsymbol{\\Lambda} \\boldsymbol{X}_{N}(t)=\\boldsymbol{0} \\quad \\boldsymbol{X}_{N}=\\left[\\begin{array}{llll}x_{N 1} & x_{N 2} & x_{N 3} & x_{N 4}\\end{array}\\right]^{T} \\\\ \\ddot{x}_{N i}(t)+\\omega_{i}^{2} x_{N i}(t)=0 \\quad(i=1 \\sim 4)å°†ç‰©ç†åæ ‡åˆå§‹åŒ–çš„æ¡ä»¶å¸¦å…¥åˆ°ï¼Œæ¨¡æ€åæ ‡è¿›è¡Œåˆå§‹åŒ–: \\boldsymbol{X}_{N}(0)=\\boldsymbol{\\Phi}_{N}^{-1} \\boldsymbol{X}_{0}=\\left[\\begin{array}{llll}0 & 0 & 0 & 0\\end{array}\\right]^{T} \\\\ \\dot{\\boldsymbol{X}}_{N}(0)=\\boldsymbol{\\Phi}_{N}^{-1} \\dot{\\boldsymbol{X}}_{0}=\\sqrt{m} \\times v\\left[\\begin{array}{llll}1 & 0 & 1 & 0\\end{array}\\right]^{T} ç‰©ç†ç©ºé—´å“åº”: \\boldsymbol{X}(t)=\\boldsymbol{\\Phi}_{N} \\boldsymbol{X}_{N}(t)=\\frac{v}{2}\\left[\\begin{array}{c}t+\\frac{1}{\\omega_{3}} \\sin \\omega_{3} t \\\\t-\\frac{1}{\\omega_{3}} \\sin \\omega_{3} t \\\\t-\\frac{1}{\\omega_{3}} \\sin \\omega_{3} t \\\\t+\\frac{1}{\\omega_{3}} \\sin \\omega_{3} t\\end{array}\\right]æ–¹æ³•äºŒ(ä»¥ç¬¬ä¸€ä¸ªä¸ºå‚è€ƒç³»å‡å»ä¸€ä¸ªè‡ªç”±åº¦): è§£å‡ºç³»ç»Ÿçš„å›ºæœ‰é¢‘ç‡ä¸ºï¼š \\omega_{2}^{2}=(2-\\sqrt{2}) \\frac{k}{m} \\quad \\omega_{3}^{2}=2 \\frac{k}{m} \\quad \\omega_{4}^{2}=(2+\\sqrt{2}) \\frac{k}{m} ä¸¤ç§æ–¹æ³•çš„ç»“æœä¸åŒï¼Œå› ä¸ºæ³•äºŒæ˜¯ç«™åœ¨$m_1$ ä¸Šé¢çœ‹å…¶ä»–åˆšä½“çš„æŒ¯åŠ¨çš„ï¼Œå› æ­¤æ³•äºŒçš„ç»“æœä¸­æ¶ˆé™¤çš„åˆšä½“çš„æŒ¯åŠ¨ã€‚ æ­¤æ¨¡å‹ä¸€æ ·çœ‹æˆæ˜¯åˆšä½“è¿åŠ¨å’Œç®€è°æŒ¯åŠ¨çš„å åŠ ã€‚ åŒæ ·çš„æ–¹æ³•å¯ä»¥æ¥åˆ†ææŸ”æ€§æœºæ¢°è‡‚çš„å˜å½¢ï¼Œå…ˆå‡è®¾æœºæ¢°è‡‚æ˜¯åˆšæ€§çš„ï¼Œä¹‹åæˆ‘ä»¬ç›¸å¯¹ç¬¬ä¸€ä¸ªåˆšä½“å»ºç«‹æµ®åŠ¨åŸºï¼Œå…¶ä¸»è¦æ˜¯ç›¸å¯¹äºç¬¬ä¸€ä¸ªåˆšæ€§åŸºå˜å½¢çš„ã€‚ æ–¹æ³•ä¸€çš„ç»“æœï¼š æ­£ä¸¤ç§æ–¹æ³•å¯¹åº”çš„å¹¿ä¹‰åæ ‡å’Œç‰©ç†å«ä¹‰æ˜¯ä¸åŒçš„ã€‚ ç³»ç»Ÿå­˜åœ¨åˆšä½“æ¨¡æ€çš„æ¡ä»¶ ç³»ç»Ÿå­˜åœ¨åˆšä½“æ¨¡æ€çš„æ¡ä»¶ï¼š æŸé˜¶å›ºæœ‰é¢‘ç‡ä¸ºé›¶æˆ–åˆšåº¦çŸ©é˜µå¥‡å¼‚ æ‰€å¯¹åº”çš„æŒ¯å‹å…ƒç´ å…¨ç›¸ç­‰ é¢‘ç‡æ–¹ç¨‹çš„é‡æ ¹æƒ…å½¢ åœ¨å‰é¢å¼•å…¥æŒ¯å‹çŸ©é˜µï¼ˆæˆ–æ¨¡æ€çŸ©é˜µï¼‰çš„æ¦‚å¿µæ—¶ï¼Œæ›¾å‡è®¾æ‰€æœ‰çš„ç‰¹å¾å€¼éƒ½æ˜¯ç‰¹å¾æ–¹ç¨‹çš„å•æ ¹ å¤æ‚çš„ç³»ç»Ÿä¸­ä¼šå‡ºç°æŸäº›ç‰¹å¾æ ¹å½¼æ­¤å¾ˆæ¥è¿‘ç”šè‡³ç›¸ç­‰çš„æƒ…å†µå·¥ç¨‹èƒŒæ™¯ä¹‹ä¸€ï¼šæŸ”æ€§èˆªå¤©ç»“æ„ ä¾‹å¦‚ï¼šnè‡ªç”±åº¦ç³»ç»Ÿä¸­ $\\omega_1=\\omega_2 \\quad \\Rightarrow \\quad \\phi^{(1)}=\\phi^{(2)}$ åˆšåº¦çŸ©é˜µå¥‡å¼‚ã€‚ å‡è®¾ $\\omega_{1}$ ä¸º r é‡æ ¹ $\\omega_{1}^{2}=\\omega_{2}^{2}=\\cdots=\\omega_{r}^{2} $ å…¶ä½™ $\\omega_{r+1},â€¦,\\omega_n$ éƒ½æ˜¯å•æ ¹ã€‚ $\\omega^{2}=\\omega_{1}^{2}$ å¸¦å…¥åˆ°ç‰¹å¾æ–¹ç¨‹ä¹‹ä¸­ï¼š$\\left(\\boldsymbol{K}-\\omega_{1}^{2} \\boldsymbol{M}\\right) \\boldsymbol{\\phi}=\\boldsymbol{0}$ æ­¤æ—¶ç‰¹å¾çŸ©é˜µçš„ç§©ä¸ºï¼š$rank[\\boldsymbol{K}-\\omega_{1}^{2} \\boldsymbol{M}]=n-r$ ä¾‹å¦‚å½“ $\\omega_1^2$ æ˜¯å•æ ¹æ—¶ï¼Œ$r=1$ , n ä¸ªæ–¹ç¨‹ä¸­åªæœ‰ n â€“ 1 ä¸ªæ˜¯ç‹¬ç«‹çš„ä¸ºç®€å•è®¡ï¼Œä»¤$\\omega_1=\\omega_2$ ,$r=2$ã€‚ åˆ™è®¡ç®— $\\omega_1$ å¯¹åº”çš„æŒ¯å‹æ—¶ï¼Œ$\\left(\\boldsymbol{K}-\\omega_{1}^{2} \\boldsymbol{M}\\right) \\boldsymbol{\\phi}=\\boldsymbol{0}$ ä¸­æœ‰2ä¸ªæ˜¯ä¸ç‹¬ç«‹çš„æ–¹ç¨‹ æ¨¡æ€ä¹‹é—´çš„æ­£äº¤æ€§è¯æ˜ï¼š å¯¹$\\phi^{(1)}$ æ»¡è¶³ï¼š$ \\left(\\boldsymbol{K}-\\omega_{1}^{2} \\boldsymbol{M}\\right) \\boldsymbol{\\phi}=\\boldsymbol{0} \\Rightarrow \\boldsymbol{K}\\phi^{(1)}=\\omega_{1}^{2} \\boldsymbol{M}\\phi^{(1)}$ ,ä¸¤è¾¹å³ä¹˜ $\\phi^{(j)}$ å¯¹$\\phi^{(j)} (j=3,4,â€¦,n)$ æ»¡è¶³ï¼š$ \\left(\\boldsymbol{K}-\\omega_{j}^{2} \\boldsymbol{M}\\right) \\boldsymbol{\\phi}=\\boldsymbol{0} \\Rightarrow \\boldsymbol{K}\\phi^{(j)}=\\omega_{1}^{2} \\boldsymbol{M}\\phi^{(j)}$ ,ä¸¤è¾¹å·¦ä¹˜ $\\phi^{(1)^T}$ \\boldsymbol{\\phi}^{(1)^{T}} \\boldsymbol{K} \\boldsymbol{\\phi}^{(j)}=\\omega_{i}^{2} \\boldsymbol{\\phi}^{(1)^{T}} \\boldsymbol{M} \\boldsymbol{\\phi}^{(j)} \\quad \\boldsymbol{\\phi}^{(1)^{T}} \\boldsymbol{K} \\boldsymbol{\\phi}^{(j)}=\\omega_{1}^{2} \\boldsymbol{\\phi}^{(1)^{T}} \\boldsymbol{M} \\boldsymbol{\\phi}^{(j)} æ•´ç†å¯å¾—ï¼š $(\\omega_{1}^{2}-\\omega_{j}^{2}) \\boldsymbol{\\phi}^{(1)^{T}} \\boldsymbol{M} \\boldsymbol{\\phi}^{(j)}=0$ ç”±äº$\\omega_{1} \\ne \\omega_{j}$ æ‰€ä»¥æ­£äº¤ æ­¤æ—¶ï¼Œé™¤äº†å‰ä¸¤é˜¶æ¨¡æ€ä¹‹å¤–å…¶ä½™çš„æ¨¡æ€çš„ä¹‹é—´æœ‰æ­£äº¤çš„å…³ç³»ï¼Œä¸‹é¢æ¥å¤„ç†å‰ä¸¤é˜¶çš„æ¨¡æ€å…³ç³»ã€‚ è¿™è¾¹çš„æè¿°å¤ªè¿‡æŠ½è±¡ï¼Œå…·ä½“çš„ç†è§£å‚è€ƒä¸‹é¢çš„ä¾‹é¢˜ã€‚ $ \\omega_{1}=\\omega_{2}\\left[\\begin{array}{l}\\phi_{n-1}^{(1)} \\\\ \\phi_{n}^{(1)}\\end{array}\\right]=\\left[\\begin{array}{l}1 \\\\ 0\\end{array}\\right] \\quad\\left[\\begin{array}{l}\\phi_{n-1}^{(2)} \\\\ \\phi_{n}^{(2)}\\end{array}\\right]=\\left[\\begin{array}{l}0 \\\\ 1\\end{array}\\right] \\quad \\boldsymbol{\\phi}_{i}^{(1)}, \\boldsymbol{\\phi}_{i}^{(2)} $ ä¸ºä¿è¯å®ƒä»¬ä¹‹é—´æ»¡è¶³æ­£äº¤æ€§æ¡ä»¶ä»¤ï¼š$\\bar{\\phi}^{(2)}=\\phi^{(2)}+c\\phi^{(1)}$ ï¼Œåˆ™$\\bar{\\phi}^{(2)}$ ä¹Ÿä¸ºæœ€åçš„ç»“æœã€‚ ä¸ºäº†ä¿è¯æ­£äº¤æ€§ï¼Œè¦æ»¡è¶³$\\boldsymbol{\\phi}^{(1)^{T}} \\boldsymbol{K} \\boldsymbol{\\bar{\\phi}^{(2)}}=0 \\Rightarrow \\boldsymbol{\\phi}^{(1)^{T}} \\boldsymbol{K} (\\phi^{(2)}+c\\phi^{(1)})=0$ è§£å¾—ï¼š $ c=-\\dfrac{\\boldsymbol{\\phi}^{(1) T} \\boldsymbol{M} \\boldsymbol{\\phi}^{(2)}}{\\boldsymbol{\\phi}^{(1) T} \\boldsymbol{M} \\boldsymbol{\\phi}^{(1)}}=-\\dfrac{1}{m_{p 1}} \\boldsymbol{\\phi}^{(1) T} \\boldsymbol{M} \\boldsymbol{\\phi}^{(2)} $ æ­¤æ—¶æ»¡è¶³$\\bar{\\phi}^{(2)},\\phi^{(1)}$ æ­£äº¤ã€‚ ç”±äºçº¿æ€§å åŠ åŸç†ï¼Œ$\\bar{\\phi}^{(2)}$ ä¹Ÿæ˜¯å…³äºå…¶ä»–æ¨¡æ€ä¹Ÿæ˜¯æ­£äº¤çš„ã€‚ ä¾‹é¢˜ ä¾‹ï¼šå››è‡ªç”±åº¦ç³»ç»Ÿï¼Œæ±‚ï¼šç³»ç»ŸæŒ¯å‹çŸ©é˜µã€‚ é¦–å…ˆï¼Œç¡®å®šåŠ¨åŠ›å­¦æ–¹ç¨‹ä»¥åŠå›ºæœ‰é¢‘ç‡ã€‚ åˆ’å»åä¸¤ä¸ªæ–¹ç¨‹ï¼Œå°†å‰ä¸¤ä¸ªæ–¹ç¨‹å†™ä¸ºï¼š {\\left[\\begin{array}{ll}-1 & -1 \\\\ -1 & -2\\end{array}\\right]\\left[\\begin{array}{l}\\phi_{1} \\\\ \\phi_{2}\\end{array}\\right]+\\left[\\begin{array}{cc}-1 & -1 \\\\ -1 & 0\\end{array}\\right]\\left[\\begin{array}{l}\\phi_{3} \\\\ \\phi_{4}\\end{array}\\right]=\\left[\\begin{array}{l}0 \\\\ 0\\end{array}\\right] } \\\\ {\\left[\\begin{array}{l}\\phi_{1} \\\\ \\phi_{2}\\end{array}\\right]=-\\left[\\begin{array}{ll}-1 & -1 \\\\ -1 & -2\\end{array}\\right]^{-1}\\left[\\begin{array}{cc}-1 & -1 \\\\ -1 & 0\\end{array}\\right]\\qquad \\left[\\begin{array}{l}\\phi_{3} \\\\ \\phi_{4}\\end{array}\\right]=\\left[\\begin{array}{cc}-1 & -2 \\\\ 0 & 1\\end{array}\\right]\\left[\\begin{array}{l}\\phi_{3} \\\\ \\phi_{4}\\end{array}\\right] }\\\\ \\Rightarrow\\left[\\begin{array}{l}\\phi_{1}\\\\ \\phi_{2} \\\\ \\phi_{3} \\\\ \\phi_{4}\\end{array}\\right]=\\left[\\begin{array}{cc}-1 & -2 \\\\ 0 & 1\\\\ 1 &0 \\\\ 0 & 1\\end{array}\\right]\\left[\\begin{array}{l}\\phi_{3} \\\\ \\phi_{4}\\end{array}\\right]äºæ˜¯ç”±äºå‰ä¸¤é˜¶çš„æ¨¡æ€æ²¡æœ‰é‡æ ¹ï¼Œç›´æ¥æ±‚è§£å¯å¾—å‡ºå‰ä¸¤é˜¶çš„æ¨¡æ€ä¸ºï¼š$\\phi_{1}=[1 \\quad 1 \\quad 1\\quad 1]^T$,$\\phi_{2}=[0 \\quad -1 \\quad 0 \\quad 1]^T$ ã€‚ æ ¹æ®åˆšæ‰çš„æ±‚è§£å¯å¾—åä¸¤é˜¶æ¨¡æ€ä¸ºï¼š$\\phi_{3}=[-1 \\quad 0 \\quad 1\\quad 0]^T$,$\\phi_{2}=[-2 \\quad 1 \\quad 0 \\quad 1]^T$ ä¸æ˜¯æ­£äº¤çš„ï¼Œå…¶å¯¹åº”çš„ä¸»æŒ¯å‹ä¸ºï¼š é›¶æ ¹çš„æƒ…å½¢ï¼šï¼ˆ1ï¼‰é›¶æ ¹åªæœ‰ä¸€ä¸ªï¼›ï¼ˆ2ï¼‰å¯¹åº”çš„æ˜¯å­˜åœ¨åˆšä½“è‡ªç”±åº¦ï¼› é‡æ ¹çš„æƒ…å½¢ï¼šï¼ˆ1ï¼‰é‡æ ¹å¯ä»¥æœ‰å¾ˆå¤šä¸ªï¼›ï¼ˆ2ï¼‰å¯¹åº”çš„æ˜¯æŸ”æ€§èˆªå¤©å™¨ã€‚","link":"/2022/03/14/%E6%8C%AF%E5%8A%A8%E5%8A%9B%E5%AD%A6/%E7%AC%AC%E5%9B%9B%E7%AB%A0-%E5%A4%9A%E8%87%AA%E7%94%B1%E5%BA%A6%E7%B3%BB%E7%BB%9F%E6%8C%AF%E5%8A%A8-%E9%A2%91%E7%8E%87%E6%96%B9%E7%A8%8B%E7%9A%84%E9%9B%B6%E6%A0%B9%E5%92%8C%E9%87%8D%E6%A0%B9%E6%83%85%E5%BD%A2/"},{"title":"AlexNetç½‘ç»œè¯¦è§£ä¸Pytorchå®ç°","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡é¦–å…ˆè¯¦è§£AlexNetç½‘ç»œï¼Œè®¡ç®—æ¯ä¸€å±‚ç½‘ç»œçš„ç»´åº¦å¹¶ä¸”æ•´ç†äº†èŠ±æ•°æ®é›†ã€‚ä¹‹åï¼Œé€šè¿‡Pytorchå¯¹ç½‘ç»œè¿›è¡Œå¤ç°ï¼Œä¸»è¦ä»æ¨¡å‹æ­å»ºã€è®¾ç½®GPUã€æ•°æ®é¢„å¤„ç†ã€åŠ è½½æ•°æ®ã€é…ç½®æŸå¤±å‡½æ•°å’Œä¼˜åŒ–å™¨ã€æ¨¡å‹ä¿å­˜ã€æ¨¡å‹è®­ç»ƒéªŒè¯ä¸æµ‹è¯•ç­‰æ–¹é¢è¿›è¡Œå®ç°ã€‚ AlexNetçš„è¯¦è§£AlexNetæ˜¯2012å¹´ISLVRC 2012 (lmageNet Large Scale Visual RecognitionChallengeï¼‰ç«èµ›çš„å† å†›ç½‘ç»œï¼Œåˆ†ç±»å‡†ç¡®ç‡ç”±ä¼ ç»Ÿçš„70%+æå‡åˆ°80%+ã€‚å®ƒæ˜¯ç”±Hintonå’Œä»–çš„å­¦ç”ŸAlex Krizhevskyè®¾è®¡çš„ã€‚ä¹Ÿæ˜¯åœ¨é‚£å¹´ä¹‹åï¼Œæ·±åº¦å­¦ä¹ å¼€å§‹è¿…é€Ÿå‘å±•ã€‚ AlexNetç½‘ç»œç®€ä»‹ISLVRC 2012è®­ç»ƒé›†:1,281,167å¼ å·²æ ‡æ³¨å›¾ç‰‡ï¼›éªŒè¯é›†:50,000å¼ å·²æ ‡æ³¨å›¾ç‰‡ï¼›æµ‹è¯•é›†:100,000å¼ æœªæ ‡æ³¨å›¾ç‰‡ã€‚ AlexNetçš„ç»“æ„å›¾ è¯¥ç½‘ç»œçš„äº®ç‚¹åœ¨äº: é¦–æ¬¡åˆ©ç”¨GPUè¿›è¡Œç½‘ç»œåŠ é€Ÿè®­ç»ƒã€‚ ä½¿ç”¨äº†ReLUæ¿€æ´»å‡½æ•°ï¼Œè€Œä¸æ˜¯ä¼ ç»Ÿçš„Sigmoidæ¿€æ´»å‡½æ•°ä»¥åŠTanhæ¿€æ´»å‡½æ•°ã€‚ å› ä¸ºSigmoidå‡½æ•°ä¼šå‡ºç°æ¢¯åº¦æ¶ˆå¤±ï¼Œæ¢¯åº¦çˆ†ç‚¸ã€‚ ä½¿ç”¨äº†LRNå±€éƒ¨å“åº”å½’ä¸€åŒ–ã€‚ åœ¨å…¨è¿æ¥å±‚çš„å‰ä¸¤å±‚ä¸­ä½¿ç”¨äº†Dropoutéšæœºå¤±æ´»ç¥ç»å…ƒæ“ä½œï¼Œä»¥å‡å°‘è¿‡æ‹Ÿåˆã€‚ è¿‡æ‹Ÿåˆï¼šæ ¹æœ¬åŸå› æ˜¯ç‰¹å¾ç»´åº¦è¿‡å¤šï¼Œæ¨¡å‹å‡è®¾è¿‡äºå¤æ‚ï¼Œå‚æ•°è¿‡å¤šï¼Œè®­ç»ƒæ•°æ®è¿‡å°‘ï¼Œå™ªå£°è¿‡å¤šï¼Œå¯¼è‡´æ‹Ÿåˆçš„å‡½æ•°å®Œç¾çš„é¢„æµ‹è®­ç»ƒé›†ï¼Œä½†å¯¹æ–°æ•°æ®çš„æµ‹è¯•é›†é¢„æµ‹ç»“æœå·®ã€‚è¿‡åº¦çš„æ‹Ÿåˆäº†è®­ç»ƒæ•°æ®ï¼Œè€Œæ²¡æœ‰è€ƒè™‘åˆ°æ³›åŒ–èƒ½åŠ›ã€‚ ä½¿ç”¨Dropoutçš„æ–¹å¼åœ¨ç½‘ç»œæ­£å‘ä¼ æ’­è¿‡ç¨‹ä¸­éšæœºå¤±æ´»ä¸€éƒ¨åˆ†ç¥ç»å…ƒã€‚ å›é¡¾ï¼šç»è¿‡å·ç§¯åçš„çŸ©é˜µå°ºå¯¸å¤§å°è®¡ç®—å…¬å¼ä¸ºï¼š å…¶ä¸­è¾“å…¥å›¾ç‰‡çš„å¤§å°ä¸º$W\\times W$ï¼› Filterçš„å¤§å°ä¸º$F\\times F$ï¼Œå³kernel_sizeä¸ºFï¼› æ­¥é•¿Stirde=S paddingçš„åƒç´ æ•°ä¸ºP N=\\dfrac{(W-F+2P)}{S}+1ç½‘ç»œåˆ†å±‚è®¡ç®— ç¬¬ä¸€å±‚ï¼ˆConv1ï¼‰ï¼š è¿™é‡Œæ˜¯è¿ç”¨äº†GPUçš„å¹¶è¡Œè®¡ç®—çš„åŠŸèƒ½ï¼Œå°†96å±‚åˆ†æˆäº†ä¸¤éƒ¨åˆ†è¿›è¡Œè®¡ç®—ã€‚ é€šé“æ•°ï¼šinput_channels = 3ï¼›output_channels = 48$\\times$2=96 å·ç§¯æ ¸å‚æ•°ï¼škernel_size = 11; stride = 4; padding = [1,2] è¾“å…¥è¾“å‡ºçš„å°ºå¯¸æ•°ï¼šinput_size=[224,224,3]; output_size=[55,55,96] N=\\dfrac{(W-F+2P)}{S}+1=\\dfrac{(224-11+(1+2))}{4}+1=55 ç¬¬äºŒå±‚ï¼ˆMaxpool1ï¼‰ï¼šåªæ˜¯æ”¹å˜é«˜åº¦å®½åº¦ï¼Œä¸æ”¹å˜æ·±åº¦ã€‚ é€šé“æ•°ï¼šinput_channels = 96ï¼›output_channels = 48$\\times$2=96 å·ç§¯æ ¸å‚æ•°ï¼škernel_size = 3; stride = 2; padding = 0 è¾“å…¥è¾“å‡ºçš„å°ºå¯¸æ•°ï¼šinput_size=[55,55,96]; output_size=[27,27,96] N=\\dfrac{(W-F+2P)}{S}+1=\\dfrac{(55-3+0)}{2}+1=27 ç¬¬ä¸‰å±‚ï¼ˆConv2ï¼‰ï¼š é€šé“æ•°ï¼šinput_channels = 96ï¼›output_channels = 128$\\times$2=256 å·ç§¯æ ¸å‚æ•°ï¼škernel_size = 5; stride = 1; padding = 2 è¾“å…¥è¾“å‡ºçš„å°ºå¯¸æ•°ï¼šinput_size=[27,27,96]; output_size=[27,27,256] N=\\dfrac{(W-F+2P)}{S}+1=\\dfrac{(27-5+4)}{1}+1=27 ç¬¬å››å±‚ï¼ˆMaxpool2ï¼‰ï¼š é€šé“æ•°ï¼šinput_channels = 256ï¼›output_channels = 128$\\times$2=256 å·ç§¯æ ¸å‚æ•°ï¼škernel_size = 3; stride = 2; padding = 0 è¾“å…¥è¾“å‡ºçš„å°ºå¯¸æ•°ï¼šinput_size=[27,27,256]; output_size=[13,13,256] N=\\dfrac{(W-F+2P)}{S}+1=\\dfrac{(27-3+0)}{2}+1=13 ç¬¬äº”å±‚ï¼ˆConv3ï¼‰ï¼š é€šé“æ•°ï¼šinput_channels = 256ï¼›output_channels = 192$\\times$2=384 å·ç§¯æ ¸å‚æ•°ï¼škernel_size = 3; stride = 1; padding = 1 è¾“å…¥è¾“å‡ºçš„å°ºå¯¸æ•°ï¼šinput_size=[13,13,256]; output_size=[13,13,384] N=\\dfrac{(W-F+2P)}{S}+1=\\dfrac{(13-3+2)}{1}+1=13 ç¬¬å…­å±‚ï¼ˆConv4ï¼‰ï¼š é€šé“æ•°ï¼šinput_channels = 384ï¼›output_channels = 192$\\times$2=384 å·ç§¯æ ¸å‚æ•°ï¼škernel_size = 3; stride = 1; padding = 1 è¾“å…¥è¾“å‡ºçš„å°ºå¯¸æ•°ï¼šinput_size=[13,13,256]; output_size=[13,13,384] N=\\dfrac{(W-F+2P)}{S}+1=\\dfrac{(13-3+2)}{1}+1=13 ç¬¬ä¸ƒå±‚ï¼ˆConv5ï¼‰ï¼š é€šé“æ•°ï¼šinput_channels = 384ï¼›output_channels = 128$\\times$2=256 å·ç§¯æ ¸å‚æ•°ï¼škernel_size = 3; stride = 1; padding = 1 è¾“å…¥è¾“å‡ºçš„å°ºå¯¸æ•°ï¼šinput_size=[13,13,384]; output_size=[13,13,256] N=\\dfrac{(W-F+2P)}{S}+1=\\dfrac{(13-3+2)}{1}+1=13 ç¬¬å…«å±‚ï¼ˆConv6ï¼‰ï¼š é€šé“æ•°ï¼šinput_channels = 256ï¼›output_channels = 128$\\times$2=256 å·ç§¯æ ¸å‚æ•°ï¼škernel_size = 3; stride = 2; padding = 0 è¾“å…¥è¾“å‡ºçš„å°ºå¯¸æ•°ï¼šinput_size=[13,13,256]; output_size=[6,6,256] N=\\dfrac{(W-F+2P)}{S}+1=\\dfrac{(13-3+0)}{2}+1=6 åä¸‰å±‚æ¥äº†ä¸‰ä¸ªå…¨è¿æ¥å±‚ï¼Œæ³¨æ„æœ€åæ•°æ®é›†æœ‰1000ç±»ï¼Œå› æ­¤æœ€åä¸€ä¸ªå…¨è¿æ¥å±‚æœ‰1000ä¸ªèŠ‚ç‚¹ï¼Œå¦‚æœæˆ‘ä»¬çš„æ•°æ®é›†æœ‰10ç±»ï¼Œæœ€åçš„å…¨è¿æ¥å±‚å°±10ä¸ªèŠ‚ç‚¹ã€‚ layer_name kernel_size output_channels padding stride Conv1 11 96 [1,2] 4 Maxpool1 3 None 0 2 Conv2 5 256 [2,2] 1 Maxpool2 3 None 0 2 Conv3 3 384 [1,1] 1 Conv4 3 384 [1,1] 1 Conv5 3 256 [1,1] 1 Maxpool3 3 None 0 2 FC1 2048 None None None FC2 2048 None None None FC3 1000 None None None æ•°æ®é›†(flowers) ï¼ˆ1ï¼‰åœ¨data_setæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºæ–°æ–‡ä»¶å¤¹â€flower_dataâ€ ï¼ˆ2ï¼‰ç‚¹å‡»é“¾æ¥ä¸‹è½½èŠ±åˆ†ç±»æ•°æ®é›† ï¼ˆ3ï¼‰è§£å‹æ•°æ®é›†åˆ°flower_dataæ–‡ä»¶å¤¹ä¸‹ ï¼ˆ4ï¼‰æ‰§è¡Œâ€split_data.pyâ€è„šæœ¬è‡ªåŠ¨å°†æ•°æ®é›†åˆ’åˆ†æˆè®­ç»ƒé›†trainå’ŒéªŒè¯é›†val 1234â”œâ”€â”€ flower_data â”œâ”€â”€ flower_photosï¼ˆè§£å‹çš„æ•°æ®é›†æ–‡ä»¶å¤¹ï¼Œ3670ä¸ªæ ·æœ¬ï¼‰ â”œâ”€â”€ trainï¼ˆç”Ÿæˆçš„è®­ç»ƒé›†ï¼Œ3306ä¸ªæ ·æœ¬ï¼‰ â””â”€â”€ valï¼ˆç”Ÿæˆçš„éªŒè¯é›†ï¼Œ364ä¸ªæ ·æœ¬ï¼‰ AlexNetç½‘ç»œçš„pytorchå®ç°æ¨¡å‹çš„æ­å»º å¯¹äºç½‘ç»œå±‚æ¯”è¾ƒå¤šçš„ç»“æ„æ¥è¯´ï¼Œä¸€èˆ¬ç”¨åœ¨ç½‘ç»œæ¯”è¾ƒå¤šçš„æ—¶å€™ï¼Œä¸”ç½‘ç»œç»“æ„æ¯”è¾ƒç®€å•ï¼Œæ²¡æœ‰è·³è·ƒè¿æ¥ç­‰å¤æ‚çš„ç»“æ„ã€‚ padding=tuple/intï¼šå¦‚æœtuple(1,2),ä»£è¡¨ä¸Šä¸‹æ–¹å„è¡¥ä¸€è¡Œ0ï¼Œå·¦å³è¡¥ä¸¤åˆ—0ã€‚ä½†æ˜¯ï¼Œå¦‚æœå‡ºç°ä¸Šè¿°çš„è®¡ç®—å‡ºæ¥çš„ä¸‹ä¸€å±‚çš„[H,W]ä¸ä¸º0æ—¶ï¼Œè‡ªåŠ¨èˆå¼ƒä¸€è¡Œæˆ–ä¸€åˆ—é›¶æ¥æ»¡è¶³æœ€åç»“æœä¸ºæ•´æ•°ã€‚ 1nn.Conv2d(3, 48, kernel_size=11, stride=4, padding=2) å¦‚æœè¦å·¦ä¾§è¡¥ä¸€åˆ—ï¼Œå³ä¾§è¡¥ä¸¤åˆ—ï¼Œä¸Šä¾§è¡¥ä¸€è¡Œï¼Œå³ä¾§è¡¥ä¸¤è¡Œã€‚è¦ä½¿ç”¨nn.ZeroPad((1ï¼Œ2ï¼Œ1ï¼Œ2)) nn.ReLU(inplace=True): å‡å°ä½¿ç”¨å†…å­˜ï¼Œæé«˜æ€§èƒ½çš„å‚æ•°ã€‚ self.modules()ï¼šè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œéå†ç½‘ç»œä¸­æ‰€æœ‰çš„æ¨¡å—ï¼› å…³äºåˆå§‹åŒ–ï¼Œç›®å‰ç‰ˆæœ¬çš„pytorchå…¶å®æ˜¯å¯ä»¥è‡ªåŠ¨è¿›è¡Œåˆå§‹åŒ–çš„ã€‚åˆå§‹åŒ–æ—¶ï¼Œå¯¹äºå·ç§¯å±‚ä½¿ç”¨æºæ˜åˆå§‹åŒ–ï¼Œå¯¹äºä¸€èˆ¬çš„å…¨è¿æ¥å±‚ä½¿ç”¨æ­£æ€åˆ†å¸ƒåˆå§‹åŒ–ï¼Œåå·®å…¨éƒ¨åˆå§‹åŒ–ä¸º0ã€‚ 1234567891011121314def _initialize_weights(self): for m in self.modules(): # module()è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ éå†ä¸€ä¸ªç±»ä¸­æ‰€æœ‰çš„æ¨¡å—ç±» if isinstance(m, nn.Conv2d): # å‚æ•°1ä¸ºå¯¹è±¡(è¿­ä»£å™¨) å‚æ•°2ä¸ºè¦ä½œæ¯”è¾ƒçš„å¯¹è±¡ # å¦‚æœå‚æ•°1å¯¹åº”çš„å¯¹è±¡å’Œå‚æ•°2å¯¹åº”çš„ç±»ç›¸åŒï¼Œè¿”å›True nn.init.kaiming_normal_(m.weight, mode='fan_out') # å¯¹äºå·ç§¯çš„å‚æ•°ä½¿ç”¨æºæ˜åˆå§‹åŒ– if m.bias is not None: nn.init.constant_(m.bias, 0) elif isinstance(m, nn.Linear): # å¯¹äºå…¨è¿æ¥å±‚ï¼Œä½¿ç”¨çš„æ­£æ€åˆ†å¸ƒåˆå§‹åŒ–æƒé‡ nn.init.normal_(m.weight, mean=0, std=0.01) nn.init.constant_(m.bias, 0) å¯¹äºå±•å¼€æˆä¸ºå…¨è¿æ¥å±‚æ¥è¯´ï¼Œä¿è¯ç¬¬0ä½batchä¸å˜, start_dim=1$[batch\\ , channel\\ , weight\\ , height] \\rightarrow [batch\\ , num]$ 1x = torch.flatten(x, start_dim=1) # ä¹Ÿå¯ä»¥ç”¨view å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960class AlexNet(nn.Module): def __init__(self, num_classes=1000, init_weight=False): super(AlexNet, self).__init__() # å·ç§¯å±‚åˆé›† self.feature = nn.Sequential( # input [3,224,224] nn.Conv2d(3, 48, kernel_size=11, stride=4, padding=2), # output [48,55,55] # å¦‚æœå‡ºç°ä¸Šè¿°çš„è®¡ç®—å‡ºæ¥çš„ä¸‹ä¸€å±‚çš„[H,W]ä¸ä¸º0æ—¶ï¼Œ # è‡ªåŠ¨èˆå¼ƒä¸€è¡Œé›¶æ¥æ»¡è¶³æœ€åç»“æœä¸ºæ•´æ•° # æˆ–è€…ä½¿ç”¨nn.ZeroPad((1ï¼Œ2ï¼Œ1ï¼Œ2)) nn.ReLU(inplace=True), nn.MaxPool2d(kernel_size=3, stride=2), # output [48,27,27] nn.Conv2d(48, 128, kernel_size=5, padding=2), # output [128,27,27] nn.ReLU(inplace=True), nn.MaxPool2d(kernel_size=3, stride=2), # output [128,13,13] nn.Conv2d(128, 192, kernel_size=3, padding=1), # output [192,13,13] nn.ReLU(inplace=True), nn.Conv2d(192, 192, kernel_size=3, padding=1), # output [192,13,13] nn.ReLU(inplace=True), nn.Conv2d(192, 128, kernel_size=3, padding=1), # output [128,13,13] nn.ReLU(inplace=True), nn.MaxPool2d(kernel_size=3, stride=2), # output [128,6,6] ) # å…¨è¿æ¥å±‚åˆé›† self.classifier = nn.Sequential( nn.Dropout(p=0.5), nn.Linear(128*6*6, 2048), nn.ReLU(inplace=True), nn.Dropout(p=0.5), nn.Linear(2048, 2048), nn.ReLU(inplace=True), nn.Linear(2048, num_classes), ) if init_weight: self._initialize_weights() # ä¸€èˆ¬æƒ…å†µä¸‹æ—¶è‡ªåŠ¨è¿›è¡Œåˆå§‹åŒ–çš„ def _initialize_weights(self): for m in self.modules(): # module()è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ éå†ä¸€ä¸ªç±»ä¸­æ‰€æœ‰çš„æ¨¡å—ç±» if isinstance(m, nn.Conv2d): # å‚æ•°1ä¸ºå¯¹è±¡(è¿­ä»£å™¨) å‚æ•°2ä¸ºè¦ä½œæ¯”è¾ƒçš„å¯¹è±¡ # å¦‚æœå‚æ•°1å¯¹åº”çš„å¯¹è±¡å’Œå‚æ•°2å¯¹åº”çš„ç±»ç›¸åŒï¼Œè¿”å›True nn.init.kaiming_normal_(m.weight, mode='fan_out') # å¯¹äºå·ç§¯çš„å‚æ•°ä½¿ç”¨æºæ˜åˆå§‹åŒ– if m.bias is not None: nn.init.constant_(m.bias, 0) elif isinstance(m, nn.Linear): # å¯¹äºå…¨è¿æ¥å±‚ï¼Œä½¿ç”¨çš„æ­£æ€åˆ†å¸ƒåˆå§‹åŒ–æƒé‡ nn.init.normal_(m.weight, mean=0, std=0.01) nn.init.constant_(m.bias, 0) def forward(self, x): x = self.feature(x) x = torch.flatten(x, start_dim=1) # [batch channel weight height] start_dim=1 # å°±æ˜¯ä¿è¯ç¬¬0ä½batchä¸å˜-&gt;[batch num] # ä¹Ÿå¯ä»¥ç”¨view x = self.classifier(x) return x è®¾ç½®GPUè®¾å¤‡1device = torch.device(&quot;cuda:0&quot; if torch.cuda.is_available() else &quot;cpu&quot;) æ•°æ®é¢„å¤„ç†12345678910111213data_transform = { &quot;train&quot;: transforms.Compose([ transforms.RandomResizedCrop(224), # éšæœºæˆªå–å¤§å°ä¸º224çš„å›¾ç‰‡ transforms.RandomHorizontalFlip(), # éšæœºç¿»è½¬ transforms.ToTensor(), transforms.Normalize((0.5, 0.5, 0.5), (0.5, 0.5, 0.5)) ]), &quot;val&quot;: transforms.Compose([ transforms.Resize((224, 224)), transforms.ToTensor(), transforms.Normalize((0.5, 0.5, 0.5), (0.5, 0.5, 0.5)) ])} è¿™é‡Œæˆ‘ä»¬å°†é¢„å¤„ç†éƒ¨åˆ†åˆ†æˆâ€œtrainâ€å’Œâ€valâ€ä¸¤éƒ¨åˆ†ï¼Œå°†å…¶å°è£…ç§°ä¸ºä¸€ä¸ªå­—å…¸ã€‚ transforms.RandomResizedCrop(224)ï¼šéšæœºæˆªå–ä¸€å®šå¤§å°çš„å›¾ç‰‡ã€‚ transforms.RandomHorizontalFlip()ï¼šå¯¹å›¾ç‰‡æ•°æ®è¿›è¡Œéšæœºåè½¬ã€‚ transforms.ToTensor()ï¼šå°†æ•°æ®è½¬åŒ–ä¸ºTensorï¼Œç»´åº¦æŒ‰ç…§torchè¦æ±‚çš„æ’åˆ—$[batch\\ , channel\\ , weight\\ , height]$ã€‚ transforms.Normalize(mean=(0.5, 0.5, 0.5), std=(0.5, 0.5, 0.5))ï¼šå°†å›¾ç‰‡æ•°æ®æ ‡å‡†åŒ–ã€‚ åŠ è½½æ•°æ®1234567891011# è·å¾—ç»å¯¹è·¯å¾„data_root = os.path.abspath(os.path.join(os.getcwd(), &quot;../..&quot;))# os.getcwd()è·å¾—å½“å‰ä½ç½®çš„ç›®å½•# ./.ä»£è¡¨è¿”å›ä¸Šä¸€å±‚ç›®å½• ../..ä»£è¡¨è¿”å›ä¸Šä¸¤å±‚ç›®å½•# è·å¾—èŠ±çš„æ•°æ®data_root = os.path.abspath(os.getcwd())image_path = data_root + &quot;/data_set/flower_data/&quot;train_dataset = datasets.ImageFolder(root=image_path + &quot;/train&quot;, transform=data_transform[&quot;train&quot;])# æ±‚æ•°æ®å³å¾—æ•°æ®ä¸ªæ•°train_num = len(train_dataset) os.getcwd()ï¼šè·å¾—å½“å‰ä½ç½®çš„ç›®å½•ã€‚ ./.ä»£è¡¨è¿”å›ä¸Šä¸€å±‚ç›®å½•ï¼› ../..ä»£è¡¨è¿”å›ä¸Šä¸¤å±‚ç›®å½• os.path.join(os.getcwd(), â€œ../..â€)ï¼šä»£è¡¨è¿”å›ä¸Šä¸¤å±‚ç›®å½•ï¼Œå…¶ä¸­join()çš„ä½œç”¨å°±æ˜¯å°†å†…éƒ¨è·¯å¾„è¿›è¡Œåˆå¹¶ï¼Œä¹Ÿå¯ä»¥è¿›å…¥å½“å‰ç›®å½•çš„ä¸‹çš„æŸä¸ªæ–‡ä»¶ï¼Œjoin(os.getcwd(), â€œ/xxx/xxxâ€) ImageFolderï¼šç”¨æ¥ä»¥ä¸€å®šæ–¹å¼æ•´ç†å›¾ç‰‡çš„ç±»ã€‚ 123456789# flower_listå¾—åˆ°å­—å…¸ï¼Œä½†æ˜¯å¾—å‡ºçš„ç»“æœæ˜¯åçš„flower_list = train_dataset.class_to_idx# æ˜¯çš„å­—å…¸çš„valå’Œkeyäº¤æ¢ä¸ºä½ç½®çš„ä¸€ç§æ–¹æ³•cla_dict = dict((val, key) for key, val in flower_list.items())# å°†å­—å…¸å†™å…¥åˆ°Jsonæ–‡ä»¶ä¸­json_str = json.dumps(cla_dict, indent=4)with open('class_indices.json', 'w') as json_file: json_file.write(json_str) train_dataset.class_to_idxï¼šå¾—åˆ°ç±»åˆ«å’Œç´¢å¼•å€¼çš„å­—å…¸ï¼Œæ­¤å¤„é¢„æµ‹å¾—åˆ°çš„æ˜¯ç´¢å¼•å€¼ï¼Œæƒ³è¦å¾—åˆ°èŠ±çš„åå­—å°±éœ€è¦å°†keyï¼ˆåç§°ï¼‰å’Œvalueï¼ˆç´¢å¼•å€¼ï¼‰äº¤æ¢ä½ç½®ã€‚ json.dumps(cla_dict, indent=4)ï¼šå°†å­—å…¸å€¼å†™å…¥åˆ°jsonæ–‡ä»¶ä¸­ã€‚ 1234567{ &quot;0&quot;: &quot;daisy&quot;, &quot;1&quot;: &quot;dandelion&quot;, &quot;2&quot;: &quot;roses&quot;, &quot;3&quot;: &quot;sunflowers&quot;, &quot;4&quot;: &quot;tulips&quot;} æ•°æ®çš„å¯¼å…¥å’ŒåŠ è½½123456789101112batch_size = 32train_loader = torch.utils.data.DataLoader(train_dataset, batch_size=batch_size, shuffle=True, num_workers=0)val_dataset = datasets.ImageFolder(root=image_path + &quot;val&quot;, transform=data_transform[&quot;val&quot;])val_num = len(val_dataset)val_loader = torch.utils.data.DataLoader(val_dataset, batch_size=batch_size, shuffle=False, num_workers=0) è¿™è¾¹å’Œä¸Šä¸€ç« ç›¸åŒï¼Œæ­¤å¤„ä¸åœ¨èµ˜è¿°ã€‚ æŸå¤±å‡½æ•°çš„è®¡ç®—ä¸ä¼˜åŒ–å™¨é…ç½®12345678net = AlexNet(num_classes=5, init_weight=True)net.to(device) # å¯åŠ¨GPUloss_function = torch.nn.CrossEntropyLoss()optimizer = optim.Adam(net.parameters(), lr=0.0002)save_path = '.AlexNet.pth'best_acc = 0.0 # è®¾ç½®ä¿å­˜æœ€é«˜å‡†ç¡®ç‡æ‰€å¯¹åº”çš„å‚æ•° æ¨¡å‹çš„è®­ç»ƒä¸éªŒè¯ net.train(),net.eval()ï¼šä¸»è¦çš„ä½œç”¨æ˜¯ç”¨æ¥ç®¡ç†Dropoutå±‚å’ŒBNå±‚ï¼Œåœ¨è®­ç»ƒçš„è¿‡ç¨‹å¯ç”¨ä¸Šè¿°å±‚ï¼Œä½†æ˜¯åœ¨é¢„æµ‹çš„æ—¶å€™è¿˜æ˜¯æ­£å¸¸è®¡ç®—ï¼Œä¸è¿›è¡Œéšæœºå¤±æ´»å’ŒBNæ“ä½œã€‚ è®­ç»ƒè¿‡ç¨‹ t1 = time.perf_counter()ï¼šç”¨æ¥è®°å½•è®­ç»ƒçš„æ—¶é—´ã€‚ ç”¨æ¥æ‰“å°è¿›åº¦æ¡çš„ç¨‹åºã€‚å…¶ä¸­ï¼Œend=â€™â€™ç©ºå­—ç¬¦ã€‚ 123456# æ‰“å°è®­ç»ƒçš„è¿‡ç¨‹è¿›åº¦æ¡ rate = (step + 1) / len(train_loader) a = &quot;*&quot; * int(rate * 50) b = &quot;.&quot; * int((1-rate) * 50) print(&quot;\\rtrain loss: {:^3.0f}%[{}-&gt;{}]{:.3f}&quot;.format(int(rate*100), a, b, loss), end='') # è¿™é‡Œend=''ç›¸å½“äºæ˜¯ä¸€ä¸ªæ¢è¡Œç¬¦ ä»¥ä¸‹æ˜¯è®­ç»ƒè¿‡ç¨‹çš„ä»£ç å®ç°ã€‚ 123456789101112131415161718192021222324for epoch in range(15): net.train() # ä¸»è¦é’ˆå¯¹çš„Dropoutæ–¹æ³• running_loss = 0.0 t1 = time.perf_counter() for step, data in enumerate(train_loader, start=0): images, labels = data images, labels = images.to(device), labels.to(device) # å°†æ¢¯åº¦åˆå§‹åŒ–ä¸º0 optimizer.zero_grad() outputs = net(images) loss = loss_function(outputs, labels) loss.backward() optimizer.step() running_loss += loss.item() # æ‰“å°è®­ç»ƒçš„è¿‡ç¨‹è¿›åº¦æ¡ rate = (step + 1) / len(train_loader) a = &quot;*&quot; * int(rate * 50) b = &quot;.&quot; * int((1-rate) * 50) print(&quot;\\rtrain loss: {:^3.0f}%[{}-&gt;{}]{:.3f}&quot;.format(int(rate*100), a, b, loss), end='') # è¿™é‡Œend=''ç›¸å½“äºæ˜¯ä¸€ä¸ªæ¢è¡Œç¬¦ print() print(time.perf_counter()-t1) éªŒè¯è¿‡ç¨‹1234567891011121314151617# ç›´æ¥æ¥åœ¨ä¸Šä¸€ä¸ªforå¾ªç¯ä¸­net.eval()acc = 0.0with torch.no_grad(): for data_test in val_loader: test_images, test_labels = data_test test_images, test_labels = test_images.to(device), test_labels.to(device) outputs = net(test_images) predict_y = torch.max(outputs, dim=1)[1] print(predict_y == test_labels) acc += (predict_y == test_labels).sum().item() accurate_test = acc / val_num # åªä¿å­˜æœ€å¥½çš„ç»“æœ if accurate_test &gt; best_acc: best_acc = accurate_test torch.save(net.state_dict(), save_path) print('[epoch %d] train_loss: %.3f test_accuracy: %3f' % (epoch + 1, running_loss/step, acc / val_num)) æ¨¡å‹æµ‹è¯•å¯¼å…¥æ•°æ®1234567891011121314151617181920data_transform = transforms.Compose([ transforms.Resize((224, 224)), transforms.ToTensor(), transforms.Normalize((0.5, 0.5, 0.5), (0.5, 0.5, 0.5))])# load imageimg = Image.open(&quot;4.jpg&quot;)plt.imshow(img)# [N C H w]img = data_transform(img)# å¢åŠ ä¸€ä¸ªç»´åº¦img = torch.unsqueeze(img, dim=0)# è¯»å–å­—å…¸try: json_file = open('./class_indices.json', 'r') class_indict = json.load(json_file)except Exception as e: print(e) exit(-1) å¯¼å…¥æ¨¡å‹12345678910111213141516# å»ºç«‹æ¨¡å‹model = AlexNet(num_classes=5)# load æƒé‡model_weigh_path = &quot;.AlexNet.pth&quot;model.load_state_dict(torch.load(model_weigh_path))model.eval()with torch.no_grad(): # predict class output = torch.squeeze(model(img)) # é™ä½ç»´åº¦ï¼Œå°†batchä¸€ç»´å»æ‰ predict = torch.softmax(output, dim=0) predict_cla = torch.argmax(predict).numpy()print(class_indict[str(predict_cla)], predict[predict_cla].item())plt.show()","link":"/2022/01/28/%E5%9B%BE%E5%83%8F%E5%88%86%E7%B1%BB%E7%BD%91%E7%BB%9C%E5%8F%8APytorch%E5%AE%9E%E7%8E%B0/AlexNet%E7%BD%91%E7%BB%9C%E8%AF%A6%E8%A7%A3%E4%B8%8EPytorch%E5%AE%9E%E7%8E%B0/"},{"title":"GoogLeNetç½‘ç»œè¯¦è§£ä¸Pytorchå®ç°","text":"hljs.initHighlightingOnLoad(); GoogLeNetè¯¦è§£ç®€ä»‹GoogLeNetåœ¨2014å¹´ç”±Googleå›¢é˜Ÿæå‡ºï¼Œæ–©è·å½“å¹´ImageNetç«èµ›ä¸­Classification Task (åˆ†ç±»ä»»åŠ¡)ç¬¬ä¸€åï¼Œæœ¬æ–‡ä¸»è¦ä»æ¨¡å‹çš„æ­å»ºä»¥åŠpytorchå®ç°ä¸Šè¿›è¡Œä»‹ç»ã€‚ ç½‘ç»œä¸­çš„äº®ç‚¹ï¼š å¼•å…¥äº†Inceptionç»“æ„ï¼ˆèåˆä¸åŒå°ºåº¦çš„ç‰¹å¾ä¿¡æ¯) ä½¿ç”¨1x1çš„å·ç§¯æ ¸è¿›è¡Œé™ç»´ä»¥åŠæ˜ å°„å¤„ç† æ·»åŠ ä¸¤ä¸ªè¾…åŠ©åˆ†ç±»å™¨å¸®åŠ©è®­ç»ƒ AlexNetå’ŒVGGéƒ½åªæœ‰ä¸€ä¸ªè¾“å‡ºå±‚ï¼ŒGoogLeNetæœ‰ä¸‰ä¸ªè¾“å‡ºå±‚(å…¶ä¸­ä¸¤ä¸ªè¾…åŠ©åˆ†ç±»å±‚) ä¸¢å¼ƒå…¨è¿æ¥å±‚ï¼Œä½¿ç”¨å¹³å‡æ± åŒ–å±‚ï¼ˆå¤§å¤§å‡å°‘æ¨¡å‹å‚æ•°) Inceptionç»“æ„ å¦‚å›¾ä¸ºåŸå§‹çš„ä¸€ç§Inceptionç»“æ„ï¼› ä¸»è¦çš„åŒºåˆ«æ˜¯ä¹‹å‰çš„VGGä¸»è¦é‡‡å–ä¸²è”çš„ç»“æ„ï¼Œå¢åŠ æ¨¡å‹çš„æ·±åº¦ï¼Œ Inceptionä¸»è¦é‡‡å–å¹¶è¡Œçš„ç»“æ„ï¼Œå¢åŠ çš„æ˜¯æ¨¡å‹çš„å®½åº¦ã€‚ æ³¨æ„ï¼šæ¯ä¸ªåˆ†æ”¯æ‰€å¾—çš„ç‰¹å¾çŸ©é˜µçš„é«˜å’Œå®½å¿…é¡»æ˜¯ç›¸åŒçš„ã€‚ å¦‚å›¾ä¸ºæ”¹è¿›ä¹‹åçš„ç½‘ç»œå›¾ï¼Œè¿™é‡Œ1$\\times$1çš„å·ç§¯æ ¸çš„ä¸»è¦ä½œç”¨æ˜¯ç”¨æ¥é™ç»´çš„ã€‚ è¿™é‡Œé™ç»´å°±æ˜¯å°†æ·±åº¦é™ä½ï¼Œå³channelsæ•°ï¼Œé€šè¿‡å‡å°‘æ·±åº¦ï¼Œè¿›è€Œå‡å°‘å‚æ•°é‡ï¼Œå‡å°‘è®¡ç®—é‡ã€‚ è¾…åŠ©åˆ†ç±»å™¨(Auxiliary Classifier)The exact structure of the extra network on the side, including the auxiliary classifier, is as follows: An average pooling layer with 5x5 filter size and stride 3, resulting in an 4x4Ã—512 outputfor the (4a), and 4Ã—4Ã—528 for the (4d) stage. $input_{size}=14,\\ output_{size}=\\dfrac{14-5+0}{3}+1=4$ A 1Ã—1 convolution with 128 filters for dimension reduction and rectified linear activation.Â· A fully connected layerï¼ˆå…¨è¿æ¥å±‚ï¼‰ with 1024 units and rectified linear activationï¼ˆRELU). A dropout layer with 70% ratio of dropped outputs. A linear layer with softmax loss as the classifier (predicting the same 1000 classes as themain classifier, but removed at inference time). åœ¨3$\\times$3å·ç§¯ä¹‹å‰è¦è¿›è¡Œä¸€ä¸ª1$\\times$1å·ç§¯çš„é™ç»´å¤„ç†ã€‚ ä¸Šå›¾ä¸ºä¸‹é¢è¡¨æ ¼ä¸­å¯¹äºçš„ç»“æ„åœ¨ç½‘ç»œä¸­çš„ä½ç½®ã€‚ å¦‚å›¾ï¼Œåœ¨å®é™…çš„æ“ä½œè¿‡ç¨‹ä¸­ï¼ŒLocalRespNorm(LPN)å±‚çš„ä½œç”¨ä¸å¤§ï¼Œå› æ­¤å¯ä»¥å»æ‰ã€‚ å¦‚å›¾ç›¸æ¯”ä¹‹ä¸‹å‘ç°ï¼ŒVGGçš„å‚æ•°å‚æ•°è¿‡å¤šï¼Œæ˜¯GoogLeNetçš„20å€ã€‚ ä½†VGGçš„æ¨¡å‹æ­å»ºç®€å•ï¼Œå¹¶ä¸”GoogLeNetè¾…åŠ©åˆ†ç±»å™¨çš„ä½¿ç”¨å’Œä¿®æ”¹æ¯”è¾ƒéº»çƒ¦ï¼Œä¸å®¹æ˜“è°ƒè¯•ï¼Œå› æ­¤ä¸€èˆ¬æ¥è¯´VGGçš„ä½¿ç”¨è¾ƒå¤šã€‚ GoogLeNetçš„pytorchå®ç°æ¨¡å‹æ­å»ºå› ä¸ºGoogLeNetçš„ä¸€äº›ç»“æ„å—çš„ä»£ç å¤ç”¨æ¯”è¾ƒå¤šï¼Œå› æ­¤è¿™é‡Œé¦–å…ˆåˆ›å»ºå‡ ä¸ªæ¨¡æ¿æ–‡ä»¶ï¼Œä»¥æ–¹ä¾¿ä¹‹åæ¨¡å‹çš„æ­å»ºã€‚ åŸºæœ¬å·ç§¯å—12345678910class BasicCon2vd(nn.Module): def __init__(self, in_channels, out_channels, **kwargs): super(BasicCon2vd, self).__init__() self.conv = nn.Conv2d(in_channels=in_channels, out_channels=out_channels, **kwargs) self.relu = nn.ReLU(inplace=True) def forward(self, x): x = self.conv(x) x = self.relu(x) return x ç”±äºå·ç§¯å±‚éƒ½æ˜¯ä¼´éšç€ReLUæ¿€æ´»å‡½æ•°æ¥ä½¿ç”¨çš„ï¼Œå› æ­¤é¦–å…ˆå»ºç«‹å°†äºŒè€…åˆå¹¶çš„æ¨¡æ¿ã€‚ é€šè¿‡ä½¿ç”¨æ¨¡æ¿æ­å»ºçš„æ–¹å¼ï¼Œä½¿å¾—ç½‘ç»œå¾—ç»“æ„ä¸€ç›®äº†ç„¶ï¼Œå¾ˆæ¸…æ™°ã€‚ Inceptionæ¨¡æ¿çš„æ­å»º 1234567891011121314151617181920212223242526272829class Inception(nn.Module): def __init__(self, in_channels, ch1x1, ch3x3red, ch3x3, ch5x5red, ch5x5, pool_proj): super(Inception, self).__init__() self.branch1 = BasicCon2vd(in_channels, ch1x1, kernel_size=1) self.branch2 = nn.Sequential( BasicCon2vd(in_channels, ch3x3red, kernel_size=1), BasicCon2vd(ch3x3red, ch3x3, kernel_size=3, padding=1) # å°†padding=1 ä½¿å¾—branchçš„è¾“å…¥å’Œè¾“å‡ºæ˜¯ç›¸åŒçš„ ) self.branch3 = nn.Sequential( BasicCon2vd(in_channels, ch5x5red, kernel_size=1), BasicCon2vd(ch5x5red, ch5x5, kernel_size=5, padding=2) # å°†padding=2 ä½¿å¾—branchçš„è¾“å…¥å’Œè¾“å‡ºæ˜¯ç›¸åŒçš„ ) self.branch4 = nn.Sequential( nn.MaxPool2d(kernel_size=3, stride=1, padding=1), BasicCon2vd(in_channels, pool_proj, kernel_size=5, padding=2) # å°†padding=2 ä½¿å¾—branchçš„è¾“å…¥å’Œè¾“å‡ºæ˜¯ç›¸åŒçš„ ) def forward(self, x): branch1 = self.branch1(x) branch2 = self.branch2(x) branch3 = self.branch3(x) branch4 = self.branch4(x) output = [branch1, branch2, branch3, branch4] return torch.cat(output, 1) # åœ¨ç»´åº¦1ä¸Šé¢è¿›è¡Œå åŠ å’Œæ•´åˆ, å³åœ¨channelä¸Šè¿›è¡Œæ‹¼æ¥ é€šè¿‡ä¸åŒçš„paddingå‚æ•°ï¼Œä¿è¯æ¯ä¸ªbranchçš„è¾“å…¥å’Œè¾“å‡ºæ€»æ˜¯ç›¸åŒçš„ã€‚ æœ€åï¼Œåœ¨ç»´åº¦dim=1ä¸Šé¢è¿›è¡Œå åŠ å’Œæ•´åˆ, å³åœ¨channelä¸Šè¿›è¡Œæ‹¼æ¥ã€‚ è¾…åŠ©åˆ†ç±»å™¨çš„æ­å»º123456789101112131415161718192021222324252627class InceptionAux(nn.Module): def __init__(self, in_channels, num_classes): super(InceptionAux, self).__init__() self.averagePool = nn.AvgPool2d(kernel_size=5, stride=3) self.conv = BasicConv2d(in_channels, 128, kernel_size=1) # output[batch, 128, 4, 4] self.fc1 = nn.Linear(2048, 1024) self.fc2 = nn.Linear(1024, num_classes) def forward(self, x): # aux1: N x 512 x 14 x 14, aux2: N x 528 x 14 x 14 x = self.averagePool(x) # aux1: N x 512 x 4 x 4, aux2: N x 528 x 4 x 4 x = self.conv(x) # N x 128 x 4 x 4 x = torch.flatten(x, 1) # [batch channel width height] 1 ä»£è¡¨åœ¨1çš„ç»´åº¦ä¸‹è¿›è¡Œå±•å¹³ x = F.dropout(x, 0.5, training=self.training) # self.training model.train()æ¨¡å¼ä¸‹ä¸ºtrue åœ¨model.eval()ä¸‹ä¸ºFalse # N x 2048 x = F.relu(self.fc1(x), inplace=True) x = F.dropout(x, 0.5, training=self.training) # N x 1024 x = self.fc2(x) # N x num_classes return x å¼€å§‹æ—¶ï¼Œåœ¨å¹³å‡æ± åŒ–ä¸‹é‡‡æ ·å’Œå·ç§¯ä¹‹å‰ï¼Œä¸€ä¸ªè¾…åŠ©åˆ†ç±»å™¨ä¸ç¬¬äºŒä¸ªè¾…åŠ©åˆ†ç±»å™¨çš„æ·±åº¦æ˜¯ä¸åŒçš„ã€‚ dropoutå±‚çš„éšæœºæ¦‚ç‡p=0.7ï¼Œä½†æ˜¯å®é™…çš„æ•ˆæœä¸ä¸€å®šå¥½ï¼Œå› æ­¤æˆ‘ä»¬å°†è°ƒæ•´ä¸ºp=0.5ã€‚ å½“æˆ‘ä»¬å®ä¾‹åŒ–ä¸ªæ¨¡å‹modelåï¼Œå¯ä»¥é€šè¿‡model.train()å’Œmodel.eval()æ¥æ§åˆ¶æ¨¡å‹çš„çŠ¶æ€ã€‚åœ¨model.train()æ¨¡å¼ä¸‹self.training=Trueï¼Œåœ¨model.eval()æ¨¡å¼ä¸‹self.training=False GoogLeNetæ­å»º123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101class GoogLeNet(nn.Module): def __init__(self, num_classes=1000, aux_logits=True, init_weight = False): super(GoogLeNet, self).__init__() self.aux_logits = aux_logits self.conv1 = BasicCon2vd(3, 64, kernel_size=7, stride=7, padding=3) # è®¡ç®—é»˜è®¤ä¸ºä¸‹å–æ•´ è¯¥å±‚çš„ä½œç”¨æ˜¯å°†H,Wç¼©å°ä¸ºåŸæ¥çš„ä¸€åŠ self.maxpool1 = nn.MaxPool2d(3, stride=2, ceil_mode=True) # ceil_mode=Trueæ—¶ å–æ•´æ–¹å¼å˜ä¸ºäº†ä¸Šå–æ•´ self.conv2 = BasicCon2vd(64, 64, kernel_size=1) self.conv3 = BasicCon2vd(64, 192, kernel_size=3, padding=1) self.maxpool2 = nn.MaxPool2d(3, stride=2, ceil_mode=True) self.inception3a = Inception(192, 64, 96, 128, 16, 32, 32) self.inception3b = Inception(256, 128, 128, 192, 32, 96, 64) self.maxpool3 = nn.MaxPool2d(3, stride=2, ceil_mode=True) self.inception4a = Inception(480, 192, 96, 208, 16, 48, 64) self.inception4b = Inception(512, 160, 112, 224, 24, 64, 64) self.inception4c = Inception(512, 128, 128, 256, 24, 64, 64) self.inception4d = Inception(512, 112, 144, 288, 32, 64, 64) self.inception4e = Inception(528, 256, 160, 320, 32, 128, 128) self.maxpool4 = nn.MaxPool2d(3, stride=2, ceil_mode=True) self.inception5a = Inception(832, 256, 160, 320, 32, 128, 128) self.inception5b = Inception(832, 384, 192, 384, 48, 128, 128) if self.aux_logits: self.aux1 = InceptionAux(512, num_classes) self.aux2 = InceptionAux(528, num_classes) self.avgpool = nn.AdaptiveAvgPool2d((1, 1)) # (1, 1) è¿™é‡Œçš„(1, 1) &lt;=&gt; (width, Height) æ— è®ºè¾“å…¥æ˜¯å¤šå°‘ è¾“å‡ºéƒ½ä¸º1*1 self.dropout = nn.Dropout(p=0.4) self.fc = nn.Linear(1024, num_classes) if init_weight: self._initialize_weights() def _initialize_weights(self): for m in self.modules(): if isinstance(m, nn.Conv2d): nn.init.kaiming_normal_(m.weight, mode='fan_out', nonlinearity='relu') if m.bias is not None: nn.init.constant_(m.bias, 0) elif isinstance(m, nn.Linear): nn.init.normal_(m.weight, 0, 0.01) nn.init.constant_(m.bias, 0) def forward(self, x): # N x 3 x 224 x 224 x = self.conv1(x) # N x 64 x 112 x 112 x = self.maxpool1(x) # N x 64 x 56 x 56 x = self.conv2(x) # N x 64 x 56 x 56 x = self.conv3(x) # N x 192 x 56 x 56 x = self.maxpool2(x) # N x 192 x 28 x 28 x = self.inception3a(x) # N x 256 x 28 x 28 x = self.inception3b(x) # N x 480 x 28 x 28 x = self.maxpool3(x) # N x 480 x 14 x 14 x = self.inception4a(x) # N x 512 x 14 x 14 if self.training and self.aux_logits: # eval model lose this layer aux1 = self.aux1(x) x = self.inception4b(x) # N x 512 x 14 x 14 x = self.inception4c(x) # N x 512 x 14 x 14 x = self.inception4d(x) # N x 528 x 14 x 14 if self.training and self.aux_logits: # eval model lose this layer aux2 = self.aux2(x) x = self.inception4e(x) # N x 832 x 14 x 14 x = self.maxpool4(x) # N x 832 x 7 x 7 x = self.inception5a(x) # N x 832 x 7 x 7 x = self.inception5b(x) # N x 1024 x 7 x 7 x = self.avgpool(x) # N x 1024 x 1 x 1 x = torch.flatten(x, 1) # N x 1024 x = self.dropout(x) x = self.fc(x) # N x 1000 (num_classes) if self.training and self.aux_logits: # eval model lose this layer return x, aux2, aux1 return x self.maxpool1 = nn.MaxPool2d(3, stride=2, ceil_mode=True)ï¼šceil_mode=Trueæ—¶ å–æ•´æ–¹å¼å˜ä¸ºäº†ä¸Šå–æ•´ã€‚ nn.AdaptiveAvgPool2d((1, 1)) ï¼šè‡ªé€‚åº”çš„æ± åŒ–ä¸‹é‡‡æ ·æ“ä½œï¼Œå…¶ä¸­è¾“å…¥å‚æ•°ä¸ºä¸€ä¸ªå…ƒç»„ï¼Œå¤§å°ä¸ºç›®æ ‡è¾“å‡ºçš„[H,w]å€¼ã€‚ æ¨¡å‹çš„è®­ç»ƒä½†éƒ¨åˆ†è¿˜æ˜¯å’Œä¹‹å‰çš„æ¨¡å‹ç›¸ä¼¼çš„ï¼Œä»¥ä¸‹ä¸ºä¸åŒçš„éƒ¨åˆ†ã€‚ 1234net = GoogLeNet(num_classes=5, aux_logits=True, init_weights=True) net.to(device) loss_function = nn.CrossEntropyLoss() optimizer = optim.Adam(net.parameters(), lr=0.0003) é¦–å…ˆæ˜¯å®šä¹‰çš„æ¨¡å‹ä¸ºGoogLeNetä¸åŸæ¥ä¸åŒã€‚ 123456789101112131415for step, data in enumerate(train_bar): images, labels = data optimizer.zero_grad() logits, aux_logits2, aux_logits1 = net(images.to(device)) loss0 = loss_function(logits, labels.to(device)) loss1 = loss_function(aux_logits1, labels.to(device)) loss2 = loss_function(aux_logits2, labels.to(device)) loss = loss0 + loss1 * 0.3 + loss2 * 0.3 loss.backward() optimizer.step() # print statistics running_loss += loss.item() train_bar.desc = &quot;train epoch[{}/{}] loss:{:.3f}&quot;.format(epoch + 1, epochs, loss) å…¶æ¬¡æ˜¯æ²»ç†çš„æŸå¤±å‡½æ•°ç”¨ä¸‰ä¸ªï¼Œè®­ç»ƒæ—¶åˆ†åˆ«è¾…åŠ©åˆ†ç±»å™¨è¿›è¡Œè®¡ç®—ï¼Œä¹‹åå†å°†è®¡ç®—å¾—åˆ°çš„è¾…åŠ©åˆ†ç±»å™¨çš„å€¼è¿›è¡ŒåŠ æƒå¤„ç†ã€‚ åœ¨è®­ç»ƒæ˜¯ï¼Œä¼šå»è®¡ç®—å„ç§è¾…åŠ©åˆ†ç±»å™¨çš„è¾“å‡ºï¼Œè®¡ç®—æŸå¤±å‡½æ•°ï¼Œä¹‹ååœ¨éªŒè¯å’Œæµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œå°±ä¸ä¼šå†å»è®¡ç®—è¾…åŠ©åˆ†ç±»å™¨äº†ã€‚ æ¨¡å‹æµ‹è¯•1234567# create modelmodel = GoogLeNet(num_classes=5, aux_logits=False).to(device)# load model weightsweights_path = &quot;./googleNet.pth&quot;assert os.path.exists(weights_path), &quot;file: '{}' dose not exist.&quot;.format(weights_path)missing_keys, unexpected_keys = model.load_state_dict(torch.load(weights_path, map_location=device), strict=False) è¿™é‡Œï¼Œæˆ‘ä»¬åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­æ˜¯ä¿å­˜äº†è¾…åŠ©åˆ†ç±»å™¨çš„å‚æ•°çš„ï¼Œä½†æ˜¯åœ¨æµ‹è¯•æ—¶ï¼Œæ²¡æœ‰å®šä¹‰è¾…åŠ©åˆ†ç±»å™¨ï¼Œå› æ­¤å°†strict=Falseï¼Œé»˜è®¤ä¸ºTrueï¼Œæ­¤æ—¶model.load_state_dict() ä¼šè¿”å›ä¸¤ä¸ªç»“æœï¼Œunexpected_keysä¿ç•™çš„æ˜¯ä¹‹å‰è¾…åŠ©åˆ†ç±»å™¨çš„å±‚ã€‚ æœ€å¥½çš„ç»“æœè¾¾åˆ°äº†86%å·¦å³ã€‚","link":"/2022/01/30/%E5%9B%BE%E5%83%8F%E5%88%86%E7%B1%BB%E7%BD%91%E7%BB%9C%E5%8F%8APytorch%E5%AE%9E%E7%8E%B0/GoogLeNet%E7%BD%91%E7%BB%9C%E8%AF%A6%E8%A7%A3%E4%B8%8EPytorch%E5%AE%9E%E7%8E%B0/"},{"title":"ResNeXtç½‘ç»œè¯¦è§£ä¸Pytorchå®ç°","text":"hljs.initHighlightingOnLoad(); ResNeXtç½‘ç»œè¯¦è§£è®ºæ–‡é¢˜ç›®ä¸ºAggregated Residual Transformations for Deep Neural Networksï¼Œä¸»è¦çš„åˆ›æ–°ç‚¹åœ¨äºæ›´æ–°äº†block. åœ¨å®½åº¦å’Œæ·±åº¦ä¸Šæ€§èƒ½æœ‰äº†ä¸€å®šçš„æå‡ã€‚ ResNeXtç½‘ç»œåœ¨ç›¸åŒçš„è®¡ç®—é‡çš„æƒ…å†µä¸‹ç›¸æ¯”ResNetæ¥è¯´ï¼Œé”™è¯¯ç‡æ›´å°ã€‚ ç»„å·ç§¯ æœ¬è´¨ä¸Šæ˜¯å°†è¾“å…¥$C_{in}$åˆ’åˆ†ä¸ºgä¸ªç»„ï¼Œæ¯ä¸ªç»„$C_{in}/g$å±‚ï¼Œæ¯ä¸ªç»„é€šè¿‡å·ç§¯å±‚ä¹‹åå°†äº§ç”Ÿ$n/g$å±‚çš„ä¸€ä¸ªå·ç§¯ï¼Œå†å°†gä¸ªç»„çš„å·ç§¯å†æ‹¼æ¥ä»¥ä¸‹ï¼Œå°±å¾—å‡ºäº†nå±‚çš„å·ç§¯ç½‘ç»œã€‚ æç«¯æƒ…å†µ$g=C_{in},n=C_{in}$ï¼Œæ­¤æ—¶å°±æ˜¯DW Conv. (c)é¦–å…ˆ$1 \\times 1$å¯¹è¿›è¡Œé™ç»´å¤„ç†ï¼Œ256-&gt;128ï¼›ä¹‹åç”¨ç»„å·ç§¯group=32è¿›è¡Œå·ç§¯ï¼Œæœ€å$1 \\times 1$è¿›è¡Œå‡ç»´ï¼Œå†å’Œè¾“å…¥è¿›è¡Œç›¸åŠ ã€‚ (b)å…ˆåˆ†ç»„ï¼Œåˆ†æˆ32ä¸ªç»„ï¼Œæ¯ç»„channel=4ï¼Œè¿›è¡Œ$1 \\times 1$å·ç§¯ä¹‹åï¼Œå†å°†æ¯ä¸ªç»„è¿›è¡Œ$3 \\times 3$çš„ç»„å·ç§¯ï¼Œå½’å¹¶ä¹‹åå…¶ä»–è·Ÿ(c)ç›¸åŒã€‚ (a)å‰é¢å’Œ(b)ç›¸åŒï¼Œåé¢ç”¨ä¸€ä¸ªç›¸åŠ æ¥ä»£æ›¿å½’+å·ç§¯æ“ä½œã€‚ ç†è®ºä¸Šä¸‰è€…æ˜¯ç­‰ä»·çš„ï¼Œ(b)å’Œ(c)çš„ç­‰ä»·æ¯”è¾ƒæ˜¾ç„¶ï¼Œä¸(a)çš„ç­‰ä»·ä¸å¥½ç†è§£ã€‚ ç›¸åŠ çš„è§„åˆ™å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œkernel=[1,2]å·ç§¯çš„è¿ç®—ç»“æœå¦‚ç»¿çº¿æ‰€ç¤ºã€‚ åˆ†ç»„å·ç§¯å†ç›¸åŠ çš„ç»“æœå’Œç›´æ¥å·ç§¯çš„ç»“æœç›¸åŒã€‚ åˆ©ç”¨ç»„å·ç§¯ä»£æ›¿ä»–ä¸€èˆ¬çš„å·ç§¯ï¼Œå¾—å‡ºResNeXtç½‘ç»œçš„åŸºæœ¬æ¡†æ¶ã€‚ä¸‹å›¾çš„(32$\\times$4d)ä»£è¡¨æˆ32ä¸ªç»„ï¼Œæ¯ä¸ªç»„conv2_channel=4 å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä½œè€…é€šè¿‡å®éªŒæ¥éªŒè¯ä¸ºä»€ä¹ˆè¦é€‰åˆ†ç»„æ•°ä¸º32. è¿™é‡Œå°½é‡ä¿æŒè®¡ç®—é‡ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œé€šè¿‡æ”¹å˜ä¸åŒçš„åˆ†ç»„æ•°å’Œconv_channelï¼Œå³å›¾è®¾è®¡äº†å‡ ä¸ªä¸åŒçš„åˆ†ç»„ç»„åˆã€‚ å·¦é¢çš„å›¾ä»£è¡¨50å’Œ101å±‚ç½‘ç»œä¸­ï¼Œä¸åŒåˆ†ç»„ç»„åˆå¯¹åº”å¾—é”™è¯¯ç‡ã€‚ å¯¹äºæµ…å±‚å¾—blockæ¥è®²ï¼Œæ•ˆæœæ²¡æœ‰å¾ˆå¤§çš„æå‡ã€‚ ResNeXtç½‘ç»œçš„pytorchå®ç°ç½‘ç»œçš„æ­å»ºåŸºæœ¬å’ŒResNetç›¸åŒï¼ŒåŸºæœ¬æ˜¯åœ¨ResNetä¸Šé¢çš„æ”¹è¿›ã€‚ å¦‚å³å›¾æ‰€ç¤ºï¼Œç½‘ç»œçš„æ¡†æ¶çš„æ˜¯ç›¸åŒçš„ï¼Œæ”¹è¿›ä¸»è¦å‘ç”Ÿåœ¨åŸºæœ¬çš„blockä¸Šé¢ï¼š ç¬¬äºŒä¸ªå·ç§¯æˆæ¢æˆäº†group=32çš„ç»„å·ç§¯ã€‚ ç¬¬ä¸€ä¸ªå·ç§¯å±‚çš„è¾“å…¥channelæ˜¯åŸæ¥ResNetçš„2å€ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849class Bottleneck(nn.Module): &quot;&quot;&quot; æ³¨æ„ï¼šåŸè®ºæ–‡ä¸­ï¼Œåœ¨è™šçº¿æ®‹å·®ç»“æ„çš„ä¸»åˆ†æ”¯ä¸Šï¼Œç¬¬ä¸€ä¸ª1x1å·ç§¯å±‚çš„æ­¥è·æ˜¯2ï¼Œç¬¬äºŒä¸ª3x3å·ç§¯å±‚æ­¥è·æ˜¯1ã€‚ ä½†åœ¨pytorchå®˜æ–¹å®ç°è¿‡ç¨‹ä¸­æ˜¯ç¬¬ä¸€ä¸ª1x1å·ç§¯å±‚çš„æ­¥è·æ˜¯1ï¼Œç¬¬äºŒä¸ª3x3å·ç§¯å±‚æ­¥è·æ˜¯2ï¼Œ è¿™ä¹ˆåšçš„å¥½å¤„æ˜¯èƒ½å¤Ÿåœ¨top1ä¸Šæå‡å¤§æ¦‚0.5%çš„å‡†ç¡®ç‡ã€‚ å¯å‚è€ƒResnet v1.5 https://ngc.nvidia.com/catalog/model-scripts/nvidia:resnet_50_v1_5_for_pytorch &quot;&quot;&quot; expansion = 4 def __init__(self, in_channel, out_channel, stride=1, downsample=None, groups=1, width_per_group=64): super(Bottleneck, self).__init__() width = int(out_channel * (width_per_group / 64.)) * groups self.conv1 = nn.Conv2d(in_channels=in_channel, out_channels=width, kernel_size=1, stride=1, bias=False) # squeeze channels self.bn1 = nn.BatchNorm2d(width) # ----------------------------------------- self.conv2 = nn.Conv2d(in_channels=width, out_channels=width, groups=groups, kernel_size=3, stride=stride, bias=False, padding=1) self.bn2 = nn.BatchNorm2d(width) # ----------------------------------------- self.conv3 = nn.Conv2d(in_channels=width, out_channels=out_channel*self.expansion, kernel_size=1, stride=1, bias=False) # unsqueeze channels self.bn3 = nn.BatchNorm2d(out_channel*self.expansion) self.relu = nn.ReLU(inplace=True) self.downsample = downsample def forward(self, x): identity = x if self.downsample is not None: identity = self.downsample(x) out = self.conv1(x) out = self.bn1(out) out = self.relu(out) out = self.conv2(out) out = self.bn2(out) out = self.relu(out) out = self.conv3(out) out = self.bn3(out) out += identity out = self.relu(out) return out width = int(out_channel \\ (width_per_group / 64.)) * groups*è®¡ç®—çš„æ˜¯ç¿»å€ä»¥åçš„ResNeXtç½‘ç»œçš„out_channelæ•°ï¼Œå¦‚å›¾æ‰€ç¤ºï¼ŒResNeXtç½‘ç»œçš„ç¬¬ä¸€å±‚out_channel=128æ˜¯ResNetçš„2å€ï¼Œæ ¹æ®è®¡ç®—å…¬å¼ width=(64*(32/64))*32=128 out_channelä»£è¡¨çš„æ˜¯æ®‹å·®å—çš„out_channelæ•°ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374class ResNet(nn.Module): def __init__(self, block, blocks_num, num_classes=1000, include_top=True, groups=1, width_per_group=64): super(ResNet, self).__init__() self.include_top = include_top self.in_channel = 64 self.groups = groups self.width_per_group = width_per_group self.conv1 = nn.Conv2d(3, self.in_channel, kernel_size=7, stride=2, padding=3, bias=False) self.bn1 = nn.BatchNorm2d(self.in_channel) self.relu = nn.ReLU(inplace=True) self.maxpool = nn.MaxPool2d(kernel_size=3, stride=2, padding=1) self.layer1 = self._make_layer(block, 64, blocks_num[0]) self.layer2 = self._make_layer(block, 128, blocks_num[1], stride=2) self.layer3 = self._make_layer(block, 256, blocks_num[2], stride=2) self.layer4 = self._make_layer(block, 512, blocks_num[3], stride=2) if self.include_top: self.avgpool = nn.AdaptiveAvgPool2d((1, 1)) # output size = (1, 1) self.fc = nn.Linear(512 * block.expansion, num_classes) for m in self.modules(): if isinstance(m, nn.Conv2d): nn.init.kaiming_normal_(m.weight, mode='fan_out', nonlinearity='relu') def _make_layer(self, block, channel, block_num, stride=1): downsample = None if stride != 1 or self.in_channel != channel * block.expansion: downsample = nn.Sequential( nn.Conv2d(self.in_channel, channel * block.expansion, kernel_size=1, stride=stride, bias=False), nn.BatchNorm2d(channel * block.expansion)) layers = [] layers.append(block(self.in_channel, channel, downsample=downsample, stride=stride, groups=self.groups, width_per_group=self.width_per_group)) self.in_channel = channel * block.expansion for _ in range(1, block_num): layers.append(block(self.in_channel, channel, groups=self.groups, width_per_group=self.width_per_group)) return nn.Sequential(*layers) def forward(self, x): x = self.conv1(x) x = self.bn1(x) x = self.relu(x) x = self.maxpool(x) x = self.layer1(x) x = self.layer2(x) x = self.layer3(x) x = self.layer4(x) if self.include_top: x = self.avgpool(x) x = torch.flatten(x, 1) x = self.fc(x) return x ç›¸æ¯”ä¹‹å‰çš„ResNetå¢åŠ äº†groups=1, width_per_group=64 å‚æ•°ï¼Œåœ¨_make_layer()å‡½æ•°ä»¥åŠåˆå§‹åŒ–çš„éƒ¨åˆ†éƒ½å¢åŠ ä¸Šè¿°å‚æ•°ï¼Œå…¶ä½™ä¸å˜ã€‚ 123456789def resnext50_32x4d(num_classes=1000, include_top=True): # https://download.pytorch.org/models/resnext50_32x4d-7cdf4587.pth groups = 32 width_per_group = 4 return ResNet(Bottleneck, [3, 4, 6, 3], num_classes=num_classes, include_top=include_top, groups=groups, width_per_group=width_per_group) è¿™é‡Œæˆ‘ä»¬é‡‡ç”¨ç¬¬ä¸‰ç§æ–¹æ³•ï¼Œä»…ä»…è®­ç»ƒæœ€åä¸€å±‚å…¨è¿æ¥å±‚çš„æƒé‡ã€‚ param.requires_grad = False è¿™æ ·å°†å‰é¢çš„å‚æ•°è§†ä¹‹ä¸ºä¸å¯è®­ç»ƒçš„ï¼Œè¿™æ ·å°±å¯ä»¥ä»…ä»…ä¹‹è®­ç»ƒæœ€åä¸€å±‚çš„å‚æ•°äº†ï¼Œå› ä¸ºæœ€åä¸€å±‚æ˜¯é‡æ–°å®šä¹‰çš„ã€‚ 12345678net.load_state_dict(torch.load(model_weight_path, map_location=device))for param in net.parameters(): param.requires_grad = False # change fc layer structurein_channel = net.fc.in_featuresnet.fc = nn.Linear(in_channel, 5)net.to(device) æ•°æ®é¢„æµ‹ æ•°æ®çš„æ‰“åŒ…è¿‡ç¨‹ï¼Œè¿™é‡Œçš„æˆ‘ä»¬çš„é¦–å…ˆå°†å›¾ç‰‡åç§°æ”¾åˆ°ä¸€ä¸ªlistä¸­ï¼Œä¹‹åä½¿ç”¨batch_img = torch.stack(img_list, dim=0) å°†listé‡Œé¢çš„å›¾ç‰‡æ‰“åŒ…æˆä¸€ä¸ªbatchä¸­ã€‚","link":"/2022/02/03/%E5%9B%BE%E5%83%8F%E5%88%86%E7%B1%BB%E7%BD%91%E7%BB%9C%E5%8F%8APytorch%E5%AE%9E%E7%8E%B0/ResNeXt%E7%BD%91%E7%BB%9C%E8%AF%A6%E8%A7%A3%E4%B8%8EPytorch%E5%AE%9E%E7%8E%B0/"},{"title":"Pytorchå…¥é—¨æ•™ç¨‹åŠLeNetç½‘ç»œ","text":"hljs.initHighlightingOnLoad(); æœ¬ç¯‡ä¸ºPytorchå…¥é—¨æ•™ç¨‹ï¼Œä½¿ç”¨çš„ç½‘ç»œä¸ºLeNet(1998)ç½‘ç»œã€‚ä¸»è¦ä»ç½‘ç»œæ­å»ºã€å¯¼å…¥æ•°æ®ã€å®šä¹‰æŸå¤±å‡½æ•°ä¸ä¼˜åŒ–å™¨ã€è®­ç»ƒä¸éªŒè¯æ¨¡å‹ã€æ¨¡å‹æµ‹è¯•ä¸ä¿å­˜æ–¹é¢è¿›è¡Œå±•ç¤ºã€‚ å»ºç«‹LeNetç½‘ç»œæ¨¡å‹123456789101112131415161718192021222324252627import torchimport torch.nn as nnimport torch.nn.functional as Fclass LeNet(nn.Module): def __init__(self): super(LeNet, self).__init__() self.conv1 = nn.Conv2d(in_channels=3, out_channels=16, kernel_size=5) self.pool1 = nn.MaxPool2d(kernel_size=2, stride=2) self.conv2 = nn.Conv2d(in_channels=16, out_channels=32, kernel_size=5) self.pool2 = nn.MaxPool2d(kernel_size=2, stride=2) self.fc1 = nn.Linear(32 * 5 * 5, 120) self.fc2 = nn.Linear(120, 84) self.fc3 = nn.Linear(84, 10) # pytorch [batch, channel, height, width] def forward(self, x): #input(3,32,32) N=(32-5+0)/1+1=28 x = F.relu(self.conv1(x)) #output(16,28,28) N=28/2=14 x = self.pool1(x) #output(16,14,14) N=(14-5+0)/1+1=10 x = F.relu(self.conv2(x)) #output(32,10,10) N=10/2=5 x = self.pool2(x) #output(32,5,5) x = x.view(-1, 32*5*5) #output=32*5*5=800 x = F.relu(self.fc1(x)) #output=120 x = F.relu(self.fc2(x)) #output=84 out = F.relu((self.fc3(x)))#output=10 return out ç»è¿‡å·ç§¯åçš„çŸ©é˜µå°ºå¯¸å¤§å°è®¡ç®—å…¬å¼ä¸ºï¼š å…¶ä¸­è¾“å…¥å›¾ç‰‡çš„å¤§å°ä¸º$W\\times W$ï¼› Filterçš„å¤§å°ä¸º$F\\times F$ï¼Œå³kernel_sizeä¸ºFï¼› æ­¥é•¿Stirde=S paddingçš„åƒç´ æ•°ä¸ºP N=\\dfrac{(W-F+2P)}{S}+1ä»¥ä¸‹æˆ‘ä»¬è¿›è¡Œæ¨¡å‹çš„æµ‹è¯•å’Œè°ƒè¯•ï¼š 12345678910111213141516# æ¨¡å‹çš„æµ‹è¯•import torchX = torch.rand(size=(32, 3, 32, 32), dtype=torch.float32)model = LeNet()print(model)# æ‰“å°çš„ç»“æœå¦‚ä¸‹ï¼šLeNet( (conv1): Conv2d(3, 16, kernel_size=(5, 5), stride=(1, 1)) (pool1): MaxPool2d(kernel_size=2, stride=2, padding=0, dilation=1, ceil_mode=False) (conv2): Conv2d(16, 32, kernel_size=(5, 5), stride=(1, 1)) (pool2): MaxPool2d(kernel_size=2, stride=2, padding=0, dilation=1, ceil_mode=False) (fc1): Linear(in_features=800, out_features=120, bias=True) (fc2): Linear(in_features=120, out_features=84, bias=True) (fc3): Linear(in_features=84, out_features=10, bias=True)) å¯¼å…¥æ•°æ® è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„CIFAR-10æ•°æ®é›†ï¼Œä¸€å…±ç”±10ç±»ã€‚ é¦–å…ˆï¼Œä¸‹è½½æ•°æ®é›†ã€‚ torchvision.datasets.xxx() é‡Œé¢æœ‰æˆ‘ä»¬éœ€è¦å¾ˆå¤šæ•°æ®é›†ã€‚ 123456# ä¸‹è½½è®­ç»ƒæ•°æ®trainset = torchvision.datasets.CIFAR10( root=&quot;./data&quot;, #æ•°æ®é›†ä¸‹è½½çš„ä½ç½® train=True, #æ˜¯å¦ä¸ºè®­ç»ƒé›† transform=transforms,#å›¾åƒå¤„ç†å‡½æ•° download=True) #æ˜¯å¦ä¸‹è½½ å›¾åƒçš„å¤„ç†å‡½æ•°é›† 1234transforms = transforms.Compose([ transforms.ToTensor(), transforms.Normalize(mean=(0.5, 0.5, 0.5), std=(0.5, 0.5, 0.5))]) Compose([ ])å‡½æ•°çš„ä½œç”¨æ˜¯å°†æ‰€æœ‰çš„å¤„ç†å‡½æ•°åˆå¹¶ã€æ‰“åŒ…ã€‚ ToTensor()å‡½æ•°çš„ä½œç”¨æ˜¯å°†å›¾ç‰‡æ•°æ®è½¬æ¢ä¸ºå¼ é‡ï¼Œç»´åº¦è½¬åŒ–ä¸ºpytorchæ ‡å‡†çš„ç»´åº¦ï¼ŒåŒæ—¶æ•°æ®çš„èŒƒå›´ç”±åŸæ¥çš„$[0,255]\\rightarrow[0.0,1.0]$ã€‚ Normalize(mean=(0.5, 0.5, 0.5), std=(0.5, 0.5, 0.5))çš„ä½œç”¨æ˜¯å°†å›¾ç‰‡çš„å¼ é‡æ•°æ®è¿›è¡Œæ ‡å‡†åŒ–ã€‚ ä¹‹åï¼Œå¯¼å…¥æ•°æ®é›†ã€‚ 123456# å¯¼å…¥è®­ç»ƒæ•°æ®trainloader = utils.data.DataLoader( trainset, # æ€»çš„è®­ç»ƒæ•°æ®é›† batch_size=50, # ä¸€ä¸ªbatché‡Œçš„æ ·æœ¬æ•° shuffle=True, # æ˜¯å¦æ‰“ä¹±é¡ºåº num_workers=0) # çº¿ç¨‹æ•° ç”±äºä¸€æ¬¡è®­ç»ƒä¸å¯èƒ½å°†è®­ç»ƒé›†æ‰€æœ‰çš„å‚æ•°éƒ½é€‰è¿›æ¥è¿›è¡Œåå‘ä¼ æ’­ï¼Œå› æ­¤æˆ‘ä»¬æŠŠä¸€æ¬¡å–‚å…¥æ•°æ®çš„ä¸ªæ•°ç§°ä¸ºbatch_sizeã€‚ æ•°æ®çš„æµ‹è¯•ï¼Œä½¿ç”¨è¿­ä»£å™¨è·å¾—æ•°æ®é›†ä¸­çš„å›¾ç‰‡å’Œæ ‡ç­¾ã€‚ 1234567891011121314151617181920test_data_iter = iter(test_loader)# è¿­ä»£å™¨ï¼Œç”¨æ¥è·å–test_image, test_label = test_data_iter.next()# ç”¨æ¥è·å–ä¸‹ä¸€ä¸ªå‚æ•°# æ˜¾ç¤ºå‡½æ•°def imshow(img): img = img / 2 + 0.5 # unnormalize åæ ‡å‡†åŒ– npimg = img.numpy() # è½¬åŒ–ä¸ºnumpy() plt.imshow(np.transpose(npimg, (1, 2, 0))) # ç”±äºToTensor()æ”¹å˜äº†æ•°æ®çš„ç»´åº¦æ’åˆ—ï¼Œè½¬åŒ–ä¸ºåŸæ¥çš„ç»´åº¦æ’åˆ— plt.show()# # get some random training imagesdataiter = iter(trainloader)images, labels = dataiter.next()# show imagesimshow(torchvision.utils.make_grid(images))# print labelsprint(' '.join('%5s' % classes[labels[j]] for j in range(4))) å®šä¹‰æŸå¤±å‡½æ•°12# å®šä¹‰æŸå¤±å‡½æ•°ä¸ºäº¤å‰ç†µæŸå¤±å‡½æ•°loss_function = nn.CrossEntropyLoss() å¦‚å›¾ï¼Œåœ¨CrossEntropyLoss()é‡Œé¢å·²ç»åŒ…å«äº†äº¤å‰ç†µçš„è®¡ç®—å…¬å¼ï¼Œå› æ­¤å°±ä¸åœ¨éœ€è¦åœ¨ç½‘ç»œé‡Œå®šä¹‰softmax()å±‚äº†ã€‚ å®šä¹‰ä¼˜åŒ–å™¨è¿™é‡Œä½¿ç”¨çš„Adam() ä¼˜åŒ–å™¨ã€‚ 1234# å®šä¹‰ä¼˜åŒ–å™¨ï¼ˆè®­ç»ƒå‚æ•°ï¼Œå­¦ä¹ ç‡ï¼‰optimizer = optim.Adam(net.parameters(), lr=0.01)# å¯å˜å­¦ä¹ ç‡scheduler = optim.lr_scheduler.StepLR(optimizer, step_size=1) è®­ç»ƒæ¨¡å‹1234567891011121314151617181920212223242526272829303132for epoch in range(5): # ä¸€ä¸ªepochå³å¯¹æ•´ä¸ªè®­ç»ƒé›†è¿›è¡Œä¸€æ¬¡è®­ç»ƒ,è¿™é‡Œå¯¹è®­ç»ƒé›†å¾ª5è½® running_loss = 0.0 # è®­ç»ƒè¯¯å·®åˆå§‹åŒ–ä¸º0 for step, train_data in enumerate(trainloader, start=0): inputs, labels = train_data inputs, labels = inputs.to(device), labels.to(device) # æ¸…é™¤å†å²æ¢¯åº¦,æ¯ä¸€è½®è®­ç»ƒéƒ½è¦ optimizer.zero_grad() # forward + backward + optimize outputs = net(inputs) # æ­£å‘ä¼ æ’­ loss = loss_function(outputs, labels) # è®¡ç®—æŸå¤± loss.backward() # åå‘ä¼ æ’­ optimizer.step() # ä¼˜åŒ–å™¨æ›´æ–°å‚æ•° # æ‰“å°è®­ç»ƒç»“æœ running_loss += loss.item() accuray = 0 test_image, test_label = test_image.to(device), test_label.to(device) if step % 500 == 499: print('******************') with torch.no_grad(): # ä»£è¡¨ä»¥ä¸‹çš„ä»£ç éƒ½æ˜¯åœ¨torch.no_grad()ä¸‹è¿›è¡Œè¿ç®—çš„ outputs = net(test_image) predit_y = torch.max(outputs, dim=1)[1] accuray = (predit_y == test_label).sum().item() / test_label.shape[0] print('[%d, %5d] loss: %.3f test_accuray: %.3f' % (epoch + 1, step + 1, running_loss / 500, accuray)) running_loss = 0.0 enumerate(trainloader, start=0)ï¼šè¿”å›çš„æ˜¯æ•°æ®é›†å’Œå¯¹åº”çš„æ­¥æ•°ã€‚ å…³äºoptimizer.zero_grad() è¿›è¡Œæ¢¯åº¦çš„æ¸…é›¶ã€‚ 12345678910# ä¼ ç»Ÿçš„æ–¹æ³•for i, (image, label) in enumerate(train_loader): # 1. input output pred = model(image) loss = criterion(pred, label) # 2. backward optimizer.zero_grad() # reset gradient loss.backward() optimizer.step() è·å– lossï¼šè¾“å…¥å›¾åƒå’Œæ ‡ç­¾ï¼Œé€šè¿‡inferè®¡ç®—å¾—åˆ°é¢„æµ‹å€¼ï¼Œè®¡ç®—æŸå¤±å‡½æ•°ï¼› optimizer.zero_grad() æ¸…ç©ºè¿‡å¾€æ¢¯åº¦ï¼› loss.backward() åå‘ä¼ æ’­ï¼Œè®¡ç®—å½“å‰æ¢¯åº¦ï¼› optimizer.step() æ ¹æ®æ¢¯åº¦æ›´æ–°ç½‘ç»œå‚æ•° 1234567891011121314151617# æ¢¯åº¦ç´¯åŠ æ–¹æ³•for i,(image, label) in enumerate(train_loader): # 1. input output pred = model(image) loss = criterion(pred, label) # 2.1 loss regularization loss = loss / accumulation_steps # 2.2 back propagation loss.backward() # 3. update parameters of net if (i+1) % accumulation_steps == 0: # optimizer the net optimizer.step() # update parameters of net optimizer.zero_grad() # reset gradient è·å– lossï¼šè¾“å…¥å›¾åƒå’Œæ ‡ç­¾ï¼Œé€šè¿‡inferè®¡ç®—å¾—åˆ°é¢„æµ‹å€¼ï¼Œè®¡ç®—æŸå¤±å‡½æ•°ï¼› loss.backward() åå‘ä¼ æ’­ï¼Œè®¡ç®—å½“å‰æ¢¯åº¦ï¼› å¤šæ¬¡å¾ªç¯æ­¥éª¤ 1-2ï¼Œä¸æ¸…ç©ºæ¢¯åº¦ï¼Œä½¿æ¢¯åº¦ç´¯åŠ åœ¨å·²æœ‰æ¢¯åº¦ä¸Šï¼› æ¢¯åº¦ç´¯åŠ äº†ä¸€å®šæ¬¡æ•°åï¼Œå…ˆoptimizer.step() æ ¹æ®ç´¯è®¡çš„æ¢¯åº¦æ›´æ–°ç½‘ç»œå‚æ•°ï¼Œç„¶åoptimizer.zero_grad() æ¸…ç©ºè¿‡å¾€æ¢¯åº¦ï¼Œä¸ºä¸‹ä¸€æ³¢æ¢¯åº¦ç´¯åŠ åšå‡†å¤‡ï¼› æ€»ç»“æ¥è¯´ï¼šæ¢¯åº¦ç´¯åŠ å°±æ˜¯ï¼Œæ¯æ¬¡è·å–1ä¸ªbatchçš„æ•°æ®ï¼Œè®¡ç®—1æ¬¡æ¢¯åº¦ï¼Œæ¢¯åº¦ä¸æ¸…ç©ºï¼Œä¸æ–­ç´¯åŠ ï¼Œç´¯åŠ ä¸€å®šæ¬¡æ•°åï¼Œæ ¹æ®ç´¯åŠ çš„æ¢¯åº¦æ›´æ–°ç½‘ç»œå‚æ•°ï¼Œç„¶åæ¸…ç©ºæ¢¯åº¦ï¼Œè¿›è¡Œä¸‹ä¸€æ¬¡å¾ªç¯ã€‚å¯¹äºä¸€äº›GPUå†…å­˜ä¸è¶³çš„å®éªŒå®¤ï¼Œè¿™æ˜¯ä¸€ä¸ªå¯ä»¥æ‰©å¤§batch_sizeçš„trickã€‚ æ¨¡å‹æµ‹è¯•12345678910111213141516# æ‰“å°è®­ç»ƒç»“æœrunning_loss += loss.item()accuray = 0# ä½¿ç”¨GPUtest_image, test_label = test_image.to(device), test_label.to(device)if step % 500 == 499: print('******************') with torch.no_grad(): # ä»£è¡¨ä»¥ä¸‹çš„ä»£ç éƒ½æ˜¯åœ¨torch.no_grad()ä¸‹è¿›è¡Œè¿ç®—çš„ outputs = net(test_image) predit_y = torch.max(outputs, dim=1)[1] # _,predit_y = torch.max(outputs, dim=1) # max()è¿”å›çš„æ˜¯ä¸¤ä¸ªç»´åº¦ï¼Œé¦–å…ˆçš„æœ€å¤§å€¼ï¼Œä¹‹åæ˜¯index accuray = (predit_y == test_label).sum().item() / test_label.shape[0] print('[%d, %5d] loss: %.3f test_accuray: %.3f' % (epoch + 1, step + 1, running_loss / 500, accuray)) running_loss = 0.0 with torch.no_grad():è¿™é‡Œçš„withæ˜¯ä¸€ä¸ªä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œå…¶ä¸­çš„ä½œç”¨æ˜¯ä¸‹é¢çš„ä»£ç éƒ½éµå¾ªtorch.no_grad()ã€‚ å…¶æ¬¡ï¼Œåœ¨é¢„æµ‹è¿‡ç¨‹ä¸­ï¼Œä¸ç”¨è¿›è¡Œæ¢¯åº¦è®¡ç®—ï¼Œç”¨äº†åè€Œå†…å­˜ä¸å¤Ÿï¼Œå› æ­¤ä½¿ç”¨torch.no_grad()ã€‚ tensor.item()ï¼šç”¨æ¥è·å–tensorçš„æ•°å€¼ã€‚ ä¿å­˜æ¨¡å‹12save_path = './LeNet.pth'torch.save(net.state_dict(), save_path) æ¨¡å‹æµ‹è¯• é¦–å…ˆï¼Œå¯¹å›¾ç‰‡è¿›è¡Œå¤„ç†ã€‚ 123456789101112# æ•°æ®é¢„å¤„ç†transform = transforms.Compose( [transforms.Resize((32, 32)), # é¦–å…ˆéœ€resizeæˆè·Ÿè®­ç»ƒé›†å›¾åƒä¸€æ ·çš„å¤§å° transforms.ToTensor(), # è½¬æ¢ä¸ºtorchçš„å¯¹çš„å¼ é‡ç»´åº¦ transforms.Normalize((0.5, 0.5, 0.5), (0.5, 0.5, 0.5))])# å¯¼å…¥è¦æµ‹è¯•çš„å›¾åƒï¼ˆè‡ªå·±æ‰¾çš„ï¼Œä¸åœ¨æ•°æ®é›†ä¸­ï¼‰ï¼Œæ”¾åœ¨æºæ–‡ä»¶ç›®å½•ä¸‹im = Image.open('4.jpg')im = transform(im) # è½¬æ¢æˆ[C, H, W]im = torch.unsqueeze(im, dim=0) # å¯¹æ•°æ®å¢åŠ ä¸€ä¸ªæ–°ç»´åº¦ï¼Œ# å› ä¸ºtensorçš„ç»´åº¦æ˜¯[batch, channel, height, width] torch.unsqueeze(im, dim=0)ï¼šå¯¹æ•°æ®å¢åŠ ä¸€ä¸ªæ–°ç»´åº¦ï¼Œå³åŠ ä¸€ä¸ªbatchçš„ç»´åº¦ã€‚ ä¹‹åï¼Œå®ä¾‹åŒ–ç½‘ç»œ 123# å®ä¾‹åŒ–ç½‘ç»œï¼ŒåŠ è½½è®­ç»ƒå¥½çš„æ¨¡å‹å‚æ•°net = LeNet()net.load_state_dict(torch.load('Lenet.pth')) æœ€åï¼Œé¢„æµ‹ç±»åˆ« 1234567# é¢„æµ‹classes = ('plane', 'car', 'bird', 'cat', 'deer', 'dog', 'frog', 'horse', 'ship', 'truck')with torch.no_grad(): outputs = net(im) predict = torch.max(outputs, dim=1)[1].data.numpy()print(classes[int(predict)]) è¿™é‡Œï¼Œæˆ‘ä»¬å°†outputsä¸¢è¿›torch.softmax() ï¼Œå¯å¾—åˆ°å±äºæ¯ä¸ªç±»åˆ«çš„æ¦‚ç‡ã€‚ 1234567predict = torch.softmax(outputs, dim=1)# dim=1çš„åŸå› ï¼Œæ˜¯å› ä¸ºoutputsä¸ºä¸¤ç»´çš„ï¼Œdim=0åªæœ‰ä¸€ä¸ª# outputs = tensor([[0.0000, 0.0000, 5.4191, 0.4988, 0.0000, 1.3599, 0.0000, 0.2233, 0.0000, 0.0000]])print(predict)# è¾“å‡º:tensor([[0.0042, 0.0042, 0.9464, 0.0069, 0.0042, 0.0163, 0.0042, 0.0052, 0.0042, 0.0042]])","link":"/2022/01/28/%E5%9B%BE%E5%83%8F%E5%88%86%E7%B1%BB%E7%BD%91%E7%BB%9C%E5%8F%8APytorch%E5%AE%9E%E7%8E%B0/Pytorch%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B%E5%8F%8ALeNet%E7%BD%91%E7%BB%9C/"},{"title":"ResNetç½‘ç»œè¯¦è§£ä¸Pytorchå®ç°","text":"hljs.initHighlightingOnLoad(); ResNetè¯¦è§£ResNetåœ¨2015å¹´ç”±å¾®è½¯å®éªŒå®¤æå‡ºï¼Œæ–©è·å½“å¹´lmageNetç«èµ›ä¸­åˆ†ç±»ä»»åŠ¡ç¬¬ä¸€åï¼Œç›®æ ‡æ£€æµ‹ç¬¬ä¸€åã€‚è·å¾—cocoæ•°æ®é›†ä¸­ç›®æ ‡æ£€æµ‹ç¬¬ä¸€åï¼Œå›¾åƒåˆ†å‰²ç¬¬ä¸€åã€‚ ç½‘ç»œä¸­çš„äº®ç‚¹: è¶…æ·±çš„ç½‘ç»œç»“æ„(çªç ´1000å±‚) æå‡ºresidualæ¨¡å— ä½¿ç”¨Batch NormalizationåŠ é€Ÿè®­ç»ƒ(ä¸¢å¼ƒdropout) éšç€ç½‘ç»œçš„ä¸æ–­åŠ æ·±ï¼šæ¢¯åº¦æ¶ˆå¤±å’Œæ¢¯åº¦çˆ†ç‚¸ã€é€€åŒ–é—®é¢˜ã€‚ é€šè¿‡æ®‹å·®ç»“æ„å¯ä»¥å¾ˆå¥½çš„è§£å†³ä¸Šè¿°é—®é¢˜ã€‚ residualç»“æ„ å¦‚å›¾ï¼Œ1x1çš„å·ç§¯å±‚çš„ä¸»è¦ä½œç”¨æ˜¯æ”¹å˜channelä¸ªæ•°ï¼Œå³è¿›è¡Œå‡ç»´å’Œé™ç»´ï¼› æ³¨æ„ï¼Œæ±‚å’Œæ˜¯æ—¶ä¸»åˆ†æ”¯å’Œshoutcutçš„ç‰¹å¾çŸ©é˜µçš„å½¢çŠ¶[H,W]å’Œæ·±åº¦channelå¿…é¡»ç›¸åŒã€‚ å·¦è¾¹è¿™å‰¯å›¾åŸæœ¬æ˜¯ä»¥è¾“å…¥channelä¸º64ï¼Œ3x3å·ç§¯å±‚å·ç§¯æ ¸æ•°ä¹Ÿæ˜¯64ä¸ºä¾‹çš„ï¼Œè¿™é‡Œä¸ºäº†æ–¹ä¾¿å¯¹æ¯”éƒ½æ”¹æˆäº†256ã€‚ è¡¨æ ¼ä¸­çš„ä¹˜ç§¯ä»£è¡¨å †å å‡ å±‚ ä¸‹å›¾æ‰€ç¤ºï¼Œæ®‹å·®å—çš„ç»“æ„ä¸­æ®‹å·®æœ‰å®çº¿ä¹Ÿæœ‰è™šçº¿ã€‚ å®çº¿è¿æ¥å’Œè™šçº¿è¿æ¥çš„åŒºåˆ« å…¶ä¸­çš„å®çº¿ä»£è¡¨ç›¸åŠ çš„äºŒè€…å½¢çŠ¶å’Œç»´åº¦ç›¸åŒï¼Œå³æ®‹å·®å—çš„è¾“å…¥channelå’Œè¾“å‡ºçš„channelç›¸åŒï¼› è™šçº¿è¡¨ç¤ºæ®‹å·®å—çš„è¾“å…¥channelå’Œè¾“å‡ºchannelä¸åŒã€‚å› ä¸ºè™šçº¿å—é¦–å…ˆè¦è¿›è¡Œä¸€ä¸ªç»´åº¦å˜åŒ–ï¼Œå¯¼è‡´inputå’Œshoutcutçš„ç»´åº¦ä¸åŒï¼Œå› æ­¤éœ€è¦ä¸€ä¸ª$kernel\\ size=1\\times1 \\, ,stride = 2$çš„å·ç§¯å±‚æ¥ç¼©å‡çŸ©é˜µå½¢çŠ¶ï¼Œå¹¶ä¸”æ”¹å˜é€šé“æ•°æ¥ä¿è¯å½¢çŠ¶å’Œç»´åº¦ç›¸åŒã€‚ ä¸€èˆ¬åœ¨è¿­ä»£çš„æ—¶å€™ï¼Œå°†è™šçº¿å±‚æ”¾åœ¨æ¯æ¬¡è¿­ä»£çš„ç¬¬ä¸€å±‚æ¥æ”¹å˜å®½åº¦å’Œç»´åº¦ï¼Œç¬¬äºŒå±‚ä»¥åéƒ½ä¸ºå®çº¿å±‚ï¼Œä¸»è¦æ˜¯ç”¨æ¥å°†è¿­ä»£ï¼Œä¸æ”¹å˜ä»»ä½•å‚è·¨åº¦å’Œç»´åº¦ã€‚ åŒç†ï¼Œå¦ä¸€ä¸ªå·ç§¯çš„ç»“æ„ä¹Ÿé€‚ç”¨ã€‚ æ³¨æ„åŸè®ºæ–‡ä¸­ï¼Œå³ä¾§è™šçº¿æ®‹å·®ç»“æ„çš„ä¸»åˆ†æ”¯ä¸Šï¼Œç¬¬ä¸€ä¸ª1x1å·ç§¯å±‚çš„æ­¥è·æ˜¯$stride=2$ï¼Œç¬¬äºŒä¸ª3x3å·ç§¯å±‚æ­¥è·æ˜¯$stride=1$ã€‚ ä½†åœ¨pytorchå®˜æ–¹å®ç°è¿‡ç¨‹ä¸­æ˜¯ç¬¬ä¸€ä¸ª1x1å·ç§¯å±‚çš„æ­¥è·æ˜¯$stride=1$ï¼Œç¬¬äºŒä¸ª3x3å·ç§¯å±‚æ­¥è·æ˜¯$stride=2$ï¼Œè¿™æ ·èƒ½å¤Ÿåœ¨ImageNetçš„top1ä¸Šæå‡å¤§æ¦‚0.5%çš„å‡†ç¡®ç‡ã€‚è¯¦ç»†å¯å‚è€ƒResnet v1.5 ç»¼ä¸Šï¼Œæˆ‘ä»¬çš„æ®‹å·®å—çš„ä¸»è¦çš„åŠŸèƒ½æ˜¯é™ç»´ç¼©å‡ä¸ºåŸæ¥çš„ä¸€åŠï¼Œä¹‹åå°†é€šé“æ•°å˜ä¸ºåŸæ¥çš„ä¸¤å€ã€‚ Batch Normalizationè¯¦è§£ Batch Normalizationæ˜¯googleå›¢é˜Ÿåœ¨2015å¹´è®ºæ–‡ã€ŠBatch Normalization: Accelerating Deep Network Training by Reducing Internal Covariate Shiftã€‹æå‡ºçš„ã€‚é€šè¿‡è¯¥æ–¹æ³•èƒ½å¤ŸåŠ é€Ÿç½‘ç»œçš„æ”¶æ•›å¹¶æå‡å‡†ç¡®ç‡ã€‚ Batch Normalization çš„ç›®çš„æ˜¯ä½¿å¾—æˆ‘ä»¬ä¸€æ‰¹(Batch)çš„feature mapæ»¡è¶³å‡å€¼ä¸º0ï¼Œæ–¹å·®ä¸º1çš„è§„å¾‹ã€‚ Batch NormalizationåŸç† æˆ‘ä»¬åœ¨å›¾åƒé¢„å¤„ç†è¿‡ç¨‹ä¸­é€šå¸¸ä¼šå¯¹å›¾åƒè¿›è¡Œæ ‡å‡†åŒ–å¤„ç†ï¼Œè¿™æ ·èƒ½å¤ŸåŠ é€Ÿç½‘ç»œçš„æ”¶æ•›ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ å¯¹äºConv1æ¥è¯´è¾“å…¥çš„å°±æ˜¯æ»¡è¶³æŸä¸€åˆ†å¸ƒçš„ç‰¹å¾çŸ©é˜µï¼Œä½†å¯¹äºConv2è€Œè¨€è¾“å…¥çš„feature mapå°±ä¸ä¸€å®šæ»¡è¶³æŸä¸€åˆ†å¸ƒè§„å¾‹äº†ï¼ˆæ³¨æ„è¿™é‡Œæ‰€è¯´æ»¡è¶³æŸä¸€åˆ†å¸ƒè§„å¾‹å¹¶ä¸æ˜¯æŒ‡æŸä¸€ä¸ªfeature mapçš„æ•°æ®è¦æ»¡è¶³åˆ†å¸ƒè§„å¾‹ï¼Œç†è®ºä¸Šæ˜¯æŒ‡æ•´ä¸ªè®­ç»ƒæ ·æœ¬é›†æ‰€å¯¹åº”feature mapçš„æ•°æ®è¦æ»¡è¶³åˆ†å¸ƒè§„å¾‹ï¼‰ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå·ç§¯Conv1è¾“å…¥ä»¥å‰çš„æ»¡è¶³å½’ä¸€åŒ–ï¼Œè¾“å‡ºåä¸ä¸€å®šè¿˜æ»¡è¶³ä¹‹å‰è¾“å…¥çš„å½’ä¸€åŒ–ã€‚åŒæ—¶æ•°æ®çš„Normalizationæ˜¯é’ˆå¯¹feature mapçš„æ¯ä¸€ä¸ªç»´åº¦åœ¨æ•´ä¸ªè®­ç»ƒé›†ä¸Šçš„æ•°æ®è¿›è¡Œçš„ã€‚ Batch Normalizationçš„ç›®çš„å°±æ˜¯ä½¿æˆ‘ä»¬çš„feature mapæ»¡è¶³å‡å€¼ä¸º0ï¼Œæ–¹å·®ä¸º1çš„åˆ†å¸ƒè§„å¾‹ã€‚ â€œå¯¹äºä¸€ä¸ªæ‹¥æœ‰dç»´çš„è¾“å…¥xï¼Œæˆ‘ä»¬å°†å¯¹å®ƒçš„æ¯ä¸€ä¸ªç»´åº¦è¿›è¡Œæ ‡å‡†åŒ–å¤„ç†ã€‚â€ å‡è®¾æˆ‘ä»¬è¾“å…¥çš„xæ˜¯RGBä¸‰é€šé“çš„å½©è‰²å›¾åƒï¼Œé‚£ä¹ˆè¿™é‡Œçš„då°±æ˜¯è¾“å…¥å›¾åƒçš„channelså³d=3ï¼Œ$x^{(1)}$ä»£è¡¨çš„æ˜¯å›¾ç‰‡Ré€šé“çš„ç‰¹å¾çŸ©é˜µï¼Œä¾æ¬¡ç±»æ¨åˆ†åˆ«æ˜¯Gé€šé“å’ŒBé€šé“çš„ã€‚ x = (x^{(1)}, x^{(2)}, x^{(3)}) æ ‡å‡†åŒ–å¤„ç†ä¹Ÿå°±æ˜¯åˆ†åˆ«å¯¹æˆ‘ä»¬çš„Ré€šé“ï¼ŒGé€šé“ï¼ŒBé€šé“è¿›è¡Œå¤„ç†ã€‚ä¸Šé¢çš„å…¬å¼ä¸ç”¨çœ‹ï¼ŒåŸæ–‡æä¾›äº†æ›´åŠ è¯¦ç»†çš„è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š ç”±äºNormalizationåå½’ä¸€åŒ–æˆ[0,1]å¹¶éæ˜¯æœ€å¥½çš„ç»“æœï¼Œå› æ­¤è¿™é‡Œé€‰æ‹©äº†å¼•å…¥$\\gamma;\\beta$ä¸¤ä¸ªè¶…å‚æ•°ä¸€ä¸ªæ˜¯ è®©feature mapæ»¡è¶³æŸä¸€åˆ†å¸ƒè§„å¾‹ï¼Œç†è®ºä¸Šæ˜¯æŒ‡æ•´ä¸ªè®­ç»ƒæ ·æœ¬é›†æ‰€å¯¹åº”feature mapçš„æ•°æ®è¦æ»¡è¶³åˆ†å¸ƒè§„å¾‹ï¼Œä¹Ÿå°±æ˜¯è¯´è¦è®¡ç®—å‡ºæ•´ä¸ªè®­ç»ƒé›†çš„feature mapç„¶ååœ¨è¿›è¡Œæ ‡å‡†åŒ–å¤„ç†ï¼Œå¯¹äºä¸€ä¸ªå¤§å‹çš„æ•°æ®é›†æ˜æ˜¾æ˜¯ä¸å¯èƒ½çš„ï¼Œæ‰€ä»¥è®ºæ–‡ä¸­è¯´çš„æ˜¯Batch Normalizationï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è®¡ç®—ä¸€ä¸ªBatchæ•°æ®çš„feature mapç„¶ååœ¨è¿›è¡Œæ ‡å‡†åŒ–ï¼ˆbatchè¶Šå¤§è¶Šæ¥è¿‘æ•´ä¸ªæ•°æ®é›†çš„åˆ†å¸ƒï¼Œæ•ˆæœè¶Šå¥½ï¼‰ã€‚ ä½¿ç”¨BNæ—¶éœ€è¦æ³¨æ„çš„é—®é¢˜ï¼ˆ1ï¼‰è®­ç»ƒæ—¶è¦å°†traningå‚æ•°è®¾ç½®ä¸ºTrueï¼Œåœ¨éªŒè¯æ—¶å°†trainningå‚æ•°è®¾ç½®ä¸ºFalseã€‚åœ¨pytorchä¸­å¯é€šè¿‡åˆ›å»ºæ¨¡å‹çš„model.train()å’Œmodel.eval()æ–¹æ³•æ§åˆ¶ã€‚ ï¼ˆ2ï¼‰batch sizeå°½å¯èƒ½è®¾ç½®å¤§ç‚¹ï¼Œè®¾ç½®å°åè¡¨ç°å¯èƒ½å¾ˆç³Ÿç³•ï¼Œè®¾ç½®çš„è¶Šå¤§æ±‚çš„å‡å€¼å’Œæ–¹å·®è¶Šæ¥è¿‘æ•´ä¸ªè®­ç»ƒé›†çš„å‡å€¼å’Œæ–¹å·®ã€‚ ï¼ˆ3ï¼‰å»ºè®®å°†BNå±‚æ”¾åœ¨å·ç§¯å±‚ï¼ˆConvï¼‰å’Œæ¿€æ´»å±‚ï¼ˆä¾‹å¦‚Reluï¼‰ä¹‹é—´ï¼Œä¸”å·ç§¯å±‚ä¸è¦ä½¿ç”¨åç½®biasï¼Œå› ä¸ºæ²¡æœ‰ç”¨ï¼Œå‚è€ƒä¸‹å›¾æ¨ç†ï¼Œå³ä½¿ä½¿ç”¨äº†åç½®biasæ±‚å‡ºçš„ç»“æœä¹Ÿæ˜¯ä¸€æ ·çš„. æ€»ç»“å¦‚ä¸‹ è¿ç§»å­¦ä¹ è¿ç§»å­¦ä¹ çš„ä¼˜åŠ¿ èƒ½å¤Ÿå¿«é€Ÿè®­ç»ƒå‡ºä¸€ä¸ªç†æƒ³çš„ç»“æœã€‚ å½“æ•°æ®é›†è¾ƒå°‘æ—¶ä¹Ÿèƒ½è®­ç»ƒå‡ºç†æƒ³çš„æ•ˆæœã€‚ä¼ ç»Ÿæƒ…å†µä¸‹ï¼Œç½‘ç»œè¶Šæ·±ï¼Œæ•°æ®è¶Šå°‘ï¼Œè¶Šå®¹æ˜“é€ æˆè¿‡æ‹Ÿåˆã€‚ è¿ç§»å­¦ä¹ å¯ä»¥å°†åˆ«äººé¢„è®­ç»ƒå¥½çš„æ¨¡å‹æ‹¿æ¥ä½¿ç”¨ï¼Œå¤§å¤§çš„åŠ é€Ÿè®­ç»ƒçš„è¿‡ç¨‹ã€‚ æ³¨æ„ï¼šåœ¨ä½¿ç”¨åˆ«äººçš„é¢„è®­ç»ƒæ¨¡å‹å‚æ•°æ—¶ï¼Œè¦æ³¨æ„åˆ«äººçš„é¢„å¤„ç†æ–¹å¼ã€‚è‡ªå·±çš„é¢„å¤„ç†çš„æ–¹å¼è¦ä¸é¢„è®­ç»ƒæ¨¡å‹çš„ç›¸åŒã€‚ æµ…å±‚ç½‘ç»œçš„å­¦ä¹ åˆ°çš„ä¿¡æ¯å…·æœ‰é€šç”¨æ€§ï¼Œå¯ä»¥ç›´æ¥è¿ç§»åˆ°æ¯”è¾ƒå¤æ‚çš„ç½‘ç»œä¸­ä½¿ç”¨ï¼Œå¤§å¤§å‡å°çš„è®­ç»ƒçš„æ—¶é—´ã€‚ è¿ç§»å­¦ä¹ çš„ä¸»è¦ç›®çš„æ˜¯ï¼Œå°†é¢„è®­ç»ƒå¥½çš„æµ…å±‚ç½‘ç»œçš„é€šç”¨çš„è¯†åˆ«ä¿¡æ¯è¿ç§»åˆ°æˆ‘ä»¬çš„è¦è®­ç»ƒçš„æ¨¡å‹é‡Œå»ï¼Œä½¿å¾—æ–°çš„ç½‘ç»œä¹Ÿæ‹¥æœ‰è¯†åˆ«åº•å±‚é€šç”¨ç‰¹å¾å¾—èƒ½åŠ›ã€‚ å¸¸è§çš„è¿ç§»å­¦ä¹ æ–¹å¼ï¼š1ï¼è½½å…¥æƒé‡åè®­ç»ƒæ‰€æœ‰å‚æ•°ï¼›2ï¼è½½å…¥æƒé‡ååªè®­ç»ƒæœ€åå‡ å±‚å‚æ•°ï¼›3ï¼è½½å…¥æƒé‡ååœ¨åŸç½‘ç»œåŸºç¡€ä¸Šå†æ·»åŠ ä¸€å±‚å…¨è¿æ¥å±‚ï¼Œä»…è®­ç»ƒæœ€åä¸€ä¸ªå…¨è¿æ¥å±‚(ç”±äºæˆ‘ä»¬æœ€åçš„ä¸€å±‚è¾“å‡ºçš„ç»“ç‚¹æ•°å’Œç±»åˆ«æ•°å¯èƒ½ä¸ç­‰äºï¼Œå› æ­¤æœ€ååŠ ä¸€å±‚)ã€‚ ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç¬¬ä¸€ç§æ–¹æ³•çš„æ•ˆæœæ˜¯æœ€å¥½çš„ï¼Œä½†ç›¸æ¯”ç¬¬äºŒå’Œç¬¬ä¸‰ç§æ–¹æ³•ï¼Œéœ€è¦çš„è¿ç®—èµ„æºè¾ƒé•¿ã€èŠ±è´¹çš„æ—¶é—´ä¹Ÿè¾ƒé•¿ã€‚ Resnetçš„pytorchå®ç°æ¨¡å‹æ­å»ºåŸºæœ¬éª¨æ¶çš„æ­å»º18å’Œ34å±‚ç»“æ„ä¸Šçš„ä¸»åˆ†æ”¯æ“æ®‹å·®ç»“æ„çš„ä¸¤å±‚å·ç§¯ç½‘ç»œæ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œ50ã€101ã€152å±‚çš„æ®‹å·®ç»“æ„ä¸­çš„ä¸‰ä¸ªå·ç§¯ç½‘ç»œéƒ½ä¸åŒã€‚ è¿™é‡Œç°ä»åŸºæœ¬çš„18å±‚å’Œ34å±‚çš„ç½‘ç»œå¼€å§‹æ­å»ºã€‚ 1234567891011121314151617181920212223242526272829class BasicBlock(nn.Module): expansion = 1 # é€šé“æ•°çš„å˜åŒ–ï¼Œè¾“å‡ºæ˜¯è¾“å…¥çš„å‡ å€ def __init__(self, in_channel, out_channel, stride=1, downsample=None, **kwargs): super(BasicBlock, self).__init__() self.conv1 = nn.Conv2d(in_channels=in_channel, out_channels=out_channel, kernel_size=3, stride=stride, padding=1, bias=False) self.bn1 = nn.BatchNorm2d(out_channel) self.relu = nn.ReLU() self.conv2 = nn.Conv2d(in_channels=out_channel, out_channels=out_channel, kernel_size=3, stride=1, padding=1, bias=False) self.bn2 = nn.BatchNorm2d(out_channel) self.downsample = downsample def forward(self, x): identity = x if self.downsample is not None: identity = self.downsample(x) out = self.conv1(x) out = self.bn1(out) out = self.relu(out) out = self.conv2(out) out = self.bn2(out) out += identity out = self.relu(out) return out downsampleçš„ä½œç”¨æ˜¯åŒºåˆ†ç»“æœæ˜¯å¦ä¸ºè™šçº¿ä¸Šçš„çš„æ®‹å·®ç»“æ„ã€‚ out_channelä¸ºä¸»åˆ†æ”¯ä¸Šçš„é€šé“æ•°ã€‚ bias=Falseä½¿ç”¨BNå±‚æ—¶ï¼Œåç½®æ˜¯ä¸éœ€è¦çš„ï¼Œè®¾ä¸ºFalse. expansionè¾“å‡ºæ˜¯è¾“å…¥çš„å‡ å€çš„å‚æ•°ã€‚ ä»¥ä¸‹æ˜¯50å±‚ã€101å±‚å’Œ152å±‚ç½‘ç»œçš„æ­å»ºï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849class Bottleneck(nn.Module): &quot;&quot;&quot; æ³¨æ„ï¼šåŸè®ºæ–‡ä¸­ï¼Œåœ¨è™šçº¿æ®‹å·®ç»“æ„çš„ä¸»åˆ†æ”¯ä¸Šï¼Œç¬¬ä¸€ä¸ª1x1å·ç§¯å±‚çš„æ­¥è·æ˜¯2ï¼Œç¬¬äºŒä¸ª3x3å·ç§¯å±‚æ­¥è·æ˜¯1ã€‚ ä½†åœ¨pytorchå®˜æ–¹å®ç°è¿‡ç¨‹ä¸­æ˜¯ç¬¬ä¸€ä¸ª1x1å·ç§¯å±‚çš„æ­¥è·æ˜¯1ï¼Œç¬¬äºŒä¸ª3x3å·ç§¯å±‚æ­¥è·æ˜¯2ï¼Œ è¿™ä¹ˆåšçš„å¥½å¤„æ˜¯èƒ½å¤Ÿåœ¨top1ä¸Šæå‡å¤§æ¦‚0.5%çš„å‡†ç¡®ç‡ã€‚ å¯å‚è€ƒResnet v1.5 https://ngc.nvidia.com/catalog/model-scripts/nvidia:resnet_50_v1_5_for_pytorch &quot;&quot;&quot; expansion = 4 def __init__(self, in_channel, out_channel, stride=1, downsample=None, groups=1, width_per_group=64): super(Bottleneck, self).__init__() width = int(out_channel * (width_per_group / 64.)) * groups self.conv1 = nn.Conv2d(in_channels=in_channel, out_channels=width, kernel_size=1, stride=1, bias=False) # squeeze channels self.bn1 = nn.BatchNorm2d(width) # ----------------------------------------- self.conv2 = nn.Conv2d(in_channels=width, out_channels=width, groups=groups, kernel_size=3, stride=stride, bias=False, padding=1) self.bn2 = nn.BatchNorm2d(width) # ----------------------------------------- self.conv3 = nn.Conv2d(in_channels=width, out_channels=out_channel * self.expansion, kernel_size=1, stride=1, bias=False) # unsqueeze channels self.bn3 = nn.BatchNorm2d(out_channel * self.expansion) self.relu = nn.ReLU(inplace=True) self.downsample = downsample def forward(self, x): identity = x if self.downsample is not None: identity = self.downsample(x) out = self.conv1(x) out = self.bn1(out) out = self.relu(out) out = self.conv2(out) out = self.bn2(out) out = self.relu(out) out = self.conv3(out) out = self.bn3(out) out += identity out = self.relu(out) return out ResNetåŸºæœ¬æ¡†æ¶1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071class ResNet(nn.Module): def __init__(self, block, blocks_num, groups=1, num_classes=1000, include_top=True, width_per_group=64): super(ResNet, self).__init__() self.include_top = include_top self.in_channel = 64 self.groups = groups self.width_per_group = width_per_group self.conv1 = nn.Conv2d(3, self.in_channel, kernel_size=7, stride=2, padding=3, bias=False) self.bn1 = nn.BatchNorm2d(self.in_channel) self.relu = nn.ReLU(inplace=True) self.maxpool = nn.MaxPool2d(kernel_size=3, stride=2, padding=1) self.layer1 = self._make_layer(block, 64, blocks_num[0]) self.layer2 = self._make_layer(block, 128, blocks_num[1], stride=2) self.layer3 = self._make_layer(block, 256, blocks_num[2], stride=2) self.layer4 = self._make_layer(block, 512, blocks_num[3], stride=2) if self.include_top: self.avgpool = nn.AdaptiveAvgPool2d((1, 1)) # output size = (1, 1) self.fc = nn.Linear(512 * block.expansion, num_classes) for m in self.modules(): if isinstance(m, nn.Conv2d): nn.init.kaiming_normal_(m.weight, mode='fan_out', nonlinearity='relu') def _make_layer(self, block, channel, block_num, stride=1): downsample = None if stride != 1 or self.in_channel != channel * block.expansion: downsample = nn.Sequential( nn.Conv2d(self.in_channel, channel * block.expansion, kernel_size=1, stride=stride, bias=False), nn.BatchNorm2d(channel * block.expansion)) layers = [] layers.append(block(self.in_channel, channel, downsample=downsample, stride=stride, groups=self.groups, width_per_group=self.width_per_group)) self.in_channel = channel * block.expansion for _ in range(1, block_num): layers.append(block(self.in_channel, channel, groups=self.groups, width_per_group=self.width_per_group)) return nn.Sequential(*layers) def forward(self, x): x = self.conv1(x) x = self.bn1(x) x = self.relu(x) x = self.maxpool(x) x = self.layer1(x) x = self.layer2(x) x = self.layer3(x) x = self.layer4(x) if self.include_top: # include_topçš„ä¸»è¦çš„ä½œç”¨æ˜¯å¯¹äºéœ€è¦åœ¨ResNetåŸºç¡€ä¸Šåšæ‰©å±•çš„ç½‘ç»œï¼Œåˆ™è¦å°† # include_topè®¾ç½®ä¸ºFalse x = self.avgpool(x) x = torch.flatten(x, 1) x = self.fc(x) return x _make_layer(self, block, channel, block_num, stride=1): è¾“å…¥ä¸ºblock(åŸºæœ¬éª¨æ¶)ï¼Œchannel(è¾“å…¥é€šé“æ•°)ï¼Œblock_num(åŸºæœ¬éª¨æ¶å¾ªç¯çš„å±‚æ•°) if stride != 1 or self.in_channel != channel $\\times$ block.expansion: æ­¤å¤„çš„åˆ¤æ–­é€»è¾‘æ˜¯stride!=1(æœ‰H,Wçš„æ”¹å˜)æˆ–è€…è¾“å…¥ç»´åº¦ä¸è¾“å‡ºç»´åº¦ä¸ç›¸ç­‰(ä¸æ»¡è¶³in_channel = channel $\\times$ block.expansionå°±ä»£è¡¨ä¸æ˜¯ç¬¬ä¸€å±‚)ï¼Œå¯¹äºæ¯ä¸€ä¸ªæ®‹å·®ç»“æ„çš„ç¬¬ä¸€ä¸ªæ¥è¯´ï¼Œå…¶æ”¹å˜çš„å®½åº¦å’Œæ·±åº¦ï¼Œå› æ­¤è¦ç”¨è€ƒè™‘è™šçº¿è¿æ¥ã€‚ä¹‹åï¼Œå‡ å±‚ä¸ºä¸€èˆ¬çš„å®çº¿çš„ç»“æ„ï¼Œä¸éœ€è¦ifåˆ†æ”¯è®¾è®¡è™šçº¿å±‚ã€‚ è®¾è®¡å †å çš„å®çº¿çš„æ®‹å·®å±‚ã€‚ç¬¬ä¸€å±‚ä¸ºå®çº¿ï¼Œåå‡ å±‚éƒ½ä¸ºå®çº¿ã€‚ 12345for _ in range(1, block_num): layers.append(block(self.in_channel, channel, groups=self.groups, width_per_group=self.width_per_group)) nn.Sequential(\\layers)* è¿”å›å€¼ä¸ºéå…³é”®å­—å‚æ•°ã€‚ ç¬¬ä¸€ä¸ªæ®‹å·®å±‚ä¸æ”¹å˜[H,W]ï¼Œå› æ­¤strideè®¾è®¡ä¸º1. 12345self.layer1 = self._make_layer(block, 64, blocks_num[0]) # ç¬¬ä¸€ä¸ªæ®‹å·®å±‚ä¸æ”¹å˜[H,W]ï¼Œå› æ­¤strideè®¾è®¡ä¸º1 self.layer2 = self._make_layer(block, 128, blocks_num[1], stride=2) self.layer3 = self._make_layer(block, 256, blocks_num[2], stride=2) self.layer4 = self._make_layer(block, 512, blocks_num[3], stride=2) 1234567891011121314151617181920212223242526272829303132333435def resnet34(num_classes=1000, include_top=True): # https://download.pytorch.org/models/resnet34-333f7ec4.pth return ResNet(BasicBlock, [3, 4, 6, 3], num_classes=num_classes, include_top=include_top)def resnet50(num_classes=1000, include_top=True): # https://download.pytorch.org/models/resnet50-19c8e357.pth return ResNet(Bottleneck, [3, 4, 6, 3], num_classes=num_classes, include_top=include_top)def resnet101(num_classes=1000, include_top=True): # https://download.pytorch.org/models/resnet101-5d3b4d8f.pth return ResNet(Bottleneck, [3, 4, 23, 3], num_classes=num_classes, include_top=include_top)def resnext50_32x4d(num_classes=1000, include_top=True): # https://download.pytorch.org/models/resnext50_32x4d-7cdf4587.pth groups = 32 width_per_group = 4 return ResNet(Bottleneck, [3, 4, 6, 3], num_classes=num_classes, include_top=include_top, groups=groups, width_per_group=width_per_group)def resnext101_32x8d(num_classes=1000, include_top=True): # https://download.pytorch.org/models/resnext101_32x8d-8ba56ff5.pth groups = 32 width_per_group = 8 return ResNet(Bottleneck, [3, 4, 23, 3], num_classes=num_classes, include_top=include_top, groups=groups, width_per_group=width_per_group) å®šä¹‰ä¸åŒç±»å‹çš„ç½‘ç»œã€‚ æ¨¡å‹è®­ç»ƒè¿ç§»å­¦ä¹ 1import torchvision.models.resnet ctrl+å·¦é”®è¿›å…¥åå¯ä»¥ç›´æ¥çœ‹æºç ã€‚å¯ä»¥ä¸‹è½½é¢„è®­ç»ƒå‚æ•°è¿›è¡Œçš„å‰è¿ç§»å­¦ä¹ ï¼Œç½‘å€å¦‚ä¸‹ï¼š 1234567891011model_urls = { 'resnet18': 'https://download.pytorch.org/models/resnet18-5c106cde.pth', 'resnet34': 'https://download.pytorch.org/models/resnet34-333f7ec4.pth', 'resnet50': 'https://download.pytorch.org/models/resnet50-19c8e357.pth', 'resnet101': 'https://download.pytorch.org/models/resnet101-5d3b4d8f.pth', 'resnet152': 'https://download.pytorch.org/models/resnet152-b121ed2d.pth', 'resnext50_32x4d': 'https://download.pytorch.org/models/resnext50_32x4d-7cdf4587.pth', 'resnext101_32x8d': 'https://download.pytorch.org/models/resnext101_32x8d-8ba56ff5.pth', 'wide_resnet50_2': 'https://download.pytorch.org/models/wide_resnet50_2-95faca4d.pth', 'wide_resnet101_2': 'https://download.pytorch.org/models/wide_resnet101_2-32ee1156.pth',} æ•°æ®å¢å¼ºå¤„ç†123456789data_transform = { &quot;train&quot;: transforms.Compose([transforms.RandomResizedCrop(224), transforms.RandomHorizontalFlip(), transforms.ToTensor(), transforms.Normalize([0.485, 0.456, 0.406], [0.229, 0.224, 0.225])]), &quot;val&quot;: transforms.Compose([transforms.Resize(256), transforms.CenterCrop(224), transforms.ToTensor(), transforms.Normalize([0.485, 0.456, 0.406], [0.229, 0.224, 0.225])])} è½½å…¥é¢„è®­ç»ƒæ¨¡å‹çš„æ–¹æ³•12345678910111213net = resnet34()# load pretrain weights# download url: https://download.pytorch.org/models/resnet34-333f7ec4.pthmodel_weight_path = &quot;./resnet34-pre.pth&quot;assert os.path.exists(model_weight_path), &quot;file {} does not exist.&quot;.format(model_weight_path)net.load_state_dict(torch.load(model_weight_path, map_location=device))# for param in net.parameters():# param.requires_grad = False# change fc layer structurein_channel = net.fc.in_featuresnet.fc = nn.Linear(in_channel, 5)net.to(device) é¦–å…ˆï¼Œå®šä¹‰ç½‘ç»œnet = resnet34(); ä¹‹åï¼Œå¯¼å…¥é¢„è®­ç»ƒçš„æ•°æ®é›† 12model_weight_path = &quot;./resnet34-pre.pth&quot;net.load_state_dict(torch.load(model_weight_path, map_location=device)) æœ€åï¼Œæ”¹å˜æ¨¡å‹æœ€åä¸€å±‚ç»“æ„ã€‚ 1234# change fc layer structurein_channel = net.fc.in_featuresnet.fc = nn.Linear(in_channel, 5)net.to(device) ä¹Ÿå¯ä»¥å…ˆè½½å…¥åˆ°å†…å­˜é‡Œé¢ï¼Œä¹‹åå°†å…¨è¿æ¥å±‚åˆ å»ï¼Œå°†å…¶è½½å…¥åˆ°æ¨¡å‹ä¸­å»ã€‚ 12torch.load(model_weight_path, map_location=device)# è½½å…¥åˆ°å†…å­˜ å…¶ä½™çš„éƒ¨åˆ†è·Ÿä¹‹å‰ä¸€æ · 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132import osimport jsonimport torchimport torch.nn as nnimport torch.optim as optimfrom torchvision import transforms, datasetsfrom tqdm import tqdmfrom model import resnet34def main(): device = torch.device(&quot;cuda:0&quot; if torch.cuda.is_available() else &quot;cpu&quot;) print(&quot;using {} device.&quot;.format(device)) data_transform = { &quot;train&quot;: transforms.Compose([transforms.RandomResizedCrop(224), transforms.RandomHorizontalFlip(), transforms.ToTensor(), transforms.Normalize([0.485, 0.456, 0.406], [0.229, 0.224, 0.225])]), &quot;val&quot;: transforms.Compose([transforms.Resize(256), transforms.CenterCrop(224), transforms.ToTensor(), transforms.Normalize([0.485, 0.456, 0.406], [0.229, 0.224, 0.225])])} data_root = os.path.abspath(os.path.join(os.getcwd(), &quot;../..&quot;)) # get data root path image_path = os.path.join(data_root, &quot;data_set&quot;, &quot;flower_data&quot;) # flower data set path assert os.path.exists(image_path), &quot;{} path does not exist.&quot;.format(image_path) train_dataset = datasets.ImageFolder(root=os.path.join(image_path, &quot;train&quot;), transform=data_transform[&quot;train&quot;]) train_num = len(train_dataset) # {'daisy':0, 'dandelion':1, 'roses':2, 'sunflower':3, 'tulips':4} flower_list = train_dataset.class_to_idx cla_dict = dict((val, key) for key, val in flower_list.items()) # write dict into json file json_str = json.dumps(cla_dict, indent=4) with open('class_indices.json', 'w') as json_file: json_file.write(json_str) batch_size = 16 nw = min([os.cpu_count(), batch_size if batch_size &gt; 1 else 0, 8]) # number of workers print('Using {} dataloader workers every process'.format(nw)) train_loader = torch.utils.data.DataLoader(train_dataset, batch_size=batch_size, shuffle=True, num_workers=nw) validate_dataset = datasets.ImageFolder(root=os.path.join(image_path, &quot;val&quot;), transform=data_transform[&quot;val&quot;]) val_num = len(validate_dataset) validate_loader = torch.utils.data.DataLoader(validate_dataset, batch_size=batch_size, shuffle=False, num_workers=nw) print(&quot;using {} images for training, {} images for validation.&quot;.format(train_num, val_num)) net = resnet34() # load pretrain weights # download url: https://download.pytorch.org/models/resnet34-333f7ec4.pth model_weight_path = &quot;./resnet34-pre.pth&quot; assert os.path.exists(model_weight_path), &quot;file {} does not exist.&quot;.format(model_weight_path) net.load_state_dict(torch.load(model_weight_path, map_location=device)) # for param in net.parameters(): # param.requires_grad = False # change fc layer structure in_channel = net.fc.in_features net.fc = nn.Linear(in_channel, 5) net.to(device) # define loss function loss_function = nn.CrossEntropyLoss() # construct an optimizer params = [p for p in net.parameters() if p.requires_grad] optimizer = optim.Adam(params, lr=0.0001) epochs = 3 best_acc = 0.0 save_path = './resNet34.pth' train_steps = len(train_loader) for epoch in range(epochs): # train net.train() running_loss = 0.0 train_bar = tqdm(train_loader) for step, data in enumerate(train_bar): images, labels = data optimizer.zero_grad() logits = net(images.to(device)) loss = loss_function(logits, labels.to(device)) loss.backward() optimizer.step() # print statistics running_loss += loss.item() train_bar.desc = &quot;train epoch[{}/{}] loss:{:.3f}&quot;.format(epoch + 1, epochs, loss) # validate net.eval() acc = 0.0 # accumulate accurate number / epoch with torch.no_grad(): val_bar = tqdm(validate_loader) for val_data in val_bar: val_images, val_labels = val_data outputs = net(val_images.to(device)) # loss = loss_function(outputs, test_labels) predict_y = torch.max(outputs, dim=1)[1] acc += torch.eq(predict_y, val_labels.to(device)).sum().item() val_bar.desc = &quot;valid epoch[{}/{}]&quot;.format(epoch + 1, epochs) val_accurate = acc / val_num print('[epoch %d] train_loss: %.3f val_accuracy: %.3f' % (epoch + 1, running_loss / train_steps, val_accurate)) if val_accurate &gt; best_acc: best_acc = val_accurate torch.save(net.state_dict(), save_path) print('Finished Training')if __name__ == '__main__': main() è§†é¢‘å‚è€ƒ","link":"/2022/02/03/%E5%9B%BE%E5%83%8F%E5%88%86%E7%B1%BB%E7%BD%91%E7%BB%9C%E5%8F%8APytorch%E5%AE%9E%E7%8E%B0/ResNet%E7%BD%91%E7%BB%9C%E8%AF%A6%E8%A7%A3%E4%B8%8EPytorch%E5%AE%9E%E7%8E%B0/"},{"title":"VGGç½‘ç»œè¯¦è§£ä¸Pytorchå®ç°","text":"hljs.initHighlightingOnLoad(); VGGç½‘ç»œè¯¦è§£ç®€è¿°VGGåœ¨2014å¹´ç”±ç‰›æ´¥å¤§å­¦è‘—åç ”ç©¶ç»„VGG (Visual GeometryGroup)æå‡ºï¼Œæ–©è·è¯¥å¹´ImageNetç«èµ›ä¸­Localization Task (å®šä½ä»»åŠ¡)ç¬¬ä¸€åå’ŒClassification Task (åˆ†ç±»ä»»åŠ¡)ç¬¬äºŒåã€‚æœ¬æ–‡ä»æ¨¡å‹çš„æ­å»ºä¸pytorchçš„å®ç°è¿›è¡Œå…·ä½“çš„ä»‹ç»ã€‚ VGGç½‘ç»œçš„å‡ ç§é…ç½® ä¸€èˆ¬ä½¿ç”¨çš„æ—¶å€™ï¼Œå¤šç”¨Dç½‘ç»œã€‚ ç½‘ç»œä¸­çš„äº®ç‚¹: é€šè¿‡å †å å¤šä¸ª3x3çš„å·ç§¯æ ¸æ¥æ›¿ä»£å¤§å°ºåº¦å·ç§¯æ ¸â€”â€”(å‡å°‘æ‰€éœ€å‚æ•°) è®ºæ–‡ä¸­æåˆ°ï¼Œå¯ä»¥é€šè¿‡å †å ä¸¤ä¸ª3x3çš„å·ç§¯æ ¸æ›¿ä»£5x5çš„å·ç§¯æ ¸ï¼Œå †å ä¸‰ä¸ª3x3çš„å·ç§¯æ ¸æ›¿ä»£7x7çš„å·ç§¯æ ¸ï¼Œä»£æ›¿åæ‹¥æœ‰ç›¸åŒçš„æ„Ÿå—é‡ã€‚ CNNçš„æ„Ÿå—é‡åœ¨å·ç§¯ç¥ç»ç½‘ç»œä¸­ï¼Œå†³å®šæŸä¸€å±‚è¾“å‡ºç»“æœä¸­ä¸€ä¸ªå…ƒç´ æ‰€å¯¹åº”çš„è¾“å…¥å±‚çš„åŒºåŸŸå¤§å°ï¼Œè¢«ç§°ä½œæ„Ÿå—é‡(receptive field)ã€‚é€šä¿—çš„è§£é‡Šæ˜¯ï¼Œè¾“å‡ºfeature mapä¸Šçš„ä¸€ä¸ªå•å…ƒå¯¹åº”è¾“å…¥å±‚ä¸Šçš„åŒºåŸŸå¤§å°ã€‚ æ„Ÿå—é‡çš„è®¡ç®—å…¬å¼ï¼š F(i)=(F(i+1)-1)\\times Stride+K_{size} $F(i)$ä¸ºç¬¬iå±‚æ„Ÿå—é‡ï¼Œ$Stride$ä¸ºç¬¬iå±‚çš„æ­¥è·ï¼Œ$K_{size}$ä¸ºå·ç§¯æ ¸æˆ–é‡‡æ ·æ ¸å°ºå¯¸ã€‚ Pool1ï¼šSize=2$\\times$2ï¼ŒStride=2ï¼›Conv1ï¼šsize=3$\\times$3ï¼ŒStride=2 Feature mapï¼š$F=1$ Pool1ï¼š$F=(1-1)\\times2+2=2$ Conv1ï¼š$F=(2-1)\\times2+3=5$ éªŒè¯ä¸¤ä¸ª3$\\times$3çš„å·ç§¯æ ¸å¯ä»¥ä»£æ›¿ä¸€ä¸ª7$\\times$7(Stride=1): Feature mapï¼š$F=1$ Conv3$\\times$3(3)ï¼š$F=(1-1)\\times1+3=3$ Conv3$\\times$3(2)ï¼š$F=(3-1)\\times1+3=5$ Conv3$\\times$3(1)ï¼š$F=(5-1)\\times1+3=7$ è®ºæ–‡ä¸­æåˆ°ï¼Œå¯ä»¥é€šè¿‡å †å ä¸¤ä¸ª3x3çš„å·ç§¯æ ¸æ›¿ä»£5x5çš„å·ç§¯æ ¸ï¼Œå †å ä¸‰ä¸ª3x3çš„å·ç§¯æ ¸æ›¿ä»£7x7çš„å·ç§¯æ ¸ã€‚ä½¿ç”¨7x7å·ç§¯æ ¸æ‰€éœ€å‚æ•°ï¼Œä¸å †å ä¸‰ä¸ª3x3å·ç§¯æ ¸æ‰€éœ€å‚æ•°(å‡è®¾è¾“å…¥è¾“å‡ºchannelä¸ºC) $7\\times7\\times C \\times C = 49C^2$ $3\\times3\\times C \\times C+3\\times3\\times C \\times C+3\\times3\\times C \\times C=27C^2$ å·ç§¯å±‚çš„ä½œç”¨æ˜¯ç”¨æ¥æå–ç‰¹å¾ï¼Œå…¨è¿æ¥å±‚çš„ä½œç”¨çš„ç”¨æ¥åˆ†ç±»ã€‚ VGGçš„pytorchå®ç°æ¨¡å‹æ­å»º123456cfgs = { 'vgg11': [64, 'M', 128, 'M', 256, 256, 'M', 512, 512, 'M', 512, 512, 'M'], 'vgg13': [64, 64, 'M', 128, 128, 'M', 256, 256, 'M', 512, 512, 'M', 512, 512, 'M'], 'vgg16': [64, 64, 'M', 128, 128, 'M', 256, 256, 256, 'M', 512, 512, 512, 'M', 512, 512, 512, 'M'], 'vgg19': [64, 64, 'M', 128, 128, 'M', 256, 256, 256, 256, 'M', 512, 512, 512, 512, 'M', 512, 512, 512, 512, 'M'],} é…ç½®VGGçš„æ¨¡å‹listï¼Œé‡Œé¢çš„æ•°å­—ä»£è¡¨Convå±‚çš„channelæ•°ï¼Œâ€œMâ€ä»£è¡¨Maxpoolå±‚ã€‚ å…¶ä¸­cfgä¸ºä¸€ä¸ªdictçš„æ•°æ®ï¼ŒKeyä¸ºä¸åŒVGGçš„ç±»å‹ï¼ŒValueä¸ºlistå³ä¸åŒçš„VGGç½‘ç»œçš„é…ç½®å‚æ•°ã€‚ å·ç§¯å±‚çš„å®ç°12345678910111213def make_features(cfg: list): layers = [] in_channels = 3 for v in cfg: if v == 'M': layers += [nn.MaxPool2d(kernel_size=2, stride=2)] else: conv2d = nn.Conv2d(in_channels, v, kernel_size=3, padding=1) layers += [conv2d, nn.ReLU(True)] # æ¯ä¸ªå·ç§¯å‡½æ•°è·ŸReLUæ¿€æ´»å‡½æ•°éƒ½æ˜¯ç»‘å®šåœ¨ä¸€èµ·çš„ã€‚ in_channels = v # ä¸‹ä¸€å±‚çš„è¾“å…¥ä¸ºæœ¬å±‚çš„è¾“å‡º return nn.Sequential(*layers) è¯¥ä»£ç æ˜¯ç”¨æ¥è¯»å–é…ç½®æ–‡ä»¶çš„ï¼Œç”±äºè¾“å…¥ä¸ºä¸€å¼ å›¾ç‰‡ï¼Œå› æ­¤è¾“å…¥çš„in_channels=3ã€‚ nn.Sequential(layers)*ï¼šå®ä¾‹åŒ–éå…³é”®å­—å‚æ•°å®ç°çš„ã€‚ å…¨è¿æ¥å±‚çš„å®ç°12345678910111213self.classifier = nn.Sequential( # ç¬¬ä¸€ä¸ªå…¨è¿æ¥å±‚ nn.Dropout(p=0.5), nn.Linear(512*7*7, 2048), nn.ReLU(True), # ç¬¬äºŒä¸ªå…¨è¿æ¥å±‚ nn.Dropout(p=0.5), nn.Linear(2048, 2048), # åŸè®ºæ–‡ä¸º4096ï¼Œä¸ºäº†åŠ å¿«é€Ÿåº¦æˆ‘ä»¬è®¾ç½®ä¸º2048 nn.ReLU(True), # ç¬¬ä¸‰ä¸ªå…¨è¿æ¥å±‚ nn.Linear(2048, class_num) ) å…¨éƒ¨çš„ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738class VGG(nn.Module): def __init__(self, features, class_num=1000, init_weights=False): super(VGG, self).__init__() self.features = features self.classifier = nn.Sequential( nn.Dropout(p=0.5), nn.Linear(512*7*7, 2048), nn.ReLU(True), nn.Dropout(p=0.5), nn.Linear(2048, 2048), # åŸè®ºæ–‡ä¸º4096ï¼Œä¸ºäº†åŠ å¿«é€Ÿåº¦æˆ‘ä»¬è®¾ç½®ä¸º2048 nn.ReLU(True), nn.Linear(2048, class_num) ) if init_weights: self._initialize_weights() def forward(self, x): # N x 3 x 224 x 224 x = self.features(x) # N x 512 x 7 x 7 # å±•å¹³æ“ä½œï¼Œå’Œä¹‹å‰ç›¸ä¼¼ x = torch.flatten(x, start_dim=1) # N x 512*7*7 x = self.classifier(x) return x def _initialize_weights(self): for m in self.modules(): if isinstance(m, nn.Conv2d): # nn.init.kaiming_normal_(m.weight, mode='fan_out', nonlinearity='relu') nn.init.xavier_uniform_(m.weight) if m.bias is not None: nn.init.constant_(m.bias, 0) elif isinstance(m, nn.Linear): nn.init.xavier_uniform_(m.weight) # nn.init.normal_(m.weight, 0, 0.01) nn.init.constant_(m.bias, 0) æ¨¡å‹çš„å®ä¾‹åŒ–123456789def vgg(model_name=&quot;vgg16&quot;, **kwargs): try: cfg = cfgs[model_name] # å¾—å‡ºé…ç½®åˆ—è¡¨å‚æ•° except: print(&quot;Warning: model number {} not in cfgs dict!&quot;.format(model_name)) exit(-1) model = VGG(make_features(cfg), **kwargs) return model \\*kwargs*ï¼šä»£è¡¨å¯å˜å­—å…¸é•¿åº¦çš„å‚æ•°ã€‚ æ¨¡å‹çš„è®­ç»ƒè®­ç»ƒçš„è¿‡ç¨‹ï¼ŒåŸºæœ¬å’ŒALexNetç›¸åŒã€‚è¿™é‡Œç”±äºVGGç½‘ç»œçš„å‚æ•°å¤šï¼Œè®­ç»ƒæ‰€éœ€è¦çš„æ•°æ®å¤§ï¼Œè€Œç°å®è¿‡ç¨‹ä¸­æˆ‘ä»¬çš„å‚æ•°ä¸è¶³ï¼Œå› æ­¤éœ€è¦è¿ç§»å­¦ä¹ çš„æ–¹æ³•æ¥è§£å†³æ¯”è¾ƒå¥½ã€‚","link":"/2022/01/30/%E5%9B%BE%E5%83%8F%E5%88%86%E7%B1%BB%E7%BD%91%E7%BB%9C%E5%8F%8APytorch%E5%AE%9E%E7%8E%B0/VGG%E7%BD%91%E7%BB%9C%E8%AF%A6%E8%A7%A3%E4%B8%8EPytorch%E5%AE%9E%E7%8E%B0/"},{"title":"è®ºæ–‡å†™ä½œæŒ‡å¯¼","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸ºä¼è€å¸ˆç»™åšå£«çš„å†™ä½œæŒ‡å¯¼è¯¾ï¼Œä¸»è¦ç®€è¿°çš„æ˜¯ç§‘ç ”è®ºæ–‡å†™ä½œçš„æ³¨æ„äº‹é¡¹ã€IEEEçš„ç›¸å…³è§„èŒƒä»¥åŠLatexçš„ä½¿ç”¨æŠ€å·§ç­‰ã€‚ è®ºæ–‡æ’°å†™åŸºæœ¬è¯­æ³• æ ‡é¢˜å’Œå…³é”®å­— æ‘˜è¦ ç®€ä»‹ ç›¸å…³å·¥ä½œ é—®é¢˜å’Œæ–¹æ³• å®éªŒå’Œåˆ†æ æ€»ç»“ å‚è€ƒæ–‡çŒ® è¿™é‡Œä¸ä¸€å®šè¦æŒ‰ç…§ä¸Šè¿°çš„é¡ºåºï¼Œä½†æ˜¯è¯¥æœ‰çš„ç»“æ„ä¸€å®šè¦æœ‰ã€‚è¿™æ ·ä¾¿äºä¿¡æ¯çš„å®šä½å’Œå†…å®¹çš„å®Œå¤‡ã€‚ è¯­ä¹‰ è¦è®©è¯»è€…è¯»çš„èˆ’æœä¸ºç›®çš„ã€‚ å»ºè®®ï¼š å¿…è¦è®©è¯„å§”å’Œå®¡ç¨¿äººå»çŒœ ä¸´è¿‘ç›¸åŒçš„åŒºåŸŸé¿å…åŒä¸€ä¸ªè¯çš„é‡å¤å‡ºç° é¿å…å¥å­ä»¥â€œAndâ€å¼€å¤´ é¿å…è¿‡é•¿çš„å¥å­ é¿å…ä½¿ç”¨è¿‡äºç”Ÿæ™¦çš„è¯æ±‡ å…·ä½“å†…å®¹éƒ¨åˆ† æ ‡é¢˜ æ ‡é¢˜è¦ç²¾ç‚¼ã€çªå‡º è®©ç¼–å§”å’Œè¯„å§”å¿«é€Ÿäº†è§£è®ºæ–‡çš„æ–¹å‘ï¼Œå¸å¼•è¯»è€… æ‘˜è¦ ä¸»ç¼–ä¼šçœ‹çš„éƒ¨åˆ†ï¼Œè¯„å§”å’Œè¯»è€…çš„å…¥å£ å°±æ˜¯ä¸»ç¼–é€šè¿‡çœ‹æ‘˜è¦æ¥åˆ¤æ–­è®ºæ–‡çš„æ–¹å‘ï¼Œè¿›è€Œé€‰æ‹©åˆé€‚çš„å‰¯ç¼–ï¼Œä¹‹å¯¹äºæœ€åçš„èƒ½å¦å½•ç”¨å¾ˆå…³é”®ã€‚ å¿…é¡»æè¿°è®ºæ–‡ä¸»è¦çš„åˆ›æ–°å’Œè´¡çŒ®ï¼Œå†…å®¹è¦æœ‰è¶³å¤Ÿçš„å¸å¼•æ€§ ä¸è¦æœ‰å…¬å¼ï¼Œä¸è¦å†—é•¿ï¼Œå°±æ˜¯ä¸è¦å†™å¤šæ®µã€‚ ç®€ä»‹ é™ˆè¿°é—®é¢˜çš„èƒŒæ™¯å’Œæ„ä¹‰ ç®€è¿°è¿‡å»åœ¨è¿™ä¸ªæ–¹å‘éƒ½åšäº†ä»€ä¹ˆå·¥ä½œ æŒ‡å‡ºä¹‹å‰å·¥ä½œçš„ä¸è¶³ä¹‹å¤„(è¦å§”å©‰ä¸€ç‚¹ï¼Œä¸‡ä¸€å®¡ç¨¿äººå°±æ˜¯ä¹‹å‰å·¥ä½œçš„ä½œè€…)ï¼Œä¹Ÿå°±æ˜¯æäº¤çš„Motivationå’Œæ‹Ÿè§£å†³çš„ä¸»è¦é—®é¢˜ ç®€ä»‹å·¥ä½œçš„ä¸»è¦åˆ›æ–°ç‚¹ ç®€ä»‹è¦é’ˆå¯¹å‰è¿°é—®é¢˜çš„åˆ›æ–°æ–¹æ³•ï¼Œè®©äººæ„Ÿè§‰å¯ä»¥è§£å†³å‰è¿°é—®é¢˜ ä¸è¦è¿‡é•¿ï¼Œæ›´å…·ä½“åœ°ä¿¡æ¯è¦ç•™åœ¨åé¢æ¥å†™ï¼Œç®€ä»‹ä¸»è¦çªå‡ºå…³é”®ç‚¹ æ–¹ä¾¿ç¼–å§”å¿«é€Ÿç¡®è®¤è®ºæ–‡çš„æ–¹å‘ï¼Œé’ˆå¯¹æ€§åœ°æŒ‘é€‰ç¼–å§” å¸å¼•è¯»è€…é˜…è¯»è®ºæ–‡ ç›¸å…³å·¥ä½œ æ³¨é‡å¯¹è°ƒç ”å·¥ä½œçš„è´¨é‡ ä»è¯„å§”å’Œä¸»ç¼–çš„è§’åº¦æ¥çœ‹ï¼Œè°ƒç ”å·¥ä½œçš„è´¨é‡å†³å®šäº†ä½ çš„å“å‘³ï¼Œè¿›è€Œå½±å°„äº†ä½ å·¥ä½œçš„è´¨é‡å’Œæ°´å‡†ã€‚ å…¶å®å°±æ˜¯æ–‡çŒ®ç»¼è¿°çš„æ—¶å€™ä¸è¦å¼•ç”¨å¤ªå·®åŠ²çš„æœŸåˆŠä¸Šçš„æ°´æ–‡ï¼Œè¦è·Ÿé¡¶åˆŠå’Œé¡¶ä¼šçœ‹é½ã€‚ ç›¸å…³å·¥ä½œä¹Ÿæ˜¯å¯¹è¿‡å»é¢†åŸŸå†…ç›¸å…³å·¥ä½œçš„è°ƒç ”å’Œæ•´ç† æ¦‚è¿°è¿‡å»å·¥ä½œçš„ä¸»è¦è´¡çŒ® çªå‡ºè¿‡å»å·¥ä½œçš„ä¸è¶³ä¹‹å¤„ å‡¸æ˜¾æäº¤å·¥ä½œçš„â€å…ˆè¿›æ€§â€œ ç¡®ä¿ä½ çš„å·¥ä½œæœ‰æ•ˆåœ°é’ˆå¯¹äº†å½“å‰å·¥ä½œçš„ä¸è¶³ä¹‹å¤„ï¼Œå¹¶ç”±å“æœ‰æˆæ•ˆçš„æ¨è¿› ç¡®ä¿ä½ å·¥ä½œçš„èƒ½å¤Ÿæ‰“åŠ¨è¯„å§”ï¼Œèƒ½å¤Ÿå¸å¼•æœŸåˆŠçš„è¯»è€… å¾ˆåƒä¸€ä¸ªè¯»ä¹¦ç¬”è®°ï¼Œä¸åƒæ˜¯ä¸€ä¸ªç›¸å…³å·¥ä½œ é—®é¢˜å’Œæ–¹æ³• é—®é¢˜é™ˆè¿° æ¯”æ‘˜è¦å’Œç®€ä»‹ä¸­è¿›ä¸€æ­¥çš„é™ˆè¿° é—®é¢˜è¦è®©äººå®¹æ˜“ç†è§£ï¼Œåœ¨å¯èƒ½çš„æƒ…å†µä¸‹ï¼Œä¸¾ä¾‹è¯´æ˜ä¼šæ›´æ¸…æ™° ä¸€èˆ¬çš„è®¡ç®—æœºé¡¶ä¼šä¼šæœ‰ä¸€å¼ å›¾ï¼Œæ¥ä»‹ç»æœ¬æ–‡çš„æ€è·¯ï¼Œç°åœ¨çš„å®¡ç¨¿äººä¼šç›´æ¥å…ˆçœ‹æœ‰æ²¡æœ‰é‚£å¼ å›¾ã€‚ åˆ›æ–°æ–¹æ³• â€ä¸ºä»€ä¹ˆwhyâ€œæ¯”â€œæ€ä¹ˆhowâ€è¿˜é‡è¦ why-&gt;how-&gt;what èšç„¦äºâ€œæ€ä¹ˆâ€åšçš„å®¹æ˜“é™·å…¥æŠ€æœ¯æŠ¥å‘Šï¼Œç¼ºä¹é€»è¾‘ä¸Šçš„ä¸²è” èšç„¦äºâ€œä¸ºä»€ä¹ˆâ€ï¼Œè¿™æ ·ä¼šå¸å¼•è¯„å§”å’Œè¯»è€…æ€è€ƒï¼ˆä»è€Œè®¤åŒï¼‰ï¼Œå¹¶ä¸”èƒ½å¤Ÿè‡ªç„¶çš„å¸¦å‡ºâ€œæ€ä¹ˆåšçš„â€ã€‚ å¯¹è¿™ä¸ªæ–¹æ³•å¤šè®¨è®ºï¼Œé¿å…ç°å¦‚æŠ€æœ¯æŠ¥å‘Š å®éªŒä¸åˆ†æ åœ¨è®ºæ–‡å®éªŒéƒ¨åˆ†ï¼Œç‰¢è®°â€œå®éªŒæ˜¯å¯¹æ‰€ææ–¹æ¡ˆçš„éªŒè¯â€ï¼Œæœ‰ä¸‰ä¸ªè¦ç´ ä¸å¯ç¼ºå°‘ã€‚ä¸€æ˜¯å¯é‡å¤æ€§ï¼Œè¦æœ‰å…¬è®¤çš„å®éªŒåœºæ™¯å’Œé…ç½®ï¼›äºŒæ˜¯å¯è§£é‡Šæ€§ï¼Œå›¾ç‰‡æ¸…æ™°ï¼Œé¿å…å‡ºç°å›¾ç‰‡â€œè¯¯ç”¨â€ï¼›ä¸‰æ˜¯è¦å¯åˆ†ææ€§ï¼Œå³ä½è¯ç»“è®ºã€‚ å…¬è®¤çš„å®éªŒåœºæ™¯å’Œé…ç½® å¯å‚è€ƒç›¸å…³é¢†åŸŸçš„å®šä¼šé¡¶åˆŠæ‰€å‘è¡¨çš„å®éªŒè®¾ç½® å®éªŒè¦é’ˆå¯¹æ‰€ç ”ç©¶çš„é—®é¢˜å’Œç›®æ ‡ ç›¸å…³å·¥ä½œçš„å¯¹æ¯”ï¼Œè¦state-of-the-art (å‘¼åº”:ç›¸å…³å·¥ä½œ) å¯¹äºè‡ªå·±çš„æ•°æ®é›†æœ€å¥½è¦å…¬å¼€æ•°æ®å’Œä»£ç  å®éªŒå›¾è¡¨ç°è¦ä¸“ä¸šã€æ¸…æ™° å°½å¯èƒ½ä½¿ç”¨ä¸“ä¸šçš„ç»˜å›¾å·¥å…·pythonã€Matlab æ¸…æ™°åº¦ã€å­—ä½“çš„å¤§å°é€‚å½“ å¯å­¦ä¹ ç›¸å…³é¢†åŸŸé¡¶ä¼šé¡¶åˆŠçš„å›¾æ ‡ å®éªŒç»“æœçš„åˆ†æ åˆ†æä¸æ˜¯ç®€å•åœ°é™ˆè¿°å®éªŒç»“æœï¼Œé‡ç‚¹æ˜¯å†… è§£é‡Šä¸ºä»€ä¹ˆæå‡äº† æ¶ˆèæ€§çš„åˆ†æï¼Œä¸‰ä¸ªæ¡ä»¶ç¼ºå°‘äº†æŸä¸ªä¼šé€ æˆä»€ä¹ˆæ ·çš„åæœ çµæ•åº¦åˆ†æï¼Œå¯¹è¶…å‚æ•°è¿›è¡Œæ•æ„Ÿæ€§åˆ†æ å¤šè¯»è®ºæ–‡ ä¸ä»…ä»…å‡¸æ˜¾æ‰€æå‡ºæ–¹æ¡ˆçš„æœ‰ä¼˜åŠ¿ï¼Œæ›´èƒ½å‡¸æ˜¾ä¸ºä»€ä¹ˆæœ‰ä¼˜åŠ¿ï¼ˆå‘¼åº”ï¼šä¸ºä»€ä¹ˆæ¯”æ€ä¹ˆåšè¿˜é‡è¦ï¼‰ å·¦ä¾§çš„å›¾ç‰‡å¯è§£é‡Šæ€§ä¸æ˜¯å¾ˆå¼ºï¼Œå› ä¸ºé½äº¨ä½é‚£ä¸ªåæ ‡çš„æ ‡é¢˜æ ä»¥åŠå›¾ç‰‡çš„æ¯”ä¾‹éƒ½ä¸æ˜¯å¾ˆå¥½ï¼Œæœ‰ç‚¹ç©ºã€‚ å…¶æ¬¡æ˜¯æ²¡æœ‰å›¾ä¾‹ï¼Œlegendçš„æ ‡æ³¨ã€‚ å¯¹æ¯”æ¸…æ™°ï¼Œå¯ä»¥ä¸æ˜¯å’Œstate of the artè¿›è¡Œæ¯”è¾ƒï¼Œè‡³å°‘è¦è®©è¯»è€…æ„Ÿè§‰ä½ å¯¹è‡ªå·±çš„æ–¹æ³•æœ‰ä¿¡å¿ƒï¼›ç”¨äº†ä¸“ä¸šçš„ä½œå›¾å·¥å…·ï¼Œä¸”è€ƒè™‘äº†é»‘ç™½æ‰“å°çš„æ•ˆæœã€‚ æ€»ç»“ åƒæ‘˜è¦ï¼Œä½†æ˜¯åˆä¸æ˜¯æ‘˜è¦ æ€»ç»“å‘å¦ä¸€ä¸ªæ›´å½¢è±¡çš„è¯ï¼štakeaway æ˜¯è¯»è€…åœ¨é˜…è¯»å®Œè®ºæ–‡çš„ä¸€ä¸ªå›åº” åœ¨è¿›ä¸€æ­¥ç†è§£çš„åŸºç¡€ä¸Šå†æ¬¡æ€»ç»“è®ºæ–‡çš„ä¸»è¦è´¡çŒ®(æ‹”é«˜) å±•æœ›(å¯é€‰)ï¼Œåœ¨ç°æœ‰çš„å·¥ä½œçš„åŸºç¡€ä¸Šï¼ŒæŒ‡å‡ºä¸‹ä¸€æ­¥å·¥ä½œçš„æ–¹å‘å’Œé‡ç‚¹ è¿™é‡Œå±•æœ›è¦æœ‰ç†æœ‰æ®ï¼Œä¸æ˜¯çè¯´ å…¶æ¬¡ä¸è¦è¿‡æ¸¡çš„å¦å†³è‡ªå·±çš„å·¥ä½œï¼Œé˜²æ­¢è¢«æ‹’ç¨¿æˆ–è€…æ‰“å›æ¥ä¿®æ”¹ å®äº‹æ±‚æ˜¯ å±•æœ›ï¼Œä¸æ˜¯çŒœæƒ³ï¼Œä¹Ÿè¦æœ‰ç†æœ‰æ® é¿å…å˜æˆå¯¹æäº¤å·¥ä½œçš„å¦å†³ æ’ç‰ˆ å°½é‡ä½¿ç”¨LaTeXè¿›è¡Œæ’ç‰ˆ ä¸“ä¸šã€æ¼‚äº®ã€å¯¹å…¬å¼å‹å¥½ æ¢æŠ•æ—¶ï¼Œä¿®æ”¹æ ¼å¼æ–¹ä¾¿å¿«æ· ä½¿ç”¨æŒ‡å®šçš„è®ºæ–‡æ¨¡æ¿ IEEE for IEEE Springer for Springer å¦åˆ™ï¼Œä¸»ç¼–å¯ä»¥ç›´æ¥æ‹’ç¨¿ã€‚ å®šç†æœ€åçš„æ–¹æ¡†ä»£è¡¨æ˜¯å¦è¯æ˜ç»“æŸï¼Œè¿™é‡Œé¢è¯æ˜ç»“æŸçš„æ–¹æ¡†æ˜¯æ²¡æœ‰å¯¹é½çš„ã€‚ å®¡ç¨¿å›å¤ é€æ¡é˜…è¯»å¹¶ä¸”ç†è§£å®¡ç¨¿è®©äººçš„æ„è§ é€æ¡æ’°å†™å›åº”ï¼Œä¸€æ–¹é¢è§£é‡Šï¼Œå¦ä¸€æ–¹é¢ç›´æ¥é™ˆè¿°è®ºæ–‡ç›¸åº”æ€ä¹ˆæ”¹çš„ é‡åˆ°å®¡ç¨¿äººçš„æ„è§æ–¹å‘ä¸å¯¹çš„è¦æ€ä¹ˆåŠï¼Ÿ å…ˆä»è‡ªèº«æ‰¾åŸå› ï¼š é€»è¾‘ä¸æ¸…ï¼Œå®¡ç¨¿äººæ²¡æœ‰æ‰¾åˆ°ï¼Ÿ æ²¡æœ‰è¡¨è¿°æ¸…æ¥šï¼Œå¼•å‘æ­§ä¹‰ï¼Ÿ å¿½ç•¥äº†ï¼Œå¼•èµ·è¯¯è§£ï¼Ÿ å¤šæ–¹è¯å®ï¼Œç¡®å®æ˜¯å®¡ç¨¿äººçš„æ„è§ä¸å¯¹ï¼Œå°±ç¤¼è²Œåœ°å›åº”ã€‚ å†™å›å¤åœ°æ—¶å€™ä¹Ÿæ˜¯è¦å§”å©‰çš„è¯´æ˜¯è‡ªå·±å†™çš„ä¸å¥½å¼•èµ·äº†æ‚¨çš„è¯¯è§£ã€‚ ä¹‹å‰çš„éƒ¨åˆ†ä¸ºè¿‡æ•æ„è€å¸ˆçš„å†…å®¹ï¼Œä¹‹åçš„ä¸ºä¼è€å¸ˆè‡ªå·±æ€»ç»“çš„å†…å®¹ã€‚ å…¶ä»–æ³¨æ„äº‹é¡¹å•å¤æ•°ã€æ—¶æ€ ä¸å¯æ•°åè¯ï¼šequirmentã€researchã€facultyã€noiseã€‚ å¯æ•°åè¯ï¼š(è¿™é‡Œå°±æ˜¯è¦æ³¨æ„ä»¥ä¸Šåè¯çš„å•å¤æ•°) Datum $\\rightarrow$ data Statistic $\\rightarrow$ Statistics Criterion $\\rightarrow$ Criteria Analysis $\\rightarrow$ Analyses Spectrum $\\rightarrow$ Spectra åœ¨æ¬§æ´²ä¸€èˆ¬è¡¨è¾¾éƒ½ç”¨è¢«åŠ¨è¯­æ€ï¼Œä½†æ˜¯åœ¨ç¾å›½å¯ä»¥æ¥å—è¢«åŠ¨è¯­æ€ï¼Œå› æ­¤è¿™æ–¹é¢å¤§å¯æ”¾å¿ƒã€‚ å°±ç®—åªæœ‰ä¸€ä¸ªä½œè€…ï¼Œä¹Ÿè¦ç”¨We è€Œä¸æ˜¯ I å®éªŒéƒ¨åˆ†ä¸€èˆ¬ç”¨è¿‡å»æ—¶æ€ ä»‹ç»åˆ«äººçš„æ–¹æ³•ï¼Œä¸€èˆ¬ç”¨ç°åœ¨æ—¶ï¼Œè€Œä¸æ˜¯è¿‡å»å¼ related work ä¸Šé¢è¡¨è¿°åˆ«äººçš„æ–¹æ³•ï¼Œè¦ä½¿ç”¨ä¸€èˆ¬ç°åœ¨æ—¶æ€ï¼Œè€Œä¸æ˜¯è¿‡å»æ—¶æ€ å…¶ä»–çš„æ³¨æ„äº‹é¡¹ é¦–å…ˆè¿˜æ˜¯ä¸è¦è¿‡åˆ†å¤¸å¤§è‡ªå·±è€Œè´¬ä½åˆ«äºº å›¾ã€è¡¨ã€ä¼ªä»£ç ç­‰åº”å‡ºç°åœ¨æ­£æ–‡ä»¥å(è¦å…ˆå›¾ï¼Œç„¶åå†æ–‡ä¸­å‡ºç°figx.)ï¼Œå±…ä¸­å¯¹é½ï¼Œä¸è¦è·¨é¡µï¼Œæ ‡é¢˜ä¸è¦åˆ†ç¦»ã€‚ å›¾çš„æ¸…æ™°åº¦è¦é«˜ï¼Œå­—ä½“ä¸è¦å¤ªå¤§æˆ–å¤ªå° ä¸è¦å‡ºç°é”™åˆ«å­—(then &amp; than) æ¯ä¸€æ®µè¯ä¹Ÿæ¯”è¦å¤ªé•¿ï¼Œå¤šç”¨çŸ­å¥ï¼Œæ¯æ®µè¯ä¹Ÿä¸å®œè¿‡é•¿ã€‚ æ¯æ¡å‚è€ƒæ–‡çŒ®éƒ½è¦åœ¨æ­£æ–‡ä¸­å¾—åˆ°å¼•ç”¨ æ¯ä¸ªç¬¦å·éƒ½è¦å®šä¹‰ï¼Œ(è®©åˆ«äººå¸®å¿™æ£€æŸ¥) å°½é‡ä¸è¦ç¼©å†™ï¼Œä¼è€å¸ˆçš„ç»éªŒæ¥çœ‹å°‘äº5æ¬¡å°±ä¸è¦ç”¨ç¼©å†™äº† è®ºæ–­ä¸è¦å¤ªç»å¯¹ï¼šmayã€could è¡¨ç¤ºè½¬æŠ˜ç”¨whereas è€Œé while è¡¨ç¤ºå…¶ä»–ç”¨ Additionally / In addition è€Œé Besides Principal component analysis , è€Œä¸æ˜¯Principle ä¸€èˆ¬ç”¨approach , è€Œémethod(æ¯”è¾ƒå£è¯­åŒ–å’Œä½ç«¯) If åé¢çš„ä»å¥æœ€å¥½åŠ  then(è‹±è¯­ä¸ºæ¯è¯­çš„äººæ¯”è¾ƒä¹ æƒ¯) ; although åé¢ä¸€å®šä¸åŠ but Compared with â€¦ ,è€Œé Comparing with; åŒºåˆ†compared with(å®éªŒæ–¹æ³•æœ€æ¯”è¾ƒ) å’Œ compared to(åšæ—¶ä¼šç”¨). It â€˜s worth doing $Latex$ ä¸­çš„å·¦å¼•å·â€æ˜¯``(æ•°å­—1æ—è¾¹çš„é‚£ä¸ªç‚¹) ä¸æ˜¯æ­£å¸¸çš„â€ å† è¯çš„ä½¿ç”¨ï¼Œä¸»è¦æ˜¯æ ¹æ®å®é™…çš„å‘éŸ³æ¥å®šçš„ An hour , an 8-hour delay , an SVM(è¿™é‡Œæ˜¯å› ä¸ºSçš„å‘éŸ³) an FS , &lt;-&gt; a fuzzy set a Euclidean space :zap:Defend çš„æ„æ€ Defend : ä¿æŠ¤ã€ä¿ä½‘ï¼Œ e.g. ,God Defend New Zealand Defend against : æŠµå¾¡ã€é˜²å¾¡ï¼Œe.g. ,defend againist adversarial attacks å¥å­ä¸è¦ä»¥And å¼€å¤´ å¥å­è¦å†™å®Œæ•´ï¼ŒWhen the number of labeled instances is in few-shot TL setting ,i.e.,each category with instances less than 10 3ä¸ªæˆ–ä»¥ä¸Šçš„ä½œè€…æ‰ç”¨et al. A proposed â€¦ ; A and B proposed â€¦ ; A et al. proposed â€¦ å…¬å¼åçš„æ ‡ç‚¹ç¬¦å· å…¬å¼ä¹‹åçš„é€—å·æ˜¯å› ä¸ºåé¢çš„æ˜¯å‰é¢çš„è¡¥å……ï¼Œè¿™ä¸€å¥è¿˜æ²¡è¯´å®Œã€‚ å…¶æ¬¡å…¬å¼ä¹‹é—´çš„ç­‰å·è¦å¯¹é½ã€‚ è¿™é‡Œçš„å…¬å¼æœ‰é€—å·æ˜¯ç”±äºï¼Œ(13)(14)æ˜¯ä¸‹ä¸€å¥çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤æ²¡æœ‰æ ‡ç‚¹ç¬¦å·ã€‚ å­¦æœ¯è§„èŒƒIEEEè§„å®šï¼šæŠ•ç¨¿æœ‰æ—¶å€™æˆ‘ä»¬æ„Ÿè§‰å®¡ç¨¿çš„å¸Œæœ›ä¸å¤§æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©æ’¤å›ç¨¿ä»¶ï¼Œåœ¨å»æŠ•åˆ«çš„æœŸåˆŠï¼Œä½†æ˜¯ä¸€å®šè¦å¾—åˆ°ç¡®è®¤æ–‡ç« è¢«æ’¤å›çš„ä¿¡æ¯æ‰èƒ½ä¸‹ä¸€è½®æŠ•ç¨¿ã€‚ æœ‰äº›æœŸåˆŠæ¯”è¾ƒåæ„Ÿaxivï¼Œå› æ­¤åœ¨æŠ•ç¨¿çš„æ—¶å€™è¦æå‰å£°æ˜ï¼Œé˜²æ­¢å…¶è¿½ç©¶ä¸€ç¨¿å¤šæŠ•çš„è´£ä»»ã€‚ IEEEè§„å®šï¼šå‚è€ƒå’Œå¼•ç”¨å›¾ç‰‡çš„è§„å®šï¼Œå¦‚æœæ–‡ç« å·²ç»å‘è¡¨ï¼Œé‚£ä¹ˆæ–‡ç« çš„ç‰ˆæƒå½’å‡ºç‰ˆç¤¾æ‰€æœ‰ï¼Œå°±ç®—è¦å¼•ç”¨è‡ªå·±è®ºæ–‡é‡Œçš„å›¾ç‰‡ï¼Œä¹Ÿè¦å’Œå‡ºç‰ˆç¤¾æ‰“æ‹›å‘¼ï¼Œå¾æ±‚åŒæ„ã€‚ å› æ­¤æˆ‘ä»¬å¯¹äºä»¥å‰è‡ªå·±çš„å›¾è¿˜æ˜¯é‡æ–°ç”»ä¸€ä¸‹å§ã€‚ IEEEè§„å®šï¼šè®ºæ–‡æŠ„è¢­&gt;50%çš„åˆ¤å®šåŠå¤„ç½šå†³å®š è¿™é‡Œå¯¹æŠ„è¢­çš„è§„å®šæœ‰ä¸¤ç§ï¼š å…¶ä¸€ï¼Œå…¨æ–‡æŠ„è¢­ï¼Œè¿™é‡ŒåŒ…æ‹¬ç›´æ¥ä½¿ç”¨äº†ä»–äººçš„æ–‡ç« é‡Œçš„å¥å­æ²¡æœ‰å¼•ç”¨ã€‚(æ¯”è¾ƒä¸¥é‡) å…¶äºŒï¼Œ50% å¯ä»¥æ˜¯ä¸€ç¯‡å…¨é—®æŠ„è¢­äº†50%ï¼Œæˆ–è€…æ˜¯åŒä¸€ä¸ªä½œè€…è¿æŠ•ä¸¤ç¯‡è®ºæ–‡ï¼Œä¸€å…±50%. IEEEè§„å®šï¼šè®ºæ–‡æŠ„è¢­&gt;50%çš„å¤„ç½šå†³å®š åŒ…æ‹¬åœ¨IEEEå…¬å¼€çš„æ•°æ®åº“é‡Œå†™é“æ­‰ä¿¡ï¼› æƒ…èŠ‚ä¸¥é‡è€…ä¼š5å¹´å†…ä¸è®¸æŠ•ç¨¿IEEEï¼Œå°±æ˜¯ç›´æ¥æ‹’ç¨¿ã€‚ è¿ç»­ä¸¤æ¬¡ä¼šè¢«ç»ˆèº«æ‹’ç¨¿ã€‚ IEEEè§„å®šï¼šè®ºæ–‡æŠ„è¢­20-50%çš„åˆ¤å®šåŠå¤„ç½šå†³å®š åŸºæœ¬çš„åˆ¤å®šå’Œä¸Šé¢ä¸€æ ·ã€‚ å¤„ç½šä¸åŒçš„æ˜¯ï¼Œ3å¹´ä¹‹å†…ç¦æ­¢å‘è®ºæ–‡ï¼› ä¹Ÿè¦å†™å¤„ç½šå†³å®šï¼› å…¶æ¬¡å°±æ˜¯å†æŠ•çš„æ–‡ç« æˆ–è€…å·²æ¥å—ä½†æœªå‘è¡¨çš„æ–‡ç« ç›´æ¥æ‹’ç¨¿ã€‚ IEEEè§„å®šï¼šè®ºæ–‡æŠ„è¢­&lt;20%çš„åˆ¤å®šåŠå¤„ç½šå†³å®š åŸºæœ¬çš„åˆ¤å®šè§„åˆ™è¿˜æ˜¯ä¸€æ ·çš„ï¼Œä¸€ç¯‡&lt;20%æˆ–è€…æ˜¯åŒä½œè€…çš„åŒæ—¶æŠ•çš„æ–‡ç« &lt;20%ã€‚ ä¸ç”¨è¢«ç¦æŠ• ä½†æ˜¯è¦å†™å¤„ç½šå†³å®š IEEEè§„å®šï¼šä¸æ­£ç¡®å¼•ç”¨æƒ…å†µ1ï¼šæ•´æ®µæ•´å¥çš„å¼•ç”¨ ç›´æ¥æŠ„è¦å°†æ–‡å­—å˜ä¸ºæ–œä½“ï¼Œå¹¶åŠ ä¸Šå‚è€ƒæ–‡çŒ®ã€‚ è¦æ˜¯ç”¨è‡ªå·±çš„è¯æ¥æè¿°åˆ«äººçš„æ€è·¯ï¼Œé‚£ç›´æ¥ç»™å‡ºå‚è€ƒæ–‡çŒ®å³å¯ã€‚ å¦‚æœè¢«è®¤ä¸ºæ˜¯æŠ„è¢­ï¼Œè¦è¦åœ¨æ•°æ®åº“é“æ­‰ï¼Œå¹¶ç»™å¯¹æ–¹çš„ä½œè€…å’ŒæœŸåˆŠçš„ä¸»ç¼–é“æ­‰ æƒ…å†µ2ï¼šå¤§ç¯‡å¹…çš„å¼•ç”¨ ç›¸å½“äºæ˜¯å‰½çªƒæ€è·¯è¿™ç±»çš„ï¼› é“æ­‰å¹¶ä¸”åœ¨æœ¬æœŸåˆŠå‘è¡¨æ’¤ç¨¿å£°æ˜ IEEEè§„å®šï¼šä¸å¼•ç”¨å·²æœ‰çš„æ–‡çŒ® è¿™ç§é—®é¢˜ä¸»è¦æ˜¯ï¼Œæœ‰ä¸€ä¸ªå’Œè‡ªå·±å¾ˆç›¸å…³çš„å·¥ä½œï¼Œä½†æ˜¯æ•ˆæœä¸å¦‚äººå®¶çš„å¥½ï¼Œåˆæ€•åˆ«å˜²è®½æ²¡æœ‰æ„ä¹‰ï¼Œæ‰€ä»¥æ•…æ„ä¸å»å¼•ç”¨ã€‚ åˆçŠ¯é€šå¸¸ä¸»ç¼–ç›´æ¥è­¦å‘Šå¤„ç†ï¼Œå¤šæ¬¡å‡ºç°è¦å†™æ£€è®¨ã€‚ IEEEè§„å®šï¼šä¸€ç¨¿å¤šæŠ• ç»™ä¸»ç¼–å†™é“æ­‰ä¿¡ï¼Œå¹¶å…¬å¼€ã€‚ ç»éªŒæŠ€å·§ç†å·¥ç§‘å†™è®ºæ–‡çš„æŠ€å·§å»ºè®®ä½¿ç”¨Latex ï¼Œç¾è§‚ã€é«˜æ•ˆã€æ ¼å¼åˆ‡æ¢æ–¹ä¾¿ MikTex,https://miktex.orgï¼Œåå°å¼•æ“ WinEdtï¼Œhttps://www.winedt.comï¼Œå‰ç«¯ç¼–è¾‘ JabRefï¼Œhttps://www.jabref.orgï¼Œå‚è€ƒæ–‡çŒ®ç®¡ç† Latexé‡Œçš„å…¬å¼ è¿™é‡Œä¼è€å¸ˆæ¨èä½¿ç”¨alignç¯å¢ƒæ¥æ’ç‰ˆ ä¸å¸¦ç¼–å·çš„å…¬å¼çš„æ’ç‰ˆå¯ä»¥ä½¿ç”¨align*æˆ–è€…æ˜¯ä½¿ç”¨\\nonumber è¿™é‡Œçš„\\[ *** \\]çš„ä½œç”¨å’Œalignç¯å¢ƒç›¸åŒã€‚ Latexé‡Œçš„å›¾ç‰‡ å¯¹äºæ’å›¾ä¸€èˆ¬æ˜¯ä½¿ç”¨çš„æ˜¯\\usepackeage{graphic,subfigure} å°½é‡æ˜¯ä½¿ç”¨æœ€ç®€å•çš„å‘½ä»¤ï¼Œé˜²æ­¢æ— æ³•è¿è¡ŒæˆåŠŸã€‚ å›¾ç‰‡çš„æ ¼å¼æœ€å¥½ä½¿ç”¨.epsçŸ¢é‡å›¾ï¼Œå› ä¸ºçŸ¢é‡å›¾æ”¾å¤§åä¸ä¼šå˜ç³Šï¼Œè€Œä½å›¾ä¼šå˜ç³Šã€‚ [htbp] -optionå‚æ•°ï¼Œä»£è¡¨æœ‰é™æ”¾åˆ°å½“å‰çš„ä½ç½®hï¼Œå¦åˆ™åœ°æ–¹ä¸ä¸å¤Ÿï¼Œä¼šæ”¾åˆ°ä¸‹ä¸€åˆ—çš„æœ€é¡¶ç«¯tï¼Œå…¶æ¬¡æ”¾åˆ°æ•´ä½“é¡µé¢çš„ä¸¤åˆ—çš„ä¸‹æ–¹bã€‚ clip: ä»£è¡¨ç›´æ¥è£æ‰è¾¹ç¼˜çš„ç©ºç™½ã€‚ äº§ç”ŸEPSå›¾åƒ è¿™é‡Œä¼è€å¸ˆå»ºè®®è¿˜æ˜¯å†pptä¸­ç”»å›¾æ¯”è¾ƒå¥½ï¼Œè¿›æœ¬å¯ä»¥æ»¡è¶³æˆ‘ä»¬çš„åŸºæœ¬è¦æ±‚ï¼Œä¸‹è½½Visioæ¯”è¾ƒéº»çƒ¦ï¼Œåˆ«äººæƒ³è®©ç¼–è¾‘è¿˜è¦å†ä¸‹è½½ä¸€ä¸ªVisioã€‚ PPTå›¾åƒè½¬EPS: PPTä¸­é€‰ä¸­å›¾åƒï¼Œå³é”®å¦å­˜ä¸ºjpgæˆ–pngï¼Œç„¶åç”¨wxbmpp https://lsourceforge.net/p/dktools/wiki/wxbmpp è½¬EPS Matlabä¸­å®šåˆ¶å›¾åƒå¤§å°å’Œç¼ºçœå­—ä½“: 12figure('Position',[100 100 400 300]);set(gcfï¼Œ'DefaulttextFontName'ï¼Œ'times new roman'ï¼Œ'DefaultaxesFontName','times new roman' , 'defaultaxesfontsize', 11); Matlab ä¸­å®šåˆ¶ legendåˆ—æ•°å’Œä½ç½®: 1H = legend(CSP-LDAâ€™,'CSP-CLDAâ€™, 'location', 'eastoutside' , 'numcolumns'ï¼Œ1);set(h, 'fontsize', 9, 'position', get(h,'position')+[0.13 0.1 0 0]); Matlab ä¸­å­˜å½©è‰²EPSå›¾åƒ: 12saveas(gcf, 'name.eps' , 'epsc2');# epsc2 ä¸­çš„cä»£è¡¨colorï¼Œå¦‚æœä¸å†™cä¼šå­˜æˆé»‘ç™½å›¾ç‰‡ Latexä¸­çš„è¡¨æ ¼ ä½¿ç”¨çš„æ˜¯\\usepackage{multirow}åŒ…ã€‚ Latexä¸­çš„ä¼ªä»£ç  ä½¿ç”¨çš„æ˜¯\\usepackage[linked, ruled]{algorithm2e}åŒ… è¿™ä¸ªä¾‹å­è¿˜æ˜¯å…¨çš„ï¼ŒåŒ…æ‹¬äº†ä»£ç çš„æ³¨é‡Šã€if-endï¼Œwhile-endï¼Œif-then. å¾ˆæœ‰ä»£è¡¨æ€§ï¼Œä»”ç»†å‚è€ƒã€‚ å‚è€ƒæ–‡çŒ®å‚è€ƒæ–‡çŒ®ç®¡ç† LaTexçš„å‚è€ƒæ–‡çŒ®å»ºè®®ç”¨JabRefæ¥åˆ›å»ºå’Œç®¡ç†bibæ–‡ä»¶ å‡å®š bibæ–‡ä»¶åä¸ºdrwubib.bibï¼Œéœ€è¦çš„æ—¶å€™åªè¦åœ¨æ–‡ç« ç»“å°¾\\end {document}ä¹‹å‰åŠ å…¥:\\bibliographystyle{IEEEtran} \\bibliography {drwubib}å³å¯ä»¥è‡ªåŠ¨å¤„ç†å‚è€ƒæ–‡çŒ® \\Bibliographystyle {IEEEtranS}æ˜¯æŠŠæ–‡çŒ®æŒ‰ç¬¬ä¸€ä½œè€… last name(å§“)éŸ³åºæ’åˆ—ï¼ŒIEEEtranæ˜¯æŒ‰ç…§å‚è€ƒæ–‡çŒ®åœ¨æ­£æ–‡ä¸­å‡ºç°çš„é¡ºåºæ’åˆ—ã€‚ è¦ä½¿æ‰€æœ‰ .tex æ–‡ä»¶éƒ½èƒ½æ‰¾åˆ°å…¬ç”¨çš„ bib æ–‡ä»¶ï¼Œè€Œä¸æ˜¯æ‰‹åŠ¨åœ¨æ¯ä¸ª .tex æ–‡ä»¶ç›®å½•é‡Œé¢copyä¸€ä»½ bib æ–‡9ä»¶ï¼Œå¯ä»¥æŠŠå…¬ç”¨çš„bib æ–‡ä»¶ copyåˆ°MikTex çš„å¯¹åº”ç›®å½•ä¸‹ï¼Œæ¯”å¦‚C:Program Files\\LaTex\\MiKTeX2.9\\bibtexlbibldrwubib å¯¹äºè€ç‰ˆæœ¬çš„ WinEdtï¼Œåœ¨èœå•é€‰æ‹©Texâ†’MikTex â†’ Options â†’ General â†’ Refresh FNDB, MikTexä»¥åå°±å¯ä»¥è‡ªåŠ¨æ‰¾åˆ°bibæ–‡ä»¶ å¯¹äºæ–°ç‰ˆæœ¬çš„WinEdtï¼Œå¯èƒ½èœå•é‡Œé¢æ²¡æœ‰ä¸Šè¿°é€‰é¡¹ï¼Œæˆ–è€…ä¸å¯ç”¨ã€‚è§£å†³åŠæ³•æ˜¯åœ¨å¼€å§‹èœå•é‡Œé¢æœç´¢MikTex Consoleï¼ŒTasks èœå•é‡Œé¢æœ‰Refresh file name database ç‰¹æ®Šçš„å¯¹äºä¸­æ–‡çš„å‚è€ƒæ–‡çŒ® è¦åœ¨JabRefä¸­ä½¿ç”¨ä¸­æ–‡å‚è€ƒæ–‡çŒ®ï¼Œéœ€è¦è®¾ç½®:Options â†’Preference â†’ General â†’ Default Encoding â†’ UTF8Options â†’ Preference â†’ Appearance â†’ Set table font â†’ MicrosoftYaHei å¦åˆ™ä¸­æ–‡å¯èƒ½æ˜¯ä¹±ç Preferenceè®¾ç½®å¥½ä¹‹åå¯exportä¿å­˜ï¼Œä»¥åè£…æ–°ç‰ˆæœ¬æ—¶ç›´æ¥importè¿›å»Preferenceæ–‡ä»¶æ˜¯ä¸åŒç‰ˆæœ¬é€šç”¨çš„ ä¸€èˆ¬è¦æ±‚ ä¸€èˆ¬å‚è€ƒæ–‡çŒ®ä¹‹é—´ä½¿ç”¨çš„æ˜¯ and è¿æ¥, å› ä¸ºé€—å·æœ‰å…¶ç‰¹æ®Šçš„å«ä¹‰ã€‚ { } çš„ä½œç”¨æ˜¯é˜²æ­¢ç¼–è¯‘å™¨å°†å…¶è‡ªåŠ¨å˜æˆå°å†™ã€‚ å‚è€ƒæ–‡çŒ®æ ¼å¼æœŸåˆŠè®ºæ–‡Article Volume(å·)ã€issue(æœŸ)ã€pageséƒ½ä¸èƒ½å°‘ IEEE Transactions on XXXä¸€èˆ¬ç®€å†™ä¸º{IEEE}Trans. on XXX æ³¨æ„Transåé¢æœ‰ä¸ªç‚¹ï¼ŒæœŸåˆŠåé¦–å­—æ¯å¤§å†™ èŠ±æ‹¬å·é‡Œé¢çš„æ–‡å­—åœ¨è¾“å‡ºæ—¶å¤§å°å†™ä¸å˜ï¼Œè¿™æ ·å¯é˜²æ­¢ç¼–è¯‘åIEEEå˜æˆIeee æ–‡ç« æ ‡é¢˜ä¸­æœ‰ç‰¹æ®Šå­—ç¬¦éœ€è¦å¤§å†™çš„è¯ï¼Œä¹Ÿç”¨èŠ±æ‹¬å·åŒ…èµ·æ¥ ä¼šè®®è®ºæ–‡ inproceedings ä¼šè®®æœˆä»½ã€åœ°ç‚¹éƒ½ä¸èƒ½å°‘ æœ‰æ—¶å€™æ²¡æœ‰é¡µç ï¼Œå°±ä¸è¾“å…¥ Proceedingsçš„ç®€å†™æ˜¯Proc. Internationalçš„ç®€å†™æ˜¯Intâ€™l Conferenceçš„ç®€å†™æ˜¯ Conf. æ³¨æ„åé¢çš„ç‚¹ï¼Œå…¨è®®åé¦–å­—æ¯å¤§å†™ åœ¨ç¾å›½å¼€çš„ä¼šè®®ï¼Œè¦å†™å‡ºä¸»åŠåŸå¸‚å’Œå·çš„ç¼©å†™ï¼ŒNVå†…åè¾¾å· Latexæ–‡æ¡£çš„Track Change å®‰è£…latexdiffï¼š https://ctan.org/pkg/latexdiff?lang=enlatexdiff â€”math-markup=0 old.tex new.tex &gt; diff.tex å¦‚æœæ£€æŸ¥æ•°å­¦å…¬å¼æœ‰æ— å˜åŒ–å‡ºé—®é¢˜ï¼Œå¯è®¾ç½®â€”math-markup=0,ä¸æ£€æŸ¥å…¬å¼æ›´æ–° Latexdiffä¸æ˜¯å®Œç¾çš„ï¼Œäº§ç”Ÿçš„texæ–‡ä»¶é‡Œé¢å¯èƒ½æœ‰é”™è¯¯,æ— æ³•ç¼–è¯‘ï¼Œå¯¹æ•°å­¦å‘½ä»¤å’Œè¡¨æ ¼å‘½ä»¤ä¼šå‡ºé”™ æœ€å¸¸è§æ˜¯åœ¨è¡¨ä¸­ï¼Œå¯ç”¨æ–°æ–‡æ¡£ä¸­çš„è¡¨æ ¼æºç ç›´æ¥è¦†ç›–diff.texä¸­å¯¹åº”çš„éƒ¨åˆ†ï¼Œå³è¡¨æ ¼å°±ä¸track changeäº† å› ä¸ºæœŸåˆŠå®¡ç¨¿çš„è¿‡ç¨‹ä¸­ä¼šè¦æ±‚æäº¤æ–°è€ç‰ˆæœ¬ä¹‹é—´çš„åŒºåˆ«ã€‚è¿™æ ·æ“ä½œæ¯”è¾ƒçš„æ–¹ä¾¿ã€‚ è“è‰²ä¸ºæ–°æ·»åŠ çš„å†…å®¹ï¼Œçº¢è‰²ä¸ºä¿®æ”¹åˆ å»çš„å†…å®¹ã€‚ PDFå­—ä½“åµŒå…¥ IEEEä¼šè®®æ–‡ç« ä¸ºä»€ä¹ˆè¦æ±‚å­—ä½“embedded? æœ‰äº›æ–‡ç« ç”¨äº†ç‰¹æ®Šçš„å­—ä½“(å¾·è¯­éŸ©è¯­å¦‚æœæ²¡æœ‰è£…å¯èƒ½æ— æ³•æ˜¾ç¤º)ï¼Œè¯»è€…è®¡ç®—æœºä¸Šé¢å¯èƒ½æ²¡æœ‰å®‰è£…ï¼Œå¯¼è‡´æ–‡ç« æ— æ³•æ­£å¸¸æ˜¾ç¤ºã€‚æŠŠå­—ä½“embed åˆ°æ–‡ç« ä¸­å»ï¼Œå°±ç›¸å½“äºç¼–è¯‘ç¨‹åºæ—¶æŠŠæ‰€æœ‰ä¾èµ–çš„åŒ…éƒ½æ‰“åŒ…è¿›å»ï¼Œè¿™æ ·æ²¡æœ‰å®‰è£…è¯¥å­—ä½“çš„è¯»è€…ä¹Ÿèƒ½æ­£å¸¸é˜…è¯» IEEEä¼šè®®æ–‡ç« ä¸ºä»€ä¹ˆè¦æ±‚å­—ä½“subset? ä¸€ä¸ªå­—ä½“åŒ…æ‹¬å¾ˆå¤šå­—æ¯å’Œç¬¦å·ï¼Œä½“ç§¯å¯èƒ½å¾ˆå¤§ï¼Œè€Œæ–‡ç« ä¸­ç”¨åˆ°çš„å¯èƒ½åªæœ‰å‡ ä¸ªå­—ç¬¦ã€‚Subsetå°±æ˜¯åªæ‰“åŒ…è¿™å‡ ä¸ªç”¨åˆ°çš„å­—ç¬¦ï¼Œä»è€Œé¿å…æ–‡ç« ä½“ç§¯è¿‡å¤§ ï¼ˆæœŸåˆŠæ–‡ç« åæœŸä¼šæœ‰å¯¹äºçš„ç¼–è¾‘å¸®æˆ‘ä»¬å¤„ç†ï¼Œè€Œä¼šè®®è®ºæ–‡æ²¡æœ‰äººå¸®æˆ‘ä»¬åæœŸå¤„ç†ï¼‰ IEEEæœŸåˆŠæ–‡ç« ä¸ºä»€ä¹ˆä¸è¦æ±‚å­—ä½“embedded subset? IEEEçš„æœŸåˆŠæ–‡ç« éƒ½ä¼šç»è¿‡ç¼–è¾‘éƒ¨é‡æ–°æ’ç‰ˆæ•´ç†ï¼Œä»–ä»¬ä¼šå¤„ç†è¿™äº›ä¸œè¥¿ä¸éœ€è¦ä½œè€…è€ƒè™‘ã€‚ä¼šè®®æ–‡ç« æ˜¯ä½œè€…ä¸Šä¼ æœ€ç»ˆç‰ˆï¼Œæ‰€ä»¥è´£ä»»åœ¨ä½œè€… å­—ä½“åµŒå…¥çš„æ–¹æ³• PPTå†…ä½¿ç”¨Latex: lguanaTexhttp://www.jonathanleroux.org/software/iguanatex ä½†æ˜¯ï¼Œè¿™ä¸ªä»…ä»…æ˜¯ä¸ªæ’ä»¶ï¼Œä¸å¯ä»¥å°†ä¸€æ•´ä¸ªå‘½ä»¤éƒ½copyè¿‡æ¥ã€‚ åœ¨ç”Ÿæˆçš„å…¬å¼æ˜¯ä»¥ä¸€ä¸ªå›¾çš„å½¢å¼æ’å…¥åœ¨pptä¸­ï¼Œä¸ç®¡æ€æ ·æ”¾å¤§éƒ½å¾ˆæ¸…æ™°ã€‚ è€Œä¸”è¿™ä¸ªå…¬å¼çš„å¾ˆæ–¹ä¾¿ç¼–è¾‘ï¼Œè€Œä¸”å°±ç®—åˆ«äººçš„ç”µè„‘é‡Œæ²¡æœ‰è¿™ä¸ªæ’ä»¶ä¹Ÿæ˜¯å¯ä»¥æ­£å¸¸æ˜¾ç¤ºçš„ã€‚ Matlabä¸­ä½¿ç”¨LaTex å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œ'interpreter','latex'è¡¨ç¤ºè§£ælatexçš„å‘½ä»¤ã€‚ ä½¿ç”¨latexçš„å­—ç¬¦ä¼šæ›´åŠ çš„ç¾è§‚ã€‚","link":"/2022/03/03/%E7%A7%91%E7%A0%94%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B0/%E8%AE%BA%E6%96%87%E5%86%99%E4%BD%9C%E6%8C%87%E5%AF%BC/"},{"title":"ç¬¬0ç« ç»ªè®º","text":"hljs.initHighlightingOnLoad(); æœ¬ç« ä¸»è¦ä»‹ç»æ§åˆ¶ç†è®ºçš„æ€§è´¨ã€å‘å±•ã€åº”ç”¨ä»¥åŠæ§åˆ¶åŠ¨æ€ç³»ç»Ÿçš„å‡ ä¸ªåŸºæœ¬æ­¥éª¤ï¼Œä¸ºä»¥åç°ä»£æ§åˆ¶ç†è®ºçš„å­¦ä¹ åšé“ºå«ã€‚ 0.1 æ§åˆ¶ç†è®ºçš„æ€§è´¨æ§åˆ¶ç†è®ºçš„ä¸¤ä¸ªç›®æ ‡ï¼š äº†è§£åŸºæœ¬æ§åˆ¶åŸç†ï¼› ä»¥æ•°å­¦è¡¨è¾¾å®ƒä»¬ï¼Œä½¿å®ƒä»¬æœ€ç»ˆèƒ½ç”¨ä»¥è®¡ç®—è¿›å…¥ç³»ç»Ÿçš„è¾“å…¥ï¼Œæˆ–ç”¨ä»¥è®¾è®¡è‡ªåŠ¨æ§åˆ¶ç³»ç»Ÿã€‚ ä¸¤ä¸ªä¸»é¢˜ï¼šè‡ªåŠ¨æ§åˆ¶é¢†åŸŸä¸­æœ‰ä¸¤ä¸ªä¸åŒçš„ä½†åˆç›¸äº’è”ç³»çš„ä¸»é¢˜ã€‚ åé¦ˆçš„æ¦‚å¿µã€‚ æœ€ä¼˜æ§åˆ¶çš„æ¦‚å¿µã€‚ 0.2 æ§åˆ¶ç†è®ºçš„å‘å±• 20ä¸–çºª20å¹´ä»£åˆ°40å¹´ä»£ï¼Œé©¬å…‹æ–¯å¨å°”å¯¹è£…æœ‰è°ƒé€Ÿå™¨çš„è’¸æ±½æœºç³»ç»ŸåŠ¨æ€ç‰¹æ€§çš„åˆ†æã€é©¬è¯ºæ–¯åŸºå¯¹èˆ¹èˆ¶é©¾é©¶æ§åˆ¶çš„ç ”ç©¶éƒ½æ˜¯æ§åˆ¶ç†è®ºçš„å¼€æ‹“æ€§å·¥ä½œã€‚ 20ä¸–çºª40å¹´ä»£è‡³50å¹´ä»£ï¼Œç»´çº³å¯¹æ§åˆ¶ç†è®ºä½œå‡ºäº†åˆ›é€ æ€§çš„è´¡çŒ®ã€‚ 20ä¸–çºª50å¹´ä»£åæœŸåˆ°60å¹´ä»£åˆæœŸæ˜¯æ§åˆ¶ç†è®ºå‘å±•çš„è½¬æŠ˜æ—¶æœŸã€‚ è‹è”å­¦è€…åœ¨20ä¸–çºª50å¹´ä»£å¯¹åŒ…å«éçº¿æ€§ç‰¹æ€§ã€é¥±å’Œä½œç”¨å’Œå—åˆ°é™åˆ¶çš„æ§åˆ¶ç­‰å› ç´ çš„ç³»ç»Ÿçš„æœ€ä¼˜ç¬æ€çš„ç ”ç©¶è¡¨ç°å‡ºå¾ˆå¤§çš„å…´è¶£ã€‚è¿™äº›å­¦è€…çš„ç ”ç©¶è®¨è®ºå¯¼è‡´äº†åºç‰¹é‡Œäºšé‡‘çš„â€œæå¤§å€¼åŸç†â€ã€‚ æ˜¾ç¤ºæ§åˆ¶ç†è®ºè½¬æŠ˜æ—¶æœŸçš„å¦ä¸€ä¸ªé‡Œç¨‹ç¢‘æ˜¯20ä¸–çºª50å¹´ä»£åæœŸå¡å°”æ›¼(å¡å°”æ›¼â€”â€”å¸ƒè¥¿)æ»¤æ³¢å™¨çš„å‘ç°ã€‚ æœ€è¿‘25å¹´çº¿æ€§ç³»ç»Ÿç†è®ºçš„ç ”ç©¶éå¸¸æ´»è·ƒã€‚ 20ä¸–çºª60å¹´ä»£åæœŸå’Œ70å¹´ä»£æ—©æœŸï¼Œå°†çº¿æ€§äºŒæ¬¡å‹ç†è®ºæ¨å¹¿åˆ°æ— ç©·ç»´ç³»ç»Ÿ(å³ä»¥åå¾®åˆ†æ–¹ç¨‹ã€æ³›å‡½å¾®åˆ†æ–¹ç¨‹ã€ç§¯åˆ†å¾®åˆ†æ–¹ç¨‹å’Œåœ¨å·´æ‹¿èµ«ç©ºé—´çš„ä¸€èˆ¬å¾®åˆ†æ–¹ç¨‹æè¿°çš„ç³»ç»Ÿ)çš„å·¥ä½œå¾—åˆ°å¾ˆå¤§è¿›å±•ã€‚ ç›®å‰ç ”ç©¶çš„æ˜¯ä»¥çº¿æ€§åå¾®åˆ†æ–¹ç¨‹æˆ–ç›¸å¯¹ç®€å•çš„è¿Ÿå»¶æ–¹ç¨‹æè¿°çš„åªèƒ½åœ¨ç©ºé—´çš„è¾¹ç•Œä¸ŠåŠ ä»¥è§‚å¯Ÿå’Œæ§åˆ¶çš„ç³»ç»Ÿã€‚ 20ä¸–çºª70å¹´ä»£æœ«80å¹´ä»£åˆï¼Œåé¦ˆæ§åˆ¶çš„è®¾è®¡é—®é¢˜ç»å†äº†ä¸€ä¸ªé‡æ–°ä¿®æ­£çš„è¿‡ç¨‹ã€‚éšç€äººå·¥æ™ºèƒ½çš„å‘å±•å’Œå¼•å…¥äº†æ–°çš„è®¡ç®—æœºç»“æ„ï¼Œæ§åˆ¶ç†å’Œè®¡ç®—æœºç§‘å­¦çš„è”ç³»æ„ˆæ¥æ„ˆå¯†åˆ‡ã€‚ 0.3æ§åˆ¶ç†è®ºçš„åº”ç”¨æ§åˆ¶ç³»ç»Ÿä¹‹æ‰€ä»¥èƒ½å¾—åˆ°å¦‚æ­¤æ™®éçš„åº”ç”¨ï¼Œè¦å½’åŠŸäº ç°ä»£ä»ªè¡¨åŒ–(å®Œå¤‡çš„ä¼ æ„Ÿå™¨å’Œæ‰§è¡Œæœºæ„) ä¾¿å®œçš„ç”µå­ç¡¬ä»¶ æ§åˆ¶ç†è®ºæœ‰å¤„ç†å…¶æ¨¡å‹å’Œè¾“å‡ºä¿¡å·æ‰€å…·æœ‰çš„ä¸ç¡®å®šæ€§åŠ¨æ€ç³»ç»Ÿçš„èƒ½åŠ› åœ¨æ§åˆ¶ç†è®ºä¸­å·²å®Œå–„çš„å„ç§æ–¹æ³•æ„ˆæ¥æ„ˆå¾—åˆ°æ™®éåº”ç”¨çš„åŒæ—¶ï¼Œå…ˆè¿›çš„ç†è®ºæ¦‚å¿µçš„åº”ç”¨å´ä»é›†ä¸­åœ¨åƒç©ºé—´å·¥ç¨‹é‚£æ ·çš„é«˜æŠ€æœ¯æ–¹é¢ã€‚å½“ç„¶ï¼Œç”±äºè®¡ç®—æœºæŠ€æœ¯çš„é£é€Ÿå‘å±•å’Œä¸–ç•Œæ€§çš„æ¿€çƒˆçš„å·¥ä¸šç«äº‰ï¼Œè¿™ç§æƒ…å†µå°†ä¼šæ”¹å˜ã€‚ æ§åˆ¶æ¦‚å¿µå¾—åˆ°ä¸»è¦åº”ç”¨çš„ä¸€ä¸ªé¢†åŸŸæ˜¯çŸ³æ²¹åŒ–å·¥ç”Ÿäº§è¿‡ç¨‹ã€‚é’¢é“è¡Œä¸šä¸­çƒ­è½§å‚æ˜¯æœ€æ—©æˆåŠŸåœ°é‡‡ç”¨è®¡ç®—æœºæ§åˆ¶çš„å·¥å‚ã€‚ 0.4 æ§åˆ¶ä¸€ä¸ªåŠ¨æ€ç³»ç»Ÿçš„å‡ ä¸ªåŸºæœ¬æ­¥éª¤ç®€å•åœ°è¯´ï¼Œæ§åˆ¶ä¸€ä¸ªåŠ¨æ€ç³»ç»Ÿæœ‰ä¸‹åˆ—å››ä¸ªåŸºæœ¬æ­¥éª¤ï¼š å»ºæ¨¡ï¼šä¸ºä¸€ä¸ªç³»ç»Ÿé€‰æ‹©ä¸€ä¸ªæ•°å­¦æ¨¡å‹æ˜¯æ§åˆ¶å·¥ç¨‹ä¸­æœ€é‡è¦çš„å·¥ä½œã€‚ ç³»ç»Ÿè¾¨è¯†ï¼š å®šä¹‰ä¸ºç”¨åœ¨ä¸€ä¸ªåŠ¨æ€ç³»ç»Ÿä¸Šè§‚å¯Ÿåˆ°çš„è¾“å…¥ä¸è¾“å‡ºæ•°æ®æ¥ç¡®å®šå®ƒçš„æ¨¡å‹çš„è¿‡ç¨‹ã€‚ å½“å‰ç³»ç»Ÿè¾¨è¯†æ–¹é¢çš„ç ”ç©¶é›†ä¸­åœ¨ä¸‹åˆ—è¯¸åŸºæœ¬é—®é¢˜ä¸Šï¼šè¾¨è¯†é—®é¢˜çš„å¯è§£æ€§å’Œé—®é¢˜æå‡ºçš„æ°å½“æ€§ã€å¯¹å„ç±»æ¨¡å‹çš„å‚æ•°ä¼°è®¡æ–¹æ³•ã€‚ ä¿¡å·å¤„ç†ï¼šæ§åˆ¶ç†è®ºå¤–é¢çš„ç‹¬ç«‹çš„ä¸€é—¨å­¦ç§‘ï¼Œä½†è¿™ä¸¤å­¦ç§‘ä¹‹é—®æœ‰è®¸å¤šé‡å ä¹‹å¤„ï¼Œè€Œæ§åˆ¶ç•Œæ›¾å¯¹ä¿¡å·å¤„ç†ä½œå‡ºäº†é‡è¦è´¡çŒ®ï¼Œç‰¹åˆ«æ˜¯åœ¨æ»¤æ³¢å’Œå¹³æ»‘çš„é¢†åŸŸã€‚ æ§åˆ¶çš„ç»¼åˆï¼šä¸ºæ§åˆ¶ç³»ç»Ÿç”Ÿæˆæ§åˆ¶è§„å¾‹ã€‚è¿™äº›è¿‡ç¨‹çš„å¤æ‚æ€§å¯¼è‡´äº†å„ç§æ§åˆ¶ç ”ç©¶è¯¾é¢˜ï¼Œä¸»è¦æœ‰ï¼š","link":"/2022/02/08/%E7%8E%B0%E4%BB%A3%E6%8E%A7%E5%88%B6%E7%90%86%E8%AE%BA/%E7%AC%AC0%E7%AB%A0%E7%BB%AA%E8%AE%BA/"},{"title":"TransformeråŸç†åŠå…¶PyTorchæºç è®²è§£ï¼ˆä¸€ï¼‰","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦æ˜¯åˆæ­¥çš„ç†Ÿæ‚‰äº†ä¸€ä¸‹Transformeræœºåˆ¶ï¼Œä»¥åŠç†Ÿæ‚‰äº†ä¸€ä¸‹Pytorchçš„å®˜æ–¹ä»£ç ï¼Œå¯¹äºä¸€äº›é—ç•™çš„é—®é¢˜å’Œmaskã€ä½ç½®ç¼–ç ä»£ç çš„ä¹¦å†™å°†æ”¾åˆ°ä»¥åçš„æ–‡ç« é‡Œã€‚ åŸºæœ¬åŸç†æ¦‚è¿° é¦–å…ˆæ¥çœ‹CNN æƒé‡å…±äº«ï¼šè¿™ä¸ªå…¶å®å’Œæ»‘åŠ¨çª—å£æœ‰æ¯”è¾ƒç´§å¯†çš„è”ç³»ï¼Œé€šè¿‡æƒé‡å…±äº«å¯ä»¥å®ç°å¹³ç§»ä¸å˜æ€§ï¼Œå°±æ˜¯è¯´çª—å£æ— è®ºä»å·¦åˆ°å³è¿˜æ˜¯ä»å³åˆ°å·¦ï¼Œå…¶ç»“æœæ˜¯ä¸å˜çš„ï¼Œæ²¡æœ‰å‰åå…³è”æ€§ã€‚äºæ˜¯è¿™ç§ç»“æ„å°±ä¾¿äºå¹¶è¡Œè®¡ç®—çš„å®ç°ã€‚ æ»‘åŠ¨çª—å£ï¼šä¸»è¦ä»¥æ¥çš„å‡è®¾å°±æ˜¯å±€éƒ¨å…³è”æ€§å»ºæ¨¡ï¼Œå¦‚æœæƒ³è¦å¯¹å…¨å±€è¿›è¡Œå»ºæ¨¡å°±éœ€è¦å°†æˆ‘ä»¬çš„å·ç§¯å±‚è¿›è¡Œå åŠ ï¼Œè¿™æ ·å¯ä»¥å¢åŠ åŸæ¥çš„æ„Ÿå—é‡ï¼Œè¿›è€Œå®ç°å¯¹å…¨å±€é•¿ç¨‹ä¿¡æ¯çš„æŠŠæ¡ã€‚ åŸºäºåˆšæ‰çš„å±€éƒ¨å»ºæ¨¡å‡è®¾ï¼Œå› æ­¤CNNæœ‰å¯¹ç›¸å¯¹çš„ä½ç½®æ¯”è¾ƒæ•æ„Ÿï¼Œå¯¹äºç»å¯¹çš„ä½ç½®ä¸æ˜¯å¾ˆæ•æ„Ÿçš„ç‰¹ç‚¹ã€‚ ä¹‹åçœ‹RNN æœ‰åºé€’å½’å»ºæ¨¡ï¼šå…¶åœ¨æœ¬æ—¶åˆ»çš„è¾“å‡ºè¦ä¾èµ–ä¸Šä¸€æ—¶åˆ»çš„å‡ºå…¥å’Œæœ¬æ—¶åˆ»çš„è¾“å…¥ã€‚ å¯¹é¡ºåºæ•æ„Ÿï¼šåºåˆ—é¢ å€’é¡ºåºåè®¡ç®—çš„ç»“æœä¸ä¸€æ ·ã€‚ ä¸²è¡Œè®¡ç®—ï¼šæ ¹æ®å…¶æœ‰åºé€’å½’å»ºæ¨¡çš„æ€§è´¨å¯å¾—ï¼Œå…¶è¿ç®—çš„é¡ºåºæ˜¯ä¸²è¡Œçš„ï¼Œä¸‹ä¸€æ—¶åˆ»çš„è¾“å…¥éœ€è¦ä¸Šä¸€æ—¶åˆ»çš„è¾“å‡ºã€‚ å¤æ‚åº¦ï¼šå•æ­¥çš„å¤æ‚åº¦å…¶å®éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯æ€»ä½“çš„å¤æ‚åº¦æ˜¯è·Ÿåºåˆ—çš„é•¿åº¦æˆæ­£ç›¸å…³çš„ã€‚ åŸºäºæœ‰åºå»ºæ¨¡çš„ç‰¹æ€§å¯å¾—ï¼Œå…¶å¯¹äºç›¸å¯¹ä½ç½®å’Œç»å¯¹ä½ç½®éƒ½æ˜¯æ•æ„Ÿçš„ï¼Œè€Œä¸”å¯¹äºé•¿ç¨‹å»ºæ¨¡è¿˜æ˜¯éœ€è¦å åŠ ç½‘ç»œã€‚ æœ€åå°±æ˜¯transformer æ— å±€éƒ¨å‡è®¾ï¼šè¿™æ ·å°±å¯ä»¥å®ç°å¹¶è¡Œè®¡ç®—ï¼Œä½†æ˜¯å…¶å¯¹äºç›¸å¯¹ä½ç½®ä¹Ÿä¸æ•æ„Ÿå› ä¸ºå…¶ä¸æ˜¯å¯¹å±€éƒ¨è¿›è¡Œçš„å»ºæ¨¡ï¼Œå…¶ä¸»è¦æ˜¯çœ‹ä½ç½®ç¼–ç æ¥å®ç°å¯¹ä½ç½®ä¿¡æ¯çš„æ„ŸçŸ¥ã€‚ æ²¡æœ‰æœ‰åºå‡è®¾ï¼šä¸ä¼šåƒRNNé‚£æ ·è¿˜è¦ç­‰å¾…ä¸Šä¸€æ—¶åˆ»çš„åŠç»“æœæ‰å¯ä»¥å®ç°æœ¬æ­¥çš„è®¡ç®—ã€‚å› æ­¤è¿™æ ·å¯¹äºç»å¯¹ä½ç½®ä¹Ÿä¸æ˜¯å¾ˆæ•æ„Ÿã€‚è¿™é‡Œå¯¹ä½ç½®çš„æ„ŸçŸ¥åŸºæœ¬è¦é çš„ä½ç½®ç¼–ç ã€‚ ä»»æ„å­—ç¬¦éƒ½å¯ä»¥å»ºæ¨¡ï¼šå°åˆ°ä¸¤ä¸ªå­—ç¬¦ï¼Œå¤§åˆ°ä¸€ç¯‡æ–‡ç« éƒ½å¯ä»¥æ¥å»ºæ¨¡ï¼Œä½†æ˜¯è‡ªæ³¨æ„åŠ›æœºåˆ¶çš„ç¼ºç‚¹å°±æ˜¯è®¡ç®—åœ°å¤æ‚åº¦æ˜¯$O(n^2)$ã€‚ transformeråŸºæœ¬åŸç† ä»æ€»ä½“æ˜¯æ¥çœ‹ï¼Œåˆ†ä¸ºå·¦è¾¹çš„encoderå’Œå³è¾¹çš„decoderï¼Œencoderéƒ¨åˆ†ï¼Œå…¶è¾“å…¥çš„æ˜¯è¦è¾“å…¥çš„è¯è¯­ç¼–ç ï¼Œdecoderéƒ¨åˆ†çš„è¾“å…¥ä¸ºä¸Šä¸€æ—¶åˆ»çš„è¾“å‡ºçš„å­—ç¬¦ï¼Œä¸­é—´éƒ¨åˆ†åˆåŠ å…¥encoderçš„è¾“å‡ºã€‚ å¯¹äºencoderè€Œè¨€ï¼Œå…¶æ˜¯ç”±$N_x$ä¸ªç›¸åŒçš„å±‚å åŠ è€Œæˆçš„ï¼Œ(It is composed of a stack of $N_x$ identical layer) ã€‚ åŒæ—¶æ¯ä¸ªblock ä¸Šé¢åˆæœ‰ä¸¤ä¸ªå°çš„æ¨¡å—ï¼Œä¸€ä¸ªæ˜¯mult-head self-attention mechanismçš„layer ï¼Œå¦ä¸€ä¸ªæ˜¯å…¨è¿æ¥MLP layer ã€‚ è¿™ä¸¤ä¸ªsublayeråˆé…ç½®äº†æ®‹å·®è¿æ¥ residual connectionï¼Œä¹‹åè¿›è¡ŒlayerNormã€‚ å¯¹äºdecoderè€Œè¨€ï¼Œä¹Ÿæ˜¯å…¶æ˜¯ç”±$N_x$ä¸ªç›¸åŒçš„å±‚å åŠ è€Œæˆçš„ï¼Œ(It is composed of a stack of $N_x$ identical layer) ã€‚ ä½†æ˜¯ï¼Œè¿™é‡Œçš„mult-head self-attention mechanismæ˜¯å¸¦æœ‰å› æœmaskçš„ï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯ä¿è¯è¾“å…¥iæ—¶åˆ»çš„å†…å®¹ï¼Œä¸ä¼šçœ‹åˆ°i+1æ—¶åˆ»çš„å†…å®¹ï¼Œä¿è¯å› æœå’Œè®­ç»ƒä¸é¢„æµ‹çš„ä¸€è‡´æ€§ã€‚ ä¹‹åå°†mask mult -head attention çš„è¾“å‡ºçš„queryï¼Œè€Œencoderå°†key å’Œ value è¾“å…¥å°½é‡è®¡ç®—attention çš„å€¼ã€‚ è¿™3ä¸ªsublayeråˆé…ç½®äº†æ®‹å·®è¿æ¥ residual connectionï¼Œä¹‹åè¿›è¡ŒlayerNormã€‚ ä½ç½®ç¼–ç ï¼Œç”±äºattentionæœºåˆ¶å¯¹äºå…¨å±€å’Œå±€éƒ¨éƒ½æ˜¯ä¸æ•æ„Ÿçš„ï¼Œå› æ­¤åŠ å…¥ä½ç½®ç¼–ç ã€‚ é€šè¿‡æ®‹å·®ç½‘ç»œä½¿å¾—ä½ç½®ä¿¡æ¯ä¸€ç›´å­˜åœ¨ï¼Œä¸ä¼šæ¢¯åº¦æ¶ˆå¤±ã€‚ é€šè¿‡ä»¥ä¸‹çš„ç»“æ„æ¥è¯¦è§£tranformerç»“æ„ï¼š input word embedding ï¼šå…¶å®å°±æ˜¯å°†ä¸€ä¸ªé«˜ç»´çš„one-hotç¼–ç [0,1,0,0,â€¦,0] é€šè¿‡ä¸€ä¸ªå…¨è¿æ¥å±‚$Linear(len,num) \\quad num&lt;len$ è½¬æˆä¸€ä¸ªæ¯”è¾ƒç¨ å¯†çš„è¿ç»­çš„å‘é‡ï¼Œè¿™æ ·å¯ä»¥èŠ‚çº¦å†…å­˜ã€‚ position encodingï¼šä¸»è¦çš„å‡è®¾ï¼Œç”±ä»¥ä¸‹å‡ ç‚¹ï¼š åŸºäºä¸‹é¢çš„å‡è®¾ï¼Œæˆ‘ä»¬çš„ä½ç½®ç¼–ç é€šè¿‡sin/cosæ¥è¡¨å¾ï¼š æ¯ä¸ªä½ç½®ç¡®å®šï¼Œå› ä¸ºä¼ ç»Ÿçš„[0,1]ç­‰è·ç¼–ç æ–¹å¼ï¼Œå¦‚æœè¾“å…¥ä¸€ä¸ªå•è¯ï¼Œåºåˆ—çš„é•¿åº¦ä¸ä¸€æ ·äº†ï¼Œå‘é‡åˆè¦é‡æ–°ç¼–ç ï¼Œäºæ˜¯åˆè¦æ— æ³•ä¿è¯ä½ç½®ä¸å˜æ€§ã€‚(å³ä¸¤ä¸ªä¸åŒé•¿åº¦çš„åºåˆ—ä¸Šç¬¬äºŒä¸ªä½ç½®ä¸Šçš„ä½ç½®ç¼–ç æ˜¯ç›¸åŒçš„) ä¸åŒå¥å­ä¸­çš„ç›¸å¯¹è·ç¦»ä¿æŒä¸€è‡´ï¼Œå°±æ˜¯æ— è®ºå¥å­çš„æ€»é•¿æ˜¯å¤šå°‘ï¼Œç›¸å¯¹è·ç¦»ä¸º3çš„ä¸¤è¯çš„ä½ç§»ç¼–ç å·®æ€»æ˜¯ç›¸åŒçš„ã€‚ ä½ç½®ç¼–ç å¯ä»¥æ¨å¹¿åˆ°æ›´å·®çš„å¥å­ã€‚ pe(pos+k)å¯ä»¥å†™æˆpe(pos)çš„çº¿æ€§ç»„åˆï¼Œå°±æ˜¯å¦‚æœæµ‹è¯•å‡ ä½•ä¸­çš„å¥å­æ›´é•¿ï¼Œæˆ‘ä»¬ä¾ç„¶å¯ä»¥å°†å…¶ä½ç½®ç¼–ç å†™æˆçŸ­å¥å­ä½ç½®ç¼–ç çš„çº¿æ€§ç»„åˆã€‚ $ pe(pos+k)=\\alpha_1pe(pos)+\\alpha_2pe(pos) $ æ»¡è¶³ä¸Šè¿°æ€§è´¨çš„æœ€å¥½çš„å°±æ˜¯ä¸‰è§’å‡½æ•°äº†ï¼Œè¿™è¦å¯ä»¥å®ç°å°†æµ‹è¯•ä¸­çš„å¥å­è¿›è¡Œæ¨å¹¿ã€‚ é€šè¿‡æ®‹å·®è¿æ¥å®ç°ä½ç½®ä¿¡æ¯å¯ä»¥æµå…¥æ›´æ·±å±‚çš„ç½‘ç»œã€‚ multi-head self-attentionï¼šå¤šå¤´çš„è‡ªæ³¨æ„åŠ›æœºåˆ¶æœ‰è¾ƒå¼ºçš„å»ºæ¨¡èƒ½åŠ›å’Œè¡¨å¾ç©ºé—´ï¼› è€Œä¸”å…¶æœ‰å¤šç»„Query,Key,Valueï¼Œè¿›è€Œå®ç°æ¯ç»„éƒ½è®¡ç®—ä¸€ä¸ªattentionï¼Œä¹‹åæ‹¼æ¥æˆä¸ºä¸€ä¸ªå‘é‡ã€‚ å°±å¾—åˆ°çš„attentionå‘é‡è¾“å…¥åˆ°FFN(å…¨è¿æ¥ç½‘ç»œ)ä¸­å¾—åˆ°æœ€åçš„ç»“æœã€‚ åŒæ—¶å¦‚æœåŸæ¥å‘é‡æ˜¯512ç»´çš„ï¼Œè¾“å…¥æœ‰8ä¸ªheadï¼Œæ¯ä¸ªheadå°±æœ‰64ç»´ï¼Œä¿è¯æ•´ä½“çš„è¿ç®—é‡åŒæ­¥ã€‚ feed-forward networkï¼šåªæ˜¯è€ƒè™‘å¯¹æ¯ä¸ªå•ç‹¬çš„ä½ç½®è¿›è¡Œå»ºæ¨¡ ä¸åŒä½ç½®ä¸Šçš„å‚æ•°æ˜¯å…±äº«çš„ã€‚ ç±»ä¼¼äº1*1çš„å·ç§¯ï¼Œå…¶å®å’Œå•ä¸€çš„çº¿æ€§å±‚ï¼›åœ¨å›¾åƒä¸Šæ˜¯è€ƒè™‘å•ä¸€çš„pixelï¼Œä½†æ˜¯åœ¨NLPä¸­æ˜¯åªè€ƒè™‘å•ç‹¬çš„ä¸€ä¸ªå•è¯ã€‚ ä½†æ˜¯1*1å·ç§¯çš„ä½œç”¨ä¸ä»…ä»…å¦‚æ­¤ï¼Œåœ¨å›¾åƒé¢†åŸŸå…¶ä½œç”¨æ˜¯å›¾åƒçš„é€šé“èåˆï¼Œä½†æ˜¯åœ¨è¯­è¨€ä¸Šæ˜¯å°†Embeddingçš„ç»´åº¦è¿›è¡Œå‹ç¼©å’Œèåˆã€‚ è¿™é‡Œdecoderå¤§éƒ¨åˆ†éƒ½å’Œencoderæ˜¯ç›¸ä¼¼çš„ï¼Œå› æ­¤ä¸åœ¨èµ˜è¿°ã€‚ decoderè¿™è¾¹å…¶å®æ˜¯ä¸€ä¸ªè‡ªå›å½’çš„é¢„æµ‹ã€‚ ä»£ç è®²è§£ä»¥ä¸‹è®²è§£çš„ä¸»è¦æ˜¯å®˜æ–¹çš„æºç é“¾æ¥å¦‚ä¸‹ï¼šTransformæºç  è°ƒç”¨çš„å®ä¾‹ï¼š 1234&gt;&gt;&gt; transformer_model = nn.Transformer(nhead=16, num_encoder_layers=12)&gt;&gt;&gt; src = torch.rand((10, 32, 512))&gt;&gt;&gt; tgt = torch.rand((20, 32, 512))&gt;&gt;&gt; out = transformer_model(src, tgt) Transformerå¤§ç±»åˆå§‹åŒ–å‡½æ•° ä¸Šè¿°æ˜¯åˆå§‹åŒ–éƒ¨åˆ†ï¼Œè¿™é‡Œæœ‰å‡ ä¸ªé‡è¦çš„å‚æ•°ï¼š d_modelï¼šé»˜è®¤ä¸º512ï¼Œå…¶å®è¡¨ç¤ºçš„æ˜¯è¾“å…¥çš„ç‰¹å¾çš„ç»´åº¦ã€‚ nheadï¼šé»˜è®¤ä¸º8ï¼Œè¡¨ç¤ºçš„æ˜¯multi-head ä¸­headæ•°ã€‚ num_encoder_layersï¼šé»˜è®¤ä¸º6ï¼Œä»£è¡¨åœ¨encoderä¸­çš„$N_x=6$ ï¼Œå³layerçš„é‡å¤blockæ¬¡æ•°ã€‚ num_decoder_layersï¼šé»˜è®¤ä¸º6ï¼Œä»£è¡¨åœ¨decoderä¸­çš„$N_x=6$ ï¼Œå³layerçš„é‡å¤blockæ¬¡æ•°ã€‚ dim_feedforwardï¼šé»˜è®¤ä¸º2048ï¼Œå³åœ¨ç¼–ç çš„æ—¶å€™ï¼Œå…ˆæ˜ å°„åˆ°ä¸€ä¸ªå¤§çš„æ˜ å°„ç©ºé—´ï¼Œç„¶åå†æ˜ å°„å›æ¥ã€‚ ç›¸å…³layerçš„å®ä¾‹åŒ–ï¼š 12345encoder_layer = TransformerEncoderLayer(d_model, nhead, dim_feedforward, dropout, activation, layer_norm_eps, batch_first, norm_first, **factory_kwargs)encoder_norm = LayerNorm(d_model, eps=layer_norm_eps, **factory_kwargs)self.encoder = TransformerEncoder(encoder_layer, num_encoder_layers, encoder_norm) è¿™é‡Œçš„å»ºæ¨¡æ€è·¯æ˜¯å°†ä¸¤éƒ¨åˆ†TransformerEncoderLayerå’ŒLayerNormåˆ†åˆ«å»ºå¥½ç„¶ååˆ†åˆ«æ•´åˆåˆ°ä¸€ä¸ªå¤§ç±»TransformerEncoderä¸­ï¼Œè¿™é‡Œåº”è¯¥æ˜¯LayerNormå±‚æ˜¯é€šç¯‡å…¬ç”¨çš„ã€‚ å‰å‘ä¼ æ’­å‡½æ•° 123memory = self.encoder(src, mask=src_mask, src_key_padding_mask=src_key_padding_mask)output = self.decoder(tgt, memory, tgt_mask=tgt_mask, memory_mask=memory_mask, tgt_key_padding_mask=tgt_key_padding_mask, memory_key_padding_mask=memory_key_padding_mask) mask=src_maskï¼šä»£è¡¨æ ·æœ¬çš„é•¿åº¦ï¼Œå¯¹äºçŸ­çš„æ ·æœ¬ï¼Œå¯ä»¥å°†åé¢çš„æ— æ•ˆæ ·æœ¬ç½®ä¸º$-\\infty$ ï¼Œäºæ˜¯softmaxé¢„æµ‹å€¼ä¸º0äº†ã€‚ è¾“å…¥çš„å¤§æ ·æœ¬å…¶å®æ˜¯ä¸€äº›ä¸ªå¥å­ï¼Œä½†æ˜¯è¿™äº›å¥å­é•¿çŸ­ä¸ä¸€ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿›è¡Œè¦ç»™ä¸€ä¸ªmaskå‚æ•°ï¼Œä½¿å…¶çŸ¥é“è¿™ä¸ªæ ·æœ¬çš„é•¿åº¦ã€‚ tgtï¼šç›®æ ‡å¥å­ï¼Œä¾æ¬¡å–‚å…¥ä¸€å¥è¯ã€‚ memory ï¼šå°±æ˜¯encoderçš„è¾“å‡ºï¼Œå°†å…¶è¾“å‡ºåˆ°åé¢çš„äº¤å‰æ³¨æ„åŠ›æœºåˆ¶ä¸­ã€‚ tgt_mask=tgt_maskï¼šè‡ªå›å½’çš„è§£ç è¿‡ç¨‹ï¼Œæ¯æ¬¡é¢„æµ‹åé¢ä¸€ä¸ªï¼Œå› æ­¤è¿™ä¸ªmaskå…¶å®æ˜¯ä¸€ä¸ªä¸Šä¸‰è§’çš„çŸ©é˜µã€‚ output embeddingçš„è¾“å…¥ä¸ºtgtï¼Œä½†æ˜¯æˆ‘ä»¬ä¸å¯å°†å…¶å…¨éƒ¨ä¸å¯è§ï¼Œå¦åˆ™æˆæŠ„ç­”æ¡ˆçš„äº†ï¼Œé¢„æµ‹å‡ºæ¥çš„ä¸‹ä¸€ä½ä¸ªoutputé‡Œçš„ä¸‹ä¸€ä½è¿›è¡Œå¯¹æ¯”ï¼Œä¸æ–­å­¦ä¹ ã€‚ input embedding çš„è¾“å…¥ä¸ºç”¨æ¥é¢„æµ‹çš„å¥å­ã€‚ memory_mask=memory_maskï¼šå…¶å®å°±æ˜¯å½“å‰è¿™å¥æ¢çš„é•¿åº¦ã€‚ TransformerEncoderLayerå­ç±»åˆå§‹åŒ–å‡½æ•° d_modelï¼šå³æ¨¡å‹çš„ç»´åº¦ï¼›nheadï¼šåŒä¸Šæ˜¯headæ•°ï¼›dim_feedforwardï¼šæ˜¯ç¬¬ä¸€ä¸ªå…¨è¿æ¥å±‚çš„å±‚æ•°ã€‚ ç¬¬äºŒä¸ªå…¨è¿æ¥å±‚çš„å…¨è¿æ¥å±‚çš„è¾“å…¥å’Œè¾“å‡ºæ˜¯ç›¸ç­‰çš„ï¼Œå› ä¸ºæœ‰æ®‹å·®è¿æ¥ã€‚ è‡ªå®šä¹‰çš„å±‚ å‰å‘ä¼ æ’­å‡½æ•° å‚æ•°åªæœ‰ï¼šsrcå’Œsrc_mask ä¹‹å‰ç»è¿‡äº†ï¼Œè¿™é‡Œä¸åœ¨èµ˜è¿°ã€‚ 1234567x = srcif self.norm_first: x = x + self._sa_block(self.norm1(x), src_mask, src_key_padding_mask) x = x + self._ff_block(self.norm2(x)) else: x = self.norm1(x + self._sa_block(x, src_mask, src_key_padding_mask)) x = self.norm2(x + self._ff_block(x)) TransformerEncoderå­ç±» ä¸»è¦æ˜¯å®šä¹‰äº†ä¸€ä¸‹ï¼Œä¸­é—´æœ‰å¤šå°‘å †å çš„å±‚ã€‚ æ¯”å¦‚è¿™é‡Œ_get_clones()çš„å®šä¹‰å¦‚ä¸‹ï¼š 12def _get_clones(module, N): return ModuleList([copy.deepcopy(module) for i in range(N)]) å°±æ˜¯è¿”å›ä¸€ä¸ªç½‘ç»œå†…å±‚ç»“æ„çš„æ·±åº¦æ‹·è´ã€‚ srcï¼šä¸ºåŸå¥å­çš„ç¼–ç ï¼› maskï¼šåŸå¥å­é•¿åº¦æ„æˆçš„çŸ©é˜µã€‚ TransformerDecoderLayerå­ç±» d_modelï¼šåœ¨æ•´ä¸ªçš„æ¨¡å‹ä¸­ä¸€ç›´éƒ½æ˜¯512ï¼Œä»£è¡¨çš„æ˜¯æ¨¡å‹çš„ç»´åº¦ã€‚ nheadï¼šdecoderä¸­çš„headæ•°ã€‚ dim_feedforwardï¼šä»£è¡¨çš„æ˜¯ç¬¬ä¸€ä¸ªFFNçš„è¾“å…¥ç»´åº¦ã€‚ é¦–å…ˆï¼Œå‡ºç°ä¸¤ä¸ªmulti-head self-attention ï¼Œç¬¬ä¸€ä¸ªæ˜¯mask çš„ï¼Œç¬¬äºŒä¸ªæ˜¯äº¤å‰çš„ã€‚ ä¹‹åï¼Œå‡ºç°ä¸¤ä¸ªçº¿æ€§å±‚ï¼Œç¬¬ä¸€ä¸ªæ˜¯å°†target æ˜ å°„åˆ°æ›´é«˜ç»´çš„ç©ºé—´ä¸Šï¼Œç„¶åç¬¬äºŒä¸ªå±‚å°±æ˜¯å°†å…¶æ˜ å°„å›d_modelç»´ã€‚ å‰å‘ä¼ æ’­å‡½æ•°ï¼Œç¬¬ä¸€å±‚ä¸åŠ æ®‹å·®ï¼Œä¹‹åçš„ç¬¬äºŒå±‚å’Œè¦åŠ ä¸Šæ®‹å·®å¹¶ä¸”æŒ‰ç…§å›¾ä¸­çš„é¡ºåºè¿›è¡Œè®¡ç®—ã€‚ ä»¥ä¸‹ï¼Œä¸¤ä¸ªmulti-head çš„å…·ä½“å®ç°ï¼Œä¸¤è€…é™¤äº†è¾“å…¥å…¶ä»–çš„éƒ¨åˆ†éƒ½æ˜¯ç›¸åŒçš„ã€‚ TransformerDecoderå­ç±» multi-head attentionçš„åŸç† attentionçš„è®¡ç®—çš„ç»“æœå°±æ˜¯æƒé‡ä¹‹å’Œï¼Œå…¶ä¸­Keyå’ŒQueryçš„ç›¸ä¼¼åº¦ä¸ºæ¯ä¸ªkeyå¯¹äºvalueçš„ä¸€ä¸ªæƒé‡ã€‚ Attention(Q,K,V)=softmax(\\frac {QK^T}{\\sqrt {d_k}})V é¦–å…ˆï¼ŒQå’ŒKè¿›è¡ŒçŸ©é˜µçš„å†…ç§¯ï¼› ä¹‹åï¼Œé™¤ä»¥$\\sqrt {d_k}$ è¿›è¡Œç¼©æ”¾ï¼› ç„¶åï¼Œä¹˜ä»¥æ©ç maskçŸ©é˜µï¼Œå»æ‰ä¸€äº›æœªçŸ¥éƒ¨åˆ†ï¼› æœ€åï¼Œsoftmaxå½’ä¸€åŒ–ï¼Œå¹¶ä¸”å’Œvalueå‘é‡åšå†…ç§¯ã€‚ 1234567891011def attention(query, key, value, mask=None, dropout=None): &quot;Compute 'Scaled Dot Product Attention'&quot; d_k = query.size(-1) scores = torch.matmul(query, key.transpose(-2, -1)) \\ / math.sqrt(d_k) if mask is not None: scores = scores.masked_fill(mask == 0, -1e9) p_attn = F.softmax(scores, dim = -1) if dropout is not None: p_attn = dropout(p_attn) return torch.matmul(p_attn, value), p_attn scores = scores.masked_fill(mask == 0, -1e9)å°†æ²¡æœ‰çš„å­—ç¬¦çš„å€¼èµ‹å€¼ä¸º$-\\infty$ .è¿™æ ·softmaxä¹‹åå°±æ˜¯0äº†ã€‚ ä½ç½®ç¼–ç  PE_{(pos,2i)}=sin(pos/1000^{2i/d_{model}})\\\\ PE_{(pos,2i)}=cos(pos/1000^{2i/d_{model}})åœ¨æ¥ä¸‹æ¥çš„ç›´æ’­ä¸­upä¸»å‡†å¤‡è¿›è¡Œæ‰‹å†™ä½ç½®ç¼–ç éƒ¨åˆ†ã€word embeddingå’Œmaskçš„ä»£ç ã€‚ Q&amp;Aå¦‚ä½•æé«˜æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ï¼Œä»¥ä¸€ä¸ªæ˜¯ä½¿ç”¨çŸ¥è¯†è’¸é¦ï¼Œå¦ä¸€ä¸ªæ˜¯ä½¿ç”¨é›†æˆå­¦ä¹ ã€‚ ç”±äºdecoderæ˜¯è‡ªå›å½’çš„è§£ç ï¼Œä¸»è¦æ˜¯è¿›è¡Œè‡ªå›å½’çš„ç”Ÿæˆï¼Œç”¨çš„ä¸æ˜¯å¾ˆå¤šï¼›CVä¸»è¦æ˜¯å¯¹encoderçš„éƒ¨åˆ†è¿›è¡Œæ”¹é€ çš„ã€‚","link":"/2022/03/21/%E8%87%AA%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6%E5%92%8CTransformer/Transformer%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6PyTorch%E6%BA%90%E7%A0%81%E8%AE%B2%E8%A7%A3%EF%BC%88%E4%B8%80%EF%BC%89/"},{"title":"å›¾ç¥ç»ç½‘ç»œçš„é€šä¿—ç†è§£-GNNåŸºæœ¬ç»“æ„","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦ä»‹ç»çš„GNNçš„åŸºæœ¬ç½‘ç»œå®ç°ï¼Œä»¥åŠä¸€äº›ç½‘ç»œæ›´æ–°å’Œå­¦ä¹ çš„æœºç†ã€‚ åšå®¢çš„å‚è€ƒç½‘å€ï¼šA Gentle Introduction to Graph Neural Networks (distill.pub)ï¼šhttps://distill.pub/2021/gnn-intro/ è§†é¢‘çš„å‚è€ƒåœ°å€ï¼šhttps://www.bilibili.com/video/BV1iT4y1d7zP/?spm_id_from=333.788.recommend_more_video.0 æ—¢ç„¶å›¾çš„æè¿°æ˜¯æ’åˆ—ä¸å˜çš„çŸ©é˜µæ ¼å¼ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å›¾ç¥ç»ç½‘ç»œ(GNN)æ¥æè¿°ä»¥è§£å†³å›¾é¢„æµ‹ä»»åŠ¡ã€‚GNNæ˜¯å¯¹å›¾çš„æ‰€æœ‰å±æ€§(èŠ‚ç‚¹ã€è¾¹ã€å…¨å±€ä¸Šä¸‹æ–‡)çš„ä¸€ç§å¯ä¼˜åŒ–çš„è½¬æ¢ï¼Œå®ƒä¿æŒäº†å›¾çš„å¯¹ç§°æ€§(æ’åˆ—ä¸å˜æ€§)ã€‚ æˆ‘ä»¬å°†ä½¿ç”¨Gilmerç­‰äººæå‡ºçš„æ¶ˆæ¯ä¼ é€’ç¥ç»ç½‘ç»œæ¡†æ¶æ¥æ„å»ºGNNï¼Œä½¿ç”¨Battagliaç­‰äººä»‹ç»çš„å›¾ç½‘æ¶æ„ç¤ºæ„å›¾ã€‚ GNNé‡‡ç”¨ä¸€ç§â€œå›¾å…¥å›¾å‡ºâ€çš„ä½“ç³»ç»“æ„ï¼Œè¿™æ„å‘³ç€è¿™äº›æ¨¡å‹ç±»å‹æ¥å—ä¸€ä¸ªå›¾ä½œä¸ºè¾“å…¥ï¼Œå°†ä¿¡æ¯åŠ è½½åˆ°å®ƒçš„èŠ‚ç‚¹ã€è¾¹å’Œå…¨å±€ä¸Šä¸‹æ–‡ä¸­ï¼Œå¹¶é€æ­¥è½¬æ¢è¿™äº›åµŒå…¥ï¼Œè€Œä¸æ”¹å˜è¾“å…¥å›¾çš„è¿æ¥æ€§ã€‚ ç›¸å½“äºå­¦ä¹ çš„è¿‡ç¨‹ä¼˜åŒ–çš„æ˜¯è¾¹å’Œé¡¶ç‚¹çš„æƒé‡ï¼Œä¸ä¼šå¯¹è¿é€šæ€§é€ æˆæ”¹å˜ã€‚ The simplest GNNä½¿ç”¨ä¸Šé¢æ„å»ºçš„å›¾çš„æ•°å­—è¡¨ç¤º(ä½¿ç”¨å‘é‡è€Œä¸æ˜¯æ ‡é‡)ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥æ„å»ºGNNäº†ã€‚æˆ‘ä»¬å°†ä»æœ€ç®€å•çš„GNNæ¶æ„å¼€å§‹ï¼Œåœ¨è¿™ä¸ªæ¶æ„ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ æ‰€æœ‰å›¾å±æ€§(èŠ‚ç‚¹ã€è¾¹ã€å…¨å±€)çš„æ–°åµŒå…¥ï¼Œä½†æˆ‘ä»¬è¿˜æ²¡æœ‰ä½¿ç”¨å›¾çš„è¿æ¥æ€§ã€‚ ä¸ºç®€å•èµ·è§ï¼Œå‰é¢çš„å›¾ä½¿ç”¨æ ‡é‡æ¥è¡¨ç¤ºå›¾çš„å±æ€§;åœ¨å®è·µä¸­ï¼Œç‰¹å¾å‘é‡æˆ–åµŒå…¥æ›´æœ‰ç”¨ã€‚ è¯¥GNNä½¿ç”¨ä¸€ä¸ªç‹¬ç«‹çš„å¤šå±‚æ„ŸçŸ¥å™¨(MLP)(æˆ–å–œæ¬¢çš„æ¨¡å‹) ä½œç”¨åœ¨å›¾çš„æ¯ä¸ªç»„ä»¶ä¸Šï¼›æˆ‘ä»¬ç§°ä¹‹ä¸ºGNNå±‚ã€‚å¯¹äºæ¯ä¸ªèŠ‚ç‚¹å‘é‡ï¼Œæˆ‘ä»¬åº”ç”¨MLPå¹¶å¾—åˆ°ä¸€ä¸ªå­¦ä¹ åçš„èŠ‚ç‚¹å‘é‡ã€‚æˆ‘ä»¬å¯¹æ¯æ¡è¾¹åšåŒæ ·çš„æ“ä½œï¼Œå­¦ä¹ æ¯æ¡è¾¹çš„åµŒå…¥ï¼Œå¯¹å…¨å±€å‘é‡ä¹ŸåšåŒæ ·çš„æ“ä½œï¼Œå­¦ä¹ æ•´ä¸ªå›¾çš„å•ä¸ªåµŒå…¥ã€‚ ä½ ä¹Ÿå¯ä»¥å«å®ƒGNNå—ã€‚å› ä¸ºå®ƒåŒ…å«å¤šä¸ªæ“ä½œ/å±‚(åƒResNetå—)ã€‚ ä¸ç¥ç»ç½‘ç»œæ¨¡å—æˆ–å±‚ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™äº›GNNå±‚å †å åœ¨ä¸€èµ·ã€‚ ç”±äºGNNä¸æ›´æ–°è¾“å…¥å›¾çš„è¿é€šæ€§ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸è¾“å…¥å›¾ç›¸åŒçš„é‚»æ¥è¡¨å’Œç›¸åŒæ•°é‡çš„ç‰¹å¾å‘é‡æ¥æè¿°GNNçš„è¾“å‡ºå›¾ã€‚ä½†æ˜¯ï¼Œè¾“å‡ºå›¾æ›´æ–°äº†åµŒå…¥ï¼Œå› ä¸ºGNNæ›´æ–°äº†æ¯ä¸ªèŠ‚ç‚¹ã€è¾¹å’Œå…¨å±€å†…å®¹çš„è¡¨ç¤ºå‘é‡ã€‚ GNN Predictions by Pooling Informationæˆ‘ä»¬å·²ç»æ„å»ºäº†ä¸€ä¸ªç®€å•çš„GNNï¼Œä½†æ˜¯æˆ‘ä»¬å¦‚ä½•åœ¨ä¸Šé¢æè¿°çš„ä»»ä½•ä»»åŠ¡ä¸­è¿›è¡Œé¢„æµ‹å‘¢? æˆ‘ä»¬å°†è€ƒè™‘äºŒå…ƒåˆ†ç±»çš„æƒ…å†µï¼Œä½†è¿™ä¸ªæ¡†æ¶å¯ä»¥å¾ˆå®¹æ˜“åœ°æ‰©å±•åˆ°å¤šç±»æˆ–å›å½’çš„æƒ…å†µã€‚å¦‚æœä»»åŠ¡æ˜¯å¯¹èŠ‚ç‚¹è¿›è¡ŒäºŒåˆ†ç±»é¢„æµ‹ï¼Œè€Œå›¾ä¸­å·²ç»åŒ…å«äº†èŠ‚ç‚¹ä¿¡æ¯ï¼Œé‚£ä¹ˆè¿™ç§æ–¹æ³•å¾ˆç®€å•â€”â€”å¯¹äºæ¯ä¸ªèŠ‚ç‚¹çš„åµŒå…¥ç¼–ç å‘é‡ï¼Œåº”ç”¨ä¸€ä¸ªçº¿æ€§åˆ†ç±»å™¨ã€‚è¿™é‡Œçš„$C_{v_{i,n}}$ ä»£è¡¨ä¸€ä¸ªåˆ†ç±»ç½‘ç»œï¼Œæ‰€æœ‰çš„èŠ‚ç‚¹å…±äº«ä¸€ä¸ªåˆ†ç±»ç½‘ç»œã€‚ ç„¶è€Œï¼Œäº‹æƒ…å¹¶ä¸æ€»æ˜¯é‚£ä¹ˆç®€å•ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯èƒ½åœ¨å›¾ä¸­æœ‰å­˜å‚¨åœ¨è¾¹ä¸­çš„ä¿¡æ¯ï¼Œä½†åœ¨èŠ‚ç‚¹ä¸­æ²¡æœ‰ä¿¡æ¯ï¼Œä½†ä»ç„¶éœ€è¦å¯¹èŠ‚ç‚¹è¿›è¡Œé¢„æµ‹ã€‚æˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ³•ä»è¾¹æ”¶é›†ä¿¡æ¯ï¼Œå¹¶å°†å®ƒä»¬äº¤ç»™èŠ‚ç‚¹è¿›è¡Œé¢„æµ‹ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡åˆå¹¶æ¥å®ç°ã€‚é›†ä¸­æ”¶ç›Šåˆ†ä¸¤ä¸ªæ­¥éª¤ï¼š å¯¹äºè¦æ±‡é›†çš„æ¯ä¸ªé¡¹ï¼Œå°†å®ƒä»¬çš„æ¯ä¸ªåµŒå…¥é›†åˆèµ·æ¥ï¼Œå¹¶å°†å®ƒä»¬è¿æ¥åˆ°ä¸€ä¸ªçŸ©é˜µä¸­ã€‚ ç„¶åï¼Œé€šå¸¸é€šè¿‡æ±‚å’Œæ“ä½œå¯¹æ”¶é›†åˆ°çš„åµŒå…¥å‘é‡è¿›è¡Œèšåˆã€‚ æˆ‘ä»¬ç”¨å­—æ¯Ïè¡¨ç¤ºæ±‡é›†æ“ä½œï¼Œå¹¶è¡¨ç¤ºæˆ‘ä»¬æ­£åœ¨æ”¶é›†ä»è¾¹åˆ°èŠ‚ç‚¹çš„ä¿¡æ¯$p_{Enâ†’Vn}$ã€‚ å¦‚å›¾æ‰€ç¤ºï¼Œå°†å’ŒèŠ‚ç‚¹å‘é‡çš„è¾¹å‘é‡å’Œå…¨å±€å†…å®¹çš„å‘é‡ç›¸åŠ æ¥ã€‚ å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬åªæœ‰è¾¹çš„ç‰¹å¾ï¼Œå¹¶è¯•å›¾é¢„æµ‹äºŒè¿›åˆ¶èŠ‚ç‚¹ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ±‡é›†æ“ä½œï¼Œå°†ä¿¡æ¯æ±‡é›†åˆ°å®ƒéœ€è¦å»çš„åœ°æ–¹ã€‚ å¦‚æœæˆ‘ä»¬åªæœ‰èŠ‚ç‚¹çš„ç‰¹å¾ï¼Œå¹¶è¯•å›¾é¢„æµ‹äºŒåˆ†ç±»çš„è¾¹çš„ä¿¡æ¯ï¼Œé‚£ä¹ˆæ¨¡å‹çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ã€‚å…¶å®å°±æ˜¯å°†ä¸€æ¡è¾¹è¿æ¥ç€çš„é¡¶ç‚¹çš„å‘é‡ç›´æ¥ç›¸åŠ å³å¯ã€‚ å¦‚æœæˆ‘ä»¬åªæœ‰èŠ‚ç‚¹çº§åˆ«çš„ç‰¹æ€§ï¼Œå¹¶ä¸”éœ€è¦é¢„æµ‹äºŒåˆ†ç±»çš„å…¨å±€å±æ€§ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦å°†æ‰€æœ‰å¯ç”¨çš„èŠ‚ç‚¹ä¿¡æ¯æ±‡èšåœ¨ä¸€èµ·ï¼Œå¹¶å¯¹å®ƒä»¬è¿›è¡Œèšåˆã€‚è¿™ç±»ä¼¼äºCNNä¸­çš„å…¨å±€å¹³å‡æ± å±‚ã€‚å¯¹äºè¾¹ä¹Ÿå¯ä»¥è¿™æ ·åšã€‚ åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œåˆ†ç±»æ¨¡å‹cå¯ä»¥å¾ˆå®¹æ˜“åœ°ç”¨ä»»ä½•å¯å¾®åˆ†æ¨¡å‹æ›¿æ¢ï¼Œæˆ–è€…ä½¿ç”¨å¹¿ä¹‰çº¿æ€§æ¨¡å‹é€‚åº”å¤šç±»åˆ†ç±»ã€‚ ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»æ¼”ç¤ºäº†æˆ‘ä»¬å¯ä»¥æ„å»ºä¸€ä¸ªç®€å•çš„GNNæ¨¡å‹ï¼Œå¹¶é€šè¿‡åœ¨å›¾çš„ä¸åŒéƒ¨åˆ†ä¹‹é—´ä¿¡æ¯ä¼ é€’æ¥è¿›è¡ŒäºŒåˆ†ç±»é¢„æµ‹ã€‚è¿™ç§ä¿¡æ¯æ±‡èšæŠ€æœ¯å°†ä½œä¸ºæ„å»ºæ›´å¤æ‚çš„GNNæ¨¡å‹çš„åŸºç¡€ã€‚å¦‚æœæˆ‘ä»¬æœ‰æ–°çš„å›¾å½¢å±æ€§ï¼Œæˆ‘ä»¬åªéœ€è¦å®šä¹‰å¦‚ä½•å°†ä¿¡æ¯ä»ä¸€ä¸ªå±æ€§ä¼ é€’åˆ°å¦ä¸€ä¸ªå±æ€§ã€‚ å°±ç›®å‰çš„æƒ…å†µè€Œè¨€ï¼Œåœ¨GNN blockså±‚ä¸­å¹¶æ²¡æœ‰è€ƒè™‘å›¾çš„è¿æ¥ä¿¡æ¯ è¯·æ³¨æ„ï¼Œåœ¨è¿™ä¸ªæœ€ç®€å•çš„GNNå…¬å¼ä¸­ï¼Œæˆ‘ä»¬æ ¹æœ¬æ²¡æœ‰åœ¨GNNå±‚ä¸­ä½¿ç”¨å›¾çš„è¿é€šæ€§ã€‚æ¯ä¸ªèŠ‚ç‚¹ã€æ¯æ¡è¾¹ä»¥åŠå…¨å±€ä¸Šä¸‹æ–‡éƒ½æ˜¯ç‹¬ç«‹å¤„ç†çš„ã€‚æˆ‘ä»¬åªåœ¨å°†ä¿¡æ¯ç”¨äºé¢„æµ‹æ—¶ä½¿ç”¨è¿æ¥ã€‚ Passing messages between parts of the graphé€šè¿‡åœ¨GNNå±‚ä¸­ä½¿ç”¨æ±‡é›†æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥åšå‡ºæ›´å¤æ‚çš„é¢„æµ‹ï¼Œä»¥ä½¿æˆ‘ä»¬å­¦åˆ°å›¾çš„è¿æ¥æ€§çš„ä¿¡æ¯ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ¶ˆæ¯ä¼ é€’æ¥å®ç°è¿™ä¸€ç‚¹ï¼Œå…¶ä¸­ç›¸é‚»èŠ‚ç‚¹æˆ–è¾¹äº¤æ¢ä¿¡æ¯å¹¶ç›¸äº’å½±å“ã€‚ æ¶ˆæ¯ä¼ é€’å·¥ä½œåˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼š å¯¹äºå›¾ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ï¼Œæ”¶é›†æ‰€æœ‰çš„ç›¸é‚»èŠ‚ç‚¹åµŒå…¥å‘é‡çš„ä¿¡æ¯ï¼Œå³ä¸Šé¢æè¿°çš„gå‡½æ•°ã€‚ é€šè¿‡èšåˆå‡½æ•°(å¦‚sum)ï¼Œæ±‡èšæ‰€æœ‰æ¶ˆæ¯ã€‚ æ‰€æœ‰æ±‡é›†çš„æ¶ˆæ¯éƒ½é€šè¿‡ä¸€ä¸ªæ›´æ–°å‡½æ•°ä¼ é€’ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªå­¦ä¹ è¿‡çš„ç¥ç»ç½‘ç»œã€‚ è¿˜å¯ä»¥1)æ”¶é›†æ¶ˆæ¯ï¼Œ3)æ›´æ–°æ¶ˆæ¯ï¼Œ2)èšåˆæ¶ˆæ¯ï¼Œå¹¶ä¸”ä»ç„¶å…·æœ‰ç½®æ¢ä¸å˜æ“ä½œ æ­£å¦‚æ±‡èšæ“ä½œå¯ä»¥åº”ç”¨äºèŠ‚ç‚¹æˆ–è¾¹ä¸€æ ·ï¼Œæ¶ˆæ¯ä¼ é€’æœºåˆ¶ä¹Ÿå¯ä»¥å‘ç”Ÿåœ¨èŠ‚ç‚¹æˆ–è¾¹ä¹‹é—´ã€‚ è¿™äº›æ­¥éª¤æ˜¯åˆ©ç”¨å›¾çš„è¿æ¥æ€§çš„å…³é”®ã€‚æˆ‘ä»¬å°†åœ¨GNNå±‚ä¸­æ„å»ºæ›´å¤æ‚çš„æ¶ˆæ¯ä¼ é€’å˜ä½“ï¼Œä»è€Œäº§ç”Ÿå…·æœ‰æ›´é«˜è¡¨ç°åŠ›å’ŒåŠŸèƒ½çš„GNNæ¨¡å‹ã€‚ æ€»ä¹‹å°±æ˜¯å°†èŠ‚ç‚¹çš„ç¼–ç å‘é‡+ä¸å…¶æœ‰è¿æ¥èŠ‚ç‚¹çš„ç¼–ç å‘é‡-&gt;æ¿€æ´»å‡½æ•°-&gt;ä¸‹ä¸€å±‚èŠ‚ç‚¹ å¦‚æœåº”ç”¨ä¸€æ¬¡ï¼Œè¿™ä¸ªæ“ä½œåºåˆ—å°±æ˜¯æ¶ˆæ¯ä¼ é€’GNNå±‚çš„æœ€ç®€å•ç±»å‹ã€‚ è¿™è®©äººæƒ³èµ·äº†æ ‡å‡†å·ç§¯ï¼šä»æœ¬è´¨ä¸Šè®²ï¼Œæ¶ˆæ¯ä¼ é€’å’Œå·ç§¯éƒ½æ˜¯èšåˆå’Œå¤„ç†å…ƒç´ é‚»å±…ä¿¡æ¯ä»¥æ›´æ–°å…ƒç´ å€¼çš„æ“ä½œã€‚åœ¨å›¾å½¢ä¸­ï¼Œæ¯ä¸ªå…ƒç´ å°±æ˜¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè€Œåœ¨å›¾åƒä¸­ï¼Œæ¯ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªåƒç´ ã€‚ç„¶è€Œï¼Œå›¾ä¸­ç›¸é‚»èŠ‚ç‚¹çš„æ•°é‡å¯ä»¥æ˜¯å¯å˜çš„ï¼Œä¸åƒåœ¨å›¾åƒä¸­ï¼Œæ¯ä¸ªåƒç´ éƒ½æœ‰ä¸€ç»„ç›¸é‚»å…ƒç´ ã€‚ è€Œä¸”ï¼Œå·ç§¯æ“ä½œç›¸å½“äºå…¶å’Œä¸€å¸®ç›¸é‚»çš„å…ƒç´ ä¹‹é—´è¿›è¡ŒåŠ æƒå’Œæ“ä½œï¼Œä½†æ˜¯å›¾ç½‘ç»œçš„æ“ä½œå…¶å®å®é™…ä¸Šæ—¶æƒé‡éƒ½ä¸º1çš„åŠ æƒå’Œã€‚ é€šè¿‡å°†ä¼ é€’GNNå±‚çš„æ¶ˆæ¯å åŠ åœ¨ä¸€èµ·ï¼Œä¸€ä¸ªèŠ‚ç‚¹æœ€ç»ˆå¯ä»¥æ•´åˆæ¥è‡ªæ•´ä¸ªå›¾çš„ä¿¡æ¯ï¼šç»è¿‡ä¸‰å±‚åï¼Œä¸€ä¸ªèŠ‚ç‚¹å°±æ‹¥æœ‰äº†è·ç¦»å®ƒä¸‰æ­¥è¿œçš„èŠ‚ç‚¹çš„ä¿¡æ¯ã€‚ åªè¦å¤šè¿­ä»£å‡ å±‚ï¼Œä¸€ä¸ªèŠ‚ç‚¹å°±å¯èƒ½æ•´åˆæ‰€æœ‰å›¾çš„ä¿¡æ¯ã€‚ æˆ‘ä»¬å¯ä»¥æ›´æ–°æˆ‘ä»¬çš„æ¶æ„å›¾æ¥åŒ…å«è¿™ä¸ªæ–°çš„èŠ‚ç‚¹ä¿¡æ¯æºï¼š Learning edge representations ä¸Šé¢ä¸»è¦è®²çš„æ˜¯ç‚¹å’Œç‚¹ï¼Œè¾¹å’Œè¾¹ä¿¡æ¯çš„æ±‡èšé—®é¢˜ï¼Œä¸‹é¢ä¸»è¦è®²è§£çš„æ˜¯ç‚¹çš„ä¿¡æ¯å¦‚ä½•å‘è¾¹æ±‡èšä»¥åŠè¾¹çš„ä¿¡æ¯å¦‚ä½•å‘é¡¶ç‚¹æ±‡èšã€‚ æˆ‘ä»¬çš„æ•°æ®é›†å¹¶ä¸æ€»æ˜¯åŒ…å«æ‰€æœ‰ç±»å‹çš„ä¿¡æ¯(èŠ‚ç‚¹ã€è¾¹ç¼˜å’Œå…¨å±€ä¸Šä¸‹æ–‡)ã€‚å½“æˆ‘ä»¬æƒ³è¦å¯¹èŠ‚ç‚¹è¿›è¡Œé¢„æµ‹ï¼Œä½†æˆ‘ä»¬çš„æ•°æ®é›†åªæœ‰è¾¹çš„ä¿¡æ¯æ—¶ï¼Œæˆ‘ä»¬åœ¨ä¸Šé¢å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨æ±‡èšæ“ä½œæ¥å°†è¾¹çš„ä¿¡æ¯æ±‡èšåˆ°èŠ‚ç‚¹ä¸Šï¼Œä½†è¿™æ­¥æ“ä½œåªåœ¨æ¨¡å‹çš„æœ€ç»ˆé¢„æµ‹è¿›è¡Œã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ¶ˆæ¯ä¼ é€’åœ¨GNNå±‚çš„èŠ‚ç‚¹å’Œè¾¹ä¹‹é—´å…±äº«ä¿¡æ¯ã€‚ ç±»ä¼¼ä¹‹å‰å¸æ”¶ç›¸é‚»èŠ‚ç‚¹çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨åŒæ ·çš„æ–¹æ³•æ¥å¤„ç†é‚»è¾¹çš„ä¿¡æ¯ï¼Œé¦–å…ˆå°†è¾¹ç¼˜ä¿¡æ¯åˆå¹¶åˆ°ä¸€èµ·ï¼Œç”¨ä¸€ä¸ªæ›´æ–°å‡½æ•°å¯¹å…¶è¿›è¡Œè½¬æ¢ï¼Œç„¶åå­˜å‚¨å®ƒã€‚ ç„¶è€Œï¼Œå­˜å‚¨åœ¨å›¾ä¸­çš„èŠ‚ç‚¹å’Œè¾¹çš„ä¿¡æ¯ä¸ä¸€å®šæ˜¯ç›¸åŒçš„å¤§å°æˆ–å½¢çŠ¶ï¼Œå› æ­¤ï¼Œå¦‚ä½•å°†å®ƒä»¬ç»„åˆèµ·æ¥è¿˜ä¸æ˜¯ç«‹å³å°±æ¸…æ¥šçš„ã€‚å…¶å®å¯ä»¥å¦‚æœç»´åº¦ä¸ä¸€æ ·å¯ä»¥è¿›è¡Œç¼–ç å’ŒæŠ•å½±æ“ä½œæ¥ä½¿å¾—äºŒè€…ç»Ÿä¸€ã€‚ä¸€ç§æ–¹æ³•æ˜¯å­¦ä¹ ä»è¾¹ç©ºé—´åˆ°èŠ‚ç‚¹ç©ºé—´çš„çº¿æ€§æ˜ å°„ï¼Œåä¹‹äº¦ç„¶ã€‚æˆ–è€…ï¼Œå¯ä»¥åœ¨æ›´æ–°å‡½æ•°ä¹‹å‰å°†å®ƒä»¬è¿æ¥åœ¨ä¸€èµ·ã€‚ å¦‚å›¾æ‰€ç¤ºå°±æ˜¯å°†å…ˆå°†ä¿¡æ¯èšåˆï¼Œç„¶åæ›´æ–°å¹¶å­˜å‚¨åœ¨èŠ‚ç‚¹ä¸Šï¼Œä¹‹åå°†èŠ‚ç‚¹ä¸Šé¢çš„ä¿¡æ¯å†æ¬¡èšåˆå›åˆ°èŠ‚ç‚¹ä¸Šé¢ã€‚ åœ¨æ„é€ GNNæ—¶ï¼Œæˆ‘ä»¬æ›´æ–°å“ªäº›å›¾å±æ€§ä»¥åŠæ›´æ–°å®ƒä»¬çš„é¡ºåºæ˜¯éœ€è¦è¿›è¡Œä¸€ä¸ªè®¾è®¡å†³ç­–ã€‚æˆ‘ä»¬å¯ä»¥é€‰æ‹©æ˜¯å¦åœ¨è¾¹çš„ç¼–ç ä¿¡æ¯ä¹‹å‰æ›´æ–°èŠ‚ç‚¹ç¼–ç ï¼Œæˆ–è€…åä¹‹ã€‚ è¿™æ˜¯ä¸€ä¸ªå…·æœ‰å¤šç§è§£å†³æ–¹æ¡ˆçš„å¼€æ”¾ç ”ç©¶é¢†åŸŸâ€”â€”ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä»¥â€œç¼–ç»‡â€çš„æ–¹å¼è¿›è¡Œæ›´æ–°ã€‚å…¶ä¸­ï¼Œæˆ‘ä»¬æœ‰å››ç§æ›´æ–°åçš„è¡¨ç¤ºå½¢å¼ï¼Œå®ƒä»¬ç»„åˆæˆæ–°çš„èŠ‚ç‚¹å’Œè¾¹è¡¨ç¤ºå½¢å¼ï¼šèŠ‚ç‚¹åˆ°èŠ‚ç‚¹(çº¿æ€§)ã€è¾¹åˆ°è¾¹(çº¿æ€§)ã€èŠ‚ç‚¹åˆ°è¾¹(è¾¹å±‚)ã€è¾¹åˆ°èŠ‚ç‚¹(èŠ‚ç‚¹å±‚)ã€‚ æœ‰å®éªŒè¯å®ï¼Œnode-&gt;edge-&gt;node å’Œ edge-&gt;node-&gt;edge ä¸¤ç§æ–¹å¼å»æ›´æ–°èŠ‚ç‚¹å¾—åˆ°çš„ç»“æœæ˜¯ä¸åŒçš„ï¼Œå› æ­¤å¯ä»¥ä¸¤ç§æ–¹å¼äº¤å‰è¿›è¡Œçš„æ–¹æ³•æ¥æ›´æ–°ã€‚ Adding global representationsä¸‹é¢ä»‹ç»å…¨å±€ä¿¡æ¯æ˜¯å¦‚ä½•äº¤æ¢å¹¶ä¸”ä¸ºä½•å®šä¹‰æ•´ä¸ªå…¨å±€çš„ä¿¡æ¯ã€‚ åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬æ‰€æè¿°çš„ç½‘ç»œå­˜åœ¨ä¸€ä¸ªç¼ºé™·ï¼šå›¾ä¸­å½¼æ­¤ç›¸è·è¾ƒè¿œçš„èŠ‚ç‚¹å¯èƒ½æ°¸è¿œæ— æ³•æœ‰æ•ˆåœ°ç›¸äº’ä¼ é€’ä¿¡æ¯ï¼Œå³ä½¿æˆ‘ä»¬åº”ç”¨äº†å¤šæ¬¡æ¶ˆæ¯ä¼ é€’ã€‚å¯¹äºä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦‚æœæˆ‘ä»¬æœ‰kå±‚ï¼Œä¿¡æ¯å°†åœ¨æœ€å¤škæ­¥çš„è·ç¦»ä¼ æ’­ã€‚åœ¨é¢„æµ‹ä»»åŠ¡ä¾èµ–äºè·ç¦»å¾ˆè¿œçš„èŠ‚ç‚¹æˆ–èŠ‚ç‚¹ç»„çš„æƒ…å†µä¸‹ï¼Œè¿™å¯èƒ½æ˜¯ä¸ªé—®é¢˜ã€‚åœ¨é¢„æµ‹ä»»åŠ¡ä¾èµ–äºè·ç¦»å¾ˆè¿œçš„èŠ‚ç‚¹æˆ–èŠ‚ç‚¹ç»„çš„æƒ…å†µä¸‹ï¼Œè¿™å¯èƒ½æ˜¯ä¸ªé—®é¢˜ã€‚ ä¸€ç§è§£å†³æ–¹æ¡ˆæ˜¯è®©æ‰€æœ‰èŠ‚ç‚¹éƒ½èƒ½å¤Ÿäº’ç›¸ä¼ é€’ä¿¡æ¯ã€‚ä¸å¹¸çš„æ˜¯ï¼Œå¯¹äºå¤§çš„å›¾æ¥è¯´ï¼Œè¿™å¾ˆå¿«å°±ä¼šå¢åŠ è®¡ç®—æˆæœ¬ (å°½ç®¡è¿™ç§è¢«ç§°ä¸ºâ€œè™šè¾¹â€çš„æ–¹æ³•å·²ç»è¢«ç”¨äºå°çš„å›¾ï¼Œå¦‚åˆ†å­)ã€‚ æœ¬æ¥æ˜¯æ²¡æœ‰è¾¹æä¾›è¿æ¥çš„ï¼Œä½†æ˜¯è™šæ‹Ÿçš„è®¾äº†ä¸€ä¸ªè¾¹ã€‚ è§£å†³è¿™ä¸ªé—®é¢˜çš„å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨å›¾(U)çš„å…¨å±€è¡¨ç¤ºï¼Œå®ƒæœ‰æ—¶è¢«ç§°ä¸ºä¸»èŠ‚ç‚¹æˆ–ä¸Šä¸‹æ–‡å‘é‡ã€‚è¿™ä¸ªå…¨å±€ä¸Šä¸‹æ–‡å‘é‡è¿æ¥åˆ°ç½‘ç»œä¸­æ‰€æœ‰å…¶ä»–çš„èŠ‚ç‚¹å’Œè¾¹ï¼Œä½œä¸ºå®ƒä»¬ä¹‹é—´ä¼ é€’ä¿¡æ¯çš„æ¡¥æ¢ï¼Œå»ºç«‹äº†æ•´ä¸ªå›¾çš„è¡¨ç¤ºã€‚è¿™å°†åˆ›å»ºä¸€ä¸ªæ›´ä¸°å¯Œã€æ›´å¤æ‚çš„å›¾å½¢è¡¨ç¤ºï¼Œè€Œä¸æ˜¯é€šè¿‡å…¶ä»–æ–¹æ³•æ¥å­¦ä¹ ã€‚ å¯ä»¥çœ‹ä½œæ˜¯è·Ÿresnetç±»ä¼¼ï¼Œæœ¬æ¥æ˜¯è¦è¿‡å¥½å‡ ä¸ªèŠ‚ç‚¹ï¼Œå…¨å±€ä¸»èŠ‚ç‚¹åƒæ˜¯ç›´æ¥æ¥äº†ä¸ªè·³è·ƒè¿æ¥ã€‚ è¿™ä¸ªä¸»èŠ‚ç‚¹ç…§å¸¸å‚ä¸ä¿¡æ¯çš„æ±‡é›†ã€‚ åœ¨è¿™ä¸ªè§†å›¾ä¸­ï¼Œæ‰€æœ‰çš„å›¾å½¢æ‰€æœ‰å±æ€§(node,edge,global context) éƒ½å­¦ä¹ åˆ°å¯¹åº”çš„å‘é‡ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨æ±‡é›†çš„è¿‡ç¨‹ä¸­åˆ©ç”¨å®ƒä»¬ï¼Œæ–¹æ³•æ˜¯å°†æˆ‘ä»¬æ„Ÿå…´è¶£çš„å±æ€§çš„ä¿¡æ¯ä¸å…¶ä»–å±æ€§çš„ä¿¡æ¯ç›¸æ¯”è¾ƒã€‚ ä¾‹å¦‚ï¼Œå¯¹äºä¸€ä¸ªèŠ‚ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘æ¥è‡ªç›¸é‚»èŠ‚ç‚¹ã€è¿é€šè¾¹å’Œå…¨å±€ä¸»èŠ‚ç‚¹çš„ä¿¡æ¯ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡çº¿æ€§æ˜ å°„å°†å®ƒä»¬æ˜ å°„åˆ°ç›¸åŒçš„ç©ºé—´ä¸Šï¼Œå¹¶æ·»åŠ åº”ç”¨ç‰¹å¾å±‚æˆ–è€…æ˜¯ç›´æ¥å°†å…¶è¿›è¡Œç›¸åŠ æ“ä½œï¼Œè¿™å¯ä»¥è¢«è®¤ä¸ºæ˜¯ä¸€ç§ç‰¹å¾å‹æ³¨æ„æœºåˆ¶ã€‚ è¿™é‡Œå…¶å®å°±æ˜¯å°†æ‰€æœ‰ç›¸å…³çš„æ¶ˆæ¯éƒ½æ‹¿è¿‡æ¥ä½¿ç”¨ï¼Œäºæ˜¯å°±å½¢æˆäº†ä¸€ä¸ªç±»ä¼¼äºè‡ªæ³¨æ„åŠ›æœºåˆ¶çš„ä¸œè¥¿ã€‚ è¯æ±‡ç§¯ç´¯ embeddings åµŒå…¥å‘é‡ leverage n.å½±å“åŠ› v.å……åˆ†åˆ©ç”¨ elaborate adj. å¤æ‚çš„ï¼Œè¯¦å°½çš„ï¼›ç²¾å¿ƒåˆ¶ä½œçš„ reminiscent adj. å’Œâ€¦ç›¸ä¼¼çš„ essence n.æœ¬è´¨ï¼Œè¦ç´  propagate v. æ•£æ’­,å®£ä¼ (è§‚ç‚¹,ä¿¡ä»°ç­‰); ä¼ æ’­(è¿åŠ¨,å…‰çº¿,å£°éŸ³ç­‰) concatenate v. è¿æ¥ adj. è¿æ¥çš„ imbue v. çŒå…¥ï¼Œæµ¸å…¥ myriad adj. å¤§é‡çš„ï¼Œæ— æ•°çš„","link":"/2022/03/30/%E5%9B%BE%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/%E5%9B%BE%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E7%9A%84%E9%80%9A%E4%BF%97%E7%90%86%E8%A7%A3-GNN%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84/"},{"title":"å›¾ç¥ç»ç½‘ç»œçš„é€šä¿—ç†è§£-å›¾çš„åŸºæœ¬çŸ¥è¯†","text":"hljs.initHighlightingOnLoad(); ç¥ç»ç½‘ç»œåœ¨å¤„ç†é—®é¢˜æ˜¯ä¼šä½¿ç”¨åˆ°å›¾ç»“æ„ã€‚æœ¬ç¯‡æ–‡ç« æ–‡ç« æˆ‘ä»¬å°è¯•å»æ¢ç´¢ä¸€äº›å›¾ç»“æ„çš„ç»„æˆï¼ŒåŠå…¶èƒŒåæ‰€éšå«çš„é“ç†ã€‚æœ¬æ–‡ä¸»è¦ä»‹ç»å›¾çš„ä¸€äº›åŸºæœ¬çŸ¥è¯†ä»¥åŠå®é™…çš„åº”ç”¨æ¡ˆä¾‹ã€‚ åšå®¢çš„å‚è€ƒç½‘å€ï¼šA Gentle Introduction to Graph Neural Networks (distill.pub)ï¼šhttps://distill.pub/2021/gnn-intro/ è§†é¢‘çš„å‚è€ƒåœ°å€ï¼šhttps://www.bilibili.com/video/BV1iT4y1d7zP/?spm_id_from=333.788.recommend_more_video.0 åŸç½‘é¡µä¸ºä¸€ä¸ªäº¤äº’çš„å›¾ï¼Œå¦‚å›¾æ‰€ç¤ºï¼Œè¯¥èŠ‚ç‚¹çš„å€¼æ—¶ç”±ä¸Šä¸€å±‚çš„è¯¥èŠ‚ç‚¹åŠå…¶é‚»å±…ç»“ç‚¹çš„åŠ æƒå€¼æ„æˆçš„ã€‚ æ–œä½“å­—ï¼Œéæ­£æ–‡çš„å†…å®¹ã€‚ æˆ‘ä»¬å‘¨å›´åˆ°å¤„éƒ½æ˜¯å›¾è¡¨ï¼›ç°å®ä¸–ç•Œçš„å¯¹è±¡é€šå¸¸æ˜¯æ ¹æ®å®ƒä»¬ä¸å…¶ä»–äº‹ç‰©çš„è”ç³»æ¥å®šä¹‰çš„ã€‚ä¸€ç»„å¯¹è±¡ï¼Œä»¥åŠå®ƒä»¬ä¹‹é—´çš„è”ç³»ï¼Œè‡ªç„¶åœ°ç”¨å›¾å½¢è¡¨ç¤ºå‡ºæ¥ã€‚ç ”ç©¶äººå‘˜å·²ç»å¼€å‘å‡ºåŸºäºå›¾å½¢æ•°æ®çš„ç¥ç»ç½‘ç»œ(ç§°ä¸ºå›¾å½¢ç¥ç»ç½‘ç»œï¼Œæˆ–GNN)è¶…è¿‡10å¹´äº†ã€‚æœ€è¿‘çš„å‘å±•æé«˜äº†å®ƒä»¬çš„èƒ½åŠ›å’Œè¡¨è¾¾èƒ½åŠ›ã€‚æˆ‘ä»¬å¼€å§‹çœ‹åˆ°å®ƒåœ¨æŠ—èŒè¯ç‰©å‘ç°[3]ã€ç‰©ç†æ¨¡æ‹Ÿ[4]ã€å‡æ–°é—»æ£€æµ‹[5]ã€æµé‡é¢„æµ‹[6]å’Œæ¨èç³»ç»Ÿ[7]ç­‰é¢†åŸŸçš„å®é™…åº”ç”¨ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼ŒGNNç°åœ¨çŒœåˆšåˆšæœ‰ç®€å•çš„è½åœ°å®ä¾‹ï¼Œä¹‹å‰åŸºæœ¬ä¸Šæ˜¯ç§‘å­¦çš„ç ”ç©¶ï¼Œå¹¶æ²¡æœ‰å¾ˆå¤šçš„åº”ç”¨ã€‚ è¿™ç¯‡åšå®¢ä¸»è¦è§£é‡Šå’Œæ¢ç´¢ç°ä»£çš„å›¾ç½‘ç»œç»“æ„ã€‚æˆ‘ä»¬æŠŠè¿™é¡¹å·¥ä½œåˆ†æˆå››ä¸ªéƒ¨åˆ†ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬çœ‹çœ‹ä»€ä¹ˆæ ·çš„æ•°æ®å¯ä»¥è‡ªç„¶åœ°ç”¨å›¾è¡¨è¡¨è¾¾ï¼Œä»¥åŠä¸€äº›å¸¸è§çš„ä¾‹å­ã€‚ å…¶æ¬¡ï¼Œæˆ‘ä»¬å°†æ¢è®¨æ˜¯ä»€ä¹ˆä½¿å›¾ä¸åŒäºå…¶ä»–ç±»å‹çš„æ•°æ®ï¼Œä»¥åŠåœ¨ä½¿ç”¨å›¾æ—¶å¿…é¡»åšå‡ºçš„ä¸€äº›ç‰¹æ®Šé€‰æ‹©ã€‚ ç¬¬ä¸‰ï¼Œæˆ‘ä»¬æ„å»ºä¸€ä¸ªç°ä»£GNNï¼Œä»è¯¥é¢†åŸŸçš„å†å²å»ºæ¨¡åˆ›æ–°å¼€å§‹ï¼Œéå†æ¨¡å‹çš„æ¯ä¸ªéƒ¨åˆ†ã€‚æˆ‘ä»¬é€æ­¥ä»ä¸€ä¸ªæœ€åŸºæœ¬çš„å®ç°è¿‡æ¸¡åˆ°æœ€å…ˆè¿›çš„GNNæ¨¡å‹ã€‚ ç¬¬å››ï¼Œä¹Ÿæ˜¯æœ€åï¼Œæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªGNN playgroundï¼Œåœ¨è¿™é‡Œæ‚¨å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå®å­—ä»»åŠ¡å’Œæ•°æ®é›†æ¥æ„å»ºä¸€ä¸ªæ›´å¼ºçš„ç›´è§‰ï¼Œäº†è§£GNNæ¨¡å‹çš„æ¯ä¸ªç»„ä»¶å¦‚ä½•å¯¹å…¶æ‰€åšçš„é¢„æµ‹åšå‡ºè´¡çŒ®ã€‚ ä»€ä¹ˆæ˜¯å›¾å›¾è¡¨ç¤ºå®ä½“(èŠ‚ç‚¹)é›†åˆä¹‹é—´çš„å…³ç³»(è¾¹)ã€‚ Vï¼šä»£è¡¨æ•´ä¸ªç»“ç‚¹æ‰€å«çš„ä¿¡æ¯ï¼› Eï¼šä»£è¡¨è¾¹ä¸è¾¹ä¹‹é—´çš„æ‰€å«çš„ä¿¡æ¯ï¼› Uï¼šä»£è¡¨å…¨å±€çš„å›¾åŠå…¶æ‰€å«çš„ä¿¡æ¯ã€‚ ä¸ºäº†è¿›ä¸€æ­¥æè¿°æ¯ä¸ªèŠ‚ç‚¹ã€è¾¹æˆ–æ•´ä¸ªå›¾ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å›¾çš„æ¯ä¸ªéƒ¨åˆ†ä¸­å­˜å‚¨ä¿¡æ¯ã€‚ è¿™é‡Œï¼Œç»“ç‚¹ä½¿ç”¨çš„æ˜¯ä¸€ä¸ªé•¿åº¦ä¸º6çš„å‘é‡æ¥è¡¨ç¤ºï¼Œè€Œè¾¹ä½¿ç”¨çš„æ˜¯ä¸€ä¸ªé•¿åº¦ä¸º8çš„å‘é‡ï¼Œå…¨å±€ä¿¡æ¯ä½¿ç”¨çš„æ˜¯é•¿åº¦ä¸ºäº”çš„å‘é‡ã€‚ å›¾ä¸€èˆ¬æœ‰ä¸¤ç§ï¼Œæ— å‘å›¾å¦‚å¥½å‹å…³ç³»ä¸€èˆ¬æ˜¯åŒå‘çš„ï¼Œä½†æ˜¯å…³æ³¨äºè¢«å…³æ³¨çš„å…³ç³»æ˜¯ä¸€ä¸ªæœ‰å‘å›¾ã€‚ å›¾æ˜¯éå¸¸çµæ´»çš„æ•°æ®ç»“æ„ï¼Œå¦‚æœç°åœ¨çœ‹èµ·æ¥å¾ˆæŠ½è±¡ï¼Œæˆ‘ä»¬å°†åœ¨ä¸‹ä¸€èŠ‚ä¸­é€šè¿‡ç¤ºä¾‹ä½¿å…¶å…·ä½“åŒ–ã€‚ æ‚¨å¯èƒ½å·²ç»ç†Ÿæ‚‰äº†æŸäº›ç±»å‹çš„å›¾è¡¨æ•°æ®ï¼Œæ¯”å¦‚ç¤¾äº¤ç½‘ç»œã€‚ç„¶è€Œï¼Œå›¾å½¢æ˜¯ä¸€ç§éå¸¸å¼ºå¤§çš„é€šç”¨æ•°æ®è¡¨ç¤ºï¼Œæˆ‘ä»¬å°†å±•ç¤ºä¸¤ç§ç±»å‹çš„æ•°æ®ï¼Œæ‚¨å¯èƒ½è®¤ä¸ºå®ƒä»¬æ— æ³•å»ºæ¨¡ä¸ºå›¾å½¢ï¼šå›¾åƒå’Œæ–‡æœ¬ã€‚å°½ç®¡æœ‰æ‚–ç›´è§‰ï¼Œä½†é€šè¿‡å°†å›¾åƒå’Œæ–‡æœ¬è§†ä¸ºå›¾å½¢ï¼Œå¯ä»¥äº†è§£æ›´å¤šå…³äºå®ƒä»¬çš„å¯¹ç§°æ€§å’Œç»“æ„çš„ä¿¡æ¯ï¼Œå¹¶å»ºç«‹ä¸€ç§ç›´è§‰ï¼Œæœ‰åŠ©äºç†è§£å…¶ä»–ä¸å¤ªåƒç½‘æ ¼çš„å›¾å½¢æ•°æ®ï¼Œæˆ‘ä»¬å°†åœ¨åé¢è®¨è®ºã€‚ å›¾æ¥è¡¨ç¤ºå›¾åƒæˆ‘ä»¬é€šå¸¸è®¤ä¸ºå›¾åƒæ˜¯å¸¦æœ‰å›¾åƒé€šé“çš„çŸ©å½¢ç½‘æ ¼ï¼Œç”¨æ•°ç»„è¡¨ç¤ºå®ƒä»¬(ä¾‹å¦‚ï¼Œ244x244x3æµ®ç‚¹æ•°)ã€‚å¦ä¸€ç§å°†å›¾åƒçœ‹ä½œå…·æœ‰è§„åˆ™ç»“æ„çš„å›¾ï¼Œå…¶ä¸­æ¯ä¸ªåƒç´ ä»£è¡¨ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¹¶é€šè¿‡ä¸€æ¡è¾¹ä¸ç›¸é‚»åƒç´ è¿æ¥ã€‚æ¯ä¸ªæ— è¾¹ç•Œåƒç´ æ­£å¥½æœ‰8ä¸ªé‚»å±…ï¼Œæ¯ä¸ªèŠ‚ç‚¹ä¸Šå­˜å‚¨çš„ä¿¡æ¯æ˜¯è¡¨ç¤ºåƒç´ RGBå€¼çš„ä¸‰ç»´å‘é‡ã€‚ å¯è§†åŒ–å›¾çš„è¿æ¥æ€§çš„ä¸€ç§æ–¹æ³•æ˜¯é€šè¿‡å®ƒçš„é‚»æ¥çŸ©é˜µã€‚æˆ‘ä»¬å¯¹èŠ‚ç‚¹è¿›è¡Œæ’åºï¼Œåœ¨æœ¬ä¾‹ä¸­ï¼Œåœ¨ä¸€ä¸ªç®€å•çš„5x5ç¬‘è„¸å›¾åƒä¸­æ¯ä¸ªèŠ‚ç‚¹ä¸º25ä¸ªåƒç´ ï¼Œå¦‚æœä¸¤ä¸ªèŠ‚ç‚¹å…±äº«ä¸€æ¡è¾¹ï¼Œåˆ™ç”¨ä¸€ä¸ªæ¡ç›®å¡«å……ä¸€ä¸ªç”±$n_{nodes} \\times n_{nodes}$ç»„æˆçš„çŸ©é˜µã€‚è¯·æ³¨æ„ï¼Œä¸‹é¢è¿™ä¸‰ç§è¡¨ç¤ºéƒ½æ˜¯åŒä¸€æ®µæ•°æ®çš„ä¸åŒè§†å›¾ã€‚ å…¶å®å°±æ˜¯ä¸€ä¸ªé‚»æ¥çŸ©é˜µï¼Œæ¥è¡¨ç¤ºå…¶è¿æ¥ä¸å¦ã€‚ å›¾æ¥è¡¨ç¤ºæ–‡æœ¬æˆ‘ä»¬å¯ä»¥å°†ç´¢å¼•å…³è”åˆ°æ¯ä¸ªå­—ç¬¦ã€å•è¯æˆ–æ ‡è®°ï¼Œå¹¶å°†æ–‡æœ¬è¡¨ç¤ºä¸ºè¿™äº›ç´¢å¼•çš„åºåˆ—ï¼Œä»è€Œå¯¹æ–‡æœ¬è¿›è¡Œæ•°å­—åŒ–ã€‚è¿™åˆ›å»ºäº†ä¸€ä¸ªç®€å•çš„æœ‰å‘å›¾ï¼Œå…¶ä¸­æ¯ä¸ªå­—ç¬¦æˆ–ç´¢å¼•éƒ½æ˜¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¹¶é€šè¿‡ä¸€æ¡è¾¹è¿æ¥åˆ°å®ƒåé¢çš„èŠ‚ç‚¹ã€‚ è¿™ç§è¡¨ç¤º(å­—ç¬¦æ ‡è®°åºåˆ—)æŒ‡çš„æ˜¯æ–‡æœ¬é€šå¸¸åœ¨RNNä¸­è¡¨ç¤ºçš„æ–¹å¼ï¼›å…¶ä»–æ¨¡å‹ï¼Œå¦‚transformerï¼Œå¯ä»¥å°†æ–‡æœ¬è§†ä¸ºä¸€ä¸ªå®Œå…¨è¿æ¥çš„å›¾ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸­äº†è§£æ ‡è®°ä¹‹é—´çš„å…³ç³»ã€‚è¯¦ç»†çš„è€Œå¯ä»¥å‚è€ƒä¸‹é¢åšå®¢ Graph Attention Networks. å½“ç„¶ï¼Œåœ¨å®è·µä¸­ï¼Œæ–‡æœ¬å’Œå›¾åƒé€šå¸¸ä¸æ˜¯è¿™æ ·ç¼–ç çš„:è¿™äº›å›¾è¡¨ç¤ºæ˜¯å¤šä½™çš„ï¼Œå› ä¸ºæ‰€æœ‰çš„å›¾åƒå’Œæ–‡æœ¬éƒ½æœ‰éå¸¸è§„åˆ™çš„ç»“æ„ã€‚ä¾‹å¦‚ï¼Œå›¾åƒåœ¨å…¶é‚»æ¥çŸ©é˜µä¸­æœ‰ä¸€ä¸ªå¸¦çŠ¶ç»“æ„ï¼Œå› ä¸ºæ‰€æœ‰èŠ‚ç‚¹(åƒç´ )éƒ½è¿æ¥åœ¨ä¸€ä¸ªç½‘æ ¼ä¸­ã€‚æ–‡æœ¬çš„é‚»æ¥çŸ©é˜µåªæ˜¯ä¸€æ¡å¯¹è§’çº¿ï¼Œå› ä¸ºæ¯ä¸ªå•è¯åªä¸å‰ä¸€ä¸ªå•è¯è¿æ¥ï¼Œå¹¶ä¸ä¸‹ä¸€ä¸ªå•è¯è¿æ¥ã€‚ å›¾æ¥è¡¨ç¤ºåˆ†å­ç»“æ„å›¾æ˜¯æè¿°æ‚¨å¯èƒ½å·²ç»ç†Ÿæ‚‰çš„æ•°æ®çš„æœ‰ç”¨å·¥å…·ã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹ç»“æ„æ›´åŠ å¼‚æ„çš„æ•°æ®ã€‚åœ¨è¿™äº›ç¤ºä¾‹ä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„é‚»å±…æ•°é‡æ˜¯å¯å˜çš„(ä¸å›¾åƒå’Œæ–‡æœ¬çš„å›ºå®šé‚»å±…å¤§å°ç›¸å)ã€‚é™¤äº†å›¾è¡¨ï¼Œæˆ‘ä»¬å¾ˆéš¾ç”¨å…¶ä»–ä»»ä½•æ–¹å¼æ¥è¡¨è¾¾è¿™äº›æ•°æ®ã€‚ åˆ†å­å›¾å½¢ã€‚åˆ†å­æ˜¯ç‰©è´¨çš„åŸºçŸ³ï¼Œæ˜¯ç”±ä¸‰ç»´ç©ºé—´ä¸­çš„åŸå­å’Œç”µå­æ„æˆçš„ã€‚æ‰€æœ‰çš„ç²’å­éƒ½åœ¨ç›¸äº’ä½œç”¨ï¼Œä½†å½“ä¸€å¯¹åŸå­å½¼æ­¤ä¹‹é—´ä¿æŒç¨³å®šçš„è·ç¦»æ—¶ï¼Œæˆ‘ä»¬è¯´å®ƒä»¬å…±äº«ä¸€ä¸ªå…±ä»·é”®ã€‚ä¸åŒçš„åŸå­å’Œé”®å¯¹æœ‰ä¸åŒçš„è·ç¦»(å¦‚å•é”®ã€åŒé”®)ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸æ–¹ä¾¿å’Œå¸¸è§çš„æŠ½è±¡æ¥æè¿°è¿™ä¸ªä¸‰ç»´å¯¹è±¡ä½œä¸ºä¸€ä¸ªå›¾å½¢ï¼Œå…¶ä¸­èŠ‚ç‚¹æ˜¯åŸå­ï¼Œè¾¹æ˜¯å…±ä»·é”®ã€‚è¿™æ˜¯ä¸¤ç§å¸¸è§çš„åˆ†å­åŠå…¶ç›¸å…³çš„å›¾å½¢ã€‚ å›¾æ¥è¡¨ç¤ºäººç‰©å…³ç³»ç¤¾äº¤ç½‘ç»œå°±æ˜¯å›¾è¡¨ã€‚ç¤¾äº¤ç½‘ç»œæ˜¯ç ”ç©¶äººä»¬ã€æœºæ„å’Œç»„ç»‡çš„é›†ä½“è¡Œä¸ºæ¨¡å¼çš„å·¥å…·ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å°†ä¸ªä½“å»ºæ¨¡ä¸ºèŠ‚ç‚¹ï¼Œå°†ä»–ä»¬çš„å…³ç³»å»ºæ¨¡ä¸ºè¾¹ï¼Œæ¥æ„å»ºä¸€ä¸ªè¡¨ç¤ºäººç¾¤çš„å›¾ã€‚ å›¾è¡¨ç¤ºå…¶ä»–ç½‘ç»œç»“æ„å¼•æ–‡ç½‘ç»œæ˜¯å›¾è¡¨ã€‚ç§‘å­¦å®¶åœ¨å‘è¡¨è®ºæ–‡æ—¶ç»å¸¸å¼•ç”¨å…¶ä»–ç§‘å­¦å®¶çš„ç ”ç©¶æˆæœã€‚æˆ‘ä»¬å¯ä»¥å°†è¿™äº›å¼•ç”¨ç½‘ç»œå½¢è±¡åŒ–ä¸ºä¸€ä¸ªå›¾ï¼Œå…¶ä¸­æ¯ä¸€ç¯‡è®ºæ–‡éƒ½æ˜¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ¯ä¸€æ¡æœ‰å‘è¾¹éƒ½æ˜¯ä¸€ç¯‡è®ºæ–‡å’Œå¦ä¸€ç¯‡è®ºæ–‡ä¹‹é—´çš„å¼•ç”¨ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸­æ·»åŠ å…³äºæ¯ç¯‡è®ºæ–‡çš„ä¿¡æ¯ï¼Œä¾‹å¦‚æ‘˜è¦çš„å•è¯åµŒå…¥ã€‚ æ³¨æ„ï¼šå¼•ç”¨çš„å…³ç³»å›¾æ˜¯ä¸€ä¸ªæœ‰å‘å›¾ã€‚ å…¶ä»–çš„ä¾‹å­ã€‚åœ¨è®¡ç®—æœºè§†è§‰ä¸­ï¼Œæˆ‘ä»¬æœ‰æ—¶å¸Œæœ›åœ¨è§†è§‰åœºæ™¯ä¸­æ ‡è®°å¯¹è±¡ã€‚ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å°†è¿™äº›å¯¹è±¡è§†ä¸ºèŠ‚ç‚¹ï¼Œå°†å®ƒä»¬çš„å…³ç³»è§†ä¸ºè¾¹æ¥æ„å»ºå›¾ã€‚æœºå™¨å­¦ä¹ æ¨¡å‹ã€ç¼–ç¨‹ä»£ç å’Œæ•°å­¦æ–¹ç¨‹ä¹Ÿå¯ä»¥è¡¨ç¤ºä¸ºå›¾å½¢ï¼Œå…¶ä¸­å˜é‡æ˜¯èŠ‚ç‚¹ï¼Œè¾¹æ˜¯å°†è¿™äº›å˜é‡ä½œä¸ºè¾“å…¥å’Œè¾“å‡ºçš„æ“ä½œã€‚æ‚¨å¯èƒ½ä¼šåœ¨è¿™äº›ä¸Šä¸‹æ–‡ä¸­çœ‹åˆ°æœ¯è¯­â€œæ•°æ®æµå›¾â€ã€‚ çœŸå®ä¸–ç•Œçš„å›¾çš„ç»“æ„åœ¨ä¸åŒç±»å‹çš„æ•°æ®ä¹‹é—´å¯èƒ½æœ‰å¾ˆå¤§çš„å·®å¼‚ï¼Œä¸€äº›å›¾æœ‰è®¸å¤šèŠ‚ç‚¹ï¼Œä½†å®ƒä»¬ä¹‹é—´çš„è¿æ¥å¾ˆå°‘ï¼Œåä¹‹äº¦ç„¶ã€‚å›¾æ•°æ®é›†åœ¨èŠ‚ç‚¹ã€è¾¹çš„æ•°é‡å’ŒèŠ‚ç‚¹çš„è¿æ¥æ€§æ–¹é¢å¯èƒ½æœ‰å¾ˆå¤§çš„å·®å¼‚(åœ¨ç»™å®šçš„æ•°æ®é›†å†…å’Œæ•°æ®é›†ä¹‹é—´)ã€‚ ä»€ä¹ˆæ ·çš„é—®é¢˜å¯ä»¥ä½¿ç”¨å›¾ç»“æ„æˆ‘ä»¬å·²ç»æè¿°äº†ä¸€äº›å›¾å½¢çš„ç¤ºä¾‹ï¼Œä½†æ˜¯æˆ‘ä»¬å¸Œæœ›å¯¹è¿™äº›æ•°æ®æ‰§è¡Œä»€ä¹ˆä»»åŠ¡å‘¢ï¼Ÿåœ¨å›¾ä¸Šæœ‰ä¸‰ç§ä¸€èˆ¬ç±»å‹çš„é¢„æµ‹ä»»åŠ¡ï¼šå›¾çº§ã€èŠ‚ç‚¹çº§å’Œè¾¹ç¼˜çº§ã€‚ åœ¨å›¾çº§ä»»åŠ¡ä¸­ï¼Œæˆ‘ä»¬é¢„æµ‹æ•´ä¸ªå›¾çš„å•ä¸ªå±æ€§ã€‚å¯¹äºèŠ‚ç‚¹çº§ä»»åŠ¡ï¼Œæˆ‘ä»¬é¢„æµ‹å›¾ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„ä¸€äº›å±æ€§ã€‚å¯¹äºè¾¹çº§ä»»åŠ¡ï¼Œæˆ‘ä»¬å¸Œæœ›é¢„æµ‹å›¾ä¸­è¾¹çš„å±æ€§æˆ–å­˜åœ¨ã€‚ å¯¹äºä¸Šé¢æè¿°çš„ä¸‰ä¸ªçº§åˆ«çš„é¢„æµ‹é—®é¢˜(å›¾çº§ã€èŠ‚ç‚¹çº§å’Œè¾¹çº§)ï¼Œæˆ‘ä»¬å°†è¯´æ˜ä»¥ä¸‹æ‰€æœ‰é—®é¢˜éƒ½å¯ä»¥é€šè¿‡å•ä¸ªæ¨¡å‹ç±»GNNæ¥è§£å†³ã€‚ä½†é¦–å…ˆï¼Œè®©æˆ‘ä»¬æ›´è¯¦ç»†åœ°æµè§ˆä¸€ä¸‹è¿™ä¸‰ç±»å›¾é¢„æµ‹é—®é¢˜ï¼Œå¹¶æä¾›æ¯ç§é—®é¢˜çš„å…·ä½“ç¤ºä¾‹ã€‚ Graph-level taskåœ¨å›¾çº§ä»»åŠ¡ä¸­ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯é¢„æµ‹æ•´ä¸ªå›¾çš„å±æ€§ã€‚ä¾‹å¦‚ï¼Œå¯¹äºä¸€ä¸ªç”¨å›¾è¡¨è¡¨ç¤ºçš„åˆ†å­ï¼Œæˆ‘ä»¬å¯èƒ½æƒ³è¦é¢„æµ‹è¿™ä¸ªåˆ†å­çš„æ°”å‘³ï¼Œæˆ–è€…å®ƒæ˜¯å¦ä¼šä¸ä¸€ç§ä¸ç–¾ç—…æœ‰å…³çš„å—ä½“ç»“åˆã€‚ æ¯”å¦‚æœ‰äº›ä»»åŠ¡æ˜¯æ£€æµ‹è¯ç‰©åˆ†å­é‡Œæ˜¯å¦å­˜åœ¨ç¯ç»“æ„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä½†æ˜¯æ£€æµ‹ç¯ç»“æ„å…¶å®å¹¶ä¸ä¸€å®šè¦GNNï¼Œä¸€èˆ¬çš„å›¾æœç´¢ç®—æ³•å…¶å®å°±å¯ä»¥ã€‚ è¿™ç±»ä¼¼äºMNISTå’ŒCIFARçš„å›¾åƒåˆ†ç±»é—®é¢˜ï¼Œåœ¨è¿™äº›é—®é¢˜ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›å°†ä¸€ä¸ªæ ‡ç­¾å…³è”åˆ°æ•´ä¸ªå›¾åƒã€‚å¯¹äºæ–‡æœ¬ï¼Œä¸€ä¸ªç±»ä¼¼çš„é—®é¢˜æ˜¯æƒ…ç»ªåˆ†æï¼Œæˆ‘ä»¬æƒ³è¦ä¸€æ¬¡æ€§ç¡®å®šæ•´ä¸ªå¥å­çš„æƒ…ç»ªæˆ–æƒ…ç»ªã€‚ å¯¹äºç›‘ç£å­¦ä¹ ä¸­çš„åˆ†ç±»é—®é¢˜ï¼Œå»ºç«‹labelå’ŒImageä¹‹é—´çš„å…³ç³»ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªç®€å•çš„é—®é¢˜å›¾çº§åˆ«çš„é—®é¢˜ã€‚ Node-level taskèŠ‚ç‚¹çº§ä»»åŠ¡ä¸é¢„æµ‹å›¾ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„æ ‡è¯†æˆ–è§’è‰²æœ‰å…³ã€‚ è¿™è¾¹æˆ‘ä¸ªäººæ„Ÿè§‰å¯èƒ½è·Ÿç›®æ ‡æ£€æµ‹å’Œè¯­ä¹‰åˆ†å‰²ä¸€æ ·ï¼Œä¸»è¦æ˜¯ç”¨æ¥ç†è§£å›¾ç‰‡æ˜¯æ¯ä¸€ä¸ªå•å…ƒçš„labelï¼Œå°±æ¯”å¦‚ç›®æ ‡æ£€æµ‹ä¸­ï¼Œç†è§£è½¦ã€éšœç¢ã€è¡Œäººä»¥åŠèƒŒæ™¯ã€‚ èŠ‚ç‚¹çº§é¢„æµ‹é—®é¢˜çš„ä¸€ä¸ªç»å…¸ä¾‹å­æ˜¯Zachçš„ç©ºæ‰‹é“ä¿±ä¹éƒ¨ã€‚è¯¥æ•°æ®é›†æ˜¯ä¸€ä¸ªå•ä¸€çš„ç¤¾äº¤ç½‘ç»œå›¾ï¼Œç”±åœ¨æ”¿æ²»åˆ†æ­§åå®£èª“æ•ˆå¿ äºä¸¤ä¸ªç©ºæ‰‹é“ä¿±ä¹éƒ¨ä¹‹ä¸€çš„ä¸ªäººç»„æˆã€‚ éšç€æ•…äº‹çš„å‘å±•ï¼ŒMr. Hi(æ•™ç»ƒ)å’ŒJohn H(ç®¡ç†å‘˜)ä¹‹é—´çš„ä¸–ä»‡åœ¨ç©ºæ‰‹é“ä¿±ä¹éƒ¨é€ æˆäº†åˆ†è£‚ã€‚èŠ‚ç‚¹ä»£è¡¨æ¯ä¸ªç©ºæ‰‹é“ç»ƒä¹ è€…ï¼Œè¾¹ç¼˜ä»£è¡¨ç©ºæ‰‹é“ä¹‹å¤–è¿™äº›æˆå‘˜ä¹‹é—´çš„äº’åŠ¨ã€‚ é¢„æµ‹çš„é—®é¢˜æ˜¯åŒºåˆ†ä¸€ä¸ªç»™å®šçš„æˆå‘˜åœ¨ä¸å’Œä¹‹åæ˜¯å¿ äºMr. Hiè¿˜æ˜¯John Hã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒèŠ‚ç‚¹åˆ°è®²å¸ˆæˆ–ç®¡ç†å‘˜ä¹‹é—´çš„è·ç¦»ä¸æ­¤æ ‡ç­¾é«˜åº¦ç›¸å…³ã€‚ Edge-level taskå›¾çš„å‰©ä½™é¢„æµ‹é—®é¢˜æ˜¯è¾¹ç¼˜é¢„æµ‹ã€‚ è¾¹ç¼˜æ°´å¹³æ¨ç†çš„ä¸€ä¸ªä¾‹å­æ˜¯å›¾åƒåœºæ™¯ç†è§£ã€‚é™¤äº†è¯†åˆ«å›¾åƒä¸­çš„ç‰©ä½“ï¼Œæ·±åº¦å­¦ä¹ æ¨¡å‹è¿˜å¯ä»¥ç”¨æ¥é¢„æµ‹å®ƒä»¬ä¹‹é—´çš„å…³ç³»ã€‚æˆ‘ä»¬å¯ä»¥å°†å…¶æè¿°ä¸ºè¾¹çº§åˆ†ç±»ï¼šç»™å®šä»£è¡¨å›¾åƒä¸­å¯¹è±¡çš„èŠ‚ç‚¹ï¼Œæˆ‘ä»¬å¸Œæœ›é¢„æµ‹è¿™äº›èŠ‚ç‚¹ä¸­å“ªäº›èŠ‚ç‚¹å…±äº«ä¸€æ¡è¾¹ï¼Œæˆ–è€…é‚£æ¡è¾¹çš„å€¼æ˜¯å¤šå°‘ã€‚ å¦‚æœæˆ‘ä»¬æƒ³è¦å‘ç°å®ä½“ä¹‹é—´çš„è¿æ¥ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºå›¾æ˜¯å®Œå…¨è¿é€šçš„ï¼Œå¹¶æ ¹æ®å®ƒä»¬çš„é¢„æµ‹å€¼å‰ªæè¾¹æ¥å¾—åˆ°ä¸€ä¸ªç¨€ç–å›¾ã€‚ è¿™è¾¹å…¶å®å°±æ˜¯è¯­ä¹‰åˆ†å‰²ä¹‹åçš„ç»“æœè¿›è¡Œç†è§£ï¼Œå°†æ¯ä¸ªèŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»è¿›è¡Œç†è§£ï¼Œæ¯”å¦‚è§‚ä¼—å’Œå°ä¸Šé¢äººçš„å…³ç³»æ˜¯Watchingï¼Œå…¶ä½™äººèƒŒæ™¯çš„å…³ç³»æ˜¯standing ç­‰ã€‚ ç¥ç»ç½‘ç»œç”¨åœ¨å›¾ä¸Šé¢çš„æŒ‘æˆ˜é‚£ä¹ˆï¼Œæˆ‘ä»¬å¦‚ä½•ç”¨ç¥ç»ç½‘ç»œæ¥è§£å†³è¿™äº›ä¸åŒçš„å›¾å½¢ä»»åŠ¡å‘¢ï¼Ÿç¬¬ä¸€æ­¥æ˜¯è€ƒè™‘å¦‚ä½•è¡¨ç¤ºä¸ç¥ç»ç½‘ç»œå…¼å®¹çš„å›¾ç»“æ„ã€‚ æœºå™¨å­¦ä¹ æ¨¡å‹é€šå¸¸é‡‡ç”¨çŸ©å½¢æˆ–ç½‘æ ¼çŠ¶é˜µåˆ—ä½œä¸ºè¾“å…¥ã€‚å› æ­¤ï¼Œå¦‚ä½•ç”¨ä¸€ç§ä¸æ·±åº¦å­¦ä¹ å…¼å®¹çš„æ ¼å¼æ¥è¡¨ç¤ºå®ƒä»¬å¹¶ä¸æ˜¯ä¸€ç§ç›´è§‚çš„æ–¹æ³•ã€‚å›¾æœ‰å¤šè¾¾å››ç§ç±»å‹çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯èƒ½å¸Œæœ›ä½¿ç”¨å®ƒä»¬æ¥è¿›è¡Œé¢„æµ‹ï¼šèŠ‚ç‚¹ã€è¾¹ã€å…¨å±€ä¸Šä¸‹æ–‡å’Œè¿æ¥æ€§ã€‚ å‰ä¸‰ä¸ªæ˜¯ç›¸å¯¹ç®€å•çš„ï¼šä¾‹å¦‚ï¼Œé€šè¿‡èŠ‚ç‚¹æˆ‘ä»¬å¯ä»¥å½¢æˆä¸€ä¸ªèŠ‚ç‚¹ç‰¹å¾çŸ©é˜µNï¼Œæ¯ä¸ªèŠ‚ç‚¹(node)ç´¢å¼•ä¸º iå˜ä¸ºä¸€ä¸ªç‰¹å¾$node_i \\in N$å­˜å‚¨åˆ°çŸ©é˜µä¸­ ï¼Œå…¶å®å°±æ˜¯æ¯ä¸ªèŠ‚ç‚¹ä»£è¡¨çŸ©é˜µçš„ä¸€ä¸ªç»´åº¦ã€‚å°½ç®¡è¿™äº›çŸ©é˜µçš„æ‰€åŒ…å«çš„ç‰¹å¾çš„æ•°é‡æ˜¯å˜åŒ–çš„(è¿™é‡Œæˆ‘ç†è§£çš„æ˜¯ç»´åº¦æ˜¯å˜åŒ–çš„)ï¼Œä½†æ˜¯ç…§æ ·å¯ä»¥ä½¿ç”¨ä¸€èˆ¬åŒ–çš„æ–¹æ³•æ¥å¤„ç†ã€‚ ç„¶è€Œï¼Œè¡¨ç¤ºå›¾çš„è¿æ¥æ€§è¦å¤æ‚å¾—å¤šã€‚è®¸æœ€æ˜æ˜¾çš„é€‰æ‹©æ˜¯ä½¿ç”¨é‚»æ¥çŸ©é˜µï¼Œå› ä¸ºå®ƒå¾ˆå®¹æ˜“å¼ é‡åŒ–ã€‚ä½†æ˜¯ï¼Œè¿™ç§è¡¨ç¤ºæ–¹å¼æœ‰ä¸€äº›ç¼ºç‚¹ã€‚ ä»ç¤ºä¾‹æ•°æ®é›†è¡¨ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å›¾ä¸­çš„èŠ‚ç‚¹æ•°å¯ä»¥è¾¾åˆ°æ•°ç™¾ä¸‡çš„é‡çº§ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„å¯¹äºçš„è¾¹æ•°å¯ä»¥æ˜¯é«˜åº¦å¯å˜çš„ã€‚ è¿™é€šå¸¸ä¼šå¯¼è‡´ç¨€ç–çš„é‚»æ¥çŸ©é˜µï¼Œè¿™æ˜¯ç©ºé—´ä½æ•ˆçš„ã€‚ è¿™é‡Œï¼Œåœ¨ä¼ ç»Ÿçš„å›¾æ¨¡å‹é‡Œé¢ï¼Œä¸€èˆ¬æ˜¯ç”¨é‚»æ¥çŸ©é˜µçš„æ–¹å¼æ¥è¿›è¡Œå­˜å‚¨çš„ï¼Œä½†æ˜¯å½“æ•°æ®æ¯”è¾ƒå¤šæ—¶ï¼ŒçŸ©é˜µçš„ç»´æ•°ä¼šå‡ºå¥‡çš„å¤§ï¼Œå¯¹è®¾å¤‡çš„å­˜å‚¨æœ‰ä¸€å®šçš„è¦æ±‚ã€‚ å½“ç„¶ï¼Œä¹Ÿè®¸ä¼šæœ‰ç¨€ç–çŸ©é˜µçš„æ–¹å¼æ¥è¿›è¡Œå­˜å‚¨ï¼Œä½†æ˜¯ç¨€ç–çŸ©é˜µæ²¡åŠæ³•ä½¿ç”¨GPUè®¾å¤‡ã€‚ å¦ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œæœ‰è®¸å¤šé‚»æ¥çŸ©é˜µå¯ä»¥ç¼–ç ç›¸åŒçš„è¿é€šæ€§ï¼Œå¹¶ä¸”ä¸èƒ½ä¿è¯è¿™äº›ä¸åŒçš„çŸ©é˜µä¼šåœ¨æ·±åº¦ç¥ç»ç½‘ç»œä¸­äº§ç”Ÿç›¸åŒçš„ç»“æœ(ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä»¬ä¸æ˜¯ç½®æ¢ä¸å˜çš„)ã€‚ ä¾‹å¦‚ï¼Œå‰é¢çš„å¥¥èµ›ç½—å›¾å¯ä»¥ç”¨è¿™ä¸¤ä¸ªé‚»æ¥çŸ©é˜µç­‰ä»·åœ°æè¿°ã€‚å®ƒä¹Ÿå¯ä»¥ç”¨æ‰€æœ‰å…¶ä»–å¯èƒ½çš„èŠ‚ç‚¹æ’åˆ—æ¥æè¿°ã€‚å…¶å®å°±æ˜¯ä¸¤ä¸ªè¡Œéšä¾¿æ¢ä½å€¼ä¹‹åå…¶å®è¿æ¥çš„å…³ç³»éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯çŸ©é˜µåŒï¼Œè¿™æ ·å°±ä¼šæœ‰äºŒä¹‰æ€§ã€‚ ä¸‹é¢çš„ä¾‹å­å±•ç¤ºäº†æ¯ä¸ªå¯ä»¥æè¿°è¿™ä¸ª4ä¸ªèŠ‚ç‚¹çš„å°å›¾çš„é‚»æ¥çŸ©é˜µã€‚è¿™å·²ç»æ˜¯ç›¸å½“å¤šçš„é‚»æ¥çŸ©é˜µäº†â€”â€”å¯¹äºæ›´å¤§çš„ä¾‹å­ï¼Œå¦‚Othelloï¼Œè¿™ä¸ªæ•°å­—æ˜¯ç«™ä¸ä½è„šçš„ã€‚ è§†è§‰ä¸Šä¸ä¸€æ ·ï¼Œä½†æ˜¯ç»“æœç¡®å®ä¸€æ ·çš„ã€‚$A_4^4=4 \\times 3 \\times 2 \\times 1 =24$ äºæ˜¯å»æ•°æ®ç»“æ„é‡Œæ‰¾äº†ä¸€ä¸ªå›¾çš„æœ‰ä¸€ç§å­˜å‚¨çš„æ–¹å¼ï¼Œé‚»æ¥è¡¨ã€‚ è¡¨ç¤ºç¨€ç–çŸ©é˜µçš„ä¸€ç§ä¼˜é›…ä¸”å†…å­˜æœ‰æ•ˆçš„æ–¹æ³•æ˜¯é‚»æ¥è¡¨ã€‚è¿™äº›æè¿°äº†è¾¹ç¼˜$e_k$åœ¨èŠ‚ç‚¹ $n_i$ å’Œ $n_j$ ä¹‹é—´çš„è¿é€šæ€§ä½œä¸ºé‚»æ¥è¡¨ç¬¬kä¸ªæ¡ç›®çš„å…ƒç»„$(i,j)$ã€‚ ç”±äºæˆ‘ä»¬æœŸæœ›è¾¹çš„æ•°é‡æ¯”é‚»æ¥çŸ©é˜µ($n^2_{nodes}$)çš„æ¡ç›®æ•°é‡è¦å°‘å¾—å¤šï¼Œå› æ­¤æˆ‘ä»¬é¿å…åœ¨å›¾çš„ä¸è¿é€šéƒ¨åˆ†ä¸Šè¿›è¡Œè®¡ç®—å’Œå­˜å‚¨ã€‚ ä¸ºäº†ä½¿è¿™ä¸ªæ¦‚å¿µæ›´å…·ä½“ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸åŒå›¾è¡¨ä¸­çš„ä¿¡æ¯åœ¨è¿™ä¸ªè§„èŒƒä¸‹æ˜¯å¦‚ä½•è¡¨ç¤ºçš„ï¼š ä¹‹å‰é‚»æ¥çŸ©é˜µæ˜¯ä¸»è¦å­˜å‚¨èŠ‚ç‚¹ï¼Œé‚»æ¥è¡¨ä¸»è¦å­˜å‚¨è¾¹ï¼Œå½“è¾¹æ¯”è¾ƒå°‘çš„æ—¶å€™ï¼ŒçŸ©é˜µæ¯”è¾ƒç¨€ç–ï¼Œæ­¤æ—¶é€‚åˆä½¿ç”¨é‚»æ¥è¡¨ï¼Œä½†æ˜¯å¦‚æœå­˜å‚¨çš„è¾¹æ¯”è¾ƒå¤šæ—¶ï¼Œé‚£ä¹ˆé‚»æ¥çŸ©é˜µæ¯”è¾ƒåˆç®—ã€‚ åº”è¯¥æ³¨æ„çš„æ˜¯ï¼Œå›¾åœ¨æ¯ä¸ªèŠ‚ç‚¹/è¾¹/å…¨å±€ä¸­ä½¿ç”¨æ ‡é‡å€¼ï¼Œä½†æ˜¯å¤§å¤šæ•°å®é™…çš„å¼ é‡è¡¨ç¤ºåœ¨æ¯ä¸ªå›¾å±æ€§ä¸­éƒ½æœ‰å‘é‡ã€‚æˆ‘ä»¬å°†å¤„ç†å¤§å°ä¸º$[n_{nodes},node_{dim}]$çš„èŠ‚ç‚¹å¼ é‡ï¼Œè€Œä¸æ˜¯$[n_{nodes}]$çš„èŠ‚ç‚¹å¼ é‡ã€‚å…¶ä»–å›¾å½¢å±æ€§ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ è¯æ±‡ç§¯ç´¯ rift n.(äººé™…å…³ç³»)ä¸å’Œï¼Œåˆ†æ­§ï¼›è£‚ç¼ï¼Œè£‚å£ï¼›åœ°å ‘ï¼Œè£‚è°· feud n. ä¸å’Œï¼›äº‰æ‰§ï¼›å°åœ°;ï¼ˆéƒ¨è½æˆ–å®¶æ—é—´çš„ï¼‰ä¸–ä»‡ vi. é•¿æœŸä¸å’Œï¼›é•¿æœŸäº‰æ–— interaction n.ç›¸äº’ä½œç”¨ï¼›ç›¸äº’äº¤æµ intuitive adj. ç›´è§‰çš„ï¼›æœ‰ç›´è§‰åŠ›çš„ï¼›æ˜“æ‡‚çš„ï¼Œä½¿ç”¨ç®€ä¾¿çš„ compatible adj. å…¼å®¹çš„ï¼Œå¯å…±å­˜çš„ assign v. åˆ†æ´¾ï¼Œå¸ƒç½® adjacency matrices é‚»æ¥çŸ©é˜µ sparse adj. ç¨€ç–çš„ equivalently adv. ç›¸ç­‰åœ°ï¼›ç›¸å½“äº permutation n. [æ•°] æ’åˆ—ï¼›[æ•°] ç½®æ¢","link":"/2022/03/30/%E5%9B%BE%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/%E5%9B%BE%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E7%9A%84%E9%80%9A%E4%BF%97%E7%90%86%E8%A7%A3-%E5%9B%BE%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86/"},{"title":"å›¾ç¥ç»ç½‘ç»œçš„é€šä¿—ç†è§£-å®éªŒå’Œç›¸å…³æŠ€æœ¯","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦ç»“åˆç›¸å…³çš„å®éªŒæ¥å¯¹GNNè¿›è¡Œåˆ†æï¼ŒåŒæ—¶å‡ ä½•ä¸€äº›ç›¸å…³çš„å„ç§æ¥åˆ†æç›®å‰åº”ç”¨çš„é—®é¢˜å’ŒæŒ‘æˆ˜ã€‚ åšå®¢çš„å‚è€ƒç½‘å€ï¼šA Gentle Introduction to Graph Neural Networks (distill.pub)ï¼šhttps://distill.pub/2021/gnn-intro/ GNN playground å®éªŒéƒ¨åˆ†ä¸»è¦æ˜¯ä¸€ä¸ªåŸºäºGNNé¢„æµ‹åˆ†å­ç»“æ„çš„æ¡ˆä¾‹ï¼Œæœ¬æ–‡çš„ä½œè€…å°†ç¨‹åºåµŒå…¥åˆ° js ç½‘é¡µé‡Œé¢ã€‚å¹¶ä¸”ç›´æ¥å»å¯ä»¥å»å®æ—¶çš„è°ƒèŠ‚ç½‘ç»œæ¥è¿›è¡Œé¢„æµ‹ã€‚ ä¸»è¦æ˜¯é¢„æµ‹ç»™å®šçš„åˆ†å­ç»“æ„é—»èµ·æ¥æ˜¯å¦åˆºé¼»ï¼Œè¿™æ˜¯ä¸€ä¸ªäºŒåˆ†ç±»çš„æ¨¡å‹ã€‚æˆ‘ä»¬å°†æ¯ä¸ªåˆ†å­è¡¨ç¤ºä¸ºä¸€ä¸ªå›¾ï¼Œå…¶ä¸­åŸå­æ˜¯åŒ…å«ä¸€ä¸ªå•çƒ­ç¼–ç (ç¢³ã€æ°®ã€æ°§ã€æ°Ÿ)çš„èŠ‚ç‚¹ï¼Œè€Œé”®æ˜¯åŒ…å«ä¸€ä¸ªå•çƒ­ç¼–ç (å•çƒ­ã€åŒçƒ­ã€ä¸‰çƒ­æˆ–èŠ³é¦™æ—)çš„é”®ç±»å‹çš„è¾¹ã€‚ è¿™ä¸ªé—®é¢˜çš„é€šç”¨æ¨¡æ¿å°†ä½¿ç”¨é¡ºåºçš„GNNå±‚æ„å»ºï¼Œç„¶åä½¿ç”¨ä¸€ä¸ªç”¨äºåˆ†ç±»çš„sigmoidæ¿€æ´»çš„çº¿æ€§æ¨¡å‹ã€‚ GNNå±‚æ•°ï¼Œåˆç§°æ·±åº¦ã€‚ æ›´æ–°æ—¶æ¯ä¸ªå±æ€§çš„ç»´åº¦ã€‚æ›´æ–°å‡½æ•°æ˜¯ä¸€ä¸ªå…·æœ‰reluæ¿€æ´»å‡½æ•°å’Œæ¿€æ´»è§„èŒƒåŒ–å±‚è§„èŒƒçš„å•å±‚MLPã€‚ åœ¨æ± ä¸­ä½¿ç”¨çš„èšåˆå‡½æ•°:max, meanæˆ–sum è¢«æ›´æ–°çš„å›¾å±æ€§æˆ–æ¶ˆæ¯ä¼ é€’çš„æ ·å¼:èŠ‚ç‚¹ã€è¾¹å’Œå…¨å±€è¡¨ç¤ºã€‚æˆ‘ä»¬é€šè¿‡å¸ƒå°”å¼€å…³(å¼€æˆ–å…³)æ¥æ§åˆ¶è¿™äº›ã€‚åŸºçº¿æ¨¡å‹å°†æ˜¯ä¸€ä¸ªç‹¬ç«‹äºå›¾çš„GNN(æ‰€æœ‰æ¶ˆæ¯ä¼ é€’)ï¼Œå®ƒåœ¨æœ€åå°†æ‰€æœ‰æ•°æ®èšåˆåˆ°ä¸€ä¸ªå…¨å±€å±æ€§ä¸­ã€‚åˆ‡æ¢æ‰€æœ‰æ¶ˆæ¯ä¼ é€’å‡½æ•°ä¼šç”Ÿæˆä¸€ä¸ªGraphNetsä½“ç³»ç»“æ„ã€‚ Some empirical GNN design lessonsåœ¨ä¸‹å›¾ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡å‡ ä¸ªä¸»è¦çš„è®¾è®¡é€‰æ‹©æ¥æ¢ç´¢GNNæ¶æ„çš„ç©ºé—´å’Œè¯¥ä»»åŠ¡çš„æ€§èƒ½:æ¶ˆæ¯ä¼ é€’çš„é£æ ¼ã€åµŒå…¥çš„ç»´æ•°ã€å±‚æ•°å’Œèšåˆæ“ä½œç±»å‹ã€‚ æ•£ç‚¹å›¾ä¸­çš„æ¯ä¸ªç‚¹ä»£è¡¨ä¸€ä¸ªæ¨¡å‹ï¼šxè½´æ˜¯å¯è®­ç»ƒå˜é‡çš„æ•°é‡ï¼Œyè½´æ˜¯æ€§èƒ½ã€‚å°†é¼ æ ‡æ‚¬åœåœ¨ä¸€ä¸ªç‚¹ä¸Šå¯ä»¥çœ‹åˆ°GNNæ¶æ„å‚æ•°ã€‚ æ•´å¼ å›¾è®²çš„æ˜¯å‚æ•°çš„æ•°é‡å’Œæœ€åé¢„æµ‹ç»“æœçš„AUCä¹‹é—´çš„å…³ç³»ã€‚é¦–å…ˆè¦æ³¨æ„çš„æ˜¯ï¼Œä»¤äººæƒŠè®¶çš„æ˜¯ï¼Œå‚æ•°æ•°é‡è¶Šå¤šï¼Œæ€§èƒ½è¶Šå¥½ã€‚GNNæ˜¯ä¸€ç§éå¸¸é«˜æ•ˆçš„å‚æ•°æ¨¡å‹ç±»å‹:å³ä½¿æ˜¯å°‘é‡çš„å‚æ•°(3k)ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥æ‰¾åˆ°é«˜æ€§èƒ½çš„æ¨¡å‹ã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹åŸºäºä¸åŒå›¾å½¢å±æ€§çš„å­¦ä¹ è¡¨ç¤ºçš„ç»´æ•°èšåˆçš„æ€§èƒ½åˆ†å¸ƒã€‚ ç®±å‹å›¾ï¼Œmin 25% 50% 75% maxï¼Œä¸­å€¼è¶Šæ”¹è¶Šå¥½ï¼Œbarä¸è¦å¤ªé•¿ï¼Œå¦åˆ™ä¼šå¾ˆæ•æ„Ÿï¼Œå¦‚å›¾è¿™äº›å‚æ•°çš„æ–¹å·®å¤ªå¤§äº†ï¼Œæ¯”è¾ƒçš„æ•æ„Ÿã€‚ æˆ‘ä»¬å¯ä»¥æ³¨æ„åˆ°ï¼Œæ¨¡å‹çš„ç»´æ•°è¶Šé«˜ï¼Œå…¶å‡å€¼å’Œä¸‹ç•Œæ€§èƒ½è¶Šå¥½ï¼Œä½†æœ€å¤§å€¼æ²¡æœ‰å‡ºç°ç›¸åŒçš„è¶‹åŠ¿ã€‚å¯¹äºè¾ƒå°çš„ç»´åº¦ï¼Œå¯ä»¥æ‰¾åˆ°ä¸€äº›æ€§èƒ½æœ€å¥½çš„æ¨¡å‹ã€‚ç”±äºæ›´é«˜çš„ç»´æ•°ä¹Ÿå°†æ¶‰åŠæ›´å¤šçš„å‚æ•°ï¼Œè¿™äº›è§‚å¯Ÿç»“æœä¸å‰é¢çš„å›¾æ˜¯ä¸€è‡´çš„ã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åŸºäºGNNå±‚æ•°çš„æ€§èƒ½åˆ†è§£ã€‚ å¦‚å›¾æ‰€ç¤ºä¸ºä¸åŒå±‚æ•°é—´å‡†ç¡®æ€§çš„é¢„æµ‹AUCçš„åˆ†å¸ƒï¼Œå¯ä»¥çœ‹å‡ºå¯¹ç€å±‚æ•°çš„å¢åŠ ä¸­ä½æ•°ä¹Ÿåœ¨å¢åŠ ï¼Œä½†æ˜¯æ–¹å·®ä¹Ÿåœ¨å¢åŠ ï¼Œä¹Ÿå°±æ˜¯å¦‚æœéšç€å‚æ•°çš„å¢é•¿ï¼Œåªè¦å‚æ•°è°ƒçš„ä¸å¥½æµ‹è¯•æ•ˆæœä¾ç„¶ä¸å¥½ï¼Œè¡¨ç°åœ¨å›¾ä¸­å°±æ˜¯ç›¸äº’è€¦åˆçš„æƒ…å†µã€‚ ç®±å½¢å›¾ä¹Ÿæ˜¾ç¤ºäº†ç±»ä¼¼çš„è¶‹åŠ¿ï¼Œè™½ç„¶å¹³å‡æ€§èƒ½éšç€å±‚æ•°çš„å¢åŠ è€Œå¢åŠ ï¼Œä½†æ€§èƒ½æœ€å¥½çš„æ¨¡å‹ä¸æ˜¯ä¸‰å±‚æˆ–å››å±‚ï¼Œè€Œæ˜¯ä¸¤å±‚ã€‚æ­¤å¤–ï¼Œæ€§èƒ½çš„ä¸‹ç•Œéšç€å±‚çš„å¢åŠ è€Œé™ä½ã€‚è¿™ç§æ•ˆåº”ä¹‹å‰å·²ç»è§‚å¯Ÿåˆ°ï¼Œå…·æœ‰è¾ƒå¤šå±‚æ•°çš„GNNå°†ä»¥æ›´é«˜çš„è·ç¦»ä¼ æ’­ä¿¡æ¯ï¼Œå¹¶å¯èƒ½åœ¨è®¸å¤šè¿ç»­è¿­ä»£ä¸­ä½¿å…¶èŠ‚ç‚¹è¡¨ç¤ºè¢«â€œç¨€é‡Šâ€ã€‚ æˆ‘ä»¬çš„æ•°æ®é›†æœ‰é¦–é€‰çš„èšåˆæ“ä½œå—?ä¸‹å›¾æŒ‰ç…§èšåˆç±»å‹å¯¹æ€§èƒ½è¿›è¡Œäº†åˆ†è§£ã€‚ åŸºæœ¬ä¸Šå°±æ˜¯æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚ æ€»çš„æ¥è¯´ï¼Œsumä¼¼ä¹å¯¹å¹³å‡æ€§èƒ½æœ‰éå¸¸è½»å¾®çš„æ”¹å–„ï¼Œä½†maxæˆ–meanå¯ä»¥ç»™å‡ºåŒæ ·å¥½çš„æ¨¡å‹ã€‚åœ¨æŸ¥çœ‹èšåˆæ“ä½œçš„åŒºåˆ†/è¡¨è¾¾èƒ½åŠ›æ—¶ï¼Œè¿™å¯¹äºå°†å…¶ç½®äºèƒŒæ™¯ä¸­éå¸¸æœ‰ç”¨ã€‚ ä¹‹å‰çš„æ¢ç´¢ç»™å‡ºäº†å¤æ‚çš„ä¿¡æ¯ã€‚æˆ‘ä»¬å¯ä»¥å‘ç°å¤æ‚ç¨‹åº¦è¶Šé«˜ï¼Œæ€§èƒ½è¶Šå¥½çš„å¹³å‡è¶‹åŠ¿ï¼Œä½†æˆ‘ä»¬ä¹Ÿå¯ä»¥å‘ç°å‚æ•°è¶Šå°‘ã€å±‚æ•°è¶Šå°‘æˆ–ç»´æ•°è¶Šå°‘çš„æ˜æ˜¾åä¾‹ã€‚ä¸€ä¸ªæ›´æ˜æ˜¾çš„è¶‹åŠ¿æ˜¯ç›¸äº’ä¼ é€’ä¿¡æ¯çš„å±æ€§çš„æ•°é‡ã€‚ è¿™é‡Œï¼Œæˆ‘ä»¬å°†æ ¹æ®æ¶ˆæ¯ä¼ é€’çš„é£æ ¼å¯¹æ€§èƒ½è¿›è¡Œåˆ†è§£ã€‚åœ¨è¿™ä¸¤ç§æç«¯æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è€ƒè™‘çš„æ¨¡å‹åœ¨å›¾å®ä½“(â€œnoneâ€)ä¹‹é—´ä¸é€šä¿¡ï¼Œè€Œæ¨¡å‹åœ¨èŠ‚ç‚¹ã€è¾¹å’Œå…¨å±€ä¹‹é—´ä¼ é€’æ¶ˆæ¯ã€‚ æ€»çš„æ¥è¯´ï¼Œæˆ‘ä»¬çœ‹åˆ°äº¤æµçš„å›¾å±æ€§è¶Šå¤šï¼Œå¹³å‡æ¨¡å‹çš„æ€§èƒ½å°±è¶Šå¥½ã€‚æˆ‘ä»¬çš„ä»»åŠ¡ä»¥å…¨å±€è¡¨ç¤ºä¸ºä¸­å¿ƒï¼Œå› æ­¤æ˜ç¡®åœ°å­¦ä¹ è¿™ä¸ªå±æ€§ä¹Ÿæœ‰åŠ©äºæé«˜æ€§èƒ½ã€‚æˆ‘ä»¬çš„èŠ‚ç‚¹è¡¨ç¤ºä¼¼ä¹ä¹Ÿæ¯”è¾¹è¡¨ç¤ºæ›´æœ‰ç”¨ï¼Œè¿™æ˜¯æœ‰æ„ä¹‰çš„ï¼Œå› ä¸ºåœ¨è¿™äº›å±æ€§ä¸­åŠ è½½äº†æ›´å¤šçš„ä¿¡æ¯ã€‚ ä¸ºäº†è·å¾—æ›´å¥½çš„æ€§èƒ½ï¼Œä½ å¯ä»¥ä»å¾ˆå¤šæ–¹é¢ç€æ‰‹ã€‚æˆ‘ä»¬å¸Œæœ›çªå‡ºä¸¤ä¸ªæ–¹å‘ï¼Œä¸€ä¸ªä¸æ›´å¤æ‚çš„å›¾ç®—æ³•æœ‰å…³ï¼Œå¦ä¸€ä¸ªä¸å›¾æœ¬èº«æœ‰å…³ã€‚ GNNç ”ç©¶çš„å‰æ²¿é¢†åŸŸä¹‹ä¸€ä¸æ˜¯åˆ¶é€ æ–°çš„æ¨¡å‹å’Œæ¶æ„ï¼Œè€Œæ˜¯â€œå¦‚ä½•æ„é€ å›¾â€ï¼Œæ›´ç²¾ç¡®åœ°è¯´ï¼Œä¸ºå›¾æ³¨å…¥å¯ä»¥åˆ©ç”¨çš„é¢å¤–ç»“æ„æˆ–å…³ç³»ã€‚æ­£å¦‚æˆ‘ä»¬æ‰€çœ‹åˆ°çš„ï¼Œå›¾å½¢å±æ€§çš„äº¤æµè¶Šå¤šï¼Œæˆ‘ä»¬çš„æ¨¡å‹å°±è¶Šå¥½ã€‚åœ¨è¿™ç§ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘é€šè¿‡æ·»åŠ èŠ‚ç‚¹ä¹‹é—´çš„é¢å¤–ç©ºé—´å…³ç³»ã€æ·»åŠ éé”®çš„è¾¹æˆ–å­å›¾ä¹‹é—´çš„æ˜¾å¼å¯å­¦ä¹ å…³ç³»ï¼Œä½¿åˆ†å­å›¾çš„ç‰¹å¾æ›´åŠ ä¸°å¯Œã€‚ Into the Weeds ç›¸å…³çš„æŠ€æœ¯æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ç”¨å‡ èŠ‚è®¨è®ºä¸GNNç›¸å…³çš„å¤§é‡å›¾å½¢ç›¸å…³ä¸»é¢˜ã€‚ Other types of graphs (multigraphs, hypergraphs, hypernodes, hierarchical graphs)ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘å¤šè¾¹å›¾æˆ–å¤šé‡å›¾ï¼Œå…¶ä¸­ä¸€å¯¹èŠ‚ç‚¹å¯ä»¥å…±äº«å¤šç§ç±»å‹çš„è¾¹ï¼Œå½“æˆ‘ä»¬å¸Œæœ›æ ¹æ®èŠ‚ç‚¹çš„ç±»å‹å¯¹èŠ‚ç‚¹ä¹‹é—´çš„äº¤äº’è¿›è¡Œä¸åŒçš„å»ºæ¨¡æ—¶ï¼Œå°±ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µã€‚ä¾‹å¦‚ï¼Œå¯¹äºç¤¾äº¤ç½‘ç»œï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®å…³ç³»ç±»å‹(ç†Ÿäººã€æœ‹å‹ã€å®¶äºº)æŒ‡å®šè¾¹ç¼˜ç±»å‹ã€‚å¯¹äºæ¯ä¸ªè¾¹çš„ç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨ä¸åŒç±»å‹çš„æ¶ˆæ¯ä¼ é€’æ­¥éª¤æ¥è°ƒæ•´GNNã€‚ æˆ‘ä»¬ä¹Ÿå¯ä»¥è€ƒè™‘åµŒå¥—å›¾ï¼Œä¾‹å¦‚ä¸€ä¸ªèŠ‚ç‚¹è¡¨ç¤ºä¸€ä¸ªå›¾ï¼Œä¹Ÿç§°ä¸ºè¶…èŠ‚ç‚¹å›¾ã€‚åµŒå¥—å›¾å¯¹äºè¡¨ç¤ºå±‚æ¬¡ä¿¡æ¯æ˜¯æœ‰ç”¨çš„ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘ä¸€ä¸ªåˆ†å­ç½‘ç»œï¼Œå…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹ä»£è¡¨ä¸€ä¸ªåˆ†å­ï¼Œå¦‚æœæˆ‘ä»¬æœ‰ä¸€ç§æ–¹æ³•(ååº”)å°†ä¸€ä¸ªåˆ†å­è½¬åŒ–ä¸ºå¦ä¸€ä¸ªåˆ†å­ï¼Œåˆ™ä¸¤ä¸ªåˆ†å­å…±äº«ä¸€æ¡è¾¹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªGNNåœ¨åˆ†å­çº§å’Œååº”ç½‘ç»œçº§å­¦ä¹ è¡¨ç¤ºï¼Œå¹¶åœ¨è®­ç»ƒæœŸé—´äº¤æ›¿å­¦ä¹ è¡¨ç¤ºï¼Œä»è€Œåœ¨åµŒå¥—å›¾ä¸Šå­¦ä¹ ã€‚ Sampling Graphs and Batching in GNNsè®­ç»ƒç¥ç»ç½‘ç»œçš„ä¸€ç§å¸¸è§åšæ³•æ˜¯ç”¨è®­ç»ƒæ•°æ®çš„éšæœºå¸¸æ•°å¤§å°(æ‰¹é‡å¤§å°)å­é›†(å°æ‰¹é‡)è®¡ç®—å‡ºçš„æ¢¯åº¦æ¥æ›´æ–°ç½‘ç»œå‚æ•°ã€‚å—åˆ°å†…å­˜çš„é™åˆ¶ä»¬è¿™é‡Œä¹Ÿéœ€è¦è¿›è¡Œå–æ ·ï¼Œå¯¹è¿™ä¸ªå°çš„batchè¿›è¡Œè®¡ç®—æ¢¯åº¦ã€‚ ä¸»è¦çš„æ–¹æ³•æœ‰ä¸€ä¸‹å››ç§ï¼š éšæœºèŠ‚ç‚¹å–æ ·æ³•æ˜¯éšæœºæŠ½æ ·ä¸€ä¸ªå‡åŒ€æ•°ç›®çš„èŠ‚ç‚¹ï¼Œç„¶åæ·»åŠ ä¸èŠ‚ç‚¹é›†ç›¸é‚»çš„è·ç¦»ä¸ºkçš„ç›¸é‚»èŠ‚ç‚¹ï¼ŒåŒ…æ‹¬å®ƒä»¬çš„è¾¹ã€‚æ¯ä¸ªé‚»åŸŸå¯ä»¥è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªå•ç‹¬çš„å›¾ï¼Œå¹¶ä¸”å¯ä»¥åœ¨è¿™äº›å­å›¾çš„æ‰¹é‡ä¸Šè®­ç»ƒGNNã€‚ éšæœºæ¸¸èµ°å–æ ·æ³•ã€‚ä»ä¸€ä¸ªèŠ‚ç‚¹å¼€å§‹ï¼Œéšæœºé€‰æ‹©ä¸€ä¸ªç›¸é‚»çš„èŠ‚ç‚¹ä½œä¸ºä¸‹ä¸€ä¸ªèŠ‚ç‚¹è¿›è¡Œè®¡ç®—ï¼Œè§„å®šä¸€å®šçš„éšæœºæ¸¸èµ°çš„æ­¥æ•°ã€‚ éšæœºå–æ ·+æ¸¸èµ°æ³•ã€‚éšæœºèµ°3æ­¥ï¼Œä¹‹åå°†è¿™ä¸‰æ­¥ç»è¿‡çš„ç»“ç‚¹å…¨éƒ¨æ‰¾å‡ºã€‚ å®½åº¦éå†æ³•ï¼Œå°†å…¶1ã€2ã€3è¿‘é‚»å¾€å‰èµ°æ­¥ä¹‹åè¿›è¡Œä¸€ä¸ªå®½åº¦éå†ã€‚ å–æ ·çš„é€‰æ‹©éœ€è¦æ ¹æ®å®é™…çš„å›¾å½¢æ¥è¿›è¡Œé€‰æ‹©ï¼Œå…¶æ¬¡å°±æ˜¯è¿™æ ·å–æ ·ä¹‹åçš„å¾—åˆ°çš„å­å›¾ç»“ç‚¹çš„æ•°çš„å¤§å°æ˜¯ä¸åŒçš„ï¼Œå¦‚ä½•ç»Ÿä¸€æ˜¯ä¸€ä¸ªæœ‰æŒ‘æˆ˜æ€§çš„é—®é¢˜ã€‚ Inductive biasesåœ¨æ„å»ºæ¨¡å‹ä»¥è§£å†³ç‰¹å®šç±»å‹æ•°æ®ä¸Šçš„é—®é¢˜æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›å°†æ¨¡å‹ä¸“é—¨åŒ–ï¼Œä»¥åˆ©ç”¨è¯¥æ•°æ®çš„ç‰¹å¾ã€‚å½“è¿™ä¸€ç‚¹æˆåŠŸåœ°å®Œæˆæ—¶ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šçœ‹åˆ°æ›´å¥½çš„é¢„æµ‹æ€§èƒ½ï¼Œæ›´ä½çš„è®­ç»ƒæ—¶é—´ï¼Œæ›´å°‘çš„å‚æ•°å’Œæ›´å¥½çš„æ³›åŒ–ã€‚ ä»»ä½•çš„æœºå™¨å­¦ä¹ æ¨¡å‹éƒ½è¦ä¸€å®šçš„å‡è®¾ï¼Œå¯¹äºå·ç§¯ç¥ç»ç½‘ç»œå…¶ä¸»è¦çš„å‡è®¾æ˜¯ç©ºé—´ä¸å˜æ€§ï¼Œå¾ªç¯ç¥ç»ç½‘ç»œçš„å‡è®¾æ˜¯æ—¶åºçš„è¿ç»­æ€§ã€‚GNNçš„å‡è®¾æ˜¯ä¿æŒäº†å›¾çš„å¯¹ç§°æ€§ã€‚ Comparing aggregation operationsé€‰æ‹©å’Œè®¾è®¡æœ€ä¼˜èšåˆæ“ä½œæ˜¯ä¸€ä¸ªå¼€æ”¾çš„ç ”ç©¶è¯¾é¢˜ã€‚ èšåˆæ“ä½œçš„ä¸€ä¸ªç†æƒ³å±æ€§æ˜¯ï¼Œç±»ä¼¼çš„è¾“å…¥æä¾›ç±»ä¼¼çš„èšåˆè¾“å‡ºï¼Œåä¹‹äº¦ç„¶ã€‚ä¸€äº›éå¸¸ç®€å•çš„å€™é€‰ç½®æ¢ä¸å˜è¿ç®—æ˜¯å’Œã€å‡å€¼å’Œæœ€å¤§å€¼ã€‚åƒæ–¹å·®è¿™æ ·çš„æ±‡æ€»ç»Ÿè®¡ä¹Ÿæ˜¯å¯è¡Œçš„ã€‚æ‰€æœ‰è¿™äº›éƒ½æ¥å—æ•°é‡å¯å˜çš„è¾“å…¥ï¼Œå¹¶æä¾›ç›¸åŒçš„è¾“å‡ºï¼Œæ— è®ºè¾“å…¥é¡ºåºå¦‚ä½•ã€‚è®©æˆ‘ä»¬æ¢è®¨ä¸€ä¸‹è¿™äº›æ“ä½œä¹‹é—´çš„åŒºåˆ«ã€‚ å¦‚å›¾ä¸Šé¢MAXèšåˆä¹‹åçš„ç»“æœï¼Œä¸¤ç§ç½‘ç»œæ˜¯ä¸€æ ·çš„ç»“æ„ï¼Œä½†æ˜¯ä½¿ç”¨Meanä¹‹ååˆ™å³å›¾çš„ä¸¤ä¸ªç»“æœåˆæ˜¯ä¸€æ ·çš„ï¼Œå› æ­¤æ²¡æœ‰é‚£ä¸ªæ˜¾è‘—çš„ä¼˜äºå¦å¤–çš„ä¸¤ä¸ªã€‚ æ²¡æœ‰ä¸€ç§æ“ä½œæ˜¯ä¸€è‡´çš„æœ€ä½³é€‰æ‹©ã€‚å½“èŠ‚ç‚¹çš„é‚»å±…æ•°é‡é«˜åº¦å¯å˜æ—¶ï¼Œæˆ–è€…éœ€è¦å¯¹å±€éƒ¨é‚»å±…çš„ç‰¹å¾è¿›è¡Œè§„èŒƒåŒ–å¤„ç†æ—¶ï¼Œå‡å€¼æ“ä½œéå¸¸æœ‰ç”¨ã€‚å½“æ‚¨æƒ³è¦çªå‡ºå±€éƒ¨ç¤¾åŒºçš„å•ä¸ªæ˜¾è‘—ç‰¹å¾æ—¶ï¼Œæœ€å¤§æ“ä½œå¯èƒ½å¾ˆæœ‰ç”¨ã€‚Sumé€šè¿‡æä¾›ç‰¹æ€§çš„å±€éƒ¨åˆ†å¸ƒçš„å¿«ç…§ï¼Œåœ¨è¿™ä¸¤è€…ä¹‹é—´æä¾›äº†ä¸€ç§å¹³è¡¡ï¼Œä½†æ˜¯å› ä¸ºå®ƒä¸æ˜¯æ ‡å‡†åŒ–çš„ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥çªå‡ºæ˜¾ç¤ºç¦»ç¾¤å€¼ã€‚åœ¨å®è·µä¸­ï¼Œé€šå¸¸ä½¿ç”¨sumã€‚ é›†åˆä¸Šçš„é›†åˆè¿ç®—è®¾è®¡æ˜¯ä¸€ä¸ªä¸æœºå™¨å­¦ä¹ äº¤å‰çš„å¼€æ”¾ç ”ç©¶é—®é¢˜ã€‚æ–°çš„æ–¹æ³•ï¼Œå¦‚ä¸»é‚»åŸŸèšåˆè€ƒè™‘å‡ ä¸ªèšåˆæ“ä½œï¼Œå°†å®ƒä»¬è¿æ¥èµ·æ¥ï¼Œå¹¶æ·»åŠ ä¸€ä¸ªä¾èµ–äºå®ä½“çš„è¿æ¥æ€§ç¨‹åº¦çš„æ‰©å±•å‡½æ•°æ¥è¿›è¡Œèšåˆã€‚åŒæ—¶ï¼Œè¿˜å¯ä»¥è®¾è®¡ç‰¹å®šäºé¢†åŸŸçš„èšåˆæ“ä½œã€‚ä¸€ä¸ªä¾‹å­å°±æ˜¯â€œå››é¢ä½“æ‰‹æ€§â€èšé›†ç®—å­ã€‚ GCN as subgraph function approximators GCNå¸¦äº†æ±‡èšçš„å›¾ç¥ç»ç½‘ç»œï¼Œç¬¬kå±‚çš„ç»“ç‚¹æ˜¾ç„¶æ˜¯æ±‡èšäº†å…¶Kæ­¥è¿‘é‚»çš„ç»“æ„ä¹‹åçš„ç»“æœï¼Œå°†å…¶å›æ¨å¯ä»¥å¾—åˆ°ä¸€ä¸ªä¸ªå­å›¾ï¼Œå°†æ¯ä¸ªå­å›¾æ±‚Embeddingçš„ç»“æœå’Œèšåˆç›¸ä¼¼ã€‚ Edges and the Graph Dual è¾¹çš„ç»“ç‚¹è¿›è¡Œäº’æ¢å®ç°å›¾å¾—å¯¹å¶æ“ä½œï¼Œå¯¹å¶å‰åæ˜¯ç›¸åŒçš„ã€‚ éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œè¾¹ç¼˜é¢„æµ‹å’ŒèŠ‚ç‚¹é¢„æµ‹è™½ç„¶çœ‹èµ·æ¥ä¸åŒï¼Œä½†å¾€å¾€å½’ç»“ä¸ºåŒä¸€ä¸ªé—®é¢˜:å›¾Gä¸Šçš„è¾¹ç¼˜é¢„æµ‹ä»»åŠ¡å¯ä»¥è¢«æè¿°ä¸ºGå¯¹å¶ä¸Šçš„èŠ‚ç‚¹çº§é¢„æµ‹ã€‚ ä¸ºäº†å¾—åˆ°Gçš„å¯¹å¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†èŠ‚ç‚¹è½¬æ¢ä¸ºè¾¹(å°†è¾¹è½¬æ¢ä¸ºèŠ‚ç‚¹)ã€‚å›¾åŠå…¶å¯¹å¶åŒ…å«ç›¸åŒçš„ä¿¡æ¯ï¼Œåªæ˜¯è¡¨ç¤ºæ–¹å¼ä¸åŒè€Œå·²ã€‚æœ‰æ—¶ï¼Œè¿™ä¸ªç‰¹æ€§ä½¿å¾—åœ¨ä¸€ç§è¡¨ç¤ºæ³•ä¸­è§£å†³é—®é¢˜æ¯”åœ¨å¦ä¸€ç§è¡¨ç¤ºæ³•ä¸­å®¹æ˜“ï¼Œæ¯”å¦‚å‚…é‡Œå¶ç©ºé—´ä¸­çš„é¢‘ç‡ã€‚ç®€è€Œè¨€ä¹‹ï¼Œä¸ºäº†è§£å†³Gä¸Šçš„è¾¹ç¼˜åˆ†ç±»é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘åœ¨Gçš„å¯¹å¶ä¸Šè¿›è¡Œå›¾å·ç§¯(è¿™å’Œåœ¨Gä¸Šå­¦ä¹ è¾¹ç¼˜è¡¨ç¤ºæ˜¯ä¸€æ ·çš„)ï¼Œè¿™ä¸ªæƒ³æ³•æ˜¯åœ¨åŒåŸå›¾å·ç§¯ç½‘ç»œä¸­å‘å±•èµ·æ¥çš„ã€‚ Graph convolutions as matrix multiplications, and matrix multiplications as walks on a graphä¸»è¦çš„æƒ³æ³•å°±æ˜¯å°†å›¾å·ç§¯çœ‹ä½œæ˜¯é‚»æ¥çŸ©é˜µä¹‹é—´çš„çŸ©é˜µç›¸ä¹˜é—®é¢˜ï¼Œæ—©æœŸçš„PageRankç®—æ³•åˆ©ç”¨çš„å°±æ˜¯è¿™ä¸ªæ€æƒ³ã€‚ å…·ä½“çš„ç»†èŠ‚å¯ä»¥å‚è€ƒåŸæ–‡ã€‚ Graph Attention Networks ä¼ ç»Ÿçš„å·ç§¯çš„æƒé‡æ˜¯å’Œä½ç½®ç›¸å…³ï¼Œä½†æ˜¯åœ¨å›¾ä¸­ï¼Œæˆ‘ä»¬çš„GNNé‡Œé¢çš„å·ç§¯å’Œä½ç½®æ— å…³ï¼Œè€Œä¸”ç»“ç‚¹æ—¶å¯ä»¥éšæ„æ‰“ä¹±é¡ºåºçš„ã€‚æˆ‘ä»¬å¯ä»¥å‚è€ƒæ³¨æ„åŠ›æœºåˆ¶ä¸­æƒé‡å’Œç»“ç‚¹ä¹‹é—´çš„å…³ç³»ç›¸å…³ï¼Œåœ¨æ³¨æ„åŠ›æœºåˆ¶æ˜¯é€šè¿‡Q Kè¿›è¡ŒçŸ©é˜µä¹˜æ³•è®¡ç®—ç›¸ä¼¼åº¦çš„ã€‚ Graph explanations and attributions åœ¨éƒ¨ç½²GNNæ—¶ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå…³å¿ƒæ¨¡å‹çš„å¯è§£é‡Šæ€§ï¼Œä»¥å»ºç«‹å¯ä¿¡æ€§ã€è°ƒè¯•æˆ–ç§‘å­¦å‘ç°ã€‚æˆ‘ä»¬è¦è§£é‡Šçš„å›¾æ¦‚å¿µå› ä¸Šä¸‹æ–‡çš„ä¸åŒè€Œä¸åŒã€‚ä¾‹å¦‚ï¼Œå¯¹äºåˆ†å­ï¼Œæˆ‘ä»¬å¯èƒ½å…³å¿ƒç‰¹å®šå­å›¾çš„å­˜åœ¨ä¸å¦ï¼Œè€Œåœ¨å¼•æ–‡ç½‘ç»œä¸­ï¼Œæˆ‘ä»¬å¯èƒ½å…³å¿ƒæ–‡ç« çš„è¿é€šæ€§ç¨‹åº¦ã€‚ç”±äºå›¾æ¦‚å¿µçš„å¤šæ ·æ€§ï¼Œæœ‰è®¸å¤šæ–¹æ³•æ¥æ„å»ºè§£é‡Šã€‚GNNexplainerå°†æ­¤é—®é¢˜è½¬æ¢ä¸ºæå–å¯¹ä»»åŠ¡é‡è¦çš„æœ€ç›¸å…³çš„å­å›¾ã€‚å½’å› æŠ€æœ¯ä¸ºå›¾ä¸­ä¸ä»»åŠ¡ç›¸å…³çš„éƒ¨åˆ†åˆ†é…æ’åºé‡è¦å€¼ã€‚ç”±äºå¯ä»¥ç»¼åˆç”Ÿæˆç°å®ä¸”å…·æœ‰æŒ‘æˆ˜æ€§çš„å›¾é—®é¢˜ï¼Œå› æ­¤gnnå¯ä»¥ä½œä¸ºè¯„ä¼°å½’å› æŠ€æœ¯çš„ä¸¥æ ¼ä¸”å¯é‡å¤çš„æµ‹è¯•å¹³å°ã€‚ Generative modellingå¯¹å›¾çš„ç»“æ„è¿›è¡Œæ‹“æ‰‘å»ºæ¨¡ã€‚ Final thoughtså›¾æ˜¯ä¸€ç§åŠŸèƒ½å¼ºå¤§ä¸”ä¸°å¯Œçš„ç»“æ„åŒ–æ•°æ®ç±»å‹ï¼Œå®ƒçš„ä¼˜åŠ¿å’ŒæŒ‘æˆ˜ä¸å›¾åƒå’Œæ–‡æœ¬éå¸¸ä¸åŒã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬æ¦‚è¿°äº†ç ”ç©¶äººå‘˜åœ¨æ„å»ºåŸºäºå¤„ç†å›¾å½¢çš„ç¥ç»ç½‘ç»œæ¨¡å‹æ—¶æ‰€æå‡ºçš„ä¸€äº›é‡Œç¨‹ç¢‘ã€‚æˆ‘ä»¬å·²ç»è®¨è®ºäº†åœ¨ä½¿ç”¨è¿™äº›æ¶æ„æ—¶å¿…é¡»åšå‡ºçš„ä¸€äº›é‡è¦è®¾è®¡é€‰æ‹©ï¼Œå¸Œæœ›GNNæ“åœºèƒ½å¤Ÿç›´è§‚åœ°äº†è§£è¿™äº›è®¾è®¡é€‰æ‹©çš„ç»éªŒç»“æœæ˜¯ä»€ä¹ˆã€‚è¿‘å¹´æ¥GNNçš„æˆåŠŸä¸ºä¸€ç³»åˆ—æ–°é—®é¢˜åˆ›é€ äº†å·¨å¤§çš„æœºé‡ï¼Œæˆ‘ä»¬å¾ˆé«˜å…´çœ‹åˆ°è¯¥é¢†åŸŸå°†å¸¦æ¥ä»€ä¹ˆã€‚","link":"/2022/03/30/%E5%9B%BE%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/%E5%9B%BE%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E7%9A%84%E9%80%9A%E4%BF%97%E7%90%86%E8%A7%A3-%E5%AE%9E%E9%AA%8C%E5%92%8C%E7%9B%B8%E5%85%B3%E6%8A%80%E6%9C%AF/"},{"title":"Ch3 ä¸‰ç»´ç©ºé—´çš„åˆšä½“è¿åŠ¨ ç¬¬ä¸€éƒ¨åˆ†","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦æ˜¯è®²è§£ä¸‰ç»´åˆšä½“è¿åŠ¨çš„ç¬¬ä¸€éƒ¨åˆ†ï¼ŒåŒ…æ‹¬ç‚¹å’Œå‘é‡åæ ‡ç³»ä¸æ—‹è½¬çŸ©é˜µçš„å†…å®¹ï¼Œä¹‹åè¿˜æœ‰ä¸€ä¸ªEigençš„ç¼–ç¨‹ç»ƒä¹ ã€‚ ä¸ŠèŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦è®²äº†SLAMçš„ä¸€ä¸ªä¸»è¦çš„æ¡†æ¶ï¼Œå’Œä¸¤ä¸ªä¸»è¦çš„æ•°å­¦æ–¹ç¨‹ï¼Œä»¥åŠä¸‰ä¸ªä¸»è¦çš„é—®é¢˜ï¼Œé‚£ä¹ˆæœ¬èŠ‚è¯¾æˆ‘ä»¬ä¸»è¦è®²è§£çš„æ˜¯ç¬¬ä¸€ä¸ªï¼Œå¦‚ä½•ä¼°è®¡è‡ªèº«çš„(æˆ–ç›¸æœº)ä½å§¿ï¼Œå³ä¸‰ç»´ç©ºé—´çš„åˆšä½“è¿åŠ¨ã€‚ ç‚¹ä¸åæ ‡ç³» ç‚¹ã€å‘é‡å’Œåæ ‡ç³»çš„å®šä¹‰å¯¹äºåˆšä½“æ¥è¯´ï¼Œä¸ä»…è¦è€ƒè™‘å…¶ä½ç½®ï¼Œä¹Ÿè¦è€ƒè™‘å…¶å½“å‰çš„å§¿æ€ï¼Œå¦‚ä¸Šé¢çš„äºŒç»´æ‰«åœ°æœºå™¨äººï¼Œå‡ºæ¥è€ƒè™‘ä½ç½®ä¿¡æ¯çš„$(x,y)$ï¼Œè¿˜è¦è€ƒè™‘ä½¿ç”¨ä¸€ä¸ªè§’åº¦$\\theta \\in (0,2\\pi)$ ï¼Œæ¥æè¿°å…¶å½“å‰çš„å§¿æ€ä¿¡æ¯ã€‚ ä¸‰ç»´ç©ºé—´ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œæˆ‘ä»¬å¼•å…¥ç‚¹å’Œå‘é‡æ¥å¯¹ç©ºé—´è¿›è¡Œæè¿°ã€‚ ç‚¹æ˜¯æœ€åŸºæœ¬çš„å…ƒç´ ï¼Œæ²¡æœ‰ä½“ç§¯æ²¡æœ‰é•¿åº¦ï¼Œä»…ä»…åˆ»ç”»ä½ç½®ä¿¡æ¯ã€‚ å‘é‡æ˜¯ä»ä¸€ä¸ªç‚¹æŒ‡å‘å¦å¤–ä¸€ä¸ªç‚¹çš„ç®­å¤´ã€‚ åæ ‡ $\\ne$ å‘é‡ï¼Œåæ ‡å¿…é¡»ä¾èµ–äºåæ ‡ç³»æ‰èƒ½å­˜åœ¨ï¼Œè€Œå‘é‡ä¸€ç›´éƒ½å­˜åœ¨ï¼Œåªæœ‰ç»™å®šäº†åæ ‡ç³»åæ‰èƒ½è®¨è®ºå‘é‡åœ¨åæ ‡ç³»ä¸‹çš„åæ ‡ã€‚ å®šä¹‰äº†åæ ‡ç³»åï¼Œå‘é‡å¯ä»¥ç”±$R^3$çš„åæ ‡æ¥è¡¨ç¤ºã€‚ a=\\left[e_1,e_2,e_3\\right]\\left[\\begin{array} & a_1 \\\\ a_2 \\\\a_3 \\end{array}\\right]=a_1e_1+a_2e_2+a_3e_3 è¿™é‡Œ$[e_1,e_2,e_3]$ ä¸ºä¸€ç»„åŸºï¼Œ$(a_1,a_2,a_3)^T$ä¸ºå‘é‡$a$åœ¨è¿™ç»„åŸºä¸‹çš„ä¸€ä¸ªåæ ‡ã€‚ å› æ­¤å‘é‡å¯¹äºçš„åæ ‡ä¸ä»…å’Œè‡ªèº«æœ‰å…³ï¼Œè¿˜å’Œåæ ‡ç³»/åŸºçš„é€‰æ‹©æœ‰å…³ã€‚ åæ ‡ç³»ï¼šç”±ä¸‰ä¸ªæ­£äº¤çš„è½´ç»„æˆï¼Œå…¶å®å¯ä»¥æ˜¯éæ­£äº¤çš„åŸºï¼Œä½†æ˜¯ä¸å¸¸ç”¨ã€‚ æ„æˆçº¿æ€§ç©ºé—´çš„ä¸€ç»„åŸº ä¸»è¦åˆ†ä¸ºå·¦æ‰‹ç³»å’Œå³æ‰‹ç³»ã€‚ å‘é‡çš„è¿ç®—å‘é‡çš„è¿ç®—å¯ä»¥ä½¿ç”¨åæ ‡çš„è¿ç®—æ¥è¡¨è¾¾ï¼Œå¯¹äºåŠ å‡å’Œæ•°ä¹˜æ¯”è¾ƒçš„ç®€å•ï¼Œæ­¤å¤„ä¸åœ¨èµ˜è¿°ï¼Œä¸‹é¢ä¸»è¦ä»‹ç»å†…ç§¯å’Œå¤–ç§¯çš„è®¡ç®—ï¼š å†…ç§¯çš„è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š $\\langle\\boldsymbol{a}, \\boldsymbol{b}\\rangle$ ä»£è¡¨çš„æ˜¯å‘é‡ä¹‹é—´çš„å¤¹è§’ï¼› å†…ç§¯è¿˜å¯ä»¥è¡¨ç¤ºå‘é‡ä¹‹é—´çš„æŠ•å½±å…³ç³»ï¼š \\boldsymbol{a} \\cdot \\boldsymbol{b}=\\boldsymbol{a}^{T} \\boldsymbol{b}=\\sum_{i=1}^{3} a_{i} b_{i}=|\\boldsymbol{a}||\\boldsymbol{b}| \\cos \\langle\\boldsymbol{a}, \\boldsymbol{b}\\rangle. å¤–ç§¯çš„è®¡ç®—çš„å…¬å¼å¦‚ä¸‹ï¼š å…¶è¿ç®—çš„ç»“æœä¸ºä¸€ä¸ªæ–¹å‘å‚ç›´äºå‘é‡ç»„æˆçš„å¹³é¢çš„ä¸€ä¸ªå‘é‡ï¼› å¤§å°ä¸º$|\\boldsymbol{a}||\\boldsymbol{b}| \\sin \\langle\\boldsymbol{a}, \\boldsymbol{b}\\rangle$ ,ç­‰ä»·äºä¸¤ä¸ªå‘é‡å¼ æˆå¹³è¡Œå››è¾¹å‹çš„é¢ç§¯ã€‚ \\boldsymbol{a} \\times \\boldsymbol{b}=\\left[\\begin{array}{ccc}\\boldsymbol{i} & j & k \\\\ a_{1} & a_{2} & a_{3} \\\\ b_{1} & b_{2} & b_{3}\\end{array}\\right]=\\left[\\begin{array}{c}a_{2} b_{3}-a_{3} b_{2} \\\\ a_{3} b_{1}-a_{1} b_{3} \\\\ a_{1} b_{2}-a_{2} b_{1}\\end{array}\\right]=\\left[\\begin{array}{ccc}0 & -a_{3} & a_{2} \\\\ a_{3} & 0 & -a_{1} \\\\ -a_{2} & a_{1} & 0\\end{array}\\right] \\boldsymbol{b} \\triangleq \\boldsymbol{a}^{\\wedge} \\boldsymbol{b} . äºæ˜¯å®šä¹‰äº†åå¯¹ç§°çŸ©é˜µ$\\boldsymbol a^\\^$ ä¸ºï¼š \\boldsymbol a^\\^=\\left[\\begin{array}{ccc}0 & -a_{3} & a_{2} \\\\ a_{3} & 0 & -a_{1} \\\\ -a_{2} & a_{1} & 0\\end{array}\\right]è¿™é‡Œåå¯¹ç§°çŸ©é˜µæœ‰ä¸€ä¸ªé‡è¦çš„æ€§è´¨ï¼š$\\boldsymbol A ^T=-\\boldsymbol A$ é€šè¿‡å¼•å…¥åå¯¹ç§°çŸ©é˜µï¼Œè¿›è€Œå°†å¤–ç§¯è½¬åŒ–ä¸ºä¸€ä¸ªçº¿æ€§æ“ä½œã€‚ æ³¨æ„ä¸Šè¿°çš„è¿ç®—å…¬å¼æ˜¯å»ºç«‹åœ¨åæ ‡å­˜åœ¨çš„åŸºç¡€ä¸Šï¼Œä½†æ˜¯å¦‚æœåæ ‡æ˜¯ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆä¸Šè¿°çš„è¿ç®—ä¾ç„¶å¯ä»¥é€šè¿‡å…¶å‡ ä½•å«ä¹‰æ¥å®ç°ï¼Œæ‰€ä»¥è¯´å‘é‡è¿ç®—çš„ç»“æœæ˜¯å’Œåæ ‡çš„é€‰æ‹©æ— å…³ã€‚ åˆšä½“è¿åŠ¨åœ¨å®é™…çš„åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬ä¼šå®šä¹‰å„ç§å„æ ·çš„åæ ‡ç³»ã€‚æ¯”å¦‚åœ¨æœºå™¨äººç ”ç©¶ä¸­ï¼Œæˆ‘ä»¬ä¼šåˆ†åˆ«å®šä¹‰ä¸€ä¸ªæƒ¯æ€§åæ ‡ç³»(æˆ–ä¸–ç•Œåæ ‡ç³»)å’Œä¸€ä¸ªç§»åŠ¨åæ ‡ç³»ã€‚ æƒ¯æ€§åæ ‡ç³»ï¼šå¯ä»¥çœ‹ä½œæ˜¯ä¸åŠ¨çš„ã€‚ ç§»åŠ¨åæ ‡ç³»ï¼šç”¨æ¥åˆ»ç”»ç›¸æœºæˆ–(ç§»åŠ¨æœºå™¨äºº)å½“å‰çš„ä½ç½®çš„åæ ‡ç³»ã€‚ æœºå™¨äººçš„ç§»åŠ¨åæ ‡ç³»æ˜¯éšç€æœºå™¨äººçš„è¿åŠ¨åœ¨ä¸æ–­çš„å˜åŒ–ï¼Œäº§ç”Ÿæ–°çš„åæ ‡ç³»ã€‚ äºæ˜¯å¼•å‡ºäº†ä¸€ä¸ªé—®é¢˜ï¼šåæ ‡ç³»ä¹‹é—´æ˜¯å¦‚ä½•è½¬åŒ–çš„ï¼ŒçŸ¥é“åœ¨ä¸€ä¸ªåæ ‡ç³»ä¸‹çš„åæ ‡ä»¬å¦‚ä½•åœ¨å¦ä¸€ä¸ªåæ ‡ç³»ä¸‹è¿›è¡Œè¡¨ç¤ºã€‚ ä¸Šè¿°åæ ‡ç³»ä¹‹é—´é€šè¿‡ä¸€æ¬¡æ—‹è½¬åŠ ä¸€æ¬¡å¹³ç§»å³å¯å¾—åˆ°ï¼Œäºæ˜¯å®šä¹‰ä¸ºåˆšä½“è¿åŠ¨ã€‚ç›¸æœºå’Œæœºå™¨äººçš„è¿åŠ¨å°±æ˜¯å…¸å‹çš„åˆšä½“è¿åŠ¨ã€‚ åˆšä½“è¿åŠ¨çš„ç‰¹ç‚¹ï¼š è¿åŠ¨çš„è¿‡ç¨‹ä¸­çš„ç©ºé—´ä½ç½®å’Œå§¿æ€å¯èƒ½åœ¨ä¸€ç›´æ”¹å˜ï¼› ä½†æ˜¯å…¶å‘é‡çš„å¤¹è§’å’Œé•¿åº¦æ˜¯ä¸å˜çš„ã€‚ æ­¤æ—¶åˆšä½“è¿åŠ¨è¿‡ç¨‹ä¸­ï¼Œåæ ‡ç³»ä¹‹é—´çš„å˜åŒ–å¯ä»¥çœ‹ä½œæ˜¯æ¬§å¼å˜æ¢ã€‚ æ—‹è½¬çŸ©é˜µæ—‹è½¬ç›´è§‚æ¥çœ‹ï¼Œåˆšä½“çš„è¿åŠ¨æ˜¯å¯ä»¥çœ‹ä½œæ˜¯åŸç‚¹é—´çš„å¹³ç§»å’Œä¸‰ä¸ªè½´ä¹‹é—´çš„æ—‹è½¬ç»„æˆï¼Œå…¶ä¸­å¹³ç§»å¯ä»¥çœ‹ä½œæ˜¯åŠ ä¸Šä¸€ä¸ªå‘é‡ï¼Œæ—‹è½¬å¯ä»¥çœ‹ä½œæ˜¯ä¹˜ä»¥ä¸€ä¸ªæ—‹è½¬çŸ©é˜µã€‚ è®¾å•ä½æ­£äº¤åŸº$(e_1,e_2,e_3)$ å‘ç”Ÿä¸€æ¬¡æ—‹è½¬å˜æ¢å˜æˆäº† $(e_1^{\\prime},e_2^{\\prime},e_3^{\\prime})$ . å¯¹äºå›ºå®šçš„å‘é‡$\\boldsymbol a$ (å‘é‡çš„æ—‹è½¬ä¸éšåæ ‡ç³»æ—‹è½¬)ï¼Œå®ƒçš„åæ ‡å˜æ¢å‰åä¸º$[a_1,a_2,a_3]$ å’Œ $[a_1^{\\prime},a_2^{\\prime},a_3^{\\prime}]$ . äºæ˜¯å¾—å‡ºï¼š \\left[\\boldsymbol{e}_{1}, \\boldsymbol{e}_{2}, \\boldsymbol{e}_{3}\\right]\\left[\\begin{array}{l}a_{1} \\\\ a_{2} \\\\ a_{3}\\end{array}\\right]=\\left[\\boldsymbol{e}_{1}^{\\prime}, \\boldsymbol{e}_{2}^{\\prime}, \\boldsymbol{e}_{3}^{\\prime}\\right]\\left[\\begin{array}{c}a_{1}^{\\prime} \\\\ a_{2}^{\\prime} \\\\ a_{3}^{\\prime}\\end{array}\\right]ç”±å•ä½æ­£äº¤åŸºçš„æ€§è´¨å¯å¾—ï¼š \\left[\\begin{array}{c}a_{1} \\\\ a_{2} \\\\ a_{3}\\end{array}\\right]=\\left[\\begin{array}{ccc}\\boldsymbol{e}_{1}^{T} \\boldsymbol{e}_{1}^{\\prime} & \\boldsymbol{e}_{1}^{T} \\boldsymbol{e}_{2}^{\\prime} & \\boldsymbol{e}_{1}^{T} \\boldsymbol{e}_{3}^{\\prime} \\\\ \\boldsymbol{e}_{2}^{T} \\boldsymbol{e}_{1}^{\\prime} & \\boldsymbol{e}_{2}^{T} \\boldsymbol{e}_{2}^{\\prime} & \\boldsymbol{e}_{2}^{T} \\boldsymbol{e}_{3}^{\\prime} \\\\ \\boldsymbol{e}_{3}^{T} \\boldsymbol{e}_{1}^{\\prime} & \\boldsymbol{e}_{3}^{T} \\boldsymbol{e}_{2}^{\\prime} & \\boldsymbol{e}_{3}^{T} \\boldsymbol{e}_{3}^{\\prime}\\end{array}\\right]\\left[\\begin{array}{c}a_{1}^{\\prime} \\\\ a_{2}^{\\prime} \\\\ a_{3}^{\\prime}\\end{array}\\right] \\triangleq \\boldsymbol{R} \\boldsymbol{a}^{\\prime} è¿™é‡ŒçŸ©é˜µ$\\boldsymbol R$ ç§°ä¸ºæ—‹è½¬çŸ©é˜µï¼Œå…¶æ¯ä¸ªåˆ†é‡ä¸ºå„ä¸ªåæ ‡åŸºä¹‹é—´çš„å†…ç§¯ã€‚ ä¸»è¦çš„æ€§è´¨ï¼š $\\boldsymbol R$ æ˜¯ä¸€ä¸ªæ­£äº¤çŸ©é˜µï¼› $\\boldsymbol R$ çš„è¡Œåˆ—å¼ä¸º 1ã€‚ é€šè¿‡ä¸Šè¿°çš„æ€§è´¨ï¼Œå®šä¹‰ä¸Šè¿°ä¸¤æ¡æ€§è´¨çš„çŸ©é˜µä¸ºæ—‹è½¬çŸ©é˜µã€‚ äºæ˜¯å°†nç»´æ—‹è½¬çŸ©é˜µçš„å‡ ä½•å®šä¹‰ä¸ºä¸€ä¸ªç‰¹æ®Šæ­£äº¤ç¾¤ï¼š \\mathcal {SO}(n)=\\{\\boldsymbol R \\in \\mathbb R^{n\\times n} | \\boldsymbol R\\boldsymbol R^T=\\boldsymbol I,\\det(\\boldsymbol R)=1\\}. æ—‹è½¬çŸ©é˜µæè¿°äº†åŒä¸€ä¸ªå‘é‡åœ¨ä¸¤ä¸ªåæ ‡ç³»ä¹‹é—´çš„åæ ‡å˜æ¢å…³ç³»ã€‚ æ¯”å¦‚ï¼š$a_1=\\boldsymbol R_{12}a_2$ï¼Œåä¹‹ä¸ºï¼š$a_2=\\boldsymbol R_{21}a_1$ äºæ˜¯å¯å¾—ï¼š$\\boldsymbol R_{21}=\\boldsymbol R_{12}^{-1}=\\boldsymbol R_{12}^T$ è¿›ä¸€æ­¥å¯¹äºä¸‰ä¸ªåæ ‡ç³»æœ‰ï¼š$a_3=\\boldsymbol R_{32}a_2=\\boldsymbol R_{32}\\boldsymbol R_{21}a_1=\\boldsymbol R_{31}a_1$ å¹³ç§»è¿™é‡Œå¹³ç§»çš„åˆ»ç”»æ˜¯ä¸€ä¸ªå‘é‡ $t_{12}$ ï¼š a_1=\\boldsymbol R_{12}a_2+t_{12}è¿™é‡Œå¯¹å…¬å¼çš„ç†è§£ï¼š å¯¹äºæ—‹è½¬çŸ©é˜µ $\\boldsymbol R_{12}$ ï¼Œå…¶ä¸‹æ ‡æ˜¯ä»å³å‘å·¦æ¥è¯»çš„ï¼Œä»£è¡¨çš„å«ä¹‰æ˜¯æŠŠåæ ‡ç³»2çš„å‘é‡è½¬åŒ–ä¸ºåæ ‡ç³»1ä¸Šã€‚ å¯¹äºå¹³ç§»å‘é‡ $t_12$ï¼Œå…¶ä¸‹æ ‡æ˜¯è¿˜æ˜¯ä»å·¦å‘å³ï¼Œä»£è¡¨çš„æ˜¯ä»åæ ‡ç³»1æŒ‡å‘åæ ‡ç³»2çš„å‘é‡ï¼Œä½†æ˜¯å‘é‡çš„åœ¨åæ ‡ç³»1ä¸‹å–å¾—åæ ‡ã€‚ åœ¨å‘é‡çš„å‡ ä½•å±‚é¢æœ‰$t_{12}=-t_{21}$; ä½†æ˜¯åœ¨åæ ‡å±‚é¢ï¼Œç”±äºä¸¤è€…æ‰€åœ¨çš„åæ ‡ç³»ä¸åŒï¼Œå› æ­¤$t_{12}\\ne-t_{21}$ å˜æ¢çŸ©é˜µå’Œé½æ¬¡åæ ‡å¯¹äºåˆšæ‰çš„çš„æ¬§æ°å˜æ¢ï¼Œå…¶å¹¶éä¸€ä¸ªçº¿æ€§å…³ç³»ï¼š b=\\boldsymbol R_1 a + t_1, c=\\boldsymbol R_2 b + t_2 \\Rightarrow c=\\boldsymbol R_2 (\\boldsymbol R_1 a + t_1) + t_2äºæ˜¯å¼•å…¥äº†é½æ¬¡å˜æ¢ï¼š \\left[\\begin{array}{c}\\boldsymbol{a}^{\\prime} \\\\ 1\\end{array}\\right]=\\left[\\begin{array}{cc}\\boldsymbol{R} & \\boldsymbol{t} \\\\ \\mathbf{0}^{T} & 1\\end{array}\\right]\\left[\\begin{array}{c}\\boldsymbol{a} \\\\ 1\\end{array}\\right] \\triangleq \\boldsymbol{T}\\left[\\begin{array}{c}\\boldsymbol{a} \\\\ 1\\end{array}\\right] . è¿™é‡Œè®°$\\tilde a=\\left[\\begin{array}{c}\\boldsymbol{a}^{\\prime} \\\\ 1\\end{array}\\right]$ ä¸ºé½æ¬¡åæ ‡ï¼Œäºæ˜¯ä¸Šé¢çš„åæ ‡å˜æ¢å¯ä»¥è½¬åŒ–ç§°ä¸ºï¼š \\tilde{b}=\\boldsymbol{T}_{1} \\tilde{\\boldsymbol{a}}, \\tilde{\\boldsymbol{c}}=\\boldsymbol{T}_{2} \\tilde{\\boldsymbol{b}} \\quad \\Rightarrow \\tilde{\\boldsymbol{c}}=\\boldsymbol{T}_{2} \\boldsymbol{T}_{1} \\tilde{\\boldsymbol{a}} è¿™ç§å››ä¸ªæ•°è¡¨è¾¾ä¸‰ç»´å‘é‡çš„æ–¹æ³•ç§°ä¸ºé½æ¬¡åæ ‡ï¼ŒåŸæ¥çš„ä¸‰ç»´å‘é‡å°±ä¸ºéé½æ¬¡åæ ‡ã€‚ å¼•å…¥é½æ¬¡åæ ‡ä¹‹åï¼Œå¯ä»¥å°†æ—‹è½¬å’Œå¹³ç§»æ”¾åˆ°åŒä¸€ä¸ªçŸ©é˜µé‡Œé¢ï¼Œå…¶çŸ©é˜µç§°ä¸ºå˜æ¢çŸ©é˜µã€‚ å¯¹äºå½¢å®¹å˜æ¢çŸ©é˜µçš„ä¸€ç±»çŸ©é˜µç§°ä¸ºç‰¹æ®Šæ¬§æ°ç¾¤ï¼š \\mathcal{SE}(3) =\\left\\{\\boldsymbol{T}=\\left[\\begin{array}{ll}\\boldsymbol{R} & \\boldsymbol{t} \\\\ \\mathbf{0}^{T} &1\\end{array}\\right] \\in \\mathbb{R}^{4 \\times 4} \\mid \\boldsymbol{R} \\in \\mathcal{SO}(3), \\boldsymbol{t} \\in \\mathbb{R}^{3}\\right\\} åŒæ ·ï¼Œè¯¥å˜æ¢çš„é€†è¿ç®—çŸ©é˜µä¸ºï¼š \\boldsymbol{T}^{-1}=\\left[\\begin{array}{cc}\\boldsymbol{R}^{T} & -\\boldsymbol{R}^{T} t \\\\ \\mathbf{0}^{T} & 1\\end{array}\\right]\\ ä¾‹å­ï¼šåœ¨SLAMä¸­ï¼Œå®šä¹‰ä¸–ç•Œåæ ‡ç³»$\\boldsymbol T_w$ å’Œæœºå™¨äººåæ ‡ç³» $\\boldsymbol T_R$ ï¼Œä¸€ä¸ªç‚¹çš„ä¸–ç•Œåæ ‡ä¸º$p_w$ï¼Œæœºå™¨äººçš„åæ ‡ä¸º$p_R$ ï¼Œé‚£ä¹ˆæ»¡è¶³å…³ç³»æ˜¯ï¼š$p_R=\\boldsymbol T_{Rw}p_w$ åœ¨å®é™…çš„ç¼–ç¨‹ä¸­ï¼Œå¯ä»¥ä½¿ç”¨$\\boldsymbol T_{Rw}$å’Œ$\\boldsymbol T_{wR}$æ¥æè¿°æœºå™¨äººçš„ä½å§¿ï¼Œå…¶ä¸­$\\boldsymbol T_{wR}$ çš„å¹³ç§»å‘é‡ä»£è¡¨çš„æ˜¯ä»ä¸–ç•Œåæ ‡ç³»æŒ‡å‘æœºå™¨äººåæ ‡ç³»åœ¨ä¸–ç•Œåæ ‡ç³»ä¸‹çš„å‘é‡åæ ‡ã€‚ EigençŸ©é˜µå»ºç«‹å’Œå˜æ¢çš„å®è·µå®‰è£…Eigenï¼šsudo apt-get install libeigen3-dev ç”±äºEigené‡Œé¢åªæœ‰å¤´æ–‡ä»¶æ²¡æœ‰åº“æ–‡ä»¶ï¼Œå› æ­¤åªè¦è¿›è¡Œæ·»åŠ å¤´æ–‡ä»¶include_directories()å³å¯ä¸ç”¨æ·»åŠ åº“æ–‡ä»¶add_library()å’Œtarget_link_libraries()ã€‚ åœ¨æ·»åŠ å¤´æ–‡ä»¶æ˜¯è¦æ·»åŠ ä¸€ä¸‹å¤´æ–‡ä»¶éœ€è¦å¯»æ‰¾å¤´æ–‡ä»¶çš„ä½ç½®ï¼š 12sudo updatedblocate eigen3 æ‰“å¼€Clionä¹‹åé¦–å…ˆæ–°å»ºä¸€ä¸ªCMakeList.txt 123456789cmake_minimum_required(VERSION 3.21)project(useEigen)set(CMAKE_BUILD_TYPE &quot;Release&quot;)set(CMAKE_CXX_FLAGS &quot;-O3&quot;)# æ·»åŠ Eigenå¤´æ–‡ä»¶include_directories(&quot;/usr/include/eigen3&quot;)add_executable(eigenMatrix eigenMatrix.cpp) ä¹‹åæ–°å»ºæºæ–‡ä»¶eigenMatrix.cpp 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117#include &lt;iostream&gt;using namespace std;#include &lt;ctime&gt;// Eigen æ ¸å¿ƒéƒ¨åˆ†#include &lt;Eigen/Core&gt;// ç¨ å¯†çŸ©é˜µçš„ä»£æ•°è¿ç®—ï¼ˆé€†ï¼Œç‰¹å¾å€¼ç­‰ï¼‰#include &lt;Eigen/Dense&gt;using namespace Eigen;#define MATRIX_SIZE 50/***************************** æœ¬ç¨‹åºæ¼”ç¤ºäº† Eigen åŸºæœ¬ç±»å‹çš„ä½¿ç”¨****************************/int main(int argc, char **argv) { // Eigen ä¸­æ‰€æœ‰å‘é‡å’ŒçŸ©é˜µéƒ½æ˜¯Eigen::Matrixï¼Œå®ƒæ˜¯ä¸€ä¸ªæ¨¡æ¿ç±»ã€‚å®ƒçš„å‰ä¸‰ä¸ªå‚æ•°ä¸ºï¼šæ•°æ®ç±»å‹ï¼Œè¡Œï¼Œåˆ— // å£°æ˜ä¸€ä¸ª2*3çš„floatçŸ©é˜µ Matrix&lt;float, 2, 3&gt; matrix_23; // åŒæ—¶ï¼ŒEigen é€šè¿‡ typedef æä¾›äº†è®¸å¤šå†…ç½®ç±»å‹ï¼Œä¸è¿‡åº•å±‚ä»æ˜¯Eigen::Matrix // ä¾‹å¦‚ Vector3d å®è´¨ä¸Šæ˜¯ Eigen::Matrix&lt;double, 3, 1&gt;ï¼Œå³ä¸‰ç»´å‘é‡ Vector3d v_3d; // è¿™æ˜¯ä¸€æ ·çš„ Matrix&lt;float, 3, 1&gt; vd_3d; // Matrix3d å®è´¨ä¸Šæ˜¯ Eigen::Matrix&lt;double, 3, 3&gt; Matrix3d matrix_33 = Matrix3d::Zero(); //åˆå§‹åŒ–ä¸ºé›¶ // å¦‚æœä¸ç¡®å®šçŸ©é˜µå¤§å°ï¼Œå¯ä»¥ä½¿ç”¨åŠ¨æ€å¤§å°çš„çŸ©é˜µ Matrix&lt;double, Dynamic, Dynamic&gt; matrix_dynamic; // æ›´ç®€å•çš„ MatrixXd matrix_x; // è¿™ç§ç±»å‹è¿˜æœ‰å¾ˆå¤šï¼Œæˆ‘ä»¬ä¸ä¸€ä¸€åˆ—ä¸¾ // ä¸‹é¢æ˜¯å¯¹Eigené˜µçš„æ“ä½œ // è¾“å…¥æ•°æ®ï¼ˆåˆå§‹åŒ–ï¼‰ matrix_23 &lt;&lt; 1, 2, 3, 4, 5, 6; // è¾“å‡º cout &lt;&lt; &quot;matrix 2x3 from 1 to 6: \\n&quot; &lt;&lt; matrix_23 &lt;&lt; endl; // ç”¨()è®¿é—®çŸ©é˜µä¸­çš„å…ƒç´  cout &lt;&lt; &quot;print matrix 2x3: &quot; &lt;&lt; endl; for (int i = 0; i &lt; 2; i++) { for (int j = 0; j &lt; 3; j++) cout &lt;&lt; matrix_23(i, j) &lt;&lt; &quot;\\t&quot;; cout &lt;&lt; endl; } // çŸ©é˜µå’Œå‘é‡ç›¸ä¹˜ï¼ˆå®é™…ä¸Šä»æ˜¯çŸ©é˜µå’ŒçŸ©é˜µï¼‰ v_3d &lt;&lt; 3, 2, 1; vd_3d &lt;&lt; 4, 5, 6; // ä½†æ˜¯åœ¨Eigené‡Œä½ ä¸èƒ½æ··åˆä¸¤ç§ä¸åŒç±»å‹çš„çŸ©é˜µï¼Œåƒè¿™æ ·æ˜¯é”™çš„ // Matrix&lt;double, 2, 1&gt; result_wrong_type = matrix_23 * v_3d; // åº”è¯¥æ˜¾å¼è½¬æ¢ Matrix&lt;double, 2, 1&gt; result = matrix_23.cast&lt;double&gt;() * v_3d; cout &lt;&lt; &quot;[1,2,3;4,5,6]*[3,2,1]=&quot; &lt;&lt; result.transpose() &lt;&lt; endl; Matrix&lt;float, 2, 1&gt; result2 = matrix_23 * vd_3d; cout &lt;&lt; &quot;[1,2,3;4,5,6]*[4,5,6]: &quot; &lt;&lt; result2.transpose() &lt;&lt; endl; // åŒæ ·ä½ ä¸èƒ½æé”™çŸ©é˜µçš„ç»´åº¦ // è¯•ç€å–æ¶ˆä¸‹é¢çš„æ³¨é‡Šï¼Œçœ‹çœ‹Eigenä¼šæŠ¥ä»€ä¹ˆé”™ // Eigen::Matrix&lt;double, 2, 3&gt; result_wrong_dimension = matrix_23.cast&lt;double&gt;() * v_3d; // ä¸€äº›çŸ©é˜µè¿ç®— // å››åˆ™è¿ç®—å°±ä¸æ¼”ç¤ºäº†ï¼Œç›´æ¥ç”¨+-*/å³å¯ã€‚ matrix_33 = Matrix3d::Random(); // éšæœºæ•°çŸ©é˜µ cout &lt;&lt; &quot;random matrix: \\n&quot; &lt;&lt; matrix_33 &lt;&lt; endl; cout &lt;&lt; &quot;transpose: \\n&quot; &lt;&lt; matrix_33.transpose() &lt;&lt; endl; // è½¬ç½® cout &lt;&lt; &quot;sum: &quot; &lt;&lt; matrix_33.sum() &lt;&lt; endl; // å„å…ƒç´ å’Œ cout &lt;&lt; &quot;trace: &quot; &lt;&lt; matrix_33.trace() &lt;&lt; endl; // è¿¹ cout &lt;&lt; &quot;times 10: \\n&quot; &lt;&lt; 10 * matrix_33 &lt;&lt; endl; // æ•°ä¹˜ cout &lt;&lt; &quot;inverse: \\n&quot; &lt;&lt; matrix_33.inverse() &lt;&lt; endl; // é€† cout &lt;&lt; &quot;det: &quot; &lt;&lt; matrix_33.determinant() &lt;&lt; endl; // è¡Œåˆ—å¼ // ç‰¹å¾å€¼ // å®å¯¹ç§°çŸ©é˜µå¯ä»¥ä¿è¯å¯¹è§’åŒ–æˆåŠŸ SelfAdjointEigenSolver&lt;Matrix3d&gt; eigen_solver(matrix_33.transpose() * matrix_33); cout &lt;&lt; &quot;Eigen values = \\n&quot; &lt;&lt; eigen_solver.eigenvalues() &lt;&lt; endl; cout &lt;&lt; &quot;Eigen vectors = \\n&quot; &lt;&lt; eigen_solver.eigenvectors() &lt;&lt; endl; // è§£æ–¹ç¨‹ // æˆ‘ä»¬æ±‚è§£ matrix_NN * x = v_Nd è¿™ä¸ªæ–¹ç¨‹ // Nçš„å¤§å°åœ¨å‰è¾¹çš„å®é‡Œå®šä¹‰ï¼Œå®ƒç”±éšæœºæ•°ç”Ÿæˆ // ç›´æ¥æ±‚é€†è‡ªç„¶æ˜¯æœ€ç›´æ¥çš„ï¼Œä½†æ˜¯æ±‚é€†è¿ç®—é‡å¤§ Matrix&lt;double, MATRIX_SIZE, MATRIX_SIZE&gt; matrix_NN = MatrixXd::Random(MATRIX_SIZE, MATRIX_SIZE); matrix_NN = matrix_NN * matrix_NN.transpose(); // ä¿è¯åŠæ­£å®š Matrix&lt;double, MATRIX_SIZE, 1&gt; v_Nd = MatrixXd::Random(MATRIX_SIZE, 1); clock_t time_stt = clock(); // è®¡æ—¶ // ç›´æ¥æ±‚é€† Matrix&lt;double, MATRIX_SIZE, 1&gt; x = matrix_NN.inverse() * v_Nd; cout &lt;&lt; &quot;time of normal inverse is &quot; &lt;&lt; 1000 * (clock() - time_stt) / (double) CLOCKS_PER_SEC &lt;&lt; &quot;ms&quot; &lt;&lt; endl; cout &lt;&lt; &quot;x = &quot; &lt;&lt; x.transpose() &lt;&lt; endl; // é€šå¸¸ç”¨çŸ©é˜µåˆ†è§£æ¥æ±‚ï¼Œä¾‹å¦‚QRåˆ†è§£ï¼Œé€Ÿåº¦ä¼šå¿«å¾ˆå¤š time_stt = clock(); x = matrix_NN.colPivHouseholderQr().solve(v_Nd); cout &lt;&lt; &quot;time of Qr decomposition is &quot; &lt;&lt; 1000 * (clock() - time_stt) / (double) CLOCKS_PER_SEC &lt;&lt; &quot;ms&quot; &lt;&lt; endl; cout &lt;&lt; &quot;x = &quot; &lt;&lt; x.transpose() &lt;&lt; endl; // å¯¹äºæ­£å®šçŸ©é˜µï¼Œè¿˜å¯ä»¥ç”¨choleskyåˆ†è§£æ¥è§£æ–¹ç¨‹ time_stt = clock(); x = matrix_NN.ldlt().solve(v_Nd); cout &lt;&lt; &quot;time of ldlt decomposition is &quot; &lt;&lt; 1000 * (clock() - time_stt) / (double) CLOCKS_PER_SEC &lt;&lt; &quot;ms&quot; &lt;&lt; endl; cout &lt;&lt; &quot;x = &quot; &lt;&lt; x.transpose() &lt;&lt; endl; return 0;}","link":"/2022/04/02/SLAM/ch3-%E4%B8%89%E7%BB%B4%E7%A9%BA%E9%97%B4%E7%9A%84%E5%88%9A%E4%BD%93%E8%BF%90%E5%8A%A8-%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86/"},{"title":"Ch3 ä¸‰ç»´ç©ºé—´çš„åˆšä½“è¿åŠ¨ ç¬¬äºŒéƒ¨åˆ†","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦æ˜¯ä¸‰ç»´åˆšä½“è¿åŠ¨çš„ç¬¬äºŒéƒ¨åˆ†ï¼ŒåŒ…æ‹¬æ—‹è½¬å‘é‡æ¬§æ‹‰è§’å’Œå››å…ƒæ•°çš„å†…å®¹ï¼Œæœ€åæ˜¯Eigençš„å‡ ä½•æ¨¡å—çš„å®è·µä»¥åŠä¸€ä¸ªå°çš„ä¾‹é¢˜ã€‚ æ—‹è½¬å‘é‡å’Œæ¬§æ‹‰è§’æ—‹è½¬å‘é‡é—®é¢˜ï¼š æ—‹è½¬çŸ©é˜µå’Œå˜æ¢çŸ©é˜µçš„æ–¹æ³•éœ€è¦çš„å‚æ•°é‡å¤ªå¤§ï¼ŒSO(3)é‡Œé¢æ¶‰åŠçš„9ä¸ªå‚æ•°è¡¨ç¤º3ä¸ªè‡ªç”±åº¦ï¼ŒSE(3)é‡Œ16ä¸ªå‚æ•°æè¿°6ä¸ªè‡ªç”±åº¦ã€‚ å…¶æ¬¡ï¼Œä¸¤ç§ç¾¤çš„çº¦æŸè¿‡å¤šä½¿å¾—æ±‚è§£å˜å¾—å›°éš¾ã€‚ å› æ­¤æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªä¸‰ä¸ªè‡ªç”±åº¦çš„å‘é‡æ¥è¡¨ç¤ºæ—‹è½¬ï¼Œå…¶ä¸­å‘é‡çš„æ–¹å‘ä¸ºæ—‹è½¬è½´çš„æ–¹å‘ï¼Œå‘é‡çš„é•¿åº¦ä¸ºæ—‹è½¬çš„è§’åº¦ï¼Œç§°è¿™ç§å‘é‡ä¸ºæ—‹è½¬å‘é‡ï¼Œåˆç§°è§’è½´/è½´è§’ã€‚ \\boldsymbol \\omega=\\theta \\boldsymbol n è§’è½´å’Œæ—‹è½¬çŸ©é˜µçš„ä¸åŒï¼š æ—‹è½¬çŸ©é˜µï¼šæœ‰ä¹ä¸ªé‡ï¼Œä¸”æ»¡è¶³æ­£äº¤æ€§çš„çº¦æŸå’Œè¡Œåˆ—å¼çš„å€¼ä¸º1çš„çº¦æŸã€‚ è§’è½´ï¼šä¸‰ä¸ªé‡ï¼Œæ²¡æœ‰çº¦æŸã€‚ æ³¨æ„ä¸Šè¿°äºŒè€…åªæ˜¯è¡¨è¾¾æ–¹å¼ä¸åŒï¼Œä½†æ˜¯è¡¨è¾¾çš„ä¸œè¥¿æ˜¯ç›¸åŒçš„ã€‚ è¿™é‡Œçš„è§’è½´è¡¨ç¤ºå°±æ˜¯åœ¨ç¬¬å››ç« è¦ä»‹ç»çš„æä»£æ•°é—®é¢˜ã€‚ äºŒè€…çš„è½¬æ¢å…³ç³»ï¼š è§’è½´-&gt;æ—‹è½¬çŸ©é˜µï¼šç½—å¾·é‡Œæ ¼æ–¯å…¬å¼ \\boldsymbol R=\\cos\\theta \\boldsymbol I +(1-\\cos \\theta)\\boldsymbol n \\boldsymbol n^T +\\sin\\theta\\boldsymbol n^\\^ æ—‹è½¬çŸ©é˜µ-&gt;è§’è½´ è§’åº¦ï¼š$\\theta=\\arccos \\left( \\dfrac {tr(\\boldsymbol R)-1} {2}\\right)$ è½´å‘é‡ï¼š$\\boldsymbol R \\boldsymbol n =\\boldsymbol n$ è¿™é‡Œå¯ä»¥çœ‹ä½œæ˜¯å°†æ—‹è½¬è½´ç»•è‡ªèº«æ—‹è½¬åç»“æœä¸å˜ï¼Œå…¶å®ä¹Ÿå°±æ˜¯æ—‹è½¬çŸ©é˜µçš„ç‰¹å¾å€¼1å¯¹äºçš„æ—‹è½¬å‘é‡ã€‚ æ¬§æ‹‰è§’ç›¸æ¯”æ—‹è½¬çŸ©é˜µå’Œæ—‹è½¬å‘é‡å¹¶ä¸æ˜¯å¾ˆç›´è§‚çš„ä½“ç°æ—‹è½¬çš„æƒ…å†µï¼Œè¿™é‡Œä½¿ç”¨æ¬§æ‹‰è§’æ¥æ›´ä¸ºç›´è§‚çš„æ˜¾ç¤ºï¼Œä½†æ˜¯æ¬§æ‹‰è§’åœ¨å®é™…ç¼–ç¨‹ä¸­å¾ˆå°‘çœ‹åˆ°ã€‚ è¿™é‡Œæ¬§æ‹‰è§’æ˜¯å°†ï¼Œä¸€æ¬¡æ—‹è½¬åˆ†è§£ä¸ºç»•ä¸‰ä¸ªè½´çš„æ—‹è½¬ï¼Œé€šè¿‡ä¸‰ä¸ªåˆ†ç¦»çš„è½¬è§’æ¥è¡¨ç¤ºã€‚ å› ä¸ºäººå¯¹ç»•å•ä¸ªè½´çš„ä¸€æ¬¡æ—‹è½¬è¿‡ç¨‹æ¯”è¾ƒå®¹æ˜“ç†è§£ã€‚ ä½†æ˜¯ï¼Œåˆ†è§£çš„æƒ…å†µæœ‰å¾ˆå¤šç§ï¼Œæ¯”å¦‚ï¼š æŒ‰ç…§è½´çš„æ—‹è½¬æ¬¡åºï¼šå¯ä»¥åˆ†ä¸ºXYZï¼ŒZYXï¼ŒZYZä¸‰ç§ï¼Œå…¶ä¸­ZYXä½¿ç”¨çš„æ¯”è¾ƒå¤šã€‚ æŒ‰ç…§æ¯æ¬¡æ—‹è½¬çš„è½´æ˜¯å¦å›ºå®šï¼šå¯ä»¥åˆ†ä¸ºå®šè½´æ—‹è½¬å’ŒåŠ¨è½´æ—‹è½¬ï¼Œè¿™ä¸¤ç§ä¸»è¦åŒºåˆ«æ˜¯æ—‹è½¬çŸ©é˜µçš„å³ä¹˜è¿˜æ˜¯å·¦ä¹˜ã€‚ è¿™é‡Œåšå¸¸è§æ˜¯yaw-pitch-roll (åèˆª-ä¿¯ä»°-æ»šè½¬)ã€‚ ç»•ç‰©ä½“çš„Zè½´æ—‹è½¬ï¼Œå¾—åˆ°åèˆªè§’yawï¼› ç»•æ—‹è½¬ä¹‹åçš„Yè½´æ—‹è½¬ï¼Œå¾—åˆ°ä¿¯ä»°è§’pitchï¼› ç»•æ—‹è½¬ä¹‹åçš„Xè½´æ—‹è½¬ï¼Œå¾—åˆ°æ»šè½¬è§’rollã€‚ ä¸‡å‘é”é—®é¢˜ æŒ‰ç…§ZYXçš„é¡ºåºï¼Œå¦‚æœPitchä¸ºæ­£è´Ÿ90Â°ï¼Œåˆ™ç¬¬ä¸‰æ¬¡å’Œç¬¬ä¸€æ¬¡æ˜¯ç»•çš„åŒä¸€ä¸ªè½´è¿›è¡Œçš„ï¼Œå°±ä¼šå‡å°‘ä¸€ä¸ªè‡ªç”±åº¦ï¼Œäº§ç”Ÿå¥‡å¼‚çš„é—®é¢˜ã€‚ ç”±äºä¸‡å‘é”çš„å­˜åœ¨ï¼Œæ¬§æ‹‰è§’ä¸é€‚åˆæ’å€¼æˆ–è¿­ä»£ï¼Œå¤šç”¨äºäººæœºäº¤äº’ä¸­ã€‚ å¯ä»¥è¯æ˜ï¼šä»…ç”¨ä¸‰ä¸ªå®æ•°è¡¨è¾¾æ—‹è½¬æ—¶ï¼Œä¸å¯é¿å…åœ°å­˜åœ¨å¥‡å¼‚æ€§é—®é¢˜ã€‚ æ—‹è½¬å‘é‡å…¶å®ä¹Ÿä¼šå‡ºç°ä¸€æ ·çš„å¥‡å¼‚é—®é¢˜ã€‚ SLAMä¸­äº¦å¾ˆå°‘ç”¨æ¬§æ‹‰è§’è¡¨è¾¾å§¿æ€ã€‚ å››å…ƒæ•°å››å…ƒæ•°çš„å®šä¹‰å››å…ƒæ•°æ˜¯ä¸€ç§æ‰©å±•çš„å¤æ•°ï¼Œå®ƒå‚è€ƒäº†ä¸€èˆ¬çš„å¤æ•°å¯ä»¥å¾ˆå¥½çš„è¡¨ç¤ºæ—‹è½¬çš„ç‰¹ç‚¹è¿›è¡Œæ”¹é€ çš„ï¼Œä½¿å¾—å…¶åŒæ—¶å…·æœ‰ç´§å‡‘æ€§å’Œéå¥‡å¼‚æ€§ï¼Œå°½ç®¡å…¶ä¾æ—§ä¸æ˜¯å¾ˆç›´è§‚ã€‚ å››å…ƒæ•°æ®å…·æœ‰ä¸‰ä¸ªè™šéƒ¨ï¼Œå¯ä»¥è¡¨è¾¾ä¸‰ç»´ç©ºé—´ä¸­çš„æ—‹è½¬ï¼š \\boldsymbol q=q_0+q_1i+q_2j+q_3kå…¶ä¸­ï¼Œ$i,j,k$ ä¸ºå››å…ƒæ•°çš„è™šéƒ¨ï¼Œè¿™é‡Œå…¶è¿ç®—æ»¡è¶³ä»¥ä¸‹çš„æ€§è´¨ï¼š \\left\\{\\begin{array} &i^2=j^2=k^2=-1 \\\\ ij=k,ji=-k\\\\ jk=i,kj=-i\\\\ ki=j,ik=-j \\end{array}\\right. è‡ªå·±å’Œè‡ªå·±çš„è¿ç®—åƒå¤æ•°ï¼Œè‡ªå·±å’Œåˆ«äººè¿ç®—åƒå‰ä¹˜ã€‚ ä½†æ˜¯è¿™é‡Œæ— æ³•ç”¨å¤æ•°çš„ä¹˜ä»¥ä¸€ä¸ª$i$ä»£è¡¨æ—‹è½¬äº†90Â°æ¥ç†è§£ï¼Œå…·ä½“çš„ç†è®ºæŸ¥ä¸€ä¸‹æ·±å…¥çš„èµ„æ–™ï¼Œè¿™é‡Œä¸å†ç»†è®²ã€‚ æœ‰æ—¶å››å…ƒæ•°ä¹Ÿè¢«ç›´æ¥è¡¨è¾¾æˆï¼š \\boldsymbol q=[\\boldsymbol s,\\boldsymbol v],s=q_0\\in \\mathbb R^3\\\\ v=[q_!,q_2,q_3]^T\\in\\mathbb R^3å››å…ƒæ•°çš„è¿ç®—ä¸»è¦çš„è¿ç®—ä¸ºä»¥ä¸‹çš„å‡ ç§ï¼š åŠ å‡æ³•ï¼š$\\boldsymbol q_a \\pm \\boldsymbol q_b=[s_a\\pm s_b,v_a\\pm v_b].$ ä¹˜æ³•ï¼š $\\boldsymbol q_a\\boldsymbol q_b=[s_as_b-v_a^Tv_b,s_av_b+s_bv_a+v_a\\times v_b].$ å…±è½­ï¼š $\\boldsymbol q_a=s_a-x_ai-y_aj-z_ak=[s_a,-v_a].$ æ¨¡é•¿ï¼š $||\\boldsymbol q_a||=\\sqrt{s_a^2+x_a^2+y_a^2+z_a^2}$ é€†ï¼š $\\boldsymbol q^{-1}=\\boldsymbol q^*/||\\boldsymbol q||$ æ•°ä¹˜ï¼š $k \\boldsymbol q=[ks, kv].$ ç‚¹ä¹˜ï¼š $\\boldsymbol q_a \\cdot \\boldsymbol q_b=s_as_b+x_ax_bi+y_ay_bj+z_az_bk$ è¿™é‡Œæ•°ä¹˜æ˜¯ä¸å¯ä»¥éšæ„çš„äº¤æ¢ä½ç½®ã€‚ ä½¿ç”¨å››å…ƒæ•°è¿›è¡Œæ—‹è½¬è®¾ç‚¹$p$ ç»è¿‡ä¸€æ¬¡ä»¥ $q$ è¡¨ç¤ºçš„æ—‹è½¬ä¹‹åï¼Œå¾—åˆ°äº†$p^{\\prime}$ï¼Œåˆ™ å°† $p$ çš„åæ ‡ç”¨å››å…ƒæ•°è¡¨ç¤º(è™šå››å…ƒæ•°) ï¼š$\\boldsymbol p=[0,x,y,z=[0,v].$ æ—‹è½¬ä¹‹åçš„å…³ç³»ä¸ºï¼š$\\boldsymbol p^{\\prime} = \\boldsymbol q\\boldsymbol p \\boldsymbol q^{-1}=\\boldsymbol R\\boldsymbol p.$ è¿™é‡Œå¯ä»¥è¯æ˜å…¶æ—‹è½¬å‰åéƒ½æ˜¯è™šå››å…ƒæ•°ã€‚ ä¸‹é¢æ¥çœ‹å››å…ƒæ•°å‘å…¶ä»–ä¸¤ç§æ—‹è½¬è¡¨ç¤ºé—´çš„è½¬åŒ–. é¦–å…ˆï¼Œæ˜¯å‘æ—‹è½¬çŸ©é˜µçš„è½¬åŒ–ï¼š å’Œä¹‹å‰å¤„ç†å˜æ¢çŸ©é˜µçš„æ–¹æ³•ä¸€æ ·ï¼Œå°†éçº¿æ€§åŒ–çš„è¿ç®—çº¿æ€§åŒ–ï¼š \\boldsymbol{q}^{+}=\\left[\\begin{array}{cc}s & -\\boldsymbol{v}^{\\mathrm{T}} \\\\ \\boldsymbol{v} & s \\boldsymbol{I}+\\boldsymbol{v}^{\\wedge}\\end{array}\\right], \\quad \\boldsymbol{q}^{\\oplus}=\\left[\\begin{array}{cc}s & -\\boldsymbol{v}^{\\mathrm{T}} \\\\ \\boldsymbol{v} & s \\boldsymbol{I}-\\boldsymbol{v}^{\\wedge}\\end{array}\\right]\\\\ \\boldsymbol{q}_{1}^{+} \\boldsymbol{q}_{2}=\\left[\\begin{array}{cc}s_{1} & -\\boldsymbol{v}_{1}^{\\mathrm{T}} \\\\ \\boldsymbol{v}_{1} & s_{1} \\boldsymbol{I}+\\boldsymbol{v}_{1}^{\\wedge}\\end{array}\\right]\\left[\\begin{array}{l}s_{2} \\\\ \\boldsymbol{v}_{2}\\end{array}\\right]=\\left[\\begin{array}{c}-\\boldsymbol{v}_{1}^{\\mathrm{T}} \\boldsymbol{v}_{2}+s_{1} s_{2} \\\\ s_{1} \\boldsymbol{v}_{2}+s_{2} \\boldsymbol{v}_{1}+\\boldsymbol{v}_{1}^{\\wedge} \\boldsymbol{v}_{2}\\end{array}\\right]=\\boldsymbol{q}_{1} \\boldsymbol{q}_{2}äºæ˜¯å¯å¾—ï¼š$\\boldsymbol{q}_{1} \\boldsymbol{q}_{2}=\\boldsymbol{q}_{1}^{+} \\boldsymbol{q}_{2}=\\boldsymbol{q}_{2}^{\\oplus} \\boldsymbol{q}_{1}$ å°†ä¸Šè¿°çš„æ—‹è½¬å˜æ¢å¯ä»¥è½¬åŒ–ä¸ºï¼š$\\boldsymbol{p}^{\\prime}=\\boldsymbol{q} \\boldsymbol{p} \\boldsymbol{q}^{-1}=\\boldsymbol{q}^{+} \\boldsymbol{p}^{+} \\boldsymbol{q}^{-1}=\\boldsymbol{q}^{+} \\boldsymbol{q}^{-1^{\\oplus}} \\boldsymbol{p}$ \\boldsymbol{q}^{+}\\left(\\boldsymbol{q}^{-1}\\right)^{\\oplus}=\\left[\\begin{array}{cc}s & -\\boldsymbol{v}^{\\mathrm{T}} \\\\ \\boldsymbol{v} & s \\boldsymbol{I}+\\boldsymbol{v}^{\\wedge}\\end{array}\\right]\\left[\\begin{array}{cc}s & \\boldsymbol{v}^{\\mathrm{T}} \\\\ -\\boldsymbol{v} & s \\boldsymbol{I}+\\boldsymbol{v}^{\\wedge}\\end{array}\\right]=\\left[\\begin{array}{cc}1 & -\\boldsymbol{0} \\\\ \\boldsymbol{0}^{\\mathrm{T}} & \\boldsymbol{v}\\boldsymbol{v}^{T}+s^2 \\boldsymbol{I}+2s\\boldsymbol{v}^{\\wedge}+(\\boldsymbol{v}^{\\wedge})^2\\end{array}\\right]ç”±äºæ—‹è½¬å‰åéƒ½æ˜¯ä¸€ä¸ªè™šå››å…ƒæ•°ï¼Œå› æ­¤å››å…ƒæ•°çš„æ—‹è½¬çŸ©é˜µä¸ºï¼š \\boldsymbol{R}=\\boldsymbol{v} \\boldsymbol{v}^{\\mathrm{T}}+s^{2} \\boldsymbol{I}+2 s \\boldsymbol{v}^{\\wedge}+\\left(\\boldsymbol{v}^{\\wedge}\\right)^{2}ä¹‹åï¼Œæ˜¯å‘æ—‹è½¬å‘é‡è½¬åŒ–ï¼š æ ¹æ®ä¹‹å‰å¾—å‡ºçš„æ—‹è½¬çŸ©é˜µå¯å¾—ï¼š \\operatorname{tr}(\\boldsymbol{R})=\\operatorname{tr}\\left(\\boldsymbol{v} \\boldsymbol{v}^{\\mathrm{T}}+3 s^{2}+2 s \\cdot 0+\\operatorname{tr}\\left(\\left(\\boldsymbol{v}^{\\wedge}\\right)^{2}\\right)\\right.=4s^2-1æœ‰è§’è½´å’Œæ—‹è½¬çŸ©é˜µçš„è½¬åŒ–å…³ç³»å¯å¾—ï¼š \\theta=\\arccos \\left( \\dfrac {tr(\\boldsymbol R)-1} {2}\\right)=\\arccos(2s^2-1)å¯å¾—ï¼š$\\cos\\theta=2s^2-1=2\\cos^2(\\dfrac \\theta 2)-1 \\ \\Rightarrow s=\\cos(\\dfrac \\theta 2) $ åŒæ—¶$\\boldsymbol{p}^{\\prime}=\\boldsymbol{q} \\boldsymbol{p} \\boldsymbol{q}^{-1}$ ä¸­ï¼Œä½¿ç”¨$q$ä»£æ›¿$p$ ï¼Œå¾—å‡ºæ—‹è½¬åä¸€æ ·ï¼Œå› æ­¤å¯çŸ¥$q$ ä¸ºæ—‹è½¬è½´ï¼Œäºæ˜¯å…¶è™šéƒ¨å°±ä¸ºæ—‹è½¬è½´çš„åæ ‡ã€‚ ç»¼ä¸Šå…¶è½¬åŒ–çš„å…³ç³»ä¸ºï¼š \\left\\{\\begin{array}{l}\\theta=2 \\arccos q_{0} \\\\ {\\left[n_{x}, n_{y}, n_{z}\\right]^{\\mathrm{T}}=\\left[q_{1}, q_{2}, q_{3}\\right]^{\\mathrm{T}} / \\sin \\dfrac{\\theta}{2}}\\end{array}\\right.å› æ­¤ä¸€èˆ¬å¯¹åº”è½¨è¿¹çš„å­˜å‚¨æˆ‘ä»¬è¿˜æ˜¯ä½¿ç”¨å››å…ƒæ•°æ¥è¿›è¡Œå‚¨å­˜ã€‚ Eigenå‡ ä½•æ¨¡å—çš„ä½¿ç”¨è¿™é‡Œå…¶ä»–çš„åœ°æ–¹å’Œä¸Šé¢çš„å®è·µåŸºæœ¬ç›¸åŒï¼Œè¿™é‡Œä¸åœ¨èµ˜è¿°ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263#include &lt;iostream&gt;#include &lt;cmath&gt;using namespace std;#include &lt;Eigen/Core&gt;#include &lt;Eigen/Geometry&gt;using namespace Eigen;// æœ¬ç¨‹åºæ¼”ç¤ºäº† Eigen å‡ ä½•æ¨¡å—çš„ä½¿ç”¨æ–¹æ³•int main(int argc, char **argv) { // Eigen/Geometry æ¨¡å—æä¾›äº†å„ç§æ—‹è½¬å’Œå¹³ç§»çš„è¡¨ç¤º // 3D æ—‹è½¬çŸ©é˜µç›´æ¥ä½¿ç”¨ Matrix3d æˆ– Matrix3f Matrix3d rotation_matrix = Matrix3d::Identity(); // æ—‹è½¬å‘é‡ä½¿ç”¨ AngleAxis, å®ƒåº•å±‚ä¸ç›´æ¥æ˜¯Matrixï¼Œä½†è¿ç®—å¯ä»¥å½“ä½œçŸ©é˜µï¼ˆå› ä¸ºé‡è½½äº†è¿ç®—ç¬¦ï¼‰ AngleAxisd rotation_vector(M_PI / 4, Vector3d(0, 0, 1)); //æ²¿ Z è½´æ—‹è½¬ 45 åº¦ cout.precision(3); cout &lt;&lt; &quot;rotation matrix =\\n&quot; &lt;&lt; rotation_vector.matrix() &lt;&lt; endl; //ç”¨matrix()è½¬æ¢æˆçŸ©é˜µ // ä¹Ÿå¯ä»¥ç›´æ¥èµ‹å€¼ rotation_matrix = rotation_vector.toRotationMatrix(); // ç”¨ AngleAxis å¯ä»¥è¿›è¡Œåæ ‡å˜æ¢ Vector3d v(1, 0, 0); Vector3d v_rotated = rotation_vector * v; cout &lt;&lt; &quot;(1,0,0) after rotation (by angle axis) = &quot; &lt;&lt; v_rotated.transpose() &lt;&lt; endl; // æˆ–è€…ç”¨æ—‹è½¬çŸ©é˜µ v_rotated = rotation_matrix * v; cout &lt;&lt; &quot;(1,0,0) after rotation (by matrix) = &quot; &lt;&lt; v_rotated.transpose() &lt;&lt; endl; // æ¬§æ‹‰è§’: å¯ä»¥å°†æ—‹è½¬çŸ©é˜µç›´æ¥è½¬æ¢æˆæ¬§æ‹‰è§’ Vector3d euler_angles = rotation_matrix.eulerAngles(2, 1, 0); // ZYXé¡ºåºï¼Œå³yaw-pitch-rollé¡ºåº cout &lt;&lt; &quot;yaw pitch roll = &quot; &lt;&lt; euler_angles.transpose() &lt;&lt; endl; // æ¬§æ°å˜æ¢çŸ©é˜µä½¿ç”¨ Eigen::Isometry Isometry3d T = Isometry3d::Identity(); // è™½ç„¶ç§°ä¸º3dï¼Œå®è´¨ä¸Šæ˜¯4ï¼Š4çš„çŸ©é˜µ T.rotate(rotation_vector); // æŒ‰ç…§rotation_vectorè¿›è¡Œæ—‹è½¬ T.pretranslate(Vector3d(1, 3, 4)); // æŠŠå¹³ç§»å‘é‡è®¾æˆ(1,3,4) cout &lt;&lt; &quot;Transform matrix = \\n&quot; &lt;&lt; T.matrix() &lt;&lt; endl; // ç”¨å˜æ¢çŸ©é˜µè¿›è¡Œåæ ‡å˜æ¢ Vector3d v_transformed = T * v; // ç›¸å½“äºR*v+t cout &lt;&lt; &quot;v tranformed = &quot; &lt;&lt; v_transformed.transpose() &lt;&lt; endl; // å¯¹äºä»¿å°„å’Œå°„å½±å˜æ¢ï¼Œä½¿ç”¨ Eigen::Affine3d å’Œ Eigen::Projective3d å³å¯ï¼Œç•¥ // å››å…ƒæ•° // å¯ä»¥ç›´æ¥æŠŠAngleAxisèµ‹å€¼ç»™å››å…ƒæ•°ï¼Œåä¹‹äº¦ç„¶ Quaterniond q = Quaterniond(rotation_vector); cout &lt;&lt; &quot;quaternion from rotation vector = &quot; &lt;&lt; q.coeffs().transpose() &lt;&lt; endl; // è¯·æ³¨æ„coeffsçš„é¡ºåºæ˜¯(x,y,z,w),wä¸ºå®éƒ¨ï¼Œå‰ä¸‰è€…ä¸ºè™šéƒ¨ // ä¹Ÿå¯ä»¥æŠŠæ—‹è½¬çŸ©é˜µèµ‹ç»™å®ƒ q = Quaterniond(rotation_matrix); cout &lt;&lt; &quot;quaternion from rotation matrix = &quot; &lt;&lt; q.coeffs().transpose() &lt;&lt; endl; // ä½¿ç”¨å››å…ƒæ•°æ—‹è½¬ä¸€ä¸ªå‘é‡ï¼Œä½¿ç”¨é‡è½½çš„ä¹˜æ³•å³å¯ v_rotated = q * v; // æ³¨æ„æ•°å­¦ä¸Šæ˜¯qvq^{-1} cout &lt;&lt; &quot;(1,0,0) after rotation = &quot; &lt;&lt; v_rotated.transpose() &lt;&lt; endl; // ç”¨å¸¸è§„å‘é‡ä¹˜æ³•è¡¨ç¤ºï¼Œåˆ™åº”è¯¥å¦‚ä¸‹è®¡ç®— cout &lt;&lt; &quot;should be equal to &quot; &lt;&lt; (q * Quaterniond(0, 1, 0, 0) * q.inverse()).coeffs().transpose() &lt;&lt; endl; return 0;} 123456789101112131415161718192021222324#include &lt;iostream&gt;#include &lt;vector&gt;#include &lt;algorithm&gt;#include &lt;Eigen/Core&gt;#include &lt;Eigen/Geometry&gt;using namespace std;using namespace Eigen;int main(int argc, char** argv) { Quaterniond q1(0.35, 0.2, 0.3, 0.1), q2(-0.5, 0.4, -0.1, 0.2); q1.normalize(); q2.normalize(); Vector3d t1(0.3, 0.1, 0.1), t2(-0.1, 0.5, 0.3); Vector3d p1(0.5, 0, 0.2); Isometry3d T1w(q1), T2w(q2); T1w.pretranslate(t1); T2w.pretranslate(t2); Vector3d p2 = T2w * T1w.inverse() * p1; cout &lt;&lt; endl &lt;&lt; p2.transpose() &lt;&lt; endl; return 0;}","link":"/2022/04/03/SLAM/ch3-%E4%B8%89%E7%BB%B4%E7%A9%BA%E9%97%B4%E7%9A%84%E5%88%9A%E4%BD%93%E8%BF%90%E5%8A%A8-%E7%AC%AC%E4%BA%8C%E9%83%A8%E5%88%86/"},{"title":"Ch5 ç›¸æœºå’Œå›¾åƒ","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦ä»‹ç»çš„æ˜¯è§†è§‰SLAMä¸­çš„ç›¸æœºå’Œå›¾åƒé—®é¢˜ï¼Œå…¶ä¸­ç›¸æœºä¸»è¦ä»‹ç»çš„æ˜¯ç®€å•çš„é’ˆå­”ç›¸æœºæ¨¡å‹ï¼Œä¹‹åä»‹ç»äº†ç•¸å˜çš„å½¢æˆï¼Œç„¶åä»‹ç»çš„RGBDç›¸æœºå’ŒåŒç›®ç›¸æœºçš„ç®€ç­”åŸç†ã€‚ ç›¸æœºæ¨¡å‹é’ˆå­”ç›¸æœºæ¨¡å‹ ç°å®ç”Ÿæ´»ä¸­å­˜åœ¨å¤§é‡çš„ç…§ç‰‡ ç…§ç‰‡è®°å½•äº†çœŸå®ä¸–ç•Œåœ¨æˆåƒå¹³é¢ä¸Šçš„æŠ•å½±ï¼› è¿™ä¸ªè¿‡ç¨‹ä¸¢å¼ƒäº†â€œè·ç¦»â€ç»´åº¦ä¸Šçš„ä¿¡æ¯ï¼› æ™®é€šç›¸æœºå¯ä»¥ç”¨é’ˆå­”æ¨¡å‹å¾ˆå¥½åœ°è¿‘ä¼¼ã€‚ å°å­”æˆåƒæ¨¡å‹ï¼Œå¦‚å›¾æ‰€ç¤ºï¼Œä¸»è¦çš„ä½ç½®ç‚¹æœ‰ç›¸æœºçš„ä¸­å¿ƒOï¼Œç„¦è·fï¼ŒçœŸå®ä¸–ç•Œçš„ç‚¹Pï¼Œä»¥åŠç›¸æœºæŠ•å½±ç‚¹Pâ€˜ã€‚ è¿™é‡ŒåŸå§‹çš„æˆåƒå…³ç³»ä¸ºï¼š \\dfrac Z f=-\\dfrac X {X'}=-\\dfrac Y {Y'} è¿™é‡Œæˆ‘ä»¬ä¸ºå¾ˆå®é™…çš„æƒ…å†µæ¥è½¨ï¼Œæˆ‘ä»¬å°†å…¶ç¬¦å·èˆå»ï¼Œç­‰ä»·çš„å§æˆåƒå¹³é¢å¯¹ç§°çš„æ”¾åˆ°ç›¸æœºçš„å‰æ–¹ï¼Œå’Œä¸‰ç»´çš„ç©ºé—´ç‚¹åœ¨åŒä¸€ä¾§ã€‚ \\dfrac Z f=\\dfrac X {X'}=\\dfrac Y {Y'} å°†ä¸Šé¢çš„å¼å­è¿›è¡Œæ•´ç†å¯å¾—ï¼š X^{\\prime}=f\\dfrac X Z\\\\ Y^{\\prime}=f\\dfrac Y Z\\\\ ä¸Šé¢fçš„å•ä½æ˜¯ç±³ï¼Œä½†æ˜¯å®é™…ä¸Šæˆ‘ä»¬çš„ç…§ç‰‡éƒ½æ˜¯ä»¥åƒç´ ä¸ºå•ä½çš„ï¼Œäºæ˜¯è¿™é‡Œæ¶‰åŠåˆ°åƒç´ åæ ‡çš„è½¬æ¢å…³ç³»ï¼Œäºæ˜¯å¼•å…¥ä¸¤ä¸ªåæ ‡ç³»ï¼š ä¸€ä¸ªæ˜¯ç‰©ç†ç©ºé—´çš„ç›¸æœºçš„åæ ‡ç³»O-X-Y ï¼Œå…¶åŸç‚¹å†å…‰å¿ƒOçš„ä½ç½®ï¼Œå¯¹åº”çš„æ˜¯ç›¸æœºåæ ‡$[X,Y]$å’Œæˆåƒçš„åæ ‡$[X^{\\prime},Y^{\\prime}]$ã€‚ å¦ä¸€ä¸ªæ˜¯åƒç´ ç©ºé—´çš„åƒç´ åæ ‡ç³»o-u-v ï¼Œå…¶åŸç‚¹ç…§ç‰‡çš„å·¦ä¸Šè§’oçš„ä½ç½®ï¼Œå¯¹åº”çš„åæ ‡ä¸º$[u,v]$ã€‚ åƒç´ åæ ‡ç³»å’ŒçœŸå®çš„ç‰©ç†åæ ‡ç³»ä¹‹é—´ç›¸å·®ä¸€ä¸ªç¼©æ”¾ï¼š \\left\\{ \\begin{array} &u=\\alpha X^{\\prime}+c_x\\\\ v=\\alpha Y^{\\prime}+c_y \\end{array}\\right.ç»§ç»­ä»£å…¥å¾—åˆ°çœŸå®ä¸–ç•Œçš„ç‰©ç†åæ ‡ï¼Œå°†$\\alpha f \\rightarrow f_x$ï¼Œ$\\beta f \\rightarrow f_y$ï¼Œ \\left\\{ \\begin{array} &u=f_x\\dfrac X Z+c_x\\\\ v=f_y\\dfrac X Z+c_y \\end{array}\\right.è¿™é‡Œ$f_x,f_y,c_x,c_y$çš„åƒç´ ï¼Œè½¬åŒ–ç§°ä¸ºé½æ¬¡åæ ‡å¯å¾—ï¼š \\left(\\begin{array}{l}u \\\\ v \\\\ 1\\end{array}\\right)=\\frac{1}{Z}\\left(\\begin{array}{ccc}f_{x} & 0 & c_{x} \\\\ 0 & f_{y} & c_{y} \\\\ 0 & 0 & 1\\end{array}\\right)\\left(\\begin{array}{l}X \\\\ Y \\\\ Z\\end{array}\\right) \\triangleq \\frac{1}{Z} \\boldsymbol{K} \\boldsymbol{P} å·¦ä¾§ä¸ºé½æ¬¡åæ ‡ï¼Œå³ä¾§ä¸ºéé½æ¬¡åæ ‡ã€‚ ä¸­é—´çš„çŸ©é˜µKä¸ºç›¸æœºçš„å†…å‚æ•°çŸ©é˜µï¼Œä¸€èˆ¬ç”Ÿäº§å‡ºå‚å°±æ˜¯ç»™å®šäº†ã€‚ å¯¹ç›¸ç‰‡è¿›è¡Œçš„ä¸€äº›å˜æ¢ï¼Œé‚£å°±æ˜¯ç›´æ¥å·¦å†…å‚çŸ©é˜µä¸Šè¿›è¡Œå³å¯ã€‚ ä¼ ç»Ÿçš„å†™æ³•æ˜¯å°†Zå†™åœ¨å‰é¢ï¼Œå› ä¸ºä¸ç®¡Zå†™åœ¨å“ªé‡Œï¼Œæ ¹æ®é½æ¬¡åæ ‡å…¬å¼ï¼Œæœ€åçš„æˆåƒç»“æœéƒ½æ˜¯åœ¨åŒä¸€ä¸ªä½ç½®ã€‚ æ”¹å˜Zæ—¶ï¼ŒæŠ•å½±ç‚¹ä»…ä¸ºåŒä¸€ä¸ªç‚¹ï¼Œå› æ­¤è¿˜åŸåªå¯ä»¥äº†è§£å…¶æŠ•å½±è·ç¦»ï¼Œä½†æ˜¯å…¶è·ç¦»ä¿¡æ¯æœªçŸ¥ã€‚ Z\\left(\\begin{array}{l}u \\\\ v \\\\ 1\\end{array}\\right)=\\left(\\begin{array}{ccc}f_{x} & 0 & c_{x} \\\\ 0 & f_{y} & c_{y} \\\\ 0 & 0 & 1\\end{array}\\right)\\left(\\begin{array}{l}X \\\\ Y \\\\ Z\\end{array}\\right) \\triangleq \\boldsymbol{K} \\boldsymbol{P} é™¤å†…å‚å¤–ï¼Œç›¸æœºåæ ‡ç³»ä¸ä¸–ç•Œåæ ‡ç³»è¿˜ç›¸å·®ä¸€ä¸ªå˜æ¢ï¼š Z \\boldsymbol{P}_{u v}=Z\\left[\\begin{array}{l}u \\\\ v \\\\ 1\\end{array}\\right]=\\boldsymbol{K}\\left(\\boldsymbol{R} \\boldsymbol{P}_{\\mathrm{w}}+\\boldsymbol{t}\\right)=\\boldsymbol{K} \\boldsymbol{T} \\boldsymbol{P}_{\\mathrm{w}}å…ˆæŠŠPä»ä¸–ç•Œåæ ‡å˜åˆ°ç›¸æœºåæ ‡ç³»ä¸‹ï¼Œæ­¤æ—¶è¿™é‡Œçš„$R,t$æˆ–è€…$T$ç§°ä¸ºç›¸æœºçš„å¤–å‚ï¼Œå†…å‚ä¸€èˆ¬æ ‡å®šåä¸å˜ï¼Œå¤–å‚ä¼šéšç€è¿åŠ¨ä¸æ–­å˜åŒ–ï¼Œå¤–å‚æ—¶SLAMä¼°è®¡çš„ç›®æ ‡ã€‚ æ³¨æ„ï¼Œå¼å­çš„å³ä¾§åŒ…å«äº†ä¸€ä¸ªéé½æ¬¡åˆ°é½æ¬¡çš„å˜æ¢ã€‚ $\\left(\\boldsymbol{R} \\boldsymbol{P}_{\\mathrm{w}}+\\boldsymbol{t}\\right) \\rightarrow [x,y,z]^T \\rightarrow [x/z,y/z,1]^T$ ä¸–ç•Œ$\\rightarrow$ç›¸æœº$\\rightarrow$å½’ä¸€åŒ–å¹³é¢$\\rightarrow$ åƒç´  ç›¸æœºçš„ç•¸å˜é€ æˆç•¸å˜çš„å‡ ä¸ªåŸå› ï¼š é€é•œè‡ªèº«çš„å½¢çŠ¶å¯¹å…‰çº¿ä¼ æ’­çš„å½±å“ï¼Œå¯¹åº”çš„æ˜¯å¾„å‘ç•¸å˜ã€‚ åœ¨æœºæ¢°ç»„è£…è¿‡ç¨‹ä¸­ï¼Œé€é•œå’Œæˆåƒå¹³é¢ä¸å¯èƒ½å®Œå…¨å¹³è¡Œï¼Œè¿™ä¹Ÿä¼šä½¿çš„å…‰çº¿ç©¿è¿‡é€é•œåˆ°æˆåƒé¢æ—¶çš„ä½ç½®å‘ç”Ÿå˜åŒ–ï¼Œå¯¹åº”çš„ç•¸å˜æ˜¯åˆ‡å‘ç•¸å˜ã€‚ å¾„å‘ç•¸å˜ï¼šä¸»è¦æœ‰ä¸¤ç§å½¢å¼ï¼Œæ¡¶å½¢ç•¸å˜å’Œæ•å½¢ç•¸å˜ã€‚ ä¸»è¦ç‰¹ç‚¹ï¼šè¶Šé è¿‘å›¾åƒçš„è¾¹ç¼˜å°±å˜å½¢è¶Šæ˜æ˜¾ï¼Œè¡¨ç°æ˜¯ä»ç›´çº¿å˜ä¸ºäº†æ›²çº¿ï¼Œç•¸å˜å‘ˆç°ä¸­å¿ƒå¯¹ç§°æ€§ã€‚ æ¡¶å½¢ç•¸å˜ï¼šéšç€ä¸å…‰è½´è·ç¦»çš„å¢åŠ ï¼Œæ”¾å¤§ç‡é€æ¸å‡å°‘ã€‚ æ•å½¢ç•¸å˜ï¼šéšç€ä¸å…‰è½´è·ç¦»çš„å‡å°ï¼Œæ”¾å¤§ç‡é€æ¸å˜å¤§ã€‚ å¯ä»¥çœ‹å‡ºï¼Œå››ä¸ªè§’çš„æ”¾å¤§ç‡è¦æ¯”ä¸­é—´çš„è¾¹ç¼˜å¤§/å°ï¼Œå› ä¸ºå…¶åˆ°å…‰è½´çš„è·ç¦»è¦æ¯”ä¸­é—´è¾¹ç¼˜å°ã€‚ åˆ‡å‘ç•¸å˜ï¼šå› ä¸ºé€é•œçš„å®‰è£…ä½ç½®é€ æˆçš„ã€‚ ç•¸å˜çš„æ•°å­¦è¡¨è¿° å¾„å‘ç•¸å˜çš„æ•°å­¦è¡¨è¿°å¦‚ä¸‹ï¼š x_{\\text {distorted }}=x\\left(1+k_{1} r^{2}+k_{2} r^{4}+k_{3} r^{6}\\right)\\\\y_{\\text {distorted }}=y\\left(1+k_{1} r^{2}+k_{2} r^{4}+k_{3} r^{6}\\right)å…¶ä¸­ï¼Œ$[x,y]^T$ è¡¨ç¤ºçš„æ˜¯å½’ä¸€åŒ–åæ ‡ç³»çš„ä¸Šçš„ä¸€ç‚¹ p ï¼Œ$[r,\\theta]$ è¡¨ç¤ºçš„æ˜¯pç‚¹åœ¨æåæ ‡çš„åæ ‡ï¼Œé€šå¸¸æˆ‘ä»¬ä½¿ç”¨å¤šé¡¹å¼æ¥è¿›è¡Œæ‹Ÿåˆã€‚ åˆ‡å‘ç•¸å˜çš„æ•°å­¦è¡¨è¾¾ï¼š x_{\\text {distorted }}=x+2 p_{1} x y+p_{2}\\left(r^{2}+2 x^{2}\\right)\\\\y_{\\text {distorted }}=y+p_{1}\\left(r^{2}+2 y^{2}\\right)+2 p_{2} x yå…¶ä¸­ï¼Œ$p_1,p_2$ ä¸ºä¿®æ­£ç³»æ•°ã€‚ å®é™…ä½¿ç”¨æ—¶ï¼Œæˆ‘ä»¬éœ€è¦5ä¸ªå‚æ•°å°±å¯ä»¥è¿›è¡Œä¿®æ­£ï¼š å°†ä¸‰ç»´ç©ºé—´ç‚¹æŠ•å½±åˆ°å½’ä¸€åŒ–å¹³é¢ã€‚è®¾å®ƒçš„å½’ä¸€åŒ–åæ ‡çš„ä¸º$[x,y]^T$ã€‚ å¯¹å½’ä¸€åŒ–çš„å¹³é¢ä¸Šçš„ç‚¹è¿›è¡Œè®¡ç®—å¾„å‘ç•¸å˜å’Œåˆ‡å‘ç•¸å˜ã€‚ \\left\\{\\begin{array}{l}x_{\\text {distorted }}=x\\left(1+k_{1} r^{2}+k_{2} r^{4}+k_{3} r^{6}\\right)+2 p_{1} x y+p_{2}\\left(r^{2}+2 x^{2}\\right) \\\\ y_{\\text {dstorted }}=y\\left(1+k_{1} r^{2}+k_{2} r^{4}+k_{3} r^{6}\\right)+p_{1}\\left(r^{2}+2 y^{2}\\right)+2 p_{2} x y\\end{array}\\right. å°†ç•¸å˜åçš„ç‚¹é€šè¿‡ç›¸æœºå†…å‚çŸ©é˜µæŠ•å½±åˆ°åƒç´ å¹³é¢ï¼Œå¾—åˆ°è¯¥ç‚¹åœ¨å›¾åƒä¸Šçš„æ­£ç¡®ä½ç½®ã€‚ \\left\\{ \\begin{array} &u=f_xx_{\\text {distorted }}+c_x\\\\ v=f_yy_{\\text {distorted }}+c_y \\end{array}\\right. å°ç»“ åŒç›®ç›¸æœºæ¨¡å‹åŸç†ï¼šé€šè¿‡ä¸¤ä¸ªç›¸æœºä¹‹é—´çš„è§†å·®æ¥ä¼°è®¡æ¯ä¸ªåƒç´ çš„æ·±åº¦ã€‚ åŒç›®ç›¸æœºçš„æˆåƒæ¨¡å‹ã€‚$O_L,O_R$ä¸ºå·¦å³å…‰åœˆä¸­å¿ƒï¼Œæ–¹æ¡†ä¸ºæˆåƒå¹³é¢ï¼Œf ä¸ºç„¦è·ã€‚$u_L$å’Œ$u_R$ä¸ºæˆåƒå¹³é¢çš„åæ ‡ã€‚è¯·æ³¨æ„ï¼ŒæŒ‰ç…§å›¾ä¸­åæ ‡å®šä¹‰ï¼Œ$u_R$åº”è¯¥æ˜¯è´Ÿæ•°ï¼Œæ‰€ä»¥å›¾ä¸­æ ‡å‡ºçš„è·ç¦»ä¸º$-u_R$ ã€‚ åœ¨å·¦å³åŒç›®ç›¸æœºä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä¸¤ä¸ªç›¸æœºéƒ½çœ‹ä½œé’ˆå­”ç›¸æœºã€‚å®ƒä»¬æ˜¯æ°´å¹³æ”¾ç½®çš„ï¼Œæ„å‘³ç€ä¸¤ä¸ªç›¸æœºçš„å…‰åœˆä¸­å¿ƒéƒ½ä½äºxè½´ä¸Šã€‚ä¸¤ä¸ªç›¸æœºçš„å…‰åœˆä¹‹é—´çš„è·ç¦»ç§°ä¸ºåŒç›®ç›¸æœºçš„åŸºçº¿ï¼ˆè®°ä½œb)ï¼Œæ˜¯åŒç›®ç›¸æœºçš„é‡è¦å‚æ•°ã€‚ æ ¹æ®å‡ ä½•å…³ç³»$\\triangle PP_LP_R \\ \\sim \\ \\triangle PO_LO_R$ å¯å¾—ï¼š \\dfrac {z-f}{z} = \\dfrac {b-u_L+u_R}{b} \\Rightarrow z=\\dfrac {fd}{d},d\\triangleq u_L- u_Rå…¶ä¸­då®šä¹‰ä¸ºå·¦å³å›¾çš„æ¨ªåæ ‡ä¹‹å·®ï¼Œç§°ä¸ºè§†å·®ã€‚ è§†å·®è¶Šå¤§çš„è·ç¦»è¶Šè¿‘ã€‚ ç”±äºæœ€å°è§†å·®ä¸ºä¸€ä¸ªåƒç´ ï¼Œäºæ˜¯åŒç›®ç›¸æœºçš„æ·±åº¦å­˜åœ¨ä¸€ä¸ªç†è®ºçš„æœ€å¤§å€¼ï¼Œç”±$fb$ æ¥ç¡®å®šã€‚ åŸºçº¿bè¶Šé•¿ï¼ŒåŒç›®å¯ä»¥æµ‹åˆ°çš„æœ€å¤§è·ç¦»å°±è¶Šè¿œã€‚ ä¸»è¦çš„å›°éš¾æ—¶ï¼Œå¦‚ä½•åˆ†è¾¨å·¦å›¾ä¸Šçš„æŸçš„ç‰¹å¾åœ¨å³å›¾çš„ä»€ä¹ˆä½ç½®ä¸Šé¢ï¼Œä¸€èˆ¬è¦ç”±å¾ˆå¥½çš„çº¹ç†ç‰¹å¾æ‰å¯ä»¥å®ç°ã€‚ RGBDç›¸æœºæ¨¡å‹RGBDç›¸æœºä¸»è¦æœ‰ä¸¤ç§ï¼Œä¸€ç§æ—¶åŸºäºçº¢å¤–ç»“æ„å…‰çš„ï¼Œå¦ä¸€ç§æ—¶åŸºäºé£è¡Œæ—¶é—´ToFçš„ï¼Œèµ·ä¸»è¦çš„åŸç†ä¸ºï¼š çº¢å¤–ç»“æ„å…‰çš„åŸç†ï¼šç»™å®šä¸€ç§å…·æœ‰ç‰¹å®šå½¢çŠ¶çš„å…‰ï¼Œå¦‚ç›´çº¿å½¢çŠ¶ï¼Œå½“å…¶ç…§å°„åˆ°ä¸€èˆ¬çš„åœ†æŸ±é¢å¹¶åå°„å›æ¥æ—¶ï¼Œä¼šå‡ºç°å½¢çŠ¶çš„æ”¹å˜ï¼Œé€šè¿‡å½¢çŠ¶çš„å˜åŒ–æƒ…å†µæ¥ç¡®å®šè·ç¦»ã€‚åå°„å‰åä¹‹é—´çš„å¯¹æ¯”éœ€è¦è®¡ç®—ã€‚ ToFçš„åŸç†ï¼šå…¶å®å’Œæ¿€å…‰ä¼ æ„Ÿå™¨ç±»ä¼¼ï¼Œéƒ½æ˜¯å‘å°„æ¿€å…‰ï¼Œæµ‹é‡è¿”å›æ—¶é—´è¿›è€Œæ ¹æ®è·ç¦»$d=2c\\Delta t$ æ¥è¿›è¡Œè®¡ç®—ã€‚ä¸åŒçš„æ˜¯ï¼ŒToFå‘å°„çš„æ˜¯é¢å…‰æºï¼Œè€Œæ¿€å…‰ä¼ æ„Ÿå™¨æ˜¯ç‚¹å…‰æºã€‚ ç›¸æœºåœ¨å‡ºå‚çš„æ—¶å€™ä¼šå°†äº§ç”Ÿçš„æ·±åº¦å›¾å’Œå½©è‰²å›¾è¿›è¡Œé…å¯¹å’Œæ ‡å®šã€‚ ä¹‹åæˆ‘ä»¬å¯ä»¥å¯¹å›¾åƒè¯»å–å™¨å½©è‰²å’Œæ·±åº¦ä¿¡æ¯ï¼Œè®¡ç®—å…¶åƒç´ çš„3Dä½ç½®ï¼Œç”Ÿæˆç‚¹äº‘æ•°æ®ã€‚ RGBDç›¸æœºçš„ç¼ºç‚¹ï¼š å¯¹ç¯å¢ƒçš„è¦æ±‚æ¯”è¾ƒé«˜ï¼Œåªèƒ½åœ¨å®¤å†…ä½¿ç”¨ï¼Œå› ä¸ºæ—¥å…‰å’Œå…¶ä»–çš„ä¼ æ„Ÿå™¨ä¼šäº’ç›¸å¹²æ‰°ã€‚ å¯¹äºé€æ˜æè´¨ï¼Œå¦‚ç»ç’ƒä¼šé€å°„åå°„å…‰ï¼Œå’Œä¸€äº›ä¼šå¸æ”¶åå°„å…‰çš„ææ–™ï¼Œæ˜¯æ— æ³•æµ‹åˆ°å…¶ç‚¹äº‘æ•°æ®çš„ã€‚ å›¾åƒå¦‚æœæœ‰è¿‡ä½¿ç”¨OpencvåŸºç¡€çš„ï¼Œæœ¬èŠ‚çš„å†…å®¹å°†ä¼šç®€å•ã€‚ é¦–å…ˆï¼Œç›¸æœºåœ¨æˆå®Œåƒä¹‹åå°±ç”Ÿæˆçš„å›¾åƒã€‚ ä¹‹åï¼Œå°±æ˜¯å›¾åƒçš„å­˜å‚¨ï¼Œä¸€èˆ¬å›¾åƒåœ¨è®¡ç®—æœºä¸­çš„å‚¨å­˜å½¢å¼ä¸ºäºŒç»´æ•°ç»„çš„å½¢å¼ã€‚ å¯¹äºä¸€ä¸ªç°åº¦å›¾æ¥è¯´ï¼Œ$I(x,y)$è¡¨ç¤ºxåˆ—yè¡Œçš„åƒç´ å¯¹äºçš„ç°åº¦ï¼Œæœ‰8ä½ã€‚ æ³¨æ„ X -&gt; åˆ—æ•° -&gt; å®½åº¦ï¼ŒY -&gt; è¡Œæ•° -&gt; é«˜åº¦ã€‚ å¯¹äºæ·±åº¦å›¾æ¥è¯´ï¼Œæ¯ä¸ªä½ç½®ä¸Šçš„å­˜å‚¨é‡ä¸è¶³ï¼Œå› æ­¤è¦æ‰©å¤§å­˜å‚¨é‡åˆ°16ä½ã€‚ å¯¹äºå½©è‰²å›¾æ¥è¯´ï¼Œæœ‰ä¸‰ä¸ªé€šé“RGBï¼Œéœ€è¦24ä½ã€‚ éœ€è¦å¯¹æ„Ÿå…‰åº¦é‡åŒ–æˆæ•°å€¼ï¼Œä¾‹å¦‚0~255ä¹‹é—´çš„æ•´æ•°ï¼ˆå½©è‰²å›¾åƒè¿˜æœ‰é€šé“ï¼‰ å­˜å‚¨å›¾åƒï¼Œé¦–å…ˆè®°ä½æ¯ä¸ªåƒç´ çš„å…·ä½“ä½æ•°ï¼Œå…¶æ¬¡è®°ä½æ¯ä¸ªåƒç´ çš„RGBDAçš„æ’åˆ—æ–¹å¼ã€‚ ä»£ç å®è·µOpencvçš„å®‰è£…1sudo apt-get ... ä½¿ç”¨apt-getå®‰è£…ï¼Œé€Ÿåº¦å¾ˆå¿«ï¼Œä½†æ˜¯ç¼ºç‚¹æ˜¯ï¼š å…¶ä¸€æ˜¯ç‰ˆæœ¬å¯èƒ½å—åˆ°ç³»ç»Ÿçš„é™åˆ¶ä¼šå¾ˆè€ï¼Œä¸æ˜¯æœ€æ–°ç‰ˆï¼› å…¶äºŒå°±æ˜¯apt-getæ˜¯å°†æºç ç›´æ¥ç¼–è¯‘å¥½äº†æ¥ç”¨çš„ï¼Œæ²¡æœ‰æºæ–‡ä»¶ï¼Œåªæœ‰ç”Ÿæˆå¥½çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚ ä½¿ç”¨sourseæ¥å®‰è£…ï¼Œæœ€åä¿å­˜çš„ä½ç½®æ˜¯è‡ªå·±å®šä¹‰æ–‡ä»¶çš„ä½ç½®ï¼Œè€Œapt-getä¿å­˜åˆ°ç³»ç»ŸæŒ‡å®šçš„ä½ç½®å»äº†ã€‚https://opencv.org/releases/ åˆ°Opencvçš„å®˜ç½‘ä¸Šä¸‹è½½æºä»£ç ï¼Œç„¶åè‡ªå·±cmakeï¼Œä¹‹åå†make -j4. ç¼ºç‚¹å°±æ˜¯ç¼–è¯‘æ—¶é—´è¿‡äºçš„é•¿ã€‚ ç›¸å…³çš„å‚è€ƒèµ„æ–™ï¼šhttps://docs.opencv.org/4.5.4/d9/df8/tutorial_root.html å®è·µä¹‹å‰é¦–å…ˆæ”¹å¥½CMakeList.txtæ–‡ä»¶ 123456789project(imageBasics)add_executable(imageBasics imageBasics.cpp)# é“¾æ¥OpenCVåº“target_link_libraries(imageBasics ${OpenCV_LIBS})add_executable(undistortImage undistortImage.cpp)# é“¾æ¥OpenCVåº“target_link_libraries(undistortImage ${OpenCV_LIBS}) å®è·µ1ï¼šå›¾ç‰‡çš„è¯»å–123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869#include &lt;iostream&gt;#include &lt;chrono&gt;using namespace std;#include &lt;opencv2/core/core.hpp&gt;#include &lt;opencv2/highgui/highgui.hpp&gt;int main(int argc, char **argv) { // è¯»å–argv[1]æŒ‡å®šçš„å›¾åƒ cv::Mat image; image = cv::imread(argv[1]); //cv::imreadå‡½æ•°è¯»å–æŒ‡å®šè·¯å¾„ä¸‹çš„å›¾åƒ // åˆ¤æ–­å›¾åƒæ–‡ä»¶æ˜¯å¦æ­£ç¡®è¯»å– if (image.data == nullptr) { //æ•°æ®ä¸å­˜åœ¨,å¯èƒ½æ˜¯æ–‡ä»¶ä¸å­˜åœ¨ cerr &lt;&lt; &quot;æ–‡ä»¶&quot; &lt;&lt; argv[1] &lt;&lt; &quot;ä¸å­˜åœ¨.&quot; &lt;&lt; endl; return 0; } // æ–‡ä»¶é¡ºåˆ©è¯»å–, é¦–å…ˆè¾“å‡ºä¸€äº›åŸºæœ¬ä¿¡æ¯ cout &lt;&lt; &quot;å›¾åƒå®½ä¸º&quot; &lt;&lt; image.cols &lt;&lt; &quot;,é«˜ä¸º&quot; &lt;&lt; image.rows &lt;&lt; &quot;,é€šé“æ•°ä¸º&quot; &lt;&lt; image.channels() &lt;&lt; endl; cv::imshow(&quot;image&quot;, image); // ç”¨cv::imshowæ˜¾ç¤ºå›¾åƒ cv::waitKey(0); // æš‚åœç¨‹åº,ç­‰å¾…ä¸€ä¸ªæŒ‰é”®è¾“å…¥ // åˆ¤æ–­imageçš„ç±»å‹ if (image.type() != CV_8UC1 &amp;&amp; image.type() != CV_8UC3) { // å›¾åƒç±»å‹ä¸ç¬¦åˆè¦æ±‚ cout &lt;&lt; &quot;è¯·è¾“å…¥ä¸€å¼ å½©è‰²å›¾æˆ–ç°åº¦å›¾.&quot; &lt;&lt; endl; return 0; } // éå†å›¾åƒ, è¯·æ³¨æ„ä»¥ä¸‹éå†æ–¹å¼äº¦å¯ä½¿ç”¨äºéšæœºåƒç´ è®¿é—® // ä½¿ç”¨ std::chrono æ¥ç»™ç®—æ³•è®¡æ—¶ chrono::steady_clock::time_point t1 = chrono::steady_clock::now(); for (size_t y = 0; y &lt; image.rows; y++) { // ç”¨cv::Mat::ptrè·å¾—å›¾åƒçš„è¡ŒæŒ‡é’ˆ unsigned char *row_ptr = image.ptr&lt;unsigned char&gt;(y); // row_ptræ˜¯ç¬¬yè¡Œçš„å¤´æŒ‡é’ˆ for (size_t x = 0; x &lt; image.cols; x++) { // è®¿é—®ä½äº x,y å¤„çš„åƒç´  unsigned char *data_ptr = &amp;row_ptr[x * image.channels()]; // data_ptr æŒ‡å‘å¾…è®¿é—®çš„åƒç´ æ•°æ® // è¾“å‡ºè¯¥åƒç´ çš„æ¯ä¸ªé€šé“,å¦‚æœæ˜¯ç°åº¦å›¾å°±åªæœ‰ä¸€ä¸ªé€šé“ for (int c = 0; c != image.channels(); c++) { unsigned char data = data_ptr[c]; // dataä¸ºI(x,y)ç¬¬cä¸ªé€šé“çš„å€¼ } } } chrono::steady_clock::time_point t2 = chrono::steady_clock::now(); chrono::duration&lt;double&gt; time_used = chrono::duration_cast &lt; chrono::duration &lt; double &gt;&gt; (t2 - t1); cout &lt;&lt; &quot;éå†å›¾åƒç”¨æ—¶ï¼š&quot; &lt;&lt; time_used.count() &lt;&lt; &quot; ç§’ã€‚&quot; &lt;&lt; endl; // å…³äº cv::Mat çš„æ‹·è´ // ç›´æ¥èµ‹å€¼å¹¶ä¸ä¼šæ‹·è´æ•°æ® cv::Mat image_another = image; // ä¿®æ”¹ image_another ä¼šå¯¼è‡´ image å‘ç”Ÿå˜åŒ– image_another(cv::Rect(0, 0, 100, 100)).setTo(0); // å°†å·¦ä¸Šè§’100*100çš„å—ç½®é›¶ cv::imshow(&quot;image&quot;, image); cv::waitKey(0); // ä½¿ç”¨cloneå‡½æ•°æ¥æ‹·è´æ•°æ® cv::Mat image_clone = image.clone(); image_clone(cv::Rect(0, 0, 100, 100)).setTo(255); cv::imshow(&quot;image&quot;, image); cv::imshow(&quot;image_clone&quot;, image_clone); cv::waitKey(0); // å¯¹äºå›¾åƒè¿˜æœ‰å¾ˆå¤šåŸºæœ¬çš„æ“ä½œ,å¦‚å‰ªåˆ‡,æ—‹è½¬,ç¼©æ”¾ç­‰,é™äºç¯‡å¹…å°±ä¸ä¸€ä¸€ä»‹ç»äº†,è¯·å‚çœ‹OpenCVå®˜æ–¹æ–‡æ¡£æŸ¥è¯¢æ¯ä¸ªå‡½æ•°çš„è°ƒç”¨æ–¹æ³•. cv::destroyAllWindows(); return 0;} å®è·µ2ï¼šç•¸å˜å»é™¤123456789101112131415161718192021222324252627282930313233343536373839404142434445#include &lt;opencv2/opencv.hpp&gt;#include &lt;string&gt;using namespace std;string image_file = &quot;./distorted.png&quot;; // è¯·ç¡®ä¿è·¯å¾„æ­£ç¡®int main(int argc, char **argv) { // æœ¬ç¨‹åºå®ç°å»ç•¸å˜éƒ¨åˆ†çš„ä»£ç ã€‚å°½ç®¡æˆ‘ä»¬å¯ä»¥è°ƒç”¨OpenCVçš„å»ç•¸å˜ï¼Œä½†è‡ªå·±å®ç°ä¸€éæœ‰åŠ©äºç†è§£ã€‚ // ç•¸å˜å‚æ•° double k1 = -0.28340811, k2 = 0.07395907, p1 = 0.00019359, p2 = 1.76187114e-05; // å†…å‚ double fx = 458.654, fy = 457.296, cx = 367.215, cy = 248.375; cv::Mat image = cv::imread(image_file, 0); // å›¾åƒæ˜¯ç°åº¦å›¾ï¼ŒCV_8UC1 int rows = image.rows, cols = image.cols; cv::Mat image_undistort = cv::Mat(rows, cols, CV_8UC1); // å»ç•¸å˜ä»¥åçš„å›¾ // è®¡ç®—å»ç•¸å˜åå›¾åƒçš„å†…å®¹ for (int v = 0; v &lt; rows; v++) { for (int u = 0; u &lt; cols; u++) { // æŒ‰ç…§å…¬å¼ï¼Œè®¡ç®—ç‚¹(u,v)å¯¹åº”åˆ°ç•¸å˜å›¾åƒä¸­çš„åæ ‡(u_distorted, v_distorted) double x = (u - cx) / fx, y = (v - cy) / fy; double r = sqrt(x * x + y * y); double x_distorted = x * (1 + k1 * r * r + k2 * r * r * r * r) + 2 * p1 * x * y + p2 * (r * r + 2 * x * x); double y_distorted = y * (1 + k1 * r * r + k2 * r * r * r * r) + p1 * (r * r + 2 * y * y) + 2 * p2 * x * y; double u_distorted = fx * x_distorted + cx; double v_distorted = fy * y_distorted + cy; // èµ‹å€¼ (æœ€è¿‘é‚»æ’å€¼) if (u_distorted &gt;= 0 &amp;&amp; v_distorted &gt;= 0 &amp;&amp; u_distorted &lt; cols &amp;&amp; v_distorted &lt; rows) { image_undistort.at&lt;uchar&gt;(v, u) = image.at&lt;uchar&gt;((int) v_distorted, (int) u_distorted); } else { image_undistort.at&lt;uchar&gt;(v, u) = 0; } } } // ç”»å›¾å»ç•¸å˜åå›¾åƒ cv::imshow(&quot;distorted&quot;, image); cv::imshow(&quot;undistorted&quot;, image_undistort); cv::waitKey(); return 0;} å®è·µ3ï¼šåŒç›®ç›¸æœºçš„æ‹¼æ¥123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101#include &lt;opencv2/opencv.hpp&gt;#include &lt;vector&gt;#include &lt;string&gt;#include &lt;Eigen/Core&gt;#include &lt;pangolin/pangolin.h&gt;#include &lt;unistd.h&gt;using namespace std;using namespace Eigen;// æ–‡ä»¶è·¯å¾„string left_file = &quot;./left.png&quot;;string right_file = &quot;./right.png&quot;;// åœ¨pangolinä¸­ç”»å›¾ï¼Œå·²å†™å¥½ï¼Œæ— éœ€è°ƒæ•´void showPointCloud( const vector&lt;Vector4d, Eigen::aligned_allocator&lt;Vector4d&gt;&gt; &amp;pointcloud);int main(int argc, char **argv) { // å†…å‚ double fx = 718.856, fy = 718.856, cx = 607.1928, cy = 185.2157; // åŸºçº¿ double b = 0.573; // è¯»å–å›¾åƒ cv::Mat left = cv::imread(left_file, 0); cv::Mat right = cv::imread(right_file, 0); cv::Ptr&lt;cv::StereoSGBM&gt; sgbm = cv::StereoSGBM::create( 0, 96, 9, 8 * 9 * 9, 32 * 9 * 9, 1, 63, 10, 100, 32); // ç¥å¥‡çš„å‚æ•° cv::Mat disparity_sgbm, disparity; sgbm-&gt;compute(left, right, disparity_sgbm); disparity_sgbm.convertTo(disparity, CV_32F, 1.0 / 16.0f); // ç”Ÿæˆç‚¹äº‘ vector&lt;Vector4d, Eigen::aligned_allocator&lt;Vector4d&gt;&gt; pointcloud; // å¦‚æœä½ çš„æœºå™¨æ…¢ï¼Œè¯·æŠŠåé¢çš„v++å’Œu++æ”¹æˆv+=2, u+=2 for (int v = 0; v &lt; left.rows; v++) for (int u = 0; u &lt; left.cols; u++) { if (disparity.at&lt;float&gt;(v, u) &lt;= 0.0 || disparity.at&lt;float&gt;(v, u) &gt;= 96.0) continue; Vector4d point(0, 0, 0, left.at&lt;uchar&gt;(v, u) / 255.0); // å‰ä¸‰ç»´ä¸ºxyz,ç¬¬å››ç»´ä¸ºé¢œè‰² // æ ¹æ®åŒç›®æ¨¡å‹è®¡ç®— point çš„ä½ç½® double x = (u - cx) / fx; double y = (v - cy) / fy; double depth = fx * b / (disparity.at&lt;float&gt;(v, u)); point[0] = x * depth; point[1] = y * depth; point[2] = depth; pointcloud.push_back(point); } cv::imshow(&quot;disparity&quot;, disparity / 96.0); cv::waitKey(0); // ç”»å‡ºç‚¹äº‘ showPointCloud(pointcloud); return 0;}void showPointCloud(const vector&lt;Vector4d, Eigen::aligned_allocator&lt;Vector4d&gt;&gt; &amp;pointcloud) { if (pointcloud.empty()) { cerr &lt;&lt; &quot;Point cloud is empty!&quot; &lt;&lt; endl; return; } pangolin::CreateWindowAndBind(&quot;Point Cloud Viewer&quot;, 1024, 768); glEnable(GL_DEPTH_TEST); glEnable(GL_BLEND); glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); pangolin::OpenGlRenderState s_cam( pangolin::ProjectionMatrix(1024, 768, 500, 500, 512, 389, 0.1, 1000), pangolin::ModelViewLookAt(0, -0.1, -1.8, 0, 0, 0, 0.0, -1.0, 0.0) ); pangolin::View &amp;d_cam = pangolin::CreateDisplay() .SetBounds(0.0, 1.0, pangolin::Attach::Pix(175), 1.0, -1024.0f / 768.0f) .SetHandler(new pangolin::Handler3D(s_cam)); while (pangolin::ShouldQuit() == false) { glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); d_cam.Activate(s_cam); glClearColor(1.0f, 1.0f, 1.0f, 1.0f); glPointSize(2); glBegin(GL_POINTS); for (auto &amp;p: pointcloud) { glColor3f(p[3], p[3], p[3]); glVertex3d(p[0], p[1], p[2]); } glEnd(); pangolin::FinishFrame(); usleep(5000); // sleep 5 ms } return;} å®è·µ4ï¼šRGBD123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117#include &lt;iostream&gt;#include &lt;fstream&gt;#include &lt;opencv2/opencv.hpp&gt;#include &lt;boost/format.hpp&gt; // for formating strings#include &lt;pangolin/pangolin.h&gt;#include &lt;sophus/se3.hpp&gt;using namespace std;typedef vector&lt;Sophus::SE3d, Eigen::aligned_allocator&lt;Sophus::SE3d&gt;&gt; TrajectoryType;typedef Eigen::Matrix&lt;double, 6, 1&gt; Vector6d;// åœ¨pangolinä¸­ç”»å›¾ï¼Œå·²å†™å¥½ï¼Œæ— éœ€è°ƒæ•´void showPointCloud( const vector&lt;Vector6d, Eigen::aligned_allocator&lt;Vector6d&gt;&gt; &amp;pointcloud);int main(int argc, char **argv) { vector&lt;cv::Mat&gt; colorImgs, depthImgs; // å½©è‰²å›¾å’Œæ·±åº¦å›¾ TrajectoryType poses; // ç›¸æœºä½å§¿ ifstream fin(&quot;./pose.txt&quot;); if (!fin) { cerr &lt;&lt; &quot;è¯·åœ¨æœ‰pose.txtçš„ç›®å½•ä¸‹è¿è¡Œæ­¤ç¨‹åº&quot; &lt;&lt; endl; return 1; } for (int i = 0; i &lt; 5; i++) { boost::format fmt(&quot;./%s/%d.%s&quot;); //å›¾åƒæ–‡ä»¶æ ¼å¼ colorImgs.push_back(cv::imread((fmt % &quot;color&quot; % (i + 1) % &quot;png&quot;).str())); depthImgs.push_back(cv::imread((fmt % &quot;depth&quot; % (i + 1) % &quot;pgm&quot;).str(), -1)); // ä½¿ç”¨-1è¯»å–åŸå§‹å›¾åƒ double data[7] = {0}; for (auto &amp;d:data) fin &gt;&gt; d; Sophus::SE3d pose(Eigen::Quaterniond(data[6], data[3], data[4], data[5]), Eigen::Vector3d(data[0], data[1], data[2])); poses.push_back(pose); } // è®¡ç®—ç‚¹äº‘å¹¶æ‹¼æ¥ // ç›¸æœºå†…å‚ double cx = 325.5; double cy = 253.5; double fx = 518.0; double fy = 519.0; double depthScale = 1000.0; vector&lt;Vector6d, Eigen::aligned_allocator&lt;Vector6d&gt;&gt; pointcloud; pointcloud.reserve(1000000); for (int i = 0; i &lt; 5; i++) { cout &lt;&lt; &quot;è½¬æ¢å›¾åƒä¸­: &quot; &lt;&lt; i + 1 &lt;&lt; endl; cv::Mat color = colorImgs[i]; cv::Mat depth = depthImgs[i]; Sophus::SE3d T = poses[i]; for (int v = 0; v &lt; color.rows; v++) for (int u = 0; u &lt; color.cols; u++) { unsigned int d = depth.ptr&lt;unsigned short&gt;(v)[u]; // æ·±åº¦å€¼ if (d == 0) continue; // ä¸º0è¡¨ç¤ºæ²¡æœ‰æµ‹é‡åˆ° Eigen::Vector3d point; point[2] = double(d) / depthScale; point[0] = (u - cx) * point[2] / fx; point[1] = (v - cy) * point[2] / fy; Eigen::Vector3d pointWorld = T * point; Vector6d p; p.head&lt;3&gt;() = pointWorld; p[5] = color.data[v * color.step + u * color.channels()]; // blue p[4] = color.data[v * color.step + u * color.channels() + 1]; // green p[3] = color.data[v * color.step + u * color.channels() + 2]; // red pointcloud.push_back(p); } } cout &lt;&lt; &quot;ç‚¹äº‘å…±æœ‰&quot; &lt;&lt; pointcloud.size() &lt;&lt; &quot;ä¸ªç‚¹.&quot; &lt;&lt; endl; showPointCloud(pointcloud); return 0;}void showPointCloud(const vector&lt;Vector6d, Eigen::aligned_allocator&lt;Vector6d&gt;&gt; &amp;pointcloud) { if (pointcloud.empty()) { cerr &lt;&lt; &quot;Point cloud is empty!&quot; &lt;&lt; endl; return; } pangolin::CreateWindowAndBind(&quot;Point Cloud Viewer&quot;, 1024, 768); glEnable(GL_DEPTH_TEST); glEnable(GL_BLEND); glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); pangolin::OpenGlRenderState s_cam( pangolin::ProjectionMatrix(1024, 768, 500, 500, 512, 389, 0.1, 1000), pangolin::ModelViewLookAt(0, -0.1, -1.8, 0, 0, 0, 0.0, -1.0, 0.0) ); pangolin::View &amp;d_cam = pangolin::CreateDisplay() .SetBounds(0.0, 1.0, pangolin::Attach::Pix(175), 1.0, -1024.0f / 768.0f) .SetHandler(new pangolin::Handler3D(s_cam)); while (pangolin::ShouldQuit() == false) { glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); d_cam.Activate(s_cam); glClearColor(1.0f, 1.0f, 1.0f, 1.0f); glPointSize(2); glBegin(GL_POINTS); for (auto &amp;p: pointcloud) { glColor3d(p[3] / 255.0, p[4] / 255.0, p[5] / 255.0); glVertex3d(p[0], p[1], p[2]); } glEnd(); pangolin::FinishFrame(); usleep(5000); // sleep 5 ms } return;}","link":"/2022/04/03/SLAM/ch5-%E7%9B%B8%E6%9C%BA%E5%92%8C%E5%9B%BE%E5%83%8F/"},{"title":"Ch6 éçº¿æ€§ä¼˜åŒ– åŸºç¡€ç†è®ºéƒ¨åˆ†","text":"hljs.initHighlightingOnLoad(); åœ¨ä¹‹å‰ch3ã€ch4ä¸­ï¼Œä¸»è¦ä»‹ç»äº†è¿åŠ¨æ–¹ç¨‹çš„å…·ä½“çš„å½¢å¼ï¼Œä¹‹åçš„ch5ä¸­ä¸»è¦åŸºäºé’ˆå­”ç›¸æœºæ¨¡å‹å»ºç«‹äº†ä¸€ç§è§‚æµ‹æ¨¡å‹ï¼Œæ—¢ç„¶ä¸¤ä¸ªæ¨¡å‹éƒ½å·²ç»å»ºç«‹å®Œæ•´ã€‚ \\boldsymbol x_{k+1}=f(\\boldsymbol x_k,\\boldsymbol u_k,\\boldsymbol \\omega_k) \\\\ \\boldsymbol z_{k,j}=h(\\boldsymbol x_k,\\boldsymbol y_j,\\boldsymbol v_{k,j})äºæ˜¯æœ¬è®²å¼€å§‹ä¸»è¦ä»‹ç»å¦‚ä½•å¯¹éçº¿æ€§çš„çŠ¶æ€ç©ºé—´è¿›è¡ŒçŠ¶æ€ä¼°è®¡ï¼Œä½†æ˜¯ç”±äºå™ªå£°çš„å½±å“ï¼Œå¯¹äºçŠ¶æ€çš„ä¼°è®¡éœ€è¦ä¸€å®šçš„ä¼˜åŒ–çš„åŸºç¡€ï¼Œå› æ­¤æœ¬èŠ‚ä¸»è¦ä»‹ç»éçº¿æ€§ä¼˜åŒ–ä»¥åŠçŠ¶æ€ä¼°è®¡çš„å†…å®¹ï¼Œå¹¶ä¸”ä»‹ç»ä¸¤ä¸ªåœ¨éçº¿æ€§ä¼˜åŒ–ä¸­æ¯”è¾ƒå¸¸ç”¨çš„ä¸¤ä¸ªåº“ï¼ŒCereså’Œg2oåº“ã€‚ çŠ¶æ€ä¼°è®¡é—®é¢˜æ‰¹é‡ä¼°è®¡å’Œæœ€å¤§åéªŒä¼°è®¡é—®é¢˜è¡¨è¿°é¦–å…ˆï¼Œæˆ‘ä»¬å›é¡¾ç¬¬äºŒè®²ä¸­é‚£ä¸ªç»å…¸çš„SLAMæ¨¡å‹ï¼Œç”±ä¸€ä¸ªè¿åŠ¨æ–¹ç¨‹å’Œä¸€ä¸ªè§‚æµ‹æ–¹ç¨‹ç»„æˆï¼š \\boldsymbol x_{k+1}=f(\\boldsymbol x_k,\\boldsymbol u_k)+\\boldsymbol \\omega_k \\\\ \\boldsymbol z_{k,j}=h(\\boldsymbol x_k,\\boldsymbol y_j)+\\boldsymbol v_{k,j}å…¶ä¸­ï¼Œè¿™é‡Œçš„ $\\boldsymbol x_k$ ä»£è¡¨ç›¸æœºçš„çœŸå®ä½å§¿ï¼Œä¸€èˆ¬ä½¿ç”¨$SE(3)$ æ¥è¡¨ç¤ºï¼Œè¿åŠ¨æ–¹ç¨‹å…¶å®å¯¹äºè§†è§‰SLAMæ¥è¯´ï¼Œéƒ½ä¸€èˆ¬çš„æ–¹ç¨‹å·®ä¸å¤šï¼Œæš‚æ—¶ä¹¦é‡Œä¹Ÿæ²¡è¯´å¤ªè¯¦ç»†ã€‚ è§‚æµ‹æ–¹ç¨‹å°±é’ˆå­”æ¨¡å‹çš„æ–¹ç¨‹ï¼Œè¿™é‡Œå‡è®¾ $\\boldsymbol x_k$ å¤„å¯¹è·¯æ ‡çš„ $\\boldsymbol y_j$ è¿›è¡Œä¸€æ¬¡è§‚æµ‹ï¼Œå¯¹äºåœ¨å›¾åƒä¸Šçš„ä½ç½®$\\boldsymbol z_{k,j}$ ï¼Œæ­¤æ—¶è§‚æµ‹æ–¹ç¨‹ä¸ºï¼š s\\boldsymbol z_{k,j}=\\boldsymbol K(\\boldsymbol R_k \\boldsymbol y_j+\\boldsymbol t_k)å…¶ä¸­ï¼Œè¿™é‡Œçš„é€šè¿‡ç¬¬äº”è®²å¯çŸ¥æ˜¯ä¸ªå½’ä¸€åŒ–çš„å‚æ•°(ç¬¬äº”è®²ä¸­æ˜¯Zï¼Œä½†æ˜¯è¿™é‡ŒZå·²ç»ç”¨è¿‡äº†ï¼Œå°±ç”¨s)ã€‚Kæ˜¯å†…å‚çŸ©é˜µã€‚ å¯¹äºä¸Šè¿°çš„é—®é¢˜æœ‰ä¸¤ç§å¯èƒ½çš„æƒ…å†µï¼š æœ€ç®€å•çš„æƒ…å†µï¼šçº¿æ€§ç³»ç»Ÿï¼Œé«˜æ–¯å™ªå£°ï¼›kalmen filter å¯ä»¥å¾ˆå¥½çš„è§£å†³è¿™ä¸€ç±»çš„é—®é¢˜ã€‚ å¤æ‚çš„æƒ…å†µï¼šéçº¿æ€§ç³»ç»Ÿï¼Œéé«˜æ–¯å™ªå£°ï¼›è¿™ä¸ªé—®é¢˜å¾ˆéš¾è§£å†³ï¼Œä½†ä¹Ÿæœ€è´´è¿‘æœ€çœŸå®çš„æƒ…å†µï¼Œè€Œä¸”æ§åˆ¶ä¸“ä¸šä¼šè®²è§£è¿™é‡ŒåŒ…å«çš„å¾ˆå¤šçš„æƒ…å†µã€‚ ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè¿˜æ˜¯å‡è®¾ä¸¤ä¸ªçš„å™ªå£°æ»¡è¶³é«˜æ–¯åˆ†å¸ƒï¼š \\boldsymbol \\omega_k \\sim \\mathcal N(\\boldsymbol 0,\\boldsymbol R_k)\\ ,\\boldsymbol v_k \\sim \\mathcal N(\\boldsymbol 0,\\boldsymbol Q_{k,j}), å› æ­¤çŠ¶æ€ä¼°è®¡é—®é¢˜å°±æ˜¯é€šè¿‡å¸¦æœ‰å™ªå£°çš„æ•°æ®$\\boldsymbol z, \\boldsymbol u$æ¥ä¼°è®¡ä½å§¿$\\boldsymbol x$ å’Œåœ°å›¾$\\boldsymbol y$ ã€‚ æ±‚è§£æ–¹æ³•ä¸»è¦çš„æ±‚è§£æ–¹æ³•ç”±ä¸¤ç§ï¼Œä¸€ä¸ªæ˜¯å¢é‡(incremental)çš„æ–¹æ³•ï¼Œå¦ä¸€ä¸ªæ˜¯æ‰¹é‡(batch)çš„æ–¹æ³•ã€‚ å¢é‡æ³•åˆå«æ»¤æ³¢å™¨ï¼Œå…¶æ»¡è¶³ç»„é©¬å°”å¯å¤«æ€§(å…¶å®å¡å°”æ›¼æ»¤æ³¢å™¨å°±æ˜¯çº¿æ€§é«˜æ–¯æ¨¡å‹ï¼Œå°±æ˜¯HMMéšé©¬å°”å¯å¤«æ¨¡å‹)ï¼Œç°åœ¨ç”¨çš„æ¯”è¾ƒå°‘äº†ã€‚ æ‰¹é‡æ³•å°±æ˜¯é€šè¿‡æ”’æ•°æ®ï¼Œä¸€èµ·å¤„ç†ï¼Œé¢„æµ‹çš„æ˜¯è¿™ä¸€æ®µæ—¶é—´å†…çš„æƒ…å†µã€‚æç«¯æƒ…å†µå°±æ˜¯sfmé‡Œï¼Œå°†å°†æ‰€æœ‰çš„æƒ…å†µå…¨éƒ¨å–å®Œä¹‹åå†è¿›è¡Œä¼°è®¡ã€‚ ä½†æ˜¯SLAMè¿˜æ˜¯è¦ä¸€å®šçš„å®æ—¶æ€§ï¼Œå› æ­¤é‡‡å–æ»‘åŠ¨çª—å£æ³•ï¼Œå¯¹å½“å‰æ—¶åˆ»ä¸€å®šçš„å†å²æ•°æ®è¿›è¡Œä¼˜åŒ–ã€‚ ä¸‹é¢ä¸»è¦ä»‹ç»çš„æ˜¯æ‰¹é‡çš„æ–¹æ³•ï¼Œæ»¤æ³¢æ³•è§ç¬¬åç« ã€‚ é¦–å…ˆï¼Œè€ƒè™‘ä»1åˆ°Nçš„æ‰€æœ‰æ—¶åˆ»ï¼Œå…¶ä¸­åŒ…å«æœ‰ä¸€äº›Mä¸ªè·¯æ ‡ä¿¡æ¯ã€‚ \\boldsymbol x=\\{ x_1, x_2,...,x_N\\},\\ \\boldsymbol y=\\{ y_1, y_2,...,y_M\\} å½“æˆ‘ä»¬å¿½ç•¥è¿åŠ¨æ–¹ç¨‹ï¼Œå³å¿½ç•¥uï¼Œä¹‹åå¿½ç•¥æ—¶é—´åºåˆ—æ€§ï¼Œå°†è¾“å…¥çœ‹æˆä¸€äº›çš„å›¾ç‰‡ï¼Œäºæ˜¯é—®é¢˜å°±è½¬åŒ–ç§°ä¸ºSFMé—®é¢˜ï¼Œå³æ ¹æ®ä¸€ç³»åˆ—çš„ç‚¹è¿›è¡Œä¸‰ç»´é‡å»ºã€‚ æ­¤æ—¶é—®é¢˜è½¬æ¢ä¸ºæ±‚è§£ $P(x,y\\mid z,u)$ï¼Œä½†æ˜¯å…¶åˆ†å¸ƒå¾ˆèƒ½æ±‚è§£ã€‚ ä¹‹åï¼Œå¿½ç•¥è¿è¡Œæ–¹ç¨‹ï¼Œå¹¶å°†è¾“å…¥ä½å§¿å’Œè·¯æ ‡ä¿¡æ¯åˆå¹¶ä¸º$\\boldsymbol x$ ,ä¸ºäº†ä¼°è®¡ä¸Šè¿°çš„åˆ†å¸ƒï¼Œæˆ‘ä»¬ä½¿ç”¨äº†è´å¶æ–¯æ–¹æ³•ï¼š P(\\boldsymbol{x}, \\boldsymbol{y} \\mid \\boldsymbol{z}, \\boldsymbol{u})=\\frac{P(\\boldsymbol{z}, \\boldsymbol{u} \\mid \\boldsymbol{x}, \\boldsymbol{y}) P(\\boldsymbol{x}, \\boldsymbol{y})}{P(\\boldsymbol{z}, \\boldsymbol{u})} \\propto \\underbrace{P(\\boldsymbol{z}, \\boldsymbol{u} \\mid \\boldsymbol{x}, \\boldsymbol{y})}_{\\text {ä¼¼ç„¶ }} \\underbrace{P(\\boldsymbol{x}, \\boldsymbol{y})}_{\\text {å…ˆéªŒ }} .ç®€åŒ–ä¹‹åå¯å¾—ï¼š P(\\boldsymbol{x} \\mid \\boldsymbol{z})=\\frac{P(\\boldsymbol{z} \\mid \\boldsymbol{x}) P(\\boldsymbol{x})}{P(\\boldsymbol{z})} \\propto \\underbrace{P(\\boldsymbol{z} \\mid \\boldsymbol{x})}_{\\text {ä¼¼ç„¶ }} \\underbrace{P(\\boldsymbol{x})}_{\\text {å…ˆéªŒ }} .è´å¶æ–¯æ³•åˆ™å·¦ä¾§ç§°ä¸ºåéªŒæ¦‚ç‡ï¼Œå³ä¾§çš„$P(z|x)$ç§°ä¸ºä¼¼ç„¶(ï¼ˆLikehood )ï¼Œå¦ä¸€éƒ¨åˆ†$P(x)$ç§°ä¸ºå…ˆéªŒ( Prior )ã€‚ ç›´æ¥æ±‚åéªŒåˆ†å¸ƒæ˜¯å›°éš¾çš„ï¼Œä½†æ˜¯æ±‚ä¸€ä¸ªçŠ¶æ€æœ€ä¼˜ä¼°è®¡ï¼Œä½¿å¾—åœ¨è¯¥çŠ¶æ€ä¸‹åéªŒæ¦‚ç‡æœ€å¤§åŒ–ï¼Œåˆ™æ˜¯å¯è¡Œçš„ï¼Œä»¥ä¸‹ä¸ºæœ€å¤§åéªŒä¼°è®¡(MAP)ï¼š (\\boldsymbol{x}, \\boldsymbol{y})^{*}{ }_{\\mathrm{MAP}}=\\arg \\max P(\\boldsymbol{x}, \\boldsymbol{y} \\mid \\boldsymbol{z}, \\boldsymbol{u})=\\arg \\max P(\\boldsymbol{z}, \\boldsymbol{u} \\mid \\boldsymbol{x}, \\boldsymbol{y}) P(\\boldsymbol{x}, \\boldsymbol{y}).ä½†å½“æˆ‘ä»¬ä¸çŸ¥é“å…ˆéªŒä¿¡æ¯æ—¶ï¼Œå¯ä»¥æ±‚è§£æœ€å¤§ä¼¼ç„¶ä¼°è®¡(MLE)ï¼š (\\boldsymbol{x}, \\boldsymbol{y})^{*}{ }_{\\mathrm{MLE}}=\\arg \\max P(\\boldsymbol{z}, \\boldsymbol{u} \\mid \\boldsymbol{x}, \\boldsymbol{y}).ç”±äºæˆ‘ä»¬çŸ¥é“è§‚æµ‹æ•°æ® $\\boldsymbol z, \\boldsymbol u$ ,æœ€å¤§ä¼¼ç„¶å¯ä»¥ç†è§£æˆï¼šåœ¨ä»€ä¹ˆæ ·çš„çŠ¶æ€ä¸‹ï¼Œæœ€å¯èƒ½äº§ç”Ÿç°åœ¨è§‚æµ‹åˆ°çš„æ•°æ®ã€‚ æœ€å°äºŒä¹˜çš„å¼•å‡ºåœ¨é«˜æ–¯åˆ†å¸ƒçš„å‡è®¾ä¸‹ï¼Œæœ€å¤§ä¼¼ç„¶ä¼°è®¡æœ‰æ¯”è¾ƒç®€å•çš„å½¢å¼ã€‚å›é¡¾è§‚æµ‹æ¨¡å‹ï¼Œå¯¹æŸä¸€æ¬¡ä¼°è®¡æœ‰ï¼š \\boldsymbol z_{k,j}=h(\\boldsymbol x_k,\\boldsymbol y_j)+\\boldsymbol v_{k,j}å…¶ä¸­å‡è®¾å™ªå£°é¡¹ç¬¦åˆé«˜æ–¯åˆ†å¸ƒ$\\boldsymbol v_k \\sim \\mathcal N(\\boldsymbol 0,\\boldsymbol Q_{k,j})$ ï¼Œäºæ˜¯è§‚æµ‹æ•°æ®çš„æ¡ä»¶æ¦‚ç‡åˆ†å¸ƒä¾ç„¶ä¸ºä¸€ä¸ªé«˜æ–¯åˆ†å¸ƒï¼Œè¡¨è¾¾å¼ä¸ºï¼š P(\\boldsymbol z_{k,j} \\mid x_k,y_j)=\\mathcal N(h(\\boldsymbol x_k,\\boldsymbol y_j),\\boldsymbol Q_{k,j})å¯¹äºä¸€èˆ¬çš„é«˜æ–¯åˆ†å¸ƒï¼š P(\\boldsymbol{x})=\\frac{1}{\\sqrt{(2 \\pi)^{N} \\operatorname{det}(\\boldsymbol{\\Sigma})}} \\exp \\left(-\\frac{1}{2}(\\boldsymbol{x}-\\boldsymbol{\\mu})^{\\mathrm{T}} \\boldsymbol{\\Sigma}^{-1}(\\boldsymbol{x}-\\boldsymbol{\\mu})\\right) å†™æˆè´Ÿå¯¹æ•°å½¢å¼å¯å¾—ï¼š -\\ln (P(\\boldsymbol{x}))=\\frac{1}{2} \\ln \\left((2 \\pi)^{N} \\operatorname{det}(\\boldsymbol{\\Sigma})\\right)+\\frac{1}{2}(\\boldsymbol{x}-\\boldsymbol{\\mu})^{\\mathrm{T}} \\boldsymbol{\\Sigma}^{-1}(\\boldsymbol{x}-\\boldsymbol{\\mu}) .å…¶ä¸­ï¼Œç¬¬ä¸€é¡¹ä¸ºå¸¸æ•°ï¼Œåªæœ‰ç¬¬äºŒé¡¹å’Œæˆ‘ä»¬çš„$x$æœ‰å…³ï¼Œè¿™æ ·å¯ä»¥å°†åŸé—®é¢˜è½¬åŒ–æˆè´Ÿå¯¹æ•°æœ€å°åŒ–ï¼Œå³å¯¹ä¸€ä¸ªäºŒæ¬¡å‹è¿›è¡Œæœ€å°åŒ–ã€‚ æ­¤æ—¶ï¼ŒåŸé—®é¢˜çš„æœ€å¤§ä¼¼ç„¶ä¸ºï¼š \\begin{align} \\left(\\boldsymbol{x}_{k}, \\boldsymbol{y}_{j}\\right)^{*}&=\\arg \\max \\mathcal{N}\\left(h\\left(\\boldsymbol{y}_{j}, \\boldsymbol{x}_{k}\\right), \\boldsymbol{Q}_{k, j}\\right) \\\\ &=\\arg \\min \\left(\\left(\\boldsymbol{z}_{k, j}-h\\left(\\boldsymbol{x}_{k}, \\boldsymbol{y}_{j}\\right)\\right)^{\\mathrm{T}} \\boldsymbol{Q}_{k, j}^{-1}\\left(\\boldsymbol{z}_{k, j}-h\\left(\\boldsymbol{x}_{k}, \\boldsymbol{y}_{j}\\right)\\right)\\right) . \\end{align}è€ƒè™‘æ‰¹é‡è¾“å…¥çš„æ•°æ®ï¼Œå‡è®¾è¾“å…¥$x_k$ å’Œ è§‚æµ‹$z_{k,j}$ä¹‹é—´æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼ŒåŒæ—¶åŒä¸€æ‰¹æ¬¡çš„æ•°æ®ä¹‹é—´ç›¸äº’ä¹Ÿæ˜¯ç‹¬ç«‹çš„ï¼Œäºæ˜¯å¯å¾—ï¼š P(\\boldsymbol{z}, \\boldsymbol{u} \\mid \\boldsymbol{x}, \\boldsymbol{y})=\\prod_{k} P\\left(\\boldsymbol{u}_{k} \\mid \\boldsymbol{x}_{k-1}, \\boldsymbol{x}_{k}\\right) \\prod_{k, j} P\\left(\\boldsymbol{z}_{k, j} \\mid \\boldsymbol{x}_{k}, \\boldsymbol{y}_{j}\\right)æ ¹æ®å‡è®¾å’Œä¸Šé¢çš„å…¬å¼å¯å¾—ï¼š P(\\boldsymbol{z}, \\boldsymbol{u} \\mid \\boldsymbol{x}, \\boldsymbol{y}) = P(\\boldsymbol{z} \\mid \\boldsymbol{x}, \\boldsymbol{y}, \\boldsymbol{u})P(\\boldsymbol{u} \\mid \\boldsymbol{x}, \\boldsymbol{y})=P(\\boldsymbol{u} \\mid \\boldsymbol{x}) P(\\boldsymbol{z} \\mid \\boldsymbol{x}, \\boldsymbol{y})äºæ˜¯å®šä¹‰è¯¯å·®ï¼š e_{\\boldsymbol{u}, k}=\\boldsymbol{x}_{k}-f\\left(\\boldsymbol{x}_{k-1}, \\boldsymbol{u}_{k}\\right) \\\\\\boldsymbol{e}_{\\boldsymbol{z}, j, k}=\\boldsymbol{z}_{k, j}-h\\left(\\boldsymbol{x}_{k}, \\boldsymbol{y}_{j}\\right)åˆ™æœ€å°åŒ–è¯¯å·®çš„äºŒèŒƒæ•°å¯ä»¥è½¬åŒ–ä¸ºï¼š \\min J(\\boldsymbol{x}, \\boldsymbol{y})=\\sum_{k} \\boldsymbol{e}_{\\boldsymbol{u}, k}^{\\mathrm{T}} \\boldsymbol{R}_{k}^{-1} \\boldsymbol{e}_{\\boldsymbol{u}, k}+\\sum_{k} \\sum_{j} \\boldsymbol{e}_{\\boldsymbol{z}, k, j}^{\\mathrm{T}} \\boldsymbol{Q}_{k, j}^{-1} \\boldsymbol{e}_{\\boldsymbol{z}, k, j}.è¿™æ ·å°±å¾—åˆ°äº†ä¸€ä¸ªæœ€å°äºŒä¹˜é—®é¢˜ï¼ˆLeast Square Problem ),å®ƒçš„è§£ç­‰ä»·äºçŠ¶æ€çš„æœ€å¤§ä¼¼ç„¶ä¼°è®¡ã€‚ç›´è§‚ä¸Šçœ‹ï¼Œç”±äºå™ªå£°çš„å­˜åœ¨ï¼Œå½“æˆ‘ä»¬æŠŠä¼°è®¡çš„è½¨è¿¹ä¸åœ°å›¾ä»£å…¥SLAMçš„è¿åŠ¨ã€è§‚æµ‹æ–¹ç¨‹ä¸­æ—¶ï¼Œå®ƒä»¬å¹¶ä¸ä¼šå®Œç¾åœ°æˆç«‹ã€‚è¿™æ—¶æ€ä¹ˆåŠå‘¢?æˆ‘ä»¬å¯¹çŠ¶æ€çš„ä¼°è®¡å€¼è¿›è¡Œå¾®è°ƒï¼Œä½¿å¾—æ•´ä½“çš„è¯¯å·®ä¸‹é™ä¸€äº›ã€‚å½“ç„¶ï¼Œè¿™ä¸ªä¸‹é™ä¹Ÿæœ‰é™åº¦ï¼Œå®ƒä¸€èˆ¬ä¼šåˆ°è¾¾ä¸€ä¸ªæå°å€¼ã€‚è¿™å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„éçº¿æ€§ä¼˜åŒ–çš„è¿‡ç¨‹ã€‚ å¯¹äºSLAMè€Œè¨€ï¼Œå…¶LSPé—®é¢˜æœ‰ä¸€å®šçš„ç‰¹æ®Šæ€§ï¼š è¯¯å·®å‡½æ•°æœ‰å¤šä¸ªè¯¯å·®çš„åŠ æƒäºŒæ¬¡å‹ç»„æˆã€‚ä¸”ç”±äºç‹¬ç«‹æ€§çš„ç‰¹ç‚¹ï¼Œå…¶å…³ç³»å¼ä¼šæ¯”è¾ƒç¨€ç–ã€‚ ä½¿ç”¨æä»£æ•°è¡¨ç¤ºå¢é‡ä»¬ä¸ä¼šå¼•å…¥æ–°çš„çº¦æŸï¼Œå› æ­¤è¯¥é—®é¢˜ä¸ºä¸€ä¸ªæ— çº¦æŸçš„éçº¿æ€§ä¼˜åŒ–ï¼Œä½†æ˜¯å¦‚æœç”¨æ—‹è½¬çŸ©é˜µï¼Œé‚£ä¼šå¼•å…¥æ–°çš„çº¦æŸã€‚ã€‚ã€‚è¿˜æ˜¯åˆ«ç”¨äº†ã€‚ ç”±äºå…¶ä¿¡æ¯çŸ©é˜µ(åæ–¹å·®çš„é€†)ç›¸å½“äºè¯¯å·®çš„æƒé‡ï¼Œå› æ­¤è¯¯å·®çš„åˆ†å¸ƒä¼šå¯¹æƒé‡äº§ç”Ÿæ¯”è¾ƒå¤§çš„å½±å“ã€‚ æ‰¹é‡ä¼°è®¡çš„æ¡ˆä¾‹ éçº¿æ€§æœ€å°äºŒä¹˜è€ƒè™‘æœ€ç®€å•çš„æœ€å°äºŒä¹˜é—®é¢˜ï¼š \\min\\limits_{\\boldsymbol x}F(x)=\\dfrac 1 2 ||f(x)||^2_2\\ ,x\\in \\mathbb R^nå…¶ä¸­ï¼Œ$f(x)$ä¸ºéçº¿æ€§å‡½æ•°ã€‚ å½“å‡½æ•°çš„æ–°æ˜¯å¾ˆç®€å•æ—¶ï¼Œå¯ä»¥ç›´æ¥æ±‚å¯¼ï¼Œä»¤å¯¼æ•°ä¸º0å¾—å‡ºæå€¼ç‚¹æˆ–éç‚¹ã€‚ \\dfrac {df} {dx} = 0 \\Rightarrow x_0ä½†æ˜¯ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„ä¸æ˜¯$\\dfrac {df} {dx}$ ä¸å¥½æ±‚ï¼Œå°±æ˜¯$\\dfrac {df} {dx}=0$æ–¹ç¨‹ä¸å¥½è§£ï¼Œäºæ˜¯è§£æè§£æ˜¯ä¸å¯èƒ½äº†ï¼Œæˆ‘ä»¬è€ƒè™‘æ•°å€¼è§£ï¼Œé€šè¿‡ç»™å®šä¸€ä¸ªåˆå€¼ï¼Œä¸æ–­è¿­ä»£æ¥é€¼è¿‘ã€‚ äºæ˜¯é—®é¢˜è½¬æ¢ä¸ºå¯»æ‰¾åˆé€‚çš„å¢é‡ $\\Delta x_k$ ã€‚ ä½†æ˜¯ï¼Œæ•°å€¼æ–¹æ³•æ±‚å¾—çš„æ˜¯å±€éƒ¨é—®é¢˜çš„æœ€å°ï¼Œè€Œéå…¨å±€çš„æœ€å°ã€‚ ä¸€é˜¶å’ŒäºŒé˜¶æ¢¯åº¦æ³•è¿™é‡Œæˆ‘ä»¬ç›´æ¥å¯¹ç›®æ ‡å‡½æ•°æ•´ä½“è¿›è¡Œæ³°å‹’å±•å¼€çš„ï¼Œè¿™æ˜¯ç”¨æ¥å»åŒºåˆ«é«˜æ–¯ç‰›é¡¿æ³•çš„ã€‚ ç°åœ¨å¤„äºç¬¬kæ¬¡è¿­ä»£ï¼Œå‡è®¾æˆ‘ä»¬åœ¨$x_k$å¤„ï¼Œè¦å¯»æ‰¾ $\\Delta x_k$ ,äºæ˜¯è¿›è¡Œæ³°å‹’å±•å¼€å¯å¾—ï¼š F\\left(\\boldsymbol{x}_{k}+\\Delta \\boldsymbol{x}_{k}\\right) \\approx F\\left(\\boldsymbol{x}_{k}\\right)+\\boldsymbol{J}\\left(\\boldsymbol{x}_{k}\\right)^{\\mathrm{T}} \\Delta \\boldsymbol{x}_{k}+\\frac{1}{2} \\Delta \\boldsymbol{x}_{k}^{\\mathrm{T}} \\boldsymbol{H}\\left(\\boldsymbol{x}_{k}\\right) \\Delta \\boldsymbol{x}_{k} .å…¶ä¸­ï¼Œ$\\boldsymbol{J}(x)$ ä¸ºé›…å¯æ¯”çŸ©é˜µï¼Œ$\\boldsymbol{H}(x)$ ä¸ºæµ·å¡çŸ©é˜µã€‚ å¦‚æœä»…ä»…ä¿ç•™ä¸€é˜¶æ¢¯åº¦ï¼Œé‚£å…¶å¢é‡çš„æ–¹å‘å°±ä¸ºåå‘æ¢¯åº¦çš„æ–¹å‘ï¼Œå³ä¸º$\\Delta x^=-\\boldsymbol J^T(x)$ ï¼Œå¹¶ä¸”è¿˜è¦è®¡ç®—æ­¥é•¿ï¼Œä¸€é˜¶æ–¹æ³•åˆç§°*æœ€é€Ÿä¸‹é™æ³•ã€‚ \\min\\limits_{\\boldsymbol \\Delta x}||f(x)||^2_2 +\\boldsymbol J(x)\\Delta x å¦‚æœä¿ç•™äº†äºŒé˜¶æ¢¯åº¦ï¼Œæ­¤æ—¶çš„å¢é‡æ–¹ç¨‹ä¸ºï¼š \\Delta \\boldsymbol{x}^{*}=\\arg \\min \\left(F(\\boldsymbol{x})+\\boldsymbol{J}(\\boldsymbol{x})^{\\mathrm{T}} \\Delta \\boldsymbol{x}+\\frac{1}{2} \\Delta \\boldsymbol{x}^{\\mathrm{T}} \\boldsymbol{H} \\Delta \\boldsymbol{x}\\right) .å¯¹å³ä¾§æ±‚å¯¼å¹¶å°†å…¶ç­‰äºå¯å¾—ï¼š \\boldsymbol{J}+\\boldsymbol{H} \\Delta \\boldsymbol{x}=\\mathbf{0} \\Rightarrow \\boldsymbol{H} \\Delta \\boldsymbol{x}=-\\boldsymbol{J}è¿™ç§æ–¹æ³•åˆç§°ç‰›é¡¿æ³•ã€‚ ä¸¤ç§æ–¹æ³•ååˆ†ç›´è§‚ï¼Œå¹¶ä¸”æ˜“äºæ“ä½œï¼Œä½†æ˜¯ä¹Ÿå­˜åœ¨ä¸€å®šçš„é—®é¢˜ï¼š å¯¹äºæœ€é€Ÿä¸‹é™æ³•ï¼Œå…¶ä¸‹é™çš„æ—¶å€™è¿‡äºè´ªå©ªï¼Œä¸‹é™çš„è½¨è¿¹å‘ˆç°é”¯é½¿å½¢ï¼Œè¿™æ ·åè€Œå¢å¤šäº†è¿­ä»£çš„æ¬¡æ•°ï¼Œzigzagé—®é¢˜ã€‚ å¯¹äºç‰›é¡¿æ³•ï¼Œè™½ç„¶å…¶è¿­ä»£æ¬¡æ•°å‡å°‘äº†ï¼Œä½†æ˜¯ä¸€æ–¹é¢Hessian çŸ©é˜µä¸æ˜¯å¾ˆå¥½è·å¾—ï¼Œå¦ä¸€æ–¹é¢å°±æ˜¯æ±‚è§£ä¸Šé¢çš„æ–¹ç¨‹éš¾åº¦è¾ƒå¤§ï¼Œå¯¹äºå¤§è§„æ¨¡çš„çŸ©é˜µå¾ˆéš¾æ±‚è§£ï¼Œå¦‚æœçŸ©é˜µä¸ºéå¥‡å¼‚ï¼Œé‚£å°±ä¼šç›´æ¥æ— è§£ã€‚ é’ˆå¯¹å¦‚ä½•å›é¿è®¡ç®—Hessian çŸ©é˜µçš„é—®é¢˜ï¼Œæœ‰ä»¥ä¸‹ä¸¤ç§æ”¹è¿›æ–¹æ³•ï¼ŒGauss-Newton ä»¥åŠ Levenberg-Marquadt æ–¹æ³•ã€‚ Gauss-Newtonæ³•ç›¸æ¯”ä¹‹å‰çš„ç‰›é¡¿æ³•ç›´æ¥å¯¹$F(x)$è¿›è¡Œå±•å¼€ï¼Œé«˜æ–¯ç‰›é¡¿æ³•æ˜¯å…ˆå°†é‡Œé¢çš„éçº¿æ€§å‡½æ•°è¿›è¡Œä¸€é˜¶è¿‘ä¼¼çº¿æ€§åŒ–æ“ä½œï¼š f(\\boldsymbol{x}+\\Delta \\boldsymbol{x}) \\approx f(\\boldsymbol{x})+\\boldsymbol{J}(\\boldsymbol{x}) \\Delta \\boldsymbol{x}å…¶ä¸­$J(x)$ æ˜¯ä¸€ä¸ª$n \\times1$çš„åˆ—å‘é‡ï¼Œæ ¹æ®å‰é¢çš„æ¡†æ¶ï¼Œä¼˜åŒ–çš„ç›®æ ‡å˜æˆä½¿å¾— $||f(x+\\Delta x)||^2=||f(\\boldsymbol{x})+\\boldsymbol{J}(\\boldsymbol{x}) \\Delta \\boldsymbol{x}||^2$æœ€å°ã€‚ äºæ˜¯å¹³æ–¹è¯¯å·®å˜ä¸ºï¼š \\begin{aligned}\\frac{1}{2}\\|f(\\boldsymbol{x})+\\boldsymbol{J}(\\boldsymbol{x}) \\Delta \\boldsymbol{x}\\|^{2} &=\\frac{1}{2}(f(\\boldsymbol{x})+\\boldsymbol{J}(\\boldsymbol{x}) \\Delta \\boldsymbol{x})^{T}(f(\\boldsymbol{x})+\\boldsymbol{J}(\\boldsymbol{x}) \\Delta \\boldsymbol{x}) \\\\&=\\frac{1}{2}\\left(\\|f(\\boldsymbol{x})\\|_{2}^{2}+2 f(\\boldsymbol{x})^{T} \\boldsymbol{J}(\\boldsymbol{x}) \\Delta \\boldsymbol{x}+\\Delta \\boldsymbol{x}^{T} \\boldsymbol{J}(\\boldsymbol{x})^{T} \\boldsymbol{J}(\\boldsymbol{x}) \\Delta \\boldsymbol{x}\\right) .\\end{aligned}ä»¤å…³äº $\\Delta x $ å¯¼æ•°ä¸ºé›¶ï¼š \\boldsymbol{J}(\\boldsymbol{x})^{T} f(\\boldsymbol{x})+2 \\boldsymbol{J}(\\boldsymbol{x})^{T} \\boldsymbol{J}(\\boldsymbol{x}) \\Delta \\boldsymbol{x}=\\mathbf{0} \\\\ \\underbrace {\\boldsymbol{J}(\\boldsymbol{x})^{T} \\boldsymbol{J}(\\boldsymbol{x})}_{\\boldsymbol{H(x)}} \\Delta \\boldsymbol{x}=\\underbrace {-\\boldsymbol{J}(\\boldsymbol{x})^{T} f(\\boldsymbol{x})}_{\\boldsymbol{g(x)}}\\\\ \\Rightarrow \\boldsymbol{H}\\Delta x=\\boldsymbol{g}ä¸Šè¿°æ–¹ç¨‹ç§°ä¸ºå¢é‡æ–¹ç¨‹ï¼Œåˆå«é«˜æ–¯ç‰›é¡¿æ–¹ç¨‹å’Œæ­£è§„æ–¹ç¨‹ã€‚ è¿™é‡ŒæŠŠå·¦ä¾§è®°ä½œHæ˜¯æœ‰æ„ä¹‰çš„ã€‚å¯¹æ¯”ç‰›é¡¿æ³•å¯è§ï¼Œé«˜æ–¯ç‰›é¡¿æ³•ç”¨$JJ^T$ä½œä¸ºç‰›é¡¿æ³•ä¸­äºŒé˜¶HessiançŸ©é˜µçš„è¿‘ä¼¼ï¼Œä»è€Œçœç•¥äº†è®¡ç®—Hçš„è¿‡ç¨‹ã€‚æ±‚è§£å¢é‡æ–¹ç¨‹æ˜¯æ•´ä¸ªä¼˜åŒ–é—®é¢˜çš„æ ¸å¿ƒæ‰€åœ¨ã€‚å¦‚æœæˆ‘ä»¬èƒ½å¤Ÿé¡ºåˆ©è§£å‡ºè¯¥æ–¹ç¨‹ï¼Œé‚£ä¹ˆé«˜æ–¯ç‰›é¡¿æ³•çš„ç®—æ³•æ­¥éª¤å¯ä»¥å†™æˆï¼š ä¸»è¦çš„é—®é¢˜ï¼š Gauss-Newtonç®€å•å®ç”¨ï¼Œä½†æ˜¯æ²¡åŠæ³•ä¿è¯$H^{-1}$ä¸€å®šå­˜åœ¨ï¼Œå› ä¸º$JJ^T$å…¶å®ä¹Ÿåªèƒ½ä¿è¯æ˜¯åŠæ­£å®šçš„ï¼Œè€Œéæ­£å®šçš„ï¼Œå› æ­¤å¯èƒ½ä¼šç”±äº$JJ^T$çš„å¥‡å¼‚æˆ–è€…ç—…æ€è€Œå¯¼è‡´ç®—æ³•ä¸æ”¶æ•›ã€‚ å…¶æ¬¡æ˜¯å°±ç®—ä¿è¯æ”¶æ•›ï¼Œä¹Ÿå¯èƒ½ç”±äºå…¶æ­¥é•¿å¤ªé•¿è€Œå¯¼è‡´æ— æ³•ä¿è¯è¿­ä»£æ”¶æ•›ã€‚ å°½ç®¡æœ‰ä»¥ä¸Šçš„é—®é¢˜ï¼Œä»–åœ¨å…ˆæœç´¢é¢†åŸŸè¿˜æ˜¯å…·æœ‰ä¸€å®šçš„æŒ‡å¯¼æ„ä¹‰ï¼Œåœ¨å…¶åŸºç¡€ä¸Šå‡ºç°äº†ä¸€å¤§æ‰¹çš„æ”¹è¿›ç®—æ³•ã€‚ Levenberg-Marquadt æ–¹æ³• G-Nå±äºçº¿æœç´¢æ–¹æ³•ï¼šå…ˆæ‰¾åˆ°æ–¹å‘ï¼Œå†ç¡®å®šé•¿åº¦ L-Må±äºä¿¡èµ–åŒºåŸŸæ–¹æ³•ï¼ˆTrust Regionï¼‰ï¼Œè®¤ä¸ºè¿‘ä¼¼åªåœ¨åŒºåŸŸå†…äºŒé˜¶è¿‘ä¼¼æ˜¯å¯é çš„ï¼Œå‡ºäº†è¿™ä¸ªåŒºåŸŸå°±ä¼šå‡ºç°é—®é¢˜ã€‚ ç¡®å®šè¿™ä¸ªä¿¡èµ–åŒºåŸŸçš„æ–¹æ³•ï¼Œå°±æ˜¯æ¯”è¾ƒæˆ‘ä»¬çš„è¿‘ä¼¼å‡½æ•°å’Œå®é™…å‡½æ•°çš„å·®åˆ«ï¼Œå¦‚æœå·®åˆ«å°ï¼Œå³è¿‘ä¼¼çš„æ•ˆæœå¥½ï¼Œäºæ˜¯è¦æ‰©å¤§è¿‘ä¼¼çš„èŒƒå›´ï¼Œå¦åˆ™å°±å‡å°è¿‘ä¼¼çš„èŒƒå›´ã€‚ \\rho=\\dfrac {f(\\boldsymbol x+\\boldsymbol {\\Delta x})-f(\\boldsymbol x)} {\\boldsymbol J(x)^T \\Delta x} $\\rho$çš„åˆ†å­æ˜¯å®é™…å‡½æ•°ä¸‹é™çš„å€¼ï¼Œåˆ†æ¯æ˜¯è¿‘ä¼¼æ¨¡å‹ä¸‹é™çš„å€¼ã€‚ å¦‚æœ$\\rho$æ¥è¿‘äº1ï¼Œåˆ™è¿‘ä¼¼æ˜¯å¥½çš„ã€‚ å¦‚æœ$\\rho$å¤ªå°ï¼Œè¯´æ˜å®é™…å‡å°çš„å€¼è¿œå°‘äºè¿‘ä¼¼å‡å°çš„å€¼ï¼Œåˆ™è®¤ä¸ºè¿‘ä¼¼æ¯”è¾ƒå·®ï¼Œéœ€è¦ç¼©å°è¿‘ä¼¼èŒƒå›´ã€‚ åä¹‹ï¼Œå¦‚æœ$\\rho$æ¯”è¾ƒå¤§ï¼Œåˆ™è¯´æ˜å®é™…ä¸‹é™çš„æ¯”é¢„è®¡çš„æ›´å¤§ï¼Œæˆ‘ä»¬å¯ä»¥æ”¾å¤§è¿‘ä¼¼èŒƒå›´ã€‚ åœ¨åˆ—æ–‡ä¼¯æ ¼æå‡ºçš„ä¼˜åŒ–æ–¹æ³•ä¸­ï¼ŒæŠŠ$D$å–æˆå•ä½é˜µ$I$ï¼Œç›¸å½“äºç›´æ¥æŠŠ$â–³x_k$ã€‚çº¦æŸåœ¨ä¸€ä¸ªçƒä¸­ã€‚ éšåï¼Œé©¬å¤¸å°”ç‰¹æå‡ºå°†$D$å–æˆéè´Ÿæ•°å¯¹è§’é˜µï¼Œå³ä¸ºä¸€ä¸ªæ¤­çƒï¼Œå®é™…ä¸­é€šå¸¸ç”¨$J^TJ$çš„å¯¹è§’å…ƒç´ å¹³æ–¹æ ¹ï¼Œä½¿å¾—åœ¨æ¢¯åº¦å°çš„ç»´åº¦ä¸Šçº¦æŸèŒƒå›´æ›´å¤§ä¸€äº›ã€‚ Trust Regionå†…çš„ä¼˜åŒ–ï¼Œåˆ©ç”¨Lagrangeä¹˜å­è½¬åŒ–ä¸ºæ— çº¦æŸï¼š \\min _{\\Delta \\boldsymbol{x}_{k}} \\frac{1}{2}\\left\\|f\\left(\\boldsymbol{x}_{k}\\right)+\\boldsymbol{J}\\left(\\boldsymbol{x}_{k}\\right) \\Delta \\boldsymbol{x}_{k}\\right\\|^{2}+\\frac{\\lambda}{2}\\|\\boldsymbol{D} \\Delta \\boldsymbol{x}\\|^{2} . ä»å‚ç…§G-Nå±•å¼€ï¼Œä»¤æ‹‰æ ¼æœ—æ—¥å‡½æ•°å…³äº$\\Delta x$çš„å‡½æ•°ä¸º0ï¼Œå¯å¾—å¢é‡æ–¹ç¨‹ä¸ºï¼š \\left(\\boldsymbol{H}+\\lambda \\boldsymbol{D}^{T} \\boldsymbol{D}\\right) \\Delta \\boldsymbol{x}=\\boldsymbol{g} è€ƒè™‘åˆ°ç®€åŒ–çš„å½¢å¼ï¼Œåœ¨Levenbergæ–¹æ³•ä¸­ï¼Œè¿™é‡Œä»¤$D=I$å¯å¾—ï¼š (\\boldsymbol{H}+\\lambda \\boldsymbol{I}) \\Delta \\boldsymbol{x}=\\boldsymbol{g} . å¯¹äºL-Mæ³•æ¥è¯´ï¼š ä¸€æ–¹é¢ï¼Œå½“å‚æ•°å…¥æ¯”è¾ƒå°æ—¶ï¼Œ$H$å ä¸»è¦åœ°ä½,è¿™è¯´æ˜äºŒæ¬¡è¿‘ä¼¼æ¨¡å‹åœ¨è¯¥èŒƒå›´å†…æ˜¯æ¯”è¾ƒå¥½çš„ï¼Œåˆ—æ–‡ä¼¯æ ¼â€”-é©¬å¤¸å°”ç‰¹æ–¹æ³•æ›´æ¥è¿‘äºé«˜æ–¯ç‰›é¡¿æ³•ã€‚ å¦ä¸€æ–¹é¢ï¼Œå½“å…¥æ¯”è¾ƒå¤§æ—¶ï¼Œå…¥$I$å æ®ä¸»è¦åœ°ä½ï¼Œåˆ—æ–‡ä¼¯æ ¼ä¸€é©¬å¤¸å°”ç‰¹æ–¹æ³•æ›´æ¥è¿‘äºä¸€é˜¶æ¢¯åº¦ä¸‹é™æ³•ï¼ˆå³æœ€é€Ÿä¸‹é™)ï¼Œè¿™è¯´æ˜é™„è¿‘çš„äºŒæ¬¡è¿‘ä¼¼ä¸å¤Ÿå¥½ã€‚ L-Mæ–¹æ³•çš„æ±‚è§£æ–¹å¼ï¼Œå¯åœ¨ä¸€å®šç¨‹åº¦ä¸Šé¿å…çº¿æ€§æ–¹ç¨‹ç»„çš„ç³»æ•°çŸ©é˜µçš„éå¥‡å¼‚å’Œç—…æ€é—®é¢˜,æä¾›æ›´ç¨³å®šã€æ›´å‡†ç¡®çš„å¢é‡$\\Delta x_k$ã€‚ L-Mæ³•å¯ä»¥å¾ˆå¥½çš„ä¿è¯å¢é‡æ–¹ç¨‹çš„æ­£å®šæ€§ï¼Œå³è®¤ä¸ºè¿‘ä¼¼åªåœ¨ä¸€å®šçš„èŒƒå›´ä¹‹å†…æˆç«‹ï¼Œå¦‚æœè¿‘ä¼¼ä¸å¥½åˆ™ä¼šç¼©å°èŒƒå›´ã€‚ ä»å¢é‡æ–¹ç¨‹çš„è§’åº¦æ¥çœ‹ï¼Œå¯ä»¥çœ‹æˆæ˜¯ä¸€é˜¶å’ŒäºŒé˜¶çš„æ··åˆï¼Œå…¶ä¸­Lagrangeä¹˜å­æ§åˆ¶ç€ä¸¤è¾¹çš„æƒé‡ã€‚ å°ç»“ï¼š éçº¿æ€§ä¼˜åŒ–æ˜¯ä¸ªå¾ˆå¤§çš„ä¸»é¢˜ï¼Œç ”ç©¶è€…ä»¬ä¸ºä¹‹å¥‹æ–—å¤šå¹´ã€‚ ä¸»è¦æ–¹æ³•ï¼šæœ€é€Ÿä¸‹é™ã€ç‰›é¡¿ã€G-Nã€L-Mã€DogLegç­‰ï¼Œåœ¨å®é™…çš„SLAMä¸­ï¼Œæˆ‘ä»¬ä»¥G-Næ³•å’ŒL-Mæ³•ä¸ºä¸»ï¼Œä¼˜å…ˆä½¿ç”¨çš„æ˜¯G-Næ–¹æ³•ã€‚ ä¸çº¿æ€§è§„åˆ’ä¸åŒï¼Œéçº¿æ€§éœ€è¦é’ˆå¯¹å…·ä½“é—®é¢˜å…·ä½“åˆ†æã€‚ é—®é¢˜éå‡¸æ—¶ï¼Œå¯¹åˆå€¼æ•æ„Ÿï¼Œä¼šé™·å…¥å±€éƒ¨æœ€ä¼˜ã€‚ ç›®å‰æ²¡æœ‰éå‡¸é—®é¢˜çš„é€šç”¨æœ€ä¼˜å€¼çš„å¯»æ‰¾åŠæ³•ï¼› é—®é¢˜å‡¸æ—¶ï¼ŒäºŒé˜¶æ–¹æ³•é€šå¸¸ä¸€ä¸¤æ­¥å°±èƒ½æ”¶æ•›ã€‚","link":"/2022/04/05/SLAM/ch6-%E9%9D%9E%E7%BA%BF%E6%80%A7%E4%BC%98%E5%8C%96-%E5%9F%BA%E7%A1%80%E7%90%86%E8%AE%BA%E9%83%A8%E5%88%86/"},{"title":"Ch6 éçº¿æ€§ä¼˜åŒ– å®è·µéƒ¨åˆ†","text":"hljs.initHighlightingOnLoad(); æœ¬èŠ‚ä¸»è¦è¿›é¡¹ä¸€ä¸ªæ›²çº¿æ‹Ÿåˆçš„å°å®éªŒï¼Œæ¥è¿›ä¸€æ­¥äº†è§£æœ€å°äºŒä¹˜é—®é¢˜æ˜¯æ±‚è§£æ–¹æ³•ï¼Œä»¥ä¸‹éƒ¨åˆ†æ˜¯æœ¬ä¸ªé¡¹ç›®çš„CMakelists.txt.æœ¬æ–‡ä¸»è¦å®éªŒä¸‰ç§æ–¹æ³•å®ç°ï¼Œé¦–å…ˆæ˜¯åŸºäºEigen3G-Næ³•ï¼Œä¹‹åæ˜¯åŸºäºCereså’Œg2oçš„LMæ³•å’ŒGNæ³•çš„å…·ä½“å®ç°ã€‚ 12345678910111213141516171819202122232425262728293031cmake_minimum_required(VERSION 2.8)project(ch6)set(CMAKE_BUILD_TYPE Release)set(CMAKE_CXX_FLAGS &quot;-std=c++14 -O3&quot;)list(APPEND CMAKE_MODULE_PATH ${PROJECT_SOURCE_DIR}/cmake)# OpenCVfind_package(OpenCV REQUIRED)include_directories(${OpenCV_INCLUDE_DIRS})# Ceresfind_package(Ceres REQUIRED)include_directories(${CERES_INCLUDE_DIRS})# g2ofind_package(G2O REQUIRED)include_directories(${G2O_INCLUDE_DIRS})# Eigeninclude_directories(&quot;/usr/include/eigen3&quot;)add_executable(gaussNewton gaussNewton.cpp)target_link_libraries(gaussNewton ${OpenCV_LIBS})add_executable(ceresCurveFitting ceresCurveFitting.cpp)target_link_libraries(ceresCurveFitting ${OpenCV_LIBS} ${CERES_LIBRARIES})add_executable(g2oCurveFitting g2oCurveFitting.cpp)target_link_libraries(g2oCurveFitting ${OpenCV_LIBS} ${G2O_CORE_LIBRARY} ${G2O_STUFF_LIBRARY}) æ‰‹å†™GNæ³•è€ƒè™‘æ»¡è¶³ä»¥ä¸‹æ–¹ç¨‹çš„æ›²çº¿ï¼š y=\\exp(ax^2+bx+c)+\\omegaå…¶ä¸­ï¼Œ$a,b,c$ä¸ºæ›²çº¿çš„å‚æ•°ï¼Œ$\\omega \\sim \\mathcal N(0,\\sigma^2)$ ä¸ºé«˜æ–¯å™ªå£°ï¼Œè¿™é‡Œæˆ‘ä»¬å…ˆé€šè¿‡éšæœºæ•°ç”Ÿæˆå™¨ï¼Œå…ˆç”Ÿæˆä¸€äº›åˆ—çš„æ•°æ®ç‚¹ï¼Œç„¶åå°†æ•°æ®ç‚¹ä»£å…¥ï¼Œä½¿å¾—é—®é¢˜è½¬æ¢æˆä¸ºä¸€ä¸ªæœ€å°äºŒä¹˜é—®é¢˜ï¼š \\min\\limits_{a,b,c} \\frac 1 2 \\sum\\limits_{i=1}^{N}||y_i-\\exp(ax_i^2+bx_i+c)||^2è¿™é‡Œçš„å¸¦ä¼°è®¡å‚æ•°ä¸º$a,b,c$ï¼Œç›¸å½“äºæ˜¯å·²çŸ¥$\\{\\boldsymbol x, \\boldsymbol y\\}$ æ¥æ±‚$a,b,c$ çš„æœ€å¯èƒ½çš„å–å€¼ã€‚ ç»“åˆæœ€å¼€å§‹è®²æœ€å°äºŒä¹˜å®šä¹‰çš„è¯¯å·®å‡½æ•°ï¼š \\min J(\\boldsymbol{x}, \\boldsymbol{y})=\\sum_{k} \\boldsymbol{e}_{\\boldsymbol{u}, k}^{\\mathrm{T}} \\boldsymbol{R}_{k}^{-1} \\boldsymbol{e}_{\\boldsymbol{u}, k}=\\sum_{k}\\boldsymbol{e}_{\\boldsymbol{i}}^{\\mathrm{T}} \\boldsymbol{\\sigma}_{k}^{-2} \\boldsymbol{e}_{\\boldsymbol{i}}.å…¶ä¸­ï¼Œ$e_i=y_i-\\exp(ax_i^2+bx_i+c)$,æˆ‘ä»¬åˆ†åˆ«å¯¹ä¸‰ä¸ªå‚æ•°æ±‚å¯¼å¯å¾—ï¼š \\frac {\\partial e_i} {\\partial a} = -x_i^2 \\exp(ax_i^2+bx_i+c) \\\\ \\frac {\\partial e_i} {\\partial b} = -x_i \\exp(ax_i^2+bx_i+c) \\\\ \\frac {\\partial e_i} {\\partial c} = - \\exp(ax_i^2+bx_i+c)äºæ˜¯ç”±$\\boldsymbol J_i=[\\dfrac {\\partial e_i} {\\partial a},\\dfrac {\\partial e_i} {\\partial b},\\dfrac {\\partial e_i} {\\partial c}]^T$ ï¼Œäºæ˜¯é«˜æ–¯ç‰›é¡¿æ³•çš„å¢é‡æ–¹ç¨‹ä¸ºï¼š \\left(\\sum\\limits_{i=1}^{100}\\boldsymbol J_i(\\sigma^2)^{-1}\\boldsymbol J_i \\right) \\Delta x_k =\\sum\\limits_{i=1}^{100}\\boldsymbol J_i(\\sigma^2)^{-1}e_i123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384#include &lt;iostream&gt;#include &lt;chrono&gt;#include &lt;opencv2/opencv.hpp&gt;#include &lt;Eigen/Core&gt;#include &lt;Eigen/Dense&gt;using namespace std;using namespace Eigen;int main(int argc, char **argv) { double ar = 1.0, br = 2.0, cr = 1.0; // çœŸå®å‚æ•°å€¼ double ae = 2.0, be = -1.0, ce = 5.0; // ä¼°è®¡å‚æ•°å€¼ int N = 100; // æ•°æ®ç‚¹ double w_sigma = 1.0; // å™ªå£°Sigmaå€¼ double inv_sigma = 1.0 / w_sigma; cv::RNG rng; // OpenCVéšæœºæ•°äº§ç”Ÿå™¨ vector&lt;double&gt; x_data, y_data; // æ•°æ® for (int i = 0; i &lt; N; i++) { double x = i / 100.0; x_data.push_back(x); y_data.push_back(exp(ar * x * x + br * x + cr) + rng.gaussian(w_sigma * w_sigma)); } // å¼€å§‹Gauss-Newtonè¿­ä»£ int iterations = 100; // è¿­ä»£æ¬¡æ•° double cost = 0, lastCost = 0; // æœ¬æ¬¡è¿­ä»£çš„costå’Œä¸Šä¸€æ¬¡è¿­ä»£çš„cost chrono::steady_clock::time_point t1 = chrono::steady_clock::now(); for (int iter = 0; iter &lt; iterations; iter++) { Matrix3d H = Matrix3d::Zero(); // Hessian = J^T W^{-1} J in Gauss-Newton Vector3d b = Vector3d::Zero(); // bias //åˆå§‹åŒ– cost å¦åˆ™ä¹‹è¿›è¡Œä¸€è½®å°±breakäº†ï¼Œcostæ˜¯ç´¯åŠ çš„ cost = 0; // éå†æ•°æ®é›†ï¼Œè®¡ç®—è¯¯å·® for (int i = 0; i &lt; N; i++) { double xi = x_data[i], yi = y_data[i]; // ç¬¬iä¸ªæ•°æ®ç‚¹ double error = yi - exp(ae * xi * xi + be * xi + ce); Vector3d J; // é›…å¯æ¯”çŸ©é˜µ J[0] = -xi * xi * exp(ae * xi * xi + be * xi + ce); // de/da J[1] = -xi * exp(ae * xi * xi + be * xi + ce); // de/db J[2] = -exp(ae * xi * xi + be * xi + ce); // de/dc H += inv_sigma * inv_sigma * J * J.transpose(); b += -inv_sigma * inv_sigma * error * J; cost += error * error; } // æ±‚è§£çº¿æ€§æ–¹ç¨‹ Hx=b // å‚è€ƒæ•™ç¨‹ http://eigen.tuxfamily.org/dox/classEigen_1_1LDLT.html // ä½¿ç”¨è¿™ä¸ªæ–¹æ³•å¯èƒ½æ˜¯å› ä¸ºå…¶æ±‚è§£é€Ÿåº¦å¿« // Cholesky åˆ†è§£ Vector3d dx = H.ldlt().solve(b); if (isnan(dx[0])) { cout &lt;&lt; &quot;result is nan!&quot; &lt;&lt; endl; break; } if (iter &gt; 0 &amp;&amp; cost &gt;= lastCost) { cout &lt;&lt; &quot;cost: &quot; &lt;&lt; cost &lt;&lt; &quot;&gt;= last cost: &quot; &lt;&lt; lastCost &lt;&lt; &quot;, break.&quot; &lt;&lt; endl; break; } ae += dx[0]; be += dx[1]; ce += dx[2]; lastCost = cost; cout &lt;&lt; &quot;total cost: &quot; &lt;&lt; cost &lt;&lt; &quot;, \\t\\tupdate: &quot; &lt;&lt; dx.transpose() &lt;&lt; &quot;\\t\\testimated params: &quot; &lt;&lt; ae &lt;&lt; &quot;,&quot; &lt;&lt; be &lt;&lt; &quot;,&quot; &lt;&lt; ce &lt;&lt; endl; } chrono::steady_clock::time_point t2 = chrono::steady_clock::now(); chrono::duration&lt;double&gt; time_used = chrono::duration_cast&lt;chrono::duration&lt;double&gt;&gt;(t2 - t1); cout &lt;&lt; &quot;solve time cost = &quot; &lt;&lt; time_used.count() &lt;&lt; &quot; seconds. &quot; &lt;&lt; endl; cout &lt;&lt; &quot;estimated abc = &quot; &lt;&lt; ae &lt;&lt; &quot;, &quot; &lt;&lt; be &lt;&lt; &quot;, &quot; &lt;&lt; ce &lt;&lt; endl; return 0;} åŸºäºCeresçš„æ›²çº¿æ‹Ÿåˆå…¶ä¸»è¦çš„å®ç°æ˜¯æ¨¡æ¿ç¼–ç¨‹ï¼Œæ³›åŒ–æ€§å¾ˆå¥½ä½†æ˜¯å¯è¯»æ€§å¾ˆå·®ã€‚Ceresæ±‚è§£çš„ä¸€èˆ¬å½¢å¼æ˜¯å¸¦è¾¹ç•Œçš„æ ¸å‡½æ•°æœ€å°äºŒä¹˜ï¼š \\min\\limits_{x} \\frac 1 2 \\sum_i \\rho_i\\left(||f_i(x_{i1},...,x_{in})||^2 \\right)\\\\ s.t. l_j \\le x_j \\le u_j.å…¶ä¸­ï¼Œ$x_1,â€¦x_n$ ä¸ºä¼˜åŒ–çš„å‚æ•°å—/ä¼˜åŒ–å˜é‡ï¼Œ$f_i$ ä¸ºä»£ä»·å‡½æ•°/æ®‹å·®å—ï¼Œ$l_j,u_j$ä¸ºä¸Šç•Œå’Œä¸‹ç•Œï¼Œæ— é™åˆ¶æ—¶å¯ä»¥å–$l_i=-\\infty,u_i=\\infty$ ã€‚ç›®æ ‡å‡½æ•°æ˜¯ç»è¿‡ä¸€å †å¹³æ–¹é¡¹ç»è¿‡ä¸€ä¸ªæ ¸å‡½æ•°$\\rho(.)$ æ±‚å’Œåšæˆã€‚ ä¸ºäº†è®©Cereså¸®æˆ‘ä»¬æ±‚è§£è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦åšä»¥ä¸‹å‡ ä»¶äº‹: å®šä¹‰æ¯ä¸ªå‚æ•°å—ã€‚å‚æ•°å—é€šå¸¸ä¸ºå¹³å‡¡çš„å‘é‡,ä½†æ˜¯åœ¨SLAMé‡Œä¹Ÿå¯ä»¥å®šä¹‰æˆå››å…ƒæ•°ã€æä»£æ•°è¿™ç§ç‰¹æ®Šçš„ç»“æ„ã€‚å¦‚æœæ˜¯å‘é‡ï¼Œé‚£ä¹ˆæˆ‘ä»¬]éœ€è¦ä¸ºæ¯ä¸ªå‚æ•°å—åˆ†é…ã€‚ä¸ªdoubleæ•°ç»„æ¥å­˜å‚¨å˜é‡çš„å€¼ã€‚ å®šä¹‰æ®‹å·®å—çš„è®¡ç®—æ–¹å¼ã€‚æ®‹å·®å—é€šå¸¸å…³è”è‹¥åƒä¸ªå‚æ•°å—ï¼Œå¯¹å®ƒä»¬è¿›è¡Œä¸€-äº›è‡ªå®šä¹‰çš„è®¡ç®—ï¼Œç„¶åè¿”å›æ®‹å·®å€¼ã€‚Cereså¯¹å®ƒä»¬æ±‚å¹³æ–¹å’Œä¹‹åï¼Œä½œä¸ºç›®æ ‡å‡½æ•°çš„å€¼ã€‚ æ®‹å·®å—å¾€å¾€ä¹Ÿéœ€è¦å®šä¹‰é›…å¯æ¯”çš„è®¡ç®—æ–¹å¼ã€‚åœ¨Ceresä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨å®ƒæä¾›çš„â€œè‡ªåŠ¨æ±‚å¯¼â€åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨æŒ‡å®šé›…å¯æ¯”çš„è®¡ç®—è¿‡ç¨‹ã€‚å¦‚æœè¦ä½¿ç”¨è‡ªåŠ¨æ±‚å¯¼ï¼Œé‚£ä¹ˆæ®‹å·®å—éœ€è¦æŒ‰ç…§ç‰¹å®šçš„å†™æ³•ä¹¦å†™:æ®‹å·®çš„è®¡ç®—è¿‡ç¨‹åº”è¯¥æ˜¯ä¸€ä¸ªå¸¦æ¨¡æ¿çš„æ‹¬å·è¿ç®—ç¬¦ã€‚è¿™ä¸€ç‚¹æˆ‘ä»¬é€šè¿‡ä¾‹å­æ¥è¯´æ˜ã€‚ æŠŠæ‰€æœ‰çš„å‚æ•°å—å’Œæ®‹å·®å—åŠ å…¥Cereså®šä¹‰çš„Problemå¯¹è±¡ä¸­ï¼Œè°ƒç”¨Solveå‡½æ•°æ±‚è§£å³å¯ã€‚æ±‚è§£ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥ä¼ äººä¸€äº›é…ç½®ä¿¡æ¯ï¼Œä¾‹å¦‚è¿­ä»£æ¬¡æ•°ã€ç»ˆæ­¢æ¡ä»¶ç­‰ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨é»˜è®¤çš„é…ç½®ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273#include &lt;iostream&gt;#include &lt;opencv2/core/core.hpp&gt;#include &lt;ceres/ceres.h&gt;#include &lt;chrono&gt;using namespace std;// ä»£ä»·å‡½æ•°çš„è®¡ç®—æ¨¡å‹struct CURVE_FITTING_COST { CURVE_FITTING_COST(double x, double y) : _x(x), _y(y) {} // æ®‹å·®çš„è®¡ç®— template&lt;typename T&gt; bool operator()( const T *const abc, // æ¨¡å‹å‚æ•°ï¼Œæœ‰3ç»´ T *residual) const { residual[0] = T(_y) - ceres::exp(abc[0] * T(_x) * T(_x) + abc[1] * T(_x) + abc[2]); // y-exp(ax^2+bx+c) return true; } const double _x, _y; // x,yæ•°æ®};int main(int argc, char **argv) { double ar = 1.0, br = 2.0, cr = 1.0; // çœŸå®å‚æ•°å€¼ double ae = 2.0, be = -1.0, ce = 5.0; // ä¼°è®¡å‚æ•°å€¼ int N = 100; // æ•°æ®ç‚¹ double w_sigma = 1.0; // å™ªå£°Sigmaå€¼ double inv_sigma = 1.0 / w_sigma; cv::RNG rng; // OpenCVéšæœºæ•°äº§ç”Ÿå™¨ vector&lt;double&gt; x_data, y_data; // æ•°æ® for (int i = 0; i &lt; N; i++) { double x = i / 100.0; x_data.push_back(x); y_data.push_back(exp(ar * x * x + br * x + cr) + rng.gaussian(w_sigma * w_sigma)); } double abc[3] = {ae, be, ce}; // æ„å»ºæœ€å°äºŒä¹˜é—®é¢˜ ceres::Problem problem; for (int i = 0; i &lt; N; i++) { // é¦–å…ˆå®šä¹‰è‡ªåŠ¨æ±‚å¯¼å‡½æ•° ceres::AutoDiffCostFunction&lt;CURVE_FITTING_COST, 1, 3&gt; *costfunction = new ceres::AutoDiffCostFunction&lt;CURVE_FITTING_COST, 1, 3&gt;(new CURVE_FITTING_COST(x_data[i], y_data[i])); problem.AddResidualBlock(// å‘é—®é¢˜ä¸­æ·»åŠ è¯¯å·®é¡¹ costfunction, nullptr, // æ ¸å‡½æ•°ï¼Œå› ä¸ºè¿™é‡Œä¸æ€ä¹ˆä½¿ç”¨ï¼Œä¸ºç©º abc // å¾…ä¼°è®¡å‚æ•°ï¼Œè¿™é‡Œçš„æ•°æ®ç±»å‹æ˜¯ ); } // é…ç½®æ±‚è§£å™¨ ceres::Solver::Options options; // è¿™é‡Œæœ‰å¾ˆå¤šé…ç½®é¡¹å¯ä»¥å¡« options.linear_solver_type = ceres::DENSE_NORMAL_CHOLESKY; // å¢é‡æ–¹ç¨‹å¦‚ä½•æ±‚è§£ options.minimizer_progress_to_stdout = true; // è¾“å‡ºåˆ°cout ceres::Solver::Summary summary; // ä¼˜åŒ–ä¿¡æ¯ chrono::steady_clock::time_point t1 = chrono::steady_clock::now(); ceres::Solve(options, &amp;problem, &amp;summary); // å¼€å§‹ä¼˜åŒ– chrono::steady_clock::time_point t2 = chrono::steady_clock::now(); chrono::duration&lt;double&gt; time_used = chrono::duration_cast&lt;chrono::duration&lt;double&gt;&gt;(t2 - t1); cout &lt;&lt; &quot;solve time cost = &quot; &lt;&lt; time_used.count() &lt;&lt; &quot; seconds. &quot; &lt;&lt; endl; // è¾“å‡ºç»“æœ cout &lt;&lt; summary.BriefReport() &lt;&lt; endl; cout &lt;&lt; &quot;estimated a,b,c = &quot;; for (auto a:abc) cout &lt;&lt; a &lt;&lt; &quot; &quot;; cout &lt;&lt; endl; return 0;} å®šä¹‰æ®‹å·®å—çš„ç±»ã€‚æ–¹æ³•æ˜¯ä¹¦å†™-ä¸€ä¸ªç±»(æˆ–ç»“æ„ä½“)ï¼Œå¹¶åœ¨ç±»ä¸­å®šä¹‰å¸¦æ¨¡æ¿å‚æ•°çš„()è¿ç®—ç¬¦ï¼Œè¿™æ ·è¯¥ç±»å°±æˆä¸ºäº†ä¸€ä¸ªæ‹Ÿå‡½æ•°( Functor)ã€‚è¿™ç§å®šä¹‰æ–¹å¼ä½¿å¾—Cereså¯ä»¥åƒè°ƒç”¨å‡½æ•°-æ ·,å¯¹è¯¥ç±»çš„æŸä¸ªå¯¹è±¡(æ¯”å¦‚a)è°ƒç”¨a()æ–¹æ³•ã€‚äº‹å®ä¸Šï¼ŒCeresä¼šæŠŠé›…å¯æ¯”çŸ©é˜µä½œä¸ºç±»å‹å‚æ•°ä¼ äººæ­¤å‡½æ•°ï¼Œä»è€Œå®ç°è‡ªåŠ¨æ±‚å¯¼çš„åŠŸèƒ½ã€‚ ç¨‹åºä¸­çš„double abc[3]å³å‚æ•°å—ï¼Œè€Œå¯¹äºæ®‹å·®å—ï¼Œæˆ‘ä»¬å¯¹æ¯ä¸€ä¸ªæ•°æ®æ„é€ CURVE_ FITTING_ COSTå¯¹è±¡ï¼Œç„¶åè°ƒç”¨AddResidualBlockå°†è¯¯å·®é¡¹æ·»åŠ åˆ°ç›®æ ‡å‡½æ•°ä¸­ã€‚ç”±äºä¼˜åŒ–éœ€è¦æ¢¯åº¦ï¼Œæˆ‘ä»¬æœ‰è‹¥å¹²ç§é€‰æ‹©: ä½¿ç”¨Ceresçš„è‡ªåŠ¨æ±‚å¯¼( AutoDiff)ï¼› ä½¿ç”¨æ•°å€¼æ±‚å¯¼( Numeric Diff) ; è‡ªè¡Œæ¨å¯¼è§£æçš„å¯¼æ•°å½¢å¼ï¼Œæä¾›ç»™Ceresã€‚å› ä¸ºè‡ªåŠ¨æ±‚å¯¼åœ¨ç¼–ç ä¸Šæ˜¯æœ€æ–¹ä¾¿çš„ï¼Œäºæ˜¯æˆ‘ä»¬ä½¿ç”¨è‡ªåŠ¨æ±‚å¯¼ã€‚ è‡ªåŠ¨æ±‚å¯¼éœ€è¦æŒ‡å®šè¯¯å·®é¡¹å’Œä¼˜åŒ–å˜é‡çš„ç»´åº¦ã€‚è¿™é‡Œçš„è¯¯å·®æ˜¯æ ‡é‡ï¼Œç»´åº¦ä¸º1ï¼›ä¼˜åŒ–çš„æ˜¯a,b,cä¸‰ä¸ªé‡ï¼Œç»´åº¦ä¸º3ã€‚äºæ˜¯ï¼Œåœ¨è‡ªåŠ¨æ±‚å¯¼ç±»AutoDiffCostFunctionçš„æ¨¡æ¿å‚æ•°ä¸­è®¾å®šå˜é‡ç»´åº¦ä¸º1ã€3ã€‚ è®¾å®šå¥½é—®é¢˜åï¼Œè°ƒç”¨Solveå‡½æ•°è¿›è¡Œæ±‚è§£ã€‚ä½ å¯ä»¥åœ¨optionsé‡Œé…ç½®(éå¸¸è¯¦ç»†çš„)ä¼˜åŒ–é€‰é¡¹ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥é€‰æ‹©ä½¿ç”¨Line Searchè¿˜æ˜¯Trust Regionã€è¿­ä»£æ¬¡æ•°ã€æ­¥é•¿ï¼Œç­‰ç­‰ã€‚è¯»è€…å¯ä»¥æŸ¥çœ‹Optionsçš„å®šä¹‰ï¼Œçœ‹çœ‹æœ‰å“ªäº›ä¼˜åŒ–æ–¹æ³•å¯é€‰ï¼Œå½“ç„¶é»˜è®¤çš„é…ç½®å·²ç»å¯ç”¨äºå¾ˆå¹¿æ³›çš„é—®é¢˜äº†ã€‚ åŸºäºG2Oçš„æ›²çº¿æ‹Ÿåˆéçº¿æ€§çš„æœ€å°äºŒä¹˜ä¼˜åŒ–è¿‡ç¨‹ä¸­ï¼Œæ˜¯ç”±å¾ˆå¤šçš„è¯¯å·®é¡¹ç»„æˆï¼Œä½†æ˜¯æˆ‘ä»¬å°šä¸æ¸…æ¥šè¿™äº›è¯¯å·®é¡¹ä¹‹é—´çš„ä¸€äº›å…³ç³»ï¼Œæ¯”å¦‚æœ‰äº›ä¼˜åŒ–å˜é‡è·¨è¶Šäº†å¤šä¸ªè¯¯å·®é¡¹ï¼Œäºæ˜¯å°±æœ‰äº†å›¾ä¼˜åŒ–ã€‚ å›¾ä¼˜åŒ–çš„é¡¶ç‚¹è¡¨ç¤ºä¼˜åŒ–å˜é‡ï¼Œè¾¹ä»£è¡¨è¯¯å·®é¡¹ã€‚äºæ˜¯å°±å°†æˆ‘ä»¬çš„å¦‚æ„æ¶æˆä¸€ä¸ªå›¾ï¼Œå¹¶ä¸”è¿™ä¸ªå›¾å’Œæˆ‘ä»¬çš„æœ€å°äºŒä¹˜ä¼˜åŒ–å‡½æ•°æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚ ä¸‹å›¾æ‰€ç¤ºï¼Œä¸‰è§’å½¢ä»£è¡¨ç›¸æœºçš„ä½å§¿ç»“ç‚¹ï¼Œåœ†å½¢ä»£è¡¨è·¯æ ‡ç‚¹ï¼Œå®ƒä»¬æ„å»ºæˆäº†å›¾ä¼˜åŒ–çš„é¡¶ç‚¹ã€‚å¯¹äºè¾¹æ¥è¯´ï¼Œå®çº¿ä»£è¡¨ç›¸æœºçš„è¿åŠ¨æ¨¡å‹ï¼Œè™šçº¿ä»£è¡¨è§‚æµ‹æ–¹ç¨‹ã€‚ å¯¹äºæ›²çº¿çš„æ‹Ÿåˆè¿‡ç¨‹ï¼Œæ•´ä¸ªé—®é¢˜ç”±äºåªæœ‰ä¸€ä¸ªè¯¯å·®é¡¹çš„è¡¨è¾¾å¼ï¼Œæ•´ä¸ªæ¨¡å‹çš„ä¼˜åŒ–å‚æ•°å°±åªæœ‰ä¸€ä¸ªå‘é‡$a,b,c$ ï¼Œäºæ˜¯è¯¯å·®é¡¹åªæœ‰ä¸€æ¡è¾¹ï¼Œå³ä¸€ä¸ªä¸€å…ƒè¾¹ã€‚ G2Oçš„ä½¿ç”¨æ­¥éª¤å¤§æ¦‚ä¸ºï¼š å®šä¹‰é¡¶ç‚¹å’Œè¾¹çš„ç±»å‹ï¼› æ„å»ºå›¾ï¼› é€‰æ‹©ä¼˜åŒ–ç®—æ³•ï¼› è°ƒç”¨g2o è¿›è¡Œä¼˜åŒ–ï¼Œè¿”å›ç»“æœã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126#include &lt;iostream&gt;#include &lt;g2o/core/g2o_core_api.h&gt;#include &lt;g2o/core/base_vertex.h&gt;#include &lt;g2o/core/base_unary_edge.h&gt;#include &lt;g2o/core/block_solver.h&gt;#include &lt;g2o/core/optimization_algorithm_levenberg.h&gt;#include &lt;g2o/core/optimization_algorithm_gauss_newton.h&gt;#include &lt;g2o/core/optimization_algorithm_dogleg.h&gt;#include &lt;g2o/solvers/dense/linear_solver_dense.h&gt;#include &lt;Eigen/Core&gt;#include &lt;opencv2/core/core.hpp&gt;#include &lt;cmath&gt;#include &lt;chrono&gt;using namespace std;// æ›²çº¿æ¨¡å‹çš„é¡¶ç‚¹ï¼Œæ¨¡æ¿å‚æ•°ï¼šä¼˜åŒ–å˜é‡ç»´åº¦å’Œæ•°æ®ç±»å‹class CurveFittingVertex : public g2o::BaseVertex&lt;3, Eigen::Vector3d&gt; {public: EIGEN_MAKE_ALIGNED_OPERATOR_NEW // é‡ç½® virtual void setToOriginImpl() override { _estimate &lt;&lt; 0, 0, 0; } // æ›´æ–° virtual void oplusImpl(const double *update) override { _estimate += Eigen::Vector3d(update); } // å­˜ç›˜å’Œè¯»ç›˜ï¼šç•™ç©º virtual bool read(istream &amp;in) {} virtual bool write(ostream &amp;out) const {}};// è¯¯å·®æ¨¡å‹ æ¨¡æ¿å‚æ•°ï¼šè§‚æµ‹å€¼ç»´åº¦ï¼Œç±»å‹ï¼Œè¿æ¥é¡¶ç‚¹ç±»å‹class CurveFittingEdge : public g2o::BaseUnaryEdge&lt;1, double, CurveFittingVertex&gt; {public: EIGEN_MAKE_ALIGNED_OPERATOR_NEW CurveFittingEdge(double x) : BaseUnaryEdge(), _x(x) {} // è®¡ç®—æ›²çº¿æ¨¡å‹è¯¯å·® virtual void computeError() override { const CurveFittingVertex *v = static_cast&lt;const CurveFittingVertex *&gt; (_vertices[0]); const Eigen::Vector3d abc = v-&gt;estimate(); _error(0, 0) = _measurement - std::exp(abc(0, 0) * _x * _x + abc(1, 0) * _x + abc(2, 0)); } // è®¡ç®—é›…å¯æ¯”çŸ©é˜µ virtual void linearizeOplus() override { const CurveFittingVertex *v = static_cast&lt;const CurveFittingVertex *&gt; (_vertices[0]); const Eigen::Vector3d abc = v-&gt;estimate(); double y = exp(abc[0] * _x * _x + abc[1] * _x + abc[2]); _jacobianOplusXi[0] = -_x * _x * y; _jacobianOplusXi[1] = -_x * y; _jacobianOplusXi[2] = -y; } virtual bool read(istream &amp;in) {} virtual bool write(ostream &amp;out) const {}public: double _x; // x å€¼ï¼Œ y å€¼ä¸º _measurement};int main(int argc, char **argv) { double ar = 1.0, br = 2.0, cr = 1.0; // çœŸå®å‚æ•°å€¼ double ae = 2.0, be = -1.0, ce = 5.0; // ä¼°è®¡å‚æ•°å€¼ int N = 100; // æ•°æ®ç‚¹ double w_sigma = 1.0; // å™ªå£°Sigmaå€¼ double inv_sigma = 1.0 / w_sigma; cv::RNG rng; // OpenCVéšæœºæ•°äº§ç”Ÿå™¨ vector&lt;double&gt; x_data, y_data; // æ•°æ® for (int i = 0; i &lt; N; i++) { double x = i / 100.0; x_data.push_back(x); y_data.push_back(exp(ar * x * x + br * x + cr) + rng.gaussian(w_sigma * w_sigma)); } // æ„å»ºå›¾ä¼˜åŒ–ï¼Œå…ˆè®¾å®šg2o typedef g2o::BlockSolver&lt;g2o::BlockSolverTraits&lt;3, 1&gt;&gt; BlockSolverType; // æ¯ä¸ªè¯¯å·®é¡¹ä¼˜åŒ–å˜é‡ç»´åº¦ä¸º3ï¼Œè¯¯å·®å€¼ç»´åº¦ä¸º1 typedef g2o::LinearSolverDense&lt;BlockSolverType::PoseMatrixType&gt; LinearSolverType; // çº¿æ€§æ±‚è§£å™¨ç±»å‹ // æ¢¯åº¦ä¸‹é™æ–¹æ³•ï¼Œå¯ä»¥ä»GN, LM, DogLeg ä¸­é€‰ auto solver = new g2o::OptimizationAlgorithmGaussNewton( g2o::make_unique&lt;BlockSolverType&gt;(g2o::make_unique&lt;LinearSolverType&gt;())); g2o::SparseOptimizer optimizer; // å›¾æ¨¡å‹ optimizer.setAlgorithm(solver); // è®¾ç½®æ±‚è§£å™¨ optimizer.setVerbose(true); // æ‰“å¼€è°ƒè¯•è¾“å‡º // å¾€å›¾ä¸­å¢åŠ é¡¶ç‚¹ CurveFittingVertex *v = new CurveFittingVertex(); v-&gt;setEstimate(Eigen::Vector3d(ae, be, ce)); v-&gt;setId(0); optimizer.addVertex(v); // å¾€å›¾ä¸­å¢åŠ è¾¹ for (int i = 0; i &lt; N; i++) { CurveFittingEdge *edge = new CurveFittingEdge(x_data[i]); edge-&gt;setId(i); edge-&gt;setVertex(0, v); // è®¾ç½®è¿æ¥çš„é¡¶ç‚¹ edge-&gt;setMeasurement(y_data[i]); // è§‚æµ‹æ•°å€¼ edge-&gt;setInformation(Eigen::Matrix&lt;double, 1, 1&gt;::Identity() * 1 / (w_sigma * w_sigma)); // ä¿¡æ¯çŸ©é˜µï¼šåæ–¹å·®çŸ©é˜µä¹‹é€† optimizer.addEdge(edge); } // æ‰§è¡Œä¼˜åŒ– cout &lt;&lt; &quot;start optimization&quot; &lt;&lt; endl; chrono::steady_clock::time_point t1 = chrono::steady_clock::now(); optimizer.initializeOptimization(); optimizer.optimize(10); chrono::steady_clock::time_point t2 = chrono::steady_clock::now(); chrono::duration&lt;double&gt; time_used = chrono::duration_cast&lt;chrono::duration&lt;double&gt;&gt;(t2 - t1); cout &lt;&lt; &quot;solve time cost = &quot; &lt;&lt; time_used.count() &lt;&lt; &quot; seconds. &quot; &lt;&lt; endl; // è¾“å‡ºä¼˜åŒ–å€¼ Eigen::Vector3d abc_estimate = v-&gt;estimate(); cout &lt;&lt; &quot;estimated model: &quot; &lt;&lt; abc_estimate.transpose() &lt;&lt; endl; return 0;} åœ¨è¿™ä¸ªç¨‹åºä¸­ï¼Œæˆ‘ä»¬ä»g2oæ´¾ç”Ÿå‡ºäº†ç”¨äºæ›²çº¿æ‹Ÿåˆçš„å›¾ä¼˜åŒ–é¡¶ç‚¹å’Œè¾¹: CurveFittingVertex å’ŒCurveFittingEdgeï¼Œè¿™å®è´¨ä¸Šæ‰©å±•äº†g2oçš„ä½¿ç”¨æ–¹å¼ã€‚è¿™ä¸¤ä¸ªç±»åˆ†åˆ«æ´¾ç”Ÿè‡ªBaseVertexå’ŒBaseU-naryEdgeç±»ã€‚åœ¨æ´¾ç”Ÿç±»ä¸­ï¼Œæˆ‘ä»¬é‡å†™äº†é‡è¦çš„è™šå‡½æ•°: é¡¶ç‚¹çš„æ›´æ–°å‡½æ•°ï¼šoplusImplã€‚æˆ‘ä»¬çŸ¥é“ä¼˜åŒ–è¿‡ç¨‹æœ€é‡è¦çš„æ˜¯å¢é‡$â–³x_k$çš„è®¡ç®—ï¼Œè€Œè¯¥å‡½æ•°å¤„ç†çš„æ˜¯$x_{k+1} =x_{k} +â–³x_k$çš„è¿‡ç¨‹ã€‚ é¡¶ç‚¹çš„é‡ç½®å‡½æ•°: setToOriginlmplã€‚ è¿™æ˜¯å¹³å‡¡çš„ï¼Œæˆ‘ä»¬æŠŠä¼°è®¡å€¼ç½®é›¶å³å¯ã€‚ è¾¹çš„è¯¯å·®è®¡ç®—å‡½æ•°ï¼šcomputeErrorã€‚è¯¥å‡½æ•°éœ€è¦å–å‡ºè¾¹æ‰€è¿æ¥çš„é¡¶ç‚¹çš„å½“å‰ä¼°è®¡å€¼ï¼Œæ ¹æ®æ›²çº¿æ¨¡å‹ï¼Œä¸å®ƒçš„è§‚æµ‹å€¼è¿›è¡Œæ¯”è¾ƒã€‚è¿™å’Œæœ€å°äºŒä¹˜é—®é¢˜ä¸­çš„è¯¯å·®æ¨¡å‹æ˜¯ä¸€è‡´çš„ã€‚ è¾¹çš„é›…å¯æ¯”è®¡ç®—å‡½æ•°: linearizeOplusè¿™ä¸ªå‡½æ•°é‡Œæˆ‘ä»¬è®¡ç®—äº†æ¯æ¡è¾¹ç›¸å¯¹äºé¡¶ç‚¹çš„é›…å¯æ¯”ã€‚ å­˜ç›˜å’Œè¯»ç›˜å‡½æ•°: readã€ writeã€‚ç”±äºæˆ‘ä»¬å¹¶ä¸æƒ³è¿›è¡Œè¯»/å†™æ“ä½œï¼Œæ‰€ä»¥ç•™ç©ºã€‚å®šä¹‰äº†é¡¶ç‚¹å’Œè¾¹ä¹‹å,æˆ‘ä»¬åœ¨mainå‡½æ•°é‡Œå£°æ˜äº†ä¸€ä¸ªå›¾æ¨¡å‹ï¼Œç„¶åæŒ‰ç…§ç”Ÿæˆçš„å™ªå£°æ•°æ®ï¼Œå¾€å›¾æ¨¡å‹ä¸­æ·»åŠ é¡¶ç‚¹å’Œè¾¹ï¼Œæœ€åè°ƒç”¨ä¼˜åŒ–å‡½æ•°è¿›è¡Œä¼˜åŒ–ã€‚","link":"/2022/04/06/SLAM/ch6-%E9%9D%9E%E7%BA%BF%E6%80%A7%E4%BC%98%E5%8C%96-%E5%AE%9E%E8%B7%B5%E9%83%A8%E5%88%86/"},{"title":"è‡ªæ³¨æ„åŠ›æœºåˆ¶Self Attention","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡å‚è€ƒçš„æ˜¯æå®æ¯…çš„è§†é¢‘ï¼Œä¸»è¦è®²è§£çš„æ˜¯self-atttentionæœºåˆ¶çš„ä¸»è¦åŸç†ï¼Œå› ä¸ºå…¶ä¸»è¦æœºåˆ¶æ˜¯transformeræ¨¡å‹çš„é‡è¦çš„ç»„æˆéƒ¨åˆ†ï¼Œæœ¬æ–‡ä»è¾“å…¥è¾“å‡ºï¼Œä»¥åŠå…³è”åº¦è®¡ç®—ç­‰æ–¹é¢è¿›è¡Œè¯¦ç»†çš„ä»‹ç»ã€‚è§†é¢‘çš„å…·ä½“é“¾æ¥ï¼šhttps://www.bilibili.com/video/BV1Wv411h7kN?p=39&amp;spm_id_from=pageDriver æ¨¡å‹çš„è¾“å…¥ é—®é¢˜çš„å¼•å…¥ï¼šé’ˆå¯¹è¾“å…¥çš„ç‰¹å¾æ˜¯ä¸€ä¸ªé•¿åº¦å¯å˜çš„å‘é‡çš„é—®é¢˜ï¼Œä¸»è¦ä¾‹å­æœ‰ï¼š æ–‡å­—å¤„ç†ï¼Œè¿™é‡Œçš„è¾“å…¥æ˜¯ä¸€ç³»åˆ—çš„å¥å­ï¼Œä¸”è¿™äº›å¥å­çš„é•¿åº¦æ˜¯ä¸ä¸€æ ·çš„ã€‚æ¯”å¦‚å¯ä»¥å°†æ–‡å­—è¿›è¡Œç¼–ç å¾—åˆ°ä¸€ä¸ªå‘é‡æ¥è¡¨ç¤ºè¯æ±‡çš„ä¿¡æ¯ï¼Œå¸¸è§çš„æ–¹æ³•æœ‰ one-hotç¼–ç å’Œ word-embeddingã€‚ è¿™é‡Œone-hotç¼–ç çš„ç»´åº¦æ˜¯è¯è¢‹é‡Œçš„æ‰€æœ‰çš„å†…å®¹çš„ä¸ªæ•°ï¼Œè¿™æ ·çš„ç¼ºç‚¹æ˜¯ç¼–ç å‘é‡çš„ç»´åº¦è¿‡äºçš„é•¿ï¼Œå…¶æ¬¡æ˜¯æ‰€æœ‰çš„è¯æ±‡é»˜è®¤æ˜¯ç›¸äº’ç‹¬ç«‹çš„ã€‚ äºæ˜¯å¼•å…¥äº†Word-Embbedingçš„æ–¹æ³•ï¼Œè¿™é‡ŒåµŒå…¥äº†ä¸€äº›è¯­ä¹‰ä¸Šçš„ä¿¡æ¯ï¼Œå¯è§†åŒ–ä¹‹åå¯è§ä¸€äº›ç›¸ä¼¼çš„è¯æ±‡ä¹‹é—´çš„è·ç¦»æ˜¯æ¯”è¾ƒè¿‘çš„ï¼Œèšé›†åœ¨ä¸€èµ·çš„ã€‚ å£°éŸ³ä¿¡å·ï¼Œå…¶å®å°±æ˜¯ä¸€æ’å‘é‡ï¼Œè¿™é‡Œé‡‡ç”¨çš„æ˜¯æ»‘åŠ¨çš„çª—å£æ³•ï¼Œæ¯ä¸ªçª—å£frameçš„é•¿åº¦æ˜¯25msçš„å£°éŸ³ä¿¡å·æ‰€æºå¸¦çš„ä¿¡æ¯ï¼Œæ¯æ¬¡æ»‘åŠ¨éƒ½ç§»åŠ¨10msã€‚ äºæ˜¯1s çš„å£°éŸ³ä¿¡å·å°±è•´å«ç€100ä¸ªframesï¼Œå³100ä¸ªå‘é‡ã€‚ å›¾ï¼Œä¸€ä¸ªä¸­çš„æ¯ä¸ªç»“ç‚¹å°±å¯¹äºä¸€ä¸ªå‘é‡ï¼Œæ¯ä¸ªç»´åº¦åŒ…å«ç€äººçš„å„ç§å±æ€§ä¿¡æ¯ã€‚ åˆ†å­ï¼Œä¸€ä¸ªåˆ†å­å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªå›¾ï¼Œä½¿ç”¨one-hotç¼–ç å‘é‡æ¥è¡¨ç¤ºæ¯ä¸ªåŸå­ï¼Œè¿™é‡Œæ˜¯ä¸€ä¸ªæœ‰æœºç‰©çš„ç»“æ„ï¼Œå°†æ¯ä¸ªåˆ†å­ä½¿ç”¨ä¸€ä¸ªå‘é‡æ¥è¡¨ç¤ºã€‚ æ¨¡å‹çš„è¾“å‡ºå·²çŸ¥è¾“å…¥ä¸ºä¸åŒçš„å‘é‡ï¼Œé‚£ä¹ˆè¾“å‡ºå¯¹åº”é•¿åº¦çš„label(åˆ†ç±»é—®é¢˜)ã€æ•°å€¼(å›å½’)ã€‚ Each vector has a label.è¿™é‡Œæ˜¯æ¯ä¸ªå‘é‡éƒ½æœ‰ä¸€ä¸ªLabelå…¶å…·ä½“çš„ä¾‹å­æœ‰ä»¥ä¸‹å‡ ä¸ªï¼Œ é¦–å…ˆæ˜¯è¯æ€§çš„è¡¨è¾¾ï¼Œå°±æ˜¯è¾“å…¥æ˜¯ä¸€ä¸ªå¥å­çš„ï¼Œè¾“å‡ºæ˜¯ä¸€ä¸ªæ¯ä¸ªå•è¯å¯¹åº”çš„è¯æ€§ï¼Œå‰åæœ‰ä¸¤ä¸ªsawï¼Œä½†æ˜¯å…¶å¯¹åº”çš„è¯æ€§æ˜¯ä¸åŒçš„ã€‚ ä¹‹åæ˜¯å£°éŸ³çš„è¾¨è¯†ï¼Œå°±æ˜¯å°†æ¯ä¸€ä¸ªå£°éŸ³å‘é‡çš„ä»£è¡¨çš„ä¿¡æ¯è¿›è¡Œè¾“å‡ºã€‚ The whole sequence has a label.è¿™é‡Œæ˜¯ä¸€æ•´ä¸ªåºåˆ—éƒ½ä¼šå¯¹åº”ä¸€ä¸ªlabel ç¬¬ä¸€ä¸ªä¾‹å­å°±æ˜¯æƒ…æ„Ÿåˆ†æé—®é¢˜ï¼Œè¾“å…¥æ—¶ä¸€ä¸ªå¥å­ï¼Œå³å¤šä¸ªå‘é‡ï¼Œè¾“å‡ºæ—¶ä¸€ä¸ªå¯¹åº”çš„æƒ…æ„Ÿçš„æ ‡ç­¾ã€‚ ç¬¬äºŒä¸ªä¾‹å­å°±æ˜¯è¯­è€…è¾¨è®¤ï¼Œå°±æ˜¯è¾“å‡ºè¯´è¿™å¥è¯çš„äººã€‚ ç¬¬ä¸‰ä¸ªä¾‹å­å°±æ˜¯æ¯’æ€§çš„è¾¨è®¤ï¼Œå°†åŒ–å­¦ç»“æ„çš„ç¼–ç è¾“å…¥å¾—å‡ºå…¶æœ‰æ¯’çš„æ¦‚ç‡æˆ–è€…æ˜¯å¦æœ‰æ¯’ã€‚ Model decides the number of labels itself.æœºå™¨è‡ªä¸»å†³å®šè¾“å‡ºçš„ç»“æœçš„é•¿åº¦ï¼Œè¿™æ˜¯å…¸å‹çš„seq2seqæ¨¡å‹ã€‚ ä»¥ä¸‹å°†ç€é‡å…³æ³¨å‰ä¸¤ä¸ªé—®é¢˜ã€‚ Sequence Labeling ç¬¬ä¸€ç§è§£å†³é—®é¢˜çš„æ€è·¯æ˜¯ä½¿ç”¨ä¸€ä¸ªFully-Connected ç½‘ç»œæ¥è¿›è¡Œè§£é‡Šï¼Œä½†æ˜¯å¯¹äºä¸¤ä¸ªè¾“å…¥ç›¸åŒçš„sawï¼Œä½¿ç”¨è¿™ç§æ–¹æ³•å¾—å‡ºçš„ç»“æœæ˜¯ç›¸åŒçš„ï¼Œé‚£å¦‚ä½•å¤„ç†ç½‘ç»œï¼Œä½¿å¾—ç½‘ç»œå¯ä»¥å­¦åˆ°ä¸Šä¸‹æ–‡çš„ä¿¡æ¯ï¼Ÿ è¿™ä¸ªå¯ä»¥çš„ï¼Œç­”æ¡ˆæ˜¯å°†ç›¸é‚»çš„å‡ ä¸ªå‘é‡çš„ç»“æœéƒ½ä¸€åŒè¾“å…¥åˆ°ç¥ç»ç½‘ç»œä¸­å³å¯ã€‚ ä½†æ˜¯æˆ‘ä»¬çš„å¥å­çš„é•¿åº¦æ˜¯ä¸åŒçš„ï¼Œæœ‰çš„é•¿åº¦é•¿ï¼Œæœ‰çš„é•¿åº¦çŸ­ï¼Œå¦‚æœå–ä¸€ä¸ªç‰¹åˆ«é•¿çš„Windowæ¥åŒ…å«çš„è¯ä¼šé€ æˆä¸€å®šçš„æµªè´¹ï¼Œè€Œä¸”å¯èƒ½ä¼šé€ æˆä¸€å®šçš„è¿‡æ‹Ÿåˆã€‚ ä¹‹åå°±å¼•å‡ºæˆ‘ä»¬ä»Šå¤©çš„ä¸»è§’self-attentionï¼Œè¿™ä¸ªç½‘ç»œå…¶å®å°±æ˜¯åŠ å…¥äº†ä¸€ä¸ªSelf-Attentionå±‚æ¥è€ƒè™‘ä¸€æ•´ä¸ªå¥å­çš„ä¿¡æ¯ä¹‹åå°†è¾“å‡ºçš„ä¿¡æ¯å¯¼å…¥ä¸€ä¸ªFCå±‚ã€‚ ä½†æ˜¯Self-Attentionçš„ç»“æ„å…¶å®å¹¶ä¸å”¯ä¸€ï¼Œè¿˜å¯ä»¥å°†å¤šä¸ªSelf-Attentionå±‚å’ŒFCå±‚è¿›è¡Œäº¤æ›¿å åŠ å¾—å‡ºç»“æœã€‚ self-attentionçš„æœºç†æ¥ä¸‹æ¥å°†å…·ä½“çš„è®²è§£self-attentionçš„å…·ä½“çš„äº§ç”Ÿæœºç†ï¼Œé¦–å…ˆself-attentionå±‚çš„è¾“å…¥å¯èƒ½æ˜¯åŸå§‹çš„è¾“å…¥ï¼Œä¹Ÿå¯èƒ½æ˜¯æŸä¸ªéšè—å±‚hidden layerã€‚ é¦–å…ˆï¼Œç¡®å®šè¾“å…¥å‘é‡ä¹‹é—´çš„å…³è”æ€§ï¼Œå¦‚å›¾æ‰€ç¤ºæ˜¯ç¡®å®šå‘é‡$a^1$å’Œå…¶ä»–å‘é‡$a^2,a^3,a^4$çš„å…³è”ç¨‹åº¦ã€‚é‚£é—®é¢˜æ¥äº†ï¼Œç”¨è¿™ä¸ªå…³è”ç¨‹åº¦åº”è¯¥å¦‚ä½•å–é‡åŒ–ï¼Ÿ ä¹‹åï¼Œè®¡ç®—å…³è”ç¨‹åº¦ï¼Œæ¯”è¾ƒå¸¸è§çš„åšæ³•Dot-productæ³•å’Œadditiveæ³•ã€‚ä½†æ˜¯ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒDot-productæ³•ä½¿ç”¨çš„æ¯”è¾ƒå¤šã€‚ è¿™é‡ŒDot-producté¦–å…ˆå°†è¾“å…¥çš„è¯å‘é‡ä¹˜ä»¥ä¸€ä¸ªå˜æ¢çŸ©é˜µï¼Œå°†å¾—å‡ºçš„ç»“æœè¿›è¡Œç‚¹æˆå¾—å‡ºå…³è”åº¦çš„æŒ‡æ ‡ã€‚ ç„¶åï¼Œæœ‰äº†å…³è”åº¦$\\alpha$çš„è®¡ç®—æ–¹æ³•ï¼Œæˆ‘ä»¬ä¹‹åå¸¦å…¥åˆ°æ•´ä¸ªæ¡†æ¶é‡Œè®¡ç®—ã€‚ è¿™é‡Œæˆ‘ä»¬è¦è®¡ç®—$a^1$å’Œå…¶ä»–å‘é‡çš„å…³è”æ€§ï¼Œäºæ˜¯å°†$a^1$ä¹˜ä»¥å˜åŒ–çŸ©é˜µ$W^q$å¾—å‡ºqueryï¼Œå…¶ä»–çš„å‡ ä¸ªä¹˜ä»¥$W^k$å¾—å‡ºkeyï¼Œäºæ˜¯å°†$q^1$åˆ†åˆ«å’Œ$k^i\\ (i=2,3,4)$ è¿›è¡Œç‚¹ä¹˜å¯å¾—æ¯ä¸ªçš„ç›¸ä¼¼åº¦ã€‚ ä½†æ˜¯å•è¯ä¸€èº«çš„ç›¸ä¼¼åº¦ä¹Ÿéœ€è¦è¿›è¡Œè®¡ç®—ï¼Œå› æ­¤$a^1$è‡ªå·±ä¹Ÿè¦ä¹˜ä»¥$W^k$å¾—å‡º$k^1$ç„¶åå°†å…¶å’Œ$q^1$è¿›è¡Œç‚¹ä¹˜æ¥è®¡ç®—è‡ªèº«çš„å…³è”åº¦ã€‚(è‡ªèº«çš„å…³è”æ€§è®¡ç®—å…¶å®å¾ˆé‡è¦) è¿™è¾¹åˆ†ç±»ä½¿ç”¨çš„æ˜¯Softmaxï¼Œå½“ç„¶å…¶å®Softmaxå…¶å®ä¸ä¸€å®šæ˜¯æœ€ä½³çš„ï¼Œä½†æ˜¯åŸè®ºæ–‡ä½¿ç”¨çš„è¿™ä¸ªï¼Œä¹Ÿè®¸Reluçš„æ•ˆæœä¹Ÿæ˜¯ä¸é”™çš„ã€‚ ä¹‹åï¼Œæ ¹æ®è®¡ç®—çš„ç›¸ä¼¼åº¦æ¥æŠ½å–å…¶ä¸­è•´å«çš„é‡è¦çš„å’¨è¯¢ï¼Œå°†æ¯ä¸ªå‘é‡ä¹˜ä»¥$W^v$å¾—å‡ºvalueå€¼$v^i\\ (i=1,2,3,4)$ ã€‚ è¿™æ ·è®¡ç®—å¾—å‡ºçš„ç»“æœ$b^1$ä¼šå¾ˆè¶‹å‘é‚£ä¸ªå’Œ$a^1$çš„ç›¸ä¼¼åº¦è¾ƒå¤§é¡¹å¯¹åº”çš„$v^i$ Valueå€¼ï¼Œä¹Ÿå°±æ˜¯æå–å‡ºç›¸ä¼¼åº¦æœ€å¤§é¡¹çš„ä¿¡æ¯ã€‚ æœ€åï¼ŒåŒç†è®¡ç®—å‡ºå…¶ä»–çš„ä¿¡æ¯ã€‚è¿™é‡Œçš„è®¡ç®—è¿‡ç¨‹æ˜¯å¹¶è¡Œçš„ï¼Œå¯¹æ¯”LSTMçš„è®¡ç®—æ˜¯é¡ºåºè¿›è¡Œã€‚ æ¥ä¸‹æ¥ä»çŸ©é˜µä¹˜æ³•çš„è§’åº¦æ¥é‡æ–°ç†è§£ä¸Šè¿°çš„è¿ç®—è¿‡ç¨‹ã€‚ è¿™é‡Œåªæœ‰$W^q,W^k,W^v$ çš„å‚æ•°æ˜¯éœ€è¦å­¦ä¹ æ‰èƒ½å¾—åˆ°å‚æ•°ã€‚ Mult-head self-attentionè¿™é‡Œheadæ•°ä¹Ÿæ˜¯ä¸€ä¸ªå¯æ§çš„è¶…å‚æ•°ï¼Œå¯¹äºè¯­éŸ³è¾¨è¯†æˆ‘ä»¬å¯ä»¥è°ƒé«˜headæ•°æ¥å¾—åˆ°æ›´å¥½çš„ç»“æœã€‚ ä¸åŒçš„headåˆ†åˆ«è®¡ç®—å„è‡ªçš„ç»“æœï¼Œäº’ä¸å¹²æ‰°ã€‚ æœ€åï¼Œå°†ä¸åŒheadè®¡ç®—çš„ç»“æœä¹˜ä»¥ä¸€ä¸ªçŸ©é˜µæ¥è¿›è¡Œæ‹¼æ¥æ“ä½œï¼Œåˆæˆä¸€ä¸ª$b^i$ ã€‚ Positional Encoding åœ¨ä¸€ä¸ªå¥å­ä¸­ï¼Œæ˜¯ä¸ä¼šå°†è°“è¯­åŠ¨è¯æ”¾åˆ°ç¬¬ä¸€ä½çš„ï¼Œè¿™äº›ä¿¡æ¯å°±å’Œä½ç½®ç¼–ç æœ‰å…³ç³»ã€‚äºæ˜¯è¦ç»™è‡ªæ³¨æ„åŠ›æœºåˆ¶å¢åŠ ä½ç½®ç¼–ç ã€‚ ä½ç½®ä¿¡æ¯å…¶å®å°±æ˜¯ä¸€ä¸ª$e^i$ ï¼Œç›´æ¥åŠ åœ¨$a^i$ å³å¯ã€‚ ä¼ ç»Ÿçš„ä½ç½®ä¿¡æ¯å°±æ˜¯ç»™å¯¹åº”çš„ä½ç½®åŠ ä¸Šä¸€ä¸ª1ï¼Œå…¶ä»–çš„åœ°æ–¹èµ‹å€¼ä¸º0å³å¯ã€‚ ä¸è¿‡è¿™é‡Œæ˜¯ä¸€è¡Œä¸ºä¸€ä¸ªpositionï¼Œè¦æ¨ªç€æ¥çœ‹ï¼Œç¬¬ä¸€ä¸ªå°±æ˜¯cos/sinç¼–ç ã€‚ Many applicationsSelf attention for Speech å¯¹äºè¯­éŸ³ä¿¡å·è€Œè¨€ï¼Œä¸€å°æ®µè¯å°±ä¼šæœ‰å¾ˆå¤šçš„å‘é‡ï¼Œåˆšæ‰å¼€å§‹çš„æ—¶å€™ä¹Ÿé™äº†å£°éŸ³ä¿¡å·ï¼Œå…¶1s å°±å¯¹äºäº†100ä¸ªå‘é‡ï¼Œä¼šé€ æˆè®¡ç®—çš„ç»´åº¦æ¯”è¾ƒå¤§ï¼Œäºæ˜¯æˆ‘ä»¬æ–¹æ³•æ˜¯ä½¿ç”¨Truncated seft-attention çš„æ–¹æ³•ï¼Œæ¯æ¬¡è®¡ç®—åªæ˜¯å…³æ³¨ä¸€å°æ®µä¿¡å·ã€‚ Self-attention for Image è¿™é‡Œæ¯ä¸ªå‘é‡å°±æ˜¯ä¸€ä¸ªåƒç´ ç‚¹çš„RGBï¼Œä¸€ä¸ªæœ‰5*10ä¸ªå‘é‡ã€‚ Self-attention v.s . CNN è¿™é‡ŒCNNç›¸æ¯”äºçœŸæ­£çš„self-attentionæ˜¯ä¸€ç§åœ¨å±€éƒ¨èŒƒå›´çš„ç®€åŒ–ï¼ŒCNNå…¶å®åªå…³æ³¨çš„æ˜¯å¯ä¿¡åŸŸä¹‹å†…çš„ç»“æœï¼Œæ˜¯ä¸€ç§ç®€åŒ–ç‰ˆçš„self-attentionã€‚ è€Œself-attentionè€ƒè™‘çš„å¯èƒ½æ˜¯ä¸€ç§å…¨å±€ä¸Šé¢çš„CNNï¼Œæ˜¯ä¸€ç§å¤æ‚åŒ–çš„å·ç§¯ï¼Œå¯ä¿¡åŸŸçš„èŒƒå›´æ˜¯æœºå™¨è‡ªåŠ¨å­¦ä¹ è€Œä¸æ˜¯äººå·¥åˆ’å®šçš„33ï¼ŒN Nçš„èŒƒå›´ã€‚ å¯¹äºé€šç”¨æ€§è¾ƒå¼ºçš„model éœ€è¦è·Ÿæ›´å¤šçš„æ•°æ®é‡æ‰è¡Œï¼Œè¿™é‡Œself attentionä½¿ç”¨è¾ƒå¤šçš„æ•°æ®é‡æ‰ä¼šæœ‰æ›´å¥½çš„ç»“æœï¼Œä½†æ˜¯ä¸€èˆ¬çš„CNNæˆ–è€…SVMè¿™ç±»æ¨¡å‹å°±ä¸å¤ªéœ€è¦é‚£ä¹ˆå¤šçš„æ•°æ®ï¼Œè€Œä¸”ä¹Ÿä¸å®¹æ˜“overfitting. å¯¹äºRNNæ¥è¯´ï¼Œå¯¹äºè·ç¦»è¾ƒè¿œçš„å‘é‡ï¼Œæœ‰å¯èƒ½æœ‰ä¿¡æ¯çš„ä¸¢å¤±ï¼Œè€Œä¸”RNNæ²¡åŠæ³•å¹¶è¡Œè®¡ç®—ã€‚ Self-attention for Graph ç”±äºæˆ‘ä»¬çš„å›¾ä¹‹é—´æ—¶å…·æœ‰ä¸€å®šçš„è¿æ¥æ€§ï¼Œå› æ­¤æˆ‘ä»¬çš„æ–¹æ³•æ˜¯åªæ˜¯å°†ä¸€èˆ¬çš„æœ‰ç›¸å…³æ€§çš„ç»“ç‚¹è¿›è¡Œè®¡ç®—å…³è”åº¦ã€‚","link":"/2022/04/09/%E8%87%AA%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6%E5%92%8CTransformer/%E8%87%AA%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6Self-attention/"},{"title":"Transformer åŸºæœ¬çŸ¥è¯†","text":"hljs.initHighlightingOnLoad(); æ€»ç»“æ¥è¯´ï¼Œæå®æ¯…è¿™è§£è¯¾è®²çš„ä¼˜ç‚¹ç§‘æ™®ï¼Œä¸å¦‚ä¹‹å‰self-attentioné‚£èŠ‚è¯¾è®²å¾—è¯¦ç»†ï¼Œå› æ­¤ç®€å•äº†è§£ä»¥ä¸‹å³å¯ï¼Œå¯¹äºè®ºæ–‡çš„ä¸€äº›é—®é¢˜å»ºè®®ç›´æ¥çœ‹ææ²æ¥è¯´çš„è®ºæ–‡å¸¦è¯»è§†é¢‘ã€‚ Sequence to sequence (Seq2seq)Input a sequence, output a sequence. The output length is determined by model. è¿™é‡Œæ ¹æ®è¾“å…¥å’Œè¾“å‡ºçš„é•¿åº¦æ¥å®šä¹‰å‡ºä¸å¤ªçš„æ¨¡å‹ï¼Œä¹‹å‰çš„self-attentionå°±æ˜¯è¾“å…¥è¾“å‡ºäºŒçš„é•¿åº¦ç›¸åŒï¼Œä½†æ˜¯è¾“å…¥çš„å‡ºåº¦ä¸ç¡®å®šã€‚å¸¸è§çš„å½¢å¼æœ‰ä»¥ä¸‹çš„å‡ ç§ï¼š é¦–å…ˆï¼Œæ˜¯è¯­éŸ³è¾¨è¯†æ¨¡å‹ï¼Œè¾“å…¥çš„é•¿åº¦å’Œè¾“å‡ºå®Œå…¨ä¸ä¸€æ ·ã€‚ å…¶æ¬¡ï¼Œ æ˜¯ç¿»è¯‘æ¨¡å‹ï¼Œè¾“å…¥å’Œè¾“å‡ºé•¿åº¦è¦æœºå™¨è‡ªå·±æ¥å†³å®šã€‚ æœ€åï¼Œæ˜¯è¯­éŸ³ç¿»è¯‘æ¨¡å‹ï¼Œå°±æ˜¯è¾“å…¥ä¸€ç§è¯­è¨€çš„å£°éŸ³ï¼Œè¾“å‡ºæ˜¯å¦ä¸€ç§è¯­è¨€çš„æ–‡å­—ï¼Œè¿™æ ·çš„è¯æ˜¯èƒ½å¤Ÿè§£å†³å¾ˆå¤šæ²¡æœ‰æ–‡å­—çš„è¯­è¨€çš„ä¿æŠ¤å’Œç†è§£ã€‚ å¦‚æœé’ˆå¯¹ä¸åŒçš„ä½¿ç”¨æƒ…æ™¯ä½¿ç”¨ä¸åŒçš„æ¨¡å‹é‚£ä¹ˆæ•ˆæœå¯èƒ½ä¼šå¥½ä¸å°‘ï¼Œç›¸æ¯”æ‰€æœ‰çš„æ¨¡å‹éƒ½æ˜¯ä»¥ç›¸åŒçš„seq2seqçš„æ¨¡å‹ã€‚ Seq2seq for Syntactic Parsing æ¯”å¦‚å¯¹æ•´ä¸ªå¥å­è¿›è¡Œè¯­æ³•ä¸Šçš„å‰–æï¼Œæœ€åå½¢æˆä¸€ä¸ªæ ‘çŠ¶çš„ç»“æ„å…¶å®å°±æ˜¯ä¸€ä¸ªseq2seqçš„æ¨¡å‹ã€‚ Seq2seq for Multi label ClassificationMulti class Classificationï¼Œç›¸æ¯”ä¹‹ä¸‹ä¸åŒçš„æ˜¯ï¼ŒMulti classæ˜¯ä¸€ä¸ªä¼ ç»Ÿçš„å¤šåˆ†ç±»çš„é—®é¢˜ï¼Œä½†æ˜¯Multi labelsæ˜¯ä¸€ä¸ªæ ·æœ¬å¯ä»¥å±äºå¤šä¸ªç±»åˆ«ã€‚ ç”±äºæ¯ç¯‡æ–‡ç« çš„å¯¹åº”çš„ç»“æœä¸åŒï¼Œå¯ä»¥å±äºä¸€ä¸ªï¼Œä¹Ÿå¯æ˜¯å¤šä¸ªï¼Œè¿™ä¸ªé•¿åº¦æ˜¯ä¸ç¡®å®šçš„ã€‚å¯¹åº”ç›®æ ‡æ£€æµ‹ä¹Ÿå¯ä»¥ä½¿ç”¨seq2dqeæ¨¡å‹ã€‚ Seq2seq for Object Detection Seq2seq æ¨¡å‹çš„åŸºæœ¬åŸç† ç›®å‰æœ€ç«çƒ­çš„transformeræ¨¡å‹å…¶å®å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„seq2seqæ¨¡å‹ã€‚ ä¸‹é¢æˆ‘ä»¬å°†ä»Encoderå’Œdecoderä¸¤ä¸ªæ–¹é¢æ¥ä»‹ç»ä¹‹åå…¶åŸºæœ¬çš„åŸç†ã€‚ Encoderå…¶å®å°±æ˜¯input ä¸€æ’å‘é‡ï¼Œoutputå¦å¤–çš„ä¸€æ’å‘é‡ã€‚ ä»¥ä¸‹æ˜¯encoderçš„å†…éƒ¨çš„ç»“æ„ï¼Œæ˜¯ç”±å¤šä¸ªblockå †å è€Œæˆçš„ç»“æ„ï¼Œè€Œæ¯ä¸ªblocké‡Œé¢åˆæ˜¯åˆseft-attentionå’ŒFCå±‚ç»„æˆã€‚ è¿™é‡Œçš„transformerçš„ç»“æ„æ˜¯å¤æ‚åŒ–çš„ï¼Œåœ¨åŸæ¥çš„transformeré‡Œé¢å…¶ç»“æ„æ˜¯æ›´åŠ å¤æ‚åŒ–çš„ï¼š é¦–å…ˆï¼Œå…¶åœ¨è¾“å…¥éƒ¨åˆ†å°±ä½¿ç”¨äº†residual æ®‹å·®ç»“æ„ï¼› ä¹‹åï¼Œä½¿ç”¨Layer Norm æ˜¯å°†é€šè¿‡ä¸ªå‘é‡çš„ä¸åŒçš„dimè¿›è¡Œè®¡ç®—çš„æ ‡å‡†åŒ–ã€‚ Batch Norm æ˜¯å°†ä¸€ä¸ªbatché‡Œé¢çš„å‘é‡ï¼Œå–åŒä¸€ä¸ªç»´åº¦æ¥è¿›è¡Œæ ‡å‡†åŒ–æ“ä½œã€‚ æœ€åï¼Œåœ¨FCå±‚ä¹Ÿè¦ä½¿ç”¨residualï¼Œæœ€åçš„è¾“å‡ºä¹Ÿè¦è¿›è¡ŒNorm. è¿™é‡Œçš„Add &amp; Normçš„æ„æ€æ˜¯residual + Layer Normå±‚ã€‚ æœ€åæ˜¯å¯¹äºæ¨¡å‹çš„æ”¹è¿›éƒ¨åˆ†ã€‚ Decoder Autoregressive (AT) è¿™é‡Œçš„START å¯èƒ½æ˜¯one-hotç¼–ç ï¼› è¾“å‡ºæ˜¯ä¸ªå‘é‡ï¼Œç»´åº¦ä»£è¡¨çš„æ˜¯ä¸€ä¸ªæŸä¸ªå­—è¾“å‡ºçš„æ¦‚ç‡ã€‚ è¾“å…¥â€œæœºâ€ï¼Œè¾“å‡ºâ€œå™¨â€ã€‚ æ¥ä¸‹æ¥ä»‹ç»çš„æ˜¯Self-Attentionçš„Decoderçš„å…·ä½“ç»“æ„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ ç›¸æ¯”ä¹‹å‰çš„Encoderï¼ŒDecoderæ¯”Encoderå¤šä¸€ä¸ªMulti-Head Attentionï¼Œå…¶æ¬¡æ˜¯å¤šä¸€ä¸ªMasked Multi-Head Attentionçš„éƒ¨åˆ†ã€‚ä¸‹é¢å°†å±•ç¤ºMasked Multi-Head Attentionå’Œä¸€èˆ¬çš„Multi-Head Attentionçš„åŒºåˆ«ã€‚ å¯¹äºMasked self-attentionæ¥è¯´ï¼Œå…¶è¾“å…¥åªèƒ½å’Œå®ƒä¹‹å‰çš„å‘é‡æœ‰å…³ï¼Œä½¿ç”¨å®ƒä¹‹å‰çš„å‘é‡è¿›è¡Œè®¡ç®—ï¼Œè€Œä¸å¯ä»¥ä½¿ç”¨å…¶ä¹‹åçš„å‘é‡è®¡ç®—ã€‚ å¯¹äºä¸€èˆ¬çš„self-attentionæ¥è¯´ï¼Œæˆ‘ä»¬å°±æŒ‰$a^2$æ—¶ï¼Œå°†æ‰€æœ‰çš„$a^i$å’Œè®¡ç®—ç›¸ä¼¼åº¦ï¼Œä½†æ˜¯å¯¹äºmask self-attentionæ—¶ï¼Œæˆ‘ä»¬çš„è®¡ç®—å°±å˜ä¸ºï¼Œåªè®¡ç®—$a^2$å‰é¢å‡ é¡¹å’Œ$a^2$çš„ç›¸ä¼¼åº¦äº†ã€‚ ä½†æ˜¯æˆ‘ä»¬çš„ä¿¡å·ä¸å¯èƒ½è¿™æ ·ä¸€ç›´æ— ä¼‘æ­¢çš„è¿›è¡Œä¸‹å»ï¼Œå› æ­¤è¿™é‡Œéœ€è¦ä¸€ä¸ªåœæ­¢å­—ç¬¦æ¥è®²ä¸Šé¢çš„ç»“æœè¿›è¡Œç»ˆæ­¢ï¼Œæœ‰æ—¶å€™å¼€å§‹å­—ç¬¦å’Œåœæ­¢å­—ç¬¦æ˜¯åŒä¸€ä¸ªå­—ç¬¦ã€‚ ä»¥ä¸Šæ˜¯è‡ªå›å½’Autoregressiveçš„è§£ç å™¨ï¼Œè¿˜æœ‰ä¸€ç§æ˜¯éè‡ªå›å½’çš„NAT non-Autoregressive (NAT) NATæ˜¯ç»™ä¸€å®šæ•°é‡çš„BEGIN ç›´æ¥æŠŠè¦è¾“å‡ºçš„å†…å®¹å…¨éƒ¨çš„è¾“å‡ºï¼Œä½†æ˜¯é—®é¢˜æ˜¯æˆ‘ä»¬ä¸çŸ¥é“è¦è¾“å…¥å’Œè¾“å‡ºçš„ç»´åº¦ï¼Œä¸»è¦çš„è§£å†³æ–¹æ³•ï¼š ç»™è¶³å¤Ÿçš„è¾“å…¥ç»´åº¦ï¼Œå¯¹äºè¾“å‡ºè€Œè¨€ï¼Œå¦‚æœå‡ºç°ä¸€ä¸ªENDï¼Œé‚£ä¹ˆåé¢çš„å†…å®¹å°±ä¸è¦çš„ï¼Œåªä¿ç•™å‰é¢çš„å†…å®¹å³å¯ã€‚ è¿™ä¸ªENDçš„ä½ç½®æ—¶æœ‰ä¸€ä¸ªåˆ¤åˆ«å™¨æ¥è¿›è¡Œé¢„æµ‹çš„ã€‚ è¿™æ ·å°±æ˜¯å¯ä»¥ç›´æ¥è¾¾åˆ°æœŸæœ›çš„æ•ˆæœäº†ã€‚ NAT çš„ä¼˜ç‚¹ï¼š NATå¯ä»¥å®ç°å¹¶è¡ŒåŒ–ï¼ŒATæ˜¯ç»“åˆäº†ä¼ ç»Ÿçš„RNNï¼Œå› æ­¤ä¸èƒ½å¹¶è¡ŒåŒ–ã€‚ NATå¯ä»¥æ§åˆ¶è¾“å‡ºçš„é•¿åº¦ã€‚ å°½ç®¡NATå®ç°çš„çƒ­é—¨ï¼Œä½†æ˜¯ä¸»è¦æ˜¯NATçš„æ•ˆæœä¸åŠé‚£ä¸ªATï¼Œå°½ç®¡è®¡ç®—é€Ÿåº¦æ›´å¿«ã€‚ Encoder-Decoderä¹‹é—´çš„äº¤äº’ å¦‚å›¾æ‰€ç¤ºï¼Œåœ¨encoderä¸­æ±‚å–Keyå’ŒValueï¼Œä¹‹ååœ¨decoderä¸­è§£ç queryï¼Œç„¶åè¿›è¡Œç›¸ä¼¼åº¦çš„è®¡ç®—å¹¶é¢„æµ‹å‡ºä¸‹ä¸€ä¸ªå­—çš„æ¦‚ç‡å€¼ã€‚è¿™éƒ¨åˆ†å°±æ˜¯Encoderå’ŒDecodeçš„Cross-attentionéƒ¨åˆ†ã€‚ è¿™é‡ŒCross-attentionçš„å‡ºç°æ—¶é—´Transformeræ›´æ—©çš„ï¼Œåœ¨æ³¨æ„åŠ›äº¤å‰é¢†åŸŸè¿˜æœ‰å„ç§å„æ ·çš„å½¢å¼ï¼Œæ­¤å¤„ä¸åœ¨èµ˜è¿°ã€‚ Training è¿‡ç¨‹çš„ä»‹ç» è¿™é‡Œï¼Œé€šè¿‡decoderé¢„æµ‹å¾—å‡ºä¸€ä¸ªåˆ†å¸ƒï¼Œæ˜¯ç”¨æ¥é¢„æµ‹ä¸‹ä¸€ä¸ªè¾“å‡ºçš„å­—çš„ï¼Œä½†æ˜¯æˆ‘ä»¬çš„Ground-truthæ˜¯ä¸€ç³»åˆ—çš„one-hotç¼–ç ã€‚é€šè¿‡æœ€å°çš„äº¤å‰å•†æŸå¤±ï¼Œä½¿å…¶æœ€å°åŒ–ã€‚æ³¨æ„æœ€åä¸€ä¸ªå­—è¾“å…¥ä¹‹åå¾—å‡ºçš„è¾“å‡ºæ˜¯ä¸€ä¸ªENDã€‚ å½“ç„¶è¿™è¾¹å¾ˆæƒ³ä¸€ä¸ªåˆ†ç±»çš„é—®é¢˜ï¼Œè¿™å°±æ˜¯è®­ç»ƒtrainåŸç†ã€‚ åœ¨è®­ç»ƒçš„æ—¶å€™ï¼Œæˆ‘ä»¬æ˜¯å°†æ­£ç¡®çš„ç­”æ¡ˆä½œä¸ºè¾“å…¥æ¥è®­ç»ƒåˆ¤åˆ«å™¨ã€‚Teacher Forcing: using the ground truth as input. è¿™æ ·åšä¸»è¦çš„é—®é¢˜æ˜¯ï¼Œåœ¨æµ‹è¯•çš„æ—¶å€™ï¼Œæˆ‘ä»¬çš„decoderæ˜¯çœ‹ä¸åˆ°çœŸæ­£çš„å€¼ï¼Œäºæ˜¯å°±ä¼šé€ æˆmismatchï¼Œå°±æ˜¯å‡ºå…¥çš„ä¸€ä¸ªç¯èŠ‚å‡ºç°äº†é”™è¯¯ï¼Œä¼šé€ æˆæ—¶å€™çš„ç»“æœéƒ½é”™è¯¯è¿™æ ·çš„é—®é¢˜ã€‚ è§£å†³çš„åŠæ³•æ˜¯ç»™Decoderä¸€äº›é”™è¯¯çš„å†…å®¹ï¼ŒScheduled Sampling æŠ€æœ¯ã€‚","link":"/2022/04/10/%E8%87%AA%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6%E5%92%8CTransformer/Transformer-%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86/"},{"title":"Ch4 æç¾¤å’Œæä»£æ•°åŸºç¡€ åº”ç”¨å’Œå®è·µ","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦è®²è¿°ch4 æç¾¤å’Œæä»£æ•°åŸºç¡€çš„åä¸¤èŠ‚ï¼Œæä»£æ•°çš„æ±‚å¯¼å’Œæ‰°åŠ¨æ¨¡å‹å’Œä»£ç å®è·µçš„éƒ¨åˆ†ï¼Œä»‹ç»äº†SLAMä¸­è¿ç”¨æç¾¤æä»£æ•°çš„å…·ä½“æ–¹é¢ï¼Œä¹‹åä»‹ç»Sophusåº“çš„ä½¿ç”¨ã€‚ æä»£æ•°æ±‚å¯¼å’Œæ‰°åŠ¨æ¨¡å‹BCHå…¬å¼ä¸è¿‘ä¼¼å½¢å¼å®é™…å¯¹ä½å§¿è¿›è¡Œä¼°è®¡å’Œä¼˜åŒ–çš„æ—¶å€™ï¼Œæç¾¤åªæœ‰ä¹˜æ³•ï¼Œæ²¡æœ‰åŠ æ³•ï¼Œä½¿å¾—å¯¼æ•°ä¸å¥½å®šä¹‰ï¼Œå› æ­¤ç›´è§‚çš„æƒ³æ³•æ˜¯ï¼š èƒ½éƒ½åˆ©ç”¨æä»£æ•°ä¸Šçš„åŠ æ³•æ¥å®šä¹‰æç¾¤çš„å¯¼æ•°ï¼› ä¹‹åé€šè¿‡æŒ‡æ•°æ˜ å°„å’Œå¯¹æ•°æ˜ å°„å®Œæˆç›¸äº’è½¬æ¢å†å›åˆ°æç¾¤ã€‚ æ€»ç»“æ¥è¯´å°±æ˜¯è§£å†³ï¼šå½“åœ¨æä»£æ•°ä¸­åšåŠ æ³•æ—¶ï¼Œæ˜¯å¦ç­‰ä»·äºåœ¨æç¾¤ä¸Šåšä¹˜æ³•ï¼Ÿ \\exp(\\phi_1^{\\wedge})\\exp(\\phi_2^{\\wedge})=?\\exp(\\phi_1^{\\wedge}+\\phi_2^{\\wedge}) å¯¹äºæ ‡é‡æ˜¯æ˜¾ç„¶æˆç«‹çš„ï¼Œä½†æ˜¯å¯¹äºå‘é‡å’ŒçŸ©é˜µï¼Œç”±BCHå…¬å¼å¯å¾—å…¶æˆç«‹ã€‚ å®Œæ•´å½¢å¼ç”± BCHï¼ˆBaker-Campbell-Hausdorffï¼‰ å…¬å¼ç»™å‡ºï¼š å…¬å¼çš„å®Œæ•´å½¢å¼æ¯”è¾ƒå¤æ‚ï¼Œå…·ä½“å†…å®¹è¯·è§ï¼š(https://en.wikipedia.org/wiki/Baker-Campbell-Hausdorff_formula) è¿™é‡Œä»…ä»…å±•ç¤ºå±€éƒ¨çš„å±•å¼€å¼ï¼š \\ln (\\exp (\\boldsymbol{A}) \\exp (\\boldsymbol{B}))=\\boldsymbol{A}+\\boldsymbol{B}+\\frac{1}{2}[\\boldsymbol{A}, \\boldsymbol{B}]+\\frac{1}{12}[\\boldsymbol{A},[\\boldsymbol{A}, \\boldsymbol{B}]]-\\frac{1}{12}[\\boldsymbol{B},[\\boldsymbol{A}, \\boldsymbol{B}]]+\\cdots ç‰¹åˆ«åœ°ï¼Œè€ƒè™‘ $\\mathfrak {so}(3)$ ä¸Šçš„ä¸€ä¸ªæä»£æ•° $\\ln(\\exp(\\phi_1^{\\wedge})\\exp(\\phi_2^{\\wedge}))^{\\vee}$ ï¼Œå½“è€ƒè™‘å…¶ä¸­çš„ä¸€ä¸ªé‡ä¸ºå°é‡æ—¶ï¼Œå…¶äºŒæ¬¡é¡¹ä»¥ä¸Šçš„é«˜é˜¶é¡¹å¯ä»¥å¿½ç•¥å¯ä¸å¿½ç•¥ï¼š \\ln \\left(\\exp \\left(\\phi_{1}^{\\wedge}\\right) \\exp \\left(\\phi_{2}^{\\wedge}\\right)\\right)^{\\vee} \\approx\\left\\{\\begin{array}{ll}\\boldsymbol{J}_{l}\\left(\\phi_{2}\\right)^{-1} \\phi_{1}+\\phi_{2} & \\text { if } \\phi_{1} \\text { is small } \\\\ \\boldsymbol{J}_{r}\\left(\\phi_{1}\\right)^{-1} \\phi_{2}+\\phi_{1} & \\text { if } \\phi_{2} \\text { is small. }\\end{array}\\right.è¿™é‡Œæˆ‘ä»¬ä»¥å·¦ä¹˜ä¸ºä¾‹ï¼Œå·¦ä¹˜BCHçš„è¿‘ä¼¼é›…å¯æ¯”çŸ©é˜µä¸ºï¼š \\boldsymbol{J}_{l}=\\boldsymbol{J}=\\frac{\\sin \\theta}{\\theta} \\boldsymbol{I}+\\left(1-\\frac{\\sin \\theta}{\\theta}\\right) \\boldsymbol{a} \\boldsymbol{a}^{T}+\\frac{1-\\cos \\theta}{\\theta} \\boldsymbol{a}^{\\wedge} .å¯¹å…¶è¿›è¡Œæ±‚é€†å¯å¾—ï¼š \\boldsymbol{J}_{l}^{-1}=\\frac{\\theta}{2} \\cot \\frac{\\theta}{2} \\boldsymbol{I}+\\left(1-\\frac{\\theta}{2} \\cot \\frac{\\theta}{2}\\right) \\boldsymbol{a} \\boldsymbol{a}^{T}-\\frac{\\theta}{2} \\boldsymbol{a}^{\\wedge}æ­¤å¤„ï¼Œå³é›…å¯æ¯”ä»…ä»…éœ€è¦è‡ªå˜é‡å–ç¬¦å·å³å¯ï¼š \\boldsymbol{J}_{r}(\\boldsymbol{\\phi})=\\boldsymbol{J}_{l}(-\\boldsymbol{\\phi}) .è¿™é‡Œæˆ‘ä»¬å‡è®¾å·¦ä¹˜äº†ä¸€ä¸ªå¾®å°çš„æ—‹è½¬ï¼Œè®°ä½œ$\\boldsymbol {\\Delta R}$ ï¼Œå…¶å¯¹åº”çš„æä»£æ•°æ˜¯$\\boldsymbol {\\Delta \\phi}$ ã€‚äºæ˜¯å†æç¾¤ä¸Šé¢çš„$\\boldsymbol {\\Delta R}\\cdot\\boldsymbol { R}$ å¯¹åº”çš„æä»£æ•°å°±ä¸ºï¼š \\boldsymbol {\\Delta R}\\cdot\\boldsymbol { R}=\\exp \\left(\\Delta\\phi^{\\wedge}\\right)\\exp \\left(\\phi^{\\wedge}\\right)=\\exp \\left((\\phi+\\boldsymbol{J}_{l}^{-1}(\\boldsymbol{\\phi})\\Delta\\phi)^{\\wedge}\\right) åœ¨æç¾¤ä¸Šå·¦ä¹˜å°é‡ï¼Œæä»£æ•°ä¸Šçš„åŠ æ³•ç›¸å·®å·¦é›…å¯æ¯”çŸ©é˜µçš„é€†ã€‚ åä¹‹ï¼Œåœ¨æä»£æ•°æ˜¯åŠ ä¸Šä¸€ä¸ªå°é‡ï¼Œè¿‘ä¼¼ä¸ºæç¾¤ä¸Šå¸¦å·¦å³é›…å¯æ¯”çš„ä¹˜æ³•ï¼š \\exp \\left((\\phi+\\Delta \\phi)^{\\wedge}\\right)=\\exp \\left(\\left(\\boldsymbol{J}_{l} \\Delta \\phi\\right)^{\\wedge}\\right) \\exp \\left(\\phi^{\\wedge}\\right)=\\exp \\left(\\phi^{\\wedge}\\right) \\exp \\left(\\left(\\boldsymbol{J}_{r} \\Delta \\boldsymbol{\\phi}\\right)^{\\wedge}\\right)åŒç†å¯å¾—ï¼Œå¯¹åº”SE(3)ï¼Œä¹Ÿä¼šæœ‰ç±»ä¼¼çš„BCHè¿‘ä¼¼ï¼š \\exp \\left(\\Delta \\boldsymbol{\\xi}^{\\wedge}\\right) \\exp \\left(\\boldsymbol{\\xi}^{\\wedge}\\right) \\approx \\exp \\left(\\left(\\mathcal{J}_{l}^{-1} \\Delta \\boldsymbol{\\xi}+\\boldsymbol{\\xi}\\right)^{\\wedge}\\right) \\\\ \\exp \\left(\\boldsymbol{\\xi}^{\\wedge}\\right) \\exp \\left(\\Delta \\xi^{\\wedge}\\right) \\approx \\exp \\left(\\left(\\mathcal{J}_{r}^{-1} \\Delta \\xi+\\boldsymbol{\\xi}\\right)^{\\wedge}\\right)è¿™é‡Œçš„$\\mathcal J$çš„å½¢å¼æ¯”è¾ƒçš„å¤æ‚ï¼Œæ˜¯ä¸€ä¸ª6 x 6 çš„çŸ©é˜µã€‚ SO(3)ä¸Šçš„æä»£æ•°æ±‚å¯¼é—®é¢˜çš„å¼•å…¥ï¼Œåœ¨å®é™…çš„ä¸€ä¸ªSLAMé—®é¢˜ï¼Œæœºå™¨äººæ­¤æ—¶çš„ä½å§¿ä¸º$\\boldsymbol {T}$ ï¼Œå…¶è§‚å¯Ÿåˆ°ä¸€ä¸ªæ¥è‡ªäºä¸–ç•Œåæ ‡ç³»ä¸‹çš„ä¸€ç‚¹$\\boldsymbol {p}$ ï¼Œè§‚æµ‹çš„æ•°æ®ä¸º $\\boldsymbol z$ ï¼Œåˆ™æœ‰æˆ‘ä»¬çš„åæ ‡çš„å˜æ¢å…³ç³»å¯å¾—ï¼š \\boldsymbol z = \\boldsymbol T \\boldsymbol p + \\boldsymbol\\omega.è¿™é‡Œçš„$\\omega$ ä»£è¡¨éšæœºå™ªå£°ï¼Œäºæ˜¯å®šä¹‰å®é™…å’Œç†è®ºçš„è¯¯å·®ä¸ºï¼š \\boldsymbol e = \\boldsymbol z - \\boldsymbol T \\boldsymbol pä¸€å…±æœ‰Nä¸ªè¿™æ ·çš„è·¯æ ‡å’Œè§‚æµ‹ï¼Œäºæ˜¯å°±æœ‰Nä¸ªä¸Šé¢çš„å…¬å¼ï¼Œä¸ºäº†æ±‚æœ€ä½³çš„$\\boldsymbol {T}$ï¼Œä½¿å¾—æ•´ä½“çš„è¯¯å·®æœ€å°åŒ–ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ä½å§¿çŸ©é˜µ $\\boldsymbol {T}$ è¿›è¡Œæ±‚å¯¼ï¼š \\min_{\\boldsymbol T} J(\\boldsymbol T)=\\sum_{i=1}^N ||\\boldsymbol z_i - \\boldsymbol T \\boldsymbol p_i||_2^2æ±‚è§£æ­¤é—®é¢˜,éœ€è¦è®¡ç®—ç›®æ ‡å‡½æ•°$J$å…³äºå˜æ¢çŸ©é˜µTçš„å¯¼æ•°ã€‚ è¿™é‡Œçš„é‡ç‚¹æ˜¯ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šæ„å»ºä¸ä½å§¿æœ‰å…³çš„å‡½æ•°ï¼Œç„¶åè®¨è®ºè¯¥å‡½æ•°å…³äºä½å§¿çš„å¯¼æ•°ï¼Œä»¥è°ƒæ•´å½“å‰çš„ä¼°è®¡å€¼ã€‚ç„¶è€Œï¼ŒSO(3), SE(3)ä¸Šå¹¶æ²¡æœ‰è‰¯å¥½å®šä¹‰çš„åŠ æ³•ï¼Œå®ƒä»¬åªæ˜¯ç¾¤ã€‚ å¦‚æœæˆ‘ä»¬æŠŠTå½“æˆä¸€ä¸ªæ™®é€šçŸ©é˜µæ¥å¤„ç†ä¼˜åŒ–ï¼Œå°±å¿…é¡»å¯¹å®ƒåŠ ä»¥çº¦æŸã€‚è€Œä»æä»£æ•°è§’åº¦æ¥è¯´ï¼Œç”±äºæä»£æ•°ç”±å‘é‡ç»„æˆï¼Œå…·æœ‰è‰¯å¥½çš„åŠ æ³•è¿ç®—ï¼Œå› æ­¤ï¼Œä½¿ç”¨æä»£æ•°è§£å†³æ±‚å¯¼é—®é¢˜çš„æ€è·¯åˆ†ä¸ºä¸¤ç§ï¼š ç”¨æä»£æ•°è¡¨ç¤ºå§¿æ€ï¼Œç„¶åæ ¹æ®æä»£æ•°åŠ æ³•å¯¹æä»£æ•°æ±‚å¯¼ã€‚ å¯¹æç¾¤å·¦ä¹˜æˆ–å³ä¹˜å¾®å°æ‰°åŠ¨ï¼Œç„¶åå¯¹è¯¥æ‰°åŠ¨æ±‚å¯¼ï¼Œç§°ä¸ºå·¦æ‰°åŠ¨å’Œå³æ‰°åŠ¨æ¨¡å‹ã€‚ ç¬¬ä¸€ç§æ–¹å¼å¯¹åº”åˆ°æä»£æ•°çš„æ±‚å¯¼æ¨¡å‹ï¼Œè€Œç¬¬äºŒç§æ–¹å¼åˆ™å¯¹åº”åˆ°æ‰°åŠ¨æ¨¡å‹ã€‚ å¯¼æ•°æ¨¡å‹é¦–å…ˆï¼Œæˆ‘ä»¬è€ƒè™‘å¯¼æ•°æ¨¡å‹ï¼Œå¯¹åº”ä¸€ä¸ªåæ ‡ç‚¹ $\\boldsymbol p$ ï¼Œè¿›è¡Œæ—‹è½¬åå¯å¾—å…¶æ—‹è½¬åçš„åæ ‡ä¸º$\\boldsymbol {Rp}$ äºæ˜¯æ—‹è½¬åçš„å‘é‡å¯¹æ—‹è½¬çŸ©é˜µæ±‚å¯¼å¯å¾—æ¯”è¡¨è¾¾å¼ä¸ºï¼š$\\dfrac {\\partial \\boldsymbol {Rp}} {\\partial \\boldsymbol {R}}$ ï¼Œä½†æ˜¯ç”±äºæç¾¤æ— æ³•è¿›è¡ŒåŠ æ³•ï¼Œä¸èƒ½æ±‚å¯¼ï¼Œå› æ­¤æˆ‘ä»¬å°†å…¶è½¬åŒ–ä¸ºæä»£æ•°æ¥è¿›è¡Œè®¡ç®—ï¼š$\\dfrac {\\partial \\boldsymbol {\\exp(\\phi^{\\wedge})p}} {\\partial \\phi}$ . ä¹‹åï¼Œ è®¡ç®—å¯å¾—ï¼š \\begin{aligned} \\frac{\\partial\\left(\\exp \\left(\\phi^{\\wedge}\\right) \\boldsymbol{p}\\right)}{\\partial \\phi} &=\\lim _{\\delta \\boldsymbol{\\phi} \\rightarrow 0} \\frac{\\exp \\left((\\phi+\\delta \\boldsymbol{\\phi})^{\\wedge}\\right) \\boldsymbol{p}-\\exp \\left(\\phi^{\\wedge}\\right) \\boldsymbol{p}}{\\delta \\boldsymbol{\\phi}} \\\\ &=\\lim _{\\delta \\boldsymbol{\\phi} \\rightarrow 0} \\frac{\\exp \\left(\\left(\\boldsymbol{J}_{l} \\delta \\boldsymbol{\\phi}\\right)^{\\wedge}\\right) \\exp \\left(\\phi^{\\wedge}\\right) \\boldsymbol{p}-\\exp \\left(\\phi^{\\wedge}\\right) \\boldsymbol{p}}{\\delta \\phi} \\\\ & \\approx \\lim _{\\delta \\phi \\rightarrow 0} \\frac{\\left(\\boldsymbol{I}+\\left(\\boldsymbol{J}_{l} \\delta \\boldsymbol{\\phi}\\right)^{\\wedge}\\right) \\exp \\left(\\boldsymbol{\\phi}^{\\wedge}\\right) \\boldsymbol{p}-\\exp \\left(\\boldsymbol{\\phi}^{\\wedge}\\right) \\boldsymbol{p}}{\\delta \\phi} \\\\ &=\\lim _{\\delta \\boldsymbol{\\phi} \\rightarrow 0} \\frac{\\left(\\boldsymbol{J}_{l} \\delta \\boldsymbol{\\phi}\\right)^{\\wedge} \\exp \\left(\\phi^{\\wedge}\\right) \\boldsymbol{p}}{\\delta \\phi} \\\\ &=\\lim _{\\delta \\phi \\rightarrow 0} \\frac{-\\left(\\exp \\left(\\boldsymbol{\\phi}^{\\wedge}\\right) \\boldsymbol{p}\\right)^{\\wedge} \\boldsymbol{J}_{l} \\delta \\boldsymbol{\\phi}}{\\delta \\boldsymbol{\\phi}}=-(\\boldsymbol{R} \\boldsymbol{p})^{\\wedge} \\boldsymbol{J}_{l} \\end{aligned}æœ€åä¸¤è¡Œçš„åå¯¹ç§°å·å¯ä»¥çœ‹ä½œæ˜¯å‰ç§¯ï¼Œå…¶ä¸»è¦çš„æ€§è´¨æ˜¯äº¤æ¢ä½ç½®è¦å˜å·ã€‚ ç»“æœä¸­å«æœ‰ä¸€ä¸ªå·¦ä¹˜çš„é›…å¯æ¯”ï¼Œå®é™…ä¼šè®¡ç®—é‡ï¼Œäºæ˜¯æˆ‘ä»¬æƒ³åŠæ³•å°†å…¶è¿›è¡Œä¼˜åŒ–ã€‚ æ‰°åŠ¨æ¨¡å‹å’Œå¯¼æ•°æ¨¡å‹ç›¸æ¯”å…¶ä¸»è¦çš„åŒºåˆ«æ˜¯ï¼Œå¯¼æ•°æ¨¡å‹æ˜¯åŠ äº†ä¸€ä¸ªå°é‡ï¼Œ$\\dfrac{\\partial\\left(\\exp \\left(\\phi^{\\wedge}+\\Delta\\phi^{\\wedge}\\right) \\boldsymbol{p}\\right)}{\\partial \\phi}$ è€Œæ‰°åŠ¨æ¨¡å‹æ˜¯ä¹˜ä»¥äº†å°é‡ï¼Œ è¿™é‡Œæˆ‘ä»¬ä»¥å·¦ä¹˜å°é‡ä¸ºä¾‹ï¼Œå¸¦å±•ç¤ºæ‰°åŠ¨æ¨¡å‹çš„è®¡ç®—ç»“æœï¼š \\begin{aligned} \\frac{\\partial(\\boldsymbol{R} p)}{\\partial \\varphi} &=\\lim _{\\varphi \\rightarrow 0} \\frac{\\exp \\left(\\varphi^{\\wedge}\\right) \\exp \\left(\\phi^{\\wedge}\\right) \\boldsymbol{p}-\\exp \\left(\\phi^{\\wedge}\\right) \\boldsymbol{p}}{\\varphi} \\\\ & \\approx \\lim _{\\varphi \\rightarrow 0} \\frac{\\left(1+\\varphi^{\\wedge}\\right) \\exp \\left(\\phi^{\\wedge}\\right) \\boldsymbol{p}-\\exp \\left(\\phi^{\\wedge}\\right) \\boldsymbol{p}}{\\varphi} \\\\ &=\\lim _{\\varphi \\rightarrow 0} \\frac{\\varphi^{\\wedge} \\boldsymbol{R} \\boldsymbol{p}}{\\varphi}=\\lim _{\\varphi \\rightarrow 0} \\frac{-(\\boldsymbol{R} \\boldsymbol{p})^{\\wedge} \\varphi}{\\varphi}=-(\\boldsymbol{R} \\boldsymbol{p})^{\\wedge} \\end{aligned}æ‰°åŠ¨æ¨¡å‹çš„å½¢å¼æ›´åŠ ç®€æ´ï¼Œå®é™…çš„åº”ç”¨æ›´åŠ çš„å¹¿æ³›ã€‚ SE(3)ä¸Šçš„æä»£æ•°æ±‚å¯¼æœ€åï¼Œç±»æ¯”ä¹‹å‰SO(3)ä¸Šçš„æ‰°åŠ¨æ¨¡å‹ï¼Œæˆ‘ä»¬å®šä¹‰SE(3)ä¸Šçš„æ‰°åŠ¨æ¨¡å‹å…¬å¼å¦‚ä¸‹ï¼š \\begin{aligned} \\frac{\\partial(\\boldsymbol{T} \\boldsymbol{p})}{\\partial \\delta \\xi}&=\\lim _{\\delta \\boldsymbol{\\xi} \\rightarrow 0} \\frac{\\exp \\left(\\delta \\boldsymbol{\\xi}^{\\wedge}\\right) \\exp \\left(\\boldsymbol{\\xi}^{\\wedge}\\right) \\boldsymbol{p}-\\exp \\left(\\boldsymbol{\\xi}^{\\wedge}\\right) \\boldsymbol{p}}{\\delta \\boldsymbol{\\xi}}\\\\ & \\approx \\lim _{\\delta \\xi \\rightarrow 0} \\frac{\\left(\\boldsymbol{I}+\\delta \\boldsymbol{\\xi}^{\\wedge}\\right) \\exp \\left(\\boldsymbol{\\xi}^{\\wedge}\\right) \\boldsymbol{p}-\\exp \\left(\\boldsymbol{\\xi}^{\\wedge}\\right) p}{\\delta \\boldsymbol{\\xi}} \\\\&=\\lim _{\\delta \\xi \\rightarrow 0} \\frac{\\delta \\xi^{\\wedge} \\exp \\left(\\xi^{\\wedge}\\right) p}{\\delta \\xi} \\\\& =\\lim _{\\delta \\xi \\rightarrow 0} \\frac{\\left[\\begin{array}{cc}\\delta \\phi^{\\wedge} & \\delta \\boldsymbol{\\rho} \\\\ \\mathbf{0}^{T} & 0\\end{array}\\right]\\left[\\begin{array}{c}\\boldsymbol{R} p+\\boldsymbol{t} \\\\ 1\\end{array}\\right]}{\\delta \\xi} \\\\&=\\lim _{\\delta \\xi \\rightarrow 0} \\frac{\\left[\\begin{array}{c}\\delta \\phi^{\\wedge}(\\boldsymbol{R} p+t)+\\delta \\rho \\\\ 0\\end{array}\\right]}{\\delta \\xi}=\\left[\\begin{array}{cc}I & -(\\boldsymbol{R} p+\\boldsymbol{t})^{\\wedge} \\\\ 0^{T} & 0^{T}\\end{array}\\right] \\triangleq(T \\boldsymbol{p})^{\\odot} \\end{aligned}ä¸‹é¢æ˜¯çŸ©é˜µå’Œå‘é‡æ±‚å¯¼çš„è§„åˆ™ï¼š \\frac{\\mathrm{d}\\left[\\begin{array}{l}\\boldsymbol{a} \\\\ \\boldsymbol{b}\\end{array}\\right]}{\\mathrm{d}\\left[\\begin{array}{l}\\boldsymbol{x} \\\\ \\boldsymbol{y}\\end{array}\\right]}=\\left(\\frac{\\mathrm{d}[\\boldsymbol{a}, \\boldsymbol{b}]^{\\mathrm{T}}}{\\mathrm{d}\\left[\\begin{array}{l}\\boldsymbol{x} \\\\ \\boldsymbol{y}\\end{array}\\right]}\\right)^{\\mathrm{T}}=\\left[\\begin{array}{ll}\\dfrac{\\mathrm{d} \\boldsymbol{a}}{\\mathrm{d} \\boldsymbol{x}} & \\dfrac{\\mathrm{d} \\boldsymbol{b}}{\\mathrm{d} \\boldsymbol{x}} \\\\ \\dfrac{\\mathrm{d} \\boldsymbol{a}}{\\mathrm{d} \\boldsymbol{y}} & \\dfrac{\\mathrm{d} b}{\\mathrm{~d} \\boldsymbol{y}}\\end{array}\\right]^{\\mathrm{T}}=\\left[\\begin{array}{cc}\\dfrac{\\mathrm{d} \\boldsymbol{a}}{\\mathrm{d} \\boldsymbol{x}} & \\dfrac{\\mathrm{d} \\boldsymbol{a}}{\\mathrm{d} \\boldsymbol{y}} \\\\ \\dfrac{\\mathrm{d} \\boldsymbol{b}}{\\mathrm{d} \\boldsymbol{x}} & \\dfrac{\\mathrm{d} b}{\\mathrm{~d} \\boldsymbol{y}}\\end{array}\\right]å°ç»“ï¼š åˆ©ç”¨BCHçº¿æ€§è¿‘ä¼¼ï¼Œå¯ä»¥æ¨å¯¼so(3)ä¸se(3)ä¸Šçš„å¯¼æ•°å’Œæ‰°åŠ¨æ¨¡å‹ï¼› é€šå¸¸æƒ…å†µä¸‹ï¼Œæ‰°åŠ¨æ¨¡å‹æ›´ä¸ºç®€æ´å®ç”¨ã€‚ å®è·µéƒ¨åˆ†Sophusåº“çš„ä½¿ç”¨é¦–å…ˆæ˜¯ä¹¦å†™CMakeList.txt 123456789101112cmake_minimum_required(VERSION 3.0)project(useSophus)# ä¸ºä½¿ç”¨ sophusï¼Œéœ€è¦ä½¿ç”¨find_packageå‘½ä»¤æ‰¾åˆ°å®ƒfind_package(Sophus REQUIRED)# Eigeninclude_directories(&quot;/usr/include/eigen3&quot;)add_executable(useSophus useSophus.cpp)target_link_libraries(useSophus Sophus::Sophus)add_subdirectory(example) ä¹‹åæ˜¯ä¸»è¦çš„ç¨‹åºuseSophus.cpp 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566#include &lt;iostream&gt;#include &lt;cmath&gt;#include &lt;Eigen/Core&gt;#include &lt;Eigen/Geometry&gt;#include &quot;sophus/se3.hpp&quot;using namespace std;using namespace Eigen;/// æœ¬ç¨‹åºæ¼”ç¤ºsophusçš„åŸºæœ¬ç”¨æ³•int main(int argc, char **argv) { // =======================SO(3)============================ // æ²¿Zè½´è½¬90åº¦çš„æ—‹è½¬çŸ©é˜µ Matrix3d R = AngleAxisd(M_PI / 2, Vector3d(0, 0, 1)).toRotationMatrix(); // æˆ–è€…å››å…ƒæ•° Quaterniond q(R); Sophus::SO3d SO3_R(R); // Sophus::SO3då¯ä»¥ç›´æ¥ä»æ—‹è½¬çŸ©é˜µæ„é€  Sophus::SO3d SO3_q(q); // ä¹Ÿå¯ä»¥é€šè¿‡å››å…ƒæ•°æ„é€  // äºŒè€…æ˜¯ç­‰ä»·çš„ cout &lt;&lt; &quot;SO(3) from matrix:\\n&quot; &lt;&lt; SO3_R.matrix() &lt;&lt; endl; cout &lt;&lt; &quot;SO(3) from quaternion:\\n&quot; &lt;&lt; SO3_q.matrix() &lt;&lt; endl; cout &lt;&lt; &quot;they are equal&quot; &lt;&lt; endl; // ä½¿ç”¨å¯¹æ•°æ˜ å°„è·å¾—å®ƒçš„æä»£æ•° Vector3d so3 = SO3_R.log(); cout &lt;&lt; &quot;so3 = &quot; &lt;&lt; so3.transpose() &lt;&lt; endl; // hat ä¸ºå‘é‡åˆ°åå¯¹ç§°çŸ©é˜µ cout &lt;&lt; &quot;so3 hat=\\n&quot; &lt;&lt; Sophus::SO3d::hat(so3) &lt;&lt; endl; // ç›¸å¯¹çš„ï¼Œveeä¸ºåå¯¹ç§°åˆ°å‘é‡ cout &lt;&lt; &quot;so3 hat vee= &quot; &lt;&lt; Sophus::SO3d::vee(Sophus::SO3d::hat(so3)).transpose() &lt;&lt; endl; // å¢é‡æ‰°åŠ¨æ¨¡å‹çš„æ›´æ–° Vector3d update_so3(1e-4, 0, 0); //å‡è®¾æ›´æ–°é‡ä¸ºè¿™ä¹ˆå¤š Sophus::SO3d SO3_updated = Sophus::SO3d::exp(update_so3) * SO3_R; cout &lt;&lt; &quot;SO3 updated = \\n&quot; &lt;&lt; SO3_updated.matrix() &lt;&lt; endl; cout &lt;&lt; &quot;*******************************&quot; &lt;&lt; endl; // =======================SE(3)============================ // å¯¹SE(3)æ“ä½œå¤§åŒå°å¼‚ Vector3d t(1, 0, 0); // æ²¿Xè½´å¹³ç§»1 Sophus::SE3d SE3_Rt(R, t); // ä»R,tæ„é€ SE(3) Sophus::SE3d SE3_qt(q, t); // ä»q,tæ„é€ SE(3) cout &lt;&lt; &quot;SE3 from R,t= \\n&quot; &lt;&lt; SE3_Rt.matrix() &lt;&lt; endl; cout &lt;&lt; &quot;SE3 from q,t= \\n&quot; &lt;&lt; SE3_qt.matrix() &lt;&lt; endl; // æä»£æ•°se(3) æ˜¯ä¸€ä¸ªå…­ç»´å‘é‡ï¼Œæ–¹ä¾¿èµ·è§å…ˆtypedefä¸€ä¸‹ typedef Eigen::Matrix&lt;double, 6, 1&gt; Vector6d; Vector6d se3 = SE3_Rt.log(); cout &lt;&lt; &quot;se3 = &quot; &lt;&lt; se3.transpose() &lt;&lt; endl; // è§‚å¯Ÿè¾“å‡ºï¼Œä¼šå‘ç°åœ¨Sophusä¸­ï¼Œse(3)çš„å¹³ç§»åœ¨å‰ï¼Œæ—‹è½¬åœ¨å. // åŒæ ·çš„ï¼Œæœ‰hatå’Œveeä¸¤ä¸ªç®—ç¬¦ cout &lt;&lt; &quot;se3 hat = \\n&quot; &lt;&lt; Sophus::SE3d::hat(se3) &lt;&lt; endl; cout &lt;&lt; &quot;se3 hat vee = &quot; &lt;&lt; Sophus::SE3d::vee(Sophus::SE3d::hat(se3)).transpose() &lt;&lt; endl; // æœ€åï¼Œæ¼”ç¤ºä¸€ä¸‹æ›´æ–° Vector6d update_se3; //æ›´æ–°é‡ update_se3.setZero(); update_se3(0, 0) = 1e-4; // ç”±æ­¤å¯çŸ¥ï¼Œè¿™é‡Œæ˜¯å°†å¹³ç§»æ’åœ¨æ—‹è½¬çš„å‰é¢ Sophus::SE3d SE3_updated = Sophus::SE3d::exp(update_se3) * SE3_Rt; cout &lt;&lt; &quot;SE3 updated = &quot; &lt;&lt; endl &lt;&lt; SE3_updated.matrix() &lt;&lt; endl; return 0;} ä¾‹å­ï¼šè¯„ä¼°è½¨è¿¹çš„è¯¯å·® \\mathrm{ATE}_{\\text {trans }}=\\sqrt{\\frac{1}{N} \\sum_{i=1}^{N}\\left\\|\\operatorname{trans}\\left(\\boldsymbol{T}_{\\mathrm{gt}, i}^{-1} \\boldsymbol{T}_{\\text {esti }, i}\\right)\\right\\|_{2}^{2}} ATE_{all} =\\sqrt{\\frac{1}{N} \\sum_{i=1}^{N}\\left\\|\\log \\left(\\boldsymbol{T}_{\\mathrm{gt}, i}^{-1} \\boldsymbol{T}_{\\text {esti }, i}\\right)^{\\vee}\\right\\|_{2}^{2}} \\mathrm{RPE}_{\\mathrm{all}}=\\sqrt{\\left.\\frac{1}{N-\\Delta t} \\sum_{i=1}^{N-\\Delta t} \\| \\log \\left(\\left(\\boldsymbol{T}_{\\mathrm{gt}, i}^{-1} \\boldsymbol{T}_{\\mathrm{gt}, i+\\Delta t}\\right)\\right)^{-1}\\left(\\boldsymbol{T}_{\\text {est }, i}^{-1} \\boldsymbol{T}_{\\text {est }, i+\\Delta t}\\right)\\right)^{\\vee} \\|_{2}^{2},} \\\\ \\mathrm{RPE}_{\\text {trans }}=\\sqrt{\\left.\\frac{1}{N-\\Delta t} \\sum_{i=1}^{N-\\Delta t} \\| \\operatorname{trans}\\left(\\left(\\boldsymbol{T}_{\\mathrm{gt}, i}^{-1} \\boldsymbol{T}_{\\mathrm{g}, i+\\Delta t}\\right)\\right)^{-1}\\left(\\boldsymbol{T}_{\\text {esti }, i}^{-1} \\boldsymbol{T}_{\\text {est }, i+\\Delta t}\\right)\\right) \\|_{2}^{2}} 12345678910option(USE_UBUNTU_20 &quot;Set to ON if you are using Ubuntu 20.04&quot; OFF)find_package(Pangolin REQUIRED)if(USE_UBUNTU_20) message(&quot;You are using Ubuntu 20.04, fmt::fmt will be linked&quot;) find_package(fmt REQUIRED) set(FMT_LIBRARIES fmt::fmt)endif()include_directories(${Pangolin_INCLUDE_DIRS})add_executable(trajectoryError trajectoryError.cpp)target_link_libraries(trajectoryError ${Pangolin_LIBRARIES} ${FMT_LIBRARIES}) 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102#include &lt;iostream&gt;#include &lt;fstream&gt;#include &lt;unistd.h&gt;#include &lt;pangolin/pangolin.h&gt;#include &lt;sophus/se3.hpp&gt;using namespace Sophus;using namespace std;string groundtruth_file = &quot;./example/groundtruth.txt&quot;;string estimated_file = &quot;./example/estimated.txt&quot;;typedef vector&lt;Sophus::SE3d, Eigen::aligned_allocator&lt;Sophus::SE3d&gt;&gt; TrajectoryType;void DrawTrajectory(const TrajectoryType &amp;gt, const TrajectoryType &amp;esti);TrajectoryType ReadTrajectory(const string &amp;path);int main(int argc, char **argv) { TrajectoryType groundtruth = ReadTrajectory(groundtruth_file); TrajectoryType estimated = ReadTrajectory(estimated_file); assert(!groundtruth.empty() &amp;&amp; !estimated.empty()); assert(groundtruth.size() == estimated.size()); // compute rmse double rmse = 0; for (size_t i = 0; i &lt; estimated.size(); i++) { Sophus::SE3d p1 = estimated[i], p2 = groundtruth[i]; double error = (p2.inverse() * p1).log().norm(); rmse += error * error; } rmse = rmse / double(estimated.size()); rmse = sqrt(rmse); cout &lt;&lt; &quot;RMSE = &quot; &lt;&lt; rmse &lt;&lt; endl; DrawTrajectory(groundtruth, estimated); return 0;}TrajectoryType ReadTrajectory(const string &amp;path) { ifstream fin(path); TrajectoryType trajectory; if (!fin) { cerr &lt;&lt; &quot;trajectory &quot; &lt;&lt; path &lt;&lt; &quot; not found.&quot; &lt;&lt; endl; return trajectory; } while (!fin.eof()) { double time, tx, ty, tz, qx, qy, qz, qw; fin &gt;&gt; time &gt;&gt; tx &gt;&gt; ty &gt;&gt; tz &gt;&gt; qx &gt;&gt; qy &gt;&gt; qz &gt;&gt; qw; Sophus::SE3d p1(Eigen::Quaterniond(qw, qx, qy, qz), Eigen::Vector3d(tx, ty, tz)); trajectory.push_back(p1); } return trajectory;}void DrawTrajectory(const TrajectoryType &amp;gt, const TrajectoryType &amp;esti) { // create pangolin window and plot the trajectory pangolin::CreateWindowAndBind(&quot;Trajectory Viewer&quot;, 1024, 768); glEnable(GL_DEPTH_TEST); glEnable(GL_BLEND); glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); pangolin::OpenGlRenderState s_cam( pangolin::ProjectionMatrix(1024, 768, 500, 500, 512, 389, 0.1, 1000), pangolin::ModelViewLookAt(0, -0.1, -1.8, 0, 0, 0, 0.0, -1.0, 0.0) ); pangolin::View &amp;d_cam = pangolin::CreateDisplay() .SetBounds(0.0, 1.0, pangolin::Attach::Pix(175), 1.0, -1024.0f / 768.0f) .SetHandler(new pangolin::Handler3D(s_cam)); while (pangolin::ShouldQuit() == false) { glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); d_cam.Activate(s_cam); glClearColor(1.0f, 1.0f, 1.0f, 1.0f); glLineWidth(2); for (size_t i = 0; i &lt; gt.size() - 1; i++) { glColor3f(0.0f, 0.0f, 1.0f); // blue for ground truth glBegin(GL_LINES); auto p1 = gt[i], p2 = gt[i + 1]; glVertex3d(p1.translation()[0], p1.translation()[1], p1.translation()[2]); glVertex3d(p2.translation()[0], p2.translation()[1], p2.translation()[2]); glEnd(); } for (size_t i = 0; i &lt; esti.size() - 1; i++) { glColor3f(1.0f, 0.0f, 0.0f); // red for estimated glBegin(GL_LINES); auto p1 = esti[i], p2 = esti[i + 1]; glVertex3d(p1.translation()[0], p1.translation()[1], p1.translation()[2]); glVertex3d(p2.translation()[0], p2.translation()[1], p2.translation()[2]); glEnd(); } pangolin::FinishFrame(); usleep(5000); // sleep 5 ms }}","link":"/2022/04/12/SLAM/ch4-%E6%9D%8E%E7%BE%A4%E5%92%8C%E6%9D%8E%E4%BB%A3%E6%95%B0%E5%9F%BA%E7%A1%80-%E5%BA%94%E7%94%A8%E5%92%8C%E5%AE%9E%E8%B7%B5/"},{"title":"Ch4 æç¾¤å’Œæä»£æ•°åŸºç¡€ æ¦‚å¿µå¼•å…¥","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦è®²è¿°ch4 æç¾¤å’Œæä»£æ•°åŸºç¡€çš„å‰ä¸¤èŠ‚ï¼Œæç¾¤å’Œæä»£æ•°åŸºç¡€å’ŒæŒ‡æ•°æ˜ å°„çš„éƒ¨åˆ†ï¼Œå¼•å…¥äº†æç¾¤æä»£æ•°çš„æ¦‚å¿µåŠå…¶ä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚ å¯¹äºä¸‰ç»´ä¸–ç•Œçš„åˆšä½“è¿åŠ¨è€Œè¨€ï¼Œå…¶æè¿°è¿åŠ¨çš„æ–¹å¼æœ‰å¾ˆå¤šï¼ŒåŒ…æ‹¬æ—‹è½¬çŸ©é˜µã€æ—‹è½¬å‘é‡ã€æ¬§æ‹‰è§’ã€å››å…ƒæ•° ã€‚ä½†æ˜¯é™¤äº†è¡¨ç¤ºï¼Œè¿˜è¦å°±æ˜¯å¯¹å…¶è¿›è¡Œä¼°è®¡å’Œä¼˜åŒ–ï¼Œä½†æ˜¯æ—‹è½¬çŸ©é˜µçš„è‡ªèº«å¸¦æœ‰çº¦æŸï¼Œ(å…¶æ­£äº¤ä¸”è¡Œåˆ—å¼ä¸º1)ï¼Œå› æ­¤å…¶ä½œä¸ºå˜é‡æ—¶ï¼Œä¼šå¼•å…¥é¢å¤–çš„çº¦æŸï¼Œä½¿å¾—ä¼˜åŒ–å˜å¾—å¾ˆå›°éš¾ã€‚äºæ˜¯æˆ‘ä»¬é‡‡ç”¨å˜æ¢åˆ°æä»£æ•°çš„æ–¹æ³•ï¼Œå¾—åˆ°ä¸€ä¸ªæ— çº¦æŸçš„ä¼˜åŒ–é—®é¢˜ã€‚ æç¾¤æä»£æ•°åŸºç¡€ä¸‰ç»´æ—‹è½¬çŸ©é˜µæ„æˆäº†ç‰¹æ®Šæ­£äº¤ç¾¤ï¼ˆSpecial Orthogonal Groupï¼‰: \\mathfrak {SO}(n)=\\{\\boldsymbol R \\in \\mathbb R^{n\\times n} | \\boldsymbol R\\boldsymbol R^T=\\boldsymbol I,\\det(\\boldsymbol R)=1\\}.ä¸‰ç»´å˜æ¢çŸ©é˜µæ„æˆäº†ç‰¹æ®Šæ¬§æ°ç¾¤ï¼ˆSpecial Euclidean Groupï¼‰ï¼š \\mathfrak{SE}(3) =\\left\\{\\boldsymbol{T}=\\left[\\begin{array}{ll}\\boldsymbol{R} & \\boldsymbol{t} \\\\ \\mathbf{0}^{T} & 1\\end{array}\\right] \\in \\mathbb{R}^{4 \\times 4} \\mid \\boldsymbol{R} \\in \\mathcal{SO}(3), \\boldsymbol{t} \\in \\mathbb{R}^{3}\\right\\}æ³¨æ„åˆ°æ—‹è½¬çŸ©é˜µæ—¶å¯¹åŠ æ³•ä¸å°é—­ï¼Œä½†æ˜¯å…¶å¯¹ä¹˜æ³•æ—¶å°é—­çš„ï¼š \\boldsymbol R_1 + \\boldsymbol R_2 \\notin SO(3),\\ \\boldsymbol T_1 + \\boldsymbol T_2 \\notin SE(3).\\\\ \\boldsymbol R_1 \\boldsymbol R_2 \\in SO(3),\\ \\boldsymbol T_1 \\boldsymbol T_2 \\in SE(3).\\\\å¯¹äºè¿™ç§åªæœ‰ä¸€ç§(è‰¯å¥½çš„)è¿ç®—çš„é›†åˆæˆ‘ä»¬ç§°ä¹‹ä¸ºç¾¤ã€‚ ç¾¤çš„æ¦‚å¿µç¾¤(Group): æ˜¯ä¸€ç§é›†åˆåŠ ä¸Šä¸€ç§è¿ç®—çš„ä»£æ•°ç»“æ„ã€‚ äºæ˜¯å°†é›†åˆè®°ä½œ$A$ ï¼Œè¿ç®—è®°ä½œ $\\cdot$ ï¼Œåˆ™ç¾¤è®°ä½œ $G=(A, \\cdot)$ ã€‚å…¶æ»¡è¶³çš„å‡ ä¸ªæ¡ä»¶å¦‚ä¸‹ï¼šç®€è®°ä¸º â€œå°ç»“å¹ºé€†â€ã€‚ å¯ä»¥éªŒè¯çš„æ˜¯æ—‹è½¬çŸ©é˜µå’Œå˜æ¢çŸ©é˜µå¯¹äºçŸ©é˜µä¹˜æ³•æ˜¯æ„æˆç¾¤çš„ï¼Œç§°å®ƒä»¬ä¸ºæ—‹è½¬çŸ©é˜µç¾¤å’Œå˜æ¢çŸ©é˜µç¾¤ã€‚ å¸¸è§çš„å˜æ¢ç¾¤æœ‰ï¼š ç¾¤çš„ç»“æ„æ˜¯ä¿è¯åœ¨ç¾¤ä¸Šçš„è®¡ç®—å…·æœ‰è‰¯å¥½çš„æ€§è´¨ã€‚ ç¾¤è®ºæ˜¯ç ”ç©¶ç¾¤çš„å„ç§ç»“æ„å’Œæ€§è´¨çš„ç†è®ºï¼Œå…·ä½“çš„ä»‹ç»è§æŠ½è±¡ä»£æ•°æˆ–è¿‘ä¸–ä»£æ•°æ•™æã€‚ æç¾¤(Lie Group) æ˜¯æ»¡è¶³ä»¥ä¸‹ç‰¹ç‚¹çš„ç¾¤ï¼š å…·æœ‰è¿ç»­å’Œå…‰æ»‘çš„æ€§è´¨çš„ç¾¤ã€‚ æ—¢æ˜¯ç¾¤ä¹Ÿæ˜¯æµå½¢ã€‚ ç›´è§‚ä¸Šçœ‹ï¼Œä¸€ä¸ªåˆšä½“èƒ½å¤Ÿè¿ç»­åœ°åœ¨ç©ºé—´è¿åŠ¨ï¼Œæ•…$SO(3),SE(3)$éƒ½æ˜¯æç¾¤ã€‚ ä½†æ˜¯ï¼Œ$SO(3),SE(3)$ åªæœ‰å®šä¹‰è‰¯å¥½çš„ä¹˜æ³•ï¼Œæ²¡æœ‰åŠ æ³•ï¼Œæ‰€ä»¥éš¾ä»¥è¿›è¡Œå»æé™ã€æ±‚å¯¼æ“ä½œã€‚ ä½†æ˜¯ï¼Œå¦‚æœç ”ç©¶ä¸€ä¸ªé›†åˆ+ä¸¤ä¸ªæˆ–å¤šä¸ªè¿ç®—ï¼Œé‚£å°±æ˜¯éœ€è¦ç ”ç©¶ç¯è®ºå’ŒåŸŸè®ºã€‚ æä»£æ•°çš„å¼•å‡ºæä»£æ•°ï¼šå’Œæç¾¤ä¸€ä¸€å¯¹åº”çš„ä¸€ç§ç»“æ„ï¼Œä½äºå‘é‡ç©ºé—´ã€‚ é€šå¸¸è®°ä½œå°å†™çš„$\\mathfrak {so}(3),\\mathfrak {se}(3)$ è¡¨ç¤ºï¼Œè¿™é‡Œçš„å­—ä½“æ˜¯å“¥ç‰¹ä½“ï¼Œå…¶ä¸»è¦çš„Latexä»£ç ä¸º\\mathfrak å‚è€ƒåšå®¢ ä½†æ˜¯ï¼Œäº‹å®ä¸Šæä»£æ•°æ˜¯æç¾¤å•ä½å…ƒä¸Šçš„æ­£åˆ‡ç©ºé—´ã€‚ æ¦‚å¿µçš„å¼•å‡ºè¿‡ç¨‹ï¼š å¯¹äºä»»æ„çš„æ—‹è½¬çŸ©é˜µï¼š$\\boldsymbol R \\boldsymbol R^T=I$ ï¼› å®é™…æƒ…å†µä¸‹ï¼Œæ—‹è½¬çŸ©é˜µæ˜¯éšæ—¶é—´çš„å˜åŒ–è€Œæ”¹å˜çš„ï¼Œäºæ˜¯æœ‰ï¼š$\\boldsymbol R(t) \\boldsymbol R(t)^T=I$ ï¼› ä¸¤ä¾§å¯¹æ—¶é—´æ±‚å¯¼å¯å¾—ï¼š$\\dot {\\boldsymbol R(t)} \\boldsymbol R(t)^T + \\boldsymbol {R(t)} \\dot {\\boldsymbol {R(t)}^T}= \\boldsymbol 0$ ï¼› æ•´ç†å¯å¾—ï¼š$\\dot {\\boldsymbol R(t)} \\boldsymbol R(t)^T =-( \\boldsymbol {R(t)} \\dot {\\boldsymbol {R(t)}})^T$ å¯ä»¥çœ‹å‡ºä¸Šè¿°çŸ©é˜µä¸ºä¸€ä¸ªåå¯¹ç§°çš„çŸ©é˜µï¼Œå³è¿™ä¸ªåå¯¹ç§°çŸ©é˜µå¯¹åº”çš„ä¸‰ç»´å‘é‡ä¸º$\\phi(t) \\in \\mathbb R^3$ ï¼Œåˆ™æœ‰ï¼š$\\dot {\\boldsymbol R(t)} \\boldsymbol R(t)^T = \\phi(t)^\\wedge$ å‚è€ƒåšå®¢ \\boldsymbol a^\\wedge=\\left[\\begin{array}{ccc}0 & -a_{3} & a_{2} \\\\ a_{3} & 0 & -a_{1} \\\\ -a_{2} & a_{1} & 0\\end{array}\\right] = \\boldsymbol A,\\ \\boldsymbol A^\\vee=aå…¶ä¸­ï¼Œè¿™é‡Œçš„$a = [a_1,a_2,a_3]$ æ˜¯ä¸€ä¸ªå‘é‡ã€‚ ä¸¤ä¾§å³ä¹˜$\\boldsymbol R(t)$å¯å¾—ï¼š$\\dot {\\boldsymbol R(t)} = \\phi(t)^\\wedge\\boldsymbol R(t)$ å…¶å®å°±æ˜¯ä¸€ä¸ªå¾®åˆ†æ–¹ç¨‹ ç”±æ­¤å¯å¾—ï¼Œæ±‚ä¸€æ¬¡å¯¼æ•°ä¹‹åï¼Œå·¦ä¾§åŠ ä¸€ä¸ª$\\phi(t)^\\wedge $çš„çŸ©é˜µå³å¯. å°†ä¸Šè¿°çš„å…¬å¼$\\dot {\\boldsymbol R(t)} = \\phi(t)^\\wedge\\boldsymbol R(t)$ä½œä¸ºä¸€ä¸ªå¾®åˆ†æ–¹ç¨‹æ¥è€ƒè™‘ï¼Œå…¶åˆå§‹çš„æ¡ä»¶è®¾ä¸ºï¼šåœ¨$t_0=0$æ—¶ï¼Œæ—‹è½¬çŸ©é˜µä¸º${\\boldsymbol R(0)}=\\boldsymbol I.$ åœ¨$t=0$å¤„è¿›è¡Œæ³°å‹’å±•å¼€ï¼Œå¹¶çœå»é«˜é˜¶é¡¹å¯å¾—ï¼š {\\boldsymbol R(t)} \\approx \\boldsymbol R(t_0)+\\dot {\\boldsymbol R}(t_0)(t-t_0) = \\boldsymbol I + \\phi(t_0)^ \\wedge(t) å¯è§$\\phi$ åæ˜ äº†æ—‹è½¬çŸ©é˜µçš„å¯¼æ•°æ€§è´¨ï¼Œå®ƒå°±ä½äºSO(3)ç©ºé—´çš„åŸç‚¹é™„è¿‘çš„æ­£åˆ‡ç©ºé—´ä¸Šã€‚ è¿™é‡Œï¼Œå‡è®¾åœ¨$t_0$é™„è¿‘ï¼Œ$\\phi(t_0)=\\phi_0$ æ˜¯ä¿æŒä¸å˜çš„ï¼Œäºæ˜¯å¾®åˆ†æ–¹ç¨‹å¯ä»¥åŒ–ç®€ä¸ºï¼š \\dot {\\boldsymbol R(t)} = \\phi(t_0)^\\wedge\\boldsymbol R(t)=\\phi_0^\\wedge\\boldsymbol R(t)ä»£å…¥åˆå€¼${\\boldsymbol R(0)}=\\boldsymbol I.$ è§£å¾—ï¼š${\\boldsymbol R(t)}=\\exp(\\phi_0^\\wedge t)$ ä¸Šè¿°å…¬å¼è¯´æ˜ï¼šå¯¹äºä»»æ„çš„æ—¶é—´ $t$ éƒ½å¯ä»¥æ‰¾åˆ°ä¸€ä¸ª $R$ å’Œ $\\phi$ çš„å¯¹äºå…³ç³» è¯¥å…³ç³»è¢«ç§°ä¸ºæŒ‡æ•°æ˜ å°„ï¼› è¿™é‡Œçš„ $\\phi$ ç§°ä¸ºSO(3)å¯¹åº”çš„æä»£æ•°ï¼š$\\mathfrak {so}(3)$ . é‚£ä¹ˆä¸‹é¢å°†è§£å†³ä»¥ä¸‹çš„å‡ ä¸ªé—®é¢˜ï¼š $\\mathfrak {so}(3)$ å³ $\\phi$ ä»€ä¹ˆå…·ä½“çš„å«ä¹‰åŠæ€§è´¨ï¼› ç»™å®šæä»£æ•° $\\phi$ å¦‚ä½•é€šè¿‡æŒ‡æ•°æ˜ å°„æ¥æ±‚è§£æ—‹è½¬çŸ©é˜µï¼Œåä¹‹ç»™å®šæ—‹è½¬çŸ©é˜µï¼Œå¦‚ä½•é€šè¿‡æŒ‡æ•°æ˜ å°„ è®¡ç®—å‡ºæ­¤å¤„çš„æä»£æ•° $\\phi$ ã€‚ æä»£æ•°çš„å®šä¹‰æ¯ä¸ªæç¾¤éƒ½æœ‰ä¸ä¹‹å¯¹åº”çš„æä»£æ•°ã€‚æä»£æ•°æè¿°äº†æç¾¤å•ä½å…ƒé™„è¿‘çš„æ­£åˆ‡ç©ºé—´æ€§è´¨ã€‚ å…¶ä¸­ï¼ŒäºŒå…ƒè¿ç®—$[,]$è¢«ç§°ä¸ºææ‹¬å·(Lie Bracket)ã€‚ ç›´è§‚æ¥è¯´ï¼Œææ‹¬å·è¡¨è¾¾äº†ä¸¤ä¸ªå…ƒç´ ä¹‹é—´çš„å·®å¼‚ï¼Œä»è‡ªåæ€§å¯å¾—ã€‚ è¿™é‡Œï¼Œæ¯”å¦‚åœ¨ä¸‰ç»´å‘é‡ä¸Šé¢å®šä¹‰çš„å‰ç§¯ $\\times$ å°±æ˜¯ä¸€ç§ææ‹¬å·ï¼Œäºæ˜¯ $\\mathfrak g=(\\mathbb R^3, \\mathbb R, \\times)$ å°±æ„æˆä¸€ä¸ªæä»£æ•°ã€‚ æä»£æ•°$\\mathfrak {so}(3)$SO(3)å¯¹åº”çš„æä»£æ•°å®šä¹‰åœ¨$\\mathbb R^3$ä¸Šçš„å‘é‡ï¼Œè¿™é‡Œè®°ä½œ$\\phi$ ï¼Œäºæ˜¯å¯å¾—ï¼š \\Phi = \\phi^{\\wedge} = \\left[\\begin{array}{ccc}0 & -\\phi_{3} & \\phi_{2} \\\\ \\phi_{3} & 0 & -\\phi_{1} \\\\ -\\phi_{2} & \\phi_{1} & 0\\end{array}\\right] \\in \\mathbb R^{3 \\times 3}åœ¨æ­¤å®šä¹‰ä¸‹çš„ææ‹¬å·ä¸ºï¼š(å¯ä»¥éªŒè¯å…¶æ»¡è¶³å››æ¡æ€§è´¨) [\\phi_1,\\phi_2] = (\\Phi_1\\Phi_2-\\Phi_2\\Phi_1)^{\\vee}ç”±äºå‘é‡å’Œåå¯¹ç§°çŸ©é˜µæ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œå› æ­¤å¯ä»¥ä¸åŠ åŒºåˆ«çš„è®¤ä¸º$\\mathfrak {so}(3)$ æ˜¯ä¸ªå‘é‡æˆ–åå¯¹ç§°çŸ©é˜µï¼š \\mathfrak {so}(3) = \\{ \\phi \\in\\mathbb R^3, \\Phi=\\phi^{\\wedge} \\in \\mathbb R^{3 \\times 3} \\}å› æ­¤$\\mathfrak {so}(3)$ å¯ä»¥çœ‹æˆæ˜¯å‘é‡ç»„æˆçš„ä¸€ä¸ªé›†åˆï¼Œæ¯ä¸ªå‘é‡å¯¹åº”ä¸€ä¸ªåå¯¹ç§°çŸ©é˜µï¼Œå…¶å¯ä»¥ç”¨æ¥è¡¨è¾¾ä¸€ä¸ªæ—‹è½¬çŸ©é˜µçš„å¯¼æ•°ã€‚ å…¶ä¸­SO(3)åˆ°$\\mathfrak {so}(3)$ çš„æ˜ å°„ä¸ºï¼š${\\boldsymbol R(t)}=\\exp(\\phi_0^\\wedge t)$ æä»£æ•°$\\mathfrak{s e}(3)$åŒç†å¯¹äº$\\mathfrak{s e}(3)$ ,æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ª6ç»´çš„å‘é‡æ¥è¡¨ç¤ºï¼Œè¿™é‡Œè®°ä¸º$\\xi$ ï¼Œ å…¶å‰ä¸‰ä¸ªç»´åº¦æ˜¯ç”¨æ¥è¡¨ç¤ºå¹³ç§»ï¼Œè®°ä½œ$\\rho $ï¼Œå®ƒå°±æ˜¯æ˜¯ä¸ªæ™®é€šçš„å‘é‡ï¼Œä½†æ˜¯ä¸æ˜¯SE(3)ä¸Šçš„å¹³ç§»åˆ†é‡ï¼› åä¸‰ä¸ªç»´åº¦æ˜¯ç”¨æ¥è¡¨ç¤ºæ—‹è½¬ï¼Œè®°ä½œ$\\phi$ ã€è¿™é‡Œå…¶å®å°±æ˜¯$\\mathfrak {so}(3)$ã€‘ã€‚ \\mathfrak{s e}(3)=\\left\\{\\xi=\\left[\\begin{array}{c}\\rho \\\\ \\phi\\end{array}\\right] \\in \\mathbb{R}^{6}, \\rho \\in \\mathbb{R}^{3}, \\phi \\in \\mathfrak{s o}(3), \\xi^{\\wedge}=\\left[\\begin{array}{cc}\\phi^{\\wedge} & \\rho \\\\ 0^{T} & 0\\end{array}\\right] \\in \\mathbb{R}^{4 \\times 4}\\right\\}å…¶ä¸­ï¼Œ$\\wedge$ ä¸å†æ˜¯åå¯¹ç§°çŸ©é˜µï¼Œä½†ä»ä¿ç•™è¿™ç§è®°æ³•ï¼Œå…¶å®ä¹Ÿæ˜¯ç¬¦å·çš„ä¸€ç§æ‰©å±•ï¼š $\\wedge$ ï¼šè¡¨ç¤ºä»å‘é‡åˆ°çŸ©é˜µï¼› $\\vee$ ï¼šè¡¨ç¤ºä»çŸ©é˜µåˆ°å‘é‡ã€‚ \\boldsymbol{\\xi}^{\\wedge}=\\left[\\begin{array}{cc}\\phi^{\\wedge} & \\rho \\\\ \\mathbf{0}^{T} & 0\\end{array}\\right] \\in \\mathbb{R}^{4 \\times 4}åœ¨æ­¤å®šä¹‰ä¸‹çš„ææ‹¬å·ä¸ºï¼š(å¯ä»¥éªŒè¯å…¶æ»¡è¶³å››æ¡æ€§è´¨) {\\left[\\boldsymbol{\\xi}_{1}, \\boldsymbol{\\xi}_{2}\\right]=\\left(\\boldsymbol{\\xi}_{1}^{\\wedge} \\boldsymbol{\\xi}_{2}^{\\wedge}-\\boldsymbol{\\xi}_{2}^{\\wedge} \\boldsymbol{\\xi}_{1}^{\\wedge}\\right)^{\\vee} }æ³¨æ„ï¼š ä¸åŒä¹¦ç±å¯¹se(3)çš„å¹³ç§»/æ—‹è½¬åˆ†é‡çš„å…ˆåé¡ºåºå®šä¹‰ä¸åŒã€‚è¿™é‡Œä½¿ç”¨å¹³ç§»åœ¨å‰çš„æ–¹å¼ï¼Œä¹Ÿæœ‰åœ°æ–¹æ˜¯æ—‹è½¬åœ¨å‰çš„ã€‚ æŠŠæä»£æ•°ç†è§£æˆå‘é‡å½¢å¼æˆ–çŸ©é˜µå½¢å¼éƒ½æ˜¯å¯ä»¥çš„ã€‚å‘é‡å½¢å¼æ›´åŠ è‡ªç„¶ä¸€äº›ã€‚ æŒ‡æ•°æ˜ å°„å’Œå¯¹æ•°æ˜ å°„SO(3)ä¸Šçš„æŒ‡æ•°æ˜ å°„æŒ‡æ•°æ˜ å°„åæ˜ äº†æç¾¤å’Œæä»£æ•°çš„å¯¹åº”å…³ç³»ï¼Œä½†æ˜¯å¯¹äºä»»æ„çš„çŸ©é˜µæ¥è¯´ï¼Œå…¶æŒ‡æ•°æ˜ å°„å¯ä»¥å†™æˆä¸€ä¸ªTarylorå±•å¼€ï¼š \\exp(\\boldsymbol A) = \\sum_{n=0}^{\\infty} \\frac 1 {n!} \\boldsymbol A^n \\Rightarrow \\exp(\\phi^{\\wedge}) = \\sum_{n=0}^{\\infty} \\frac 1 {n!} (\\phi^{\\wedge})^nä½†æ˜¯è¿™é‡Œçš„$\\phi^{\\wedge}$ æ˜¯ä¸€ä¸ªå‘é‡ï¼Œå®šä¹‰å…¶å¯¹äºçš„æ¨¡é•¿å’Œæ–¹å‘(è§’åº¦)ï¼š è§’åº¦ä¹˜å•ä½å‘é‡ï¼š$\\phi = \\theta a$ï¼› å…³äºå•ä½æ–¹å‘å‘é‡$a$ ï¼Œæœ‰ä»¥ä¸‹çš„æ€§è´¨ï¼š \\boldsymbol{a}^{\\wedge} \\boldsymbol{a}^{\\wedge}=\\left[\\begin{array}{ccc}-a_{2}^{2}-a_{3}^{2} & a_{1} a_{2} & a_{1} a_{3} \\\\ a_{1} a_{2} & -a_{1}^{2}-a_{3}^{2} & a_{2} a_{3} \\\\ a_{1} a_{3} & a_{2} a_{3} & -a_{1}^{2}-a_{2}^{2}\\end{array}\\right]=\\boldsymbol{a a}^{\\mathrm{T}}-\\boldsymbol{I}\\\\ \\boldsymbol{a}^{\\wedge} \\boldsymbol{a}^{\\wedge} \\boldsymbol{a}^{\\wedge} = \\boldsymbol{a}^{\\wedge} (\\boldsymbol{a a}^{\\mathrm{T}}-\\boldsymbol{I}) =- \\boldsymbol{a}^{\\wedge} ä¸Šè¿°çš„å¼å­æä¾›äº†è®¡ç®—é«˜é˜¶é¡¹çš„æ–¹æ³•ï¼Œäºæ˜¯å¯å¾—æä»£æ•°çš„å±•å¼€å¼ä¸ºï¼š \\begin{aligned} \\exp \\left(\\phi^{\\wedge}\\right) &=\\exp \\left(\\theta \\boldsymbol{a}^{\\wedge}\\right)=\\sum_{n=0}^{\\infty} \\frac{1}{n !}\\left(\\theta \\boldsymbol{a}^{\\wedge}\\right)^{n} \\\\ &=\\boldsymbol{I}+\\theta \\boldsymbol{a}^{\\wedge}+\\frac{1}{2 !} \\theta^{2} \\boldsymbol{a}^{\\wedge} \\boldsymbol{a}^{\\wedge}+\\frac{1}{3 !} \\theta^{3} \\boldsymbol{a}^{\\wedge} \\boldsymbol{a}^{\\wedge} \\boldsymbol{a}^{\\wedge}+\\frac{1}{4 !} \\theta^{4}\\left(\\boldsymbol{a}^{\\wedge}\\right)^{4}+\\ldots \\\\ &=\\boldsymbol{a} \\boldsymbol{a}^{T}-\\boldsymbol{a}^{\\wedge} \\boldsymbol{a}^{\\wedge}+\\theta \\boldsymbol{a}^{\\wedge}+\\frac{1}{2 !} \\theta^{2} \\boldsymbol{a}^{\\wedge} \\boldsymbol{a}^{\\wedge}-\\frac{1}{3 !} \\theta^{3} \\boldsymbol{a}^{\\wedge}-\\frac{1}{4 !} \\theta^{4}\\left(\\boldsymbol{a}^{\\wedge}\\right)^{2}+\\ldots \\\\ &=\\boldsymbol{a} \\boldsymbol{a}^{T}+\\left(\\theta-\\frac{1}{3 !} \\theta^{3}+\\frac{1}{5 !} \\theta^{5}-\\ldots\\right) \\boldsymbol{a}^{\\wedge}-\\left(1-\\frac{1}{2 !} \\theta^{2}+\\frac{1}{4 !} \\theta^{4}-\\ldots\\right) \\boldsymbol{a}^{\\wedge} \\boldsymbol{a}^{\\wedge} \\\\ &=\\boldsymbol{a}^{\\wedge} \\boldsymbol{a}^{\\wedge}+\\boldsymbol{I}+\\sin \\theta \\boldsymbol{a}^{\\wedge}-\\cos \\theta \\boldsymbol{a}^{\\wedge} \\boldsymbol{a}^{\\wedge} \\\\ &=(1-\\cos \\theta) \\boldsymbol{a}^{\\wedge} \\boldsymbol{a}^{\\wedge}+\\boldsymbol{I}+\\sin \\theta \\boldsymbol{a}^{\\wedge} \\\\ &=\\cos \\theta \\boldsymbol{I}+(1-\\cos \\theta) \\boldsymbol{a} \\boldsymbol{a}^{T}+\\sin \\theta \\boldsymbol{a}^{\\wedge} \\end{aligned}å¯¹æ¯”ä¸Šè¿°çš„åŒ–ç®€ç»“æœå¯å¾—ç½—å¾·é‡Œæ ¼æ–¯å…¬å¼ï¼š \\exp \\left(\\theta \\boldsymbol{a}^{\\wedge}\\right)=\\cos \\theta \\boldsymbol{I}+(1-\\cos \\theta) \\boldsymbol{a} \\boldsymbol{a}^{T}+\\sin \\theta \\boldsymbol{a}^{\\wedge} è¿™å°±æ˜¯è¯´æ˜äº†$\\mathfrak {so}(3)$ çš„æ„ä¹‰å°±æ˜¯é€‰æ—‹è½¬å‘é‡ç»„æˆçš„ç©ºé—´ï¼Œè€ŒæŒ‡æ•°æ˜ å°„å°±æ˜¯ç½—å¾·é‡Œæ ¼æ–¯å…¬å¼ã€‚ åä¹‹ï¼Œå®šä¹‰å¯¹æ•°æ˜ å°„ä¹Ÿæ˜¯å¯ä»¥å°†SO(3)ä¸­çš„å…ƒç´ æ˜ å°„åˆ°$\\mathfrak {so}(3)$ä¸­ï¼š \\phi=\\ln (\\boldsymbol{R})^{\\vee}=\\left(\\sum_{n=0}^{\\infty} \\frac{(-1)^{n}}{n+1}(\\boldsymbol{R}-\\boldsymbol{I})^{n+1}\\right)^{\\vee}ä½†æ˜¯å®é™…ä¸Šæˆ‘ä»¬æ²¡å¿…è¦åœ¨ä½¿ç”¨å¯¹æ•°æ˜ å°„ï¼Œå› ä¸ºä¸Šä¸€ç« å·²ç»è®²åˆ°è¿‡æ—‹è½¬çŸ©é˜µæ¥è½¬æˆæ—‹è½¬å‘é‡çš„å…¬å¼ï¼š \\theta=\\arccos \\left( \\dfrac {\\tr(\\boldsymbol R)-1} {2}\\right),\\ \\boldsymbol R \\boldsymbol n =\\boldsymbol n è‡³æ­¤ï¼Œæˆ‘ä»¬å°±å¾—åˆ°äº†SO(3)å’Œ$\\mathfrak {so}(3)$ ä¹‹é—´çš„è½¬æ¢å…³ç³»ï¼Œä½†æ˜¯å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒæŒ‡æ•°æ˜ å°„åªæ˜¯ä¸€ä¸ªæ»¡å°„ï¼Œä¸æ˜¯å•å°„ï¼Œä¹Ÿå°±æ˜¯SO(3)ä¸­çš„å…ƒç´ éƒ½å¯ä»¥æ‰¾åˆ°å¯¹åº”çš„$\\mathfrak {so}(3)$ çš„å…ƒç´ ï¼Œä½†æ˜¯å¯èƒ½å­˜åœ¨å¤šä¸ª$\\mathfrak {so}(3)$çš„å…ƒç´ å¯¹åº”åŒä¸€ä¸ªSO(3)çš„å…ƒç´ ã€‚ å› ä¸ºæ˜¾ç„¶æ—‹è½¬çŸ©é˜µæ—‹è½¬ä¸€å‘¨ä¹‹åçš„ç»“æœæ˜¯ç›¸åŒçš„ï¼Œå› æ­¤å¦‚æœå®šä¹‰æ—‹è½¬è§’åœ¨$[-\\pi,\\pi]$ä¹‹é—´ï¼Œé‚£ä¹ˆæŒ‡æ•°æ˜ å°„å°±æ˜¯ä¸€ä¸ªæ»¡å°„ã€‚ SE(3)ä¸Šçš„æŒ‡æ•°æ˜ å°„ç±»æ¯”ä¹‹å‰çš„$\\mathfrak {so}(3)$ å¯å¾—ï¼Œ$\\mathfrak {se}(3)$çš„æŒ‡æ•°æ˜ å°„çš„å½¢å¼ä¸ºï¼š \\begin{aligned} \\exp \\left(\\boldsymbol{\\xi}^{\\wedge}\\right) &=\\left[\\begin{array}{cc}\\sum\\limits_{n=0}^{\\infty} \\dfrac{1}{n !}\\left(\\phi^{\\wedge}\\right)^{n} & \\sum\\limits_{n=0}^{\\infty} \\dfrac{1}{(n+1) !}\\left(\\phi^{\\wedge}\\right)^{n} \\boldsymbol{\\rho} \\\\ \\boldsymbol{0}^{\\mathrm{T}}\\end{array}\\right] \\\\ & \\triangleq\\left[\\begin{array}{cc}\\boldsymbol{R} & \\boldsymbol{J} \\boldsymbol{\\rho} \\\\ \\mathbf{0}^{\\mathrm{T}} & 1\\end{array}\\right]=\\boldsymbol{T} . \\end{aligned}ä»£å…¥ä¸Šè¿°çš„è®¡ç®—å…¬å¼ï¼Œè®¡ç®—å¯å¾—ï¼š \\begin{aligned} \\sum_{n=0}^{\\infty} \\frac{1}{(n+1) !}\\left(\\phi^{\\wedge}\\right)^{n} &=\\boldsymbol{I}+\\frac{1}{2 !} \\theta \\boldsymbol{a}^{\\wedge}+\\frac{1}{3 !} \\theta^{2}\\left(\\boldsymbol{a}^{\\wedge}\\right)^{2}+\\frac{1}{4 !} \\theta^{3}\\left(\\boldsymbol{a}^{\\wedge}\\right)^{3}+\\frac{1}{5 !} \\theta^{4}\\left(\\boldsymbol{a}^{\\wedge}\\right)^{4} \\cdots \\\\ &=\\frac{1}{\\theta}\\left(\\frac{1}{2 !} \\theta^{2}-\\frac{1}{4 !} \\theta^{4}+\\cdots\\right)\\left(\\boldsymbol{a}^{\\wedge}\\right)+\\frac{1}{\\theta}\\left(\\frac{1}{3 !} \\theta^{3}-\\frac{1}{5} \\theta^{5}+\\cdots\\right)\\left(\\boldsymbol{a}^{\\wedge}\\right)^{2}+\\boldsymbol{I} \\\\ &=\\frac{1}{\\theta}(1-\\cos \\theta)\\left(\\boldsymbol{a}^{\\wedge}\\right)+\\frac{\\theta-\\sin \\theta}{\\theta}\\left(\\boldsymbol{a} \\boldsymbol{a}^{\\mathrm{T}}-\\boldsymbol{I}\\right)+\\boldsymbol{I} \\\\ &=\\frac{\\sin \\theta}{\\theta} \\boldsymbol{I}+\\left(1-\\frac{\\sin \\theta}{\\theta}\\right) \\boldsymbol{a} \\boldsymbol{a}^{\\mathrm{T}}+\\frac{1-\\cos \\theta}{\\theta} \\boldsymbol{a}^{\\wedge} \\stackrel{\\text { def }}{=} \\boldsymbol{J} \\end{aligned}äºæ˜¯æˆ‘ä»¬å°†å¹³ç§»éƒ¨åˆ†ç»è¿‡æŒ‡æ•°å˜æ¢ï¼Œå…¶å®ç›¸å½“äºä¸€ä¸ªç³»æ•°ä¸º$\\boldsymbol J$ çš„çº¿æ€§å˜æ¢ï¼š \\boldsymbol{J}=\\frac{\\sin \\theta}{\\theta} \\boldsymbol{I}+\\left(1-\\frac{\\sin \\theta}{\\theta}\\right) \\boldsymbol{a} \\boldsymbol{a}^{\\mathrm{T}}+\\frac{1-\\cos \\theta}{\\theta} \\boldsymbol{a}^{\\wedge}è¿™é‡Œå’Œ$\\mathfrak {so}(3)$ç›¸åŒï¼Œä½†æ˜¯ä¸€èˆ¬ä½¿ç”¨æ˜¯ä¸ç”¨å¯¹æ•°å˜æ¢ï¼Œæœ‰å¯¹åº”çš„å…¬å¼å¯ä»¥è§£å‡ºï¼Œ$\\phi$ å·²çŸ¥ï¼Œå°±å¯ä»¥è§£å‡º$\\boldsymbol J$ è¿›è€Œè§£æ–¹ç¨‹å¯ä»¥æ±‚å‡º$\\rho$ . ä¸Šé¢ä¸¤ç§å˜åŒ–çš„æ€»ç»“å¦‚ä¸‹ï¼š","link":"/2022/04/12/SLAM/ch4-%E6%9D%8E%E7%BE%A4%E5%92%8C%E6%9D%8E%E4%BB%A3%E6%95%B0%E5%9F%BA%E7%A1%80-%E6%A6%82%E5%BF%B5%E5%BC%95%E5%85%A5/"},{"title":"Ch2 Learning to Answering Yes &#x2F; No","text":"hljs.initHighlightingOnLoad(); æœ¬è®²ä¸»è¦è§£å†³æ˜¯äºŒå…ƒçš„æ˜¯éçš„é—®é¢˜ï¼Œæœ¬ç« ç®€å•çš„ä»‹ç»äº†ä¸€äº›PLAæ„ŸçŸ¥å™¨çš„å®šä¹‰å’Œæ±‚è§£é—®é¢˜ï¼Œæ¯”è¾ƒçš„åŸºç¡€ã€‚å¹¶ä¸”è¯æ˜å…¶åœ¨çº¿æ€§å¯åˆ†çš„æ¡ä»¶ä¸‹æ˜¯å¯ä»¥æ”¶æ•›çš„ï¼Œå¹¶è®¨è®ºäº†ä¸€äº›çº¿æ€§ä¸å¯åˆ†çš„æƒ…å†µã€‚ Perceptron Hypothesis Seté¦–å…ˆï¼Œå¤ä¹ ä¹‹å‰å­¦ä¹ é—®é¢˜çš„ä¸»è¦çš„æ¡†æ¶â€”â€”ä»¥æ˜¯å¦å‘æ”¾ä¿¡ç”¨å¡çš„é—®é¢˜ä¸ºä¾‹ã€‚ A Simple Hypothesis Set: the â€˜Perceptronâ€™ å°†æ¯ä¸ªä½¿ç”¨è€…è½¬æ¢ä¸ºå‘é‡è¡¨ç¤ºï¼Œæ¯ä¸ªç»´åº¦ä»£è¡¨ä¸€ç§å±æ€§ï¼› å°†æ¯ä¸ªç»´åº¦å€¼è¿›è¡ŒåŠ æƒæ±‚å’Œï¼Œå¦‚æœæœ€åçš„å€¼å¤§äºä¸€ä¸ªé˜ˆå€¼ï¼Œå°±å€Ÿé’±ï¼Œå¦åˆ™å°±ä¸ç»™å‘è´·æ¬¾ã€‚ è¿™é‡Œä½¿ç”¨ä¸¤ä¸ªæ•°å­—æ¥ä»£è¡¨äºŒå…ƒçš„é—®é¢˜ï¼Œä½¿ç”¨+1ä»£è¡¨goodã€ä½¿ç”¨-1ä»£è¡¨bad; è¿™é‡Œä½¿ç”¨$sign()$å‡½æ•°ï¼Œç”±äºåˆšå¥½ç­‰äº0çš„æ¦‚ç‡æ˜¯å¾ˆå°çš„ï¼Œè¿™é‡Œå°±é€‰æ‹©å¿½ç•¥ï¼Œæˆ–è€…éšæœºæŒ‡å‘äºŒè€…ä¸­çš„ä¸€ä¸ªæ¥è¿›è¡Œå†³ç­–ã€‚ $h$ ä»£è¡¨æ˜¯ä¸€ç§å‡½æ•°æ˜ å°„ï¼Œå…¶å‚æ•°ä¸»è¦åŒ…æ‹¬çš„æ˜¯$w_i$å’Œ $threshold$ .è¿™ç§æ¨¡å‹åˆ«ç§°ä¸ºæ„ŸçŸ¥å™¨(perceptron)ã€‚ ä½†æ˜¯ä¸Šè¿°çš„è¡¨ç¤ºå…¬å¼æ¯”è¾ƒçš„å¤æ‚ï¼Œäºæ˜¯æˆ‘ä»¬å°±è€ƒè™‘å°†ä¸Šè¿°çš„å…¬å¼è¿›è¡Œç®€åŒ–å¦‚ä¸‹ã€‚ Vector Form of Perceptron Hypothesis è¿™é‡Œä¸ºäº†å¯ä»¥æ›´åŠ ç›´è§‚çš„äº†è§£ï¼Œæˆ‘ä»¬äºæ˜¯è€ƒè™‘äºŒç»´çš„æƒ…å†µã€‚ æ­¤æ—¶çš„$h(x)$å°±å¯¹åº”ä¸€æ¡åˆ†ç•Œçº¿ï¼Œå¯¹äº3ä¸ºçš„æƒ…å†µå°±æ˜¯ä¸€ä¸ªåˆ†ç•Œé¢ã€‚ è¿™é‡Œæ„ŸçŸ¥å™¨åˆ«ç§°ä¸ºçº¿æ€§åˆ†ç±»å™¨ã€‚linear (binary) classifiers Perceptron Learning Algorithm (PLA)Select g from $\\mathcal{H}$ $\\mathcal{H}$ = all possible perceptron, ç°åœ¨è¦æ±‚çš„æ˜¯ g è¿™é‡Œå¸Œæœ›çš„æ˜¯ g å¯ä»¥æ— é™çš„å¯¹ f è¿›è¡Œé€¼è¿‘ï¼Œå°½å¯èƒ½çš„ä¿è¯åœ¨æ•°æ®ç‚¹ä¸Šæ˜¯ç›¸åŒçš„ã€‚ ä½†æ˜¯é¢ä¸´çš„ä¸»è¦çš„å›°éš¾æ˜¯ï¼šå¯é€‰å‡è®¾é›†åˆ$\\mathcal{H}$ çš„è§„æ¨¡æ˜¯æ— é™å¤§çš„ã€‚ äºæ˜¯æˆ‘ä»¬è€ƒè™‘é¦–å…ˆåˆå§‹åŒ–ä¸€æ¡çº¿ï¼Œç„¶åé€šè¿‡ä¼˜åŒ–çš„æ–¹æ³•æ¥è¿›è¡Œä¼˜åŒ–ã€‚ will represent $g_0$ by its weight vector $ w_0$ Perceptron Learning Algorithm é¦–å…ˆï¼Œæ‰¾åˆ°ä¸€ä¸ªçŠ¯äº†é”™è¯¯çš„ç‚¹$(x_n,y_n)$ï¼› ä¹‹åï¼Œè§‚å¯Ÿå¯å¾—ï¼š ç¬¬ä¸€ç§æƒ…å†µä¸‹wå’Œxçš„å¤¹è§’æ˜¯å¤§äº90Â°çš„ï¼Œå†…ç§¯çš„ç»“æœä¸º-1ï¼Œä½†æ˜¯çœŸå®çš„æƒ…å†µæ˜¯y=+1ï¼Œäºæ˜¯æˆ‘ä»¬å°±å°†$w\\leftarrow w+y*x$ è¿™æ ·å¯ä»¥å‡å°å¯¹äºçš„å¤¹è§’ã€‚ ç¬¬äºŒç§æƒ…å†µï¼Œå¤¹è§’è¿‡å¤§ï¼Œå†…ç§¯åçš„ç»“æœä¸º-1äº†ï¼Œä½†æ˜¯å®é™…è¦æ±‚çš„ç»“æœæ˜¯y=-1ï¼Œ$w\\leftarrow w+y*x$ è¿™æ ·ä¸€æ¥å°±å‡å°çš„å¤¹è§’ã€‚ é‡å¤ï¼Œä¸€ç›´åˆ°æœ€åçš„é”™è¯¯ç‚¹å…¨éƒ¨æ¶ˆå¤±ã€‚ Practical Implementation of PLA ä¸‹é¢å±•ç¤ºä¸€ç»„ä¼˜åŒ–çš„è¿‡ç¨‹ï¼Œæ¥ç›´è§‚çš„ç†è§£è¯¥ç®—æ³•çš„å·¥ä½œåŸç†ã€‚ åˆšå¼€å§‹çš„æ—¶å€™ï¼Œå…¨éƒ¨åˆå§‹åŒ–ä¸º+1æˆ–è€…-1ï¼› ä¹‹åå°±æ˜¯ä¸æ–­éå†å½“å‰æƒ…å†µä¸‹åˆ†ç±»é”™è¯¯çš„ç‚¹ï¼Œæ›´æ–°ä¸€æ¬¡ä¹‹åï¼Œå…¶åˆ†ç±»é”™è¯¯çš„ç‚¹çš„é›†åˆä¹Ÿä¼šæ›´æ–°ã€‚ Some Remaining Issues of PLAä¸»è¦çš„é—®é¢˜ï¼š å¦‚æœç®—æ³•åœæ­¢ä¹‹åå°±ä¼šæ‰¾åˆ°æ¯”è¾ƒå¥½çš„åˆ†ç±»æ›²çº¿ï¼Œä½†é—®é¢˜æ˜¯è¿™ä¸ªç®—æ³•ä¼šä¸ä¼šæ”¶æ•›å¹¶ç»ˆæ­¢è®¡ç®—ã€‚ g å’Œ f åœ¨å·²æœ‰çš„æ•°æ®$\\mathcal{D}$ä¸Šæ˜¯éå¸¸æ»¡è¶³é€¼è¿‘çš„ï¼Œä½†æ˜¯å¦‚æœåœ¨$\\mathcal{D}$ ä¹‹å¤–æ˜¯å¦è¿˜æ»¡è¶³è®¡ç®—ä¸Šçš„è¦æ±‚ï¼Œå°±æ˜¯æœªçŸ¥çš„äº†ã€‚ Guarantee of PLALinear Separability ä½¿ç”¨PLAç®—æ³•é¦–å…ˆå°±æ˜¯è¦ä¿è¯å…¶ä¸€å®šè¦æ˜¯çº¿æ€§å¯åˆ†çš„ã€‚ å¯¹äºéçº¿æ€§çš„å¤„ç†ï¼Œä¹‹åçš„è¯¾ç¨‹ä¼šç»™å‡ºè¯¦ç»†çš„æ±‚è§£çš„æ–¹æ³•ã€‚ ä¸‹é¢ä¸»è¦å°±æ˜¯æ¥è®¨è®ºï¼Œåœ¨ç»™å®šçº¿æ€§å¯åˆ†çš„å‰æä¸‹ï¼Œæ˜¯å¦å¯ä»¥ä¿è¯PLAç®—æ³•æ˜¯ä¸€å®šå¯ä»¥åœæ­¢çš„ã€‚ PLA Fact: $w_t$ gets more Aligned with $w_f$ ä¸‹é¢ä¸»è¦è¯æ˜çš„æ˜¯ï¼Œå¯¹äºPLAè€Œè¨€ï¼Œæ¯ä¸€æ¬¡æ›´æ–°çš„å€¼$w_{t}$ æ€»æ˜¯æ›´åŠ æ¥è¿‘æœ€ä¼˜å€¼çš„ã€‚ ç¬¬ä¸€æ­¥æ˜¯æƒ³è¯´æ˜å¯¹äºæ¯ä¸ªåˆ†ç±»æ­£ç¡®çš„å€¼è€Œè¨€ï¼Œ$y_nw_f^Tx_n$çš„å€¼ä¸€å®šæ˜¯å¤§äº0çš„ï¼Œè€Œä¸”è¶Šæ¥è¿‘è¾¹ç•Œå€¼ï¼Œå…¶å€¼å°±æ„ˆæ¥æ„ˆå°ã€‚ ç¬¬äºŒæ­¥å°±è¯æ˜äº†æ¯æ¬¡æ›´æ–°ä¹‹åï¼Œ$w_fw_{t+1}$çš„å€¼å°±è¶Šå¤§ã€‚ ä½†æ˜¯ç¬¬äºŒæ­¥ä»…ä»…è¯´æ˜äº†ï¼Œåœ¨ä¸è€ƒè™‘$w$çš„é•¿åº¦çš„æƒ…å†µä¸‹ï¼Œå…¶å¤¹è§’æ˜¯é€æ¸å‡å°çš„ï¼Œä¸‹é¢è¯æ˜å…¶é•¿åº¦çš„å˜åŒ–å¯ä»¥å¿½ç•¥ã€‚ PLA Fact: $w_t$ Does Not Grow Too Fast è¿™é‡Œæ¯æ¬¡æ§åˆ¶å…¶æƒé‡æ›´æ–°çš„ç‚¹å…¶å®ä¸»è¦æ˜¯ä¸Šä¸€è½®åˆ†ç±»é”™è¯¯çš„ç‚¹ã€‚ $y_{n(t)}=\\pm1\\ \\Rightarrow\\ y_{n(t)}^2=1$ è¿™é‡Œä¸»è¦æ˜¯è¯æ˜äº†ï¼Œå…¶æ¯æ¬¡å¢åŠ çš„é‡ä¸æ˜¯å¾ˆå¤§ï¼Œå¯ä»¥å¿½ç•¥ã€‚ start from $w_0=0$, after T mistake corrections, \\frac{w_f^T}{||w_f||}\\frac{w_T}{||w_T||} \\ge \\sqrt{T} \\vdot constantè¿™é‡Œä»£è¡¨çš„æ˜¯å†…ç§¯çš„è®¡ç®—ï¼Œå…¶å®ç›¸å½“äºä½™å¼¦å¤¹è§’ï¼Œä¸Šå¼çš„æœ€å¤§å€¼ä¸º1. Non-Separable Data åœ¨ä¿è¯çº¿æ€§å¯åˆ†çš„æƒ…å†µä¸‹ï¼Œå¯å¾—å…¶å†…ç§¯åœ¨å¾ˆå¿«çš„å‡å°ï¼Œå¹¶ä¸”å…¶é•¿åº¦ä¸Šå‡çš„å¾ˆæ…¢ï¼Œäºæ˜¯å¯å¾—å…¶$w_t$åœ¨ä¸æ–­åœ°æ¥è¿‘æœ€ä¼˜å€¼$w_f$. å…¶å¥½å¤„æ˜¯è¿ç®—é€Ÿåº¦å¿«ï¼Œå¯ä»¥å¤„ç†é«˜ç»´çš„æ•°æ®ã€‚ å­˜åœ¨çš„é—®é¢˜ï¼š æˆ‘ä»¬æ— æ³•å®ç°çŸ¥é“çº¿æ€§å¯åˆ†ä»¥åŠå¯¹åº”çš„æœ€ä¼˜è§£$w_f$ï¼ŒçŸ¥è¯†ä»…ä»…çŸ¥é“å…¶æ˜¯å­˜åœ¨çš„ï¼Œä½†æ˜¯å…·ä½“å€¼æ˜¯æœªçŸ¥çš„ã€‚ å…¶æ¬¡ï¼Œåœ¨è®¡ç®—æ”¶æ•›æ¬¡æ•°çš„æ—¶å€™ï¼Œ$\\rho$ çš„è®¡ç®—ä¹Ÿæ˜¯ç´§å¯†çš„ä¾èµ–äº$w_f$ . å› æ­¤ï¼Œåœ¨$w_f$ æœªçŸ¥çš„æƒ…å†µä¸‹ï¼Œå¾ˆéš¾ç¡®å®šï¼Œå¦‚æœä¸€ç›´ä¸å‡ºç»“æœï¼Œæœ‰å¯èƒ½å°±æ˜¯ä¸æ˜¯çº¿æ€§å¯åˆ†çš„ã€‚ å¦‚æœä¸€å¼€å§‹å°±ä¸æ˜¯çº¿æ€§å¯åˆ†çš„ï¼Œé‚£åº”è¯¥å¦‚ä½•è®¡ç®—ï¼Ÿ Learning with Noisy Dataå¯¹åº”æœ‰å™ªå£°çš„æ•°æ®ï¼Œå¾ˆå¤§æ¦‚ç‡ä¸æ˜¯çº¿æ€§å¯åˆ†çš„ã€‚ è¿™é‡Œå°±éœ€è¦ç»™ä¸€å®šçš„å®¹é”™ç‡(Tolerance)ï¼Œä½¿ç”¨ä¼˜åŒ–çš„æ–¹æ³•æ¥æœ€å°åŒ–çŠ¯é”™çš„å¤§å°æ¥è¿›è¡Œæ±‚è§£ï¼Œçº¿æ€§ä¸å¯åˆ†ã€‚ ä½†æ˜¯è¿™ä¸ªé—®é¢˜æ˜¯ä¸€ä¸ªNP-hardçš„é—®é¢˜ã€‚ Pocket Algorithmè´ªå¿ƒçš„ç®—æ³•ç”¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¸€ç›´æŠŠå¯»æ‰¾æœ€ä¼˜çš„é‚£ä¸ªæƒé‡$w$. å¯¹æ¯”ä¸€èˆ¬çš„PLAï¼Œå…¶ä¸»è¦çš„ç¼ºç‚¹æ˜¯ï¼Œæ¯æ¬¡è¦å¯¹æœ€ä¼˜çš„æƒé‡è¿›è¡Œå­˜å‚¨ï¼› å…¶æ¬¡å°±æ˜¯æ¯æ¬¡è¦è¿›è¡Œæ¯”è¾ƒæ“ä½œæ¯”è¾ƒæµªè´¹æ—¶é—´ã€‚ å°ç»“ï¼š æœ¬ç« å…¶å®ä¸»è¦ä»‹ç»çš„æ˜¯PLAï¼ŒåšäºŒå…ƒçš„åˆ†ç±»è¿ç®—æ“ä½œï¼Œè¯æ˜å…¶åœ¨çº¿æ€§å¯åˆ†çš„æƒ…å†µä¸‹æœ‰æ¯”è¾ƒçš„å¥½çš„æ•ˆæœã€‚","link":"/2022/06/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%9F%B3/Ch2-learning-to-Answering-Yes-No/"},{"title":"Ch1 the Learning Problem","text":"hljs.initHighlightingOnLoad(); æœ¬è®²ä¸»è¦ç®€å•çš„ä»‹ç»ä»€ä¹ˆæ˜¯æœºå™¨å­¦ä¹ ï¼Œä»¥åŠæœºå™¨å­¦ä¹ çš„ä¸€äº›åº”ç”¨ã€‚è¿™é—¨è¯¾æ˜¯å¤ä¹ æœºå™¨å­¦ä¹ çš„ä¸€é—¨è¯¾ç¨‹ï¼Œç›¸æ¯”å´æ©è¾¾çš„è¯¾ç¨‹è¦æœ‰ä¸€äº›çš„éš¾åº¦ã€‚ what is Machine LearningFrom Learning to Machine Learning é‚£ä¹ˆå¦‚ä½•å®šä¹‰Skillï¼Œè¿™é‡Œçš„Skillå°±æ˜¯improve some performance measureï¼Œä¸¾ä¾‹æ¥è¯´æœ‰prediction accuracy . Yet Another Application: Tree Recognition ç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯è®©æœºå™¨è‡ªå·±å»å­¦ä¹ å¦‚ä½•è¾¨è®¤æ ‘ï¼Œæ¯”æˆ‘ä»¬ç»™å‡ºå¤æ‚çš„å®šä¹‰è¦æ¥çš„å¿«å¾ˆå¤šã€‚ The Machine Learning RouteML: an alternative route to build complicated systems when human cannot program the system manuallyâ€”navigating on Mars ç«æ˜Ÿä¸Šçš„ç¯å¢ƒè¿‡äºå¤æ‚ï¼Œå¾ˆå¤šæ˜¯äººä¹‹å‰æ²¡æœ‰è§è¿‡çš„ï¼Œå› æ­¤ä¼šå˜å¾—éš¾ä»¥å»ºæ¨¡ï¼Œäºæ˜¯ä½¿ç”¨æœºå™¨å­¦ä¹ çš„æ–¹æ³•ï¼Œè®©æ¢æµ‹å™¨è‡ªå·±å­¦ä¹  when human cannot â€˜define the solutionâ€™ easilyâ€”speech/visual recognition è¯­éŸ³ä¿¡å·ä¹Ÿæ˜¯æ¯”è¾ƒå¤šå˜ä¸”å¤æ‚ï¼Œå› æ­¤ä½¿ç”¨æœºå™¨å­¦ä¹ æ¥è®©å…¶è‡ªä¸»å¤„ç† when needing rapid decisions that humans cannot doâ€”high-frequency trading å¯¹äºé«˜é¢‘å˜åŒ–çš„ç³»ç»Ÿï¼Œå¦‚è‚¡ç¥¨çš„äº¤æ˜“éœ€è¦æœºå™¨å­¦ä¹ æ¥å¿«é€Ÿååº” when needing to be user-oriented in a massive scaleâ€”consumer-targeted marketing ä¸»è¦æ˜¯æ•™ä¼šç”µè„‘é’“é±¼ï¼Œè€Œä¸æ˜¯ç›´æ¥ç»™ç”µè„‘é±¼ã€‚ Key Essence of Machine Learningä½¿ç”¨æœºå™¨å­¦ä¹ éœ€è¦æ»¡è¶³çš„ä¸‰ä¸ªå…³é”®ï¼š å…·æœ‰ç¡®å®šçš„è§„åˆ™å’Œè¯„ä»·æ ‡å‡†ï¼Œå³ç›®æ ‡å‡½æ•°ã€‚ å…·æœ‰ä¸€å®šçš„å¯ç¼–ç¨‹æ€§ï¼Œä½†æ˜¯è¦æœ‰ä¸€å®šçš„ä¸ç¡®å®šæ€§ï¼Œå¦åˆ™å¯ä»¥é€šè¿‡è®¡ç®—æœºç›´æ¥æšä¸¾æ¥æ±‚è§£ã€‚ å…·æœ‰ä¸€å®šçš„è¾“å…¥ä¿¡æ¯ã€‚ è¿™é‡Œçš„æ˜¯æœºå™¨å­¦ä¹ çš„æ˜¯3é—®é¢˜ã€‚ å¯¹äºé—®é¢˜1ï¼Œæ²¡æœ‰ååˆ†ç¡®å®šè§„åˆ™å¯ä¾›å­¦ä¹ ã€‚ å¯¹äºé—®é¢˜2ï¼Œå…¶æ˜¯ç¼–ç¨‹ç¡®å®šé—®é¢˜ï¼Œå¯ä»¥ç›´æ¥éå†æ±‚è§£ã€‚ å¯¹äºé—®é¢˜4ï¼Œæ˜¯æ¯”è¾ƒç¼ºä¹æ•°æ®æ¥å­¦ä¹ ã€‚ Applications of Machine LearningDaily Needsæœºå™¨å­¦ä¹ åœ¨è¡£é£Ÿä½è¡Œä¸Šçš„åº”ç”¨ã€‚ é¢„æµ‹é¤é¦†çš„å«ç”ŸçŠ¶å†µï¼› å¯¹äºç©¿è¡£ï¼Œæ¨èç³»ç»Ÿï¼ŒåŸºäºé”€å”®æ•°æ®æ¥è¿›è¡Œæ¨èï¼› åœŸæœ¨å»ºç­‘ï¼Œé¢„æµ‹è€—èƒ½çŠ¶å†µï¼› è¡Œï¼Œæ— äººé©¾é©¶ï¼Œäº¤é€šæ ‡å¿—çš„è¾¨è¯†ã€‚ é¢„æµ‹è€ƒé¢˜çš„æ­£ç­”ç‡ï¼Œå·²ç»é¢„æµ‹è¿™ç§è€ƒé¢˜ä¸‹çš„mean coresç­‰ã€‚ key part of the world-champion system from National Taiwan Univ. in KDDCup 2010 åœ¨å¨±ä¹æ–¹é¢çš„åº”ç”¨ï¼Œæ¨èç³»ç»Ÿã€‚ æ ¹æ®å®¢æˆ·çš„è¯„åˆ†æ¥æ¨èç”µå½±å’Œè¯„åˆ†è€…çš„å–œå¥½ã€‚ å°†è¯„åˆ†è€…å’Œç‰¹å¾å‘é‡å’Œç”µå½±çš„ç‰¹å¾å‘é‡è¿›è¡Œå†…ç§¯æˆ–self-attention. Components of Machine Learning Formalize the Learning Problem ä½¿ç”¨å‡è®¾çš„å‡½æ•°gæ¥é€¼è¿‘ ç›®æ ‡å‡½æ•° f(æœªçŸ¥)ã€‚ å…¶ä¸­g ä¸ä¸€å®šä¼šç­‰äº f ä½†æ˜¯gåªè¦ä¸æ–­åœ°é€¼è¿‘ f å°±å¥½ã€‚ æ‰€è°“æœºå™¨å­¦ä¹ çš„æ¨¡å‹ï¼Œå…¶å®å°±æ˜¯ç®—æ³•å’Œå…¶ä½¿ç”¨çš„å‡è®¾é›†åˆã€‚ Practical Definition of Machine Learning Machine Learning and Other FieldsMachine Learning and Data Mining MLå’ŒDMæœ‰å¾ˆå¤§çš„ç›¸ä¼¼åº¦ï¼Œå› æ­¤å¦‚ä»Šå‡ ä¹å¾ˆéš¾æ¥è¿›è¡ŒåŒºåˆ†äº†ã€‚ æœºå™¨å­¦ä¹ åœ¨ä¹çš„æ˜¯é¢„æµ‹ï¼Œè€Œæ•°æ®æŒ–æ˜åœ¨æ„çš„æ˜¯å‘ç°æœ‰è¶£ä¸”é‡è¦çš„ä¿¡æ¯ã€‚ DMéœ€è¦çš„æ•°æ®é‡ä¹Ÿå¾ˆå¤§ï¼Œå…³æ³¨äºåœ¨å¤§çš„æ•°æ®åº“å†…è¿›è¡Œæ“ä½œï¼Œå‘è§‰ä¸€äº›æ¯”è¾ƒéšç§˜çš„ä¸œè¥¿ï¼Œeg.å¯¹äºä½¿ç”¨DMæ¥åˆ†æä¹°Aå’Œä¹°Bçš„ç›¸å…³æ€§ã€‚ Machine Learning and Artificial Intelligence æœºå™¨å­¦ä¹ æ˜¯å®ç°äººå·¥æ™ºèƒ½çš„ä¸€ç§æ–¹æ³•ã€‚ å¯¹äºä¸€èˆ¬çš„æœºå™¨äººä¸‹æ£‹ï¼Œå¯ä»¥é€šè¿‡å¼ºåŒ–å­¦ä¹ æ¥è®©æœºå™¨äººè‡ªå·±ä¸‹æ£‹ï¼Œå¹¶ç»™äºˆä¸€å®šçš„åé¦ˆã€‚ ä¹Ÿå¯ä»¥è®©æœºå™¨äººå­¦ä¹ å…¶ä»–æ£‹æ‰‹çš„ä¸‹æ£‹ç­–ç•¥æ¥å®ç°å­¦ä¹ ã€‚ Machine Learning and Statistics ç»Ÿè®¡æ˜¯å®ç°æœºå™¨å­¦ä¹ çš„ä¸€ç§æ–¹æ³•ï¼› ç»Ÿè®¡å…¶å®å°±æ˜¯åˆ©ç”¨ç»Ÿè®¡çš„å·¥å…·æ¥é¢„æµ‹å’Œæ¨æ–­æœªçŸ¥çš„æ•°æ®ã€‚ æ€»ç»“","link":"/2022/06/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%9F%B3/Ch1-The-Learning-Problem/"},{"title":"Ch7 è§†è§‰é‡Œç¨‹è®¡ ç¬¬ä¸€éƒ¨åˆ† ç‰¹å¾ç‚¹æ³•","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦ä»‹ç»çš„æ˜¯å…³äºç¬¬ä¸ƒç« çš„ç¬¬ä¸€éƒ¨åˆ†ï¼Œä¸»è¦ä»‹ç»çš„æ˜¯åŸºäºç‰¹å¾ç‚¹æ³•æ±‚è§£ç›®æ ‡çš„åŒ¹é…çš„é—®é¢˜ã€‚æœ€åæ˜¯ä¸€ä¸ªåŸºäºC++å’ŒOpenCVåº“æ˜¯å®è·µã€‚ ç®€ä»‹é¦–å…ˆï¼Œè§†è§‰é‡Œç¨‹è®¡çš„æ ¸å¿ƒçš„é—®é¢˜æ˜¯æ ¹æ®å›¾åƒæ¥ä¼°è®¡ç›¸æœºçš„è¿åŠ¨ï¼Œä½†æ˜¯ç›´æ¥ä»å›¾åƒçš„è‰²å½©å’Œç°åº¦çŸ©é˜µæ¥è€ƒè™‘çš„è¯ï¼Œè®¡ç®—é‡å¾ˆå¤§ï¼Œå› æ­¤é€šè¿‡é€‰å–å›¾åƒä¸­æœ‰ä»£è¡¨æ€§çš„ç‚¹ï¼Œå¹¶ä¸”åœ¨è§†è§’å‘ç”Ÿå˜åŒ–åå°½é‡ä¿æŒä¸å˜ã€‚é€šè¿‡è¿™äº›ç‚¹æ¥è®¨è®ºä½å§¿çš„å˜åŒ–å’Œç‚¹çš„å®šä½é—®é¢˜ã€‚ ç»å…¸çš„SLAMæ˜¯ä»¥ä½å§¿â€”â€”è·¯æ ‡æ¥æè¿°SLAMçš„è¿‡ç¨‹çš„ã€‚ è·¯æ ‡æ˜¯ä¸‰ç»´ç©ºé—´ä¸­å›ºå®šä¸å˜çš„ç‚¹ï¼Œèƒ½å¤Ÿåœ¨ç‰¹å®šä½å§¿ä¸‹è§‚å¯Ÿåˆ° æ•°é‡æ¯”è¾ƒå……è¶³ï¼Œä»¥å®ç°è‰¯å¥½çš„å®šä½ å…·æœ‰è¾ƒå¥½çš„åŒºåˆ†æ€§ï¼Œæ¥å®ç°æ•°æ®çš„å…³è” åœ¨è§†è§‰SLAMä¸­ï¼Œå¯ä»¥åˆ©ç”¨å›¾åƒç‰¹å¾ç‚¹ä½œä¸ºSLAMçš„è·¯æ ‡ æ­¤æ—¶åœ¨è§†è§‰SLAMä¸­ï¼Œç‰¹å¾å°±æ˜¯è·¯æ ‡ã€‚ å¯¹äºæ•°æ®å›¾åƒè€Œè¨€ï¼Œç°åº¦å—åˆ°å…‰ç…§ã€å½¢å˜ã€ç‰©è´¨æè´¨çš„å½±å“æ¯”è¾ƒä¸¥é‡ï¼Œå˜åŒ–æ¯”è¾ƒå¤§åŒæ—¶ä¸å¤Ÿç¨³å®šï¼Œå› æ­¤ä¸€èˆ¬æ˜¯é‡‡ç”¨ç‰¹å¾ç‚¹æ³•ã€‚ ä¹¦ä¸­æåˆ°ï¼Œå°±å¯è¾¨è¯†åº¦æ–¹é¢æ¥çœ‹ï¼Œè§’ç‚¹ &gt; è¾¹ç¼˜ &gt; åƒç´ å—ï¼›ä½†æ˜¯åœ¨ä¸€èˆ¬çš„æƒ…å†µä¸‹ï¼Œå•çº¯çš„è§’ç‚¹æ— æ³•æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ï¼Œè¿œè¿‘å˜åŒ–ã€æ—‹è½¬å˜åŒ–ä¼šä½¿å¾—åŒä¸€ä¸ªè§’ç‚¹å˜å¾—æ— æ³•è¾¨è¯†ï¼Œäºæ˜¯éœ€è¦è®¾è®¡æ›´åŠ ç¨³å®šçš„å±€éƒ¨ç‰¹å¾å›¾ï¼ŒSIFTã€SURFã€ORBç­‰ç­‰ã€‚ ç‰¹å¾ç‚¹æ˜¯å›¾åƒä¸­å…·æœ‰ä»£è¡¨æ€§çš„éƒ¨åˆ†ï¼Œäºæ˜¯å…¶ä¸»è¦å…·æœ‰ä»¥ä¸‹çš„æ€§è´¨ï¼š å¯é‡å¤æ€§ï¼šç›¸åŒçš„ç‰¹å¾å¯ä»¥åœ¨ä¸åŒçš„å›¾åƒä¸­æ‰¾åˆ°ï¼› å¯åŒºåˆ«æ€§ï¼šä¸åŒçš„ç‰¹å¾çš„è¡¨è¾¾ä¸åŒ é«˜æ•ˆæ€§ï¼šåŒä¸€ä¸ªå›¾åƒé‡Œï¼Œç‰¹å¾ç‚¹çš„æ•°é‡è¦å°äºåƒç´ çš„æ•°é‡ æœ¬åœ°æ€§ï¼šç‰¹å¾ä»…ä¸ä¸€å°ç‰‡å›¾åƒåŒºåŸŸç›¸å…³ ç‰¹å¾ç‚¹çš„ä¿¡æ¯ä¸»è¦åŒ…æ‹¬ä¸¤ä¸ªéƒ¨åˆ†ï¼Œ å…³é”®ç‚¹ï¼šå³åœ¨å›¾åƒé‡Œçš„ä½ç½®ä¿¡æ¯ã€æ–¹å‘ã€å¤§å°ã€è¯„åˆ†ç­‰ä¿¡æ¯ æè¿°å­ï¼šä¸€ä¸ªå‘é‡ï¼Œç±»ä¼¼äºWord2Vecï¼Œè®°å½•çš„æ˜¯ç‰¹å¾ç‚¹å‘¨å›´çš„ä¿¡æ¯ï¼Œä½¿ç”¨å…¶æ¥è®¡ç®—ç‰¹å¾ç‚¹çš„ç›¸ä¼¼åº¦ï¼Œæ¥åˆ¤æ–­æ˜¯å¦ä¸ºåŒä¸€ä¸ªç›¸ä¼¼ç‚¹ã€‚ è¿™é‡Œçš„ç‰¹å¾ç‚¹æè¿°åº”è¯¥åœ¨å…‰ç…§ã€è§†è§’å‘ç”Ÿå°‘é‡çš„å˜åŒ–æ—¶è¿˜èƒ½ä¿æŒä¸€è‡´ã€‚ è®¡ç®—æè¿°å­çš„ç®—æ³•ä¼˜å¾ˆå¤šï¼Œå…¶ä¸­SIFTï¼ˆä¿æŒäº†å¹³ç§»ã€æ—‹è½¬å’Œç¼©æ”¾ï¼‰ã€SURFã€ORBï¼Œå› æ­¤å¯¹äºé—®é¢˜æ¥è®²ï¼ŒSIFTçš„æ•ˆæœå¥½ï¼Œä½†æ˜¯è¿ç®—çš„é€Ÿåº¦æ…¢ï¼Œæ²¡åŠæ³•æ»¡è¶³å®æ—¶ä¸å˜æ€§çš„éœ€è¦ï¼Œä½†æ˜¯ORBå°½ç®¡ç®€å•ä½†æ˜¯é€Ÿåº¦å¿«ï¼Œä½¿ç”¨çš„èŒƒå›´ä¹Ÿæ¯”è¾ƒå¤šã€‚ è¯¦ç»†å¯ä»¥å‚è€ƒOpenCV çš„feature2dæ¨¡å—ã€‚ ORBç‰¹å¾æ˜¯æ¯”è¾ƒå¸¸ç”¨å’Œæœ€æ–°çš„æ–¹æ³•ï¼Œè®¡ç®—æ¯”è¾ƒå®¹æ˜“ï¼Œåœ¨2010å¹´é¦–æ¬¡æå‡ºã€‚ ORBç‰¹å¾ORBç‰¹å¾çš„æè¿°å­å’Œå…³é”®ç‚¹ä¸»è¦æ˜¯BRIEF(Binary Robust Independent Elementary Feature) å’Œ Oriented FAST. FASTè§’ç‚¹æå–ï¼šä¸»è¦æ˜¯æ‰¾åˆ°å›¾åƒçš„è§’ç‚¹ï¼Œç›¸æ¯”äºåŸæ¥çš„FASTå¢åŠ äº†ä¸»æ–¹å‘ï¼Œä»¥åŠä¸ºåç»­çš„BRIEFæè¿°å­æä¾›äº†æ—‹è½¬ä¸å˜æ€§ã€‚ BRIEFæè¿°å­ï¼šå¯¹å‰ä¸€æ­¥æå–å‡ºçš„ç‰¹å¾ç‚¹çš„å‘¨å›´å›¾åƒåŒºåŸŸè¿›è¡Œæè¿°ï¼Œåœ¨ORBä¸­ä½¿ç”¨äº†å…ˆå‰å…³é”®ç‚¹çš„æ–¹å‘ä¿¡æ¯ã€‚ FASTå…³é”®ç‚¹ ä¸»è¦çš„æ€æƒ³æ˜¯æ£€æµ‹å±€éƒ¨çš„åƒç´ ç°åº¦å˜åŒ–æ˜æ˜¾çš„åœ°æ–¹ï¼Œå¦‚æœå‘¨å›´ç‚¹çš„åƒç´ ä¼šè¿ç»­çš„Nä¸ªéƒ½å¤§äºä¹‹å‰çš„ä¸­é—´ç‚¹ä¸€ä¸ªæ•°é‡çº§çš„è¯ï¼Œæ­¤æ—¶è¯¥å°†ç»™ç‚¹ç¤ºä¸ºä¸€ä¸ªè§’ç‚¹ã€‚è¯¥æ–¹æ³•ä»…ä»…æ¯”è¾ƒäº®åº¦å³å¯ï¼Œå¯ä»¥æ»¡è¶³å®æ—¶æ€§çš„è¦æ±‚ã€‚ ä½†æ˜¯åŸå§‹çš„FASTä¼šå‡ºç°å¥½å¤šè§’ç‚¹æ‰å †çš„æƒ…å†µï¼Œäºæ˜¯æˆ‘ä»¬çš„éœ€è¦ä¸€äº›æ–¹æ³•æ¥è¿›è¡Œç­›é€‰ï¼Œå¸¸ç”¨çš„æ–¹æ³•ä¸ºéæœ€å¤§å€¼æŠ‘åˆ¶ï¼Œé€‰æ‹©æ‰æ¨ç‚¹ä¸­æœ€å¤§çš„é‚£ä¸ªã€‚ å¯¹äºFASTæ–¹æ³•ä¸­çš„é—®é¢˜ï¼Œå¦‚FASTä¸å…·æœ‰å°ºåº¦ä¸å˜æ€§å’Œæ–¹å‘æ€§çš„ç‰¹å¾ï¼Œäºæ˜¯æå‡ºäº†é‡‘å­—å¡”æ³•å’Œç°åº¦è´¨å¿ƒæ³•ã€‚ é‡‘å­—å¡”æ˜¯è®¡ç®—å›¾è§†è§‰ä¸­å¸¸ç”¨çš„ä¸€ç§å¤„ç†æ–¹æ³•,ç¤ºæ„å›¾å¦‚å›¾7-3æ‰€ç¤ºã€‚é‡‘å­—å¡”åº•å±‚æ˜¯åŸå§‹å›¾åƒã€‚æ¯å¾€ä¸Šä¸€å±‚ï¼Œå°±å¯¹å›¾åƒè¿›è¡Œä¸€ä¸ªå›ºå®šå€ç‡çš„ç¼©æ”¾ï¼Œè¿™æ ·æˆ‘ä»¬å°±æœ‰äº†ä¸åŒåˆ†è¾¨ç‡çš„å›¾åƒã€‚è¾ƒå°çš„å›¾åƒå¯ä»¥çœ‹æˆæ˜¯è¿œå¤„çœ‹è¿‡æ¥çš„åœºæ™¯ã€‚åœ¨ç‰¹å¾åŒ¹é…ç®—æ³•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åŒ¹é…ä¸åŒå±‚ä¸Šçš„å›¾åƒï¼Œä»è€Œå®ç°å°ºåº¦ä¸å˜æ€§ã€‚ä¾‹å¦‚,å¦‚æœç›¸æœºåœ¨åé€€ï¼Œé‚£ä¹ˆæˆ‘ä»¬åº”è¯¥èƒ½å¤Ÿåœ¨ä¸Šä¸€ä¸ªå›¾åƒé‡‘å­—å¡”çš„ä¸Šå±‚å’Œä¸‹ä¸€ä¸ªå›¾åƒé‡‘å­—å¡”çš„ä¸‹å±‚ä¸­æ‰¾åˆ°åŒ¹é…ã€‚ åœ¨æ—‹è½¬æ–¹é¢ï¼Œè®¡ç®—ç°åº¦è´¨å¿ƒï¼Œå°±æ˜¯å°†å›¾åƒå—çš„ç°åº¦å€¼ä½œä¸ºæƒé‡è´¨å¿ƒï¼Œä¸»è¦çš„æ­¥éª¤å¦‚ä¸‹ï¼š æ¯”å¦‚ï¼Œå·¦è¾¹çš„ç°åº¦å€¼æ™®éæ¯”å³è¾¹å¤§æ—¶ï¼Œä¸»è¦æ—¶æ­¤ç°åº¦çš„è´¨å¿ƒåå‘äºå·¦è¾¹ï¼Œäºæ˜¯ä¼šå‡ºç°åŸç‚¹æŒ‡å‘è´¨å¿ƒçš„ä¸€æ¡å‘é‡ï¼Œäºæ˜¯å°±æœ‰äº†æ–¹å‘ã€‚ BRIEFæè¿°å­ BRIEF-128ä¸»è¦æ˜¯ç”±128ä½çš„å‘é‡ç»„æˆï¼Œæ¯ä¸€ä½ä¸Šçš„æ•°å­—ä¸º0æˆ–è€…1ï¼Œè¿™é‡Œä¼šæ ¹æ®ä¸åŒçš„æ¨¡å¼æ¥è¿›è¡Œå–ç‚¹æ“ä½œï¼Œå–å‡º128ä¸ªç‚¹å¯¹(x,y) ï¼Œå¦‚æœx&gt;yï¼šåˆ™ä¸º1ï¼Œå¦åˆ™å°±ä¸º0ï¼Œäºæ˜¯å°±ä¼šæœ‰ä¸€ä¸ª128ä½çš„å‘é‡ã€‚ ä¸Šå›¾æ˜¯ä¸åŒçš„(x,y)ä¸¤ä¸ªç‚¹çš„é€‰å–çš„patternï¼Œä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸Šè¿°é€‰ç‚¹çš„æ¨¡å¼ä¸€æ—¦ç¡®å®šï¼Œå°±ä¸è¦å†å˜äº†ã€‚ å‰é¢è®²åˆ°çš„æ—‹è½¬å‘é‡OCå¯çŸ¥ï¼Œå¦‚æœå‰é¢å‘ç”Ÿæ—‹è½¬ä¹‹åï¼Œé‚£BRIEFçš„æè¿°å­patternä¹Ÿå°±è·Ÿç€æ—‹è½¬ã€‚ è·ç¦»è®¡ç®—ï¼šå¯¹äºè¿™é‡Œä½¿ç”¨çš„æ˜¯å¯¹äºäºŒè¿›åˆ¶æ•°æ¯”è¾ƒæ–¹ä¾¿çš„æ±‰æ˜è·ç¦»æ¥åº¦é‡ï¼Œå°±æ˜¯å¦‚æœè¿ä¸ªå‘é‡ä½ç½®ä¸Šçš„æ•°å­—ç›¸åŒï¼Œé‚£è·ç¦»å€¼å°±æ˜¯0ï¼Œä¸åŒå°±ä¸º1ï¼Œæœ€åæ¯”è¾ƒçš„äºŒè€…ä¹‹é—´çš„è·ç¦»ã€‚ å…¶å®è¿™ä¸ªè·ç¦»æœ¬è´¨ä¸Šæ˜¯æœ‰å¤šå°‘ä¸ªç‚¹æè¿°ç‰¹å¾æ˜¯ç›¸åŒçš„ï¼Œå› ä¸ºæ¯ä¸ªå‘é‡çš„å«ä¹‰å°±æ˜¯å¯¹äºçš„ç‚¹å¯¹æ˜¯å¦æ˜¯å·¦è¾¹åƒç´ å¤§äºå³è¾¹ï¼Œä¸¤ä¸ªæè¿°å­å†åŒä¸€ä½ä¸Šé¢çš„æ•°å­—ç›¸åŒï¼Œå°±ä»£è¡¨å…¶å“ªä¸€ä½ä¸Šéƒ½æ˜¯å·¦è¾¹çš„ç‰¹å¾ç‚¹å¤§äºå³è¾¹çš„ç‰¹å¾ç‚¹ã€‚ ç‰¹å¾åŒ¹é… æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯æš´åŠ›åŒ¹é…ï¼Œå°±æ˜¯å°†æ‰€æœ‰æœ¬æ—¶åˆ»ç‰¹å¾ç‚¹$x_t^m$å’Œä¸‹ä¸€æ—¶åˆ»æ‰€æœ‰çš„ç‰¹å¾ç‚¹$x_{t+1}^n$è¿›è¡ŒåŒ¹é… ã€‚ å³å¯¹æ¯ä¸€ä¸ªç‰¹å¾ç‚¹$x_t^m$ä¸æ‰€æœ‰$x_{t+1}^n$çš„æµ‹é‡æè¿°å­çš„è·ç¦»ï¼Œç„¶åæ’åºï¼Œå–æœ€è¿‘çš„ä¸€ä¸ªä½œä¸ºåŒ¹é…ç‚¹ã€‚ æè¿°å­è·ç¦»è¡¨ç¤ºäº†ä¸¤ä¸ªç‰¹å¾ä¹‹é—´çš„ç›¸ä¼¼ç¨‹åº¦ï¼Œä¸è¿‡åœ¨å®é™…è¿ç”¨ä¸­è¿˜å¯ä»¥å–ä¸åŒçš„è·ç¦»åº¦é‡èŒƒæ•°ã€‚å¯¹äºæµ®ç‚¹ç±»å‹çš„æè¿°å­ï¼Œä½¿ç”¨æ¬§æ°è·ç¦»è¿›è¡Œåº¦é‡å³å¯ã€‚è€Œå¯¹äºäºŒè¿›åˆ¶çš„æè¿°å­ï¼ˆæ¯”å¦‚BRIEFè¿™æ ·çš„)ï¼Œæˆ‘ä»¬å¾€å¾€ä½¿ç”¨æ±‰æ˜è·ç¦»ï¼ˆHamming distance)ä½œä¸ºåº¦é‡â€”â€”ä¸¤ä¸ªäºŒè¿›åˆ¶ä¸²ä¹‹é—´çš„æ±‰æ˜è·ç¦»,æŒ‡çš„æ˜¯å…¶ä¸åŒä½æ•°çš„ä¸ªæ•°ã€‚ ç”±äºæš´åŠ›åŒ¹é…çš„è®¡ç®—é‡å¾ˆå¤§ï¼Œäºæ˜¯å®é™…æƒ…å†µä¸‹ä½¿ç”¨è¾ƒå¤šçš„æ˜¯å¿«é€Ÿè¿‘ä¼¼æœ€è¿‘é‚»(FLANN)ï¼Œè¯¥ç®—æ³•æ¯”è¾ƒæˆç†Ÿï¼Œå†OpenCVä¸Šå·²ç»å®ç°ã€‚ å®è·µæœ¬å®è·µæ˜¯ä¸€ä¸ªå¯¹äºç®€å•ç‰¹å¾ç‚¹çš„å®è·µæ•™ç¨‹ã€‚ é¦–å…ˆï¼Œå°±æ˜¯é…ç½®CmakeList.txt 123456789101112131415161718192021222324252627282930313233343536373839404142cmake_minimum_required(VERSION 2.8)project(vo1)set(CMAKE_BUILD_TYPE &quot;Release&quot;)add_definitions(&quot;-DENABLE_SSE&quot;)set(CMAKE_CXX_FLAGS &quot;-std=c++11 -O2 ${SSE_FLAGS} -msse4&quot;)list(APPEND CMAKE_MODULE_PATH ${PROJECT_SOURCE_DIR}/cmake)find_package(OpenCV 3 REQUIRED)find_package(G2O REQUIRED)find_package(Sophus REQUIRED)include_directories( ${OpenCV_INCLUDE_DIRS} ${G2O_INCLUDE_DIRS} ${Sophus_INCLUDE_DIRS} &quot;/usr/include/eigen3/&quot;)add_executable(orb_cv orb_cv.cpp)target_link_libraries(orb_cv ${OpenCV_LIBS})add_executable(orb_self orb_self.cpp)target_link_libraries(orb_self ${OpenCV_LIBS})# add_executable( pose_estimation_2d2d pose_estimation_2d2d.cpp extra.cpp ) # use this if in OpenCV2 add_executable(pose_estimation_2d2d pose_estimation_2d2d.cpp)target_link_libraries(pose_estimation_2d2d ${OpenCV_LIBS})# # add_executable( triangulation triangulation.cpp extra.cpp) # use this if in opencv2add_executable(triangulation triangulation.cpp)target_link_libraries(triangulation ${OpenCV_LIBS})add_executable(pose_estimation_3d2d pose_estimation_3d2d.cpp)target_link_libraries(pose_estimation_3d2d g2o_core g2o_stuff ${OpenCV_LIBS})add_executable(pose_estimation_3d3d pose_estimation_3d3d.cpp)target_link_libraries(pose_estimation_3d3d g2o_core g2o_stuff ${OpenCV_LIBS}) ä¸‹é¢æ˜¯orb_cv.cppçš„ä¸»è¦ä»£ç ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889#include &lt;iostream&gt;#include &lt;opencv2/core/core.hpp&gt;#include &lt;opencv2/highgui/highgui.hpp&gt;#include &lt;opencv2/features2d/features2d.hpp&gt;#include &lt;opencv2/imgcodecs/legacy/constants_c.h&gt;#include &lt;opencv2/highgui/highgui.hpp&gt;#include &lt;chrono&gt;using namespace std;int main(int argc , char **argv){ if (argc != 3) { cout &lt;&lt; &quot;usage: feature_extraction img1 img2&quot; &lt;&lt; endl; return 1; } // - è¯»å–å›¾åƒ cv::Mat img_1 = cv::imread(argv[1], CV_LOAD_IMAGE_COLOR); cv::Mat img_2 = cv::imread(argv[2], CV_LOAD_IMAGE_COLOR); assert(img_1.data != nullptr &amp;&amp; img_2.data != nullptr); // - åˆå§‹åŒ– // åˆ†åˆ«å»ºç«‹å…³é”®ç‚¹å’Œæè¿°å­ std::vector&lt;cv::KeyPoint&gt; keypoints_1, keypoints_2; cv::Mat descriptors_1, descriptors_2; // åˆ†åˆ«ç”³è¯·ORBçš„æè¿°å­å’Œå…³é”®ç‚¹ cv::Ptr&lt;cv::FeatureDetector&gt; detector = cv::ORB::create(); // è¿™é‡Œcreate()å‡½æ•°çš„é»˜è®¤çš„ç‰¹å¾ç‚¹æ˜¯500ä¸ªï¼Œå¯ä»¥ä¿®æ”¹ä¸ºcreate(1000) cv::Ptr&lt;cv::DescriptorExtractor&gt; descriptor = cv::ORB::create(); // è®¾ç½®ä¸€ä¸ªåŒ¹é…å°†å…³é”®ç‚¹å’Œæè¿°å­è¿›è¡ŒåŒ¹é… cv::Ptr&lt;cv::DescriptorMatcher&gt; matcher = cv::DescriptorMatcher::create(&quot;BruteForce-Hamming&quot;) ; // ç¬¬ä¸€æ­¥ï¼šæ£€æµ‹Oriented Fast è§’ç‚¹ detector-&gt;detect(img_1, keypoints_1); detector-&gt;detect(img_2, keypoints_2); // ç¬¬äºŒæ­¥ï¼šæ ¹æ®è§’ç‚¹ä¿¡æ¯è®¡ç®—æè¿°å­ descriptor-&gt;compute(img_1, keypoints_1, descriptors_1); descriptor-&gt;compute(img_2, keypoints_2, descriptors_2); cv::Mat outimg_1; // å¯è§†åŒ–è®¡ç®—å¾—åˆ°çš„ç‰¹å¾ç‚¹ cv::drawKeypoints(img_1, keypoints_1, outimg_1, cv::Scalar::all(-1), cv::DrawMatchesFlags::DEFAULT); cv::imshow(&quot;ORBçš„ç‰¹å¾ç‚¹&quot;, outimg_1); // ç¬¬ä¸‰æ­¥ï¼šå¯¹ä¸¤å¹…å›¾åƒè®¡ç®—BRIEFæè¿°å­çš„æ±‰æ˜è·ç¦» vector&lt;cv::DMatch&gt; matches ; matcher-&gt;match(descriptors_1, descriptors_2, matches); // ç¬¬å››æ­¥ï¼šåŒ¹é…ç‚¹å¯¹çš„ç­›é€‰ double min_dist = 10000, max_dist = 0; // éå†æ‰¾åˆ°æ‰€æœ‰çš„ç‚¹çš„æœ€å°è·ç¦»å’Œæœ€å¤§è·ç¦»ï¼Œå³ä¸ºæœ€ç›¸ä¼¼å’Œæœ€ä¸ç›¸ä¼¼çš„ä¸¤ç»„ç‚¹ä¹‹é—´çš„è·ç¦» for (int i = 0; i &lt; descriptors_1.rows; i++) { double dist = matches[i].distance; // DMatch é‡Œä¿å­˜çš„è·ç¦»å°±æ˜¯æ±‰æ˜è·ç¦» if (dist &lt; min_dist) min_dist = dist; if (dist &gt; max_dist) max_dist = dist; } printf(&quot;-- Max dist : %f \\n&quot;, max_dist); printf(&quot;-- Min dist : %f \\n&quot;, min_dist); // å½“æè¿°å­ä¹‹é—´çš„è·ç¦»å¤§äºä¸¤å€çš„æœ€å°è·ç¦»ï¼Œå°±è®¤ä¸ºå…¶åŒ¹é…é”™è¯¯ // ä½†æ˜¯å¦‚æœæœ€å°çš„è·ç¦»å¾ˆå°æ—¶ï¼Œæˆ‘ä»¬ä¼šè®¾ä¸ºç»éªŒå€¼30 std::vector&lt;cv::DMatch&gt; good_matches; for (int i = 0; i &lt; descriptors_1.rows; i++) { if (matches[i].distance &lt;= max(2 *min_dist, 30.0)) { good_matches.push_back(matches[i]); // ç­›é€‰ï¼Œä¿ç•™æ¯”è¾ƒå¥½çš„åŒ¹é… } } // ç¬¬äº”æ­¥ï¼šç»˜åˆ¶åŒ¹é…å‰åçš„ç»“æœ cv::Mat img_match; cv::Mat img_goodmatch; // ç»˜åˆ¶ä¸€èˆ¬çš„åŒ¹é… cv::drawMatches(img_1, keypoints_1, img_2, keypoints_2, matches, img_match); // ç»˜åˆ¶ç­›é€‰åçš„åŒ¹é… cv::drawMatches(img_1, keypoints_1, img_2, keypoints_2, good_matches, img_goodmatch); imshow(&quot;all matches&quot;, img_match); imshow(&quot;good matches&quot;, img_goodmatch); cv::waitKey(0); return 0;} å¯¹äºçº¹ç†æ¯”è¾ƒå‡åŒ€çš„æ¡Œé¢ä¸Šï¼Œå…¶ç‰¹å¾ç‚¹æ¯”è¾ƒå°‘ã€‚ æ¥ä¸‹æ¥æ˜¯orb_self.cppçš„ä¸»è¦ä»£ç ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154#include &lt;opencv2/opencv.hpp&gt;#include &lt;string&gt;#include &lt;nmmintrin.h&gt;#include &lt;chrono&gt;using namespace std;// global variablesstring first_file = &quot;./1.png&quot;;string second_file = &quot;./2.png&quot;;// 32 bit unsigned int, will have 8, 8x32=256typedef vector&lt;uint32_t&gt; DescType; // Descriptor type/** * compute descriptor of orb keypoints * @param img input image * @param keypoints detected fast keypoints * @param descriptors descriptors * * NOTE: if a keypoint goes outside the image boundary (8 pixels), descriptors will not be computed and will be left as * empty */void ComputeORB(const cv::Mat &amp;img, vector&lt;cv::KeyPoint&gt; &amp;keypoints, vector&lt;DescType&gt; &amp;descriptors);/** * brute-force match two sets of descriptors * @param desc1 the first descriptor * @param desc2 the second descriptor * @param matches matches of two images */void BfMatch(const vector&lt;DescType&gt; &amp;desc1, const vector&lt;DescType&gt; &amp;desc2, vector&lt;cv::DMatch&gt; &amp;matches);int main(int argc, char **argv) { // load image cv::Mat first_image = cv::imread(first_file, 0); cv::Mat second_image = cv::imread(second_file, 0); assert(first_image.data != nullptr &amp;&amp; second_image.data != nullptr); // detect FAST keypoints1 using threshold=40 chrono::steady_clock::time_point t1 = chrono::steady_clock::now(); vector&lt;cv::KeyPoint&gt; keypoints1; cv::FAST(first_image, keypoints1, 40); vector&lt;DescType&gt; descriptor1; ComputeORB(first_image, keypoints1, descriptor1); // same for the second vector&lt;cv::KeyPoint&gt; keypoints2; vector&lt;DescType&gt; descriptor2; cv::FAST(second_image, keypoints2, 40); ComputeORB(second_image, keypoints2, descriptor2); chrono::steady_clock::time_point t2 = chrono::steady_clock::now(); chrono::duration&lt;double&gt; time_used = chrono::duration_cast&lt;chrono::duration&lt;double&gt;&gt;(t2 - t1); cout &lt;&lt; &quot;extract ORB cost = &quot; &lt;&lt; time_used.count() &lt;&lt; &quot; seconds. &quot; &lt;&lt; endl; // find matches vector&lt;cv::DMatch&gt; matches; t1 = chrono::steady_clock::now(); BfMatch(descriptor1, descriptor2, matches); t2 = chrono::steady_clock::now(); time_used = chrono::duration_cast&lt;chrono::duration&lt;double&gt;&gt;(t2 - t1); cout &lt;&lt; &quot;match ORB cost = &quot; &lt;&lt; time_used.count() &lt;&lt; &quot; seconds. &quot; &lt;&lt; endl; cout &lt;&lt; &quot;matches: &quot; &lt;&lt; matches.size() &lt;&lt; endl; // plot the matches cv::Mat image_show; cv::drawMatches(first_image, keypoints1, second_image, keypoints2, matches, image_show); cv::imshow(&quot;matches&quot;, image_show); cv::imwrite(&quot;matches.png&quot;, image_show); cv::waitKey(0); cout &lt;&lt; &quot;done.&quot; &lt;&lt; endl; return 0;}// compute the descriptorvoid ComputeORB(const cv::Mat &amp;img, vector&lt;cv::KeyPoint&gt; &amp;keypoints, vector&lt;DescType&gt; &amp;descriptors) { const int half_patch_size = 8; const int half_boundary = 16; int bad_points = 0; for (auto &amp;kp: keypoints) { if (kp.pt.x &lt; half_boundary || kp.pt.y &lt; half_boundary || kp.pt.x &gt;= img.cols - half_boundary || kp.pt.y &gt;= img.rows - half_boundary) { // outside bad_points++; descriptors.push_back({}); continue; } float m01 = 0, m10 = 0; for (int dx = -half_patch_size; dx &lt; half_patch_size; ++dx) { for (int dy = -half_patch_size; dy &lt; half_patch_size; ++dy) { uchar pixel = img.at&lt;uchar&gt;(kp.pt.y + dy, kp.pt.x + dx); m10 += dx * pixel; m01 += dy * pixel; } } // angle should be arc tan(m01/m10); float m_sqrt = sqrt(m01 * m01 + m10 * m10) + 1e-18; // avoid divide by zero float sin_theta = m01 / m_sqrt; float cos_theta = m10 / m_sqrt; // compute the angle of this point DescType desc(8, 0); for (int i = 0; i &lt; 8; i++) { uint32_t d = 0; for (int k = 0; k &lt; 32; k++) { int idx_pq = i * 32 + k; cv::Point2f p(ORB_pattern[idx_pq * 4], ORB_pattern[idx_pq * 4 + 1]); cv::Point2f q(ORB_pattern[idx_pq * 4 + 2], ORB_pattern[idx_pq * 4 + 3]); // rotate with theta cv::Point2f pp = cv::Point2f(cos_theta * p.x - sin_theta * p.y, sin_theta * p.x + cos_theta * p.y) + kp.pt; cv::Point2f qq = cv::Point2f(cos_theta * q.x - sin_theta * q.y, sin_theta * q.x + cos_theta * q.y) + kp.pt; if (img.at&lt;uchar&gt;(pp.y, pp.x) &lt; img.at&lt;uchar&gt;(qq.y, qq.x)) { d |= 1 &lt;&lt; k; } } desc[i] = d; } descriptors.push_back(desc); } cout &lt;&lt; &quot;bad/total: &quot; &lt;&lt; bad_points &lt;&lt; &quot;/&quot; &lt;&lt; keypoints.size() &lt;&lt; endl;}// brute-force matchingvoid BfMatch(const vector&lt;DescType&gt; &amp;desc1, const vector&lt;DescType&gt; &amp;desc2, vector&lt;cv::DMatch&gt; &amp;matches) { const int d_max = 40; for (size_t i1 = 0; i1 &lt; desc1.size(); ++i1) { if (desc1[i1].empty()) continue; cv::DMatch m{i1, 0, 256}; for (size_t i2 = 0; i2 &lt; desc2.size(); ++i2) { if (desc2[i2].empty()) continue; int distance = 0; for (int k = 0; k &lt; 8; k++) { distance += _mm_popcnt_u32(desc1[i1][k] ^ desc2[i2][k]); } if (distance &lt; d_max &amp;&amp; distance &lt; m.distance) { m.distance = distance; m.trainIdx = i2; } } if (m.distance &lt; d_max) { matches.push_back(m); } }}","link":"/2022/05/31/SLAM/ch7-%E8%A7%86%E8%A7%89%E9%87%8C%E7%A8%8B%E8%AE%A1-%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86-%E7%89%B9%E5%BE%81%E7%82%B9%E6%B3%95/"},{"title":"Ch7 è§†è§‰é‡Œç¨‹è®¡ ç¬¬äºŒéƒ¨åˆ† å¯¹æå‡ ä½•å’Œä¸‰è§’æµ‹é‡","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦è®²è§£çš„æ˜¯è§†è§‰é‡Œç¨‹è®¡VOçš„ç¬¬äºŒéƒ¨åˆ†ï¼Œå¯¹æå‡ ä½•å’Œä¸‰è§’æµ‹é‡ï¼Œå…¶ä¸»è¦æ˜¯å»ºç«‹åœ¨ç¬¬ä¸€èŠ‚çš„æå–ç‰¹å¾ç‚¹çš„åŸºç¡€ä¸Šï¼Œæ±‚å¾—ç›¸æœºçš„ä½ç½®å˜æ¢æƒ…å†µï¼Œåœ¨é€šè¿‡ä¸‰è§’ä¼°è®¡æ¥æµ‹é‡å¯¹äºçš„æ·±åº¦å€¼ã€‚ å¯¹æå‡ ä½•å¯¹æçº¦æŸåœ¨æˆ‘ä»¬å¾—åˆ°ç‰¹å¾çš„åŒ¹é…ä¹‹åï¼Œç°åœ¨éœ€è¦å¯¹å¾—åˆ°çš„ç‰¹å¾ç‚¹è¿›è¡ŒåŒ¹é…ï¼Œæ¥ç¡®å®šçš„ç›¸æœºçš„è¿åŠ¨æƒ…å†µï¼š å¦‚æœç›¸æœºåªæœ‰ä¸¤ä¸ªå•ç›®çš„ç›¸æœºæ—¶ï¼Œä¸ºäº†ç¡®å®š2D-2Dçš„å…³ç³»ï¼Œä½¿ç”¨å¯¹æå‡ ä½•ã€‚ å¦‚æœåŒ¹é…çš„æ˜¯RGBDï¼Œå³ä¸€ä¸ªç›¸æœºæ˜¯åŒç›®å¦ä¸€ä¸ªä½RGBDï¼Œæˆ–è€…é€šè¿‡æŸç§æ–¹æ³•å¯ä»¥æ¥å¾—åˆ°è·ç¦»ä¿¡æ¯ï¼Œå³3D-3Dçš„å…³ç³»ï¼Œä½¿ç”¨ICPã€‚ å¦‚æœä½¿ç”¨åŒ¹é…çš„æ˜¯å¸§å’Œåœ°å›¾ï¼Œå³å¾—åˆ°çš„æ˜¯3Dç‚¹å·²ç»åœ¨æŠ•å½±ä¸­ä½ç½®ï¼Œå³å¾—åˆ°3D-2Dçš„ä¿¡æ¯ï¼Œä½¿ç”¨PnPã€‚ å‡ ä½•å…³ç³»ï¼š Påœ¨ä¸¤ä¸ªå›¾åƒçš„æŠ•å½±ä¸º$p_1,p_2$, æ­¤æ—¶ç›¸æœºçš„ä¸¤ä¸ªæŠ•å½±é¢ä¸º$I_1ã€I_2$ ä¸¤ä¸ªç›¸æœºä¹‹é—´çš„å˜æ¢ä¸º$T_{12},R,t$ $p_1=T_{12}p_2$ è¿™é‡Œçš„$p_1,p_2$ä¸ºåæ ‡ $O_1P$ åœ¨å›¾åƒ$I_2$ä¸ŠæŠ•å½±ä¸º$e_2p_2$ï¼Œè®°ä¸º$l_2$ï¼Œç§°ä¸ºæçº¿ $O_2P$åœ¨å›¾åƒ$I_1$ä¸Šçš„æŠ•å½±ä¸º$e_1p_1$ï¼Œè®°ä¸º$l_1$ ï¼Œç§°ä¸ºæçº¿ $O_1O_2$ä¸$I_1\\ I_2$çš„äº¤ç‚¹ä¸º$e_1ã€e_2$ï¼Œç§°ä¸ºæç‚¹ åªæœ‰$I_1$é‚£ä¹ˆPå¯ä»¥å‡ºç°åœ¨$O_1p_1$ä¸Šé¢çš„ä»»æ„ä¸€ä¸ªåœ°æ–¹ï¼Œéœ€è¦ä¸¤ä¸ªæ‰å¯ä»¥ç¡®å®šæœ€åçš„Pçš„ä½ç½®ã€‚ è¿™ä¸ªé—®é¢˜å¯ä»¥è½¬åŒ–ç§°ä¸ºå·²ç»å›¾åƒçš„ä¿¡æ¯ï¼Œæ¥æ±‚è§£è½¬æ¢çŸ©é˜µ$T_{12}$å’ŒPç‚¹çš„ä½ç½®çš„ã€‚ å¯¹çº¦æŸçš„ä»£æ•°å½¢å¼ åœ¨ç¬¬ä¸€å¸§çš„åæ ‡ç³»ä¹‹ä¸‹ï¼Œè®¾Pä¸ºç©ºé—´ä½ç½®ä¸º$P=[x,y,z]^T$ æ ¹æ®ä¹‹å‰è®²è§£çš„ç›¸æœºæ¨¡å‹å¯å¾—ä¸¤ä¸ªåƒç´ ç‚¹çš„åƒç´ ä½ç½®$p_1,p_2$ä¸ºï¼š s_1p_1=Kp, \\ s_2p_2=K(R_{21}P+t_{21})æœ‰æ—¶æˆ‘ä»¬ä¼šä½¿ç”¨é½æ¬¡åæ ‡æ¥è¡¨è¾¾ä¸€ä¸ªåƒç´ ç‚¹ï¼Œåœ¨ä½¿ç”¨é½æ¬¡åæ ‡æ—¶ï¼Œä¸€ä¸ªå‘é‡å°†ç­‰äºè‡ªèº«ä¹˜ä»¥ä»»æ„ä¸€ä¸ªéé›¶çš„å¸¸æ•°ï¼Œè¿™é€šå¸¸æ¥è¡¨è¾¾ä¸€ä¸ªæŠ•å½±çš„å…³ç³»ï¼Œäºæ˜¯$s_1p_1$å’Œ$p_1$å¯ä»¥è®¤ä¸ºæ˜¯åœ¨é½æ¬¡åæ ‡ç³»ä¸‹æ˜¯ç›¸ç­‰çš„$sp\\simeq p$ äºæ˜¯ä¸Šè¿°çš„æŠ•å½±å…³ç³»å¯ä»¥æ˜¯ï¼š p_1 \\simeq KP ,\\ p_2\\simeq K(KP+t)äºæ˜¯ç°åœ¨å¯ä»¥å–ï¼š x_1=K^{-1}p_1,x_2=K^{-1}p_2è¿™é‡Œçš„$x_1,x_2$æ˜¯ä¸¤ä¸ªåƒç´ ç‚¹çš„å½’ä¸€åŒ–çš„å¹³é¢ä¸Šçš„åæ ‡(z=1)ï¼Œä»£å…¥å¯å¾—ï¼š x_2 \\simeq R_{21}x_1 + t_{21}ä¸¤è¾¹åŒæ—¶å·¦ä¹˜$t^{\\wedge}$ï¼Œè¿™é‡Œæ˜¯åå¯¹ç§°çŸ©é˜µçš„æ„æ€ï¼Œå…¶å®ä¹Ÿå°±æ˜¯å‰ä¹˜ï¼Œå¤–ç§¯ï¼š t^{\\wedge}x_2 \\simeq t^{\\wedge}Rx_1ç„¶åï¼Œä¸¤ä¾§åŒæ—¶ä¹˜ä»¥$x_2^T$å¯å¾—ï¼š x_2^Tt^{\\wedge}x_2\\simeq x_2^Tt^{\\wedge}Rx_1è§‚å¯Ÿç­‰å¼$x_2^Tt^{\\wedge}$ æ˜¯ä¸€ä¸ªä¸tå’Œ$x_2$ éƒ½æ˜¯å‚ç›´çš„å‘é‡ã€‚ä»–ä»¬å†å’Œ$x_2$æ±‚å†…ç§¯å¯å¾—0ï¼Œäºæ˜¯å¾—åˆ°ï¼š x_2^{T}t^{\\wedge}Rx_1=0åœ¨ä»£å…¥$p_1,p_2$å¯å¾—ï¼š p_2^TK^{-T}t^{\\wedge}RK^{-1}p_1=0ä¸Šè¿°ä¸¤å¼éƒ½ä¸ºå¯¹æçº¦æŸï¼Œå…¶å‡ ä½•æ„ä¹‰æ˜¯$O_1,P,O_2$ä¸‰ç‚¹å…±é¢ã€‚ äºæ˜¯ä»¥ä¸‹å®šä¹‰ï¼š $E=t^{\\wedge}R$ ,ç§°ä¸ºæœ¬è´¨çŸ©é˜µ(Essential Matrix) $F=K^{-T}EK^{-1}$,ç§°ä¸ºåŸºç¡€çŸ©é˜µ(Fundamental Matrix) äºæ˜¯ä½å§¿ä¼°è®¡é—®é¢˜å°±è½¬åŒ–ä¸ºä¸‹é¢ä¸¤ä¸ªé—®é¢˜ã€‚ æ ¹æ®é…å¯¹ç‚¹çš„åƒç´ ä½ç½®$p_1,p_2$ï¼Œæ¥æ±‚å‡ºå¯¹åº”çš„$E,F$; æ ¹æ®$E,F$ æ¥åè§£å‡º $R,t$ã€‚ æœ¬è´¨çŸ©é˜µæœ¬è´¨çŸ©é˜µæ˜¯ä¸€ä¸ª$3\\times3$çš„çŸ©é˜µï¼Œä½†æ˜¯å¹¶éä»»ä½•$3\\times3$çš„çŸ©é˜µéƒ½æ˜¯æœ¬è´¨çŸ©é˜µï¼Œè¿™é‡Œé¢æœ‰ä¸€å®šçš„çº¦æŸåœ¨é‡Œé¢ï¼š å°½ç®¡Eå…·æœ‰äº”ä¸ªè‡ªç”±åº¦ï¼Œæˆ‘ä»¬æœ€å°‘æ˜¯å¯ä»¥ä½¿ç”¨5ä¸ªç‚¹æ¥è¿›è¡Œæ±‚è§£ï¼Œä½†æ˜¯æœ¬è´¨çŸ©é˜µçš„å†…åœ¨æ€§è´¨æ˜¯ä¸€ä¸ªéçº¿æ€§çš„çº¦æŸï¼Œå…¶åœ¨ä¼°è®¡çš„æ—¶å€™ä¼šå¸¦æ¥éº»çƒ¦ï¼Œéœ€è¦è€ƒè™‘å°ºåº¦ç­‰ä»·æ€§ã€‚ å› æ­¤ä»…ä»…è€ƒè™‘å°ºåº¦ç­‰ä»·æ€§ä¹Ÿéœ€è¦8å¯¹ç‚¹æ¥ä¼°è®¡Eï¼Œè¿™å°±æ˜¯ç»å…¸çš„å…«ç‚¹æ³•ï¼Œè¿™é‡Œå…«ç‚¹æ³•åªæ˜¯åˆ©ç”¨äº†Eçš„çº¿æ€§æ€§è´¨ï¼Œåœ¨çº¿æ€§çš„æ¡†æ¶ä¸‹æ±‚è§£æ¯”è¾ƒå®¹æ˜“å¯è¡Œã€‚ å…«ç‚¹æ³•çš„æ¨å¯¼è€ƒè™‘ä¸€å¯¹åŒ¹é…ç‚¹ï¼Œä»–ä»¬çš„å½’ä¸€åŒ–åæ ‡ä¸º$x_1=[u_1,v_1,1]^T,x_2=[u_2,v_2,1]^T$ æ ¹æ®å¯¹æçº¦æŸæœ‰ï¼š \\left(u_{1}, v_{1}, 1\\right)\\left(\\begin{array}{lll}e_{1} & e_{2} & e_{3} \\\\ e_{4} & e_{5} & e_{6} \\\\ e_{7} & e_{8} & e_{9}\\end{array}\\right)\\left(\\begin{array}{c}u_{2} \\\\ v_{2} \\\\ 1\\end{array}\\right)=0äºæ˜¯æˆ‘ä»¬å°†çŸ©é˜µEå†™æˆå‘é‡çš„å½¢å¼ï¼š e=[e_1,e_2,e_3,e_4,e_5,e_6,e_7,e_8.e_9]^Té‚£ä¹ˆï¼Œå¯¹æçº¦æŸå¯ä»¥å†™æˆå…³äºeçš„çº¿æ€§å½¢å¼ï¼š \\left[u_{1} u_{2}, u_{1} v_{2}, u_{1}, v_{1} u_{2}, v_{1} v_{2}, u_{2}, v_{2}, 1\\right] \\cdot e=0åŒç†ï¼Œå¯¹äºå…¶ä»–çš„ç‚¹å¯¹æ¥è¯´ä¹Ÿæœ‰ç›¸åŒçš„å½¢å¼ï¼š å¦‚æœç³»æ•°ç©ºé—´ä¸ºæ»¡ç§©ä¸º8ï¼Œäºæ˜¯å¯¹äºçš„é›¶ç©ºé—´ç»´æ•°ä¸º1ï¼Œäºæ˜¯eä¹Ÿå°±æ„æˆäº†ä¸€æ¡çº¿çš„å½¢å¼ï¼Œå³æ»¡è¶³äº†å°ºåº¦ç­‰ä»·æ€§ã€‚ æ±‚è§£R,tæ±‚è§£çš„è¿‡ç¨‹ä½¿ç”¨åˆ°çš„æ˜¯çŸ©é˜µçš„å¥‡å¼‚å€¼åˆ†è§£ï¼Œå¯¹æœ¬è´¨çŸ©é˜µEè¿›è¡ŒSVDåˆ†è§£å¯å¾—ï¼š E=U\\Sigma V^Tå…¶ä¸­U,Vä¸ºæ­£äº¤çŸ©é˜µï¼Œ$\\Sigma$ ä¸ºå¥‡å¼‚å€¼çŸ©é˜µã€‚æ ¹æ®Eçš„å†…åœ¨æ€§è´¨å¯å¾—$\\Sigma=diag(\\sigma,\\sigma,0)$ ,å¯¹äºä»»æ„çš„Eï¼Œéƒ½å­˜åœ¨ä¸¤ä¸ªå¯èƒ½çš„t,Rä¸ä¹‹å¯¹åº”ï¼š \\boldsymbol{t}_{1}^{\\wedge}=\\boldsymbol{U} \\boldsymbol{R}_{Z}\\left(\\frac{\\pi}{2}\\right) \\boldsymbol{\\Sigma} \\boldsymbol{U}^{T}, \\quad \\boldsymbol{R}_{1}=\\boldsymbol{U} \\boldsymbol{R}_{Z}^{T}\\left(\\frac{\\pi}{2}\\right) \\boldsymbol{V}^{T}\\\\ \\boldsymbol{t}_{2}^{\\wedge}=\\boldsymbol{U} \\boldsymbol{R_{Z}}\\left(-\\frac{\\pi}{2}\\right) \\Sigma \\boldsymbol{U}^{T}, \\quad \\boldsymbol{R}_{2}=\\boldsymbol{U} \\boldsymbol{R}_{Z}^{T}\\left(-\\frac{\\pi}{2}\\right) \\boldsymbol{V}^{T}èµ·ä¸»è¦æœ‰å››ä¸ªå¯èƒ½çš„è§£ï¼Œå…¶ä¸­ä¹Ÿåªèƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„æ˜¯æ·±åº¦ä¸ºæ­£å€¼çš„æƒ…å†µï¼Œå› æ­¤åªè¦å°†æ¥å‡ºæ¥çš„æƒ…å†µä»£å…¥ï¼Œæ‰¾åˆ°æ»¡è¶³ä¸¤ä¸ªç›¸æœºéƒ½ä¸º0çš„æƒ…å†µå³å¯ã€‚ æ³¨æ„ï¼š å¯¹äºäº”ç‚¹æ³•æ¥è¯´ï¼Œåœ¨å·¥ç¨‹ä¸Šå¯èƒ½æœ‰å‡ åå¯¹æˆ–è€…å‡ ç™¾å¯¹çš„ç‚¹å¯¹ï¼Œå› æ­¤ä»8å¯¹å‡åˆ°5å¯¹ä¹‹åçš„æ•ˆæœå¹¶ä¸æ˜æ˜¾ã€‚ å¦‚æœæ±‚è§£å¾—åˆ°ç‰¹å¾å€¼ä¸æ»¡è¶³Eçš„å†…åœ¨æ€§è´¨ï¼Œå³ç‰¹å¾å€¼ä¸º$\\sigma,\\sigma,0$ çš„å½¢å¼ï¼Œäºæ˜¯å°±æœ‰ï¼Œè¿™æ—¶æˆ‘ä»¬ä¼šå¯ä»¥çš„å°†$\\Sigma$ è°ƒèŠ‚æˆä¸Šè¿°çš„å½¢å¼ å½“$\\Sigma=diag(\\sigma_1,\\sigma_2,\\sigma_3)$æ—¶ï¼Œä¸å¦¨$\\sigma_1&gt;\\sigma_2&gt;\\sigma_3$ äºæ˜¯å–ï¼š E=Udiag(\\dfrac{\\sigma_1+\\sigma_2}{2},\\dfrac{\\sigma_1+\\sigma_2}{2},0)V^T è¿™å°±ç›¸å½“äºå°†çŸ©é˜µæŠ•å½±åˆ°Eçš„æµå½¢ä¸Šé¢ï¼Œæˆ–è€…ç›´æ¥å–æˆ1ï¼Œ1ï¼Œ0ï¼Œå› ä¸ºEæ»¡è¶³å°ºåº¦çš„ç­‰ä»·æ€§ã€‚ å…«ç‚¹æ³•å­˜åœ¨çš„é—®é¢˜ é¦–å…ˆï¼Œå…«ç‚¹æ³•ä¸»è¦ç”¨äºå•ç›®SLAMçš„åˆå§‹åŒ–æ“ä½œï¼Œä½†æ˜¯è¿™ä¸ªåˆå§‹åŒ–å­˜åœ¨ä¸€å®šä¸å¥½çš„æ€§è´¨å¦‚ä¸‹ã€‚ å°ºåº¦ä¸ç¡®å®šæ€§ï¼šæ ¹æ®Eæ±‚å‡ºt,R,ä¹˜ä»¥ä»»æ„çš„å€æ•°ä¹‹åéƒ½æ˜¯æˆç«‹çš„ï¼Œå› æ­¤é€šå¸¸å°†å…¶å½’ä¸€åŒ–ä¸º1æˆ–è€…å°†ç‰¹å¾ç‚¹çš„å¹³å‡æ·±åº¦ä¸º1ï¼› å…¶å®ä¸»è¦å°±æ˜¯å°±ç®—å½’ä¸€åŒ–ï¼Œé‚£ä¹ˆçœŸå®å€¼å…¶å®ä¹Ÿæ˜¯æ— æ³•ç¡®å®šçš„ï¼Œå› ä¸ºä¸çŸ¥é“çœŸå®å€¼å’Œè§„å®šå€¼ä¹‹é—´çš„æ”¾å¤§å€æ•°ã€‚ çº¯æ—‹è½¬çš„é—®é¢˜ï¼št=0æ—¶ï¼Œæ— æ³•æ±‚è§£ï¼Œ$E=t^{\\wedge}R$ æ­¤æ—¶çš„Eä¸º0ï¼Œé‚£æ—‹è½¬çŸ©é˜µRå°±æ— æ³•æ±‚è§£ï¼Œå› æ­¤å•ç›®ç›¸æœºåˆå§‹åŒ–çš„ä¸èƒ½åªæœ‰æ—‹è½¬ï¼Œå¿…é¡»è¦æœ‰ä¸€å®šç¨‹åº¦ä¸Šçš„å¹³ç§»ã€‚ å¤šäºå…«ä¸ªç‚¹ï¼šæ­¤æ—¶çš„æ–¹ç¨‹å°±æ˜¯ä¸€ä¸ªè¶…å®šçš„æ–¹ç¨‹ï¼Œå…¶æ±‚è§£æ˜¯ä¸ç°å®çš„ï¼Œéœ€è¦è¿›è¡Œä½¿ç”¨æœ€å°äºŒä¹˜ä¼°è®¡çš„æ–¹æ³•æ¥æ±‚è§£ã€‚ \\min\\limits_{e}||Ae||_2^2=\\min\\limits_e e^TA^TAeäºæ˜¯å°±æ±‚å‡ºEï¼Œä½†æ˜¯å¦‚æœå­˜åœ¨é”™è¯¯åŒ¹é…çš„è¯ï¼Œè¿™æ ·è§£å°±ç›¸å½“ä¸å¥½ï¼Œäºæ˜¯ä¸€èˆ¬é‡‡ç”¨çš„æ˜¯RANSACçš„æ–¹æ³•ï¼Œ(Random Sample Concensus) ã€‚ å•åº”çŸ©é˜µ è¿™ä¸ªçŸ©é˜µå°±æ˜¯ç”¨æ¥å¤„ç†å…«ç‚¹æ³•ç‰¹å¾ç‚¹å…±é¢æ—¶çš„é€€åŒ–æƒ…å†µï¼› è¿™é‡Œè®¾å…¶æ‰€åœ¨çš„å¹³é¢ä¸ºPï¼Œåˆ™æœ‰å¹³é¢æ–¹ç¨‹$n^TP+d=0$ï¼Œç¨åŠ æ•´ç†å°±ä¼šæœ‰$-\\dfrac{n^TP}{d}=1$ å›é¡¾ä¹‹å‰çš„è®²è§£åˆ™æœ‰ï¼š äºæ˜¯è®°ä¸­é—´çš„çŸ©é˜µä¸ºHï¼Œäºæ˜¯å¾—åˆ°ä¸¤ä¸ªç‰¹å¾ä¹‹é—´çš„å˜æ¢ä¸ºï¼š p_2\\simeq Hp_1è¿™é‡Œçš„å¤„ç†å’ŒFã€Eç±»ä¼¼ï¼Œå°±æ˜¯æ ¹æ®åŒ¹é…ç‚¹å°†Hæ±‚å‡ºæ¥ï¼Œè¿›è€Œå†æ±‚è§£æ—‹è½¬å’Œå¹³ç§»çŸ©é˜µï¼š \\left(\\begin{array}{c}u_{2} \\\\ v_{2} \\\\ 1\\end{array}\\right)\\simeq\\left(\\begin{array}{lll}h_{1} & h_{2} & h_{3} \\\\ h_{4} & h_{5} & h_{6} \\\\ h_{7} & h_{8} & h_{9}\\end{array}\\right)\\left(\\begin{array}{c}u_{1} \\\\ v_{1} \\\\ 1\\end{array}\\right)ä¹‹åå°†ç¬¬ä¸‰è¡Œçš„å…ƒç´ å»æ‰å¯å¾—ï¼š u_{2}=\\frac{h_{1} u_{1}+h_{2} v_{1}+h_{3}}{h_{7} u_{1}+h_{8} v_{1}+h_{9}},v_{2}=\\frac{h_{4} u_{1}+h_{5} v_{1}+h_{6}}{h_{7} u_{1}+h_{8} v_{1}+h_{9}}\\\\ h_1u_1+h_2v_1+h_3-h_7u_1u_2-h_8v_1v_2=u_2\\\\ h_4u_1+h_5v_1+h_6-h_7u_1u_2-h_8v_1v_2=v_2ä¸€å¯¹ç‚¹å…¶å®å¯ä»¥æä¾›ä¸¤ç§çº¦æŸï¼Œäºæ˜¯å°±å¯ä»¥å¾—åˆ°å…³äºHçš„çº¿æ€§æ–¹ç¨‹ï¼š \\left(\\begin{array}{cccccccc}u_{1}^{1} & v_{1}^{1} & 1 & 0 & 0 & 0 & -u_{1}^{1} u_{2}^{1} & -v_{1}^{1} u_{2}^{1} \\\\ 0 & 0 & 0 & u_{1}^{1} & v_{1}^{1} & 1 & -u_{1}^{1} v_{2}^{1} & -v_{1}^{1} v_{2}^{1} \\\\ u_{1}^{2} & v_{1}^{2} & 1 & 0 & 0 & 0 & -u_{1}^{2} u_{2}^{2} & -v_{1}^{2} u_{2}^{2} \\\\ 0 & 0 & 0 & u_{1}^{2} & v_{1}^{2} & 1 & -u_{1}^{2} v_{2}^{2} & -v_{1}^{2} v_{2}^{2} \\\\ u_{1}^{3} & v_{1}^{3} & 1 & 0 & 0 & 0 & -u_{1}^{3} u_{2}^{3} & -v_{1}^{3} u_{2}^{3} \\\\ 0 & 0 & 0 & u_{1}^{3} & v_{1}^{3} & 1 & -u_{1}^{3} v_{2}^{3} & -v_{1}^{3} v_{2}^{3} \\\\ u_{1}^{4} & v_{1}^{4} & 1 & 0 & 0 & 0 & -u_{1}^{4} u_{2}^{4} & -v_{1}^{4} u_{2}^{4} \\\\ 0 & 0 & 0 & u_{1}^{4} & v_{1}^{4} & 1 & -u_{1}^{4} v_{2}^{4} & -v_{1}^{4} v_{2}^{4}\\end{array}\\right)\\left(\\begin{array}{c}h_{1} \\\\ h_{2} \\\\ h_{3} \\\\ h_{4} \\\\ h_{5} \\\\ h_{6} \\\\ h_{7} \\\\ h_{8}\\end{array}\\right)=\\left(\\begin{array}{c}u_{2}^{1} \\\\ v_{2}^{1} \\\\ u_{2}^{2} \\\\ v_{2}^{2} \\\\ u_{2}^{3} \\\\ v_{2}^{3} \\\\ u_{2}^{4} \\\\ v_{2}^{4}\\end{array}\\right)æœ€åå°±æ˜¯ç±»ä¼¼äºå…«ç‚¹æ³•æ¥å…ˆæ±‚è§£Hå†æ¢å¤å‡ºå¯¹äºçš„æ—‹è½¬çŸ©é˜µå’Œå¹³ç§»çŸ©é˜µã€‚å…·ä½“çš„ç»†èŠ‚çœ‹è®ºæ–‡ã€‚ å°ç»“ï¼š 2D-2Dçš„æƒ…å†µä¸‹ï¼Œä»…ä»…çŸ¥é“å›¾åƒåæ ‡ä¹‹é—´çš„å¯¹äºå…³ç³» å½“ç‰¹å¾ç‚¹å†å¹³é¢ä¸Šæ—¶(å¦‚ä¿¯è§†æˆ–ä»°è§†)ï¼Œä½¿ç”¨Hæ¥æ¢å¤å‡ºR,t å¦åˆ™å°±æ˜¯ä½¿ç”¨E(æœ¬è´¨çŸ©é˜µ)ï¼ŒF(åŸºç¡€çŸ©é˜µ)æ¥è¿›è¡Œæ¢å¤ æ±‚å¾—R,tä¹‹åï¼š åˆ©ç”¨ä¸‰è§’åŒ–è®¡ç®—ç‰¹å¾ç‚¹çš„3Dä½ç½®ï¼Œå³æ·±åº¦ã€‚ å®è·µä¸‹é¢æ˜¯pose_estimation_2d2d.cppçš„ä¸»è¦ä»£ç ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185#include &lt;iostream&gt;#include &lt;opencv2/core/core.hpp&gt;#include &lt;opencv2/highgui/highgui.hpp&gt;#include &lt;opencv2/features2d/features2d.hpp&gt;#include &lt;opencv2/calib3d/calib3d.hpp&gt;#include &lt;opencv2/imgcodecs/legacy/constants_c.h&gt;using namespace std;/**************************************************** * æœ¬ç¨‹åºæ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨2D-2Dçš„ç‰¹å¾åŒ¹é…ä¼°è®¡ç›¸æœºè¿åŠ¨ * **************************************************/// å£°æ˜æå–ç‰¹å¾ä»£ç‚¹å¹¶åŒ¹é…çš„å‡½æ•°;void find_feature_matches( const cv::Mat &amp;img_1, const cv::Mat &amp;img_2, // å¦‚æœæƒ³è¦ä¿®æ”¹é‡Œé¢çš„å†…å®¹éœ€è¦ä¼ æŒ‡é’ˆæˆ–è€…å¼•ç”¨ std::vector&lt;cv::KeyPoint&gt; &amp;keypoints_1, std::vector&lt;cv::KeyPoint&gt; &amp;keypoints_2, std::vector&lt;cv::DMatch&gt; &amp;matches);// å£°æ˜ä½å§¿ä¼°è®¡å‡½æ•°void pose_estimation_2d2d( std::vector&lt;cv::KeyPoint&gt; keypoints_1, std::vector&lt;cv::KeyPoint&gt; keypoints_2, std::vector&lt;cv::DMatch&gt; matches, cv::Mat &amp;R, cv::Mat &amp;t);// åƒç´ åæ ‡è½¬ç›¸æœºå½’ä¸€åŒ–cv::Point2d pixel2cam(const cv::Point2d &amp;p, const cv::Mat &amp;K);// è¿™ä¸ªå…¶å®è·Ÿorb_cv.cppä¸€æ ·ï¼Œæ˜¯å®ƒçš„ä¸€ä¸ªå°è£…void find_feature_matches( const cv::Mat &amp;img_1, const cv::Mat &amp;img_2, std::vector&lt;cv::KeyPoint&gt; &amp;keypoints_1, std::vector&lt;cv::KeyPoint&gt; &amp;keypoints_2, std::vector&lt;cv::DMatch&gt; &amp;matches){ // åˆå§‹åŒ–å‚æ•° // åˆ›å»ºæè¿°å­çŸ©é˜µ cv::Mat descriptors_1, descriptors_2; // åˆ†åˆ«ç”³è¯·ORBçš„æè¿°å­å’Œå…³é”®ç‚¹ cv::Ptr&lt;cv::FeatureDetector&gt; detector = cv::ORB::create(); cv::Ptr&lt;cv::DescriptorExtractor&gt; descriptor = cv::ORB::create(); // è®¾ç½®ä¸€ä¸ªåŒ¹é…å°†å…³é”®ç‚¹å’Œæè¿°å­è¿›è¡ŒåŒ¹é… cv::Ptr&lt;cv::DescriptorMatcher&gt; matcher = cv::DescriptorMatcher::create(&quot;BruteForce-Hamming&quot;) ; //-- ç¬¬ä¸€æ­¥:æ£€æµ‹ Oriented FAST è§’ç‚¹ä½ç½® detector-&gt;detect(img_1, keypoints_1); detector-&gt;detect(img_2, keypoints_2); //-- ç¬¬äºŒæ­¥:æ ¹æ®è§’ç‚¹ä½ç½®è®¡ç®— BRIEF æè¿°å­ descriptor-&gt;compute(img_1, keypoints_1, descriptors_1); descriptor-&gt;compute(img_2, keypoints_2, descriptors_2); //-- ç¬¬ä¸‰æ­¥:å¯¹ä¸¤å¹…å›¾åƒä¸­çš„BRIEFæè¿°å­è¿›è¡ŒåŒ¹é…ï¼Œä½¿ç”¨ Hamming è·ç¦» vector&lt;cv::DMatch&gt; match; //BFMatcher matcher ( NORM_HAMMING ); matcher-&gt;match(descriptors_1, descriptors_2, match); //-- ç¬¬å››æ­¥:åŒ¹é…ç‚¹å¯¹ç­›é€‰ double min_dist = 10000, max_dist = 0; //æ‰¾å‡ºæ‰€æœ‰åŒ¹é…ä¹‹é—´çš„æœ€å°è·ç¦»å’Œæœ€å¤§è·ç¦», å³æ˜¯æœ€ç›¸ä¼¼çš„å’Œæœ€ä¸ç›¸ä¼¼çš„ä¸¤ç»„ç‚¹ä¹‹é—´çš„è·ç¦» for (int i = 0; i &lt; descriptors_1.rows; i++) { double dist = match[i].distance; if (dist &lt; min_dist) min_dist = dist; if (dist &gt; max_dist) max_dist = dist; } printf(&quot;-- Max dist : %f \\n&quot;, max_dist); printf(&quot;-- Min dist : %f \\n&quot;, min_dist); //å½“æè¿°å­ä¹‹é—´çš„è·ç¦»å¤§äºä¸¤å€çš„æœ€å°è·ç¦»æ—¶,å³è®¤ä¸ºåŒ¹é…æœ‰è¯¯.ä½†æœ‰æ—¶å€™æœ€å°è·ç¦»ä¼šéå¸¸å°,è®¾ç½®ä¸€ä¸ªç»éªŒå€¼30ä½œä¸ºä¸‹é™. for (int i = 0; i &lt; descriptors_1.rows; i++) { if (match[i].distance &lt;= max(2 * min_dist, 30.0)) { matches.push_back(match[i]); } }}cv::Point2d pixel2cam(const cv::Point2d &amp;p, const cv::Mat &amp;K) { return cv::Point2d ( (p.x - K.at&lt;double&gt;(0, 2)) / K.at&lt;double&gt;(0, 0), (p.y - K.at&lt;double&gt;(1, 2)) / K.at&lt;double&gt;(1, 1) );}void pose_estimation_2d2d( std::vector&lt;cv::KeyPoint&gt; keypoints_1, std::vector&lt;cv::KeyPoint&gt; keypoints_2, std::vector&lt;cv::DMatch&gt; matches, cv::Mat &amp;R, cv::Mat &amp;t){ // ç›¸æœºå†…å‚ï¼ŒTUM Freiburg2 cv::Mat K = (cv::Mat_&lt;double&gt;(3, 3) &lt;&lt; 520.9, 325.1, 0, 521.0, 249.7, 0, 0, 1); // å°†åŒ¹é…ç‚¹è½¬åŒ–æˆä¸ºvector&lt;cv::Point2f&gt;çš„å½¢å¼ vector&lt;cv::Point2f&gt; points1; vector&lt;cv::Point2f&gt; points2; for (int i = 0; i &lt; (int)matches.size(); i++) { points1.push_back(keypoints_1[matches[i].queryIdx].pt); points2.push_back(keypoints_2[matches[i].trainIdx].pt); } // è®¡ç®—åŸºç¡€çŸ©é˜µ cv::Mat fundamental_matrix; fundamental_matrix = cv::findFundamentalMat(points1, points2, cv::FM_8POINT); // https://blog.csdn.net/qq_38629044/article/details/96907844 // ä½¿ç”¨å…«ç‚¹æ³•æ±‚è§£ cout &lt;&lt; &quot;fundamental_matrix is &quot; &lt;&lt; endl &lt;&lt; fundamental_matrix &lt;&lt; endl; // è®¡ç®—æœ¬è´¨çŸ©é˜µ cv::Point2d principal_point(325.1, 249.7); // ç›¸æœºå…‰å¿ƒï¼ŒTUM datasetæ ‡å®šå€¼ double focal_length = 521; // ç›¸æœºç„¦è·, TUM datasetæ ‡å®šå€¼ cv::Mat essential_matrix; essential_matrix = cv::findEssentialMat(points1, points2, focal_length, principal_point); cout &lt;&lt; &quot;essential_matrix is &quot; &lt;&lt; endl &lt;&lt; essential_matrix &lt;&lt; endl; //-- è®¡ç®—å•åº”çŸ©é˜µ //-- ä½†æ˜¯æœ¬ä¾‹ä¸­åœºæ™¯ä¸æ˜¯å¹³é¢ï¼Œå•åº”çŸ©é˜µæ„ä¹‰ä¸å¤§ cv::Mat homography_matrix; homography_matrix = cv::findHomography(points1, points2, cv::RANSAC, 3); cout &lt;&lt; &quot;homography_matrix is &quot; &lt;&lt; endl &lt;&lt; homography_matrix &lt;&lt; endl; cv::recoverPose(essential_matrix, points1, points2, R, t, focal_length, principal_point); cout &lt;&lt; &quot;R is &quot; &lt;&lt; endl &lt;&lt; R &lt;&lt; endl; cout &lt;&lt; &quot;t is &quot; &lt;&lt; endl &lt;&lt; t &lt;&lt; endl;}int main(int argc, char **argv) { if (argc != 3) { cout &lt;&lt; &quot;usage: pose_estimation_2d2d img1 img2&quot; &lt;&lt; endl; return 1; } //-- è¯»å–å›¾åƒ cv::Mat img_1 = cv::imread(argv[1], CV_LOAD_IMAGE_COLOR); cv::Mat img_2 = cv::imread(argv[2], CV_LOAD_IMAGE_COLOR); assert(img_1.data &amp;&amp; img_2.data &amp;&amp; &quot;Can not load images!&quot;); vector&lt;cv::KeyPoint&gt; keypoints_1, keypoints_2; vector&lt;cv::DMatch&gt; matches; find_feature_matches(img_1, img_2, keypoints_1, keypoints_2, matches); cout &lt;&lt; &quot;ä¸€å…±æ‰¾åˆ°äº†&quot; &lt;&lt; matches.size() &lt;&lt; &quot;ç»„åŒ¹é…ç‚¹&quot; &lt;&lt; endl; // ä¼°è®¡ä¸¤ä¸ªå›¾åƒä¹‹é—´çš„è¿åŠ¨ cv::Mat R,t; pose_estimation_2d2d(keypoints_1, keypoints_2, matches, R, t); // éªŒè¯E=t^R*scale cv::Mat t_x = (cv::Mat_&lt;double&gt;(3, 3) &lt;&lt; 0, -t.at&lt;double&gt;(2, 0), t.at&lt;double&gt;(1, 0), t.at&lt;double&gt;(2, 0), 0, -t.at&lt;double&gt;(0, 0), -t.at&lt;double&gt;(1, 0), t.at&lt;double&gt;(0, 0), 0); // t_xä¸ºåå¯¹ç§°çŸ©é˜µ cout &lt;&lt; &quot;t^R=&quot; &lt;&lt; endl &lt;&lt; t_x * R &lt;&lt; endl; //-- éªŒè¯å¯¹æçº¦æŸ cv::Mat K = (cv::Mat_&lt;double&gt;(3, 3) &lt;&lt; 520.9, 0, 325.1, 0, 521.0, 249.7, 0, 0, 1); for (cv::DMatch m: matches) { cv::Point2d pt1 = pixel2cam(keypoints_1[m.queryIdx].pt, K); cv::Mat y1 = (cv::Mat_&lt;double&gt;(3, 1) &lt;&lt; pt1.x, pt1.y, 1); cv::Point2d pt2 = pixel2cam(keypoints_2[m.trainIdx].pt, K); cv::Mat y2 = (cv::Mat_&lt;double&gt;(3, 1) &lt;&lt; pt2.x, pt2.y, 1); cv::Mat d = y2.t() * t_x * R * y1; cout &lt;&lt; &quot;epipolar constraint = &quot; &lt;&lt; d &lt;&lt; endl; } return 0;} ä¸‰è§’æµ‹é‡ä¹‹å‰ä¸»è¦æ˜¯æ ¹æ®è®²è§£å¯å¾—å…³äºç›¸æœºçš„ä½å§¿ï¼Œä¸‹é¢å°†è®²åˆ†æé€šè¿‡ç›¸æœºçš„ç©ºé—´ä½ç½®æ¥ä¼°è®¡ç‰¹å¾ç‚¹çš„ç©ºé—´ä½ç½®ã€‚åœ¨å•ç›®SLAMé‡Œï¼Œç»å¸¸ä½¿ç”¨ä¸‰è§’åŒ–æ³•æˆ–ä¸‰è§’æµ‹é‡æ¥ä¼°è®¡ã€‚ ä¸‰è§’æµ‹é‡çš„æ±‚è§£æ–¹æ³•ä¸‰è§’æµ‹é‡ä¸»è¦æ˜¯æŒ‡é€šè¿‡ä¸åŒä½ç½®å¯¹åŒä¸€ä¸ªè·¯æ ‡ç‚¹è¿›è¡Œè§‚å¯Ÿï¼Œä»è§‚å¯Ÿåˆ°çš„ä½ç½®åˆ¤æ–­è·¯æ ‡ç‚¹çš„è·ç¦»ã€‚ æ­¤æ—¶æœ‰å¯¹æå‡ ä½•çš„å®šä¹‰å¯å¾—ï¼š s_1x_1=s_2\\boldsymbol{R} x_2+tæ±‚$s_2$æ—¶ï¼Œæˆ‘ä»¬å°†ä¸¤ä¾§åŒæ—¶ä¹˜ä»¥$x_1^{\\wedge}$å¯å¾—ï¼š s_{1} x_{1}^{\\wedge} x_{1}=0=s_{2} x_{1}^{\\wedge} \\boldsymbol{R} x_{2}+{x}_{1}^{\\wedge} {t}äºæ˜¯é—®é¢˜è½¬æ¢æˆä¸ºï¼Œåœ¨å·²çŸ¥$\\boldsymbol{R}, t$ çš„æƒ…å†µä¸‹ï¼Œå¦‚ä½•æ±‚è§£$s_1,s_2$ ï¼š \\left[-R x_{2}, x_{1}\\right]\\left[\\begin{array}{l}s_{1} \\\\ s_{2}\\end{array}\\right]=t è¿™ä¸ªé—®é¢˜çš„è§£æ³•å¾ˆå¤šï¼Œå¯ä»¥çœ‹æˆä¸€ä¸ªè§£æ–¹ç¨‹ç»„çš„é—®é¢˜ï¼Œç›¸å½“äºæ±‚è§£ä¸€ä¸ªè¶…å®šçš„æ–¹ç¨‹ï¼Œä½¿ç”¨æœ€å°äºŒä¹˜è§£æ¥æ±‚è§£ï¼Œ$x=(A^TA)^{-1}A^Tb$ ä½†æ˜¯ç”±äºä¼°è®¡å€¼å­˜åœ¨è¯¯å·®ï¼Œå› æ­¤æˆ‘ä»¬æ±‚è§£å¾—åˆ°$s_1,s_2$ä¸ä¸€å®šæ˜¯å¯¹åº”åŒä¸€ä¸ªåœ°æ–¹ï¼Œéœ€è¦ä½¿ç”¨æœ€å°äºŒä¹˜æ±‚è§£ã€‚ ä¸‰è§’æµ‹é‡å­˜åœ¨çš„é—®é¢˜ ä¸‰è§’æµ‹é‡æ˜¯å»ºç«‹åœ¨å¹³ç§»çš„åŸºç¡€ä¸Šçš„ï¼Œæ²¡æœ‰å¹³ç§»çš„åŒ–å°±æ— æ³•å®šä¹‰ä¸‰è§’æµ‹é‡ã€‚ å› æ­¤ï¼Œä½†å¹³ç§»tçš„è·ç¦»å¾ˆå°æ—¶ï¼Œå…¶ç›¸å¯¹çš„è¯¯å·®å°±æ¯”è¾ƒçš„å¤§ï¼Œäºæ˜¯å°±é€ æˆå¯¹äºç›®æ ‡ç‚¹çš„ä¼°è®¡è¯¯å·®å¾ˆå¤§ã€‚æœ‰å¯èƒ½å‡ºç°å…¶æµ‹é‡çš„æ·±åº¦ä¸ºæ­£æ— ç©·æˆ–è€…ä¸ºè´Ÿå€¼çš„æƒ…å†µ å½“tçš„å€¼è¾ƒå¤§çš„æƒ…å†µä¸‹ï¼Œå…¶ç›¸å¯¹çš„è¯¯å·®è¾ƒå°ï¼Œç›¸åŒçš„ç²¾åº¦ä¸‹å…¶ä¼°è®¡å€¼ä¼šå‡†ç¡®å–å¤šã€‚ å‡ºç°ä¸Šè¿°çŠ¶å†µçš„åŸå› ä¸ºï¼šæ±‚è§£æ—¶å…¶ç³»æ•°çŸ©é˜µçš„ä¼ªé€†æ˜¯ä¸å¯é çš„ã€‚ é€šè¿‡$A^TA$ çš„è¡Œåˆ—å¼çš„å€¼å¯ä»¥åˆ¤æ–­ï¼Œå¦‚æœæ¥è¿‘äº0ï¼Œé‚£å°±æ˜¯æ±‚è§£å‡ºçš„ä¸¤æ¡çº¿è¿‘ä¼¼å¹³è¡Œã€‚ ä¾‹å¦‚ï¼Œç›¸æœºå‰è¿›æ—¶ï¼Œè™½ç„¶æœ‰ä½ç§»ï¼Œä½†æ˜¯ä½äºå›¾åƒçš„ä¸­å¿ƒç‚¹ï¼Œæ— æ³•ä¸‰è§’åŒ–ã€‚å› ä¸ºå…¶æœ¬æ¥å°±æ˜¯åœ¨å¾ˆè¿œçš„åœ°æ–¹ï¼Œåœ¨ä¸¤ä¸ªä½ç½®ä¸Šè§‚å¯Ÿè¿‘ä¼¼äºæ²¡åŠ¨ã€‚ ç›´æ¥çš„æƒ³æ³•è§£å†³ä¸Šè¿°é—®é¢˜å°±æ˜¯ï¼š å¢å¤§åˆ†åˆ†è¾¨ç‡ï¼Œæé«˜æç¼ºç‚¹çš„ç²¾åº¦ã€‚ä½†æ˜¯è¿™ç§æ–¹æ³•ä¼šæå¤§çš„å¢å¤§è¿ç®—é‡å’Œæˆæœ¬ã€‚ æ‰©å¤§ä½ç§»tï¼Œè¿™æ ·ä¼šé€ æˆä¸¤æ¬¡ç›¸æœºæ‹åˆ°çš„ç…§ç‰‡å¤–è§‚çš„å˜åŒ–è¾ƒå¤§ï¼Œå¾ˆéš¾è¿›è¡Œç‰¹å¾ç‚¹çš„åŒ¹é…é—®é¢˜ï¼Œéœ€è¦è¾ƒå°ä½ç§»ï¼Œä½†è¿™æ ·æ— ç–‘å¢å¤§äº†è¯¯å·®ï¼Œè¿™å°±æ˜¯ä¸‰è§’åŒ–çš„çŸ›ç›¾ã€‚ å®è·µæœ¬èŠ‚ä»£ç å’Œä¸ŠèŠ‚æœ‰å¾ˆå¤šä¸€æ ·çš„åœ°æ–¹ï¼Œå¦‚pose_estimation_2d2då’Œfind_feature_matcheså‡½æ•°ï¼Œæ­¤å¤„å°±ä¸åœ¨èµ˜è¿°ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647void triangulation( const vector&lt;KeyPoint&gt; &amp;keypoint_1, const vector&lt;KeyPoint&gt; &amp;keypoint_2, const std::vector&lt;DMatch&gt; &amp;matches, const Mat &amp;R, const Mat &amp;t, vector&lt;Point3d&gt; &amp;points) { Mat T1 = (Mat_&lt;float&gt;(3, 4) &lt;&lt; 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0); Mat T2 = (Mat_&lt;float&gt;(3, 4) &lt;&lt; R.at&lt;double&gt;(0, 0), R.at&lt;double&gt;(0, 1), R.at&lt;double&gt;(0, 2), t.at&lt;double&gt;(0, 0), R.at&lt;double&gt;(1, 0), R.at&lt;double&gt;(1, 1), R.at&lt;double&gt;(1, 2), t.at&lt;double&gt;(1, 0), R.at&lt;double&gt;(2, 0), R.at&lt;double&gt;(2, 1), R.at&lt;double&gt;(2, 2), t.at&lt;double&gt;(2, 0) ); Mat K = (Mat_&lt;double&gt;(3, 3) &lt;&lt; 520.9, 0, 325.1, 0, 521.0, 249.7, 0, 0, 1); vector&lt;Point2f&gt; pts_1, pts_2; for (DMatch m:matches) { // å°†åƒç´ åæ ‡è½¬æ¢è‡³ç›¸æœºåæ ‡ pts_1.push_back(pixel2cam(keypoint_1[m.queryIdx].pt, K)); pts_2.push_back(pixel2cam(keypoint_2[m.trainIdx].pt, K)); } Mat pts_4d; cv::triangulatePoints(T1, T2, pts_1, pts_2, pts_4d); // è½¬æ¢æˆéé½æ¬¡åæ ‡ for (int i = 0; i &lt; pts_4d.cols; i++) { Mat x = pts_4d.col(i); x /= x.at&lt;float&gt;(3, 0); // å½’ä¸€åŒ– Point3d p( x.at&lt;float&gt;(0, 0), x.at&lt;float&gt;(1, 0), x.at&lt;float&gt;(2, 0) ); points.push_back(p); }}/// ä½œå›¾ç”¨inline cv::Scalar get_color(float depth) { float up_th = 50, low_th = 10, th_range = up_th - low_th; if (depth &gt; up_th) depth = up_th; if (depth &lt; low_th) depth = low_th; return cv::Scalar(255 * depth / th_range, 0, 255 * (1 - depth / th_range));} ä¸‹é¢æ˜¯ç¨‹åºçš„ä¸»å‡½æ•°ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344int main(int argc, char **argv) { if (argc != 3) { cout &lt;&lt; &quot;usage: triangulation img1 img2&quot; &lt;&lt; endl; return 1; } //-- è¯»å–å›¾åƒ Mat img_1 = imread(argv[1], CV_LOAD_IMAGE_COLOR); Mat img_2 = imread(argv[2], CV_LOAD_IMAGE_COLOR); vector&lt;KeyPoint&gt; keypoints_1, keypoints_2; vector&lt;DMatch&gt; matches; find_feature_matches(img_1, img_2, keypoints_1, keypoints_2, matches); cout &lt;&lt; &quot;ä¸€å…±æ‰¾åˆ°äº†&quot; &lt;&lt; matches.size() &lt;&lt; &quot;ç»„åŒ¹é…ç‚¹&quot; &lt;&lt; endl; //-- ä¼°è®¡ä¸¤å¼ å›¾åƒé—´è¿åŠ¨ Mat R, t; pose_estimation_2d2d(keypoints_1, keypoints_2, matches, R, t); //-- ä¸‰è§’åŒ– vector&lt;Point3d&gt; points; triangulation(keypoints_1, keypoints_2, matches, R, t, points); //-- éªŒè¯ä¸‰è§’åŒ–ç‚¹ä¸ç‰¹å¾ç‚¹çš„é‡æŠ•å½±å…³ç³» Mat K = (Mat_&lt;double&gt;(3, 3) &lt;&lt; 520.9, 0, 325.1, 0, 521.0, 249.7, 0, 0, 1); Mat img1_plot = img_1.clone(); Mat img2_plot = img_2.clone(); for (int i = 0; i &lt; matches.size(); i++) { // ç¬¬ä¸€ä¸ªå›¾ float depth1 = points[i].z; cout &lt;&lt; &quot;depth: &quot; &lt;&lt; depth1 &lt;&lt; endl; Point2d pt1_cam = pixel2cam(keypoints_1[matches[i].queryIdx].pt, K); cv::circle(img1_plot, keypoints_1[matches[i].queryIdx].pt, 2, get_color(depth1), 2); // ç¬¬äºŒä¸ªå›¾ Mat pt2_trans = R * (Mat_&lt;double&gt;(3, 1) &lt;&lt; points[i].x, points[i].y, points[i].z) + t; float depth2 = pt2_trans.at&lt;double&gt;(2, 0); cv::circle(img2_plot, keypoints_2[matches[i].trainIdx].pt, 2, get_color(depth2), 2); } cv::imshow(&quot;img 1&quot;, img1_plot); cv::imshow(&quot;img 2&quot;, img2_plot); cv::waitKey(); return 0;}","link":"/2022/06/04/SLAM/Ch7-%E8%A7%86%E8%A7%89%E9%87%8C%E7%A8%8B%E8%AE%A1-%E7%AC%AC%E4%BA%8C%E9%83%A8%E5%88%86-%E5%AF%B9%E6%9E%81%E5%87%A0%E4%BD%95%E4%B8%8E%E4%B8%89%E8%A7%92%E6%B5%8B%E9%87%8F/"},{"title":"Ch3 Types of Learning","text":"hljs.initHighlightingOnLoad(); ä¸ŠèŠ‚è¯¾ä¸»è¦è®²è§£çš„æ˜¯äºŒå…ƒåˆ†ç±»çš„é—®é¢˜ï¼Œæœ¬èŠ‚è¯¾ä¸»è¦è®²è§£çš„æ˜¯æ›´å¤šçš„å­¦ä¹ çš„æ–¹å¼ï¼Œå…¶ä¸­æ ¹æ®è¾“å‡ºç©ºé—´æ¥åˆ†å¯æœ‰åˆ†ç±»ã€å›å½’å’Œç»“æ„åŒ–ï¼›æ ¹æ®yçš„æ ‡ç­¾æ¥åˆ†ï¼Œå¯ä»¥æœ‰ç›‘ç£ã€åŠç›‘ç£å’Œå¼ºåŒ–å­¦ä¹ ï¼›æ ¹æ®è¾“å…¥çš„æ•°æ®é‡æ¥åˆ†ï¼Œæœ‰æ‰¹é‡å­¦ä¹ ã€åœ¨çº¿å­¦ä¹ å’Œä¸»åŠ¨å­¦ä¹ ï¼›æ ¹æ®è¾“å…¥ç©ºé—´æ¥åˆ†æœ‰å…·ä½“æ•°æ®ã€åŸæ•°æ®å’ŒæŠ½è±¡æ•°æ®ã€‚ Learning with Different Output Space YMore Binary Classification Problems äºŒå…ƒåˆ†ç±»æ˜¯æœºå™¨å­¦ä¹ ä¸­ä¸€ä¸ªéå¸¸åŸºæœ¬çš„é—®é¢˜ï¼Œä»–æ˜¯æ‰€æœ‰é—®é¢˜çš„åŸºç¡€ã€‚ Multiclass Classification: Coin Recognition Problem ç›¸æ¯”äºbinary classification çš„è¾“å‡ºä¸º0 / 1 ï¼Œéƒ½åˆ†ç±»çš„è¾“å…¥ä¸º ä¸€ä¸ªç±»åˆ«æ•°ã€‚ç»å¸¸æ˜¯ä¸€ä¸ªintç±»å‹çš„æ•´æ•°ã€‚ è´©å–æœºå¯¹æŠ•å…¥é’±å¸è¿›è¡Œåˆ†ç±»ï¼Œå…¶ä¸»è¦æ˜¯é€šè¿‡é‡é‡å’Œå¤§å°æ¥å¯¹æŠ•å…¥çš„é’±è¿›è¡Œåˆ†ç±»ã€‚ ç‰¹æ®Šçš„binary classification å¯ä»¥çœ‹ä½œç±»åˆ«æ•°ä¸º2çš„éƒ½åˆ†ç±»çš„é—®é¢˜ã€‚ Multiclass Classification å°±æ˜¯ä¸€ç§å…¸å‹çš„æ¨¡å¼è¯†åˆ«é—®é¢˜ã€‚ Regression: Patient Recovery Prediction Problem å’Œå‰é¢çš„åˆ†ç±»çš„é—®é¢˜ä¸åŒï¼Œå›å½’çš„é—®é¢˜Regression çš„è¾“å‡ºæ‰©å±•åˆ°å®æ•°çš„èŒƒå›´ä¸Šäº†ã€‚ å…¶åœ¨ç»Ÿè®¡å­¦é¢†åŸŸå·²ç»å‘å±•äº†å¥½ä¹…ï¼Œç›®å‰ä¹Ÿå·²ç»æ¯”è¾ƒæˆç†Ÿã€‚å›å½’é—®é¢˜åœ¨æœºå™¨å­¦ä¹ é¢†åŸŸç›®å‰æ˜¯ç›¸å½“çš„é‡è¦çš„ä¸€ç±»é—®é¢˜ã€‚ Structured Learning: Sequence Tagging Problem å¦‚æœè¾“å…¥ä¸ºä¸€ä¸ªå•è¯ï¼Œè¾“å‡ºä¸ºå•è¯çš„è¯æ€§ï¼Œé‚£ä¹ˆè¿™ä¸ªé—®é¢˜å°±æ˜¯ä¸€ä¸ªç®€å•çš„å¤šåˆ†ç±»çš„é—®é¢˜ï¼› å¦‚æœè¾“å…¥ä¸ºä¸€ä¸ªå¥å­ï¼Œé‚£ä¹ˆè¾“å‡ºä¸ºéœ€è¦è¾¨è¯†çš„å¥å­ä¸­æ¯ä¸ªå•è¯çš„åœ¨å¥å­ä¸­çš„è¯æ€§ï¼Œé‚£ä¹ˆæœ¬é—®é¢˜å°±æ˜¯ä¸€ä¸ªç»“æ„åŒ–å­¦ä¹ çš„æ¨¡å‹(structured Learning) æ­¤æ—¶çš„è¾“å‡ºçš„é›†åˆä¸ºæ¯ä¸ªå¥å­çš„è¯æ€§çš„æ’åˆ—ï¼Œæ˜¯ä¸€ä¸ªè¾“å‡ºç±»åˆ«æ•°å¾ˆå¤§å¤šåˆ†ç±»çš„é—®é¢˜ã€‚ ä¸»è¦çš„ç»“æ„åŒ–çš„é—®é¢˜æœ‰ï¼ŒNLPå’Œèƒ†è›‹ç™½è´¨çš„ç»“æ„é¢„æµ‹ç­‰ã€‚ Learning with Different Data Label $y_n$Supervised: Coin Recognition Revisited å¯¹äºæœ‰ç›‘ç£å­¦ä¹ è€Œè¨€ï¼Œè¾“å…¥çš„ä¸€ä¸ª$x_n$éƒ½å¯¹ä¸€åº”ä¸€ä¸ª$y_n$ . Unsupervised: Coin Recognition without yn å³å›¾ä¸ºå…¸å‹çš„èšç±»é—®é¢˜ï¼Œç›¸æ¯”æœ‰ç›‘ç£çš„å­¦ä¹ è€Œè¨€ï¼Œæ— ç›‘ç£çš„å­¦ä¹ çš„ä¸»è¦çš„å›°éš¾åœ¨äºèšç±»æ•°çš„é€‰æ‹©ï¼Œå³å›¾å¾ˆå¯èƒ½å°±ç›´æ¥åˆ†æˆäº†ä¸‰ç±»ã€‚ å› æ­¤æ— ç›‘ç£å­¦ä¹ è¦æ¯”ç›‘ç£å­¦ä¹ æ›´åŠ çš„å›°éš¾ã€‚ å…¸å‹çš„å¼‚å¸¸æ£€æµ‹é—®é¢˜ å¯†åº¦åˆ†æé—®é¢˜ï¼šæ ¹æ®èšç±»çš„ç‚¹åˆ†å¸ƒçš„å¯†åº¦æ¥åˆ†ç±»ï¼› å¼‚å¸¸ç‚¹çš„æ£€æµ‹ï¼šæ ¹æ®åˆ†å¸ƒä¸­çš„ç¦»ç¾¤ç‚¹æ¥è¿›è¡Œåˆ†ç±»å’Œå¼‚å¸¸æ£€æµ‹ã€‚ unsupervised learning: diverse, with possibly very different performance goals Semi-supervised: Coin Recognition with Some $y_n$åŠç›‘ç£å­¦ä¹ ï¼šä»‹äºç›‘ç£å­¦ä¹ å’Œæ— ç›‘ç£å­¦ä¹ ä¹‹é—´ã€‚ å°†å·²ç»æ ‡æ³¨çš„ç‚¹ä½œä¸ºèšç±»çš„ä¸­çš„ä¸­å¿ƒï¼Œä¹‹å’Œé€šè¿‡ä¸æ–­åœ°è¿­ä»£æ¥è¿›è¡Œåˆ†ç±»æ“ä½œï¼› ä½†æ˜¯å­˜åœ¨çš„ä¸»è¦çš„é—®é¢˜ï¼šé¢„å…ˆæ ‡è®°çš„æœ€å¥½è¦æ¶µç›–æ‰€æœ‰æ ‡ç­¾ã€‚ semi-supervised learning: leverage unlabeled data to avoid â€˜expensiveâ€™ labeling ä¸»è¦é¢å‘æ ‡è®°æˆæœ¬å¾ˆè´µçš„æƒ…å†µã€‚ Reinforcement Learning ä¸€ç§å¾ˆä¸åŒä½†æ˜¯å¾ˆè‡ªç„¶çš„å­¦ä¹ çš„ç±»å‹ã€‚a â€˜very differentâ€™ but natural way of learning é€šè¿‡åé¦ˆfeedbackå’Œå¥–åŠ±rewardï¼Œæ¥å¯¹å…¶æ ‡ç­¾çš„è¿›è¡Œç›‘ç£ï¼Œæ˜¯ä¸€ç§ç®€æ´çš„ç›‘ç£æ–¹æ³•ï¼Œè€Œä¸æ˜¯ç›´æ¥è¿›è¡Œåé¦ˆã€‚åœ¨å¤šæ™ºèƒ½ä½“çš„è®­ç»ƒä¸­ä½¿ç”¨è¾ƒå¤šã€‚ è¿™é‡Œå¥–åŠ±å’Œæƒ©ç½šä¸æ˜¯ç»å¯¹çš„ï¼Œä¸åŒçš„actionå¯¹äºçš„å¥–åŠ±å€¼å¯èƒ½éƒ½ä¸ä¸€æ ·ã€‚ å¼ºåŒ–å­¦ä¹ ä¸»è¦åº”ç”¨åœ¨æ¸¸æˆæ£‹ç‰Œï¼Œæœ‰æ—¶ä¹Ÿä¼šç”¨åœ¨æ¨èç³»ç»Ÿä¸Šé¢ï¼Œè®­ç»ƒæ¨èå™¨å¼¹å‡ºå¹¿å‘Šçš„ç±»å‹å’Œæ—¶é—´ã€‚ reinforcement: learn with â€˜partial/implicit informationâ€™ (often sequentially) å…¶ä¸»è¦ç‰¹ç‚¹ä¸ºä¸æ˜¯ç›´æ¥åˆ¤æ–­è¾“å‡ºçš„ä¼˜åŠ£ï¼Œè€Œæ˜¯é€šè¿‡å…¶ä»–çš„è¾“å‡ºæ¥å®Œæˆçš„å¯¹å½“å‰è¾“å‡ºåŠ¨ä½œçš„åˆ¤æ–­ã€‚ ä¸¾ä¸ªä¾‹å­å°±æ˜¯ï¼Œå¯ä»¥ä½¿ç”¨å‰©ä½™å‡ æ­¥æ‰åˆ°ç›®çš„åœ°æ¥åˆ¤æ–­å½“å‰ä¸åŒç§»åŠ¨çš„å¥–åŠ±å€¼ã€‚ core tool: supervised learning ,ç›‘ç£å­¦ä¹ æ–¹æ³•æ˜¯æ ¸å¿ƒã€‚ Learning with Different Protocol $f (x_n, y_n)$Batch Learning: Coin Recognition Revisited æ¯æ¬¡ä»…ä»…ç»™ä¸€æ‰¹æ•°æ®ï¼Œæ¥è¿›è¡Œç›‘ç£å­¦ä¹ ã€‚ batch supervised multiclass classification: learn from all known data Online: Spam Filter that â€˜Improvesâ€™ å¢é‡å¼çš„å­¦ä¹ ï¼Œæˆ–è€…å«åšOnline learningï¼Œä¸»è¦æ˜¯å°†åƒåœ¾é‚®ä»¶ä¸€å°ä¸€å°çš„ç»™åˆ¤åˆ«å™¨æ¥åˆ¤æ–­ï¼Œè¿™æ ·å°±ä¼šä½¿å¾—æˆ‘ä»¬çš„å‡è®¾é›†é‡Œé¢çš„æ¨¡å‹g ä¸€ç§æ”¹å˜ã€‚ å¯¹äºå¼ºåŒ–å­¦ä¹ æ¥è¯´ï¼Œå…¶æ•°æ®çš„è¾“å…¥ä¹Ÿæ˜¯å¢é‡å¼çš„ï¼Œåœ¨çº¿çš„ã€‚ å¯¹äºPLAï¼Œè¿™æ ·çš„ç›‘ç£å­¦ä¹ çš„æ–¹æ³•å…¶å®ä¹Ÿå¯ä»¥æ”¹æˆåœ¨çº¿çš„å­¦ä¹ ã€‚ online: hypothesis â€˜improvesâ€™ through receiving data instances sequentially Active Learning: Learning by â€˜Askingâ€™ Batch ï¼šå¡«é¸­å¼æ•™è‚²ï¼› Onlineï¼šæ­£å¸¸çš„å­¦ä¹ æ–¹å¼ï¼› Active Learingï¼šæœºå™¨ä¸»åŠ¨å­¦ä¹ ï¼Œæ ¹æ®åé¢çš„æ ‡ç­¾$y_n$æ¥ä¸»åŠ¨é€‰æ‹©å¯¹åº”çš„$x_n$ã€‚é€šå¸¸ç”¨åœ¨labelå¾ˆéš¾å–å¾—çš„æƒ…å†µã€‚ active: improve hypothesis with fewer labels (hopefully) by asking questions strategically Learning with Different Input Space Xä¹‹å‰çš„åˆ†ç±»æ–¹æ³•å¤§éƒ¨åˆ†æ˜¯ä¾æ®è¾“å‡ºä¸åŒæ¥åˆ’åˆ†çš„ï¼Œä¸‹é¢æ¥ä»¥è¾“å…¥ä¸ºç•Œé™è¿›è¡Œåˆ†ç±»ã€‚ Concrete Featuresconcrete features: each dimension of $\\mathcal{X} \\in \\mathbb{R}^d$ represents â€˜sophisticated physical meaningâ€™ concrete featureså°±æ˜¯å¤„ç†è¿‡çš„æ¯”è¾ƒå…·ä½“çš„æ•°æ®ç‚¹ï¼Œå…¶æ¯ä¸€ä¸ªæ•°æ®çš„ç»´åº¦æœ‰æœ‰ä¸€å®šçš„ç‰©ç†ä¸Šçš„å«ä¹‰ã€‚ Raw FeaturesRaw Features äºæ˜¯ç›¸å¯¹åº”å°±æ˜¯æ²¡æœ‰å¤„ç†è¿‡çš„åŸå§‹æ•°æ®ï¼Œå…¶æ¯ä¸€ä¸ªç»´åº¦å¹¶æ²¡æœ‰å®åœ¨çš„ç‰©ç†æ„ä¹‰ã€‚ Raw Features å°±æ˜¯å¯¹åº”çš„å›¾ç‰‡çš„åƒç´ å€¼ï¼Œ256*256çš„çŸ©é˜µã€‚è¶Šrawå°±è¶ŠæŠ½è±¡å…¶å­¦ä¹ èµ·æ¥çš„å°±è¶Šå›°éš¾ã€‚ concrete features è¿™é‡Œå–å¯¹ç§°æ€§symmerty, å’Œå¯†åº¦densityæ¥ä»£è¡¨ã€‚ å›¾ç‰‡æ•°æ®pixelï¼Œè¯­éŸ³æ•°æ®signal å¯¹äºä¿¡æ¯çš„æå–ï¼Œå¦‚æœæ˜¯äººå·¥æ¥åšçš„ï¼Œå°±å«åšç‰¹å¾å·¥ç¨‹ã€‚ æ·±åº¦å­¦ä¹ å°±æ˜¯æœºå™¨è‡ªåŠ¨æ¥å­¦ä¹ ã€‚ Abstract Features Abstract Featuresï¼šä¸»è¦æ˜¯ç»™äº†æœ€åŸå§‹çš„IDç¼–å·ï¼Œç­‰éå¸¸æŠ½è±¡çš„æ•°æ®ã€‚ éœ€è¦æ›´å¤šçš„æŠ½è±¡å’Œé‡æ„æ“ä½œã€‚ æ€»ç»“ï¼š","link":"/2022/06/04/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%9F%B3/ch3-Types-of-Learning/"},{"title":"G2O æ›²çº¿æ‹Ÿåˆ","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡è¯¦ç»†çš„ä»‹ç»äº†g2oåº“è¿›è¡Œä¼˜åŒ–çš„ä¸€äº›æ¨¡æ¿ï¼Œå¹¶æä¾›ä¸€ä¸ªæ›²çº¿æ‹Ÿåˆçš„ä¾‹å­æ¥åŠ æ·±å¯¹g2oçš„ä½¿ç”¨ï¼Œä¸ºä¹‹åçš„PnPå’ŒICPåšå‡†å¤‡ï¼Œä¹‹åä¼šç»“åˆç¬¬åç« è¯¦ç»†çš„ä»‹ç»å¹¶è¿›é˜¶ã€‚ åŸºæœ¬æ¦‚å¿µéçº¿æ€§çš„æœ€å°äºŒä¹˜ä¼˜åŒ–è¿‡ç¨‹ä¸­ï¼Œæ˜¯ç”±å¾ˆå¤šçš„è¯¯å·®é¡¹ç»„æˆï¼Œä½†æ˜¯æˆ‘ä»¬å°šä¸æ¸…æ¥šè¿™äº›è¯¯å·®é¡¹ä¹‹é—´çš„ä¸€äº›å…³ç³»ï¼Œæ¯”å¦‚æœ‰äº›ä¼˜åŒ–å˜é‡è·¨è¶Šäº†å¤šä¸ªè¯¯å·®é¡¹ï¼Œäºæ˜¯å°±æœ‰äº†å›¾ä¼˜åŒ–ã€‚ å›¾ä¼˜åŒ–çš„é¡¶ç‚¹è¡¨ç¤ºä¼˜åŒ–å˜é‡ï¼Œè¾¹ä»£è¡¨è¯¯å·®é¡¹ã€‚äºæ˜¯å°±å°†æˆ‘ä»¬çš„å¦‚æ„æ¶æˆä¸€ä¸ªå›¾ï¼Œå¹¶ä¸”è¿™ä¸ªå›¾å’Œæˆ‘ä»¬çš„æœ€å°äºŒä¹˜ä¼˜åŒ–å‡½æ•°æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚ ä¸‹å›¾æ‰€ç¤ºï¼Œä¸‰è§’å½¢ä»£è¡¨ç›¸æœºçš„ä½å§¿ç»“ç‚¹ï¼Œåœ†å½¢ä»£è¡¨è·¯æ ‡ç‚¹ï¼Œå®ƒä»¬æ„å»ºæˆäº†å›¾ä¼˜åŒ–çš„é¡¶ç‚¹ã€‚å¯¹äºè¾¹æ¥è¯´ï¼Œå®çº¿ä»£è¡¨ç›¸æœºçš„è¿åŠ¨æ¨¡å‹ï¼Œè™šçº¿ä»£è¡¨è§‚æµ‹æ–¹ç¨‹ã€‚ å¯¹äºæ›²çº¿çš„æ‹Ÿåˆè¿‡ç¨‹ï¼Œæ•´ä¸ªé—®é¢˜ç”±äºåªæœ‰ä¸€ä¸ªè¯¯å·®é¡¹çš„è¡¨è¾¾å¼ï¼Œæ•´ä¸ªæ¨¡å‹çš„ä¼˜åŒ–å‚æ•°å°±åªæœ‰ä¸€ä¸ªå‘é‡$a,b,c$ ï¼Œäºæ˜¯è¯¯å·®é¡¹åªæœ‰ä¸€æ¡è¾¹ï¼Œå³ä¸€ä¸ªä¸€å…ƒè¾¹ã€‚ G2Oçš„ä½¿ç”¨æ­¥éª¤å¤§æ¦‚ä¸ºï¼š å®šä¹‰é¡¶ç‚¹å’Œè¾¹çš„ç±»å‹ï¼› æ„å»ºå›¾ï¼› é€‰æ‹©ä¼˜åŒ–ç®—æ³•ï¼› è°ƒç”¨g2o è¿›è¡Œä¼˜åŒ–ï¼Œè¿”å›ç»“æœã€‚ è¿™é‡Œè¿ç”¨G2Oæ±‚è§£é—®é¢˜è¯¥ä¼˜åŒ–é—®é¢˜ï¼š G2Oé¡¶ç‚¹çš„å·¥ä½œå†…å®¹(ä¼˜åŒ–å‚æ•°ä¸€èˆ¬æ”¾åœ¨å›¾çš„é¡¶ç‚¹ä¸Šé¢)ï¼š è®¾ç½®ä¼˜åŒ–å‚æ•°çš„åˆå§‹å€¼ï¼› æ›´æ–°ä¼˜åŒ–å‚æ•°$x:=x+\\Delta x$ï¼› G2Oè¾¹çš„å·¥ä½œå†…å®¹(è§‚æµ‹æ•°æ®æ„æˆäº†è¾¹)ï¼š è·å–ç›¸å…³çš„è§‚æµ‹æ•°æ®ï¼Œä»¥åŠå’Œæ¨¡å‹ç›¸å…³çš„å·²çŸ¥æ•°æ®ï¼› ä»¥PnPä¸ºä¾‹ï¼ŒåŒ¹é…çš„ç‰¹å¾ç‚¹å°±æ˜¯è§‚æµ‹æ•°æ®ï¼Œè€Œç›¸æœºå†…å‚å°±æ˜¯å’Œæ¨¡å‹ç›¸å…³çš„æ•°æ®ã€‚ æ„å»ºè¯¯å·®å‡½æ•°ï¼› æ„å»ºé›…å¯æ¯”çŸ©é˜µï¼› æºç ç²¾è¯»èŠ‚ç‚¹çš„ä»£ç è§£æé¦–å…ˆæ˜¯å…³äºåŸºæœ¬æ¨¡æ¿ç±»çš„æ„å»ºg2o::BaseVertex&lt;3, Eigen::Vector3d&gt;è¿™é‡Œæ˜¯æºç ä¸­çš„æ³¨é‡Šã€‚ æ¨¡æ¿ç¬¬ä¸€ä¸ªå‚æ•°Dæ˜¯éœ€è¦ä¼˜åŒ–çŸ©é˜µç»´æ•°çš„æœ€å°ï¼› æ¨¡æ¿ç¬¬äºŒä¸ªå‚æ•°æ˜¯Tè¦ä¼˜åŒ–å˜é‡çš„ç±»å‹ï¼Œè¿™é‡Œåœ¨ä»£ç é‡Œé¢çš„_estimateçš„ç±»å‹å’Œè¿™ä¸ªTæ˜¯åŒä¸€ç±»å‹çš„ã€‚ 123456789* Templatized BaseVertex * D : minimal dimension of the vertex, e.g., 3 for rotation in 3D. -1 means dynamically assigned at runtime. * T : internal type to represent the estimate, e.g., Quaternion for rotation in 3D */ template &lt;int D, typename T&gt; class BaseVertex : public OptimizableGraph::Vertex typedef T EstimateType;EstimateType _estimate; ä¸‹é¢ï¼Œé€šè¿‡ç»§æ‰¿BaseVertexåŸºç±»æ¥å®šä¹‰è¾¹å‘é‡çš„è¡¨è¾¾ã€‚ EIGEN_MAKE_ALIGNED_OPERATOR_NEW ä¸»è¦å£°æ˜äº†Eigençš„å†…å­˜ç®¡ç†ï¼Œå…¶ä¸»è¦æ˜¯èµ‹å€¼Eigenè¿›è¡Œæ•°æ®å‚¨å­˜çš„ã€‚ setToOriginImpl()ï¼šè®¾ç½®åˆå§‹åŒ–ï¼Œè¿™é‡Œ_estimate å°±æ˜¯åœ¨æ¨¡æ¿é‡Œè¯´å¦‚çš„é‚£ä¸ªEigen::Vector3dçš„æ“ä½œï¼Œå› æ­¤_estimate &lt;&lt; 0, 0, 0;å°±æ˜¯Eigen::Vector3dçš„è¾“å…¥å½¢å¼ã€‚ void oplusImpl(const double *update)ï¼šè¿™é‡Œçš„updateå…¶å®å°±æ˜¯æ•°ç»„çš„å½¢å¼ï¼Œä¸‹é¢é¦–å…ˆå°†å…¶è½¬åŒ–ä¸ºEigenç±»å‹ï¼Œå¹¶åŠ åˆ°_estimateä¸Šé¢ã€‚ ä¸‹é¢ä¸ºå®Œæ•´çš„å®šä¹‰èŠ‚ç‚¹çš„ä»£ç ï¼š 1234567891011121314151617181920// æ›²çº¿æ¨¡å‹çš„é¡¶ç‚¹ï¼Œæ¨¡æ¿å‚æ•°ï¼šä¼˜åŒ–å˜é‡ç»´åº¦å’Œæ•°æ®ç±»å‹class CurveFittingVertex : public g2o::BaseVertex&lt;3, Eigen::Vector3d&gt;{public: EIGEN_MAKE_ALIGNED_OPERATOR_NEW // é‡ç½® virtual void setToOriginImpl() override { _estimate &lt;&lt; 0, 0, 0; } // æ›´æ–° virtual void oplusImpl(const double *update) override { _estimate += Eigen::Vector3d(update); } // å­˜ç›˜å’Œè¯»ç›˜ï¼šç•™ç©º virtual bool read(istream &amp;in) {} virtual bool write(ostream &amp;out) const {} }; è¾¹çš„ä»£ç è§£æä¹‹åï¼Œæ¥çœ‹è¾¹çš„å»ºç«‹ï¼Œè¿™é‡Œæˆ‘ä»¬çš„ä¼˜åŒ–å˜é‡åªæœ‰ä¸€ä¸ªåŠåªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œäºæ˜¯æˆ‘ä»¬å»ºç«‹çš„å•å…ƒè¾¹çš„ï¼Œç»§æ‰¿äº†å•å…ƒè¾¹BaseUnaryEdgeçš„åŸºç±»ã€‚ è¿™é‡Œçš„Measurementå®é™…ä¸Šå°±æ˜¯çœŸå®å€¼çš„yå€¼ã€‚ è€Œå¯¹åº”çš„xçš„å€¼ï¼Œåˆ™è¦é€šè¿‡æ„é€ å‡½æ•°åˆå§‹åŒ–ã€‚ 1234567891011template &lt;int D, typename E, typename VertexXi&gt;class BaseUnaryEdge : public BaseEdge&lt;D,E&gt;{ public: static const int Dimension = BaseEdge&lt;D, E&gt;::Dimension; typedef typename BaseEdge&lt;D,E&gt;::Measurement Measurement; typedef VertexXi VertexXiType; typedef typename Eigen::Matrix&lt;number_t, D, VertexXiType::Dimension, D==1?Eigen::RowMajor:Eigen::ColMajor&gt;::AlignedMapType JacobianXiOplusType; typedef typename BaseEdge&lt;D,E&gt;::ErrorVector ErrorVector; typedef typename BaseEdge&lt;D,E&gt;::InformationType InformationType;} ä¸‹é¢æ¥åˆ†ææ›²çº¿æ‹Ÿåˆçš„ä»£ç ï¼Œèµ·ä¸»è¦æ˜¯ç»§æ‰¿çš„å•å…ƒè¾¹çš„ä»£ç ã€‚ é¦–å…ˆï¼Œæ¥åˆ†æçš„æ˜¯æ„é€ å‡½æ•°ï¼Œä»¥åŠè§‚æµ‹æ ·æœ¬ç‚¹(x,y)æ˜¯å¦‚ä½•è¾“å…¥åˆ°ç¨‹åºé‡Œé¢å»çš„ã€‚ 12const CurveFittingVertex *v = static_cast&lt;const CurveFittingVertex *&gt; (_vertices[0]);const Eigen::Vector3d abc = v-&gt;estimate(); CurveFittingEdge(double x) : BaseUnaryEdge(), _x(x) {}é€šè¿‡æ„é€ å‡½æ•°åˆå§‹åŒ–è§‚æµ‹æ•°æ®çš„xå€¼ï¼› const Eigen::Vector3d abc = v-&gt;estimate(); è¿™é‡Œçš„væ˜¯åˆšæ‰å®šä¹‰çš„èŠ‚ç‚¹å‚æ•°ã€‚è¿™æ ·å°±å¯ä»¥å°†èŠ‚ç‚¹é‡Œé¢çš„å‚æ•°è¾“è¿›è¾¹é‡Œé¢ï¼Œæ„å»ºäº†è¿æ¥ç‚¹å’Œè¾¹çš„æ¡¥æ¢ã€‚ 123typedef E Measurement;typedef typename internal::BaseEdgeTraits&lt;D&gt;::ErrorVector ErrorVector;typedef typename internal::BaseEdgeTraits&lt;D&gt;::InformationType InformationType ä»¥ä¸Šä¸ºç›¸å…³å˜é‡çš„æ¨¡æ¿å‚æ•°å®šä¹‰ï¼Œè¿™é‡ŒEä¸ºå®šä¹‰çš„æ¨¡æ¿çš„å˜é‡ï¼Œå› æ­¤å¯¹åº”çš„Measurementä¹Ÿå°±æ˜¯Eç±»å‹çš„ã€‚ edge-&gt;setMeasurement(y_data[i])ï¼šä¸»è¦çš„å·¥ä½œæ˜¯è¾“å…¥è§‚æµ‹é‡çš„yå€¼çš„å‚æ•°ã€‚è¿™éƒ¨åˆ†æ˜¯ç±»çš„å¤–é¢å®šä¹‰çš„ï¼Œåé¢ä¼šè¯¦ç»†çš„è§£é‡Šã€‚ æ³¨æ„ï¼Œåœ¨ç±»é‡Œæœ‰ä¸‹æ»‘çº¿_xxxçš„å˜é‡éƒ½æ˜¯å…¶å†…éƒ¨çš„å˜é‡ï¼Œæœ‰çš„æ˜¯ç»§æ‰¿åŸºç±»çš„ï¼Œæœ‰çš„å°±æ˜¯è‡ªå·±çš„æ–°å®šä¹‰çš„å˜é‡ï¼Œå…¶ä¸ºä¿æŠ¤ç±»å‹çš„ã€‚ 1CurveFittingEdge(double x) : BaseUnaryEdge(), _x(x) {} ä¹‹åï¼Œæ¥å®šä¹‰æŸå¤±ï¼Œå¹¶è®¡ç®—JacobiçŸ©é˜µã€‚ 123456// è®¡ç®—æ›²çº¿æ¨¡å‹è¯¯å·®virtual void computeError() override { const CurveFittingVertex *v = static_cast&lt;const CurveFittingVertex *&gt; (_vertices[0]); const Eigen::Vector3d abc = v-&gt;estimate(); _error(0, 0) = _measurement - std::exp(abc(0, 0) * _x * _x + abc(1, 0) * _x + abc(2, 0));} ä¸‹é¢ä»£ç  int Dimensionä»£è¡¨çš„çŸ©é˜µçš„ç»´åº¦ï¼› ErrorVectorå¯¹äºçš„ç±»å‹ä¸ºEigen::Matrixï¼Œè¿™é‡Œå…¶ä¸ºä¸€ä¸ª$D\\times1$ çš„çŸ©é˜µï¼Œè¿™é‡Œæœ‰ä¸Šé¢çš„ä»£ç å¯å¾—ï¼Œ$D=1$ï¼Œäºæ˜¯è¿™é‡Œçš„_errorå°±æ˜¯ä¸€ä¸ª$1\\times1$çš„çŸ©é˜µã€‚ 12345678910111213class BaseEdge : public OptimizableGraph::Edge{ public: static constexpr int Dimension = internal::BaseEdgeTraits&lt;D&gt;::Dimension; typedef E Measurement; typedef typename internal::BaseEdgeTraits&lt;D&gt;::ErrorVector ErrorVector; typedef typename internal::BaseEdgeTraits&lt;D&gt;::InformationType InformationType;}struct BaseEdgeTraits { static constexpr int Dimension = D; typedef Eigen::Matrix&lt;number_t, D, 1, Eigen::ColMajor&gt; ErrorVector; typedef Eigen::Matrix&lt;number_t, D, D, Eigen::ColMajor&gt; InformationType; }; ç„¶åè®¡ç®—JacobiçŸ©é˜µå¦‚ä¸‹ï¼š 123456789// è®¡ç®—é›…å¯æ¯”çŸ©é˜µvirtual void linearizeOplus() override { const CurveFittingVertex *v = static_cast&lt;const CurveFittingVertex *&gt; (_vertices[0]); const Eigen::Vector3d abc = v-&gt;estimate(); double y = exp(abc[0] * _x * _x + abc[1] * _x + abc[2]); _jacobianOplusXi[0] = -_x * _x * y; _jacobianOplusXi[1] = -_x * y; _jacobianOplusXi[2] = -y;} _vertices[0]ä¸ºCurveFittingVertexç±»å‹ï¼Œå…¶å®å°±æ˜¯å…³è”çš„é¡¶ç‚¹çš„æ•°å€¼&amp;æŒ‡é’ˆï¼Œå› ä¸ºå°±åªæœ‰ä¸€ä¸ªé¡¶ç‚¹ï¼Œäºæ˜¯ç´¢å¼•å°±ä¸º0. 1class CurveFittingEdge : public g2o::BaseUnaryEdge&lt;1, double, CurveFittingVertex&gt; { ä¸‹é¢å°±æ˜¯æ±‚JacobiçŸ©é˜µï¼Œå…¶ä¸»è¦çš„ç±»å‹ä¸ºJacobianXiOplusTypeï¼š 123typedef typename Eigen::Matrix&lt;number_t, D, VertexXiType::Dimension, D==1?Eigen::RowMajor:Eigen::ColMajor&gt;::AlignedMapType JacobianXiOplusType;// æ ¹æ®å…¶æ˜¯å¦æ˜¯1æ¥è¿›è¡Œåˆ’åˆ†JacobianXiOplusType _jacobianOplusXi; å…¶ç»´åº¦ä¸º$D\\times \\text{Vertex_dim}$ å³ä¸ºD*é¡¶ç‚¹çš„ç»´åº¦ï¼Œå†è¿™è¾¹æ˜¯$1\\times3$. è€Œä¸”JacobiçŸ©é˜µçš„æ±‚å¯¼çš„å¯¹è±¡æ˜¯è¯¯å·®å‡½æ•°ï¼Œä¸æ˜¯åŸå‡½æ•°ï¼Œå› æ­¤ä¼šæœ‰è´Ÿå·ã€‚ ä¸‹é¢ä¸ºå®Œæ•´çš„æ‹Ÿåˆéƒ¨åˆ†è¾¹çš„ä»£ç ï¼š 123456789101112131415161718192021222324252627282930class CurveFittingEdge : public g2o::BaseUnaryEdge&lt;1, double, CurveFittingVertex&gt; {public: EIGEN_MAKE_ALIGNED_OPERATOR_NEW CurveFittingEdge(double x) : BaseUnaryEdge(), _x(x) {} // è®¡ç®—æ›²çº¿æ¨¡å‹è¯¯å·® virtual void computeError() override { const CurveFittingVertex *v = static_cast&lt;const CurveFittingVertex *&gt; (_vertices[0]); const Eigen::Vector3d abc = v-&gt;estimate(); _error(0, 0) = _measurement - std::exp(abc(0, 0) * _x * _x + abc(1, 0) * _x + abc(2, 0)); } // è®¡ç®—é›…å¯æ¯”çŸ©é˜µ virtual void linearizeOplus() override { const CurveFittingVertex *v = static_cast&lt;const CurveFittingVertex *&gt; (_vertices[0]); const Eigen::Vector3d abc = v-&gt;estimate(); double y = exp(abc[0] * _x * _x + abc[1] * _x + abc[2]); _jacobianOplusXi[0] = -_x * _x * y; _jacobianOplusXi[1] = -_x * y; _jacobianOplusXi[2] = -y; } virtual bool read(istream &amp;in) {} virtual bool write(ostream &amp;out) const {}public: double _x; // x å€¼ï¼Œ y å€¼ä¸º _measurement}; åˆå§‹åŒ–ä¼°è®¡æ•°æ®12345678910111213double ar = 1.0, br = 2.0, cr = 1.0; // çœŸå®å‚æ•°å€¼double ae = 2.0, be = -1.0, ce = 5.0; // ä¼°è®¡å‚æ•°å€¼int N = 100; // æ•°æ®ç‚¹double w_sigma = 1.0; // å™ªå£°Sigmaå€¼double inv_sigma = 1.0 / w_sigma;cv::RNG rng; // OpenCVéšæœºæ•°äº§ç”Ÿå™¨vector&lt;double&gt; x_data, y_data; // æ•°æ®for (int i = 0; i &lt; N; i++) { double x = i / 100.0; x_data.push_back(x); y_data.push_back(exp(ar * x * x + br * x + cr) + rng.gaussian(w_sigma * w_sigma));} è¿™éƒ¨åˆ†ä¸»è¦ä½¿ç”¨çš„æ˜¯OpenCVçš„éšæœºæ•°äº§ç”Ÿå™¨æ¥ç”Ÿæˆéœ€è¦çš„å‚æ•°ï¼› è¿™é‡Œå†åŸæ¥æ ‡å‡†å‚æ•°çš„åŸºç¡€ä¸ŠåŠ å…¥äº†éšæœºå™ªå£° æ„å»ºå›¾ä¼˜åŒ–çš„å‚æ•° å®šä¹‰æ±‚è§£å™¨ï¼Œå…ˆæ˜¯å®šä¹‰ä¼˜åŒ–å˜é‡çš„BlockSolverTraitsã€‚å…¶ä¸­çš„ç¬¬ä¸€çš„æ¨¡æ¿å‚æ•°ä»£è¡¨çš„æ˜¯ä¼˜åŒ–å˜é‡çš„ä¸ªæ•°ï¼Œç¬¬äºŒä¸ªæ˜¯è§‚æµ‹å˜é‡yçš„ç»´åº¦ï¼Œä¹Ÿå¯ä»¥æ˜¯è¯¯å·®çš„ç»´åº¦ã€‚ ç„¶åå®šä¹‰æ±‚è§£å¢é‡æ–¹ç¨‹çš„æ±‚è§£å™¨LinearSolverDense 12345// ==============æ„å»ºå›¾ä¼˜åŒ–ï¼Œè®¾å®šG2O=================typedef g2o::BlockSolver&lt;g2o::BlockSolverTraits&lt;3, 1&gt;&gt; BlockSolverType;// æ¯ä¸ªè¯¯å·®é¡¹ä¼˜åŒ–å˜é‡ç»´åº¦ä¸º3ï¼Œè¯¯å·®å€¼ç»´åº¦ä¸º1typedef g2o::LinearSolverDense&lt;BlockSolverType::PoseMatrixType&gt; LinearSolverType;// çº¿æ€§æ–¹ç¨‹æ±‚è§£å™¨ å®šä¹‰ä¼˜åŒ–æ–¹æ³•ï¼Œè¿™é‡Œçš„solverä»£è¡¨çš„æ˜¯æ ¹æ®çš„æ–¹æ³•ï¼ŒåŒ…æ‹¬G-Nã€L-Mç­‰ã€‚ ç„¶åæ„å»ºå›¾æ¨¡å‹ SparseOptimizerï¼Œå°†ä¹‹å‰è®¾è®¡æ±‚è§£å™¨çš„å¯¼å…¥åˆ°å›¾æ¨¡å‹ä¸­ï¼Œå¹¶ä¸”æ‰“å¼€è°ƒè¯•è¾“å‡ºã€‚ 12345678// æ¢¯åº¦ä¸‹é™æ–¹æ³•ï¼Œå¯ä»¥ä»GNï¼ŒLMï¼ŒDogLeg ä¸­é€‰æ‹©auto solver = new g2o::OptimizationAlgorithmLevenberg( g2o::make_unique&lt;BlockSolverType&gt;(g2o::make_unique&lt;LinearSolverType&gt;()));g2o::SparseOptimizer optimizer;optimizer.setAlgorithm(solver); // è®¾ç½®æ±‚è§£å™¨optimizer.setVerbose(true); // æ‰“å¼€è°ƒè¯•è¾“å‡º åˆ›å»ºé¡¶ç‚¹ï¼Œå³éœ€è¦ä¼˜åŒ–çš„å˜é‡ï¼Œä¹‹åè®¾è®¡åˆå§‹å€¼ã€‚ setEstimate ä¸ºè®¾ç½®ä¼˜åŒ–å˜é‡åˆå§‹å€¼ï¼Œè¿™ä¸ªå‡½æ•°ä¼°è®¡æ˜¯åŸºç±»é‡Œé¢è‡ªå¸¦çš„ï¼ŒèŠ‚ç‚¹ç±»ç›´æ¥ç»§æ‰¿çš„ã€‚ setIdè®¾ç½®èŠ‚ç‚¹çš„IDå€¼ï¼Œä¹‹åå°†æ­¤èŠ‚ç‚¹åŠ å…¥åˆ°å¯¹äºçš„å›¾ä¸­optimizer.addVertex(v);ã€‚ å› ä¸ºè¿™é‡Œå°±ä»…ä»…æœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°±åŠ å…¥ä¸€æ¬¡å³å¯ã€‚ 12345// å¾€å›¾ä¸­å¢åŠ é¡¶ç‚¹CurveFittingVertex *v = new CurveFittingVertex();v-&gt;setEstimate(Eigen::Vector3d(ae, be, ce));v-&gt;setId(0);optimizer.addVertex(v); åˆ›å»ºè¾¹çš„å¯¹è±¡new CurveFittingEdge(x_data[i])ï¼Œæ„é€ å‡½æ•°æ˜¯éœ€è¦å°†xå€¼ä¼ è¿›å»ã€‚ ç„¶åç»™æ¯æ¡è¾¹è®¾è®¡ä¸€ä¸ªIDå€¼ï¼ŒsetIdã€‚ setVertexè®¾ç½®è¾¹æŒ‡å‘çš„ç‚¹ï¼Œè¿™é‡Œé¢çš„0ä¸æ˜¯IDï¼Œæ˜¯ç´¢å¼•ã€‚æœ¬ä¾‹å­æ˜¯å•å…ƒçš„è¾¹çš„æƒ…å†µï¼Œå› æ­¤å°±ä¸€ä¸ªè¾¹å°±è¿æ¥ä¸€ä¸ªç‚¹ï¼Œå¦‚æœæ˜¯åŒèŠ‚ç‚¹çš„è¾¹ï¼Œé‚£å°±æœ‰ä¸¤ä¸ªsetVertex(0,v1)å’ŒsetVertex(1,v2)ã€‚ æ¥ä¸‹æ¥setMeasurementæ˜¯å°†è§‚æµ‹å€¼ä¹Ÿè¾“å…¥è¿›å»ã€‚ setInformationè®¡ç®—è¯¯å·®æ—¶æˆ‘ä»¬ä½¿ç”¨çš„æ—¶æœ€å°äºŒä¹˜æ³•ï¼Œéœ€è¦åæ–¹å·®çŸ©é˜µ(ä¿¡æ¯çŸ©é˜µ)ã€‚ æœ€åå°†è¾¹åŠ å…¥åˆ°å›¾æ¨¡å‹ä¸­ï¼Œè¿™é‡Œæ¯ä¸ªè§‚æµ‹å˜é‡å’Œè§‚æµ‹å€¼ç»„æˆçš„æ ·æœ¬éƒ½æ˜¯ä¸€æ¡è¾¹ã€‚ 123456789// å¾€å›¾ä¸­å¢åŠ è¾¹for (int i = 0; i &lt; N; i++) { CurveFittingEdge *edge = new CurveFittingEdge(x_data[i]); edge-&gt;setId(i); edge-&gt;setVertex(0, v); // è®¾ç½®è¿æ¥çš„é¡¶ç‚¹ edge-&gt;setMeasurement(y_data[i]); // è§‚æµ‹æ•°å€¼ edge-&gt;setInformation(Eigen::Matrix&lt;double, 1, 1&gt;::Identity() * 1 / (w_sigma * w_sigma)); // ä¿¡æ¯çŸ©é˜µï¼šåæ–¹å·®çŸ©é˜µä¹‹é€† optimizer.addEdge(edge);} æ‰§è¡Œä¼˜åŒ–123456789101112// æ‰§è¡Œä¼˜åŒ–cout &lt;&lt; &quot;start optimization&quot; &lt;&lt; endl;chrono::steady_clock::time_point t1 = chrono::steady_clock::now();optimizer.initializeOptimization();optimizer.optimize(10);chrono::steady_clock::time_point t2 = chrono::steady_clock::now();chrono::duration&lt;double&gt; time_used = chrono::duration_cast&lt;chrono::duration&lt;double&gt;&gt;(t2 - t1);cout &lt;&lt; &quot;solve time cost = &quot; &lt;&lt; time_used.count() &lt;&lt; &quot; seconds. &quot; &lt;&lt; endl;// è¾“å‡ºä¼˜åŒ–å€¼Eigen::Vector3d abc_estimate = v-&gt;estimate();cout &lt;&lt; &quot;estimated model: &quot; &lt;&lt; abc_estimate.transpose() &lt;&lt; endl; optimizer.initializeOptimization();åˆå§‹åŒ–å›¾ã€‚ optimizer.optimize(10);è®¾ç½®ä¼˜åŒ–æ­¥æ•°ã€‚ Eigen::Vector3d abc_estimate = v-&gt;estimate();è¿›è¡Œè¾“å‡ºã€‚","link":"/2022/06/07/SLAM/G2O-%E6%9B%B2%E7%BA%BF%E6%8B%9F%E5%90%88/"},{"title":"Ch7 è§†è§‰é‡Œç¨‹è®¡ ç¬¬ä¸‰éƒ¨åˆ† PnP","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦ä»‹ç»çš„æ˜¯PnPçš„ç›¸å…³çš„ç®—æ³•åŠå…¶å®è·µï¼ŒPnPçš„å…¨ç§°ä¸ºPerspective-n-Point æ˜¯æ±‚è§£3Dåˆ°2Dç‚¹å¯¹è¿åŠ¨çš„æ–¹æ³•ï¼Œæ±‚è§£çš„æ–¹æ³•ä¸€ç§æ˜¯é€šè¿‡è§£æ–¹ç¨‹ï¼Œå¦ä¸€ç§æ˜¯å°†ä½å§¿ä½œä¸ºä¼˜åŒ–å˜é‡æ¥æœ€å°åŒ–é‡æŠ•å½±è¯¯å·®ã€‚å®è·µéƒ¨åˆ†ä¸»è¦åˆ†ä¸ºä½¿ç”¨çš„OpenCVè‡ªå¸¦çš„æ±‚è§£PnPçš„æ–¹æ³•ï¼Œæ‰‹å†™é«˜æ–¯ç‰›é¡¿æ³•å·²ç»ä½¿ç”¨G2Oæ–¹æ³•ä¸‰ä¸ªéƒ¨åˆ†ã€‚ æ¦‚è¿°PnPçš„å…¨ç§°ä¸ºPerspective-n-Point æ˜¯æ±‚è§£3Dåˆ°2Dç‚¹å¯¹è¿åŠ¨çš„æ–¹æ³•ï¼Œå…¶æè¿°äº†å·²çŸ¥3Dç©ºé—´ç‚¹å’Œå…¶ä½ç½®æ—¶ï¼Œå¦‚ä½•ä½å§¿ä¼°è®¡çš„å§¿æ€ï¼Œå³ç›¸æœºçš„å¤–å‚ã€‚ å¯¹äº2D-2Dçš„æ–¹æ³•è€Œè¨€ï¼Œä¸»è¦æ˜¯ä¸€èˆ¬éœ€è¦å…«ä¸ªç‚¹æ±‚è§£ï¼Œä¹Ÿå­˜åœ¨åˆå§‹åŒ–ã€çº¯æ—‹è½¬å’Œå°ºåº¦çš„é—®é¢˜ã€‚è€Œå¯¹äºç‰¹å¾ç‚¹çš„3Dä½ç½®å·²çŸ¥ï¼Œé‚£ä¹ˆæœ€å°‘ä¹Ÿéœ€è¦3ä¸ªç‚¹ç‚¹å¯¹å°±å¯ä»¥å¯¹ç›¸æœºçš„å§¿æ€è¿›è¡Œä¼°è®¡ã€‚ è¿™é‡Œç‰¹å¾ç‚¹çš„3Dä½ç½®å¯ä»¥ç”±ä¸‰è§’åŒ–æˆ–RGBDç›¸æœºçš„æ·±åº¦å›¾æ¥ç¡®å®šã€‚å› æ­¤å¯¹äºåŒç›®æˆ–RGBDç›¸æœºæ¥è¯´ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨PnPæ³•æ¥ä¼°è®¡ï¼Œå¯¹äºå•ç›®ç›¸æœºè€Œè¨€ï¼Œåˆ™éœ€è¦ä½¿ç”¨ä¸‰è§’æ³•å’Œå¯¹æå‡ ä½•å…ˆè¿›è¡Œåˆå§‹åŒ–æ“ä½œã€‚ 3D-2Dçš„æ–¹æ³•ä¸éœ€è¦å¯¹æçº¦æŸï¼Œå¯ä»¥ä½¿ç”¨å¾ˆå°‘çš„ç‚¹å°±å¯ä»¥è¿›è¡ŒåŒ¹é…ï¼Œæ˜¯ä¸€ç§é‡è¦çš„ä½å§¿ä¼°è®¡æ–¹æ³•ã€‚ åœ¨è§£æ³•ä¸Šï¼Œä¸»è¦åˆ†æˆä»£æ•°è§£æ³•å’Œä¼˜åŒ–è§£æ³•ï¼š ä»£æ•°æ³•ï¼šDLTã€P3Pã€EPnP / UPnPç­‰ï¼› ä¼˜åŒ–æ³•ï¼šBundle Adjustment ä¸€èˆ¬çš„ä»£æ•°æ–¹æ³•å¯¹äºå™ªå£°çš„é²æ£’æ€§è¾ƒå·®ï¼Œæ±‚å‡ºæ¥çš„è§£è¯¯å·®è¾ƒå¤§ï¼Œå› æ­¤å¤šä½¿ç”¨ä¸‡é‡‘æ²¹å¼å¾—åˆ°BAç®—æ³•(Bundle Adjustment) ä¸‹é¢å°†åˆ†åˆ«ä»‹ç»ä¸Šè¿°çš„å‡ ç§æ±‚è§£æ–¹æ³•ã€‚ ç›´æ¥çº¿æ€§å˜æ¢DLTå¦‚æœå°†3Dç‚¹çœ‹æˆæ˜¯å¦ä¸€ä¸ªç›¸æœºåæ ‡ç³»çš„ä¸­çš„ç‚¹æ—¶ï¼Œå°±å¯ä»¥å°†å…¶è½¬åŒ–ä¸ºæ±‚è§£ä¸¤ä¸ªç›¸åŠ çš„è¿åŠ¨é—®é¢˜ã€‚ è€ƒè™‘ç©ºé—´ç‚¹Pï¼Œå…¶å¯¹åº”çš„å…¶æ¬¡åæ ‡å°±ä¸ºï¼š$P=(X,Y,Z,1)^T$ . åœ¨å›¾åƒ$I_1$ä¸­ï¼Œå…¶å¯¹åº”çš„ç‰¹å¾ç‚¹ä¸º$x_1=(u_1,v_1,1)^T$. ç„¶åï¼Œå®šä¹‰å¢å¹¿çŸ©é˜µ$[R|t]$ å¾—åˆ°å…¶æŠ•å½±å…³ç³»ä¸º$sx_1=[R|t]p$ï¼Œå°†ä¸Šè¿°æŠ•å½±æ–¹ç¨‹å±•å¼€å¯å¾—ï¼š s\\left(\\begin{array}{l}u_{1} \\\\ v_{1} \\\\ 1\\end{array}\\right)=\\left(\\begin{array}{llll}t_{1} & t_{2} & t_{3} & t_{4} \\\\ t_{5} & t_{6} & t_{7} & t_{8} \\\\ t_{9} & t_{10} & t_{11} & t_{12}\\end{array}\\right)\\left(\\begin{array}{l}X \\\\ Y \\\\ Z \\\\ 1\\end{array}\\right) ä¸‹é¢è”ç«‹æ–¹ç¨‹ï¼Œæ¶ˆå»så¯å¾—ï¼š u_{1}=\\frac{t_{1} X+t_{2} Y+t_{3} Z+t_{4}}{t_{9} X+t_{10} Y+t_{11} Z+t_{12}}, \\quad v_{1}=\\frac{t_{5} X+t_{6} Y+t_{7} Z+t_{8}}{t_{9} X+t_{10} Y+t_{11} Z+t_{12}} . ä¹‹åï¼Œä¸ºäº†ç®€åŒ–è¡¨ç¤ºï¼Œå®šä¹‰äº†Tçš„è¡Œå‘é‡å¯å¾—ï¼š \\boldsymbol{t}_{1}=\\left(t_{1}, t_{2}, t_{3}, t_{4}\\right)^{\\mathrm{T}}, \\boldsymbol{t}_{2}=\\left(t_{5}, t_{6}, t_{7}, t_{8}\\right)^{\\mathrm{T}}, \\boldsymbol{t}_{3}=\\left(t_{9}, t_{10}, t_{11}, t_{12}\\right)^{\\mathrm{T}} äºæ˜¯åŸæ–¹ç¨‹å¯ä»¥è½¬æ¢æˆï¼š \\boldsymbol{t}_{1}^{\\mathrm{T}} \\boldsymbol{P}-\\boldsymbol{t}_{3}^{\\mathrm{T}} \\boldsymbol{P} u_{1}=0\\\\ \\boldsymbol{t}_{2}^{\\mathrm{T}} \\boldsymbol{P}-\\boldsymbol{t}_{3}^{\\mathrm{T}} \\boldsymbol{P} v_{1}=0 è¿™é‡Œæˆ‘ä»¬è¦æ±‚è§£çš„å˜é‡ä¸º$t$ï¼Œæ¯ä¸ªä¸‰ç»´ç‚¹å¯ä»¥æä¾›ä¸¤ä¸ªçº¦æŸæ–¹ç¨‹ï¼Œå½“æˆ‘ä»¬ä¸€å…±æ±‚è§£Nä¸ªç‚¹æ—¶ï¼Œè¦æ±‚è§£çš„çº¿æ€§æ–¹ç¨‹å¦‚ä¸‹ï¼š \\left(\\begin{array}{ccc}\\boldsymbol{P}_{1}^{\\mathrm{T}} & 0 & -u_{1} \\boldsymbol{P}_{1}^{\\mathrm{T}} \\\\ 0 & \\boldsymbol{P}_{1}^{\\mathrm{T}} & -v_{1} \\boldsymbol{P}_{1}^{\\mathrm{T}} \\\\ \\vdots & \\vdots & \\vdots \\\\ \\boldsymbol{P}_{N}^{\\mathrm{T}} & 0 & -u_{N} \\boldsymbol{P}_{N}^{\\mathrm{T}} \\\\ 0 & \\boldsymbol{P}_{N}^{\\mathrm{T}} & -v_{N} \\boldsymbol{P}_{N}^{\\mathrm{T}}\\end{array}\\right)\\left(\\begin{array}{c}\\boldsymbol{t}_{1} \\\\ \\boldsymbol{t}_{2} \\\\ \\boldsymbol{t}_{3}\\end{array}\\right)=0 æ±‚è§£12ä¸ªæœªçŸ¥é‡ï¼Œä¸€å…±éœ€è¦12/2=6ä¸ªç‚¹ï¼Œå½“ç»™å®šçš„ç‚¹å¤šäº6ä¸ªæ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨æœ€å°äºŒä¹˜æ³•æ¥æ±‚è§£ã€‚ ä»¥ä¸Šå°±æ˜¯DILæ–¹æ³•çš„åŸºæœ¬è§£æ³•ï¼Œä½†æ˜¯è¿™æ ·åšä¼šæœ‰ä¸‹é¢çš„ä¸è¶³ï¼š é¦–å…ˆï¼Œæˆ‘ä»¬æ±‚è§£çš„çŸ©é˜µTï¼Œä»…ä»…å°†å…¶çœ‹ä½œæ˜¯12ä¸ªæœªçŸ¥æ•°ï¼Œå¿½ç•¥äº†å…¶ä½œä¸ºæ—‹è½¬çŸ©é˜µåº”æœ‰çš„æ€§è´¨ï¼Œ$\\mathrm{R} \\in \\mathfrak{SO}(3)$ ã€‚å¯¹äºå¹³ç§»å‘é‡æ¥è¯´è¿˜æ¯”è¾ƒå¥½è§£å†³ï¼Œæ—‹è½¬çŸ©é˜µä½¿ç”¨QRåˆ†è§£æ¥è§£å†³ï¼Œé€‰æ‹©ä¸‹é¢çš„å…¬å¼æ¥æ¥è¿›è¡Œä¼˜åŒ–ï¼š R\\leftarrow (RR^T)^{-1/2}R å…¶æ¬¡ï¼Œè¿™é‡Œçš„$x_1$ä»£è¡¨çš„æ˜¯å½’ä¸€åŒ–åæ ‡ï¼Œå»æ‰äº†å†…å‚çŸ©é˜µçš„Kçš„å½±å“ï¼Œå³ä½¿å†…å‚æœªçŸ¥ï¼Œå…¶å®ä¹Ÿä¸å½±å“æ±‚è§£ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ›´å¤šçš„ç‰¹å¾ç‚¹æ¥ä¼°è®¡$K,R,t$ä¸‰ä¸ªé‡ã€‚ P3Pæ­¤æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬ä»…ä»…æ ¹æ®3å¯¹3D-2Dçš„åŒ¹é…ç‚¹å°±å¯ä»¥å¾—ç›¸æœºçš„ä½å§¿ä»¥åŠç›¸æœºçš„å¤–å‚ã€‚æ­¤å¤–ï¼Œè¿˜éœ€è¦ä¸€ä¸ªç‚¹è¿›è¡ŒéªŒè¯ã€‚ å¦‚å›¾æ‰€ç¤ºï¼Œ3Dç‚¹A,B,Cï¼›2Dç‚¹ä¸ºa,b,cã€‚æ­¤æ—¶A,B,Cä¸ºåœ¨ä¸–ç•Œåæ ‡ç³»ä¸­çš„åæ ‡ï¼Œä¸æ˜¯åœ¨ç›¸æœºåæ ‡ç³»ä¸‹çš„åæ ‡ï¼Œå› ä¸ºå¦‚æœ3Dç‚¹åœ¨ç›¸æœºåæ ‡ç³»ä¸‹çš„åæ ‡è¦æ˜¯å·²çŸ¥çš„åŒ–ï¼Œé‚£ä¹ˆå°±æˆäº†ä¸€ä¸ªICPçš„é—®é¢˜ã€‚ è¿™é‡Œæˆ‘ä»¬ä¸çŸ¥åˆ°A,B,Cä¸‰ç‚¹çš„æ·±åº¦å€¼ï¼Œäºæ˜¯aA,bB,cCæœªçŸ¥å³OA,OB,OCæ˜¯æœªçŸ¥çš„ï¼Œä½†æ˜¯AB,AC,BCæ˜¯å·²çŸ¥çš„ã€‚äºæ˜¯uå’Œwå°±æ˜¯å·²çŸ¥çš„ï¼Œä½†æ˜¯vè¿˜æ˜¯æœªçŸ¥çš„ï¼Œè€Œä¸”x,yä¹Ÿæ˜¯æœªçŸ¥çš„ã€‚ ä¹‹åï¼Œå°†æœªçŸ¥æ•°væ¶ˆå»ï¼Œå¾—åˆ°ä¸€ä¸ªäºŒå…ƒäºŒæ¬¡æ–¹ç¨‹ï¼Œç„¶åä½¿ç”¨å´æ°æ¶ˆå…ƒæ³•æ±‚è§£ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ•°å€¼æ–¹æ³•æ¥æ±‚è§£ã€‚ æœ€åæ±‚è§£å¯å¾—OCï¼Œè¿›è€Œå¾—åˆ°3D-3Dçš„ç‚¹å¯¹å³å°†A,B,Cçš„æ·±åº¦ä¹Ÿä¸€èµ·æ±‚å‡ºã€‚äºæ˜¯å°±æœ‰å¯ä»¥æ±‚å‡º$R,t$. P3Pçš„å¤§æ¦‚åŸç†å°±æ˜¯ä½¿ç”¨ä¸‰è§’å½¢ç›¸ä¼¼çš„æ€§è´¨ï¼Œå¾—å‡ºa,b,cåœ¨ç›¸æœºåæ ‡ç³»ä¸‹çš„3Dåæ ‡å³æ·±åº¦ï¼Œæœ€åå°±å°†é—®é¢˜è½¬æ¢ä¸º3D-3Dçš„ä½å§¿é—®é¢˜ã€‚ ç®—æ³•å­˜åœ¨çš„ç¼ºç‚¹ï¼š å½“ç»™çš„ä¿¡æ¯ç‚¹çš„ä¸ªæ•°å¤§äº3ä¸ªæ—¶ï¼Œæˆ‘ä»¬åªèƒ½ç”¨ä¸‰ä¸ªç‚¹çš„ä¿¡æ¯ï¼Œæ²¡åŠæ³•åˆ©ç”¨æ›´å¤šçš„ä¿¡æ¯ã€‚ å½“3D,2Dç‚¹çš„å—åˆ°å™ªå£°çš„å½±å“ä¹‹åï¼Œæˆ–è€…æ˜¯è¯¯åŒ¹é…ï¼Œæ­¤æ—¶ç®—æ³•å°†å¤±æ•ˆã€‚ æœ€å°åŒ–é‡æŠ•å½±è¯¯å·®æ³•é™¤äº†ä½¿ç”¨ä¼ ç»Ÿçš„çº¿æ€§æ–¹æ³•å¤–ï¼Œè¿˜å¯ä»¥å°†å…¶æ„å»ºæˆä¸ºä¸€ä¸ªä¼˜åŒ–çš„ç®—æ³•ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥å°†å…¶æ”¹è¿›æˆä¸ºä¸€ä¸ªé‡æŠ•å½±æœ€å°è¯¯å·®çš„æœ€å°äºŒä¹˜åœ°é—®é¢˜ã€‚ è¿™é‡ŒåŒºåˆ«ä¸€èˆ¬ä¼ ç»Ÿæ–¹æ³•ï¼Œå…ˆæ±‚ç›¸æœºä½å§¿ï¼Œå†æ±‚ç©ºé—´ç‚¹ï¼Œè¿™é‡Œæ˜¯å°†å…¶ä¸€å¹¶ç¤ºä¸ºéçº¿æ€§æœ€å°äºŒä¹˜æ³•åœ°ä¼˜åŒ–å˜é‡ï¼Œè¿™ä¸ªæ–¹æ³•ç»Ÿç§°ä¸º Bundle Adjustment. é¦–å…ˆï¼Œæˆ‘ä»¬è€ƒè™‘ n ä¸ªç©ºé—´ç‚¹Pä»¥åŠå…¶æŠ•å½±pï¼Œè¿™é‡Œå‡è®¾å…¶ä¸­çš„ä¸€ä¸ªç©ºé—´ç‚¹çš„åæ ‡æ˜¯$P=[X_i,Y_i,Z_i]^T$ ï¼Œå…¶æŠ•å½±å€¼ä¸º$u_i=[u_i,v_i]^T$ ã€‚æ ¹æ®ç¬¬5è®²çš„å†…å®¹ï¼Œæœ‰$s_i{u_i}=\\boldsymbol{KTP_i}=\\boldsymbol{K}\\exp(\\xi^{\\wedge}) \\boldsymbol{P_i} $ ã€‚ ä¹‹åï¼Œå®šä¹‰æœ€å°é‡æŠ•å½±çš„è¯¯å·®ï¼š \\boldsymbol{T}^*=\\arg\\min\\limits_{T}\\frac 1 2 \\sum\\limits_{i=1}^{n}||\\boldsymbol{u_i}-\\frac{1}{s_i}\\boldsymbol{KTP_i} ||^2_2 ä¸‹é¢ä¸»è¦è§£å†³çš„æ˜¯ä¸€ä¸ªå…³äºçº¿æ€§åŒ–å’Œæ±‚é›…å¯æ¯”çš„è¿‡ç¨‹ï¼š è€ƒè™‘åˆ°å•ä¸ªæŠ•å½±ç‚¹çš„è¯¯å·®ï¼š$e_i=u_i-\\dfrac{1}{s_i}K\\exp(\\xi^{\\wedge})P_i$ ; çº¿æ€§åŒ–ï¼š$e_i(x+\\Delta x)\\approx e_i(x)+J(x)\\Delta x$ ï¼› æ±‚è§£é›…å¯æ¯”çŸ©é˜µ$\\boldsymbol{J}^T$ ï¼š \\frac{\\partial \\boldsymbol{e}}{\\partial \\delta \\boldsymbol{\\xi}}=\\lim _{\\delta \\boldsymbol{\\xi} \\rightarrow 0} \\frac{e(\\delta \\boldsymbol{\\xi} \\oplus \\boldsymbol{\\xi})}{\\delta \\boldsymbol{\\xi}}=\\frac{\\partial \\boldsymbol{e}}{\\partial \\boldsymbol{P}^{\\prime}} \\frac{\\partial \\boldsymbol{P}^{\\prime}}{\\partial \\delta \\boldsymbol{\\xi}} å¯¹äºç¬¬ä¸€é¡¹ï¼Œä¸‹é¢æ¥å¤„ç†å¯¹$Pâ€™$æ±‚å¯¼çš„é—®é¢˜ï¼š è¿™é‡Œçš„ $Pâ€™$ æ˜¯åœ¨ç›¸æœºåæ ‡ç³»ä¸‹çš„3Dç‚¹çš„åæ ‡ã€‚ $Pâ€™$ä¸ºåœ¨ç›¸æœºåæ ‡ç³»ä¸‹çš„åæ ‡ï¼š P'=[TP]_{(1:3)}=[X',Y',Z']^T å¯¹ $Pâ€™$ è¿›è¡ŒæŠ•å½±å¯å¾—ï¼š s\\boldsymbol{u}=\\boldsymbol{KP'} å°†ä¸Šè¿°çš„å¼å­å±•å¼€å¯å¾—ï¼š \\left[\\begin{array}{l}s u \\\\ s v \\\\ s\\end{array}\\right]=\\left[\\begin{array}{ccc}f_{x} & 0 & c_{x} \\\\ 0 & f_{y} & c_{y} \\\\ 0 & 0 & 1\\end{array}\\right]\\left[\\begin{array}{l}X^{\\prime} \\\\ Y^{\\prime} \\\\ Z^{\\prime}\\end{array}\\right]\\\\ u=f_{x} \\frac{X^{\\prime}}{Z^{\\prime}}+c_{x}, \\quad v=f_{y} \\frac{Y^{\\prime}}{Z^{\\prime}}+c_{y} ä»£å…¥å¯å¾—åå¯¼æ•°çš„å€¼ä¸ºï¼š \\dfrac{\\partial \\boldsymbol{e}}{\\partial \\boldsymbol{P}^{\\prime}}=-\\left[\\begin{array}{ccc}\\dfrac{\\partial u}{\\partial X^{\\prime}} & \\dfrac{\\partial u}{\\partial Y^{\\prime}} & \\dfrac{\\partial u}{\\partial Z^{\\prime}} \\\\ \\dfrac{\\partial v}{\\partial X^{\\prime}} & \\dfrac{\\partial v}{\\partial Y^{\\prime}} & \\dfrac{\\partial v}{\\partial Z^{\\prime}}\\end{array}\\right]=-\\left[\\begin{array}{ccc}\\dfrac{f_{x}}{Z^{\\prime}} & 0 & -\\dfrac{f_{x} X^{\\prime}}{Z^{\\prime 2}} \\\\ 0 & \\dfrac{f_{y}}{Z^{\\prime}} & -\\dfrac{f_{y} Y^{\\prime}}{Z^{\\prime 2}}\\end{array}\\right] å¯¹äºç¬¬äºŒé¡¹ï¼Œä¸‹é¢å°†å…¶è¿›è¡Œæ‹†åˆ†å¯å¾—ï¼š è¿™é‡Œå› ä¸ºæˆ‘ä»¬ä»…ä»…ä¿ç•™äº†å‰ä¸‰ç»´çš„æ•°æ®ï¼Œäºæ­¤æ±‚è§£çš„ç»“æœä¹Ÿå°±ä¿ç•™å‰ä¸‰ç»´å³å¯ï¼Œæœ€åä¸€ç»´èˆå»ã€‚ ä¸¤å¼ç›¸ä¹˜å¾—åˆ°æœ€åçš„æ±‚å¯¼çš„ç»“æœä¸ºï¼š \\frac{\\partial \\boldsymbol{e}}{\\partial \\delta \\boldsymbol{\\xi}}=-\\left[\\begin{array}{cccccc}\\dfrac{f_{x}}{Z^{\\prime}} & 0 & -\\dfrac{f_{x} X^{\\prime}}{Z^{\\prime 2}} & -\\dfrac{f_{x} X^{\\prime} Y^{\\prime}}{Z^{\\prime 2}} & f_{x}+\\dfrac{f_{x} X^{\\prime 2}}{Z^{\\prime 2}} & -\\dfrac{f_{x} Y^{\\prime}}{Z^{\\prime}} \\\\ 0 & \\dfrac{f_{y}}{Z^{\\prime}} & -\\dfrac{f_{y} Y^{\\prime}}{Z^{\\prime 2}} & -f_{y}-\\dfrac{f_{y} Y^{\\prime 2}}{Z^{\\prime 2}} & \\dfrac{f_{y} X^{\\prime} Y^{\\prime}}{Z^{\\prime 2}} & \\dfrac{f_{y} X^{\\prime}}{Z^{\\prime}}\\end{array}\\right] åˆšæ‰çš„ä¼˜åŒ–ä¸»è¦é’ˆå¯¹çš„æ˜¯3Dç›¸æœºï¼Œå°±æ˜¯é€šè¿‡ä¼˜åŒ–ç›¸æœºçš„ä½å§¿æ¥å¾—åˆ°nä¸ªæ ·æœ¬ç‚¹ä¸‹çš„æœ€ä½³çš„é‡æŠ•å½±è¯¯å·®ã€‚ å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥å¯¹3Dç‚¹è¿›è¡Œæ±‚å¯¼ï¼š é¦–å…ˆæ˜¯å…¶æ±‚å¯¼ä¹Ÿè¦ä½¿ç”¨é“¾å¼æ³•åˆ™ï¼š \\frac{\\partial \\boldsymbol{e}}{\\partial \\boldsymbol{P}}=\\frac{\\partial \\boldsymbol{e}}{\\partial \\boldsymbol{P}^{\\prime}} \\frac{\\partial \\boldsymbol{P}^{\\prime}}{\\partial \\boldsymbol{P}} å…¶ä¸­ç¬¬ä¸€é¡¹åˆšæ‰å·²ç»æ±‚è§£äº†ï¼Œè‡³äºç¬¬äºŒé¡¹åˆ™æŒ‰ç…§å®šä¹‰ï¼š P'=[TP]_{(1:3)}=RP+tæ±‚è§£ä¹‹åå°±å‰©ä¸‹ä¸€ä¸ªæ—‹è½¬çŸ©é˜µRäº†ã€‚ æœ€åçš„ç»“æœä¸ºï¼š \\frac{\\partial \\boldsymbol{e}}{\\partial \\boldsymbol{P}}=-\\left[\\begin{array}{ccc}\\dfrac{f_{x}}{Z^{\\prime}} & 0 & -\\dfrac{f_{x} X^{\\prime}}{Z^{\\prime 2}} \\\\ 0 & \\dfrac{f_{y}}{Z^{\\prime}} & -\\dfrac{f_{y} Y^{\\prime}}{Z^{\\prime 2}}\\end{array}\\right] \\boldsymbol{R} . å®è·µä½¿ç”¨EPnPæ±‚è§£ä½å§¿ä½¿ç”¨EPnPå¯¹é—®é¢˜è¿›è¡Œæ±‚è§£ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨OpenCVè‡ªå¸¦çš„EPnPçš„ç®—æ³•æ¥å¯¹é—®é¢˜è¿›è¡Œæ±‚è§£ï¼Œç”±äºPnPéœ€è¦ä½¿ç”¨åˆ°3Dç‚¹ï¼Œå› æ­¤è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨å·²æœ‰çš„æ·±åº¦ä¿¡æ¯ï¼Œè€Œä¸åœ¨ä½¿ç”¨åˆå§‹åŒ–æ¥è¿›è¡Œ(åˆå§‹åŒ–çš„è¯¯å·®å¤ªå¤§äº†) 1ushort d = d1.ptr&lt;unsigned short&gt;(int(keypoints_1[m.queryIdx].pt.y))[int(keypoints_1[m.queryIdx].pt.x)]; è¿™é‡Œæ˜¯ä½¿ç”¨ä¸€ä¸ªè¡ŒæŒ‡é’ˆæ¥è¿›è¡Œè¯»å–æ“ä½œï¼Œåˆ†åˆ«ä»è¡Œå’Œåˆ—çš„æ–¹å‘æ¥å¯¹åƒç´ è¿›è¡Œè¯»å–æ“ä½œã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647int main(int argc, char **argv) { if (argc != 5) { cout &lt;&lt; &quot;usage: pose_estimation_3d2d img1 img2 depth1 depth2&quot; &lt;&lt; endl; return 1; } //-- è¯»å–å›¾åƒ cv::Mat img_1 = cv::imread(argv[1], CV_LOAD_IMAGE_COLOR); cv::Mat img_2 = cv::imread(argv[2], CV_LOAD_IMAGE_COLOR); assert(img_1.data &amp;&amp; img_2.data &amp;&amp; &quot;Can not load images!&quot;); vector&lt;cv::KeyPoint&gt; keypoints_1, keypoints_2; vector&lt;cv::DMatch&gt; matches; find_feature_matches(img_1, img_2, keypoints_1, keypoints_2, matches); cout &lt;&lt; &quot;ä¸€å…±æ‰¾åˆ°äº†&quot; &lt;&lt; matches.size() &lt;&lt; &quot;ç»„åŒ¹é…ç‚¹&quot; &lt;&lt; endl; // å»ºç«‹3Dç‚¹ cv::Mat d1 = cv::imread(argv[3], CV_LOAD_IMAGE_UNCHANGED); // æ·±åº¦å›¾ä¸º16ä½æ— ç¬¦å·æ•°ï¼Œå•é€šé“å›¾åƒ cv::Mat K = (cv::Mat_&lt;double&gt;(3, 3) &lt;&lt; 520.9, 0, 325.1, 0, 521.0, 249.7, 0, 0, 1); vector&lt;cv::Point3f&gt; pts_3d; vector&lt;cv::Point2f&gt; pts_2d; for (cv::DMatch m:matches) { ushort d = d1.ptr&lt;unsigned short&gt;(int(keypoints_1[m.queryIdx].pt.y))[int(keypoints_1[m.queryIdx].pt.x)]; if (d == 0) // bad depth continue; float dd = d / 5000.0; cv::Point2d p1 = pixel2cam(keypoints_1[m.queryIdx].pt, K); pts_3d.push_back(cv::Point3f(p1.x * dd, p1.y * dd, dd)); pts_2d.push_back(keypoints_2[m.trainIdx].pt); } cout &lt;&lt; &quot;3d-2d pairs: &quot; &lt;&lt; pts_3d.size() &lt;&lt; endl; chrono::steady_clock::time_point t1 = chrono::steady_clock::now(); cv::Mat r, t; solvePnP(pts_3d, pts_2d, K, cv::Mat(), r, t, false); // è°ƒç”¨OpenCV çš„ PnP æ±‚è§£ï¼Œå¯é€‰æ‹©EPNPï¼ŒDLSç­‰æ–¹æ³• cv::Mat R; cv::Rodrigues(r, R); // rä¸ºæ—‹è½¬å‘é‡å½¢å¼ï¼Œç”¨Rodrigueså…¬å¼è½¬æ¢ä¸ºçŸ©é˜µ chrono::steady_clock::time_point t2 = chrono::steady_clock::now(); chrono::duration&lt;double&gt; time_used = chrono::duration_cast&lt;chrono::duration&lt;double&gt;&gt;(t2 - t1); cout &lt;&lt; &quot;solve pnp in opencv cost time: &quot; &lt;&lt; time_used.count() &lt;&lt; &quot; seconds.&quot; &lt;&lt; endl; cout &lt;&lt; &quot;R=&quot; &lt;&lt; endl &lt;&lt; R &lt;&lt; endl; cout &lt;&lt; &quot;t=&quot; &lt;&lt; endl &lt;&lt; t &lt;&lt; endl; return 0;} ç„¶åè¾“å…¥å‘½ä»¤ï¼Œå³å¯æ‰§è¡Œç»“æœï¼Œå¹¶å¾—åˆ°è¾“å‡ºï¼š 123456789101112131415./pose_estimation_3d2d /home/czt/slamlearning/ch7/vo1/1.png /home/czt/slamlearning/ch7/vo1/2.png /home/czt/slamlearning/ch7/vo1/1_depth.png /home/czt/slamlearning/ch7/vo1/2_depth.png-- Max dist : 94.000000 -- Min dist : 4.000000 ä¸€å…±æ‰¾åˆ°äº†79ç»„åŒ¹é…ç‚¹3d-2d pairs: 75solve pnp in opencv cost time: 0.126052 seconds.R=[0.9979059095501517, -0.05091940089119591, 0.03988747043579327; 0.04981866254262534, 0.9983623157437967, 0.02812094175427922; -0.04125404886006491, -0.02607491352939112, 0.9988083912027803]t=[-0.1267821389545255; -0.00843949681832986; 0.06034935748864372] ä»¥ä¸‹å¼OpenCVè‡ªå¸¦å¾—EPnPå‡½æ•°ï¼š 1CV_EXPORTS_W bool solvePnP( InputArray objectPoints, InputArray imagePoints, InputArray cameraMatrix, InputArray distCoeffs, OutputArray rvec, OutputArray tvec, bool useExtrinsicGuess = false, int flags = SOLVEPNP_ITERATIVE ); objectPointsï¼š 3Dç‚¹åæ ‡ï¼Œè¿™é‡Œè¾“å…¥ä¸ºä¸€ä¸ªç»„çš„å½¢å¼ï¼Œä¸€èˆ¬ä½¿ç”¨çš„æ˜¯ä¸€ä¸ªÂ·vectorå®¹å™¨æ¥è§£å†³ã€‚ imagePointsï¼š2Dç‚¹åæ ‡ï¼ŒåŒä¸Šã€‚ cameraMatrixï¼šç›¸æœºçš„å†…å‚ï¼Œè¿™é‡Œè¾“å…¥çš„æ˜¯ä¸€ä¸ªcv::Mat flagsï¼šä½¿ç”¨çš„æ–¹æ³•çš„æ ‡ç­¾ï¼› ä»æ±‚è§£çš„é€Ÿåº¦æ¥çœ‹ï¼ŒOpenCVè‡ªå¸¦ &gt; Ceres &gt; g2o ä½†æ˜¯g2oå¯ä»¥å¾ˆå¥½çš„è§£å†³çš„BAé—®é¢˜ã€‚ä¸è¿‡G2Oç¼–è¯‘makeçš„ç¡®å®æ¯”è¾ƒè€—æ—¶ã€‚ ä½¿ç”¨GNæ‰‹å†™å§¿æ€è¯†åˆ«è¿™é‡Œæˆ‘ä»¬æ‰‹å†™äº†ä¹‹å‰Gauss-Newtonæ–¹æ³•è¿›è¡Œå§¿æ€çš„æ±‚è§£è®¡ç®—ï¼Œä¸»è¦çš„å‡½æ•°å¦‚å›¾æ‰€ç¤ºï¼Œè¾“å‡ºä¸ºæ”¶æ•›é€Ÿåº¦è¿­ä»£æŸå¤±ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485void bundleAdjustmentGaussNewton( const VecVector3d &amp;points_3d, const VecVector2d &amp;points_2d, const cv::Mat &amp;K, Sophus::SE3d &amp;pose){ typedef Eigen::Matrix&lt;double, 6, 1&gt; Vector6d; // è®¾ç½®è¿­ä»£æ¬¡æ•° const int iterations = 10; // å®šä¹‰æŸå¤± double cost = 0, last_cost = 0; double fx = K.at&lt;double&gt;(0, 0); double fy = K.at&lt;double&gt;(1, 1); double cx = K.at&lt;double&gt;(0, 2); double cy = K.at&lt;double&gt;(1, 2); for (int iter = 0; iter &lt; iterations; iter++){ Eigen::Matrix&lt;double, 6, 6&gt; H = Eigen::Matrix&lt;double, 6, 6&gt;::Zero(); Vector6d b = Vector6d::Zero(); // åˆå§‹åŒ–æˆ0 cost = 0; // å¼€å§‹è®¡ç®—æŸå¤± for(int i = 0; i &lt; points_3d.size(); i++){ // å…ˆå°†å…¶è½¬åŒ–åˆ°ç›¸æœºåæ ‡ç³»ä¸‹ Eigen::Vector3d pc = pose * points_3d[i]; // è¿›è¡Œå½’ä¸€åŒ– double inv_z = 1.0 / pc[2]; double inv_z2 = inv_z * inv_z; // è®¡ç®—å¾—åˆ°ç›¸æœºåæ ‡ Eigen::Vector2d proj(fx * pc[0] / pc[2] + cx, fy * pc[1] / pc[2] + cy); // è®¡ç®—è¯¯å·® Eigen::Vector2d e = points_2d[i] - proj; cost += e.squaredNorm();// å°±æ˜¯2èŒƒæ•° // å®šä¹‰Jacobi Matrix å…¬å¼7.46 Eigen::Matrix&lt;double, 2, 6&gt; J; J &lt;&lt; -fx * inv_z, 0, fx * pc[0] * inv_z2, fx * pc[0] * pc[1] * inv_z2, -fx - fx * pc[0] * pc[0] * inv_z2, fx * pc[1] * inv_z, 0, -fy * inv_z, fy * pc[1] * inv_z, fy + fy * pc[1] * pc[1] * inv_z2, -fy * pc[0] * pc[1] * inv_z2, -fy * pc[0] * inv_z; H += J.transpose() * J; b += -J.transpose() * e; } // æ±‚è§£å¢é‡æ–¹ç¨‹ Vector6d dx; dx = H.ldlt().solve(b); // æ— è§£åˆ™é€€å‡ºå¾ªåŒ– if (isnan(dx[0])){ cout &lt;&lt; &quot;result is nan!&quot; &lt;&lt; endl; break; } // last_cost æ˜¯ä¸Šä¸€æ­¥çš„æŸå¤± if(iter &gt; 0 &amp;&amp; cost &gt;= last_cost){ // cost increase, update is not good cout &lt;&lt; &quot;cost: &quot; &lt;&lt; cost &lt;&lt; &quot;, last cost: &quot; &lt;&lt; last_cost &lt;&lt; endl; break; } // update your estimation pose = Sophus::SE3d::exp(dx) * pose; last_cost = cost; cout &lt;&lt; &quot;iteration &quot; &lt;&lt; iter &lt;&lt; &quot; cost=&quot; &lt;&lt; std::setprecision(12) &lt;&lt; cost &lt;&lt; endl; if (dx.norm() &lt; 1e-6) { // converge break; } } cout &lt;&lt; &quot;pose by g-n: \\n&quot; &lt;&lt; pose.matrix() &lt;&lt; endl;} ä½¿ç”¨G2Oè¿›è¡ŒBAä¼˜åŒ– ç”±äºç¬¬ä¸€ä¸ªç›¸æœºä½å§¿å›ºå®šä¸ºé›¶ï¼Œæ‰€ä»¥æˆ‘ä»¬æ²¡æœ‰æŠŠå®ƒå†™åˆ°ä¼˜åŒ–å˜é‡é‡Œï¼Œä½†åœ¨æ›´å¤šçš„åœºåˆé‡Œï¼Œæˆ‘ä»¬ä¼šè€ƒè™‘æ›´å¤šç›¸æœºçš„ä¼°è®¡ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬æ ¹æ®ä¸€ç»„3Dç‚¹å’Œç¬¬äºŒä¸ªå›¾åƒä¸­çš„2DæŠ•å½±ï¼Œä¼°è®¡ç¬¬äºŒä¸ªç›¸æœºçš„ä½å§¿ã€‚æ‰€ä»¥æˆ‘ä»¬æŠŠç¬¬ä¸€ä¸ªç›¸æœºç”»æˆè™šçº¿ï¼Œè¡¨æ˜ä¸å¸Œæœ›è€ƒè™‘å®ƒã€‚ ä¸Šè¿°æ±‚è§£çš„è¿‡ç¨‹ä¸­ï¼Œå·²ç»å°†JacobiçŸ©é˜µæ±‚å‡ºï¼Œ$f$ æ±‚å‡ºï¼Œäºæ˜¯ä»…ä»…åªæœ‰ä¸€ä¸ªè¯¯å·®çš„æ›´æ–°é‡$\\Delta(\\xi)$ ä¸ºæœªçŸ¥çš„ï¼Œé€šè¿‡æ±‚è§£å¢é‡æ–¹ç¨‹æ¥æ±‚è§£ï¼Œå†æ›´æ–°å˜é‡ã€‚ å…·ä½“ä»£ç éƒ¨åˆ†å¦‚ä¸‹ï¼š é¦–å…ˆï¼Œåˆ›å»ºä¼˜åŒ–çš„é¡¶ç‚¹ï¼Œè¿™é‡Œé¡¶ç‚¹ç±»æ˜¯ç»§æ‰¿çš„æ˜¯BaseVertexï¼Œè¿™é‡Œçš„æ¨¡æ¿å‚æ•°ä¸º6ï¼Œå› ä¸ºæä»£æ•°ç‰¹æ®Šæ¬§æ°ç¾¤é‡Œé¢æœ‰å…­ä¸ªå‚æ•°ï¼Œå˜é‡çš„ç±»å‹å°±é€‰æ‹©æä»£æ•°çš„ç±»å‹ã€‚ 12345678910111213141516171819202122class VertexPose : public g2o::BaseVertex&lt;6, Sophus::SE3d&gt; {public: EIGEN_MAKE_ALIGNED_OPERATOR_NEW; virtual void setToOriginImpl() override { _estimate = Sophus::SE3d(); } /// left multiplication on SE3 virtual void oplusImpl(const double *update) override { Eigen::Matrix&lt;double, 6, 1&gt; update_eigen; update_eigen &lt;&lt; update[0], update[1], update[2], update[3], update[4], update[5]; _estimate = Sophus::SE3d::exp(update_eigen) * _estimate; // è¿™é‡Œå¢é‡çš„æ˜¯å·¦ä¹˜ // å…¶ä¸­çš„exp(update_eigen)æ˜¯ä¸€ä¸ª6 x 1çš„å‘é‡ // _estimateå¯¹åº”çš„æ˜¯ 4 x 4 çš„çŸ©é˜µ } virtual bool read(istream &amp;in) override {} virtual bool write(ostream &amp;out) const override {}}; å…¶ä¸­çš„exp(update_eigen)æ˜¯ä¸€ä¸ª6 x 1çš„å‘é‡ï¼› _estimateå¯¹åº”çš„æ˜¯ 4 x 4 çš„çŸ©é˜µï¼› è¿™é‡Œçš„å·¦ä¹˜å®é™…ä¸Šä½¿ç”¨äº†é‡è½½ã€‚ ä¹‹åï¼Œåˆ›å»ºå•å…ƒè¾¹æ¥è¿›è¡Œä¼˜åŒ–æ“ä½œã€‚ å…¶ä¸»è¦ç»§æ‰¿è‡ªBaseUnaryEdgeï¼Œæ¨¡æ¿å‚æ•°ç¬¬ä¸€ä¸ªä¸º2ï¼Œèµ·ä¸»è¦æ˜¯å› ä¸ºæˆ‘ä»¬æœ‰ä¼˜åŒ–çš„å˜é‡çš„æŠ•å½±åœ¨2Dç‚¹ä¸Šé¢çš„ï¼Œå› æ­¤åªæœ‰ä¸¤ç»´ï¼Œå³è¯¯å·®ä¸º2. ç„¶åï¼Œè¦è®¡ç®—è¯¯å·®ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦ä¸€äº›å‚æ•°ï¼Œéœ€è¦å°†å…¶è¾“å…¥åˆ°ç±»ä¸­ï¼Œè¿™é‡Œä¸»è¦æœ‰ä¸¤ç§åŠæ³•ï¼Œ ä¸€ç§æ˜¯é€šè¿‡æ„é€ å‡½æ•°è¿›è¡Œè¾“å…¥ï¼Œå¯¹åº”çš„è¦å†ç±»é‡Œé¢åˆ›å»ºå¯¹åº”çš„å˜é‡ï¼›â€™ å¦ä¸€ç§æ˜¯ä½œä¸ºè§‚æµ‹å€¼ï¼Œé€šè¿‡setestimate()æ¥å¯¼å…¥ã€‚ pos_pixel.head&lt;2&gt;()çš„æ„æ€æ˜¯ä»…ä»…å–å‰ä¸¤ç»´ï¼Œå› ä¸ºæœ€åä¸€ç»´æ˜¯1. 1234567891011121314151617181920212223242526272829303132333435363738394041// åˆ›å»ºè¾¹çš„é›†åˆclass EdgeProjection : public g2o::BaseUnaryEdge&lt;2, Eigen::Vector2d, VertexPose&gt; {public: EIGEN_MAKE_ALIGNED_OPERATOR_NEW; EdgeProjection(const Eigen::Vector3d &amp;pos, const Eigen::Matrix3d &amp;K) : _pos3d(pos), _K(K) {} virtual void computeError() override { const VertexPose *v = static_cast&lt;VertexPose *&gt; (_vertices[0]); // ä»…æœ‰ä¸€ä¸ªé¡¶ç‚¹ Sophus::SE3d T = v-&gt;estimate(); Eigen::Vector3d pos_pixel = _K * (T * _pos3d); pos_pixel /= pos_pixel[2]; // å°†ç¬¬ä¸‰ç»´è¿›è¡Œå½’ä¸€åŒ–ï¼Œå³é‡æŠ•å½±æ“ä½œ _error = _measurement - pos_pixel.head&lt;2&gt;(); // è®¡ç®—è¯¯å·® // è¿™é‡Œçš„æ„æ€æ˜¯ä»…ä»…å–å‰ä¸¤ç»´ } virtual void linearizeOplus() override { const VertexPose *v = static_cast&lt;VertexPose *&gt; (_vertices[0]); Sophus::SE3d T = v-&gt;estimate(); Eigen::Vector3d pos_cam = T * _pos3d; double fx = _K(0, 0); double fy = _K(1, 1); double cx = _K(0, 2); double cy = _K(1, 2); double X = pos_cam[0]; double Y = pos_cam[1]; double Z = pos_cam[2]; double Z2 = Z * Z; // è®¡ç®—JacobiçŸ©é˜µ _jacobianOplusXi &lt;&lt; -fx / Z, 0, fx * X / Z2, fx * X * Y / Z2, -fx - fx * X * X / Z2, fx * Y / Z, 0, -fy / Z, fy * Y / (Z * Z), fy + fy * Y * Y / Z2, -fy * X * Y / Z2, -fy * X / Z; } private: Eigen::Vector3d _pos3d; Eigen::Matrix3d _K;} æ¥ä¸‹æ¥æ˜¯ä¸€äº›å…³äºå˜é‡å®šä¹‰çš„å†…å®¹ã€‚ 123// BA by g2otypedef vector&lt;Eigen::Vector2d, Eigen::aligned_allocator&lt;Eigen::Vector2d&gt;&gt; VecVector2d;typedef vector&lt;Eigen::Vector3d, Eigen::aligned_allocator&lt;Eigen::Vector3d&gt;&gt; VecVector3d; ä¸Šè¿°çš„å®šä¹‰å…¶å®æ˜¯å…³äºå†…å­˜ç®¡ç†çš„ï¼Œå…¶å®ä½œç”¨æ˜¯å’Œtypedef vector&lt;g2o::Vector2&gt; VecVector2d;å·®ä¸å¤šã€‚ä½†æ˜¯å®é™…ç”¨çš„æ—¶å€™ï¼Œæ›´æ¬¢è¿çš„æ˜¯ä½¿ç”¨è‡ªå¸¦çš„æ“ä½œã€‚ ä¹‹åå¯¹äºä½å§¿è¡¨ç¤ºï¼Œg2oè‡ªå¸¦çš„æ˜¯g2o::Isometry3ï¼Œä½†æ˜¯æœ¬è´¨ä¸Šä¹Ÿæ˜¯Eigenï¼Œå› æ­¤å°½é‡ä½¿ç”¨å…¶è‡ªå¸¦çš„æ¯”è¾ƒå¥½ã€‚ 12typedef Eigen::Transform&lt;number_t,2,Eigen::Isometry,Eigen::ColMajor&gt; Isometry2;typedef Eigen::Transform&lt;number_t,3,Eigen::Isometry,Eigen::ColMajor&gt; Isometry3; æœ€åæ˜¯ä»£ç çš„æ‰§è¡Œéƒ¨åˆ†ï¼Œè¿™éƒ¨åˆ†å’Œä¹‹å‰ç¬¬å…­ç« å·®ä¸å¤šï¼Œå‚æ•°å¤„ç†ä¸Šå’Œå‰é¢çš„æ–¹æ³•ä¹Ÿå·®ä¸å¤šï¼Œè¿™é‡Œç›´æ¥å±•ç¤ºï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354void bundleAdjustmentG2O( const VecVector3d &amp;points_3d, const VecVector2d &amp;points_2d, const cv::Mat &amp;K, Sophus::SE3d &amp;pose) { // æ„å»ºå›¾ä¼˜åŒ–ï¼Œå…ˆè®¾å®šg2o typedef g2o::BlockSolver&lt;g2o::BlockSolverTraits&lt;6, 3&gt;&gt; BlockSolverType; // pose is 6, landmark is 3 typedef g2o::LinearSolverDense&lt;BlockSolverType::PoseMatrixType&gt; LinearSolverType; // çº¿æ€§æ±‚è§£å™¨ç±»å‹ // æ¢¯åº¦ä¸‹é™æ–¹æ³•ï¼Œå¯ä»¥ä»GN, LM, DogLeg ä¸­é€‰ auto solver = new g2o::OptimizationAlgorithmGaussNewton( g2o::make_unique&lt;BlockSolverType&gt;(g2o::make_unique&lt;LinearSolverType&gt;())); g2o::SparseOptimizer optimizer; // å›¾æ¨¡å‹ optimizer.setAlgorithm(solver); // è®¾ç½®æ±‚è§£å™¨ optimizer.setVerbose(true); // æ‰“å¼€è°ƒè¯•è¾“å‡º // vertex VertexPose *vertex_pose = new VertexPose(); // camera vertex_pose vertex_pose-&gt;setId(0); vertex_pose-&gt;setEstimate(Sophus::SE3d()); optimizer.addVertex(vertex_pose); // K Eigen::Matrix3d K_eigen; K_eigen &lt;&lt; K.at&lt;double&gt;(0, 0), K.at&lt;double&gt;(0, 1), K.at&lt;double&gt;(0, 2), K.at&lt;double&gt;(1, 0), K.at&lt;double&gt;(1, 1), K.at&lt;double&gt;(1, 2), K.at&lt;double&gt;(2, 0), K.at&lt;double&gt;(2, 1), K.at&lt;double&gt;(2, 2); // edges int index = 1; for (size_t i = 0; i &lt; points_2d.size(); ++i) { auto p2d = points_2d[i]; auto p3d = points_3d[i]; EdgeProjection *edge = new EdgeProjection(p3d, K_eigen); edge-&gt;setId(index); edge-&gt;setVertex(0, vertex_pose); edge-&gt;setMeasurement(p2d); edge-&gt;setInformation(Eigen::Matrix2d::Identity()); // è¿™é‡Œçš„ä¿¡æ¯çŸ©é˜µä¸ºå•ä½çŸ©é˜µ optimizer.addEdge(edge); index++; } chrono::steady_clock::time_point t1 = chrono::steady_clock::now(); optimizer.setVerbose(true); optimizer.initializeOptimization(); optimizer.optimize(10); chrono::steady_clock::time_point t2 = chrono::steady_clock::now(); chrono::duration&lt;double&gt; time_used = chrono::duration_cast&lt;chrono::duration&lt;double&gt;&gt;(t2 - t1); cout &lt;&lt; &quot;optimization costs time: &quot; &lt;&lt; time_used.count() &lt;&lt; &quot; seconds.&quot; &lt;&lt; endl; cout &lt;&lt; &quot;pose estimated by g2o =\\n&quot; &lt;&lt; vertex_pose-&gt;estimate().matrix() &lt;&lt; endl; pose = vertex_pose-&gt;estimate();}","link":"/2022/06/11/SLAM/ch7-%E8%A7%86%E8%A7%89%E9%87%8C%E7%A8%8B%E8%AE%A1-%E7%AC%AC%E4%B8%89%E9%83%A8%E5%88%86-PnP/"},{"title":"Ch7 è§†è§‰é‡Œç¨‹è®¡ ç¬¬å››éƒ¨åˆ† ICP","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦è®²è§£çš„æ˜¯3d-3dçš„ICPæ–¹æ³•ï¼Œä¸»è¦æ˜¯è®²ç¬¬äºŒå¼ å›¾ç‰‡çš„3dç‚¹é€šè¿‡å˜æ¢è½¬æ¢åˆ°ç¬¬ä¸€ä¸ªç›¸æœºåæ ‡ä¸Šï¼Œé€šè¿‡SVDå’Œéçº¿æ€§ä¼˜åŒ–çš„æ–¹æ³•æ¥æ±‚è§£ï¼Œæœ€åä½¿ç”¨åŸºäºSVDå’ŒG2Oçš„æ–¹æ³•æ¥è¿›è¡Œå®ç°ã€‚ 3D-3Dé—®é¢˜çš„ä½å§¿ä¼°è®¡ï¼Œè¿™é‡Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€ç»„é…å¯¹å¥½çš„3Dç‚¹ï¼Œä¸€èˆ¬æ˜¯ä½¿ç”¨RGBDç›¸æœºè·å–çš„ï¼Œå¯ä»¥ä½¿ç”¨RGBDç›¸æœºè¿›è¡ŒåŒ¹é…ã€‚ \\boldsymbol{P}=\\left\\{\\boldsymbol{p}_{1}, \\cdots, \\boldsymbol{p}_{n}\\right\\}, \\quad \\boldsymbol{P}^{\\prime}=\\left\\{\\boldsymbol{p}_{1}^{\\prime}, \\cdots, \\boldsymbol{p}_{n}^{\\prime}\\right\\}æ­¤æ—¶ä½¿ç”¨æ¬§å¼å˜åŒ–$R,t$ï¼Œæ¥è¡¨ç¤ºå…¶è¿åŠ¨ä¸Šçš„å…³ç³»ï¼š \\forall i, \\boldsymbol{p}_{i}=\\boldsymbol{R} \\boldsymbol{p}_{i}^{\\prime}+\\boldsymbol{t}æ­¤æ—¶ï¼Œä¸Šè¿°çš„é—®é¢˜å¯ä»¥ä½¿ç”¨è¿­ä»£æœ€è¿‘ç‚¹æ¥æ±‚è§£(Iterative Closest Point)æ¥è¿›è¡Œæ±‚è§£ï¼Œä¸åŒäºæ¿€å…‰SLAMï¼Œåœ¨è§†è§‰ä¸­æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨ä¸¤ä¸ªå·²ç»é…å¯¹å¥½çš„ç‚¹æ¥è¿›è¡Œç›¸æœºçš„ä½å§¿ä¼°è®¡ï¼Œè€Œæ¿€å…‰é—®é¢˜æ˜¯ä¸å¸¦åŒ¹é…çš„ã€‚ SVDè¿™é‡Œæˆ‘ä»¬ä»¥å¸¦åŒ¹é…çš„ä¸ºä¸ºä¸»æ¥è¿›è¡Œä»‹ç»ã€‚ åŒæ ·æ˜¯å®šä¹‰è¯¯å·®é¡¹å¯å¾—ï¼š \\boldsymbol{e}_{i}=\\boldsymbol{p}_{i}-\\left(\\boldsymbol{R} \\boldsymbol{p}_{i}^{\\prime}+\\boldsymbol{t}\\right)ç„¶åæ„å»ºæœ€å°äºŒä¹˜é—®é¢˜ï¼Œæ¥å¯»æ‰¾è¯¯å·®å¹³æ–¹å’Œæå°çš„$R,t$ï¼š \\min _{\\boldsymbol{R}, \\boldsymbol{t}} \\frac{1}{2} \\sum_{i=1}^{n}\\left\\|\\left(\\boldsymbol{p}_{i}-\\left(\\boldsymbol{R} \\boldsymbol{p}_{i}^{\\prime}+\\boldsymbol{t}\\right)\\right)\\right\\|_{2}^{2}ä¸‹é¢æ¥æ¨åˆ°å…¶æ±‚è§£çš„æ–¹æ³•ï¼š é¦–å…ˆï¼Œå®šä¹‰ä¸¤ç»„ç‚¹çš„è´¨å¿ƒï¼š \\boldsymbol{p}=\\frac{1}{n} \\sum_{i=1}^{n}\\left(\\boldsymbol{p}_{i}\\right), \\quad \\boldsymbol{p}^{\\prime}=\\frac{1}{n} \\sum_{i=1}^{n}\\left(\\boldsymbol{p}_{i}^{\\prime}\\right) ä¹‹åï¼Œæ³¨æ„ä¸å¸¦è§’æ ‡çš„ä¸ºè´¨å¿ƒï¼Œäºæ˜¯æ”¹å†™è¯¯å·®å‡½æ•° æ³¨æ„äº¤å‰é¡¹$\\left(\\boldsymbol{p}_{i}-\\boldsymbol{p}-\\boldsymbol{R}\\left(\\boldsymbol{p}_{i}^{\\prime}-\\boldsymbol{p}^{\\prime}\\right)\\right)$ åœ¨æ±‚å’Œä¹‹åä¸º0ï¼Œäºæ˜¯å¯ä»¥æ¶ˆå»ã€‚ æ­¤æ—¶ç›®æ ‡å‡½æ•°å¯ä»¥ç®€åŒ–ä¸ºï¼š \\min _{\\boldsymbol{R}, t} J=\\frac{1}{2} \\sum_{i=1}^{n}\\left\\|\\boldsymbol{p}_{i}-\\boldsymbol{p}-\\boldsymbol{R}\\left(\\boldsymbol{p}_{i}{ }^{\\prime}-\\boldsymbol{p}^{\\prime}\\right)\\right\\|^{2}+\\left\\|\\boldsymbol{p}-\\boldsymbol{R} \\boldsymbol{p}^{\\prime}-\\boldsymbol{t}\\right\\|^{2}ç¬¬ä¸€é¡¹ä»…å’Œ$R$æœ‰å…³ï¼Œè€Œç¬¬äºŒé¡¹å’Œ$R,t$ éƒ½æœ‰å…³ï¼Œäºæ˜¯æˆ‘ä»¬å¯ä»¥å…ˆä¼˜åŒ–$R$æ¥æ§åˆ¶ç¬¬ä¸€é¡¹æœ€å°ï¼Œä¹‹åå†æ§åˆ¶$t$æ¥æ§åˆ¶åä¸€é¡¹æœ€å°ã€‚ é¦–å…ˆï¼Œæœ€å°åŒ–æ—‹è½¬çŸ©é˜µ$R$ï¼š å…ˆè¿›è¡Œå»è´¨å¿ƒåŒ–$\\boldsymbol{q}_{i}=\\boldsymbol{p}_{i}-\\boldsymbol{p}, \\quad \\boldsymbol{q}_{i}^{\\prime}=\\boldsymbol{p}_{i}^{\\prime}-\\boldsymbol{p}^{\\prime}$ äºæ˜¯è¯¯å·®å‡½æ•°å¯ä»¥æ”¹å†™ä¸ºï¼š \\frac{1}{2} \\sum_{i=1}^{n}\\left\\|\\boldsymbol{q}_{i}-\\boldsymbol{R} \\boldsymbol{q}_{i}^{\\prime}\\right\\|^{2}=\\frac{1}{2} \\sum_{i=1}^{n}\\left(\\boldsymbol{q}_{i}^{\\mathrm{T}} \\boldsymbol{q}_{i}+\\boldsymbol{q}_{i}^{\\prime \\mathrm{T}} \\boldsymbol{R}^{\\mathrm{T}} \\boldsymbol{R} \\boldsymbol{q}_{i}^{\\prime}-2 \\boldsymbol{q}_{i}^{\\mathrm{T}} \\boldsymbol{R} \\boldsymbol{q}_{i}^{\\prime}\\right) ä¹‹åæˆ‘ä»¬æ³¨æ„åˆ°ç¬¬ä¸€é¡¹å’Œ$R$æ— å…³ï¼Œç¬¬äºŒé¡¹$R^TR=I$ å¯çŸ¥å…¶å’ŒRä¹Ÿæ— å…³ï¼Œäºæ˜¯ä¼˜åŒ–æ—¶æˆ‘ä»¬ä»…ä»…å…³æ³¨æœ€åä¸€é¡¹ï¼Œå…¶ä¼˜åŒ–çš„ç›®æ ‡å‡½æ•°å˜ä¸ºï¼š \\sum_{i=1}^{n}-\\boldsymbol{q}_{i}^{\\mathrm{T}} \\boldsymbol{R} \\boldsymbol{q}_{i}^{\\prime}=\\sum_{i=1}^{n}-\\operatorname{tr}\\left(\\boldsymbol{R} \\boldsymbol{q}_{i}^{\\prime} \\boldsymbol{q}_{i}^{\\mathrm{T}}\\right)=-\\operatorname{tr}\\left(\\boldsymbol{R} \\sum_{i=1}^{n} \\boldsymbol{q}_{i}^{\\prime} \\boldsymbol{q}_{i}^{\\mathrm{T}}\\right) æœ€åä½¿ç”¨SVåˆ†è§£å¯å¾—ï¼š \\boldsymbol{W}=\\sum_{i=1}^{n} q_{i} \\boldsymbol{q}_{i}^{\\mathrm{T}} . \\quad \\boldsymbol{W}=\\boldsymbol{U} \\boldsymbol{\\Sigma} \\boldsymbol{V}^{\\mathrm{T}} . \\quad \\boldsymbol{R}=\\boldsymbol{U} \\boldsymbol{V}^{\\mathrm{T}} ç„¶åï¼Œå°†æ—‹è½¬çŸ©é˜µå›ºå®šï¼Œä¼˜åŒ–ç¬¬äºŒé¡¹å¯å¾—å¹³ç§»å‘é‡$t$ï¼š \\boldsymbol{t^*}=\\boldsymbol{p}-\\boldsymbol{Rp'} éçº¿æ€§ä¼˜åŒ–æ–¹æ³•BAç®—æ³•æ˜¯ä¸ªä¸‡é‡‘æ²¹å¼çš„æ–¹æ³•ï¼Œå…¶ä¹Ÿå¯ä»¥ä½¿ç”¨åˆ°æœ¬é—®é¢˜ä¸­ï¼Œå…¶è¡¨è¾¾å’ŒPnPä¸Šé¢æ˜¯ä¸€æ ·çš„ï¼Œäºæ˜¯æˆ‘ä»¬å¯å¾—å½“ä½¿ç”¨æç¾¤æ¥è¡¨è¾¾ä½å§¿æ—¶ï¼Œå…¶ç›®æ ‡å‡½æ•°ä¸ºï¼š \\min _{\\boldsymbol{\\xi}}=\\frac{1}{2} \\sum_{i=1}^{n}\\left\\|\\left(\\boldsymbol{p}_{i}-\\exp \\left(\\boldsymbol{\\xi}^{\\wedge}\\right) \\boldsymbol{p}_{i}^{\\prime}\\right)\\right\\|_{2}^{2}ä¸‹é¢æ±‚è§£å•ä¸ªè¯¯å·®é¡¹å…³äºä½å§¿çš„å¯¼æ•°ï¼Œå‰é¢å·²ç»è¿›è¡Œäº†æ¨å¯¼ï¼Œå…¶æä»£æ•°çš„æ‰°åŠ¨æ¨¡å‹çš„è¡¨è¾¾å¼ä¸ºï¼š \\frac{\\partial \\boldsymbol{e}}{\\partial \\delta \\boldsymbol{\\xi}}=-\\left(\\exp \\left(\\boldsymbol{\\xi}^{\\wedge}\\right) \\boldsymbol{p}_{i}^{\\prime}\\right)^{\\odot}å°ç»“ICPä¹Ÿå¯ä»¥ä»éçº¿æ€§ä¼˜åŒ–è§’åº¦æ±‚è§£ï¼Œä½†ï¼š å·²çŸ¥åŒ¹é…æ—¶ï¼ŒICPé—®é¢˜å­˜åœ¨å”¯ä¸€è§£æˆ–æ— ç©·å¤šè§£çš„æƒ…å†µã€‚åœ¨å”¯ä¸€è§£çš„æƒ…å†µä¸‹ï¼Œåªè¦èƒ½æ‰¾åˆ°æå°å€¼è§£ï¼Œé‚£ä¹ˆè¿™ä¸ªæå°å€¼å°±æ˜¯å…¨å±€æœ€ä¼˜å€¼ã€‚å°±æ˜¯ä¸€ä¸ªå‡¸ä¼˜åŒ–çš„é—®é¢˜ã€‚ æ‰€ä»¥æ­£å¸¸æƒ…å†µä¸‹ï¼ŒSVDç»“æœå’Œä¼˜åŒ–ä¸€æ ·ï¼Œä¸”ä¼˜åŒ–å¾ˆå¿«æ”¶æ•›ã€‚ æ³¨æ„ï¼š åœ¨æ¿€å…‰æƒ…å†µä¸‹ï¼ŒåŒ¹é…ç‚¹æœªçŸ¥(è¿™æ˜¯æ¯”è¾ƒå…³å¿ƒçš„é—®é¢˜)ï¼Œå°†æŒ‡å®šæœ€è¿‘ç‚¹ä¸ºåŒ¹é…ç‚¹ã€‚æ­¤æ—¶é—®é¢˜éå‡¸ï¼Œæå°å€¼ä¸ä¸€å®šä¸ºæœ€å°å€¼ã€‚ åˆ©ç”¨éçº¿æ€§ä¼˜åŒ–å¯ä»¥å°†ICPä¸PnPç»“åˆåœ¨ä¸€èµ·æ±‚è§£ã€‚å¯¹äºæ·±åº¦å·²çŸ¥é—®é¢˜æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€èˆ¬çš„3D-3Dæ¥æ±‚è§£ï¼Œè€Œå¯¹äºæ·±åº¦çš„æœªçŸ¥çš„é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ä¸€èˆ¬çš„PnPæœ€å°é‡æŠ•å½±è¯¯å·®æ¥ä¼°è®¡ã€‚ å®è·µé¦–å…ˆè¦æ³¨æ„ä¸€ä¸ªè¯»å–å›¾ç‰‡çš„ç»†èŠ‚ï¼Œåœ¨è¯»å–å›¾ç‰‡æ—¶ï¼Œéœ€è¦æ ¹æ®ä¸å¤ªçš„å›¾ç‰‡è®¾è®¡ä¸å¤ªçš„è¯»å–æ–¹å¼ï¼Œå¦‚æœè®¾ç½®é”™è¯¯ä¼šé€ æˆè¾ƒå¤§çš„è¯¯å·®ã€‚ 1234567891011121314151617181920cv::Mat img_1 = cv::imread(argv[1], CV_LOAD_IMAGE_COLOR);cv::Mat img_2 = cv::imread(argv[2], CV_LOAD_IMAGE_COLOR);cv::Mat depth1 = cv::imread(argv[3], CV_LOAD_IMAGE_UNCHANGED); // æ·±åº¦å›¾ä¸º16ä½æ— ç¬¦å·æ•°ï¼Œå•é€šé“å›¾åƒcv::Mat depth2 = cv::imread(argv[4], CV_LOAD_IMAGE_UNCHANGED); // æ·±åº¦å›¾ä¸º16ä½æ— ç¬¦å·æ•°ï¼Œå•é€šé“å›¾åƒ/* 8bit, color or not */ CV_LOAD_IMAGE_UNCHANGED =-1,/* 8bit, gray */ CV_LOAD_IMAGE_GRAYSCALE =0,/* ?, color */ CV_LOAD_IMAGE_COLOR =1,/* any depth, ? */ CV_LOAD_IMAGE_ANYDEPTH =2,/* ?, any color */ CV_LOAD_IMAGE_ANYCOLOR =4,/* ?, no rotate */ CV_LOAD_IMAGE_IGNORE_ORIENTATION =128 SVDæ–¹æ³•é¦–å…ˆæ˜¯å®ç°SVDçš„å‡½æ•°pose_estimation_3d3d,å…¶è¾“å…¥ä¸»è¦æ˜¯ä¸¤ç»„3Dç‚¹çš„å¼•ç”¨å·²ç»æ—‹è½¬çŸ©é˜µå’Œå¹³ç§»å‘é‡ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657void pose_estimation_3d3d( const vector&lt;cv::Point3f&gt; &amp;pts1, const vector&lt;cv::Point3f&gt; &amp;pts2, cv::Mat &amp;R, cv::Mat &amp;t){ // å®šä¹‰è´¨å¿ƒ cv::Point3f p1, p2; int N = pts1.size(); for(int i = 0; i &lt; N; i++){ p1 += pts1[i]; p2 += pts2[i]; } p1 = cv::Point3d(cv::Vec3f(p1) / N); p2 = cv::Point3d(cv::Vec3f(p2) / N); // å®šä¹‰å»è´¨å¿ƒæ—åæ ‡ vector&lt;cv::Point3d&gt; q1(N), q2(N); for(int i = 0; i &lt; N; i++){ q1[i] = pts1[i] - p1; q2[i] = pts2[i] - p2; } // è®¡ç®—q1 * q2^T Eigen::Matrix3d W = Eigen::Matrix3d::Zero(); for (int i = 0; i &lt; N; i++){ W += Eigen::Vector3d(q1[i].x, q1[i].y, q1[i].z) * Eigen::Vector3d(q2[i].x, q2[i].y, q2[i].z).transpose(); } cout &lt;&lt; &quot;W=&quot; &lt;&lt; endl; // SVD on W å¯¹Wä½¿ç”¨SVDåˆ†è§£ // ComputeFullUæ˜¯ç¨€ç–çŸ©é˜µU Eigen::JacobiSVD&lt;Eigen::Matrix3d&gt; svd(W, Eigen::ComputeFullU | Eigen::ComputeFullV); Eigen::Matrix3d U = svd.matrixU(); Eigen::Matrix3d V = svd.matrixV(); cout &lt;&lt; &quot;U=&quot; &lt;&lt; U &lt;&lt; endl; cout &lt;&lt; &quot;V=&quot; &lt;&lt; V &lt;&lt; endl; Eigen::Matrix3d R_ = U * (V.transpose()); if (R_.determinant() &lt; 0) { R_ = -R_; // ä¿è¯å§¿æ€çŸ©é˜µçš„è¾“å‡ºä¹‹æ­£ } // æ±‚è§£t Eigen::Vector3d t_ = Eigen::Vector3d(p1.x, p1.y, p1.z) - R_ * Eigen::Vector3d(p2.x, p2.y, p2.z); // å°†EigençŸ©é˜µè½¬åŒ–ä¸ºCV::Mat() R = (cv::Mat_&lt;double&gt;(3, 3) &lt;&lt; R_(0, 0), R_(0, 1), R_(0, 2), R_(1, 0), R_(1, 1), R_(1, 2), R_(2, 0), R_(2, 1), R_(2, 2) ); t = (cv::Mat_&lt;double&gt;(3, 1) &lt;&lt; t_(0, 0), t_(1, 0), t_(2, 0));} G2Oæ–¹æ³•å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¯¹äºG2Oæ¥æ‰€ï¼Œåœ¨ç¼–è¯‘çš„æ—¶å€™éœ€è¦å°†å…¶åŠ å…¥åˆ°åŠ¨æ€é“¾æ¥åº“ä¸­ã€‚ 1234add_executable(pose_estimation_3d3d pose_estimation_3d3d.cpp)target_link_libraries(pose_estimation_3d3d ${OpenCV_LIBS})target_link_libraries(pose_estimation_3d3d Sophus::Sophus)target_link_libraries(pose_estimation_3d3d ${G2O_CORE_LIBRARY} ${G2O_STUFF_LIBRARY}) è¿™ä¸€éƒ¨åˆ†æ˜¯å’ŒPnPå’Œç±»ä¼¼ï¼Œå°±æ˜¯ä¸€ä¸ªå°†åŸæ¥çš„æš‘è¾“å…¥ä»3Dã€2Då˜æˆæ˜¯3Dã€3Dï¼Œå…¶ä»–éƒ¨åˆ†åŸºæœ¬ç›¸ä¼¼ã€‚ é¦–å…ˆåˆ›å»ºç‚¹å’Œè¾¹ã€‚ è¿™é‡Œçš„åŸºæœ¬åŸç†æ˜¯å°†å‚è€ƒç‚¹ä¹˜ä»¥å¾…ä¼˜åŒ–çš„çŸ©é˜µå¾—åˆ°å½“å‰ç‚¹çš„ä¼°è®¡å€¼ï¼Œç„¶åå’Œå½“å‰ç‚¹ä½œå·®ï¼Œè®¡ç®—3Dç‚¹çš„ä¸‰åæ ‡çš„å·®ã€‚å› æ­¤å…¶è¾¹çš„ç»´åº¦å°±ä¸º3. 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748/// vertex and edges used in g2o baclass VertexPose : public g2o::BaseVertex&lt;6, Sophus::SE3d&gt; {public: EIGEN_MAKE_ALIGNED_OPERATOR_NEW; virtual void setToOriginImpl() override { _estimate = Sophus::SE3d(); } /// left multiplication on SE3 virtual void oplusImpl(const double *update) override { Eigen::Matrix&lt;double, 6, 1&gt; update_eigen; update_eigen &lt;&lt; update[0], update[1], update[2], update[3], update[4], update[5]; _estimate = Sophus::SE3d::exp(update_eigen) * _estimate; } virtual bool read(istream &amp;in) override {} virtual bool write(ostream &amp;out) const override {}};/// g2o edgeclass EdgeProjectXYZRGBDPoseOnly : public g2o::BaseUnaryEdge&lt;3, Eigen::Vector3d, VertexPose&gt; {public: EIGEN_MAKE_ALIGNED_OPERATOR_NEW; EdgeProjectXYZRGBDPoseOnly(const Eigen::Vector3d &amp;point) : _point(point) {} virtual void computeError() override { const VertexPose *pose = static_cast&lt;const VertexPose *&gt; ( _vertices[0] ); _error = _measurement - pose-&gt;estimate() * _point; } virtual void linearizeOplus() override { VertexPose *pose = static_cast&lt;VertexPose *&gt;(_vertices[0]); Sophus::SE3d T = pose-&gt;estimate(); Eigen::Vector3d xyz_trans = T * _point; _jacobianOplusXi.block&lt;3, 3&gt;(0, 0) = -Eigen::Matrix3d::Identity(); _jacobianOplusXi.block&lt;3, 3&gt;(0, 3) = Sophus::SO3d::hat(xyz_trans); } bool read(istream &amp;in) {} bool write(ostream &amp;out) const {}protected: Eigen::Vector3d _point;}; è¿™é‡Œåœ¨æ±‚è§£å¯¼æ•°æ—¶è¦æ³¨æ„ï¼Œå…¶æ±‚å¯¼çš„å¯¹è±¡æ˜¯$-Tp$ï¼Œå› æ­¤å…¶æ±‚å¯¼çš„ç»“æœè¦åœ¨ä¸Šå¼çš„åŸºç¡€ä¸ŠåŠ ç¬¦å·ã€‚ ä¹‹ååˆ›å»ºä¼˜åŒ–å’Œæ‰§è¡Œçš„å‡½æ•°ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051void bundleAdjustment( const vector&lt;cv::Point3f&gt; &amp;pts1, const vector&lt;cv::Point3f&gt; &amp;pts2, cv::Mat &amp;R, cv::Mat &amp;t) { // æ„å»ºå›¾ä¼˜åŒ–ï¼Œå…ˆè®¾å®šg2o typedef g2o::BlockSolverX BlockSolverType; typedef g2o::LinearSolverDense&lt;BlockSolverType::PoseMatrixType&gt; LinearSolverType; // çº¿æ€§æ±‚è§£å™¨ç±»å‹ // æ¢¯åº¦ä¸‹é™æ–¹æ³•ï¼Œå¯ä»¥ä»GN, LM, DogLeg ä¸­é€‰ auto solver = new g2o::OptimizationAlgorithmLevenberg( g2o::make_unique&lt;BlockSolverType&gt;(g2o::make_unique&lt;LinearSolverType&gt;())); g2o::SparseOptimizer optimizer; // å›¾æ¨¡å‹ optimizer.setAlgorithm(solver); // è®¾ç½®æ±‚è§£å™¨ optimizer.setVerbose(true); // æ‰“å¼€è°ƒè¯•è¾“å‡º // vertex VertexPose *pose = new VertexPose(); // camera pose pose-&gt;setId(0); pose-&gt;setEstimate(Sophus::SE3d()); optimizer.addVertex(pose); // edges for (size_t i = 0; i &lt; pts1.size(); i++) { EdgeProjectXYZRGBDPoseOnly *edge = new EdgeProjectXYZRGBDPoseOnly( Eigen::Vector3d(pts2[i].x, pts2[i].y, pts2[i].z)); edge-&gt;setVertex(0, pose); edge-&gt;setMeasurement(Eigen::Vector3d( pts1[i].x, pts1[i].y, pts1[i].z)); edge-&gt;setInformation(Eigen::Matrix3d::Identity()); optimizer.addEdge(edge); } chrono::steady_clock::time_point t1 = chrono::steady_clock::now(); optimizer.initializeOptimization(); optimizer.optimize(10); chrono::steady_clock::time_point t2 = chrono::steady_clock::now(); chrono::duration&lt;double&gt; time_used = chrono::duration_cast&lt;chrono::duration&lt;double&gt;&gt;(t2 - t1); cout &lt;&lt; &quot;optimization costs time: &quot; &lt;&lt; time_used.count() &lt;&lt; &quot; seconds.&quot; &lt;&lt; endl; cout &lt;&lt; endl &lt;&lt; &quot;after optimization:&quot; &lt;&lt; endl; cout &lt;&lt; &quot;T=\\n&quot; &lt;&lt; pose-&gt;estimate().matrix() &lt;&lt; endl; // convert to cv::Mat Eigen::Matrix3d R_ = pose-&gt;estimate().rotationMatrix(); Eigen::Vector3d t_ = pose-&gt;estimate().translation(); R = (cv::Mat_&lt;double&gt;(3, 3) &lt;&lt; R_(0, 0), R_(0, 1), R_(0, 2), R_(1, 0), R_(1, 1), R_(1, 2), R_(2, 0), R_(2, 1), R_(2, 2) ); t = (cv::Mat_&lt;double&gt;(3, 1) &lt;&lt; t_(0, 0), t_(1, 0), t_(2, 0));}","link":"/2022/06/11/SLAM/ch7-%E8%A7%86%E8%A7%89%E9%87%8C%E7%A8%8B%E8%AE%A1-%E7%AC%AC%E5%9B%9B%E9%83%A8%E5%88%86-ICP/"},{"title":"Ch8 è§†è§‰é‡Œç¨‹è®¡ ç¬¬ä¸€éƒ¨åˆ† å…‰æµæ³•","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦è®²è§£çš„æ˜¯å…‰æµæ³•ï¼Œä»–æ˜¯ç›´æ¥æ³•çš„åŸºç¡€ï¼Œç›¸äº¤ç‰¹å¾ç‚¹æ³•å…¶ä¸»è¦çš„æ”¹è¿›æ˜¯å–æ¶ˆçš„æè¿°å­çš„è®¡ç®—å’Œç‰¹å¾åŒ¹é…ï¼Œå¤§å¤§çš„èŠ‚çœäº†å®è·µä¸Šçš„å¼€é”€ã€‚å…¶ä¸»è¦åŸºäºçš„å‡è®¾æ˜¯ç°åº¦ä¸å˜ç†è®ºï¼Œåœ¨è¾ƒä¸ºè¿ç»­å›¾ç‰‡ä¸Šä¸é”™çš„ç»“æœï¼Œä¸ºäº†è§£å†³å…‰æµéå‡¸çš„é—®é¢˜ï¼Œæœ¬æ–‡å¼•å…¥äº†å›¾åƒé‡‘å­—å¡”ï¼Œè§£å†³çš„æ˜¯ä¼˜åŒ–æ±‚è§£é‡åˆ°çš„éå‡¸é—®é¢˜ï¼Œæœ€åä½¿ç”¨OpenCVè‡ªå¸¦çš„æ±‚è§£å™¨å’Œæ‰‹å†™çš„é«˜æ–¯ç‰›é¡¿æ³•çš„æ±‚è§£å™¨æ¥ç¼–ç¨‹å®ç°ã€‚ å…‰æµæ³•å’Œç›´æ¥æ³•çš„å¼•å…¥å›é¡¾æ•´ä¸ªç‰¹å¾ç‚¹æå–ç®—æ³•ï¼š åœ¨å›¾åƒä¸­æå–ç‰¹å¾ç‚¹å¹¶è®¡ç®—ç‰¹å¾æè¿°ï¼Œè€—æ—¶10ms+ã€‚ åœ¨ä¸åŒå›¾åƒä¸­å¯»æ‰¾ç‰¹å¾åŒ¹é…ï¼Œè€—æ—¶$O(n^2)$ ã€‚ åˆ©ç”¨åŒ¹é…ç‚¹ä¿¡æ¯è®¡ç®—ç›¸æœºä½å§¿ï¼Œä¸æ˜¯å¾ˆè€—è´¹æ—¶é—´ï¼Œè€—æ—¶&lt;1msã€‚ å°½ç®¡ä¼ ç»Ÿçš„ç‰¹å¾åŒ¹é…ç®—æ³•æ˜¯å½“ä¸‹çš„ä¸»æµï¼Œä½†æ˜¯å…¶ä¹Ÿå…·æœ‰å¾ˆå¤§çš„å±€é™æ€§ï¼š å…³é”®ç‚¹çš„æå–å’Œæè¿°å­çš„è®¡ç®—æ˜¯ç›¸å½“è€—æ—¶çš„ï¼Œå¤§éƒ¨åˆ†çš„æ—¶é—´å…¶å®éƒ½æµªè´¹åœ¨ç®—æ³•çš„æå–ä¸Šäº†ã€‚ ä½¿ç”¨ç‰¹å¾ç‚¹æ—¶ï¼Œç”±äºå…¶å¿½ç•¥äº†é™¤å»ç‰¹å¾ç‚¹ä»¥å¤–çš„å…¶ä»–çš„ä¿¡æ¯ï¼Œå¦‚æœä¸ºäº†åŠ å¿«è¿ç®—çš„é€Ÿåº¦è€Œå‡å°‘äº†ç‰¹å¾ç‚¹çš„æå–æ—¶ï¼Œä¸¤å¹…å›¾ä¸Šæå–çš„ç‰¹å¾ç‚¹å¯èƒ½ä¸ä¸€è‡´ã€‚ä¿¡æ¯çš„ä¸¢å¤±è¾ƒä¸ºä¸¥é‡ã€‚ ç›¸æœºé‡åˆ°ä¸€äº›ç‰¹å¾ç¼ºå¤±çš„åœ°æ–¹æ—¶ï¼Œæ¯”å¦‚ç™½å¢™å’Œæ¯”è¾ƒå…‰æ»‘çš„æ›²é¢ï¼Œæ­¤æ—¶å¯ä»¥å¾—åˆ°çš„ç‰¹å¾ç‚¹çš„æ•°é‡ä¼šæ˜æ˜¾å‡å°ã€‚ å¯¹äºä¸Šè¿°çš„ä¸€äº›é—®é¢˜ï¼Œä¸»è¦æœ‰ä»¥ä¸‹çš„å‡ ä¸ªè§£å†³çš„æ–¹æ³•ï¼š ä¿ç•™ç‰¹å¾ç‚¹ï¼Œä»…ä»…è®¡ç®—å…³é”®ç‚¹ï¼Œä¸è®¡ç®—æè¿°å­ã€‚ä½¿ç”¨å…‰æµæ¥å¯¹ç‰¹å¾ç‚¹è¿›è¡Œè·Ÿè¸ªï¼Œå›é¿ç‰¹å¾åŒ¹é…çš„å¸¦æ¥çš„æ—¶é—´ä¸Šçš„è€—è´¹ã€‚ ä»…è®¡ç®—å…³é”®ç‚¹ï¼Œä¸è®¡ç®—æè¿°å­ã€‚åŒæ—¶ä½¿ç”¨ç›´æ¥æ³•è®¡ç®—ç‰¹å¾ç‚¹çš„ä¸‹ä¸€ä¸ªæ—¶åˆ»ä½ç½®ã€‚è¿™æ ·å°±å¯ä»¥è·³è¿‡æè¿°å­çš„è®¡ç®—çœå»å…‰æµçš„æ—¶é—´ï¼Œè¿™æ ·å¯ä»¥ä¸è¦è¿›è¡Œé…å¯¹ã€‚ å¯¹äºç›´æ¥æ³•æ¥è®²ï¼Œå…¶å¯ä»¥ä¸è®¡ç®—å…·ä½“åœ°ç‚¹å’Œç‚¹çš„é…å¯¹å…³ç³»ï¼Œä½†æ˜¯é€šè¿‡æœ€å°å…‰åº¦è¯¯å·®æ¥æ±‚å‡ºã€‚ æ ¹æ®ä½¿ç”¨åƒç´ çš„æ•°é‡ï¼Œç›´æ¥æ³•åˆ†ä¸ºç¨€ç–ã€ç¨ å¯†å’ŒåŠç¨ å¯†ä¸‰ç§ä¸ç‰¹å¾ç‚¹æ³•åªèƒ½é‡æ„ç¨€ç–ç‰¹å¾ç‚¹ï¼ˆç¨€ç–åœ°å›¾ï¼‰ç›¸æ¯”ï¼Œç›´æ¥æ³•è¿˜å…·æœ‰æ¢å¤ç¨ å¯†æˆ–åŠç¨ å¯†ç»“æ„çš„èƒ½åŠ›ã€‚ è¿™é‡Œçš„ç›´æ¥æ³•æ˜¯å»ºç«‹åœ¨å…‰æµæ³•çš„åŸºç¡€ä¸Šçš„ï¼Œæœ‰ç€ç›¸åŒçš„å‡è®¾æ¡ä»¶ã€‚å› æ­¤é¦–å…ˆä»‹ç»å…‰æµæ³•æ¥ä¸ºä¹‹åçš„ç›´æ¥æ³•åšé“ºå«ã€‚ åŸºæœ¬æ¦‚å¿µå…‰æµï¼šè¿½è¸ªæºå›¾åƒæŸä¸ªç‚¹åœ¨å…¶ä»–å›¾åƒä¸­çš„è¿åŠ¨ã€‚ ä¸€èˆ¬åˆ†ä¸ºç¨€ç–å…‰æµå’Œç¨ å¯†å…‰æµï¼š ç¨€ç–ä»¥Lucas-Kanade(LK)å…‰æµä¸ºä»£è¡¨ï¼Œç¨€ç–å…‰æµä¸»è¦è®¡ç®—çš„æ˜¯éƒ¨åˆ†åƒç´ ç‚¹çš„è¿åŠ¨ï¼Œç‰¹åˆ«åœ°å¦‚è®¡ç®—å…³é”®ç‚¹ä¹‹é—´çš„è¿åŠ¨å…³ç³»ã€‚ ç¨ å¯†ä»¥Hornâ€“Schunck(HS)å…‰æµä¸ºä»£è¡¨ï¼Œç¨ å¯†å…‰æµä¸»è¦è®¡ç®—çš„æ˜¯å…¨å±€åƒç´ ç‚¹(è¿åŠ¨å‡ºå›¾åƒçš„ç‚¹é™¤å¤–)çš„è¿åŠ¨ã€‚ å…¶æœ¬è´¨ä¸Šæ˜¯ä¼°è®¡åƒç´ åœ¨ä¸åŒæ—¶åˆ»å›¾åƒä¸­çš„è¿åŠ¨ï¼Œæœ¬è®²ä¸»è¦ä»‹ç»çš„ä¸ºLKå…‰æµã€‚ LKå…‰æµåœ¨LKå…‰æµä¸­ï¼Œæˆ‘ä»¬è®¤ä¸ºç›¸æœºå›¾åƒæ˜¯å²æ—¶é—´çš„å˜åŒ–è€Œå˜å¹»çš„ï¼Œäºæ˜¯æˆ‘ä»¬å®šä¹‰æŸä¸€æ—¶åˆ»ï¼Œåœ¨(x,y)åƒç´ ä¸Šçš„ç°åº¦å€¼ä¸º$I(x,y,t)$ ï¼Œå…¶å€¼åŸŸä¸ºå›¾åƒçš„ç°åº¦ã€‚ ä¹‹åå¼•å…¥LKå…‰æµçš„å…³é”®å‡è®¾ï¼Œç°åº¦ä¸å˜æ€§å‡è®¾ï¼Œå…¶ä¸»è¦çš„å†…å®¹å°±æ˜¯åŒä¸€ç©ºé—´ç‚¹ä¸Šçš„ç°åº¦å€¼åœ¨å„ä¸ªå›¾åƒä¸­æ˜¯ä¿æŒä¸å˜çš„ã€‚ äºæ˜¯å¯å¾—ï¼Œåœ¨$t$æ—¶åˆ»$(x,y)$å¤„çš„åƒç´ ï¼Œæˆ‘ä»¬è®¾$t+dt$ æ—¶åˆ»å®ƒè¿åŠ¨åˆ°$(x+dx,y+dy)$ å¤„ï¼Œç”±äºç°åº¦ä¸å˜ï¼Œæˆ‘ä»¬æœ‰ï¼š \\boldsymbol{I}(x+dx,y+dy,t+dt)=\\boldsymbol{I}(x,y,t)è¿™ä¸ªå‡è®¾æ˜¯ä¸€ä¸ªå¾ˆå¼ºçš„å‡è®¾ï¼Œå®é™…ä¸­å¾ˆå¯èƒ½ä¸æˆç«‹ï¼Œä½†æ˜¯äº‹å®ä¸Šï¼Œç›¸æœºçš„é«˜å…‰/é˜´å½±/æè´¨/æ›å…‰ç­‰ä¸åŒï¼Œè¿™æ—¶ç°åº¦ä¸å˜æ€§å‡è®¾æ˜¯æ˜æ˜¾ä¸æˆç«‹çš„ã€‚ä½†æ˜¯ç›®å‰æˆ‘ä»¬é»˜è®¤å®ƒæˆç«‹ã€‚ äºæ˜¯å¯¹å·¦è¾¹è¿›è¡ŒTaylorå±•å¼€å¯å¾—ï¼š \\boldsymbol{I}(x+\\mathrm{d} x, y+\\mathrm{d} y, t+\\mathrm{d} t) \\approx \\boldsymbol{I}(x, y, t)+\\frac{\\partial \\boldsymbol{I}}{\\partial x} \\mathrm{~d} x+\\frac{\\partial \\boldsymbol{I}}{\\partial y} \\mathrm{~d} y+\\frac{\\partial \\boldsymbol{I}}{\\partial t} \\mathrm{~d} tå› ä¸ºç°åº¦ä¸å˜å‡è®¾ï¼Œå°†ä¸Šè¿°ç›¸ç­‰çš„ä¸¤é¡¹çº¦æ‰ï¼š \\frac{\\partial \\boldsymbol{I}}{\\partial x} \\mathrm{~d} x+\\frac{\\partial \\boldsymbol{I}}{\\partial y} \\mathrm{~d} y+\\frac{\\partial \\boldsymbol{I}}{\\partial t} \\mathrm{~d} t=0ä¹‹åï¼Œä¸¤è¾¹åŒæ—¶é™¤ä»¥$dt$ å¯å¾—ï¼š \\frac{\\partial \\boldsymbol{I}}{\\partial x} \\frac{\\mathrm{d} x}{\\mathrm{~d} t}+\\frac{\\partial \\boldsymbol{I}}{\\partial y} \\frac{\\mathrm{d} y}{\\mathrm{~d} t}=-\\frac{\\partial \\boldsymbol{I}}{\\partial t}è¿™é‡Œçš„å…‰æµçš„æ¢¯åº¦ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸­å¿ƒå·®åˆ†æ¥åšï¼Œäºæ˜¯å¾—åˆ°å…³äº$dx/dt,dy/dt$çš„äºŒå…ƒä¸€æ¬¡æ–¹ç¨‹ï¼Œè¿™ä¸ªæ–¹ç¨‹å¼æ¬ å®šçš„ï¼Œéœ€è¦è¿›è¡Œé¢å¤–çš„çº¦æŸã€‚ \\left[\\begin{array}{ll}\\boldsymbol{I}_{x} & \\boldsymbol{I}_{y}\\end{array}\\right]\\left[\\begin{array}{l}u \\\\ v\\end{array}\\right]=-\\boldsymbol{I}_{t}äºæ˜¯æˆ‘ä»¬å¼•å…¥äº†LKå…‰æµç‰¹æœ‰çš„å‡è®¾ï¼Œæ¥å¼•å…¥ä¸€å®šçš„å¤–éƒ¨çº¦æŸï¼Œåœ¨æŸä¸€çª—å£å†…çš„åƒç´ å…·æœ‰ç›¸åŒçš„è¿åŠ¨ã€‚äºæ˜¯è¿˜å¯ä»¥å°†è¿™ä¸ªå‡ºå£å†…çš„æ‰€æœ‰çš„ç‚¹ä»£å…¥æ–¹ç¨‹å¯å¾—ï¼š \\left[\\begin{array}{ll}\\boldsymbol{I}_{x} & \\boldsymbol{I}_{y}\\end{array}\\right]_{k}\\left[\\begin{array}{c}u \\\\ v\\end{array}\\right]=-\\boldsymbol{I}_{t k}, \\quad k=1, \\ldots, w^{2}å…¶ä¸­çš„Aå’ŒbçŸ©é˜µä¸ºï¼š \\boldsymbol{A}=\\left[\\begin{array}{c}{\\left[\\boldsymbol{I}_{x}, \\boldsymbol{I}_{y}\\right]_{1}} \\\\ \\vdots \\\\ {\\left[\\boldsymbol{I}_{x}, \\boldsymbol{I}_{y}\\right]_{k}}\\end{array}\\right], \\boldsymbol{b}=\\left[\\begin{array}{c}\\boldsymbol{I}_{t 1} \\\\ \\vdots \\\\ \\boldsymbol{I}_{t k}\\end{array}\\right]æ±‚è§£ä¸Šè¿°çš„è¶…å®šçš„æ–¹ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æœ€å°äºŒä¹˜æ³•æ¥è¿›è¡Œæ±‚è§£ï¼š \\left[\\begin{array}{l}u \\\\ v\\end{array}\\right]^{*}=-\\left(\\boldsymbol{A}^{\\mathrm{T}} \\boldsymbol{A}\\right)^{-1} \\boldsymbol{A}^{\\mathrm{T}} \\boldsymbol{b}è¿™ä¸ªé—®é¢˜å¯ä»¥è½¬åŒ–ä¸ºä¸€ä¸ªæœ€å°äºŒä¹˜æ³•çš„é—®é¢˜ï¼Œæ±‚è§£ä¸€ä¸ªéçº¿æ€§çš„æœ€å°äºŒä¹˜çº¦æŸï¼Œä½¿ç”¨G-Næ³•æˆ–L-Mæ³•æ¥æ±‚è§£ï¼Œå¯ä»¥ä½¿ç”¨G2Oåº“ã€‚ æ ¹æ®æ±‚è§£å¾—åˆ°çš„ç»“æœï¼Œå¯çŸ¥å›¾åƒæ˜¯å‘ç€æŸä¸ªæ–¹å‘ä¸æ–­åœ°ç§»åŠ¨ï¼Œè¿™ä¸ªæ–¹å‘ä¼˜åŒ–æŸå¤±å€¼æ˜¯æœ€å°çš„ï¼Œäºæ˜¯å°±å¾—åˆ°äº†ä¸€ä¸ªå¤§æ¦‚çš„ç§»åŠ¨è½¨è¿¹ã€‚ ä½†æ˜¯ç”±äºç›¸æœºçš„è¿åŠ¨æ¯”è¾ƒå¿«ï¼Œç§»åŠ¨çš„ä½ç§»ä¹Ÿæ¯”è¾ƒå¤§ï¼Œå› æ­¤å¯¹åº”çš„ç‚¹ä¸ä¸€å®šéƒ½å¯ä»¥è¿½ä¸Šã€‚å› æ­¤å¼•å…¥å›¾åƒé‡‘å­—å¡”æ¥è§£å†³é—®é¢˜ã€‚ ä¸ºäº†ä½¿å¾—å…¶ç‰¹å¾ç‚¹åŒ¹é…åœ¨å›¾åƒå‘ç”Ÿå‰è¿›åé€€æ—¶è¿˜èƒ½å¾ˆå¥½çš„å·¥ä½œï¼Œå› æ­¤å¯ä»¥å°†ç‰¹å¾ç‚¹ä¸åŒçš„å±‚ä¹‹é—´è¿›è¡ŒåŒ¹é…ã€‚ åœ¨å…‰æµé‡Œï¼Œä¸€èˆ¬åœ°ä¸ºäº†ä¿è¯ç²¾åº¦ï¼Œåªæœ‰åœ¨ä½ç§»å¾ˆå°æ—¶æ‰è¡Œï¼Œå‡å¦‚ä¸€èˆ¬åœ¨5pxåƒç´ å†…æ‰èƒ½æ›´å¥½çš„ä¿è¯å…¶ç²¾åº¦ï¼Œæœ‰æ—¶ç›®æ ‡ç‚¹ç§»åŠ¨çš„è¿‡å¿«ä¼šé€ æˆä¸¤ä¸ªå›¾åƒä¸Šç‰¹å¾ç‚¹ç›¸å·®çš„åƒç´ è¿‡å¤§ï¼Œè·¯çº¿ä¸å‡†ç¡®ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ç¼©å°çš„å›¾ç‰‡ä¸Šè¿›è¡Œç¬¬ä¸€æ¬¡çš„åŒ¹é…ï¼Œä¹‹åé€æ­¥åŒæ—¶æ”¾å¤§åˆ°ä¸‹ä¸€å±‚è¿›è¡Œç²¾ç¡®ä¸€ç‚¹çš„åŒ¹é…ï¼Œè¿›è€Œå¾—åˆ°å…¶å‡†ç¡®çš„è·¯å¾„ã€‚ä¸€å¼€å§‹å¯èƒ½ä¸ä¸€å®šæ‰¾åˆ°ç²¾ç¡®è§£ï¼Œè¿™ä¸ªé—®é¢˜æœ‰å¯èƒ½æ—¶éå‡¸çš„é—®é¢˜ã€‚ æ€»ç»“ï¼š å…‰æµæ³•å¯ä»¥çœ‹æˆæœ€å°åŒ–åƒç´ è¯¯å·®çš„éçº¿æ€§ä¼˜åŒ–ï¼› å…¶æ¯æ¬¡ä¸»è¦ä½¿ç”¨äº†Taylorä¸€é˜¶è¿‘ä¼¼ï¼Œè¿™æ ·ä½¿å¾—åœ¨ç¦»ä¼˜åŒ–ç‚¹è¾ƒè¿œæ—¶æ•ˆæœä¸ä½³ï¼Œå¾€å¾€éœ€è¦è¿­ä»£å¤šæ¬¡ï¼› è¿åŠ¨è¾ƒå¤§æ—¶è¦ä½¿ç”¨é‡‘å­—å¡”ï¼Œä¸æ–­è¿­ä»£å¯ä»¥è·å¾—æ›´ç²¾ç¡®çš„è§£ï¼› å…‰æµæ³•å¯ä»¥ç”¨äºè·Ÿè¸ªå›¾åƒä¸­çš„ç¨€ç–å…³é”®ç‚¹çš„è¿åŠ¨è½¨è¿¹ï¼› å¾—åˆ°é…å¯¹ç‚¹åï¼Œåç»­è®¡ç®—ä¸ç‰¹å¾æ³•VOä¸­ç›¸åŒï¼Œä½¿ç”¨æœ€å°äºŒä¹˜æ¥æ±‚è§£å§¿æ€æˆ–è€…æ—¶æ˜¯è§£æ–¹ç¨‹æ¥æ±‚è§£ï¼› æŒ‰æ–¹æ³•å¯åˆ†ä¸ºæ­£å‘/åå‘+å¹³ç§»/ç»„åˆçš„æ–¹å¼ï¼Œå…·ä½“åœ¨ä¹ é¢˜ä¸­ä»‹ç»ã€‚ ä¼˜ç‚¹ï¼š ç»•è¿‡äº†ç‰¹å¾æè¿°å’Œç‰¹å¾åŒ¹é…ï¼Œç›´æ¥é€šè¿‡trackingçš„æ–¹å¼æ¥å¾—åˆ°å…³é”®ç‚¹çš„å¯¹åº”å…³ç³»ã€‚ ä½¿ç”¨ç‰¹å¾ç‚¹æ³•æ˜¯ï¼Œå…¶ç‰¹å¾ç‚¹çš„æ•°ç›®å‡å°‘ä¹‹åå¯èƒ½å°±å¾ˆéš¾å†æ¬¡æ‰¾åˆ°ï¼Œå› ä¸ºè¿™äº›ç‚¹æœ‰çš„ä¼šç§»å‡ºåˆ°å›¾åƒå¤–ï¼Œæœ‰çš„ä¼šè¢«é®ä½ï¼Œæœ‰çš„ä¼šå˜å½¢å¯¼è‡´ç®—æ³•æ— æ³•è¯†åˆ«ã€‚ä½†æ˜¯å…‰æµçš„è¯å¯ä»¥å†è¾ƒå°‘çš„ç‰¹å¾ç‚¹ä¸‹å¾—åˆ°ä¸é”™çš„ç»“æœã€‚ å…‰æµè§£å†³å¹³ç§»çš„æ•ˆæœå¾ˆå¥½ï¼Œä½†æ˜¯å¦‚æœå‡ºç°æ—‹è½¬ã€æ»šè½¬æ—¶è¦ä½¿ç”¨è¾ƒä¸ºå¤æ‚çš„æ–¹æ³•æ¥è§£å†³ï¼ŒåŠ å…¥æ—‹è½¬ä¸å˜æ€§çš„å‡è®¾ã€‚ å¯¹äºæˆ‘ä»¬å¤æ‚æ›²é¢ï¼Œå…¶çº¹ç†ä¿¡æ¯è¾ƒå¼±ï¼Œä¹Ÿå¾ˆéš¾ç”¨å…‰æµæ³•è¯†åˆ«ã€‚å› ä¸ºå…¶ç³»æ•°çŸ©é˜µçš„ç³»æ•°å¯¹äºçš„æ—¶å…‰æµçš„æ¢¯åº¦å€¼ï¼Œå¾ˆéš¾è§£å‡ºå¾ˆå¥½çš„è§£ã€‚SLAMç»å¸¸æ‹¿ç™½å¢™æ¥è·ç¦»ï¼Œå…¶ç»“æœå’Œä¸€èˆ¬çš„æ›²é¢ä¸€æ ·åªæœ‰å‡å¼±çš„æ˜æš—å…³ç³»ï¼Œä¼šé€ æˆåŒ¹é…å¤±è¯¯ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ç”¨ç›´æ¥æ³•è§£å†³ã€‚ å®è·µé¦–å…ˆå‡†å¤‡å¥½ç›¸åº”çš„CMakeList.txtæ–‡ä»¶ï¼š 123456789101112131415161718192021cmake_minimum_required(VERSION 3.0.0)project(vo2 VERSION 0.1.0)set(CMAKE_BUILD_TYPE &quot;Release&quot;)add_definitions(&quot;-DENABLE_SSE&quot;)set(CMAKE_CXX_FLAGS &quot;-std=c++11 ${SSE_FLAGS} -g -O3 -march=native&quot;)find_package(OpenCV 4 REQUIRED)find_package(Sophus REQUIRED)find_package(Pangolin REQUIRED)include_directories( ${OpenCV_INCLUDE_DIRS} ${G2O_INCLUDE_DIRS} ${Sophus_INCLUDE_DIRS} &quot;/usr/include/eigen3/&quot; ${Pangolin_INCLUDE_DIRS})add_executable(optical_flow optical_flow.cpp)target_link_libraries(optical_flow ${OpenCV_LIBS}) ä½¿ç”¨LKå…‰æµé¦–å…ˆä½¿ç”¨OpenCVé‡Œé¢è‡ªå¸¦çš„å…‰æµç®—æ³•æ¥è¿›è¡Œè¯†åˆ«ï¼Œæå–ç¬¬ä¸€å¼ çš„è§’ç‚¹ï¼Œä¹‹åé€šè¿‡å…‰æµæ¥è¿½è¸ªå…¶åœ¨ç¬¬äºŒå¼ å›¾ç‰‡ä¸­çš„ä½ç½®ã€‚ ä¸»è¦çš„ä»£ç å¦‚ä¸‹ï¼Œåœ¨main.cppé‡Œï¼Œä¸»è¦æ˜¯é¦–å…ˆè¯»å–å›¾ç‰‡ã€‚ 123// IMREAD_GRAYSCALE = 0cv::Mat img_1 = cv::imread(file_1, 0);cv::Mat img_2 = cv::imread(file_2, 0); å¯¹äºç‰¹å¾ç‚¹çš„æå–ï¼Œè¿™é‡Œä½¿ç”¨ä¸ºGFTTDetectoræå–å™¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡GFTTDetector::create()æ¥åˆ›å»ºä¸€ä¸ªGFTTç‰¹å¾ç‚¹æ£€æµ‹å™¨ï¼Œå…¶å‚æ•°å¦‚ä¸‹ï¼š å‚æ•° maxCornersï¼šæ£€æµ‹åˆ°çš„æœ€å¤§è§’ç‚¹æ•°é‡ï¼› å‚æ•°qualityLevelï¼šè¾“å‡ºè§’ç‚¹çš„è´¨é‡ç­‰çº§ï¼Œå–å€¼èŒƒå›´æ˜¯ [ 0 , 1 ]ï¼›å¦‚æœæŸä¸ªå€™é€‰ç‚¹çš„è§’ç‚¹å“åº”å€¼å°äºï¼ˆqualityLeve * æœ€å¤§è§’ç‚¹å“åº”å€¼ï¼‰ï¼Œåˆ™è¯¥ç‚¹ä¼šè¢«æŠ›å¼ƒï¼Œç›¸å½“äºåˆ¤å®šæŸå€™é€‰ç‚¹ä¸ºè§’ç‚¹çš„é˜ˆå€¼ï¼› å‚æ•°minDistanceï¼šä¸¤ä¸ªè§’ç‚¹é—´çš„æœ€å°è·ç¦»ï¼Œå¦‚æœæŸä¸¤ä¸ªè§’ç‚¹é—´çš„è·ç¦»å°äºminDistanceï¼Œåˆ™ä¼šè¢«è®¤ä¸ºæ˜¯åŒä¸€ä¸ªè§’ç‚¹ï¼› å‚æ•°blockSizeï¼šè®¡ç®—è§’ç‚¹å“åº”å€¼çš„é‚»åŸŸå¤§å°ï¼Œé»˜è®¤å€¼ä¸º3ï¼›å¦‚æœè¾“å…¥å›¾åƒçš„åˆ†è¾¨ç‡æ¯”è¾ƒå¤§ï¼Œå¯ä»¥é€‰æ‹©æ¯”è¾ƒå¤§çš„blockSizeï¼› å‚æ•°useHarrisDectorï¼šå¸ƒå°”ç±»å‹ï¼Œå¦‚æœä¸ºtrueåˆ™ä½¿ç”¨Harrisè§’ç‚¹æ£€æµ‹ï¼›é»˜è®¤ä¸ºfalseï¼Œä½¿ç”¨shi-tomasè§’ç‚¹æ£€æµ‹ç®—æ³•ï¼› å‚æ•°kï¼šåªåœ¨ä½¿ç”¨Harrisè§’ç‚¹æ£€æµ‹æ—¶æ‰ç”Ÿæ•ˆï¼Œä¹Ÿå°±æ˜¯è®¡ç®—è§’ç‚¹å“åº”å€¼æ—¶çš„ç³»æ•°kã€‚ 12345// é¦–å…ˆï¼Œè¯»å–ç¬¬ä¸€ä¸ªå›¾ç‰‡é‡Œé¢çš„ç‰¹å¾ç‚¹vector&lt;cv::KeyPoint&gt; kp1;cv::Ptr&lt;cv::GFTTDetector&gt; detector = cv::GFTTDetector::create(500, 0.01, 20);// å‚æ•°çš„ä¸»è¦å«ä¹‰æ˜¯ æœ€å¤§çš„è§’ç‚¹æ•°ï¼Œè¾“å‡ºç‚¹çš„è´¨é‡ï¼Œæœ€å°è·ç¦»detector -&gt; detect(img_1, kp1); ä¹‹åå°±ä½¿ç”¨OpenCVä½¿ç”¨è‡ªå¸¦çš„å…‰æµå‡½æ•°è¿›è¡Œè¯»å–ã€‚ calcOpticalFlowPyrLKå‡½æ•°ä¸»è¦å­˜åœ¨äºopencv.hppé‡Œé¢ã€‚ 12345678CV_EXPORTS_W void calcOpticalFlowPyrLK( InputArray prevImg, InputArray nextImg, InputArray prevPts, InputOutputArray nextPts,OutputArray status, OutputArray err,Size winSize = Size(21,21), int maxLevel = 3,TermCriteria criteria = TermCriteria(TermCriteria::COUNT+TermCriteria::EPS, 30, 0.01), int flags = 0, double minEigThreshold = 1e-4 ); int maxLevel = 3 è§†è§‰é‡‘å­—å¡”çš„å±‚æ•°ï¼› Size winSize = Size(21,21) ä»£è¡¨çš„ä¸ºä¸€æ¬¡æ‰€å–patchå—çš„å¤§å°ï¼Œå³æœ‰21*21=441ä¸ªæ ·æœ¬ç‚¹ã€‚ å‰ä¸‰ä¸ªå‚æ•°prevImg nextImg prevPtsä¸ºè¾“å…¥çš„ç¬¬ä¸€ä¸ªå›¾ç‰‡ï¼Œç¬¬äºŒå¼ å›¾ç‰‡ï¼Œä»¥åŠç‰¹å¾ç‚¹çš„ä½ç½®ã€‚ ç¬¬4ã€5ã€6ä¸ªå‚æ•°ä¸ºnextPts status err åˆ†åˆ«æ˜¯è®¡ç®—å¾—å‡ºç¬¬äºŒä¸ªç‚¹çš„ç‰¹å¾ç‚¹ã€è¾“å‡ºçŠ¶æ€å’Œè¯¯å·®ã€‚ int flags = 0 å¯ä»¥è®¾ç½®æˆä½¿ç”¨åˆå€¼æ¥è¿›è¡Œä¼˜åŒ–ã€‚ 1234567@param flags operation flags: - **OPTFLOW_USE_INITIAL_FLOW** uses initial estimations, stored in nextPts; if the flag is not set, then prevPts is copied to nextPts and is considered the initial estimate. - **OPTFLOW_LK_GET_MIN_EIGENVALS** use minimum eigen values as an error measure (see minEigThreshold description); if the flag is not set, then L1 distance between patches around the original and a moved point, divided by number of pixels in a window, is used as a error measure. 12345678910111213// ä½¿ç”¨è‡ªå¸¦çš„å…‰æµå‡½æ•°è¿›è¡Œè¯»å–// use opencv's flow for validationvector&lt;cv::Point2f&gt; pt1, pt2;for(auto &amp;kp: kp1) pt1.push_back(kp.pt);vector&lt;uchar&gt; status;vector&lt;float&gt; error;t1 = chrono::steady_clock::now();// æ­¤å‡½æ•°åœ¨opencv.hppé‡Œé¢cv::calcOpticalFlowPyrLK(img_1, img_2, pt1, pt2, status, error);// è¿™é‡Œçš„å‚æ•°ï¼Œå…¶ä¸‰ä¸ªä¸ºè¾“å…¥ï¼Œåé¢ä¸‰ä¸ªä¸ºè¾“å‡ºt2 = chrono::steady_clock::now();time_used = chrono::duration_cast&lt;chrono::duration&lt;double&gt;&gt;(t2 - t1);cout &lt;&lt; &quot;optical flow by opencv: &quot; &lt;&lt; time_used.count() &lt;&lt; endl; æœ€åè¿›è¡Œå¯è§†åŒ–æ“ä½œï¼Œæ˜¾ç¤ºå‡ºå…¶ç‰¹å¾ç‚¹çš„ä½ç½®ç”¨ç»¿çš„çš„åœ†åœˆè¡¨ç¤ºï¼Œå’Œæ•æ‰åˆ°çš„ç§»åŠ¨æƒ…å†µä½¿ç”¨çº¢è‰²çš„ç»†çº¿è¡¨ç¤ºã€‚ cvtColoræ˜¯ç”¨æ¥å°†å›¾ç‰‡çš„ç±»å‹è¿›è¡Œè½¬æ¢çš„å‡½æ•°ï¼Œè¿™é‡Œimgproc/types_c.h -&gt; CV_GRAY2BGRä¸­çš„CV_GRAY2BGRä¸ºå°†ç°åº¦å›¾è½¬æ¢ä¸ºBGRå›¾ã€‚ cv::Scalar(0, 250, 0) ç”¨æ¥è®¾ç½®é¢œè‰²ï¼Œè¿™é‡Œçš„å«ä¹‰æ—¶BGRï¼Œè“ç»¿çº¢ã€‚ 123456789101112131415161718cv::Mat img2_cv;// cvtcolor()å‡½æ•°æ˜¯ä¸€ä¸ªé¢œè‰²ç©ºé—´è½¬æ¢å‡½æ•°ï¼Œ// å¯ä»¥å®ç°RGBé¢œè‰²å‘HSVï¼ŒHSIç­‰é¢œè‰²ç©ºé—´è½¬æ¢ã€‚ä¹Ÿå¯ä»¥è½¬æ¢ä¸ºç°åº¦å›¾ã€‚cv::cvtColor(img_2, img2_cv, CV_GRAY2BGR);// imgproc/types_c.h -&gt; CV_GRAY2BGRfor(int i = 0; i &lt; pt2.size(); i++){ if (status[i]) { // æ ‡è®°ç‰¹å¾ç‚¹ cv::circle(img2_cv, pt2[i], 2, cv::Scalar(0, 250, 0), 2); // ä½¿ç”¨ç›´çº¿æ¥æ˜¾ç¤ºå‡ºç§»åŠ¨çš„æƒ…å†µ cv::line(img2_cv, pt1[i], pt2[i], cv::Scalar(0, 250, 0)); } }cv::imshow(&quot;tracked by opencv&quot;, img2_cv);cv::waitKey(0); ä½¿ç”¨G-Næ–¹æ³•å®ç°å…‰æµå…‰æµå¯ä»¥çœ‹æˆæ—¶ä¸€ä¸ªä¼˜åŒ–çš„é—®é¢˜ï¼Œé€šè¿‡æœ€å°åŒ–åƒç´ çš„è¯¯å·®æ¥ä¼°è®¡æœ€ä¼˜çš„åç§»å€¼ã€‚è¿™é‡Œä½¿ç”¨æ‰‹å†™çš„é«˜æ–¯ç‰›é¡¿æ³•æ¥è¿›è¡Œå®ç°ã€‚ error: static assertion failed: YOU_MIXED_MATRICES_OF_DIFFERENT_SIZES ç»´åº¦çš„å®šä¹‰æœ‰è¯¯ï¼› é¦–å…ˆå®šä¹‰å®ç°GNç®—æ³•çš„ç±»ï¼š 123456789101112131415161718192021222324252627class OpticalFlowTracker{public: // æ„é€ å‡½æ•° OpticalFlowTracker( const cv::Mat &amp;img1_, const cv::Mat &amp;img2_, const vector&lt;cv::KeyPoint&gt; &amp;kp1_, vector&lt;cv::KeyPoint&gt; &amp;kp2_, vector&lt;bool&gt; &amp;success_, bool inverse_ = true, bool has_initial_ = false ): img1(img1_), img2(img2_), kp1(kp1_), kp2(kp2_), success(success_), inverse(inverse_), has_initial(has_initial_){} void calculateOpticalFlow(const cv::Range &amp;range); // cv::Range éšæœºæ•°ç±»å‹ // å‡½æ•°çš„å®ç°åœ¨ç±»çš„å®šä¹‰ä¹‹å¤–æ¥å®ç°private: const cv::Mat &amp;img1; const cv::Mat &amp;img2; const vector&lt;cv::KeyPoint&gt; &amp;kp1; vector&lt;cv::KeyPoint&gt; &amp;kp2; vector&lt;bool&gt; &amp;success; bool inverse = true; bool has_initial = false;}; bool inverse å˜é‡ä¸ºæ˜¯å¦ä¸ºå¯é€†å…‰æµï¼Œå³åå‘å…‰æµï¼› bool has_initial = false å˜é‡ä¸ºæ˜¯å¦è¿›è¡Œåˆå§‹åŒ–ï¼› å‰ä¸¤ä¸ªä¸ºè¾“å…¥çš„å›¾ç‰‡ï¼Œåè¾¹çš„ä¸¤ä¸ªå‚æ•°ä¸ºä¸¤ä¸ªç‰¹å¾ç‚¹ï¼Œå…¶ä¸­ç¬¬äºŒå¼ å›¾ç‰‡çš„ç‰¹å¾ç‚¹ä¸ºå¾…æ±‚çš„ç‰¹å¾ç‚¹ï¼Œvector&lt;cv::KeyPoint&gt; &amp;kp2; ä¸‹é¢ä»‹ç»æˆå‘˜å‡½æ•°çš„å®ç°ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110void OpticalFlowTracker::calculateOpticalFlow(const cv::Range &amp;range){ // ç›¸å…³çš„å‚æ•° int half_patch_size = 4; // é‡‡æ ·å—çš„åŠå¾„ int iterations = 10; // è¿­ä»£æ¬¡æ•° for (size_t i = range.start; i &lt; range.end; i++){ // è¿™é‡Œå¯¹äºç‰¹å¾ç‚¹æ˜¯éšæœºé€‰æ‹©çš„ï¼Œä¸æ˜¯æŒ‰é¡ºåºæ¥çš„ auto kp = kp1[i]; double dx = 0, dy = 0; // dx,dy éœ€è¦è¿›è¡Œä¼°è®¡ if(has_initial){ dx = kp2[i].pt.x - kp.pt.x; dy = kp2[i].pt.y - kp.pt.y; // åˆå§‹åŒ–æ“ä½œ } double cost = 0, lastCost = 0; bool succ = true; // indicate if this point succeeded // ä»£è¡¨ä¼˜åŒ–çŸ¥å¦æˆåŠŸ // Gauss-Newtonæ³• è¿›è¡Œè¿­ä»£ Eigen::Matrix2d H = Eigen::Matrix2d::Zero(); // hessian Eigen::Vector2d b = Eigen::Vector2d::Zero();// bias Eigen::Vector2d J; for (int iter = 0; iter &lt; iterations; iter++) { if (inverse == false) { // äºŒè€…éƒ½è¿›è¡Œé‡ç½® H = Eigen::Matrix2d::Zero(); b = Eigen::Vector2d::Zero(); } else { // only reset b ä»…ä»…å°†bè¿›è¡Œé‡ç½® b = Eigen::Vector2d::Zero(); } cost = 0; // è®¡ç®—è¯¯å·®å’Œé›…å…‹æ¯”JacobiçŸ©é˜µ for(int x = -half_patch_size; x &lt; half_patch_size; x++) for (int y = -half_patch_size; y &lt; half_patch_size; y++) { // æ±‚è§£è¯¯å·®å‡½æ•° double error = GetPixelValue(img1, kp.pt.x + x, kp.pt.y + y) - GetPixelValue(img2, kp.pt.x + x + dx, kp.pt.y + y + dy); // æ±‚è§£JacobiçŸ©é˜µ // inverseçš„æ„æ€æ˜¯åå‘å…‰æµ if (inverse == false) { J = -1.0 * Eigen::Vector2d( 0.5 * (GetPixelValue(img2, kp.pt.x + dx + x + 1, kp.pt.y + dy + y) - GetPixelValue(img2, kp.pt.x + dx + x - 1, kp.pt.y + dy + y)), 0.5 * (GetPixelValue(img2, kp.pt.x + dx + x, kp.pt.y + dy + y + 1) - GetPixelValue(img2, kp.pt.x + dx + x, kp.pt.y + dy + y - 1)) ); } else if (iter == 0) { // ä»¥ä¸‹æ˜¯åå‘å…‰æµæ¨¡å—ï¼Œå› ä¸ºå…¶è®¡ç®—çš„æ˜¯ç¬¬ä¸€ä¸ªå›¾åƒçš„ä¿¡æ¯ï¼Œäºæ˜¯å¯å¾—å…¶JacobiçŸ©é˜µä¸€ç›´ä¸å˜ // in inverse mode, J keeps same for all iterations // NOTE this J does not change when dx, dy is updated, so we can store it and only compute error J = -1.0 * Eigen::Vector2d( 0.5 * (GetPixelValue(img1, kp.pt.x + x + 1, kp.pt.y + y) - GetPixelValue(img1, kp.pt.x + x - 1, kp.pt.y + y)), 0.5 * (GetPixelValue(img1, kp.pt.x + x, kp.pt.y + y + 1) - GetPixelValue(img1, kp.pt.x + x, kp.pt.y + y - 1)) ); } // compute H, b and set cost; // å°†æ‰€æœ‰é‡‡æ ·ç‚¹çš„å€¼ç›¸åŠ  b += -error * J; cost += error * error; if(inverse == false || iter == 0){ // also update H += J * J.transpose(); } } // è®¡ç®—æ›´æ–°å€¼ // compute update Eigen::Vector2d update = H.ldlt().solve(b); // å¼‚å¸¸æƒ…å†µ if (std::isnan(update[0])) { // sometimes occurred when we have a black or white patch and H is irreversible cout &lt;&lt; &quot;update is nan&quot; &lt;&lt; endl; succ = false; break; } if (iter &gt; 0 &amp;&amp; cost &gt; lastCost) { break; } // update dx, dy dx += update[0]; dy += update[1]; lastCost = cost; succ = true; if (update.norm() &lt; 1e-2) { // converge break; } } // æˆåŠŸè®¡ç®—å…‰æµï¼Œå¹¶ä¸”å¾—å‡ºåŒ¹é…ç‚¹ success[i] = succ; // set kp2 kp2[i].pt = kp.pt + cv::Point2f(dx, dy); }} æˆå‘˜å‡½æ•°çš„å¤§æ¦‚æ€è·¯å·²ç»å¾ˆæ˜æ˜¾äº†ï¼Œä¸‹é¢å°†ä¸€äº›ç»†èŠ‚çš„åœ°æ–¹è¿›è¡Œè§£é‡Šã€‚ é¦–å…ˆï¼Œè¿™é‡Œçš„ç‰¹å¾ç‚¹æ—¶é€šè¿‡éšæœºç”Ÿæˆå™¨æ¥éšæœºé€‰å–çš„cv::Rangeï¼Œç›´åˆ°éå†æ‰€æœ‰çš„æƒ…å†µã€‚ è¿™é‡Œä¸ªdx dy è®¾ç½®åˆå§‹å€¼ï¼Œåœ¨å¤šå±‚å…‰æµçš„å®ç°ä¸­ï¼Œä¸‹é¢ä¸€å±‚çš„å…‰æµæ—¶åŸºäºä¸Šé¢ä¸€å±‚çš„è®¡ç®—å¾—åˆ°çš„ç¬¬äºŒä¸ªå›¾ç‰‡çš„ç‰¹å¾ç‚¹è¿›è¡Œä¸‹ä¸€æ­¥ä¼˜åŒ–çš„ï¼Œè¿™æ ·å¯ä»¥é˜²æ­¢å‡ºç°å±€éƒ¨æœ€å°åŒ–ã€‚ 12345if(has_initial){ dx = kp2[i].pt.x - kp.pt.x; dy = kp2[i].pt.y - kp.pt.y; // åˆå§‹åŒ–æ“ä½œ} for(int x = -half_patch_size; x &lt; half_patch_size; x++) è¿™é‡Œæ—¶éå†ä¸´è¿‘çš„ half_patch_size * half_patch_size * 4 = 64ä¸ªé‡‡æ ·ç‚¹ã€‚ è¿™é‡ŒJacobiçŸ©é˜µçš„æ±‚è§£è¿‡ç¨‹å¦‚ä¸‹ï¼š \\begin{align} \\frac{\\partial \\boldsymbol{J}}{\\partial \\Delta x}&=\\frac{\\partial \\boldsymbol{J}}{\\partial \\boldsymbol{I_2}} \\frac{\\partial \\boldsymbol{I_2}}{\\partial \\Delta x} =-1*\\frac{\\partial \\boldsymbol{I_2}}{\\partial \\Delta x}\\\\&=-1*\\left(\\frac{\\boldsymbol{I_2}(x+\\Delta x +1,y + \\Delta y) - \\boldsymbol{I_2}(x + \\Delta x -1,y+\\Delta y)}{1-(-1)}\\right) \\end{align}é‡‡ç”¨ä¸ºä¸­å¿ƒå·®å•†ä»£æ›¿çš„å¯¼æ•°çš„æ–¹æ³•ã€‚ å¯¹äºæ­£å‘å…‰æµè®¡ç®—çš„å…³äº$\\boldsymbol{I_2}$ çš„æ¢¯åº¦ï¼Œåå‘å…‰æµå°±æ˜¯çš„åˆ™æ˜¯$\\boldsymbol{I_1}$ ï¼Œå› ä¸º$\\boldsymbol{I_1}$ éšç€ä¼˜åŒ–æ˜¯ä¸å˜çš„ï¼Œå› æ­¤ä¸éœ€è¦éå†æ‰€æœ‰çš„é‡‡ç”¨ç‚¹ï¼Œè®¡ç®—ä¸€ç»„å³å¯ï¼Œæ¯”è¾ƒèŠ‚çº¦æ—¶é—´å’Œè®¡ç®—é‡ã€‚ ä¸‹é¢æ˜¯åœ¨ä¸Šè¿°GNæ–¹æ³•ä¸­ä½¿ç”¨åˆ°çš„æ±‚è§£å›¾ç‰‡åƒç´ å€¼çš„å‡½æ•°ï¼Œå…¶ä¸»è¦æ˜¯å®ç°æ±‚è§£ç¦»æ•£åƒç´ èŠ‚ç‚¹å€¼çš„æ’å€¼ã€‚ æ€è€ƒï¼šä¸ºä»€ä¹ˆä½¿ç”¨å†…è”å‡½æ•°ï¼Ÿ 1234567891011121314151617inline double GetPixelValue(const cv::Mat &amp;img, float x, float y) { // boundary check if (x &lt; 0) x = 0; if (y &lt; 0) y = 0; if (x &gt;= img.cols - 1) x = img.cols - 2; if (y &gt;= img.rows - 1) y = img.rows - 2; float xx = x - floor(x); float yy = y - floor(y); int x_a1 = std::min(img.cols - 1, int(x) + 1); int y_a1 = std::min(img.rows - 1, int(y) + 1); return (1 - xx) * (1 - yy) * img.at&lt;uchar&gt;(y, x) + xx * (1 - yy) * img.at&lt;uchar&gt;(y, x_a1) + (1 - xx) * yy * img.at&lt;uchar&gt;(y_a1, x) + xx * yy * img.at&lt;uchar&gt;(y_a1, x_a1);} æœ€åï¼Œå®ç°ä¸€ä¸ªå±‚å…‰æµçš„å‡½æ•°ã€‚ é¦–å…ˆï¼Œå°†å…³é”®ç‚¹çš„ç»´åº¦å’Œsize()ç»Ÿä¸€ï¼› ä¹‹åï¼Œå®ä¾‹åŒ–ä¸€ä¸ªOpticalFlowTrackerï¼› æœ€åï¼Œé€šè¿‡parallel_for_è°ƒç”¨æˆå‘˜å‡½æ•°ï¼Œè®¡ç®—å¾—åˆ°ä¸€ä¸ªç¬¬äºŒå¼ å›¾ç‰‡çš„å…³é”®ç‚¹ã€‚ æ€è€ƒï¼šparallel_for_çš„ä½œç”¨ã€‚ 123456789101112131415161718192021222324// å•å±‚å…‰æµvoid OpticalFlowSingleLevel( const cv::Mat &amp;img1, const cv::Mat &amp;img2, const vector&lt;cv::KeyPoint&gt; &amp;kp1, vector&lt;cv::KeyPoint&gt; &amp;kp2, vector&lt;bool&gt; &amp;success, bool inverse = false, bool has_initial_guess = false);void OpticalFlowSingleLevel( const cv::Mat &amp;img1, const cv::Mat &amp;img2, const vector&lt;cv::KeyPoint&gt; &amp;kp1, vector&lt;cv::KeyPoint&gt; &amp;kp2, vector&lt;bool&gt; &amp;success, bool inverse, bool has_initial) { kp2.resize(kp1.size()); success.resize(kp1.size()); OpticalFlowTracker tracker(img1, img2, kp1, kp2, success, inverse, has_initial); parallel_for_(cv::Range(0, kp1.size()), std::bind(&amp;OpticalFlowTracker::calculateOpticalFlow, &amp;tracker, placeholders::_1));} ä»¥ä¸‹æ˜¯å•å±‚å…‰æµè¿½è¸ªçš„ç»“æœï¼Œå¯ä»¥çœ‹åˆ°ä¼˜åŒ–å‡ºç°äº†æ”¶æ•›åˆ°å±€éƒ¨æœ€ä¼˜è§£çš„çŠ¶å†µã€‚ æœ€åï¼ŒåŸºäºä¸Šé¢çš„å•å±‚å…‰æµï¼Œæˆ‘ä»¬å¯ä»¥å®ç°ä¸€ä¸ªåŸºäºå›¾åƒé‡‘å­—å¡”çš„å¤šå±‚å…‰æµå‡½æ•°ï¼Œå…¶ä¸»è¦çš„ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576// å¤šå±‚å…‰æµvoid OpticalFlowMultiLevel( const cv::Mat &amp;img1, const cv::Mat &amp;img2, const vector&lt;cv::KeyPoint&gt; &amp;kp1, vector&lt;cv::KeyPoint&gt; &amp;kp2, vector&lt;bool&gt; &amp;success, bool inverse = false);void OpticalFlowMultiLevel( const cv::Mat &amp;img1, const cv::Mat &amp;img2, const vector&lt;cv::KeyPoint&gt; &amp;kp1, vector&lt;cv::KeyPoint&gt; &amp;kp2, vector&lt;bool&gt; &amp;success, bool inverse){ // å‚æ•° // é‡‘å­—å¡”çš„å±‚æ•° int pyramids = 4; // ç¼©å°æ¯”ä¾‹ double pyramids_scale = 0.5; double scales[] = {1.0, 0.5, 0.25, 0.125}; // create åˆ›å»ºé‡‘å­—å¡” vector&lt;cv::Mat&gt; pyr1, pyr2; // å‘å›¾åƒé‡‘å­—å¡”é‡Œé¢åŠ å›¾ç‰‡ for(int i = 0; i &lt; pyramids; i++){ if(i == 0){ pyr1.push_back(img1); pyr2.push_back(img2); }else{ cv::Mat img1_pyr, img2_pyr; // ä½¿ç”¨é€’å½’ï¼Œåœ¨å‰ä¸€ä¸ªçš„åŸºç¡€ä¸Šç¼©å°åˆ°åŸæ¥çš„ä¸€åŠ cv::resize(pyr1[i - 1], img1_pyr, cv::Size(pyr1[i - 1].cols * pyramids_scale, pyr1[i - 1].rows * pyramids_scale)); cv::resize(pyr2[i - 1], img2_pyr, cv::Size(pyr2[i - 1].cols * pyramids_scale, pyr2[i - 1].rows * pyramids_scale)); pyr1.push_back(img1_pyr); pyr2.push_back(img2_pyr); } } // coarse-to-fine LK tracking in pyramids // å°†keypoints ä¿å­˜åˆ°é‡‘å­—å¡”ä¸­ vector&lt;cv::KeyPoint&gt; kp1_pyramids, kp2_pyramids; for(auto &amp;kp: kp1){ auto kp_top = kp; // å¾—åˆ°æœ€é«˜å±‚é‡‘å­—å¡”çš„ç‰¹å¾ç‚¹ kp_top.pt *= scales[pyramids - 1]; kp1_pyramids.push_back(kp_top); kp2_pyramids.push_back(kp_top); } // ä»é‡‘å­—å¡”çš„é¡¶ç«¯å¼€å§‹å‘åº•ç«¯éå† for(int level = pyramids - 1; level &gt;= 0; level--) { success.clear(); OpticalFlowSingleLevel(pyr1[level], pyr2[level], kp1_pyramids, kp2_pyramids, success, inverse, true); // kp2_pyramids è®¡ç®—å¹¶æ›´æ–°äº†é‡‘å­—å¡”levelå±‚ä¸Šé¢çš„ç‰¹å¾ç‚¹ if(level &gt; 0){ // è®¡ç®—ä¸Šä¸€å±‚çš„ç‰¹å¾ç‚¹ // kp1_pyramids,kp2_pyramidsæ˜¯ä¸€ä¸ªå­˜å‚¨ç‰¹å¾å˜é‡çš„ä¸´æ—¶çš„vector for(auto &amp;kp: kp1_pyramids) kp.pt /= pyramids_scale; for(auto &amp;kp: kp2_pyramids) kp.pt /= pyramids_scale; // å°†ä¸Šä¸€å±‚çš„ç‰¹å¾ç‚¹ä½œä¸ºåˆå§‹å€¼æ¥æ›´æ–°ä¸‹ä¸€å±‚çš„ç‰¹å¾ç‚¹ } } for(auto &amp;kp: kp2_pyramids){ kp2.push_back(kp); } // ä¿å­˜è®¡ç®—å‡ºæ¥çš„ç¬¬äºŒå¼ å›¾ç‰‡çš„ç‰¹å¾ç‚¹} é¦–å…ˆï¼Œåˆå§‹åŒ–ç‰¹å¾é‡‘å­—å¡”çš„å‚æ•°ï¼Œå¹¶åˆ›å»ºå›¾åƒé‡‘å­—å¡”ï¼Œå°†å›¾ç‰‡ä¸æ–­å‹ç¼©æ”¾å…¥å…¶ä¸­ï¼Œvector&lt;cv::Mat&gt; pyr1, pyr2. ä¹‹åï¼Œåˆå§‹åŒ–æœ€é¡¶å±‚çš„ç‰¹å¾ç‚¹çš„é‡‘å­—å¡”ã€‚ æœ€åï¼Œä»é¡¶å±‚åƒåº•éƒ¨å¯¹æ¯ä¸€å±‚ä½¿ç”¨ä¸€æ¬¡å•å±‚å…‰æµè·Ÿè¸ªï¼Œå¾—å‡ºçš„ç¬¬äºŒå¼ å›¾ç‰‡çš„ç‰¹å¾ç‚¹ï¼Œå°†å…¶ä½œä¸ºä¸‹ä¸€å±‚ä¸‹ä¸€å±‚çš„ç¬¬äºŒå¼ å›¾ç‰‡ç‰¹å¾ç‚¹çš„åˆå§‹å€¼ã€‚ è¿™æ ·å¯ä»¥å¾ˆå¥½çš„é˜²æ­¢å‡ºç°ä»…ä»…ä½¿ç”¨å•å±‚å…‰æµé€ æˆçš„ä¼˜åŒ–è¿‡ç¨‹éå‡¸ï¼Œæ”¶æ•›åˆ°å±€éƒ¨æœ€ä¼˜çš„æƒ…å†µã€‚ å¯¹äºå…¶åœ¨main()å‡½æ•°é‡Œçš„è°ƒç”¨å’Œä¹‹å‰ç±»ä¼¼ï¼Œæ­¤å¤„ç›´æ¥ä¸Šä»£ç ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104#include &lt;iostream&gt;#include &lt;string&gt;#include &lt;chrono&gt;#include &lt;opencv2/core/core.hpp&gt;#include &lt;opencv2/opencv.hpp&gt;#include &lt;opencv2/imgproc/types_c.h&gt;//&quot;CV_GRAY2BGR&quot; åŒ…å«åœ¨imgproc/types_c.h#include &lt;Eigen/Core&gt;#include &lt;Eigen/Dense&gt;using namespace std;// è¦è¯»å–ä¸¤ç« å›¾ç‰‡çš„è·¯å¾„string file_1 = &quot;../LK1.png&quot;; // first imagestring file_2 = &quot;../LK2.png&quot;; // second imageint main(int argc, char **argv){ // IMREAD_GRAYSCALE = 0 cv::Mat img_1 = cv::imread(file_1, 0); cv::Mat img_2 = cv::imread(file_2, 0); // é¦–å…ˆï¼Œè¯»å–ç¬¬ä¸€ä¸ªå›¾ç‰‡é‡Œé¢çš„ç‰¹å¾ç‚¹ vector&lt;cv::KeyPoint&gt; kp1; cv::Ptr&lt;cv::GFTTDetector&gt; detector = cv::GFTTDetector::create(500, 0.01, 20); // å‚æ•°çš„ä¸»è¦å«ä¹‰æ˜¯ æœ€å¤§çš„è§’ç‚¹æ•°ï¼Œè¾“å‡ºç‚¹çš„è´¨é‡ï¼Œæœ€å°è·ç¦» detector -&gt; detect(img_1, kp1); // ====================================================================== // now lets track these key points in the second image // first use single level LK in the validation picture // å•å±‚å…‰æµæ³• vector&lt;cv::KeyPoint&gt; kp2_single; vector&lt;bool&gt; success_single; OpticalFlowSingleLevel(img_1, img_2, kp1, kp2_single, success_single); // ====================================================================== // then test multi-level LK vector&lt;cv::KeyPoint&gt; kp2_multi; vector&lt;bool&gt; success_multi; chrono::steady_clock::time_point t1 = chrono::steady_clock::now(); OpticalFlowMultiLevel(img_1, img_2, kp1, kp2_multi, success_multi, true); chrono::steady_clock::time_point t2 = chrono::steady_clock::now(); auto time_used = chrono::duration_cast&lt;chrono::duration&lt;double&gt;&gt;(t2 - t1); cout &lt;&lt; &quot;optical flow by gauss-newton: &quot; &lt;&lt; time_used.count() &lt;&lt; endl; // ====================================================================== // ä½¿ç”¨è‡ªå¸¦çš„å…‰æµå‡½æ•°è¿›è¡Œè¯»å– // use opencv's flow for validation vector&lt;cv::Point2f&gt; pt1, pt2; for(auto &amp;kp: kp1) pt1.push_back(kp.pt); vector&lt;uchar&gt; status; vector&lt;float&gt; error; t1 = chrono::steady_clock::now(); // æ­¤å‡½æ•°åœ¨opencv.hppé‡Œé¢ cv::calcOpticalFlowPyrLK(img_1, img_2, pt1, pt2, status, error); // è¿™é‡Œçš„å‚æ•°ï¼Œå…¶ä¸‰ä¸ªä¸ºè¾“å…¥ï¼Œåé¢ä¸‰ä¸ªä¸ºè¾“å‡º t2 = chrono::steady_clock::now(); time_used = chrono::duration_cast&lt;chrono::duration&lt;double&gt;&gt;(t2 - t1); cout &lt;&lt; &quot;optical flow by opencv: &quot; &lt;&lt; time_used.count() &lt;&lt; endl; // plot the differences of those functions // å¯è§†åŒ– cv::Mat img2_single; cv::cvtColor(img_2, img2_single, CV_GRAY2BGR); for (int i = 0; i &lt; kp2_single.size(); i++) { if (success_single[i]) { cv::circle(img2_single, kp2_single[i].pt, 2, cv::Scalar(0, 250, 0), 2); cv::line(img2_single, kp1[i].pt, kp2_single[i].pt, cv::Scalar(0, 250, 0)); } } cv::Mat img2_multi; cv::cvtColor(img_2, img2_multi, CV_GRAY2BGR); for (int i = 0; i &lt; kp2_multi.size(); i++) { if (success_multi[i]) { cv::circle(img2_multi, kp2_multi[i].pt, 2, cv::Scalar(0, 250, 0), 2); cv::line(img2_multi, kp1[i].pt, kp2_multi[i].pt, cv::Scalar(0, 250, 0)); } } cv::Mat img2_cv; // cvtcolor()å‡½æ•°æ˜¯ä¸€ä¸ªé¢œè‰²ç©ºé—´è½¬æ¢å‡½æ•°ï¼Œ // å¯ä»¥å®ç°RGBé¢œè‰²å‘HSVï¼ŒHSIç­‰é¢œè‰²ç©ºé—´è½¬æ¢ã€‚ä¹Ÿå¯ä»¥è½¬æ¢ä¸ºç°åº¦å›¾ã€‚ cv::cvtColor(img_2, img2_cv, CV_GRAY2BGR); // imgproc/types_c.h -&gt; CV_GRAY2BGR for(int i = 0; i &lt; pt2.size(); i++) { if (status[i]) { // æ ‡è®°ç‰¹å¾ç‚¹ cv::circle(img2_cv, pt2[i], 2, cv::Scalar(0, 250, 0), 2); // ä½¿ç”¨ç›´çº¿æ¥æ˜¾ç¤ºå‡ºç§»åŠ¨çš„æƒ…å†µ cv::line(img2_cv, pt1[i], pt2[i], cv::Scalar(0, 250, 0)); } } cv::imshow(&quot;tracked single level&quot;, img2_single); cv::imshow(&quot;tracked multi level&quot;, img2_multi); cv::imshow(&quot;tracked by opencv&quot;, img2_cv); cv::waitKey(0); return 0;}","link":"/2022/06/11/SLAM/ch8-%E8%A7%86%E8%A7%89%E9%87%8C%E7%A8%8B%E8%AE%A1-%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86-%E5%85%89%E6%B5%81%E6%B3%95/"},{"title":"Ch8 è§†è§‰é‡Œç¨‹è®¡ ç¬¬äºŒéƒ¨åˆ† ç›´æ¥æ³•","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦ä»‹ç»äº†ç›´æ¥æ³•ï¼Œç›¸æ¯”å…‰æµæ³•å…¶é²æ£’æ€§æ›´å¥½ï¼Œå³ä½¿éšæœºå–ç‚¹ï¼Œå…¶æ•ˆæœä¾ç„¶ä¸é”™ã€‚ç›¸æ¯”å…‰æµæ³•æ±‚è§£çš„æ—¶åœ¨åƒç´ ä¸Šç§»åŠ¨çš„è·ç¦»ï¼Œç›´æ¥æ³•åˆ™æ˜¯é€šè¿‡ä¼˜åŒ–å…‰åº¦è¯¯å·®ç›´æ¥æ±‚è§£å¯¹åº”çš„ç¬¬äºŒå¼ ç›¸å¯¹ç¬¬ä¸€å¼ çš„å§¿æ€å˜æ¢æƒ…å†µã€‚æœ€åæˆ‘ä»¬ä½¿ç”¨GNæ–¹æ³•è¿›è¡Œç¼–ç¨‹å®ç°ã€‚ åœ¨å…‰æµæ³•ä»…ä»…æ—¶ä¼°è®¡äº†ç›¸æœºä¹‹é—´çš„å¹³ç§»ï¼Œä½†æ˜¯å…¶ä¸»è¦æœ‰ä»¥ä¸‹çš„é—®é¢˜ï¼š æ²¡æœ‰ç”¨åˆ°ç›¸æœºæœ¬èº«çš„å‡ ä½•ç»“æ„ï¼› æ²¡æœ‰è€ƒè™‘åˆ°ç›¸æœºçš„æ—‹è½¬å’Œå›¾åƒçš„ç¼©æ”¾ï¼› å¯¹äºè¾¹ç•Œä¸Šçš„ç‚¹ï¼Œå…‰æµä¸å¥½è¿½è¸ªï¼› ç›´æ¥æ³•åˆ™è€ƒè™‘äº†è¿™äº›ä¿¡æ¯ï¼Œå…¶å°†DAæ•°æ®æœå¯»ï¼Œposeè®¡ç®—å§¿æ€ï¼Œç›´æ¥æ³•å°†ä¸¤ä¸ªæ­¥éª¤åˆæˆä¸ºä¸€æ­¥ã€‚ä»–æ˜¯æ ¹æ®å›¾åƒæ•´ä½“çš„ä¿¡æ¯æ¥ä¼°è®¡è¿åŠ¨çš„ï¼Œ ç›´æ¥æ³•çš„æ¨å¯¼è€ƒè™‘ç©ºé—´ç‚¹$P=[X,Y,Z]$å’Œä¸¤ä¸ªç›¸æœºä¸Šçš„æˆçš„åƒï¼Œè®°ä¸ºåƒç´ åæ ‡$p_1,p_2$ å…¶è¡¨è¾¾å½¢å¼å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ è¿™é‡Œä»¥ç¬¬ä¸€å¸§ä¸ºå‚ç…§ç³»ï¼Œç¬¬äºŒä¸ªåˆ°ç¬¬ä¸€ä¸ªçš„æ—‹è½¬å’Œå¹³ç§»ä¸º $\\boldsymbol{R,t}$ å¯¹äºçš„æç¾¤ä¸º $\\boldsymbol{T}$ ã€‚å‡è®¾ä¸¤ä¸ªç›¸æœºçš„å†…å‚ç›¸åŒï¼Œè®°ä¸º $\\boldsymbol{K}$ .äºæ˜¯æˆ‘ä»¬å¾—åˆ°æŠ•å½±ä¸Šçš„å…³ç³»ä¸ºï¼š \\boldsymbol{p_1}=\\left[\\begin{array}{l}u \\\\ v \\\\ 1\\end{array}\\right]_{1}=\\frac{1}{Z_{1}} \\boldsymbol{K} \\boldsymbol{P} \\boldsymbol{p_2}=\\left[\\begin{array}{l}u \\\\ v \\\\ 1\\end{array}\\right]_{2}=\\frac{1}{Z_{2}} \\boldsymbol{K}(\\boldsymbol{R} \\boldsymbol{P}+\\boldsymbol{t})=\\frac{1}{Z_{2}} \\boldsymbol{K}\\left(\\exp \\left(\\boldsymbol{\\xi}^{\\wedge}\\right) \\boldsymbol{P}\\right)_{1: 3}å…¶ä¸­ï¼Œ$Z_1,Z_2$ åˆ†åˆ«æ˜¯På¯¹åº”çš„æ·±åº¦ã€‚ å¯¹äºå…‰æµæ³•çš„ç°åº¦ä¸å˜å‡è®¾ä»¥åŒæ ·çš„é€‚ç”¨ï¼Œå…¶å°±æ˜¯ä¼˜åŒ–ä½å§¿ä½¿å¾—$\\boldsymbol{I_1}(p_1) \\approx \\boldsymbol{I_2}(p_2)$ å°½å¯èƒ½çš„ç›¸ç­‰å³å¯ã€‚ è¿™é‡Œç±»ä¼¼äºæœ€å°é‡æŠ•å½±è¯¯å·®ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªåƒç´ ç‚¹äº®åº¦çš„é‡æŠ•å½±è¯¯å·®ã€‚ e=\\boldsymbol{I_1}(p_1) - \\boldsymbol{I_2}(p_2)è¿™é‡Œçš„eæ˜¯ç”±å˜é‡ï¼Œå…¶å®å°±æ˜¯ç°åº¦å€¼çš„è¯¯å·®ï¼ŒåŒæ ·æ˜¯ä¼˜åŒ–è¯¯å·®çš„äºŒèŒƒæ•°ï¼Œè¿™é‡Œä¸åŠ ç›¸åº”çš„æƒé‡ï¼Œäºæ˜¯æœ‰ï¼š \\min\\limits_{T}J(T)=\\left|| e\\right||^2åŸºäºç°åº¦ä¸å˜æ€§å‡è®¾ï¼šåœ¨ç©ºé—´ä¸åŒçš„è§†è§’ä¸‹æˆåƒçš„ç°åº¦æ˜¯ä¸å˜çš„ã€‚è¿™é‡Œå–Nä¸ªç©ºé—´ç‚¹ï¼Œäºæ˜¯å°±æœ‰ï¼š \\min _{\\boldsymbol{T}} J(\\boldsymbol{T})=\\sum_{i=1}^{N} e_{i}^{\\mathrm{T}} e_{i}, \\quad e_{i}=\\boldsymbol{I}_{1}\\left(\\boldsymbol{p}_{1, i}\\right)-\\boldsymbol{I}_{2}\\left(\\boldsymbol{p}_{2, i}\\right)è¿™é‡Œçš„ä¼˜åŒ–å˜é‡æ˜¯ç›¸æœºçš„ä½å§¿ï¼Œè€Œå…‰æµä¸Šçš„ä¼˜åŒ–å˜é‡æ˜¯å¯¹åº”çš„ç‰¹å¾ç‚¹çš„è¿åŠ¨ï¼Œå› æ­¤éœ€è¦æ±‚è§£ç›®æ ‡ç›¸å¯¹äºå§¿æ€Tçš„å¯¼æ•°ï¼š äºæ˜¯å°±æœ‰ï¼š \\begin{align} e(\\boldsymbol{\\xi} \\oplus \\delta \\boldsymbol{\\xi})&=\\boldsymbol{I}_{1}\\left(\\frac{1}{Z_{1}} \\boldsymbol{K} \\boldsymbol{P}\\right)-\\boldsymbol{I}_{2}\\left(\\frac{1}{Z_{2}} \\boldsymbol{K} \\exp \\left(\\boldsymbol{\\xi}^{\\wedge}\\right) \\boldsymbol{P}+\\boldsymbol{u}\\right)\\\\ &\\approx \\boldsymbol{I}_{1}\\left(\\frac{1}{Z_{1}} \\boldsymbol{K} \\boldsymbol{P}\\right)-\\boldsymbol{I}_{2}\\left(\\frac{1}{Z_{2}} \\boldsymbol{K} \\exp \\left(\\boldsymbol{\\xi}^{\\wedge}\\right) \\boldsymbol{P}\\right)-\\frac{\\partial \\boldsymbol{I}_{2}}{\\partial \\boldsymbol{u}} \\frac{\\partial \\boldsymbol{u}}{\\partial \\boldsymbol{q}} \\frac{\\partial \\boldsymbol{q}}{\\partial \\delta \\boldsymbol{\\xi}} \\delta \\boldsymbol{\\xi}\\\\ &=e(\\boldsymbol{\\xi})-\\frac{\\partial \\boldsymbol{I}_{2}}{\\partial \\boldsymbol{u}} \\frac{\\partial \\boldsymbol{u}}{\\partial \\boldsymbol{q}} \\frac{\\partial \\boldsymbol{q}}{\\partial \\delta \\boldsymbol{\\xi}} \\delta \\boldsymbol{\\xi} \\end{align}è¿™é‡Œçš„æ±‚å¯¼çš„éƒ¨åˆ†ä¸»è¦åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š å›¾åƒæ¢¯åº¦ï¼Œ$\\partial \\boldsymbol{I}_{2} / \\partial \\boldsymbol{u}$ åœ¨ u å¤„çš„æ¢¯åº¦ï¼› åƒç´ å¯¹æŠ•å½±ç‚¹çš„æ¢¯åº¦ï¼Œ$\\partial \\boldsymbol{u} / \\partial \\boldsymbol{q}$ ä¸ºæŠ•å½±å…³äºç›¸æœºåæ ‡ç³»ä¸‹ä¸‰ç»´ç‚¹çš„å¯¼æ•°ã€‚è¿™é‡Œçš„q å…¶å®å°±æ˜¯å°†ä¸‰ç»´ç‚¹åœ¨ç¬¬äºŒä¸ªç›¸æœºåæ ‡ç³»ä¸‹çš„åæ ‡ï¼Œu ä¸ºå¯¹åº”çš„åƒç´ åæ ‡ã€‚ \\dfrac{\\partial \\boldsymbol{u}}{\\partial \\boldsymbol{q}}=\\left[\\begin{array}{ccc}\\dfrac{\\partial u}{\\partial X} & \\dfrac{\\partial u}{\\partial Y} & \\dfrac{\\partial u}{\\partial Z} \\\\ \\dfrac{\\partial v}{\\partial X} & \\dfrac{\\partial v}{\\partial Y} & \\dfrac{\\partial v}{\\partial Z}\\end{array}\\right]=\\left[\\begin{array}{ccc}\\dfrac{f_{x}}{Z} & 0 & -\\dfrac{f_{x} X}{Z^{2}} \\\\ 0 & \\dfrac{f_{y}}{Z} & -\\dfrac{f_{y} Y}{Z^{2}}\\end{array}\\right] æŠ•å½±ç‚¹å¯¹ä½å§¿çš„å¯¼æ•°ï¼š$\\dfrac{\\partial \\boldsymbol{q}}{\\partial \\delta \\boldsymbol{\\xi}}=\\left[\\boldsymbol{I},-\\boldsymbol{q}^{\\wedge}\\right]$ ç»¼ä¸Šå¯å¾—ï¼š \\frac{\\partial \\boldsymbol{u}}{\\partial \\delta \\boldsymbol{\\xi}}=\\left[\\begin{array}{cccccc}\\dfrac{f_{x}}{Z} & 0 & -\\dfrac{f_{x} X}{Z^{2}} & -\\dfrac{f_{x} X Y}{Z^{2}} & f_{x}+\\dfrac{f_{x} X^{2}}{Z^{2}} & -\\dfrac{f_{x} Y}{Z} \\\\ 0 & \\dfrac{f_{y}}{Z} & -\\dfrac{f_{y} Y}{Z^{2}} & -f_{y}-\\dfrac{f_{y} Y^{2}}{Z^{2}} & \\dfrac{f_{y} X Y}{Z^{2}} & \\dfrac{f_{y} X}{Z}\\end{array}\\right]ä¸Šè¿°çš„çŸ©é˜µä¸ºä¸€ä¸ª$2 \\times6$ çš„çŸ©é˜µï¼Œäºæ˜¯å¯å¾—æä»£æ•°çš„JacobiçŸ©é˜µä¸ºï¼š \\boldsymbol{J}=-\\frac{\\partial \\boldsymbol{I}_{2}}{\\partial \\boldsymbol{u}} \\frac{\\partial \\boldsymbol{u}}{\\partial \\delta \\boldsymbol{\\xi}}å¯¹äºNä¸ªç‚¹çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨è¿™ç§æ–¹æ³•è®¡ç®—ä¼˜åŒ–é—®é¢˜çš„é›…å¯æ¯”çŸ©é˜µï¼Œç„¶åä½¿ç”¨é«˜æ–¯ç‰›é¡¿æ³•æˆ–åˆ—æ–‡ä¼¯æ ¼ä¸€é©¬å¤¸å°”ç‰¹æ–¹æ³•è®¡ç®—å¢é‡ï¼Œè¿­ä»£æ±‚è§£ã€‚è‡³æ­¤ï¼Œæˆ‘ä»¬æ¨å¯¼äº†ç›´æ¥æ³•ä¼°è®¡ç›¸æœºä½å§¿çš„æ•´ä¸ªæµç¨‹,ä¸‹é¢é€šè¿‡ç¨‹åºæ¥æ¼”ç¤ºç›´æ¥æ³•æ˜¯å¦‚ä½•ä½¿ç”¨çš„ã€‚ ç›¸å…³çš„è®¨è®ºå¯¹äºç©ºé—´ç‚¹Pæ˜¯çš„è·å–æ–¹æ³• RGBDç›¸æœºï¼Œå°†ä»»æ„åƒç´ ç‚¹åæŠ•å½±åˆ°ä¸‰ç»´ç©ºé—´å³å¯ï¼› åŒç›®ç›¸æœºï¼Œæ ¹æ®è§†å·®æ¥è®¡ç®—æ·±åº¦ï¼› å•ç›®ç›¸æœºï¼Œæ¯”è¾ƒå›°éš¾ï¼Œå­˜åœ¨æ·±åº¦çš„ä¸ç¡®å®šæ€§ï¼Œå¯ä»¥ä½¿ç”¨ä¸‰è§’åŒ–æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸‹ä¸€ç« çš„æ–¹æ³•ã€‚ ç›´æ¥æ³•å’Œä¸€èˆ¬PnPæ–¹æ³•çš„åŒºåˆ« PnPæ˜¯å¯¹äºå·²ç»åŒ¹é…å¥½çš„ç‚¹è¿›è¡Œé‡æŠ•å½±è¯¯å·®çš„æœ€å°åŒ–çš„ï¼Œæ±‚å‡ºå¯¹äºçš„å§¿æ€çŸ©é˜µ$R,t$ã€‚ ç›´æ¥æ³•æ˜¯å¼€å§‹æ—¶ä½ç½®ä¸¤ä¸ªç‚¹æ˜¯å¦åŒ¹é…ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥æ—¶å‘¨å›´å…¶ä»–çš„ç‚¹ï¼Œæ˜¯é€šè¿‡å¤šä¸ªç‚¹ä¸€èµ·æ¥å¾—å‡ºæœ€ä¼˜çš„$R,t$ ä»è€Œå¾—åˆ°åŒ¹é…çš„å…³ç³»çš„ã€‚ e(\\boldsymbol{\\xi})-\\frac{\\partial \\boldsymbol{I}_{2}}{\\partial \\boldsymbol{u}} \\frac{\\partial \\boldsymbol{u}}{\\partial \\boldsymbol{q}} \\frac{\\partial \\boldsymbol{q}}{\\partial \\delta \\boldsymbol{\\xi}} \\delta \\boldsymbol{\\xi}é€šè¿‡ä¸Šå¼å¯ä»¥çœ‹å‡ºç›´æ¥æ³•çš„é›…å¯æ¯”é¡¹æœ‰ä¸€ä¸ªå›¾åƒæ¢¯åº¦å› å­ï¼Œå› æ­¤å°±æœ‰åœ¨å›¾åƒæ¢¯åº¦ä¸æ˜æ˜¾çš„åœ°æ–¹ï¼Œå¯¹ç›¸æœºè¿åŠ¨çš„ä¼°è®¡è´¡çŒ®å€¼æ¯”è¾ƒå°ã€‚ ç™½å¢™å’Œå¤©ç©ºçš„å½±å“æƒé‡æ¯”è¾ƒå°ï¼Œå¯¹äºä½å§¿ä¼°è®¡çš„å½±å“å°ï¼Œä½†æ˜¯å¯ä»¥æŠ•å½±ã€‚ ç›´æ¥å‘çš„åˆ†ç±»æ ¹æ®å›¾åƒä¿¡æ¯ä»¥åŠPçš„æ¥æºï¼Œå¯ä»¥å¯¹å…¶è¿›è¡Œåˆ†ç±»å¯å¾—ï¼š ç¨€ç–ç›´æ¥æ³•ï¼šä»…ä»…å¤„ç†ç¨€ç–çš„è§’ç‚¹å’Œå…³é”®ç‚¹ï¼Œå’ŒLKå…‰æµæ³•ç±»ä¼¼ï¼Œå‡è®¾å‘¨å›´åƒç´ æ˜¯ä¸å˜çš„ï¼Œè¿™ç§æ–¹æ³•ä¸åº”è®¡ç®—æè¿°å­ï¼Œé€Ÿåº¦å¿«ï¼Œä½†ä¹Ÿåªèƒ½è®¡ç®—ç¨€ç–çš„é‡æ„ã€‚ åŠç¨ å¯†ç›´æ¥æ³•ï¼šå¯¹äºå›¾åƒæ¢¯åº¦ä¸º0çš„ç‚¹ï¼Œå…¶å¯¹é›…å¯æ¯”çŸ©é˜µè®¡ç®—çš„è´¡çŒ®è¾ƒå°ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥èˆå»ï¼Œä»…ä»…è®¡ç®—æœ‰æ¢¯åº¦ç‚¹çš„æƒ…å†µã€‚ ç¨ å¯†ç›´æ¥æ³•ï¼šè®¡ç®—æ‰€æœ‰çš„åƒç´ ï¼Œä½†æ˜¯æ¯”è¾ƒæ¶ˆè€—è®¡ç®—çš„èµ„æºã€‚ä½†æ˜¯å¯ä»¥å¾—åˆ°å®Œæ•´çš„åœ°å›¾ã€‚ å¯¹äºä¸Šè¿°æ–¹æ³•çš„é€‰æ‹©ï¼Œè¦æ ¹æ®åœºæ™¯å’Œå®é™…çš„è®¡ç®—èµ„æºæ¥å®šã€‚ ç›´è§‚è§£é‡Šå’Œä¼˜ç¼ºç‚¹ç›´è§‚è§£é‡Š åƒç´ ç°åº¦å¼•å¯¼ç€ä¼˜åŒ–çš„æ–¹å‘ã€‚ å¯¹äºç‰¹å¾ç‚¹æ³•æ¥è¯´ï¼Œå½“å›¾åƒæ•´ä½“å˜äº®æ—¶ï¼Œå¯¹äºç‰¹å¾ç‚¹å…³é”®ç‚¹çš„é€‰å–ä¸å½±å“å¤ªå¤§ï¼› å¯¹äºç›´æ¥æ³•æ¥è¯´ï¼Œå¦‚æœ$I_1$ æ¯” $I_2$ æ˜æ˜¾çš„äº®ï¼Œå°±ä¼šå¯¼è‡´å…‰åº¦è¯¯å·®è¦å¾ˆå¤§ï¼Œä¼šé€ æˆåŒ¹é…å‡ºé”™ã€‚ è¦ä½¿å¾—ä¼˜åŒ–æˆç«‹ï¼Œå¿…é¡»è¦ä¿è¯åˆå§‹ä¼°è®¡åˆ°æœ€ä¼˜åŒ–ä¼°è®¡ä¸­é—´çš„æ¢¯åº¦ä¸€ç›´ä¸‹é™ã€‚å› ä¸ºå¦‚æœé‡åˆ°éå‡¸çš„æƒ…å†µæ—¶ï¼Œæˆ‘ä»¬çš„ä¼šé‡åˆ°å±€éƒ¨æœ€ä¼˜çš„æƒ…å†µï¼Œå¯¼è‡´å…¶é™·å…¥åˆ°ä¸€ä¸ªå±€éƒ¨çš„æœ€å°å€¼ä¸­ã€‚ ä¸€æ–¹é¢å¯ä»¥ä½¿ç”¨ä¼˜åŒ–ç®—æ³•ä¸Šçš„è¾…åŠ©ï¼Œå¦‚ä½¿ç”¨æ™ºèƒ½ä¼˜åŒ–ç®—æ³•æ¥è·³å‡ºå±€éƒ¨æœ€ä¼˜ï¼› æˆ–è€…æƒ³åŠæ³•å°†ç›®å‰çš„é—®é¢˜è½¬åŒ–æˆä¸ºå‡¸çš„é—®é¢˜ã€‚ å¦ä¸€æ–¹é¢å¯ä»¥ä½¿ç”¨å›¾åƒé‡‘å­—å¡”ï¼Œåœ¨æœ€æ¨¡ç³Šçš„ä¸€å±‚ä¸­å¾—åˆ°ä¸€ä¸ªåˆå§‹çš„å§¿æ€$R,t$ï¼Œä¹‹åæ¥å¦‚åˆ°ç¬¬äºŒå±‚ä¼˜åŒ–çš„æ—¶å€™ï¼Œä½¿ç”¨ç¬¬ä¸€å±‚çš„ç»“æœä½œä¸ºåˆå§‹å€¼ï¼Œä¸æ–­åœ°è¿­ä»£ï¼Œè¿™æ ·å¯ä»¥ç¯èŠ‚å±€éƒ¨æœ€ä¼˜çš„é—®é¢˜ã€‚ ä¼˜ç¼ºç‚¹ ä¼˜åŠ¿ï¼š çœç•¥äº†ç‰¹å¾æå–çš„æ—¶é—´ (ç‰¹å¾æå–çš„ç‚¹ä¹Ÿä¸ä¸€å®šéè¦ä¸ºè§’ç‚¹ï¼Œä¹Ÿå¯ä»¥éšæœºçš„é€‰)ï¼Œäºæ˜¯ç‰¹å¾æè¿°å’ŒåŒ¹é…å…³ç³»çš„æ—¶é—´ä¹Ÿå¯ä»¥çœå»ã€‚ åªæ˜¯éœ€è¦åƒç´ æ¢¯åº¦è€Œä¸å¿…æ˜¯è§’ç‚¹ï¼Œå¯¹ç™½å¢™ç­‰åœ°æ–¹æœ‰è¾ƒå¥½çš„æ•ˆæœï¼Œå¯¹äºæ›²é¢ç‚¹äº‘å…¶æ·±åº¦æ˜¯æ¸å˜çš„è¿‡ç¨‹ï¼Œç‰¹å¾ç‚¹å¾ˆéš¾è¿›è¡Œè¯†åˆ«ï¼Œå…‰æµæ³•ä¹Ÿå…·æœ‰ä¸€å®šçš„ä¸ç¡®å®šæ€§ï¼Œä½†æ˜¯ç›´æ¥æ³•å°±å¯ä»¥å¾ˆå¥½çš„è¯†åˆ«ï¼Œæ›´åŠ é²æ£’ã€‚ å¯ç¨ å¯†æˆ–åŠç¨ å¯†ã€‚ä½†æ˜¯ä¸€èˆ¬å¾—åˆ°ç‰¹å¾ç‚¹ä¼šå› ä¸ºå…³é”®ç‚¹çš„å‡å°‘è€Œå‡ºç°æ— æ³•åŒ¹é…çš„æƒ…å†µã€‚ åŠ£åŠ¿ ç°åº¦ä¸å˜çš„å‡è®¾è¿‡å¼ºã€‚ç°åº¦ä¸å˜çš„å‡è®¾åœ¨å®¹æ˜“å—åˆ°ç›¸æœºæ›å…‰ã€æ¨¡ç³Šä»¥åŠè‡ªç„¶å…‰ç…§å˜åŒ–çš„å½±å“ã€‚ç›¸æœºå­˜åœ¨æš—è§’ï¼Œä¸­å¤®éƒ¨åˆ†æ˜¯é€šè¿‡é€é•œæ¥æˆåƒçš„ï¼Œè€Œéä¸­å¤®éƒ¨åˆ†å³è¾¹ç¼˜éƒ¨åˆ†çš„å…‰ç…§æ˜¯æ¯”è¾ƒæš—çš„ï¼Œå› æ­¤ä»è¾¹ç¼˜è½¬å‘ä¸­å¤®æ—¶ä¼šæœ‰å…‰ç…§çš„å˜åŒ–ã€‚ éå‡¸æ€§ã€‚ç”±äºå›¾åƒå…·æœ‰å¾ˆå¼ºçš„éå‡¸æ€§ï¼Œå› æ­¤å…¶å¯èƒ½åœ¨ä¼˜åŒ–çš„è¿‡ç¨‹é™·å…¥åˆ°å±€éƒ¨æœ€ä¼˜ä¸­å»ã€‚ å•ä¸ªåƒç´ æ²¡æœ‰åŒºåˆ†æ€§ã€‚å…¶ä¼˜åŒ–æ—¶æ˜¯é€‰å–çš„ä¸€ç³»åˆ—çš„ç‚¹æ¥è¿›è¡Œçš„ï¼Œå°‘æ•°æœä»å¤šæ•°ï¼Œæ¥è°ƒæ•´å§¿æ€çš„ï¼Œå› æ­¤è¦å…·æœ‰ä¸€å®šçš„æ•°é‡ä¸Šçš„è§„æ¨¡æ‰æœ‰æ•ˆï¼Œä¸€èˆ¬å»ºè®®500ä¸ªç‚¹ä»¥ä¸Šã€‚ å®è·µé¦–å…ˆå‡†å¤‡å¥½æœ¬ç¨‹åºéœ€è¦ä½¿ç”¨çš„CMakeList.txtæ–‡ä»¶ã€‚ 123456789101112131415161718192021cmake_minimum_required(VERSION 3.0.0)project(vo2 VERSION 0.1.0)set(CMAKE_BUILD_TYPE &quot;Release&quot;)add_definitions(&quot;-DENABLE_SSE&quot;)set(CMAKE_CXX_FLAGS &quot;-std=c++11 ${SSE_FLAGS} -g -O3 -march=native&quot;)find_package(OpenCV 4 REQUIRED)find_package(Sophus REQUIRED)find_package(Pangolin REQUIRED)include_directories( ${OpenCV_INCLUDE_DIRS} ${G2O_INCLUDE_DIRS} ${Sophus_INCLUDE_DIRS} &quot;/usr/include/eigen3/&quot; ${Pangolin_INCLUDE_DIRS})add_executable(direct_method direct_method.cpp)target_link_libraries(direct_method ${OpenCV_LIBS} ${Pangolin_LIBRARIES} Sophus::Sophus) å•å±‚ç›´æ¥æ³•è¿™è¾¹ä¸é’ˆå¯¹ç¨ å¯†ç›´æ¥æ³•çš„ç¼–ç¨‹ï¼Œä¸æ¶‰åŠGPUç¼–ç¨‹ã€‚ä¸ºäº†ç®€å•æ˜“äºç†è§£ï¼Œæˆ‘ä»¬ä½¿ç”¨RGBDå›¾åƒï¼Œç»™å‡ºæ·±åº¦æ•°æ®ï¼Œçœç•¥äº†æ·±åº¦ä¼šæ¢å¤çš„éƒ¨åˆ†ã€‚ å’Œå…‰æµç±»ä¼¼ï¼Œè¿™é‡Œé‡‡å–äº†å¹¶è¡Œè®¡ç®—æ¯ä¸ªåƒç´ ç‚¹çš„è¯¯å·®å’ŒJacobiçŸ©é˜µï¼Œä¸ºæ­¤æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªæ±‚è§£Jacobiçš„ç±»ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152class JacobianAccumulator{public: // æ„é€ å‡½æ•° JacobianAccumulator( const cv::Mat &amp;img1_, const cv::Mat &amp;img2_, const VecVector2d &amp;px_ref_, const vector&lt;double&gt; depth_ref_, Sophus::SE3d &amp;T21_ ):img1(img1_), img2(img2_), px_ref(px_ref_), depth_ref(depth_ref_), T21(T21_) { projection = VecVector2d(px_ref.size(), Eigen::Vector2d(0, 0)); } // æˆå‘˜å‡½æ•° /// accumulate jacobians in a range void accumulate_jacobian(const cv::Range &amp;range); /// get hessian matrix Matrix6d hessian() const { return H; } /// get bias Vector6d bias() const { return b; } /// get total cost double cost_func() const { return cost; } /// get projected points VecVector2d projected_points() const { return projection; } /// reset h, b, cost to zero void reset() { H = Matrix6d::Zero(); b = Vector6d::Zero(); cost = 0; }// æˆå‘˜å˜é‡private: const cv::Mat &amp;img1; const cv::Mat &amp;img2; const VecVector2d &amp;px_ref; const vector&lt;double&gt; depth_ref; Sophus::SE3d &amp;T21; VecVector2d projection; // projected points std::mutex hessian_mutex; Matrix6d H = Matrix6d::Zero(); Vector6d b = Vector6d::Zero(); double cost = 0;}; å…¶ä¸»è¦çš„æˆå‘˜å˜é‡ä¸»è¦åŒ…å«ï¼š å‰åä¸¤å¸§çš„å›¾åƒï¼Œimg1,img2ï¼› ç¬¬ä¸€ä¸ªå›¾ç‰‡çš„åƒç´ ä¿¡æ¯px_refï¼Œå’Œæ·±åº¦ä¿¡æ¯depth_ref,è¿™é‡Œç¬¬ä¸€å¼ å›¾ç‰‡ä¸ºä¸»è¦çš„å‚è€ƒåŸºå‡†ã€‚ ç¬¬äºŒå¼ å›¾ç‰‡ç›¸å¯¹ç¬¬ä¸€å¼ ç›¸æœºçš„å§¿æ€T21,ä»¥åŠç‰¹å¾ç‚¹åœ¨ç¬¬ä¸€å¼ å›¾ç‰‡ä¸Šçš„æŠ•å½±projection ä»¥åŠæ±‚è§£å¢é‡æ–¹ç¨‹æ‰€éœ€çš„hessian çŸ©é˜µå’Œbiaså‘é‡ã€‚ å…¶ä¸»è¦çš„æˆå‘˜å‡½æ•°åŒ…æ‹¬ï¼š ä¸€ä¸ªå‚æ•°é‡ç½®çŸ©é˜µreset(). ç”±äºæˆå‘˜å˜é‡ä¸ºç§æœ‰çš„privateå› æ­¤éœ€è¦åªç”¨æˆå‘˜å‡½æ•°æ¥è·å–ç§æœ‰å˜é‡çš„å€¼ã€‚hessian() bias() è·å–hessiançŸ©é˜µå’Œbiasï¼Œcost_func() è·å–æŸå¤±å€¼ï¼Œ projected_points()è·å–åœ¨ç¬¬ä¸€å¼ å›¾ç‰‡åœ¨ç¬¬äºŒå¼ å›¾ç‰‡ä¸Šçš„æŠ•å½±ç‚¹ã€‚ å¹¶è¡Œè®¡ç®—JacobiçŸ©é˜µçš„accumulate_jacobian(). ä¸‹é¢æ¥ä»‹ç»accumulate_jacobiançš„å…·ä½“å®ç° 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495969798/ å‡½æ•°çš„å®ç°void JacobianAccumulator::accumulate_jacobian(const cv::Range &amp;range){ // å‚æ•° const int half_patch_size = 1; int cnt_good = 0; // è®°å½•å¯ä»¥ç”¨æ¥è®¡ç®—å…‰æµçš„ç‚¹çš„ä¸ªæ•° // åˆå§‹åŒ–Hessian Matrix and bias Matrix6d hessian = Matrix6d::Zero(); Vector6d bias = Vector6d::Zero(); double cost_tmp = 0; // ä¸´æ—¶è®°å½•æŸå¤± for(size_t i = range.start; i &lt; range.end; i++) { // è®¡ç®—åœ¨ç¬¬äºŒä¸ªå›¾ç‰‡ä¸Šçš„æ·±åº¦ // ç”±åƒç´ åæ ‡è¿˜åŸæˆä¸º3dåæ ‡ // æŒ‰ç…§å½“å‰ä¼°è®¡çš„ä½å§¿å˜æ¢åˆ°ç¬¬äºŒå¸§ç›¸æœºä¸‹,å¾—åˆ°ç¬¬äºŒä¸ªç›¸æœºåæ ‡ç³»ä¸‹çš„ç©ºé—´ç‚¹åæ ‡ Eigen::Vector3d point_ref = depth_ref[i] * Eigen::Vector3d((px_ref[i][0] - cx) / fx, (px_ref[i][1] - cy) / fy, 1); // å°†ç¬¬ä¸€ä¸ªå›¾ç‰‡ä¸Šçš„ä¸‰ç»´ç‚¹è½¬ç§»åˆ°ç¬¬äºŒä¸ªç›¸ç‰‡ä¸Šé¢ Eigen::Vector3d point_cur = T21 * point_ref; // æ·±åº¦ä¿¡æ¯æ— æ•ˆåˆ™è·³è¿‡ if (point_cur[2] &lt; 0) // depth invalid continue; // åœ¨ç¬¬äºŒä¸ªå›¾ç‰‡ä¸Šè¿›è¡ŒæŠ•å½± // ç”±æŠ•å½±æ–¹ç¨‹å€’æ¨åˆ°ç‚¹åœ¨ç¬¬äºŒä¸ªç›¸æœºåæ ‡ç³»ä¸‹çš„åƒç´ å¹³é¢åæ ‡ float u = fx * point_cur[0] / point_cur[2] + cx; float v = fy * point_cur[1] / point_cur[2] + cy; if(u &lt; half_patch_size || u &gt; img2.cols - half_patch_size || v &lt; half_patch_size || v &gt; img2.rows - half_patch_size){ // èˆå¼ƒé‡‡æ · patchå— è·‘åˆ°å›¾åƒå¤–çš„æƒ…å†µ continue; } projection[i] = Eigen::Vector2d(u, v); // å°†æŠ•å½±ä¿å­˜ double X = point_cur[0], Y = point_cur[1], Z = point_cur[2]; double Z2 = Z * Z, Z_inv = 1.0 / Z, Z2_inv = Z_inv * Z_inv; cnt_good++; // å¯ä»¥ç”¨æ¥è®¡ç®—å…‰æµçš„æ˜¯ç‚¹çš„æ•°é‡ // è®¡ç®—é›…å…‹æ¯”çŸ©é˜µ for(int x = -half_patch_size; x &lt;= half_patch_size; x++){ for(int y = -half_patch_size; y &lt;= half_patch_size; y++){ double error = GetPixelValue(img1, px_ref[i][0] + x, px_ref[i][1] + y) - GetPixelValue(img2, u + x, v + y); // ç¬¬ä¸€ä¸ªå›¾ç‰‡çš„å…ƒç´ ä¸ºpx_refé‡Œé¢å­˜å‚¨çš„ // ç¬¬äºŒä¸ªå›¾ç‰‡çš„å…ƒç´ ä¸º u, v // åˆå§‹åŒ–JacobiçŸ©é˜µ Matrix26d J_pixel_xi; // åƒç´ å¯¹3Dåæ ‡(å§¿æ€)çš„æ±‚å¯¼ ç›´æ¥æ³•ç›¸æ¯”å…‰æµæ³•å¤šå‡ºæ¥çš„ Eigen::Vector2d J_img_pixel; // å…‰æµå¯¹åƒç´ çš„åæ ‡æ±‚å¯¼ è¿™éƒ¨åˆ†åœ¨å…‰æµé‡Œé‡Œé¢ä¹Ÿæ˜¯æœ‰çš„ J_pixel_xi(0, 0) = fx * Z_inv; J_pixel_xi(0, 1) = 0; J_pixel_xi(0, 2) = -fx * X * Z2_inv; J_pixel_xi(0, 3) = -fx * X * Y * Z2_inv; J_pixel_xi(0, 4) = fx + fx * X * X * Z2_inv; J_pixel_xi(0, 5) = -fx * Y * Z_inv; J_pixel_xi(1, 0) = 0; J_pixel_xi(1, 1) = fy * Z_inv; J_pixel_xi(1, 2) = -fy * Y * Z2_inv; J_pixel_xi(1, 3) = -fy - fy * Y * Y * Z2_inv; J_pixel_xi(1, 4) = fy * X * Y * Z2_inv; J_pixel_xi(1, 5) = fy * X * Z_inv; J_img_pixel = Eigen::Vector2d( 0.5 * (GetPixelValue(img2, u + 1 + x, v + y) - GetPixelValue(img2, u - 1 + x, v + y)), 0.5 * (GetPixelValue(img2, u + x, v + 1 + y) - GetPixelValue(img2, u + x, v - 1 + y)) ); // ä¸­å¿ƒå·®åˆ† // è®¡ç®—æ€»çš„Jacobi Vector6d J = -1.0 * (J_img_pixel.transpose() * J_pixel_xi).transpose(); hessian += J * J.transpose(); bias += -error * J.transpose(); cost_tmp += error * error; } } } if(cnt_good){ // è®¾ç½®è¯¥ç‚¹å¤„çš„æ±‚å¾—çš„Hessian matrix and bias unique_lock&lt;mutex&gt; lck(hessian_mutex); // å› ä¸ºä½¿ç”¨å¹¶è¡Œè®¡ç®—ï¼Œä¸ºäº†é˜²æ­¢æŠ¢å å˜é‡ï¼Œéœ€è¦å…ˆè·å¾—é” H += hessian; b += bias; cost += cost_tmp / cnt_good; }} å‰é¢çš„æ³¨é‡Šå·²ç»å¾ˆæ¸…æ™°äº†ï¼Œç»“åˆå…‰æµæ³•çš„ä¸€äº›æ³¨é‡Šï¼Œå¯ä»¥å¾ˆå¥½çš„ç†è§£ã€‚ æœ€åçš„åœ°æ–¹ï¼Œè¿™é‡Œæ˜¯å¹¶è¡Œçš„è®¡ç®—æ¯ä¸ªç‚¹å¯¹åº”çš„å…‰æµï¼Œæ¯æ¬¡ä¼šè°ƒç”¨unique_lock&lt;mutex&gt; lck(hessian_mutex)è·å¾—é”ä¸ºäº†é˜²æ­¢æŠ¢å å˜é‡ï¼Œä¿æŒè®¡ç®—æ¯ä¸ªç‚¹çš„hessianæ—¶ä¸ä¼šå—åˆ°ä¹‹å‰ç‚¹çš„å½±å“ã€‚ æ€è€ƒï¼šå¦‚ä½•ç†è§£å¹¶è¡Œè®¡ç®—çš„è¿‡ç¨‹ï¼Œå’ŒNä¸ªç‚¹å¦‚ä½•ä¼˜åŒ–å‡ºæœ€å¥½çš„ç›¸æœºå§¿æ€ æ¥ä¸‹æ¥ä¸ºå®ç°å•å±‚å…‰æµçš„å‡½æ•°ï¼Œå…¶ä¸»è¦ä»£ç å¦‚ä¸‹ï¼Œ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576// å•å±‚ç›´æ¥æ³•çš„å®ç°void DirectPoseEstimationSingleLayer( const cv::Mat &amp;img1, const cv::Mat &amp;img2, const VecVector2d &amp;px_ref, const vector&lt;double&gt; depth_ref, Sophus::SE3d &amp;T21){ // è¿™é‡Œä¸»è¦è¿›è¡ŒGNä¼˜åŒ–çš„ä¸»ä½“éƒ¨åˆ† const int iteration = 10; double cost = 0, lastCost = 0; auto t1 = chrono::steady_clock::now(); // é›…å…‹æ¯”JacobiçŸ©é˜µè®¡ç®— JacobianAccumulator jaco_accu(img1, img2, px_ref, depth_ref, T21); for(int iter = 0; iter &lt; iteration; iter++){ jaco_accu.reset(); // åˆå§‹åŒ–ï¼Œå…ˆå°†å…¶ä¸­çš„ H b æ¸…é›¶ // å¹¶è¡ŒåŒ–è®¡ç®—ï¼Œä¸å…‰æµæ³•è¿™ä¸€æ­¥çš„å·¥ä½œååˆ†ç±»ä¼¼ // è®¡ç®—å‡ºæ›´æ–°ç”¨çš„é›…å¯æ¯”çŸ©é˜µ cv::parallel_for_(cv::Range(0, px_ref.size()), std::bind(&amp;JacobianAccumulator::accumulate_jacobian, &amp;jaco_accu, std::placeholders::_1)); Matrix6d H = jaco_accu.hessian(); Vector6d b = jaco_accu.bias(); // æ±‚è§£å¢é‡æ–¹ç¨‹ï¼Œå¾—åˆ°å¢é‡å€¼æ¥æ›´æ–°å§¿æ€å‚æ•° Vector6d update = H.ldlt().solve(b);; // æ›´æ–°å§¿æ€çŸ©é˜µ T21 = Sophus::SE3d::exp(update) * T21; cost = jaco_accu.cost_func(); if (std::isnan(update[0])) { // sometimes occurred when we have a black or white patch and H is irreversible cout &lt;&lt; &quot;update is nan&quot; &lt;&lt; endl; break; } if (iter &gt; 0 &amp;&amp; cost &gt; lastCost) { cout &lt;&lt; &quot;cost increased: &quot; &lt;&lt; cost &lt;&lt; &quot;, &quot; &lt;&lt; lastCost &lt;&lt; endl; break; } if (update.norm() &lt; 1e-3) { // converge break; } lastCost = cost; cout &lt;&lt; &quot;iteration: &quot; &lt;&lt; iter &lt;&lt; &quot;, cost: &quot; &lt;&lt; cost &lt;&lt; endl; } // è®¡ç®—æ—¶é—´ cout &lt;&lt; &quot;T21 = \\n&quot; &lt;&lt; T21.matrix() &lt;&lt; endl; auto t2 = chrono::steady_clock::now(); auto time_used = chrono::duration_cast&lt;chrono::duration&lt;double&gt;&gt;(t2 - t1); cout &lt;&lt; &quot;direct method for single layer: &quot; &lt;&lt; time_used.count() &lt;&lt; endl; // plot the projected pixels here cv::Mat img2_show; cv::cvtColor(img2, img2_show, CV_GRAY2BGR); VecVector2d projection = jaco_accu.projected_points(); // è®¡ç®—åœ¨ç¬¬äºŒä¸ªå›¾åƒä¸Šçš„æŠ•å½±ç‚¹ for (size_t i = 0; i &lt; px_ref.size(); ++i) { // ç»˜åˆ¶å…‰æµ auto p_ref = px_ref[i]; auto p_cur = projection[i]; if (p_cur[0] &gt; 0 &amp;&amp; p_cur[1] &gt; 0) { cv::circle(img2_show, cv::Point2f(p_cur[0], p_cur[1]), 2, cv::Scalar(0, 250, 0), 2); cv::line(img2_show, cv::Point2f(p_ref[0], p_ref[1]), cv::Point2f(p_cur[0], p_cur[1]), cv::Scalar(0, 250, 0)); } } cv::imshow(&quot;current&quot;, img2_show); cv::waitKey();} å…¶åŸºæœ¬çš„æ€è·¯ä¸ºé¦–å…ˆåˆå§‹åŒ–ï¼›ç„¶åå¹¶è¡Œè®¡ç®—æ±‚è§£å¢é‡æ–¹ç¨‹ï¼Œå¾—åˆ°å¯¹åº”çš„æ›´æ–°é‡ï¼›ä¹‹åå°†æ›´æ–°é‡ä»£å…¥å¾—åˆ°æ›´æ–°åçš„å§¿æ€ï¼›æœ€åå¯è§†åŒ–ï¼Œå¾—åˆ°è¿åŠ¨è¿‡ç¨‹ä¸­çš„å…‰æµã€‚ å…¶ä¸»ç¨‹åºå’Œä¹‹å‰çš„å…‰æµæ¯”è¾ƒç±»ä¼¼ï¼Œæˆ‘ä»¬ç”¨ä¸€äº›ç¤ºä¾‹å›¾ç‰‡æµ‹è¯•ç›´æ¥æ³•çš„ç»“æœã€‚æˆ‘ä»¬ä¼šç”¨åˆ°å‡ å¼ Kittilè‡ªåŠ¨é©¾é©¶æ•°æ®é›†çš„å›¾åƒã€‚é¦–å…ˆï¼Œæˆ‘ä»¬è¯»å–ç¬¬ä¸€ä¸ªå›¾åƒleft.pngï¼Œåœ¨å¯¹åº”çš„è§†å·®å›¾disparity.pngä¸­ï¼Œè®¡ç®—æ¯ä¸ªåƒç´ å¯¹åº”çš„æ·±åº¦ï¼Œç„¶åå¯¹000001.png-~000005.pngè¿™äº”å¼ å›¾åƒï¼Œåˆ©ç”¨ç›´æ¥æ³•è®¡ç®—ç›¸æœºçš„ä½å§¿ã€‚ä¸ºäº†å±•ç¤ºç›´æ¥æ³•å¯¹ç‰¹å¾ç‚¹çš„ä¸æ•æ„Ÿæ€§ï¼Œæˆ‘ä»¬éšæœºåœ°åœ¨ç¬¬ä¸€å¼ å›¾åƒä¸­é€‰å–ä¸€äº›ç‚¹,ä¸ä½¿ç”¨ä»»ä½•è§’ç‚¹æˆ–ç‰¹å¾ç‚¹æå–ç®—æ³•ï¼Œæ¥çœ‹çœ‹å®ƒçš„ç»“æœã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243int main(int argv, char **argc){ // è¯»å–å›¾ç‰‡ cv::Mat left_img = cv::imread(left_file, 0); cv::Mat disparity_img = cv::imread(disparity_file, 0); // let's randomly pick pixels in the first image and generate some 3d points in the first image's frame // åœ¨ç¬¬ä¸€ä¸ªå›¾ç‰‡ä¸Šéšæœºé€‰æ‹©3Dç‚¹ cv::RNG rng; // éšæœºå–å¾—2000ä¸ªç‚¹ int nPoints = 2000; int boarder = 20; VecVector2d pixels_ref; vector&lt;double&gt; depth_ref; // generate pixels in ref and load depth data // ç”Ÿæˆåƒç´ ç‚¹å’Œå¯¼å…¥æ·±åº¦æ•°æ® for (int i = 0; i &lt; nPoints; i++) { // æ§åˆ¶éšæœºæ•°é¿å¼€é è¾¹ç•Œçš„ç‚¹ int x = rng.uniform(boarder, left_img.cols - boarder); // don't pick pixels close to boarder int y = rng.uniform(boarder, left_img.rows - boarder); // don't pick pixels close to boarder int disparity = disparity_img.at&lt;uchar&gt;(y, x); // è¿™é‡Œçš„ disparity ä¸ºè§†å·® æœ¬ä¾‹å­ä¸ºä¸€ä¸ªåŒç›®è§†è§‰ // baseline ä»£è¡¨åŸºçº¿ double depth = fx * baseline / disparity; // you know this is disparity to depth depth_ref.push_back(depth); pixels_ref.push_back(Eigen::Vector2d(x, y)); } // estimates 01~05.png's pose using this information Sophus::SE3d T_cur_ref; for (int i = 1; i &lt; 6; i++) { // 1~10 cv::Mat img = cv::imread((fmt_others % i).str(), 0); // try single layer by uncomment this line // å®ç°å•å±‚ // DirectPoseEstimationSingleLayer(left_img, img, pixels_ref, depth_ref, T_cur_ref); // å®ç°å¤šå±‚ DirectPoseEstimationMultiLayer(left_img, img, pixels_ref, depth_ref, T_cur_ref); } return 0;} è¿™é‡Œæˆ‘ä»¬æ²¡æœ‰é€‰æ‹©ç‰¹å¾ç‚¹æ³•è€Œæ˜¯ä½¿ç”¨éšæœºå–ç‚¹çš„æ–¹æ³•ï¼Œç”±æ­¤å¯è§ï¼Œç›¸æ¯”å…‰æµæ³•ç›´æ¥æ³•æ›´åŠ é²æ£’ï¼Œä¸”é€Ÿåº¦æ›´å¿«ã€‚ å¤šå±‚å…‰æµæ³•ä¸‹é¢æ—¶å¤šå±‚å…‰æµæ³•çš„å®ç°å‡½æ•°ï¼Œå…¶ä¸»ä½“éƒ¨åˆ†å’Œä¹‹å‰çš„å…‰æµæ³•ç±»ä¼¼ï¼Œä¹‹å‰çš„ç‰¹å¾ç‚¹å˜æˆäº†æ·±åº¦å€¼å’Œéšæœºåƒç´ å€¼ã€‚é€šè¿‡åœ¨ä¸åŒå°ºåº¦ä¸‹ä½¿ç”¨ç›´æ¥æ³•ä¸æ–­è¿­ä»£ï¼Œåˆ©ç”¨ä¸Šä¸€å±‚æ±‚è§£å¾—åˆ°çš„å€¼æ¥ä½œä¸ºä¸‹ä¸€å±‚å§¿æ€çš„åˆå§‹å€¼ï¼Œä¸æ–­è¿­ä»£å¾—åˆ°æ¯”è¾ƒå¥½çš„è§£ï¼Œé˜²æ­¢å‡ºç°å±€éƒ¨æœ€ä¼˜ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859// å¤šå±‚ç›´æ¥æ³•çš„å®ç°void DirectPoseEstimationMultiLayer( const cv::Mat &amp;img1, const cv::Mat &amp;img2, const VecVector2d &amp;px_ref, const vector&lt;double&gt; depth_ref, Sophus::SE3d &amp;T21){ // å‚æ•° // é‡‘å­—å¡”çš„å±‚æ•° int pyramids = 4; // ç¼©å°æ¯”ä¾‹ double pyramids_scale = 0.5; double scales[] = {1.0, 0.5, 0.25, 0.125}; // create åˆ›å»ºé‡‘å­—å¡” vector&lt;cv::Mat&gt; pyr1, pyr2; // å‘å›¾åƒé‡‘å­—å¡”é‡Œé¢åŠ å›¾ç‰‡ for(int i = 0; i &lt; pyramids; i++){ if(i == 0){ pyr1.push_back(img1); pyr2.push_back(img2); }else{ cv::Mat img1_pyr, img2_pyr; // ä½¿ç”¨é€’å½’ï¼Œåœ¨å‰ä¸€ä¸ªçš„åŸºç¡€ä¸Šç¼©å°åˆ°åŸæ¥çš„ä¸€åŠ cv::resize(pyr1[i - 1], img1_pyr, cv::Size(pyr1[i - 1].cols * pyramids_scale, pyr1[i - 1].rows * pyramids_scale)); cv::resize(pyr2[i - 1], img2_pyr, cv::Size(pyr2[i - 1].cols * pyramids_scale, pyr2[i - 1].rows * pyramids_scale)); pyr1.push_back(img1_pyr); pyr2.push_back(img2_pyr); } } // éšç€ç‰¹å¾é‡‘å­—å¡”ä¸æ–­å‘ä¸Šï¼Œç›¸æœºçš„å†…å‚ä¹Ÿåœ¨ä¸æ–­åœ°æ”¹å˜ // è¿™é‡Œå°†æœ€åº•å±‚çš„å†…å‚å­˜å…¶æ¥ double fxG = fx, fyG = fy, cxG = cx, cyG = cy; // backup the old values // ä»åº•å±‚å‘ä¸Šå¼€å§‹è®¡ç®— for(int level = pyramids - 1; level &gt;= 0; level--) { // è®¡ç®—æ¯å±‚çš„ç‰¹å¾ç‚¹ VecVector2d px_ref_pyr; for(auto &amp;px: px_ref){ px_ref_pyr.push_back(scales[level] * px); } // è®¡ç®—ä¸åŒå±‚çš„ç›¸æœºå†…å‚ double fx = fxG * scales[level]; double fy = fyG * scales[level]; double cx = cxG * scales[level]; double cy = cyG * scales[level]; // å¯¹æ¯å±‚åˆ†åˆ«ä½¿ç”¨ç›´æ¥æ³• DirectPoseEstimationSingleLayer(pyr1[level], pyr2[level], px_ref_pyr, depth_ref, T21); }} å¯è§å…¶å·²ç»å…ˆå‰è¡Œé©¶äº†2.82706mï¼Œå³ä½¿æˆ‘ä»¬éšæœºé€‰ç‚¹ï¼Œç›´æ¥æ³•ä¹Ÿèƒ½å¤Ÿæ­£ç¡®è¿½è¸ªå¤§éƒ¨åˆ†çš„åƒç´ ï¼ŒåŒæ—¶ä¼°è®¡ç›¸æœºçš„è¿åŠ¨ã€‚è¿™ä¸­é—´æ²¡æœ‰ä»»ä½•çš„ç‰¹å¾æå–ã€åŒ¹é…æˆ–å…‰æµçš„è¿‡ç¨‹ã€‚ä»è¿è¡Œæ—¶é—´ä¸Šçœ‹ï¼Œåœ¨2000ä¸ªç‚¹æ—¶ï¼Œç›´æ¥æ³•æ¯è¿­ä»£ä¸€å±‚éœ€è¦1~2æ¯«ç§’ï¼Œæ‰€ä»¥å››å±‚é‡‘å­—å¡”çº¦è€—æ—¶8æ¯«ç§’ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œ2000ä¸ªç‚¹çš„å…‰æµè€—æ—¶å¤§çº¦åœ¨åå‡ æ¯«ç§’ï¼Œè¿˜ä¸åŒ…æ‹¬åç»­çš„ä½å§¿ä¼°è®¡ã€‚æ‰€ä»¥ï¼Œç›´æ¥æ³•ç›¸æ¯”äºä¼ ç»Ÿçš„ç‰¹å¾ç‚¹å’Œå…‰æµé€šå¸¸æ›´å¿«ä¸€äº›ã€‚","link":"/2022/06/12/SLAM/ch8-%E8%A7%86%E8%A7%89%E9%87%8C%E7%A8%8B%E8%AE%A1-%E7%AC%AC%E4%BA%8C%E9%83%A8%E5%88%86-%E7%9B%B4%E6%8E%A5%E6%B3%95/"},{"title":"å¤šGPUå¹¶è¡Œè®­ç»ƒç®€æ˜“æ•™ç¨‹","text":"hljs.initHighlightingOnLoad(); ä½¿ç”¨å•æœºå¤šå¡ç›®å‰æœ‰ä¸¤ä¸ªå¸¸ç”¨çš„APIï¼Œä¸‹é¢æˆ‘ä»¬å°†åˆ†åˆ«æ¥ä»‹ç»è¿™ä¸¤ç§APIã€‚ DataParallelè¿™ä¸ªAPIçš„åŸºæœ¬åŸç†æ˜¯é€šè¿‡è°ƒç”¨å•ä¸ªè¿›ç¨‹æ¥å®ç°çš„æ•°æ®ä¸Šå¹¶è¡Œï¼Œç›®å‰ä½¿ç”¨çš„æ¯”è¾ƒçš„å°‘ï¼Œä¸æ˜¯å½“çš„ä¸»æµï¼Œä½†æ˜¯ä¸ºäº†çœ‹æ‡‚å‰äººçš„ä»£ç ï¼Œéœ€è¦è¿›è¡Œå­¦ä¸€ä¸‹ã€‚ è¿™ä¸ªAPIçš„ç‰¹ç‚¹å°±æ˜¯æ¯”è¾ƒç®€å•ï¼Œæ–¹ä¾¿ä¿®æ”¹ã€‚ æ¨¡å‹ä¿®æ”¹é¦–å…ˆæ£€æµ‹GPUçš„æ•°é‡ï¼Œä¸»è¦çš„ä»£ç å¦‚ä¸‹ï¼š 123456789if __name__ ==&quot;__main__&quot;: if torch.cuda.is_available(): logging.warning(&quot;Cuda is available&quot;) if torch.cuda.device_count() &gt; 1: logging.warning(f&quot;Find {torch.cuda.device_count()} GPUs!&quot;) else: logging.warning(&quot;Too few GPU!&quot;) else: logging.warning(&quot;Cuda is not available! Exit!&quot;) ä¸»è¦ä½¿ç”¨çš„APIä¸ºtorch.cuda.device_count()ï¼šæ£€æµ‹å¯ç”¨çš„GPUçš„æ•°é‡ï¼› torch.cuda.is_available()ï¼šæ£€æµ‹GPUæ˜¯å¦å¯ç”¨ã€‚ ä¹‹åï¼Œå°†æ¨¡å‹æ”¾å…¥åˆ°DataParallelä¸­ï¼š 12model = generator_model()model = torch.nn.DataParallel(module=model, device_ids=[0, 1, 2, 3]) æ¨¡å‹ä¿å­˜å’ŒåŠ è½½ç„¶åï¼Œå¯¹äºæ¨¡å‹çš„ä¿å­˜ï¼Œä¹Ÿè¦è¿›è¡Œä¸€å®šçš„ä¿®æ”¹ï¼š ä¹‹å‰ä½¿ç”¨çš„æ˜¯model.state_dict(). 123torch.save({ 'model_state_dict': model.module.state_dict()}) ä½†æ˜¯ï¼Œä¸€èˆ¬è½½å…¥ä¹‹å‰çš„æ¨¡å‹ï¼Œä¸€èˆ¬æ˜¯åœ¨å¯¼å…¥åˆ°DataParallelä¹‹å‰è¿›è¡Œçš„ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä¸éœ€è¦ä¿®æ”¹ï¼Œä»…ä»…æ˜¯å°†ä¸€äº›ç®€å•å¯¼å…¥æ¨¡å‹çš„æœªçŸ¥è¿›è¡Œä¿®æ”¹å³å¯ï¼Œé€šè¿‡map_location=æ¥ç¡®å®šå¯¼å…¥çš„è®¾å¤‡ã€‚ 123checkpoint = torch.load(f=xxxx, map_location=torch.device(&quot;cuda:0&quot;))# è¿™é‡Œå¯ä»¥æ˜¯cpu,cuda,cuda:indexmodel.load_state_dict(checkpoint['model_state_dict']) æœ€åï¼Œä¿®æ”¹çš„æ˜¯batch_sizeå‚æ•°ï¼Œä½¿ç”¨å‡ å¼ å¡ï¼Œå°±åœ¨åŸæ¥çš„åŸºç¡€ä¸Šæˆä¹˜ä»¥è®°å°±è¡Œã€‚ DistributedDataParallel(æ¨è)è¯¥APIæ˜¯å½“ä¸‹æ¯”è¾ƒç«çš„APIï¼Œæœ€æ–°æ¨å‡ºçš„ï¼Œå¯ä»¥å®ç°å¤šè¿›ç¨‹æ‰§è¡Œå¤šå¡è®­ç»ƒï¼Œæ•ˆç‡æ¯”è¾ƒé«˜ï¼Œä¿®æ”¹äº†ä¹‹å‰ä¸€äº›DataParallelçš„ä¸€äº›å¼Šç«¯ã€‚ ä½†æ˜¯è¿™ä¸ªAPIéœ€è¦ä¿®æ”¹çš„å†…å®¹å¾ˆå¤šï¼Œè€Œä¸”è¿˜è¦å®šä¹‰ä¸€äº›å…³äºè¿›ç¨‹å’Œå¤šå¡é€šä¿¡æ–¹å¼çš„å†…å®¹ã€‚ ä»£ç ä¿®æ”¹é¦–å…ˆï¼Œæ˜¯å®šä¹‰å¤šè¿›ç¨‹ç»„çš„å†…å®¹ï¼š 1torch.distributed.init_process_group(&quot;nccl&quot;, world_size=n_gpus, rank=args.local_rank) &quot;nccl&quot;ä»£è¡¨çš„æ˜¯å¤šå¡çš„é€šä¿¡æ–¹å¼ï¼› world_size=n_gpus ä»£è¡¨å½“å‰èŠ‚ç‚¹ä¸Šæœ‰å‡ å¼ GPUå¡ï¼› rank=args.local_rank æŒ‡å®šå½“å‰çš„è¿›ç¨‹åœ¨ç¬¬ä¸ªGPUä¸Šã€‚ ä¹‹åï¼ŒæŒ‡å®šå½“å‰è¿›ç¨‹ä½¿ç”¨çš„æ˜¯ç¬¬å‡ å¼ å¡ï¼š 1torch.cuda.set_device(args.local_rank) args.local_rankå…¶å®æ˜¯åœ¨å¤–éƒ¨å®šä¹‰çš„é…ç½®ä¿¡æ¯ã€‚ è¿™ä¸ªè¯­å¥çš„ä¿¡æ¯ç›¸å½“äºCUDA_VISIBLE_DEVICESç¯å¢ƒå˜é‡ã€‚ ä»¥ä¸Šçš„ä¸¤æ­¥å‡ä¸ºå‡†å¤‡å·¥ä½œï¼Œä¸‹é¢æˆ‘ä»¬å¼€å§‹è¿›è¡Œå°†æ¨¡å‹å°è£…å¯¼å…¥åˆ°å¤šçº¿ç¨‹çš„ç±»ä¸­ï¼Œè¿™é‡Œçš„åŒ…è£¹æ¨¡å‹çš„æ–¹æ³•å’ŒDataParallelã€‚ 1model = torch.nn.parallel.DistributedDataParallel(model.cuda(args.local_rank), device_ids=[args.local_rank]) model.cuda(args.local_rank)å°†æ¨¡å‹æ‹·è´åˆ°å½“å‰çš„GPUå¡ä¸Šï¼› device_ids=[args.local_rank] æŒ‡å®šè®­ç»ƒæ‰€ç”¨çš„GPUè®¾å¤‡ï¼Œè¿™é‡Œä¸€ä¸ªè¿›ç¨‹ä½¿ç”¨ä¸€ä¸ªGPUå°±å¥½ã€‚ ä¹‹åï¼Œå°†æ•°æ®éšæœºåˆ†é…åˆ°å¯¹åº”çš„GPUä¸Šã€‚ 12train_sampler = DistributedSampler(train_set)# ä¸»è¦æ˜¯å°†æ•°æ®éšæœºå–æ ·ï¼Œå†åˆ†åˆ°å„ä¸ªGPUå†… trainsetä»£è¡¨è®­ç»ƒé›†ï¼› è¿™ä¸ªå‡½æ•°çš„ä¸»è¦çš„ä½œç”¨æ˜¯å°†æ•°æ®éšæœºçš„åˆ†åˆ°ä¸åŒçš„GPUä¸Šï¼› å…¶æ‰€åœ¨çš„æœªçŸ¥ä¸ºfrom torch.utils.data import DistributedSampler å’ŒDataloader åœ¨ä¸€èµ·ï¼Œä½œç”¨ä¹Ÿæ¯”è¾ƒçš„ç±»ä¼¼ã€‚ DistributedSamplerçš„ä¸»è¦çš„æºç å¦‚ä¸‹æ‰€ç¤ºï¼š 12345678class DistributedSampler(Sampler[T_co]): r&quot;&quot;&quot;Sampler that restricts data loading to a subset of the dataset. It is especially useful in conjunction with :class:`torch.nn.parallel.DistributedDataParallel`. In such a case, each process can pass a :class:`~torch.utils.data.DistributedSampler` instance as a :class:`~torch.utils.data.DataLoader` sampler, and load a subset of the original dataset that is exclusive to it. å…¶ä¸»è¦æ˜¯é…åˆDistributedDataParallelä¸€èµ·æ¥ä½¿ç”¨çš„ï¼Œå…¶ä¸»è¦çš„ä½œç”¨æ˜¯å°†æ•°æ®å‡åŒ€çš„åˆ†é…åˆ°å‡ ä¸ªGPUä¸­ï¼Œå‡ ä¸ªGPUçš„æ•°æ®ä¸€æ±‡æ€»å°±æ˜¯åŸæ¥çš„æ•°æ®é›†ã€‚ 1234self.num_samples = math.ceil(len(self.dataset) / self.num_replicas)self.total_size = self.num_samples * self.num_replicasself.shuffle = shuffleself.seed = seed ä¸‹é¢æ˜¯å¯¹åº”__iter__ çš„éƒ¨åˆ†ä»£ç ï¼Œå…¶ä¸»è¦æ˜¯è¿”å›çš„æ¯ä¸ªepochä¸­ä¸€ä¸ªbatchå¯¹åº”çš„ç´¢å¼•ä¸‹æ ‡çš„å€¼ã€‚è¿™é‡Œæœ‰ä¸¤ä¸ªæ§åˆ¶ç´¢å¼•éšæœºæ€§çš„å‚æ•°: self.seed éšæœºç§å­ï¼Œé»˜è®¤ä¸º0ï¼› self.epoch å½“å‰çš„epochå€¼ï¼Œé»˜è®¤ä¸º0ï¼Œæ±‚é»˜è®¤æ˜¯ä¸å˜çš„ã€‚ 123456def __iter__(self) -&gt; Iterator[T_co]: if self.shuffle: # deterministically shuffle based on epoch and seed g = torch.Generator() g.manual_seed(self.seed + self.epoch) indices = torch.randperm(len(self.dataset), generator=g).tolist() å¦‚æœè¿™ä¸¤ä¸ªå‚æ•°æ˜¯ä¸å˜çš„ï¼Œé‚£ä¹ˆæ¯ä¸ªepoché‡Œé¢äº§ç”Ÿçš„batchåˆ’åˆ†æ˜¯ä¸€æ ·çš„ï¼Œåœ¨è®­ç»ƒçš„è¿‡ç¨‹ä¸­å°±ä¼šå‡ºç°æ¯”è¾ƒæœ‰è§„å¾‹çš„å‘¨æœŸæ€§çš„éœ‡è¡ï¼Œå› æ­¤æˆ‘ä»¬è¦å¯¹ä¸Šè¿°ä¸¤ä¸ªå‚æ•°ä¸­è‡³å°‘è°ƒèŠ‚å…¶ä¸­çš„ä¸€ä¸ªï¼Œ å¯ä»¥å°†Â·epochå‚æ•°èµ‹äºˆå½“å‰è¿è¡Œçš„epochçš„å€¼ï¼Œå³è°ƒç”¨set_epoch(); æˆ–è€…è°ƒæ•´éšæœºç§å­ï¼Œself.seed. 1234indices = torch.randperm(len(self.dataset), generator=g).tolist()# subsampleindices = indices[self.rank:self.total_size:self.num_replicas]assert len(indices) == self.num_samples indices äº§ç”Ÿçš„æ˜¯ç´¢å¼•çš„åºåˆ—å€¼ï¼Œæ¥åˆ†é…åˆ°ä¸åŒçš„GPUä¸Šã€‚ ç„¶åï¼Œå®šä¹‰å¥½çš„samplerå¯¼å…¥çš„å¯¹åº”çš„Dataloaderä¸­ã€‚ 1train_loader = DataLoader(..., sampler=train_sampler) æ³¨æ„ï¼šè¿™é‡ŒDataloaderå¦‚æœæ¥å—äº†è‡ªå®šä¹‰çš„sampleä¹‹åï¼Œå°±ä¸ç”¨å†å®šä¹‰shuffleå‚æ•°äº†ã€‚ æœ€åï¼Œå°†æ•°æ®å¯¼å…¥åˆ°å¯¹åº”èŠ‚ç‚¹çš„GPUä¸­ã€‚ 1data = data.cuda(args.local_rank) æ‰§è¡Œå‘½ä»¤åœ¨è¿è¡Œå‘½ä»¤æ—¶ï¼Œéœ€è¦å¯¹å‚æ•°è¿›è¡Œä¸€å®šçš„è®¾ç½®æ“ä½œï¼š 1python -m torch.distributed.launch --nproc_per_node=ngpus train.py æ¨¡å‹ä¿å­˜å’ŒåŠ è½½ä¸€èˆ¬å°†torch.save() åœ¨local_rank=0çš„ä½ç½®è¿›è¡Œä¿å­˜ï¼ŒåŒæ ·æ³¨æ„è°ƒç”¨model.module.state_dict(). æ¨¡å‹çš„åŠ è½½è¿˜æ˜¯ä½¿ç”¨çš„æ˜¯torch.load()ä½†æ˜¯è¦æ³¨æ„map_location. å…¶ä»–æ³¨æ„äº‹é¡¹ train.pyä¸­è¦æœ‰æ¥å—local_rankçš„å‚æ•°é€‰é¡¹ï¼Œlaunchä¼šä¼ å…¥è¿™ä¸ªå‚æ•°ã€‚ æ¯ä¸ªè¿›ç¨‹çš„batch_sizeåº”è¯¥æ˜¯ä¸€ä¸ªGPUæ‰€éœ€è¦çš„batch_sizeå¤§å°ï¼Œè¿™ç§æ–¹æ³•æ˜¯å¢åŠ è¿›ç¨‹æ•°çš„ï¼Œæ¯ä¸ªGPUå ä¸€ä¸ªè¿›ç¨‹ã€‚ åœ¨æ¯ä¸ªå‘¨æœŸå¼€å§‹å¤„ï¼Œè°ƒç”¨train_sampler.set_epoch(epoch)å¯ä»¥ä½¿å¾—æ•°æ®å……åˆ†æ‰“ä¹±ã€‚ æœ‰äº†samplerï¼Œå°±ä¸è¦åœ¨DataLoaderä¸­è®¾ç½®shuffle=Trueäº†ã€‚ ä»£ç å®ç°12345678910111213141516171819202122232425262728293031323334353637383940# è®¾ç½®argparseçš„å‚æ•°parser = argparse.ArgumentParser()parser.add_argument(&quot;--local_rank&quot;, help=&quot;local device id on current node&quot;, type=int)args = parser.parse_args()# ä¸€å…±å‡ ä¸ªå¯ç”¨çš„ GPUn_gpus = 4# local_rankè¡¨ç¤ºå½“å‰çš„è¿›ç¨‹ idtorch.distributed.init_process_group(&quot;nccl&quot;, world_size=n_gpus, rank=args.local_rank)# ç›¸å½“äºä¿®æ”¹äº†CUDA_VISIBLE_DEVICESçš„ç¯å¢ƒå˜é‡torch.cuda.set_device(args.local_rank)# å°†æ¨¡å‹å¯¼å…¥DDTçš„APIä¸­model = torch.nn.parallel.DistributedDataParallel(model.cuda(args.local_rank), device_ids=[args.local_rank])# åˆ›å»ºæ•°æ®é›†train_dataset = YepianDatasets( root_dir=config.TRAIN_DIR, vib_dir='vib', condition_dir='condition', fre_dir='fre', label_dir='label',)train_sampler = DistributedSampler(train_dataset)# ä¸»è¦æ˜¯å°†æ•°æ®éšæœºå–æ ·ï¼Œå†åˆ†åˆ°å„ä¸ªGPUå†…train_loader = DataLoader(train_dataset, sampler=train_sampler, batch_size=64)# å¯¹äºéªŒè¯é›†è€Œè¨€ï¼Œå°±ä¸éœ€è¦ä½¿ç”¨ä¸Šè¿°çš„train_sampleäº†for epoch in range(500): # ä¿è¯æ•°æ®éšæœºè·å¾—ï¼Œé˜²æ­¢å‡ºç°å‘¨æœŸçš„æ€§çš„éœ‡è¡ train_sampler.set_epoch(epoch) # æ¨¡å‹çš„ä¿å­˜ local_rank = args.local_rank if local_rank == 0: # å†local_rank == 0æ‰è¿›è¡Œæ¨¡å‹çš„ä¿å­˜ torch.save({ 'model_state_dict': model.module.state_dict() }) ä¹‹ååœ¨å‘½ä»¤è¡Œè¾“å…¥ç›¸å…³çš„å‘½ä»¤ 1python -m torch.distributed.launch --nproc_per_node=4 train.py","link":"/2022/06/13/PyTorch%E6%95%99%E7%A8%8B%E4%B8%8E%E6%BA%90%E7%A0%81%E8%AE%B2%E8%A7%A3/%E5%A4%9AGPU%E5%B9%B6%E8%A1%8C%E8%AE%AD%E7%BB%83%E7%AE%80%E6%98%93%E6%95%99%E7%A8%8B/"},{"title":"Ch9 åç«¯ ç¬¬ä¸€éƒ¨åˆ† EKF","text":"hljs.initHighlightingOnLoad(); ä¹‹å‰çš„è§†è§‰é‡Œç¨‹è®¡åªæœ‰è¿ç»­ä¸¤å¼ å›¾ç‰‡çš„çŸ­æš‚çš„è®°å¿†ï¼Œè€Œæˆ‘ä»¬å¸Œæœ›çš„æ˜¯åœ¨æ•´ä¸ªè¿åŠ¨è½¨è¿¹ä¸Šä¿æŒæœ€ä¼˜ï¼Œéœ€è¦ä½¿ç”¨æ–°è¿›çš„ä¿¡æ¯æ¥æ›´æ–°ç³»ç»Ÿçš„çŠ¶æ€ã€‚ æœ¬è®²ä¸»è¦ä»‹ç»çš„å¸¸ç”¨åç«¯ä¸­çš„ç¬¬ä¸€ç§EKFæ‰©å±•å¡å°”æ›¼æ»¤æ³¢çš„æ–¹æ³•ã€‚ çŠ¶æ€ä¼°è®¡é—®é¢˜çš„æ¦‚ç‡è§£é‡Šå¯¹äºåç«¯é—®é¢˜ï¼Œå…¶å®å¯ä»¥ç†è§£æˆï¼š ä»å¸¦æœ‰å™ªå£°çš„æ•°æ®æ¥ä¼°è®¡å†…åœ¨çš„çŠ¶æ€çš„é—®é¢˜ï¼› ç¬¬ä¸€ç« å»ºç«‹çš„çŠ¶æ€æ–¹ç¨‹å’Œè¿åŠ¨æ–¹ç¨‹å¯çŸ¥ï¼Œå…¶ä¸»è¦å°±æ˜¯ä½¿ç”¨$u,z$ æ¥ä¼°è®¡$x_k,y_j$ çš„å€¼ï¼› \\boldsymbol x_{k+1}=f(\\boldsymbol x_k,\\boldsymbol u_k)+\\boldsymbol \\omega_k \\\\ \\boldsymbol z_{k,j}=h(\\boldsymbol x_k,\\boldsymbol y_j)+\\boldsymbol v_{k,j} è¿™é‡Œæ•°æ®å™ªå£°é€šå¸¸è¢«è®¤ä¸ºæ˜¯é«˜æ–¯å™ªå£°ã€‚ é€šè¿‡MLEï¼ŒMAPç­‰æ–¹æ³•è½¬æ¢æˆä¸ºä¸€ä¸ªéçº¿æ€§ä¼˜åŒ–çš„é—®é¢˜ã€‚ åœ¨åç«¯ä¼˜åŒ–çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¼šè€ƒè™‘ä¸€æ®µè¾ƒé•¿çš„æ—¶é—´å†…çš„çŠ¶æ€ä¼°è®¡é—®é¢˜ï¼Œå…¶ä¸­ä¸ä»…è¦ä½¿ç”¨è¿‡å»çš„æ—¶é—´æ¥æ›´æ–°è‡ªå·±çš„çŠ¶æ€ï¼ŒåŒæ—¶ä¹Ÿéœ€è¦æœªæ¥çš„ä¿¡æ¯æ¥è¿›è¡Œæ›´æ–°äºæ˜¯å¯ä»¥åˆ†ä¸ºæ¸è¿›å¼å’Œæ‰¹é‡å¼çš„æ–¹æ³•ã€‚ æ¸è¿›å¼/å¢é‡å¼ ä¿æŒå½“å‰çŠ¶æ€çš„ä¼°è®¡ï¼Œåœ¨åŠ å…¥æ–°çš„ä¿¡æ¯æ˜¯ï¼Œæ›´æ–°å·²æœ‰çš„ä¼°è®¡(æ»¤æ³¢)ã€‚ çº¿æ€§ç³»ç»Ÿ+é«˜æ–¯å™ªå£°=Kalmen filter; éçº¿æ€§ç³»ç»Ÿ+é«˜æ–¯å™ªå£°+çº¿æ€§è¿‘ä¼¼=EKFï¼› ç›¸æœºæ¨¡å‹å°±æ˜¯ä¸€ä¸ªéçº¿æ€§çš„æ¨¡å‹ã€‚ éçº¿æ€§ç³»ç»Ÿ+éé«˜æ–¯å™ªå£°+éå‚æ•°åŒ–=ç²’å­æ»¤æ³¢å™¨ï¼› è§†è§‰é‡Œç¨‹è®¡çš„ç‰¹å¼ ç‚¹è¿‡å¤šï¼Œå› æ­¤æ»¤æ³¢å™¨å¾ˆéš¾æ‰¿å—è§†è§‰SLAMçš„è®¡ç®—é‡ï¼Œåœ¨æ¿€å…‰é‡Œç”¨çš„å¯èƒ½æ¯”è¾ƒå¤šã€‚ Sliding window filter &amp; multiple state Kalman (MSCKF) æ»‘åŠ¨çª—å£æ³•æ˜¯æ‰¹é‡æ³•å’Œæ»¤æ³¢æ–¹æ³•ç›¸ç»“åˆçš„ä¸€ç§æ–¹æ³•ã€‚å…¶ä¸»è¦çš„æƒ³æ³•æ˜¯åœ¨ä¸€æ®µæ»‘åŠ¨çª—å£å†…æ±‚è§£æœ€å€¼ã€‚ æ‰¹é‡å¼ å…¶ä¸»è¦å¼ç»™å®šä¸€å®šè§„æ¨¡çš„æ•°æ®ï¼Œè¿™éƒ¨åˆ†æ•°æ®ä¸ä»…æœ‰è¿‡å»çš„ä¹Ÿæœ‰æœªæ¥çš„ï¼Œæ‰¹é‡æ³•æ˜¯è®¡ç®—è¯¥ç»„æ•°æ®ä¸‹çš„çŠ¶æ€ä¼°è®¡é—®é¢˜ã€‚ å·¦ä¾§ä»…ä»…åªæœ‰è¿åŠ¨æ–¹ç¨‹ï¼Œå…¶è¿åŠ¨æ˜¯å‘æ•£çš„ï¼Œä¸ç¡®å®šåº¦å¾ˆå¤§ã€‚å› ä¸ºå…¶è¾“å…¥çš„æ•°æ®æ˜¯çº¯åœ¨å™ªå£°çš„ï¼Œä¼šä¸æ–­çš„ç§¯ç´¯ï¼Œå¯¼è‡´ä¸‹ä¸€æ—¶åˆ»çš„ä¼°è®¡ç›¸æ¯”å‰ä¸€æ—¶åˆ»è¯¯å·®è¶Šç§¯è¶Šå¤§ã€‚ å…¶å®å°±ç›¸å½“äºè’™ç€çœ¼èµ°è·¯ï¼š ä¸€å¼€å§‹æˆ‘ä»¬çŸ¥é“è‡ªå·±åœ¨å“ªï¼› èƒ½ç²—ç•¥ä¼°è®¡æ¯æ­¥çš„è·ç¦»ï¼Œä½†ä¸ç¡®å®š ä¸ç¡®å®šæ€§éšæ—¶é—´ç´¯ç§¯ å¯¼è‡´è‡ªèº«çš„ä½ç½®ä¸ç¡®å®šæ€§è¶Šæ¥è¶Šå¤§ å³ä¾§æ˜¯å­˜åœ¨è·¯æ ‡ç‚¹çš„æƒ…å†µä¸‹ï¼Œå…¶ä¸ç¡®å®šæ€§ä¼šè¿…é€Ÿçš„å‡å°ï¼Œ æ­¤æ—¶å°±ç›¸å½“äºåœ¨æŸä¸ªæ—¶åˆ»çå¼€ä¸€ä¸‹çœ¼ç›ï¼š èƒ½å¤Ÿè§‚æµ‹åˆ°å‘¨å›´ï¼› å°½ç®¡ä¹Ÿæœ‰ä¸ç¡®å®šæ€§ï¼Œä½†æ¯”ä¼°è®¡æ­¥é•¿å°å¾ˆå¤šï¼› èƒ½å¤Ÿå°†ä¸ç¡®å®šæ€§ä¿æŒåœ¨ä¸€å®šèŒƒå›´å†…ã€‚ æˆ‘ä»¬SLAMä¸»è¦è§£å†³çš„æ˜¯æœªçŸ¥ç¯å¢ƒä¿¡æ¯ä¸‹çš„çŠ¶æ€ä¼°è®¡é—®é¢˜ï¼Œå³æˆ‘ä»¬å¯¹è·¯æ ‡ç‚¹åœ¨ç¯å¢ƒå½“ä¸­çš„æœªçŸ¥ä¹Ÿæ˜¯ä¸€æ— æ‰€çŸ¥çš„ï¼Œè¿™ä¸ªé—®é¢˜æ˜¯æœ‰ä¸€å®šéš¾åº¦çš„ã€‚ åœ¨ç¬¬å…­è®²ä¸­ï¼Œä»‹ç»çš„ä¸»è¦æ˜¯æå¤§ä¼¼ç„¶ä¼°è®¡é—®é¢˜ï¼Œå°±æ˜¯æ‰¹é‡å¼çš„çŠ¶æ€ä¼°è®¡é—®é¢˜å¯ä»¥è½¬æ¢ä¸ºæœ€å¤§ä¼¼ç„¶ä¼°è®¡é—®é¢˜ï¼Œå¹¶ä½¿ç”¨æœ€å°äºŒä¹˜æ³•æ¥ä¼°è®¡æ±‚è§£ã€‚ åœ¨æœ¬ç« ä¸»è¦æƒ³è§£å†³çš„æ˜¯å¦‚ä½•è§£å†³æ¸è¿›å¼çš„é—®é¢˜ã€‚ é¦–å…ˆï¼Œéœ€è¦æ˜ç¡®çš„æ˜¯è¿åŠ¨å’Œè§‚æµ‹éƒ½å—åˆ°å™ªå£°çš„å½±å“ï¼Œå…¶æ¬¡å°±æ˜¯æœ‰å¯èƒ½æ²¡æœ‰è¿åŠ¨æ–¹ç¨‹ï¼Œçº¯è§†è§‰çš„SLAMã€‚ä¸‹é¢æˆ‘ä»¬ä½¿ç”¨è´å¶æ–¯æ»¤æ³¢å™¨çš„æ–¹æ³•æ¥æ¨åˆ°å¡å°”æ›¼æ»¤æ³¢å™¨ã€‚ \\left\\{\\begin{array}{l}\\boldsymbol{x}_{k}=f\\left(\\boldsymbol{x}_{k-1}, \\boldsymbol{u}_{k}\\right)+\\boldsymbol{w}_{k} \\\\ \\boldsymbol{z}_{k, j}=h\\left(\\boldsymbol{y}_{j}, \\boldsymbol{x}_{k}\\right)+\\boldsymbol{v}_{k, j}\\end{array} \\quad k=1, \\ldots, N, j=1, \\ldots, M\\right. éœ€è¦å¼ºè°ƒçš„æ˜¯ï¼Œå§¿æ€ $x$ å’Œè·¯æ ‡ $y$ å…¶å®å¯ä»¥çœ‹æˆæœä»æŸç§çŠ¶æ€åˆ†å¸ƒçš„éšæœºå˜é‡ï¼Œä¸æ˜¯ä¸€ä¸ªå•ç‹¬çš„æ•°ã€‚å…¶ä¸ç¡®å®šåº¦ä¸»è¦æ˜¯æŒ‡çš„æ–¹å·®çš„å¤§å°ã€‚å…¶ä¼°è®¡å€¼æŒ‡çš„æ˜¯éšæœºå˜é‡çš„å‡å€¼ã€‚ ä¸ºäº†ç®€åŒ–ä¸Šè¿°çš„è¡¨è¾¾å¼ï¼Œæˆ‘ä»¬å°† k æ—¶åˆ»æ‰€æœ‰å¾…ä¼°è®¡çš„é‡ç»„æˆ k æ—¶åˆ»çš„çŠ¶æ€ï¼Œå…¶ä¸­æš´æ‰£å½“å‰æ—¶åˆ»çš„å§¿æ€å’Œmä¸ªè·¯æ ‡ç‚¹ã€‚ \\boldsymbol{x}_{k} \\triangleq\\left\\{\\boldsymbol{x}_{k}, \\boldsymbol{y}_{1}, \\ldots, \\boldsymbol{y}_{m}\\right\\}åŒæ—¶ï¼Œæˆ‘ä»¬å°†è§‚æµ‹ç»Ÿä¸€å†™æˆ$z_k$ æ­¤æ—¶çŠ¶æ€æ–¹ç¨‹å’Œè¿åŠ¨æ–¹ç¨‹çš„è¡¨è¾¾å½¢å¼å¯ä»¥æ›´åŠ çš„ç®€æ´ã€‚è¡¨è¾¾å¼å¦‚ä¸‹ï¼š \\left\\{\\begin{array}{l}x_{k}=f\\left(x_{k-1}, \\boldsymbol{u}_{k}\\right)+\\boldsymbol{w}_{k} \\\\ \\boldsymbol{z}_{k}=h\\left(\\boldsymbol{x}_{k}\\right)+\\boldsymbol{v}_{k}\\end{array} \\quad k=1, \\ldots, N\\right.ç°åœ¨è€ƒè™‘kæ—¶åˆ»çš„æƒ…å†µï¼Œå¸Œæœ›ä½¿ç”¨è¿‡å»ä»0åˆ°kä¸­çš„æ•°æ®æ¥ä¼°è®¡ç°åœ¨çš„çŠ¶æ€åˆ†å¸ƒæƒ…å†µï¼Œå³$P\\left(\\boldsymbol{x}_{k} \\mid \\boldsymbol{x}_{0}, \\boldsymbol{u}_{1: k}, \\boldsymbol{z}_{1: k}\\right)$. å…¶ä¸­$0:k$ è¡¨ç¤ºä»0åˆ°k æ—¶åˆ»çš„æ‰€æœ‰æ•°æ®ã€‚æ³¨æ„$z_k$ è¡¨ç¤ºæ‰€æœ‰åœ¨ k æ—¶åˆ»çš„è§‚æµ‹æ•°æ®ï¼Œå¯èƒ½ä¸æ­¢ä¸€ä¸ªï¼Œåªæ˜¯è¿™ç§è®°æ³•æ¯”è¾ƒæ–¹ä¾¿ã€‚$x_k$ å…¶å®å’Œ$x_{k-1},x_{k-2}$ è¿™äº›å˜é‡éƒ½ç›¸å…³ä½†æ˜¯æ­¤å¼å¹¶æ²¡æœ‰å°†å…¶æ˜¾ç¤ºçš„è¡¨ç°å‡ºæ¥ã€‚ ä½¿ç”¨Bayeså…¬å¼å¯å¾—ï¼š P\\left(\\boldsymbol{x}_{k} \\mid \\boldsymbol{x}_{0}, \\boldsymbol{u}_{1: k}, \\boldsymbol{z}_{1: k}\\right) \\propto P\\left(\\boldsymbol{z}_k|\\boldsymbol{x}_k \\right)P\\left(\\boldsymbol{x}_{k} \\mid \\boldsymbol{x}_{0}, \\boldsymbol{u}_{1: k}, \\boldsymbol{z}_{1: k-1}\\right)å…¶ä¸­ï¼Œç¬¬ä¸€é¡¹è¢«ç§°ä¸ºä¼¼ç„¶ï¼Œåä¸€é¡¹è¢«ç§°ä¸ºå…ˆéªŒï¼Œå…¶ä¸­çš„ä¼¼ç„¶å¯ä»¥é€šè¿‡è§‚æµ‹æ¥ç»™å‡ºï¼Œè€Œå¯¹äºå…ˆéªŒéƒ¨åˆ†ï¼Œ$x_k$ ä¼šå—åˆ° $x_{k-1}$ çš„å½±å“ï¼Œäºæ˜¯ä½¿ç”¨æ¡ä»¶å±•å¼€å¯å¾—ï¼š P\\left(x_{k} \\mid x_{0}, u_{1: k}, z_{1: k-1}\\right)=\\int P\\left(x_{k} \\mid x_{k-1}, x_{0}, u_{1: k}, z_{1: k-1}\\right) P\\left(x_{k-1} \\mid x_{0}, u_{1: k}, z_{1: k-1}\\right) \\mathrm{d} x_{k-1}ä¸Šé¢å¼å­ä¸­çš„ç¬¬äºŒé¡¹å¯ä»¥é€šè¿‡ä¸Šä¸€è½®è¿­ä»£å¾—å‡ºï¼Œæ˜¯k-1æ—¶åˆ»çš„çŠ¶æ€ä¼°è®¡ã€‚ å¯¹äºç¬¬ä¸€é¡¹ï¼Œkæ—¶åˆ»å—å…ˆå‰çŠ¶æ€çš„å½±å“ï¼Œæœ‰ä¸¤ç§ä¸»è¦çš„è§£å†³æ–¹æ³•ï¼š ä¸€ç§å¯ä»¥å‡è®¾kæ—¶åˆ»çŠ¶æ€ä»…ä»…å’Œk-1æ—¶åˆ»æœ‰å…³ï¼Œä½¿ç”¨ä¸€é˜¶é©¬å°”å¯å¤«æ€§ï¼ŒåŸºäºæ­¤å‡è®¾å¯ä»¥æ¨å‡ºæ‰©å±•å¡å°”æ›¼æ»¤æ³¢EKFã€‚ å¦ä¸€ç§å¯ä»¥å‡è®¾kæ—¶åˆ»å’Œå…ˆå‰æ‰€æœ‰æ—¶åˆ»å‡æœ‰å…³ï¼Œæ­¤æ—¶é‡‡ç”¨éçº¿æ€§ä¼˜åŒ–çš„æ–¹æ³•æ±‚è§£ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬å°†åˆ†åˆ«ä»‹ç»ä¸Šè¿°ä¸¤ä¸ªæ¡†æ¶çš„åŸç†ã€‚ çº¿æ€§ç³»ç»Ÿä¸KFæˆ‘ä»¬é¦–å…ˆæ¥çœ‹æ»¤æ³¢å™¨æ¨¡å‹ã€‚å½“æˆ‘ä»¬å‡è®¾äº†é©¬å°”å¯å¤«çš„æƒ…å†µæ—¶ï¼Œå…¶è¡¨è¾¾å¼å¯ä»¥ç®€åŒ–ï¼š P\\left(\\boldsymbol x_{k} \\mid \\boldsymbol x_{k-1}, \\boldsymbol x_{0}, \\boldsymbol u_{1: k}, \\boldsymbol z_{1: k-1}\\right)=P\\left(\\boldsymbol x_{k} \\mid \\boldsymbol x_{k-1}, \\boldsymbol x_{0}, \\boldsymbol u_{1: k}\\ \\right)é’ˆå¯¹ç¬¬äºŒé¡¹,ç”±äº$u_k$å’Œk-1æ—¶åˆ»çš„çŠ¶æ€æ— å…³ï¼Œäºæ˜¯å¯å¾—ï¼š P\\left(x_{k-1} \\mid x_{0}, u_{1: k}, z_{1: k-1}\\right)=P\\left(x_{k-1} \\mid x_{0}, u_{1: k-1}, z_{1: k-1}\\right) .äºæ˜¯è¿™å°±æˆäº†ä¸€ä¸ªé€’æ¨çš„é—®é¢˜ï¼Œä¸€ç›´k-1æ—¶åˆ»çŠ¶æ€å˜é‡çš„å‡å€¼å’Œåæ–¹å·®ï¼Œç»™å‡ºä¸€ä¸ªè¾“å…¥æ¥æ›´æ–°å¹¶æ±‚å‡ºç¬¬kæ—¶åˆ»çš„çŠ¶æ€å˜é‡å’Œåæ–¹å·®ã€‚ ä¸‹é¢æ¥ä»æœ€ç®€å•çš„çº¿æ€§é«˜æ–¯ç³»ç»Ÿå‡ºå‘ï¼Œæ¥æ¨åˆ°å‡ºå¡å°”æ›¼æ»¤æ³¢å™¨ã€‚ é¦–å…ˆï¼Œä»‹ç»çº¿æ€§é«˜æ–¯ç³»ç»Ÿçš„æ•°å­¦è¡¨è¾¾ï¼Œå…¶ä¸­åŒ…å«è§‚æµ‹æ–¹ç¨‹å’Œè¿åŠ¨æ–¹ç¨‹å¦‚ä¸‹ï¼š \\left\\{\\begin{array}{l}\\boldsymbol{x}_{k}=\\boldsymbol{A}_{k} \\boldsymbol{x}_{k-1}+\\boldsymbol{u}_{k}+\\boldsymbol{w}_{k} \\\\ \\boldsymbol{z}_{k}=\\boldsymbol{C}_{k} \\boldsymbol{x}_{k}+\\boldsymbol{v}_{k}\\end{array} \\quad k=1, \\ldots, N\\right.å…¶ä¸­ï¼Œå‡è®¾æ‰€æœ‰çš„å™ªå£°éƒ½æ»¡è¶³é«˜æ–¯åˆ†å¸ƒï¼š \\boldsymbol{w}_{k} \\sim N(\\mathbf{0}, \\boldsymbol{R}) . \\quad \\boldsymbol{v}_{k} \\sim N(\\mathbf{0}, \\boldsymbol{Q})äºæ˜¯é—®é¢˜è½¬åŒ–æˆå·²çŸ¥ k-1æ—¶åˆ»åéªŒçš„çŠ¶æ€ä¼°è®¡ $\\hat{x}_{k-1}$ å’Œåæ–¹å·® $\\hat{P}_{k}$ ï¼Œä»¥åŠk æ—¶åˆ»çš„è¾“å…¥$u_k$ å’Œè§‚æµ‹ $z_k$ ï¼Œæ¥ç¡®å®š$x_k$ çš„åéªŒã€‚ è¿™é‡Œï¼Œæˆ‘ä»¬è®°ä¸Šå¸½ä¸ºåéªŒ$\\hat {x_k}$ï¼Œä¸‹å¸½ä¸ºå…ˆéªŒ$\\check {x_k}$ äºæ˜¯å¯å¾—$x_k$ çš„å…ˆéªŒï¼Œæ­¤æ­¥å¹¶æˆä¸ºé¢„æµ‹ã€‚ P\\left(x_{k} \\mid x_{0}, u_{1: k}, z_{1: k-1}\\right)=N\\left(A_{k} \\hat{x}_{k-1}+u_{k}, A_{k} \\hat{P}_{k} A_{k}^{\\mathrm{T}}+R\\right) .å³æœ‰ï¼Œå…¶å…ˆéªŒçš„è¡¨è¾¾å¼ä¸ºï¼š \\check{\\boldsymbol{x}}_{k}=\\boldsymbol{A}_{k} \\hat{\\boldsymbol{x}}_{k-1}+\\boldsymbol{u}_{k}, \\quad \\check{\\boldsymbol{P}}_{k}=\\boldsymbol{A}_{k} \\hat{\\boldsymbol{P}}_{k-1} \\boldsymbol{A}_{k}^{\\mathrm{T}}+\\boldsymbol{R}ç”±äºæœ¬ç³»ç»Ÿä¸ºåŠ äº†å™ªå£°çš„ç³»ç»Ÿï¼Œå› æ­¤å…ˆéªŒçš„ä¸ç¡®å®šæ€§ä¼šå¢å¤§ã€‚éœ€è¦å¼•å…¥ä¼¼ç„¶/è§‚æµ‹æ¥è¿›è¡Œå‡å°ã€‚ ä¹‹åä»£å…¥è§‚æµ‹æ–¹ç¨‹å¯å¾—ï¼š$\\boldsymbol{P}(z_k|x_k)=\\boldsymbol{N}(C_kx_k,\\boldsymbol Q)$ æ ¹æ®å‰é¢çš„Bayeså±•å¼€å¯å¾—åéªŒ=ä¼¼ç„¶$\\times$å…ˆéªŒï¼š \\boldsymbol P\\left(x_{k} \\mid x_{0}, u_{1: k}, z_{1: k}\\right) \\propto \\boldsymbol P\\left(z_{k} \\mid x_{k}\\right) \\ \\boldsymbol P\\left(x_{k} \\mid x_{0}, u_{1: k}, z_{1: k-1}\\right)ç”±äºé«˜æ–¯è¿‡ç¨‹çš„ä¹˜ç§¯è¿˜æ˜¯é«˜æ–¯è¿‡ç¨‹ï¼Œäºæ˜¯å°±æœ‰ï¼š N\\left(\\hat{x}_{k}, \\hat{P}_{k}\\right)=N\\left(C_{k} x_{k}, Q\\right) \\cdot N\\left(\\check{x}_{k}, \\check{P}_{k}\\right)æ—¢ç„¶éƒ½æ˜¯é«˜æ–¯åˆ†å¸ƒï¼Œæˆ‘ä»¬æ¯”è¾ƒæŒ‡æ•°éƒ¨åˆ†çš„äºŒæ¬¡é¡¹å’Œä¸€æ¬¡é¡¹éƒ¨åˆ†å³å¯ã€‚ \\left(x_{k}-\\hat{x}_{k}\\right)^{\\mathrm{T}} \\widehat{P}_{k}^{-1}\\left(x_{k}-\\hat{x}_{k}\\right)=\\left(z_{k}-C_{k} x_{k}\\right)^{\\mathrm{T}} Q^{-1}\\left(z_{k}-C_{k} x_{k}\\right)+\\left(x_{k}-\\bar{x}_{k}\\right)^{\\mathrm{T}} \\bar{P}_{k}^{-1}\\left(x_{k}-\\bar{x}_{k}\\right)å¯¹æ¯”äºŒæ¬¡é¡¹çš„ç³»æ•°å¯å¾—ï¼š \\hat{P}_{k}^{-1}=C_{k}^{\\mathrm{T}} Q^{-1} C_{k}+\\check{P}_{k}^{-1}æ¥ä¸‹æ¥å¯¹æ¯”ä¸€æ¬¡é¡¹çš„ç³»æ•°å¯å¾—ï¼š -2 \\hat{x}_{k}^{\\mathrm{T}} \\hat{P}_{k}^{-1} x_{k}=-2 z_{k}^{\\mathrm{T}} Q^{-1} C_{k} x_{k}-2 \\check{x}_{k}^{\\mathrm{T}} \\check{P}_{k}^{-1} x_{k}\\\\ \\Rightarrow \\hat{P}_{k}^{-1} \\hat{x}_{k}=C_{k}^{\\mathrm{T}} Q^{-1} z_{k}+\\check{P}_{k}^{-1} \\bar{x}_{k}å°†ä¸¤è¾¹åŒæ—¶ä¹˜ä»¥$\\hat{P}_{k}$ å¹¶å®šä¹‰ï¼š$K=\\hat{P}_{k}C^T_kQ^{-1}$ \\begin{align} \\hat{x}_{k}&=\\hat{P}_{k} C_{k}^{\\mathrm{T}} Q^{-1} z_{k}+\\check{P}_{k} \\check{P}_{k}^{-1} \\check{x}_{k}\\\\ &=K z_{k}+\\left(I-K C_{k}\\right) \\check{x}_{k}=\\bar{x}_{k}+K\\left(z_{k}-C_{k} \\check{x}_{k}\\right) \\end{align}ä¸Šå¼ç§°ä¸ºå¡å°”æ›¼æ»¤æ³¢çš„æ›´æ–°å¼ï¼Œç¬¬äºŒé¡¹ç§°ä¸ºä¿®æ­£é‡ï¼ŒKç§°ä¸ºå¡å°”æ›¼æ»¤æ³¢çš„å¢ç›Šã€‚ æ³¨æ„ä¸Šé¢å¼å­çš„Kçš„è¡¨è¾¾å¼å’Œæˆ‘ä»¬ä¸€èˆ¬çš„åˆšæ‰çš„$K=\\hat{P}_{k}C^T_kQ^{-1}$ å…¶å®ç­‰ä»·çš„ï¼Œå…¶ä¸€èˆ¬ç§°ä¸ºSMBæ’ç­‰å¼ã€‚ æ–¹ä¾¿ç†è§£ä½†æ˜¯å…·ä½“çš„ç»†èŠ‚è¿˜è¦å‚è€ƒå…¶ä»–çš„èµ„æ–™ã€‚ ä»¥ä¸Šä¸ºç»å…¸çš„å¡å°”æ›¼æ»¤æ³¢å™¨çš„å…¬å¼ï¼Œå…¶ç»™å‡ºäº†çº¿æ€§é«˜æ–¯ç³»ç»Ÿçš„æœ€ä¼˜æ— åä¼°è®¡ï¼Œä½†æ˜¯å…¶ä¸»è¦æ˜¯åŸºäºäº†ä»¥ä¸‹çš„ç»å…¸çš„å‡è®¾ï¼š çº¿æ€§å‡è®¾ï¼šå³è¿åŠ¨æ–¹ç¨‹å’Œè§‚æµ‹æ–¹ç¨‹åŸºæœ¬éƒ½æ˜¯çº¿æ€§çš„å˜æ¢ï¼› é«˜æ–¯åˆ†å¸ƒå‡è®¾ï¼šä¸»è¦æ˜¯æ‰€æœ‰çš„çŠ¶æ€å˜é‡ã€è§‚æµ‹å˜é‡ä»¥åŠç³»ç»Ÿçš„å™ªå£°éƒ½æ»¡è¶³é«˜æ–¯åˆ†å¸ƒï¼Œå› ä¸ºå…¶æ¯”è¾ƒå¥½ä¼°è®¡ [ä»…ä»…åªæœ‰ä¸€é˜¶çŸ©(å‡å€¼)å’ŒäºŒé˜¶çŸ©(åæ–¹å·®çŸ©é˜µ)ä¸¤ä¸ªå˜é‡]ï¼Œè€Œä¸”é«˜æ–¯åˆ†å¸ƒçš„å‚æ•°è¾ƒå°‘ï¼Œé€‚ç”¨çš„èŒƒå›´æ¯”è¾ƒå¹¿ã€‚ é©¬å°”å¯å¤«å‡è®¾ã€‚ éçº¿æ€§ç³»ç»Ÿå’Œæ‰©å±•å¡å°”æ›¼æ»¤æ³¢åœ¨è§†è§‰SLAMçš„åº”ç”¨åœºæ™¯ä¸‹ï¼Œå¤§å¤šæ˜¯éçº¿æ€§çš„æƒ…å†µï¼Œå› æ­¤å°†Kalman Filterè¿›è¡Œéçº¿æ€§æ‰©å±•EKFã€‚ å½“ è§‚æµ‹æ–¹ç¨‹å’Œè¿åŠ¨æ–¹ç¨‹éƒ½ä¸ºéçº¿æ€§å‡½æ•°æ—¶ï¼š \\left\\{\\begin{array}{l}x_{k}=f\\left(x_{k-1}, \\boldsymbol{u}_{k}\\right)+\\boldsymbol{w}_{k} \\\\ \\boldsymbol{z}_{k}=h\\left(\\boldsymbol{x}_{k}\\right)+\\boldsymbol{v}_{k}\\end{array} \\quad k=1, \\ldots, N\\right.æˆ‘ä»¬çš„åšæ³•æ—¶å°†å…¶åœ¨æŸä¸ªç‚¹å¤„è¿›è¡Œä¸€é˜¶å±•å¼€ï¼Œ x_{k} \\approx f\\left(\\hat{\\boldsymbol{x}}_{k-1}, \\boldsymbol u_{k}\\right)+\\left.\\frac{\\partial f}{\\partial \\boldsymbol x_{k-1}}\\right|_{\\hat{\\boldsymbol{x}}_{k-1}}\\left(\\boldsymbol x_{k-1}-\\hat{\\boldsymbol{x}}_{k-1}\\right)+\\boldsymbol w_{k} .\\\\ \\boldsymbol{z}_{k} \\approx h\\left(\\check{\\boldsymbol{x}}_{k}\\right)+\\left.\\frac{\\partial h}{\\partial \\boldsymbol{x}_{k}}\\right|_{\\check{\\boldsymbol{x}}_{k}}\\left(\\boldsymbol{x}_{k}-\\hat{\\boldsymbol{x}}_{k}\\right)+\\boldsymbol{n}_{k}.è¿™é‡Œæˆ‘ä»¬è®°$\\boldsymbol F=\\left. \\dfrac{\\partial f}{\\partial \\boldsymbol x_{k-1}}\\right|_{\\hat{\\boldsymbol{x}}_{k-1}}$ï¼Œ$\\boldsymbol H=\\left. \\dfrac{\\partial f}{\\partial \\boldsymbol x_{k-1}}\\right|_{\\check{\\boldsymbol{x}}_{k-1}}$ . é‚£ä¹ˆåœ¨é¢„æµ‹æ­¥éª¤ä¸­ï¼Œæ ¹æ®è¿åŠ¨æ–¹ç¨‹æœ‰ï¼š P\\left(\\boldsymbol{x}_{k} \\mid \\boldsymbol{x}_{0}, \\boldsymbol{u}_{1: k}, \\boldsymbol{z}_{0: k-1}\\right)=N\\left(f\\left(\\hat{\\boldsymbol{x}}_{k-1}, \\boldsymbol{u}_{k}\\right), \\boldsymbol{F} \\hat{\\boldsymbol{P}}_{k-1} \\boldsymbol{F}^{\\mathrm{T}}+\\boldsymbol{R}_{k}\\right)è¿™é‡Œå°†å…ˆéªŒå’Œåæ–¹å·®è®°ä¸ºï¼š \\check{\\boldsymbol{x}}_{k}=f\\left(\\hat{\\boldsymbol{x}}_{k-1}, \\boldsymbol{u}_{k}\\right), \\quad \\check{\\boldsymbol{P}}_{k}=\\boldsymbol{F} \\hat{\\boldsymbol{P}}_{k-1} \\boldsymbol{F}^{\\mathrm{T}}+\\boldsymbol{R}_{k}ä¹‹åå†è§‚æµ‹ä¸­æˆ‘ä»¬æœ‰ï¼š P\\left(\\boldsymbol{z}_{k} \\mid \\boldsymbol{x}_{k}\\right)=N\\left(h\\left(\\check{\\boldsymbol{x}}_{k}\\right)+\\boldsymbol{H}\\left(\\boldsymbol{x}_{k}-\\check{\\boldsymbol{x}}_{k}\\right), \\boldsymbol{Q}_{k}\\right)æœ€åï¼Œæ ¹æ®æœ€å¼€å§‹çš„Bayeså±•å¼€å¼å¯å¾—$\\hat{x_k}$ çš„åéªŒå½¢å¼ä¸ºï¼š \\hat{\\boldsymbol{x}}_{k}=\\check{\\boldsymbol{x}}_{k}+\\boldsymbol{K}_{k}\\left(\\boldsymbol{z}_{k}-h\\left(\\check{\\boldsymbol{x}}_{k}\\right)\\right), \\hat{\\boldsymbol{P}}_{k}=\\left(\\boldsymbol{I}-\\boldsymbol{K}_{k} \\boldsymbol{H}\\right) \\check{\\boldsymbol{P}}_{k}å…¶ä¸­å¡å°”æ›¼å¢ç›Šä¸ºï¼š \\boldsymbol{K}_{k}=\\check{\\boldsymbol{P}}_{k} \\boldsymbol{H}^{\\mathrm{T}}\\left(\\boldsymbol{H} \\check{\\boldsymbol{P}}_{k} \\boldsymbol{H}^{\\mathrm{T}}+\\boldsymbol{Q}_{k}\\right)^{-1}å…³äºEKFçš„è®¨è®ºä¸»è¦çš„ä¼˜ç‚¹ï¼š æ¨å¯¼ç®€å•æ¸…æ¥šï¼Œé€‚ç”¨äºå„ç§ä¼ æ„Ÿå™¨çš„å½¢å¼ï¼› æ˜“äºåšå¤šä¼ æ„Ÿå™¨èåˆï¼Œåœ¨æ¯”è¾ƒçš„ç®€ç­”çš„åœºåˆæ¯”è¾ƒé€‚ç”¨ã€‚ ä¸»è¦çš„ç¼ºç‚¹ï¼š é¦–å…ˆï¼Œä¸€é˜¶çš„é©¬å°”å¯å¤«æ€§æ¯”è¾ƒç®€å•ï¼Œå‡è®¾è¿‡äºå¼ºï¼Œä¼šæŸå¤±å¾ˆå¤šä¿¡æ¯ã€‚å¾ˆéš¾è¿›è¡Œå›ç¯æ£€æµ‹ï¼Œå›ç¯æ£€æµ‹ä¸­ä¸»è¦ä¸¤è€…çœ‹åˆ°äº†è¿‘ä¼¼çš„äº‹ç‰©å°±ä»£è¡¨å…¶å­˜åœ¨ä¸€å®šçš„å…³ç³»(å…±è§†å›¾)ã€‚ å…¶æ¬¡ï¼Œå…¶æ²¡æœ‰è¯¯å·®æ£€æµ‹æœºåˆ¶ï¼Œå°±æ˜¯æˆ‘ä»¬çš„ä¸å¯ä»¥æœ‰outlinerï¼Œå¦‚æœæˆ‘ä»¬åœ¨è§†è§‰é‡Œç¨‹è®¡è¿™è¾¹å‡ºç°äº†ä¸€äº›è¯¯åŒ¹é…ç­‰é”™è¯¯å¾ˆå¯èƒ½å¯¼è‡´å…¶å‡ºç°å‘æ•£ã€‚ ç„¶åï¼Œå…·æœ‰å¾ˆå¤§çš„çº¿æ€§åŒ–è¯¯å·®ï¼Œå…¶ä¸åƒä¼˜åŒ–ç®—æ³•ï¼Œéçº¿æ€§ä¼˜åŒ–æ—¶è¿›è¡Œäº†å¤šæ¬¡çš„è¿­ä»£æ‰å®Œæˆä¸Šè¿°çš„æ“ä½œçš„ï¼Œè€ŒEKFå°±è¿›è¡Œä¸€æ¬¡çº¿æ€§åŒ–çš„å¤„ç†ï¼Œæ— æ³•å®Œæˆç›¸å…³çš„æ“ä½œã€‚ æœ€åï¼Œå…¶å­˜å‚¨çš„æˆæœ¬è¿‡å¤§ï¼Œå› ä¸ºå…¶ä¸»è¦ä¿å­˜çš„ä¸ºå‡å€¼å’Œåæ–¹å·®çŸ©é˜µï¼Œå½“è·¯æ ‡ç‚¹è¿‡å¤šæ—¶ï¼Œå…¶åæ–¹å·®çŸ©é˜µçš„ç»´åº¦è¿‡å¤§ã€‚","link":"/2022/06/21/SLAM/ch9-%E5%90%8E%E7%AB%AF-%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86-EKF/"},{"title":"R-CNNå’ŒFast R-CNN","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸ºç›®æ ‡æ£€æµ‹çš„å¼€ç¯‡ï¼Œä»Šåå¼€å§‹å­¦ä¹ å’Œäº†è§£ç›®æ ‡æ£€æµ‹é—®é¢˜ï¼Œæœ¬æ–‡ä¸»è¦ä»‹ç»ç›®æ ‡æ£€æµ‹çš„å¼€ç¯‡ä¹‹ä½œR-CNNå’ŒFast R-CNNä½†æ˜¯ï¼Œç”±äºæ¯”è¾ƒçš„è€ï¼Œå› æ­¤è¿™é‡Œçš„æ²¡æœ‰ä»£ç çš„å¤ç°ï¼Œä»…ä»…å…³æ³¨å…¶åŸºæœ¬çš„åŸç†ã€‚æœ€åæˆ‘ä»¬ä»‹ç»äº†å…³äºFPNç½‘ç»œçš„å†…å®¹ã€‚ ç›®æ ‡æ£€æµ‹çš„å‰è¨€ç›®æ ‡æ£€æµ‹ï¼Œåˆç§°ä¸ºObject Detection ä¸»è¦åˆ†ä¸ºä¸¤ä¸ªå¤§çš„ç±»åˆ«ï¼ŒOne-Stage åŒ…å«SSDã€YOLOï¼›Two-Stage åŒ…å«Faster-RCNNã€‚ å¯¹äºTwo-Stageæ¥è¯´ï¼Œå…¶ä¸»è¦åŸç†æ˜¯ï¼š é€šè¿‡ä¸“é—¨æ¨¡å—å»ç”Ÿæˆå€™é€‰æ¡†(RPN)ï¼Œå¯»æ‰¾å‰æ™¯ä»¥åŠè°ƒæ•´è¾¹ç•Œæ¡†(åŸºäºachors) åŸºäºä¹‹å‰ç”Ÿæˆçš„å€™é€‰æ¡†ï¼Œè¿›è¡Œè¿›ä¸€æ­¥çš„åˆ†ç±»å’Œè°ƒæ•´è¾¹ç•Œæ¡†(åŸºäºproposals) ç›¸æ¯”ä¹‹ä¸‹ï¼ŒOne-Stageæ¥è¯´ï¼Œèµ·ä¸»è¦åŸç†ï¼š åŸºäºanchorsç›´æ¥è¿›è¡Œåˆ†ç±»ä»¥åŠè°ƒæ•´è¾¹ç•Œæ¡†ã€‚ äºŒè€…çš„æ¯”è¾ƒï¼š Faster R-CNNæ˜¯ä¸€ä¸ªéå¸¸åŸºç¡€çš„ç½‘ç»œï¼Œå…¶å…·æœ‰å¾ˆå¼ºçš„å­¦ä¹ æ„ä¹‰ã€‚ åœ¨ä»‹ç»Faster R-CNNä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆä»‹ç»å…¶åŸºç¡€çš„å‡ ä¸ªå·¥ä½œï¼ŒR-CNNå’ŒFast R-CNNçš„ã€‚ R-CNN(Region with CNN feature) é¦–å…ˆï¼ŒåŸè®ºæ–‡ä¸­é™ˆè¿°çš„ä¸»è¦çš„è®¡ç®—æµç¨‹ä¸ºï¼š åœ¨ä¸€å¼ å›¾åƒä¸­ç”Ÿæˆ1K-2Kä¸ªå€™é€‰çš„åŒºåŸŸ(ä½¿ç”¨Selective Searchæ–¹æ³•)ã€‚ å¯¹æ¯ä¸ªå€™é€‰çš„åŒºåŸŸï¼Œä½¿ç”¨æ·±åº¦ç½‘ç»œè¿›è¡Œæå–ç‰¹å¾ã€‚ ç‰¹å¾é€å…¥æ¯ä¸ªç±»çš„SVMåˆ†ç±»å™¨ï¼Œåˆ¤åˆ«æ˜¯å¦å±äºè¯¥ç±»ã€‚ ä½¿ç”¨å›å½’å™¨ç²¾ç»†ä¿®æ­£å€™é€‰æ¡†çš„ä½ç½®ã€‚ ä¸»è¦æ­¥éª¤1.å€™é€‰åŒºåŸŸçš„ç”Ÿæˆï¼š åˆ©ç”¨Selective Searchç®—æ³•é€šè¿‡å›¾åƒåˆ†å‰²çš„æ–¹æ³•å¾—åˆ°ä¸€äº›åŸå§‹åŒºåŸŸï¼Œç„¶åä½¿ç”¨ä¸€äº›åˆå¹¶ç­–ç•¥å°†è¿™äº›åŒºåŸŸåˆå¹¶ï¼Œå¾—åˆ°ä¸€ä¸ªå±‚æ¬¡åŒ–çš„åŒºåŸŸç»“æ„ï¼Œè€Œè¿™äº›ç»“æ„å°±åŒ…å«ç€å¯èƒ½éœ€è¦çš„ç‰©ä½“ã€‚ 2.å¯¹æ¯ä¸ªå€™é€‰åŒºåŸŸï¼Œä½¿ç”¨æ·±åº¦ç½‘ç»œæå–ç‰¹å¾ å°†2000å€™é€‰åŒºåŸŸç¼©æ”¾åˆ°227x227pixelï¼Œæ¥ç€å°†å€™é€‰åŒºåŸŸè¾“å…¥äº‹å…ˆè®­ç»ƒå¥½çš„AlexNet CNNç½‘ç»œè·å–4096ç»´çš„ç‰¹å¾å¾—åˆ°2000Ã—4096ç»´çŸ©é˜µã€‚è¿™é‡Œçš„ç½‘ç»œä½¿ç”¨PASCAL VOC dataset é¢„å…ˆè®­ç»ƒå¥½çš„æ•°æ®é›†ã€‚ è¿™é‡Œç›¸å½“äºbatch_sizeä¸º2000ï¼Œå¹¶ä¸”å°†æœ€åçš„å‡ ä¸ªå…¨è¿æ¥å±‚ç»™å»æ‰äº†ï¼Œäºæ˜¯å°±å¾—åˆ°ä¸€ä¸ª4096ä¸ºçš„ç‰¹å¾å‘é‡ã€‚ 3.ç‰¹å¾é€å…¥æ¯ä¸€ç±»çš„SVMåˆ†ç±»å™¨ï¼Œåˆ¤å®šç±»åˆ«å°†2000Ã—4096ç»´ç‰¹å¾ä¸20ä¸ªSVMå’Œä¸€ä¸ªbackroundç»„æˆçš„æƒå€¼çŸ©é˜µ4096Ã—20ç›¸ä¹˜,è·å¾—2000Ã—20ç»´çŸ©é˜µè¡¨ç¤ºæ¯ä¸ªå»ºè®®æ¡†æ˜¯æŸä¸ªç›®æ ‡ç±»åˆ«çš„å¾—åˆ†ã€‚åˆ†åˆ«å¯¹ä¸Šè¿°2000Ã—20ç»´çŸ©é˜µä¸­æ¯ä¸€åˆ—å³æ¯ä¸€ç±»è¿›è¡Œéæå¤§å€¼æŠ‘åˆ¶å‰”é™¤é‡å å»ºè®®æ¡†ï¼Œå¾—åˆ°è¯¥åˆ—å³è¯¥ç±»ä¸­å¾—åˆ†æœ€é«˜çš„ä¸€äº›å»ºè®®æ¡†ã€‚ è¿™é‡Œæ¯ä¸ªå‘é‡éƒ½è¿›å…¥ç›¸åº”çš„SVMåˆ†ç±»å™¨ï¼Œè¿™é‡Œæ¯ä¸ªåˆ†ç±»å™¨çš„è¾“å…¥ä¸ºäºŒå…ƒçš„ï¼ŒYes or No. ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œæˆ‘ä»¬å°†å¾—åˆ°çš„2000x4096 å’Œ 4096x20ç›¸ä¹˜ï¼Œå¾—åˆ°ä¸€ä¸ª2000x20å‘é‡ï¼Œå…¶ä¸­æ¯ä¸ªè¡Œå‘é‡ä»£è¡¨çš„æ˜¯æ¯ä¸ªæ¡†è¢«åˆ†åˆ°è¿™20ä¸ªç±»å’Œ1ä¸ªèƒŒæ™¯çš„æ¦‚ç‡æˆ–0/1å€¼ã€‚ é’ˆå¯¹æ¯ä¸€åˆ—çš„å€¼ï¼Œå…¶æœ¬è´¨æ˜¯ä¸€ç±»çš„ï¼Œäºæ˜¯é‡‡ç”¨éæå¤§å€¼æŠ‘åˆ¶çš„æ–¹æ³•ï¼Œæ“ä½œæ—¶é€‰å‡ºé¢„æµ‹æ¦‚ç‡å€¼æœ€é«˜ä¸¤é¡¹ï¼Œå°†ä¸¤é¡¹è®¡ç®—IoUï¼Œå³ä¸€ç§åŒ…å®¹å…³ç³»ï¼Œå¦‚æœè¿™ä¸ªå€¼å¤§äºä¸€å®šçš„é˜ˆå€¼å°±ä»…ä»…ä¿ç•™æ¦‚ç‡æœ€å¤§çš„é‚£ä¸ªå³å¯ã€‚ é€šè¿‡éæå¤§å€¼æŠ‘åˆ¶çš„æ–¹æ³•ï¼Œå¯ä»¥æå‡ºå¾ˆå¤šçš„æ— ç”¨çš„é‡å¤çš„æ¡†ã€‚ ä½¿ç”¨å›å½’å™¨ç²¾ç»†ä¿®æ­£å€™é€‰æ¡†ä½ç½®å¯¹NMSå¤„ç†åå‰©ä½™çš„å»ºè®®æ¡†è¿›ä¸€æ­¥ç­›é€‰ã€‚æ¥ç€åˆ†åˆ«ç”¨20ä¸ªå›å½’å™¨å¯¹ä¸Šè¿°20ä¸ªç±»åˆ«ä¸­å‰©ä½™çš„å»ºè®®æ¡†è¿›è¡Œå›å½’æ“ä½œï¼Œæœ€ç»ˆå¾—åˆ°æ¯ä¸ªç±»åˆ«çš„ä¿®æ­£åçš„å¾—åˆ†æœ€é«˜çš„bounding boxã€‚ è¿™é‡Œä½¿ç”¨å›å½’ä½¿å…¶Bounding boxå°½å¯èƒ½çš„é€¼è¿‘Ground truthå¯¹åº”çš„Bounding box ã€‚å…¶ä¸­è¿™é‡Œå¯¹åº”çš„å‚æ•°æœ‰å››ä¸ªå˜é‡ï¼Œæ¡†çš„ä¸­å¿ƒç‚¹(x,y)ä»¥åŠæ¡†çš„é«˜åº¦å’Œå®½åº¦(h,w). R-CNNå­˜åœ¨çš„é—®é¢˜ æµ‹è¯•é€Ÿåº¦æ…¢ï¼šæµ‹è¯•ä¸€å¼ å›¾ç‰‡çº¦53s(CPU)ã€‚ç”¨Selective Searchç®—æ³•æå–å€™é€‰æ¡†ç”¨æ—¶çº¦2ç§’ï¼Œä¸€å¼ å›¾åƒå†…å€™é€‰æ¡†ä¹‹é—´å­˜åœ¨å¤§é‡é‡å ï¼Œæå–ç‰¹å¾æ“ä½œå†—ä½™ã€‚ è®­ç»ƒé€Ÿåº¦æ…¢ï¼šè¿‡ç¨‹åŠå…¶ç¹çã€‚å³CNNã€SVMã€regressionæ˜¯ç›¸äº’ä¸ç‹¬ç«‹çš„ï¼Œéœ€è¦åˆ†å¼€è¿›è¡Œè®­ç»ƒã€‚ è®­ç»ƒæ‰€éœ€ç©ºé—´å¤§ï¼šå¯¹äºSVMå’Œbboxå›å½’è®­ç»ƒï¼Œéœ€è¦ä»æ¯ä¸ªå›¾åƒä¸­çš„æ¯ä¸ªç›®æ ‡å€™é€‰æ¡†æå–ç‰¹å¾ï¼Œå¹¶å†™å…¥ç£ç›˜ã€‚å¯¹äºéå¸¸æ·±çš„ç½‘ç»œï¼Œå¦‚VGG16ï¼Œä»VOCO7è®­ç»ƒé›†ä¸Šçš„5kå›¾åƒä¸Šæå–çš„ç‰¹å¾éœ€è¦æ•°ç™¾GBçš„å­˜å‚¨ç©ºé—´ã€‚ Fast R-CNNä¸»è¦æ­¥éª¤ ä¸€å¼ å›¾åƒç”Ÿæˆ1K~2Kä¸ªå€™é€‰åŒºåŸŸ(ä½¿ç”¨Selective Searchæ–¹æ³•)ï¼› å°†å›¾åƒè¾“å…¥ç½‘ç»œå¾—åˆ°ç›¸åº”çš„ç‰¹å¾å›¾ï¼Œå°†SSç®—æ³•ç”Ÿæˆçš„å€™é€‰æ¡†æŠ•å½±åˆ°ç‰¹å¾å›¾ä¸Šè·å¾—ç›¸åº”çš„ç‰¹å¾çŸ©é˜µï¼› å°†æ¯ä¸ªç‰¹å¾çŸ©é˜µé€šè¿‡ROI poolingå±‚ç¼©æ”¾åˆ°7x7å¤§å°çš„ç‰¹å¾å›¾ï¼Œæ¥ç€å°†ç‰¹å¾å›¾å±•å¹³é€šè¿‡ä¸€ç³»åˆ—å…¨è¿æ¥å±‚å¾—åˆ°é¢„æµ‹ç»“æœã€‚ ROIæ˜¯Region of Interestçš„ç¼©å†™ã€‚ Fast R-CNNå’ŒR-CNNçš„ä¸åŒç‚¹ï¼š å¯¹äºç¬¬äºŒæ­¥ï¼šä¸€èˆ¬çš„R-CNNæ˜¯é€šè¿‡SSç®—æ³•é€‰å‡ºæ‰€éœ€çš„ç‰¹å¾å›¾ï¼Œç„¶ååˆ†åˆ«è¾“å…¥åˆ°ç‰¹å¾æå–çš„ç½‘ç»œä¸­å¾—åˆ°ç‰¹å¾å‘é‡ã€‚è€Œæˆ‘ä»¬è¿™ä¸ªFast R-CNNæ˜¯å°†æ•´ä¸ªå›¾åƒä¸€èµ·è¾“å…¥åˆ°ç‰¹å¾æå–çš„ç½‘ç»œä¸­å¾—åˆ°å¯¹åº”çš„ç‰¹å¾å›¾ï¼Œä¹‹å‰SSå¾—åˆ°çš„æ¡†ä¹Ÿå¯¹åº”çš„å‘ç‰¹å¾å›¾ä¸Šé¢è¿›è¡ŒæŠ•å½±ã€‚ å¯¹äºç¬¬ä¸‰æ­¥ï¼šä¹‹å‰çš„æ“ä½œä¸ºå•ç‹¬è®­ç»ƒåˆ†ç±»å™¨å’Œè¾¹ç•Œæ¡†çš„å›å½’å™¨ï¼Œç°åœ¨æ˜¯é€šè¿‡ä¸€ä¸ªROI poolingå±‚å°†å…¶ç¼©åˆ°7x7ä¹‹åç›´æ¥FCã€‚ ç¬¬ä¸€æ­¥ Fast R-CNNå¯ä»¥é¿å…R-CNNé‚£æ ·æ˜¯é‡å¤è¯†åˆ«æ“ä½œï¼Œå‚è€ƒçš„SPP-Netã€‚ è¿™é‡Œå®šä¹‰æ­£æ ·æœ¬ä¸ºå¯¹åº”çš„æ¡†ä¸­ç¡®å®å­˜åœ¨æ‰€éœ€çš„å†…å®¹ï¼Œè´Ÿæ ·æœ¬ä»£è¡¨æ¡†ä¸­ä»…ä»…å­˜åœ¨ä¸€å®šçš„èƒŒæ™¯ã€‚ä¸ºä»€ä¹ˆä¸€å®šè¦å­˜åœ¨ç›¸åº”çš„è´Ÿæ ·æœ¬ï¼Œå› ä¸ºå¦‚æœæ²¡æœ‰è´Ÿæ ·æœ¬å°±ä¼šé€ æˆæ ·æœ¬ä¸å¹³è¡¡ï¼Œäºæ˜¯å°±å¾ˆå¯èƒ½é”™æŠŠèƒŒæ™¯ä¹Ÿå½“æˆç›®æ ‡äº†ã€‚ è¿™é‡Œæ­£è´Ÿæ ·æœ¬çš„åˆ’åˆ†æ–¹æ³•å…¶å®å°±æ˜¯å°†åˆ’åˆ†çš„åŒºåŸŸå’ŒGround truthè¿›è¡Œå¯¹æ¯”ï¼Œè®¡ç®—IoUå€¼ï¼Œå¤§äº0.5çš„è®¾ç½®ä¸ºæ­£æ ·æœ¬ï¼Œåœ¨0.1-0.5ä¹‹é—´å°±ä¸ºè´Ÿæ ·æœ¬ã€‚ ç¬¬äºŒæ­¥å°†ä¸Šä¸€æ­¥ç­›é€‰å¾—åˆ°çš„ç‰¹å¾å›¾è¾“å…¥è¿›æ¥é€šè¿‡ROI Pooling layerå¾—åˆ°7x7çš„patch. ä¸Šè¿°çš„å›¾ç‰‡ä¸»è¦æ˜¯æ–¹ä¾¿æˆ‘ä»¬è¿›è¡Œä¸¾ä¾‹å­æ¥å®ç°ï¼Œè¿™é‡Œä»…ä»…ç”»äº†ä¸€ä¸ªchannelï¼Œå…¶ä»–çš„channelåŒç†ã€‚ ç¬¬ä¸‰æ­¥å¾—åˆ°7x7çš„ç‰¹å¾å›¾ä¹‹åï¼Œæˆ‘ä»¬å°†å…¶å¯¼å…¥åˆ°è¾¹å…¨è¿æ¥å±‚ï¼Œè¿™é‡Œå…¨è¿æ¥è¿ä¸ªFCå±‚ï¼Œä¹‹ååˆ†æµï¼Œä¸€éƒ¨åˆ†è¿›å…¥åˆ†ç±»å™¨ï¼Œå¦ä¸€éƒ¨åˆ†è¿›è¡Œè¾¹ç•Œæ¡†å›å½’å™¨ã€‚ åˆ†ç±»å™¨ï¼šè¾“å‡ºN+1ä¸ªç±»åˆ«çš„æ¦‚ç‡(Nä¸ºæ£€æµ‹ç›®æ ‡çš„ç§ç±»ï¼Œ1ä¸ºèƒŒæ™¯)ä¸€å…±N+1ä¸ªèŠ‚ç‚¹ã€‚ä¸‹é¢çš„å‘é‡æ˜¯ç»è¿‡Softmaxä¹‹åçš„ç»“æœï¼Œä»£è¡¨äº†æ¯ä¸ªæ¡†è¢«åˆ†åˆ°ä¸‹é¢çš„å‡ ä¸ªç±»åˆ«çš„æ¦‚ç‡ï¼Œå…¶æ€»å’Œä¸º1. è¾¹ç•Œæ¡†å›å½’å™¨ï¼šè¾“å‡ºå¯¹åº”N+1ä¸ªç±»åˆ«çš„å€™é€‰è¾¹ç•Œæ¡†çš„å›å½’å‚æ•°$(d_x,d_y,d_w,d_h)$ ï¼Œä¸€å…±(N+1)x4ä¸ªèŠ‚ç‚¹ã€‚è¿™é‡Œæ¯ä¸ªç±»åˆ«éƒ½å¯¹åº”4ä¸ªå‚æ•°ã€‚ è¿™é‡Œæ˜¯å€™é€‰æ¡†çš„å‚æ•°æ˜¯ç¡®å®šçš„ï¼Œ$P_w,P_h,P_x,P_y$ å›å½’æ¨¡å‹çš„è®­ç»ƒå‚æ•°æ˜¯$d_w(P),d_h(P),d_x(P),d_y(P)$ . ä¸ºä»€ä¹ˆå®½åº¦å’Œé«˜åº¦çš„æ‹Ÿåˆç”¨çš„æ˜¯æŒ‡æ•°å‡½æ•°ï¼Œå› ä¸ºé«˜åº¦å’Œå®½åº¦ä¸å¯ä»¥ä¸ºè´Ÿæ•°ã€‚ æŸå¤±å‡½æ•° è¿™ä¸ªæŸå¤±å‡½æ•°æ˜¯ä¸€ä¸ªå¤šä»»åŠ¡çš„æŸå¤±å‡½æ•° Multi-task lossã€‚ æ³¨æ„è¿™é‡Œçš„å›å½’å‚æ•°çš„éƒ¨åˆ†æ˜¯$t^u$ ï¼Œæ˜¯è®¡ç®—å¯¹åº”ç±»åˆ«å›å½’çš„ç³»æ•°ã€‚ é¦–å…ˆï¼Œæ¥çœ‹åˆ†ç±»æŸå¤±ï¼š L_{cls}(p,u)=-\\log p_uè¿™é‡Œçš„$p_u$ä»£è¡¨æ˜¯è¯¥ç‰¹å¾çš„ç±»åˆ«ä¸ºuçš„æ¦‚ç‡ã€‚ å…¶ä¸­ï¼Œè¿™æ˜¯ç±»åˆ«çš„ç¼–ç å·²ç»è½¬æ¢ä¸ºone-hotç¼–ç $[0,0,â€¦1,0,â€¦0]$; è€Œæˆ‘ä»¬é¢„æµ‹å¾—åˆ°çš„æ˜¯softmaxçš„æ¦‚ç‡å€¼$[0.1,0.3,0.4,â€¦,0.1]$ ä¹‹åï¼Œæ¥çœ‹è¾¹ç•Œæ¡†çš„å›å½’æŸå¤±ï¼š ä¸»è¦çš„å…¬å¼ä¸ºï¼š L=\\lambda[u \\ge1]L_{loc}(t^u,v) ç¬¬ä¸€é¡¹ä»£è¡¨çš„æ˜¯ä¸€ä¸ªåŠ æƒç³»æ•°ï¼Œç”¨æ¥å¹³è¡¡ä¸¤ä¸ªæŸå¤±å‡½æ•°ï¼› ç¬¬äºŒé¡¹ä¸­çš„uæ˜¯æ ‡ç­¾é‡Œç»™å‡ºçš„ç±»åˆ«æ•°ï¼Œä»…ä»…ä¼šå¯¹å…¶çœŸå®çš„ç±»åˆ«è¿›è¡Œè¾¹ç•Œæ¡†çš„å›å½’æŸå¤±ã€‚ è¿™é‡Œç›¸æ¯”æœ€åˆçš„R-CNNå·²ç»æ˜¯ç²¾ç®€äº†ä¸¤ä¸ªæ¨¡å—äº†ï¼Œèµ·ä¸»è¦çš„è´¡çŒ®æ˜¯æ¨ç†çš„é€Ÿåº¦å¤§å¤§çš„æé«˜ï¼Œç›¸æ¯”åŸæ¥çš„R-CNNæé«˜äº†213å€ã€‚ ä½†æ˜¯ç”±äºå…¶Selective Searchåœ¨è¿›è¡Œé€‰å–çš„æ—¶å€™ï¼Œæ¯å¼ å›¾ç‰‡è¿˜æ˜¯ä¼šæµªè´¹2sçš„æ—¶é—´ï¼Œåé¢çš„ä¸‰ä¸ªä¹Ÿå°±æ˜¯0.x så°±å¯ä»¥å®Œæˆã€‚äºæ˜¯Faster R-CNNä¼šåœ¨å…¶ä¸Šé¢è¿›è¡Œæ”¹è¿›ã€‚ Feature Pyramid Networks ä¸‹é¢æ¥çœ‹å‡ ä¸ªå…¸å‹çš„å›¾åƒé‡‘å­—å¡”ç»“æ„ï¼š aæ˜¯æœ€å…¸å‹çš„å›¾åƒé‡‘å­—å¡”ç»“æ„ï¼Œå…¶åœ¨ä¼ ç»Ÿçš„å›¾åƒå¤„ç†é‡Œç»å¸¸ä½¿ç”¨ï¼Œé¦–å…ˆå°†å›¾ç‰‡ç¼©æ”¾åˆ°ä¸åŒçš„å°ºåº¦ä¸Šé¢ï¼Œä¹‹åé’ˆå¯¹æ¯ä¸ªå°ºåº¦éƒ½æ¥é¢„æµ‹ï¼Œä½†æ˜¯è¿™æ ·åšéœ€è¦æ¯ä¸ªå°ºåº¦éƒ½è¦é‡å¤ä¸€æ¬¡æ•ˆç‡æ¯”è¾ƒä½ã€‚ bæ˜¯æœ€å…¸å‹çš„ç‰¹å¾æ˜ å°„ï¼Œé€šè¿‡å·ç§¯æ“ä½œå¾—åˆ°å¯¹åº”çš„ç‰¹å¾å›¾ï¼Œç”¨ç‰¹å¾å›¾è¿›è¡Œé¢„æµ‹ï¼Œå¾—åˆ°æœ€åçš„é¢„æµ‹å€¼ï¼Œä½†æ˜¯ç¼ºç‚¹æ˜¯å¯¹äºæ¯”è¾ƒå°çš„ç›®æ ‡å¾ˆéš¾æ˜¯è¯†åˆ«åˆ°ã€‚Faster R-CNNçš„é¢„æµ‹æµç¨‹ã€‚ cæ˜¯é‡‘å­—å¡”å‹çš„ç»“æ„ï¼Œåœ¨å·ç§¯çš„å„ä¸ªå°ºåº¦çš„å›¾ä¸Šåˆ†åˆ«è¿›è¡Œé¢„æµ‹ï¼Œåœ¨SSDç®—æ³•ä¸­ä¼šæœ‰ä½¿ç”¨ã€‚ dæ˜¯ç‰¹å¾å›¾é‡‘å­—å¡”ç»“æ„ï¼Œå…¶ä¸æ˜¯ç›´æ¥åœ¨å¯¹ä¸åŒå°ºåº¦çš„ç‰¹å¾å›¾è¿›è¡Œé¢„æµ‹æ“ä½œï¼Œå…¶ä¸»è¦æ˜¯å°†ä¸åŒå°ºåº¦ä¸Šçš„ç‰¹å¾å›¾è¿›è¡Œèåˆï¼Œä¹‹åå†è¿›è¡Œé¢„æµ‹ã€‚ 1x1å·ç§¯çš„ä½œç”¨ä¸»è¦æ˜¯æ¥è°ƒæ•´ç»´åº¦çš„ï¼Œä½¿å¾—å…¶å¯ä»¥æ­£å¸¸åœ°èåˆã€‚ ä¸Šé‡‡æ ·æ“ä½œçš„ä¸»è¦æ–¹æ³•ä¸Šåˆ©ç”¨é‚»æ¥æ’å€¼è¿›è¡Œçš„ã€‚ é¦–å…ˆï¼Œä½¿ç”¨çš„$P_2 \\sim P_6$æ¥é¢„æµ‹å€™é€‰æ¡†ï¼Œä¹‹åå°†å°†é¢„æµ‹æ¡†æ˜ å°„åˆ°$P_2 \\sim P_5$ã€‚ ç„¶åï¼Œä½¿ç”¨$P_2\\sim P_5$è¿›è¡ŒFaster R-CNNæ“ä½œã€‚ è¿™é‡Œï¼Œå¯¹äºå°ç›®æ ‡çš„æ£€æµ‹ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šä½¿ç”¨æ¯”è¾ƒåº•å±‚çš„ç‰¹å¾å›¾æ¥è¿›è¡Œæ£€æµ‹ã€‚ ä¾‹å¦‚ï¼Œæˆ‘ä»¬åœ¨$P_2$ä¸Šæ£€æµ‹$32^2$å°ºåº¦çš„achorçš„ä¿¡æ¯ï¼Œåœ¨$P_3$ ä¸Šé¢æ£€æµ‹$64^2$å°ºåº¦çš„ä¿¡æ¯ï¼Œä¾æ¬¡ç±»æ¨å¾€ä¸‹è¿›è¡Œã€‚ ä¸Šé¢çš„æ“ä½œä¸»è¦æ˜¯è¿›è¡Œç‰¹å¾å›¾çš„ç”Ÿæˆæ“ä½œï¼Œå¯¹äºFaster R-CNNæ¥è¯´ï¼Œå…¶ä¸‹ä¸€æ­¥æ˜¯ä½¿ç”¨RPNç½‘ç»œç”Ÿæˆçš„å€™é€‰æ¡†ï¼Œç„¶åå°†å€™é€‰æ¡†å’Œç‰¹å¾å›¾è¿›è¡Œåˆ†ç±»å’Œå›å½’å¤„ç†ã€‚ å› æ­¤ï¼ŒFPNç½‘ç»œä¸»è¦ä¹Ÿæ˜¯ä¿®æ”¹çš„ç‰¹å¾å›¾çš„ç”Ÿæˆç®—æ³•ï¼Œä½¿å…¶å¯ä»¥å¾—åˆ°å¤šå°ºåº¦çš„ä¿¡æ¯ã€‚ç„¶åï¼Œæˆ‘ä»¬å°±å¾—åˆ°äº†å¤šä¸ªç‰¹å¾å›¾çš„ä¿¡æ¯ï¼Œç›¸å½“äºæœ‰å¤šä¸ªç‰¹å¾å›¾ã€‚ å®éªŒè¯æ˜å…±äº«æƒé‡çš„æ•ˆæœå…¶å®å’Œåˆ†å¼€è®­ç»ƒå·®ä¸å¤šï¼Œè¿™é‡Œä¸ºäº†å‡å°å‚æ•°å°±å…±äº«RPNå’ŒFast CNNéƒ¨åˆ†çš„æƒé‡ã€‚ æœ€åï¼Œå¦‚ä½•å°†ç”Ÿæˆçš„å…±äº«æ¡†æ”¾åˆ°å¯¹åº”çš„ç‰¹å¾å›¾ä¸Šï¼Œè¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªç»éªŒå…¬å¼ï¼š k= \\lfloor k_0 + \\log_2(\\sqrt {wh}/224)\\rfloor å…¶ä¸­ $k_0=4$ï¼Œ$k$ä¸ºå¯¹åº”çš„ç‰¹å¾å›¾çš„åºå·$P_k$ï¼Œ$w,h$ä¸ºå¯¹åº”çš„é•¿å’Œå®½ã€‚ å…·ä½“åœ°ç»†èŠ‚å¯ä»¥å‚è€ƒåŸè®ºæ–‡ã€‚","link":"/2022/06/24/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E5%8F%8APytorch%E5%AE%9E%E7%8E%B0/R-CNN%E5%92%8CFast-R-CNN/"},{"title":"è¯­ä¹‰åˆ†å‰²å‰è¨€å’Œè½¬ç½®å·ç§¯ä¸è†¨èƒ€å·ç§¯","text":"hljs.initHighlightingOnLoad(); ä»æœ¬æ–‡å¼€å§‹å°±å¯åŠ¨è¯­ä¹‰åˆ†å‰²çš„å­¦ä¹ , é¦–å…ˆå¯¹è¯­ä¹‰åˆ†å‰²è¿›è¡Œå¤§æ¦‚çš„ä»‹ç», å…¶ä¸»è¦çš„åˆ†ç±»ç­‰, æ¥ä¸‹æ¥å°±æ˜¯è¯­ä¹‰åˆ†å‰²å¸¸é‡‡ç”¨å¸¸ç”¨çš„è½¬ç½®å·ç§¯å’Œè†¨èƒ€å·ç§¯çš„ç›¸å…³çš„ç†è®ºä»‹ç»ã€‚ è¯­ä¹‰åˆ†å‰²å‰æ²¿å¸¸è§çš„ä»»åŠ¡åˆ†ç±» è¯­ä¹‰åˆ†å‰² (semantic segmentation) : FCNï¼Œä»…ä»…æ˜¯å¯¹æ¯ä¸ªåƒç´ è¿›è¡Œåˆ†ç±»ï¼Œå°†æ‰€æœ‰é£æœºéƒ½ç”¨åŒä¸€ä¸ªé¢œè‰²æ¥åˆ†ç±»ã€‚ å®ä¾‹åˆ†å‰² (Instance segmentation) : Mask R-CNNï¼Œå¯¹åŒä¸ªç±»åˆ«çš„ä¸åŒçš„ç‰©ä½“è¿›è¡Œåˆ†å‰²ã€‚ å…¨æ™¯åˆ†å‰² (Panoramic segmentation) : Panopticï¼Œä¸ä»…ä»…å¯¹ç›®æ ‡åˆ†å‰²ï¼Œå¯¹èƒŒæ™¯ä¹Ÿè¿›è¡Œåˆ†å‰²ã€‚å°†èƒŒæ™¯çš„è“å¤©ã€é©¬è·¯ã€ç™½äº‘ä¹Ÿè¿›è¡Œåˆ†å‰²ã€‚ è¯­ä¹‰åˆ†å‰²ä»»åŠ¡å¸¸è§çš„æ•°æ®é›†PASCAL VOC è¿™é‡Œåˆ†å‰²ä»¥åçš„å›¾ç‰‡å…¶å®æ˜¯ä¸€ä¸ªå•é€šé“çš„å›¾ç‰‡ï¼Œå…¶åƒç´ å¯¹åº”çš„é¢œè‰²æ˜¯(0,0,0)çš„é»‘è‰²ï¼Œåƒç´ 1å¯¹åº”çš„æ˜¯(127,0,0)çš„æ·±çº¢è‰²ï¼Œåƒç´ 255å¯¹åº”çš„æ˜¯(224,224,129)ã€‚ è¿™é‡Œåˆ†å‰²çš„éƒ¨åˆ†ä½¿ç”¨çš„æ˜¯åƒç´ å€¼ä¸º1çš„å›¾ç‰‡ï¼Œå…¶ä»–åœ°æ–¹ä½¿ç”¨çš„æ˜¯åƒç´ å€¼ä¸º0ä½œä¸ºèƒŒæ™¯ï¼Œä¹‹åçš„è¾¹ç•Œä½¿ç”¨çš„åƒç´ å€¼ä¸º255çº¿æ¡ï¼Œå¯¹äºå·¦ä¸‹è§’æ¥è¯´ï¼Œç”±äºå…¶åªæœ‰åŠä¸ªæœºç¿¼ï¼Œäºæ˜¯å°†å…¶å…¨éƒ¨æ¶‚æˆè¾¹ç•Œçš„é¢œè‰²ã€‚ MS COCOå…¶ä¸»è¦æ˜¯é’ˆå¯¹æ¯ä¸ªç›®æ ‡éƒ½è®°å½•äº†å¤šè¾¹å½¢åæ ‡ (polygons) åœ¨å®é™…ä½¿ç”¨æ—¶éœ€è¦è‡ªå·±è¯»å–æ¯å¼ å›¾ç‰‡çš„åˆ†å‰²çš„å¤šè¾¹å½¢çš„ä¿¡æ¯ï¼Œå¹¶è‡ªå·±åœ¨å›¾ä¸­ç»˜åˆ¶å‡ºæ¥ã€‚è¿™ä¸ªæ•°æ®é›†ä¹Ÿæ¯”è¾ƒæ–¹ä¾¿è¿›è¡Œå®ä¾‹åˆ†å‰²ã€‚ è¯­ä¹‰åˆ†å‰²å¾—åˆ°ç»“æœçš„å…·ä½“å½¢å¼ å¦‚æœä¿å­˜æˆä¸€ä¸ªå•é€šé“çš„ç°åº¦å€¼ä¼šä½¿å¾—å…¶é¢œè‰²çš„å·®åˆ«æ¯”è¾ƒå°ï¼Œäºæ˜¯è¿™é‡ŒåŠ ä¸Šè°ƒè‰²æ¿ï¼ŒåŒæ—¶ä¸åŒçš„ç±»åˆ«å¯¹åº”ä¸åŒçš„é¢œè‰²å€¼ã€‚ è¯­ä¹‰åˆ†å‰²è¯„ä»·æŒ‡æ ‡å¸¸è§çš„æŒ‡æ ‡ä¸»è¦åŒ…æ‹¬ï¼š Pixel Accuracy (Global Acc) ï¼š$\\dfrac{\\sum_in_{ii}}{\\sum_it_i}$; mean Accuracy ï¼š$\\dfrac{1}{n_{cls}}\\cdot \\sum_i \\dfrac{n_{ii}}{t_i}$ mean IoUï¼š$\\dfrac{1}{n_{cls}}\\cdot \\sum_i \\dfrac{n_{ii}}{t_i+\\sum_jn_{ji}-n_{ii}}$ å…¶ä¸­ï¼Œ$n_{ij}$ï¼šç±»åˆ« $i$ è¢«é¢„æµ‹æˆç±»åˆ« $j$ çš„åƒç´ ä¸ªæ•°ï¼› $n_{cls}$ ï¼šç›®æ ‡ç±»åˆ«ä¸ªæ•°ï¼ˆåŒ…å«èƒŒæ™¯ï¼‰ï¼› $t_i=\\sum_i n_{ij}$ ï¼šç›®æ ‡ç±»åˆ« $i$ çš„æ€»åƒç´ ä¸ªæ•° (çœŸå®æ ‡ç­¾)ï¼› è¿™é‡Œçš„ç»¿è‰²çš„éƒ¨åˆ†å°±æ˜¯Ground truth è€Œè“è‰²æ˜¯é¢„æµ‹çš„éƒ¨åˆ† predict ï¼Œè¿™é‡Œçš„IOUå’Œç›®æ ‡æ£€æµ‹æ˜¯ä¸€æ ·çš„ï¼Œè®¡ç®—é¢„æµ‹å’Œå®é™…ç›¸äº’äº¤å‰çš„é¢ç§¯å æ€»çš„é¢ç§¯çš„æ¯”å€¼ã€‚ Pytorch å®˜æ–¹çš„è®¡ç®—æ–¹æ³•æ˜¯å»ºç«‹äº†ä¸€ä¸ªæ··æ·†çŸ©é˜µï¼Œç„¶åå†æ¥é¢„æµ‹ä¸Šè¿°çš„æŒ‡æ ‡ã€‚ IoU=çœŸå®æ ‡ç­¾ / (è¡Œæ€»æ•°+åˆ—æ€»æ•°-çœŸå®æ ‡ç­¾) cls_acc=çœŸå®æ ‡ç­¾ / åˆ—æ€»æ•° åˆ†å‰²ä»»åŠ¡çš„æ ‡æ³¨å·¥å…· è¿™ä¸ªå·¥å…·éœ€è¦ä¸€ä¸ªä¸€ä¸ªç‚¹ç”¨æ‰‹æ¥æ ‡æ³¨ã€‚ è¿™ä¸ªå·¥å…·å¯ä»¥è‡ªåŠ¨è¯†åˆ«æ¥è¿›è¡Œåˆ†å‰²ï¼Œå…¶å…·æœ‰ä¸€å®šé¢„è®­ç»ƒçš„æ‰‹æ³•ï¼Œå®ç°è‡ªåŠ¨åŒ–çš„æ ‡æ³¨ã€‚ ç›¸å…³çš„çŸ¥è¯†è¡¥å……è½¬ç½®å·ç§¯ å…¶ä¸»è¦çš„ä½œç”¨æ˜¯è¿›è¡Œä¸Šé‡‡æ ·æ“ä½œï¼Œä½†æ˜¯è½¬ç½®å·ç§¯ä¸æ˜¯è½¬ç½®çš„é€†è¿ç®—ï¼Œä»…ä»…æ˜¯å½¢çŠ¶ä¸Šå˜æˆåŸæ¥çš„ä¸¤å€ï¼Œå…¶å…·ä½“çš„æ•°å€¼è·ŸåŸæ¥æ˜¯ä¸ä¸€æ ·çš„ã€‚ è½¬ç½®å·ç§¯çš„æ­¥éª¤ åœ¨è¾“å…¥ç‰¹å¾å›¾å…ƒç´ é—´å¡«å……s-1è¡Œã€s-1åˆ—çš„0å…ƒç´ ï¼› åœ¨è¾“å…¥ç‰¹å¾å›¾å››å‘¨å¡«å……k-p-1è¡Œã€k-p-1åˆ—çš„0å…ƒç´ ï¼› å°†å·ç§¯æ ¸å‚æ•°ä¸Šä¸‹ã€å·¦å³ç¿»è½¬ï¼› åšæ­£å¸¸å·ç§¯è¿ç®—(å¡«å……0ï¼Œæ­¥è·1)ã€‚ ä¸‹é¢ï¼Œæˆ‘ä»¬ä»¥ä¸€ä¸ªå…·ä½“çš„å®ä¾‹æ¥è¿›è¡Œè®²è§£å¦‚ä¸‹ã€‚ ä¸‹é¢ä¸ºåœ¨Pytorchçš„å®ç°è¿‡ç¨‹ï¼Œè¿™é‡Œä¸»è¦ä½¿ç”¨çš„æ˜¯å‰é¢çš„å‡ ä¸ªå‚æ•°ï¼Œ è¿™é‡Œ output_channelä¸€èˆ¬ç›´æ¥ä½¿ç”¨é»˜è®¤å€¼0ï¼Œä¸å»ç›´æ¥ä½¿ç”¨ã€‚ å…¶æ¬¡dilationä¸€èˆ¬ç©ºæ´å·ç§¯ï¼Œæˆ–å«åšè†¨èƒ€å·ç§¯ï¼Œå…·ä½“å†…å®¹åé¢ä¼šè¯¦ç»†ä»‹ç»ã€‚ å·ç§¯çš„è®¡ç®—æ­¥éª¤ç†è®ºçš„è®¡ç®—æ­¥éª¤åœ¨åŸºç¡€çš„è¯¾ç¨‹ä¸Šå·²ç»è®²çš„å¾ˆæ¸…æ¥šäº†ï¼Œä½†æ˜¯å®é™…çš„è®¡ç®—æ—¶æ˜¯ä¸ç”¨ä¹‹å‰ç†è®ºçš„è¿‡ç¨‹çš„ï¼Œå› ä¸ºå…¶è®¡ç®—æ¯”è¾ƒä½æ•ˆï¼Œåœ¨ä¸€èˆ¬æƒ…å†µä¸‹ä½¿ç”¨çš„æ˜¯å«å·ç§¯æ ¸ç­‰æ•ˆçŸ©é˜µæ¥è¿›è¡Œè®¡ç®—ã€‚ åœ¨è®¡ç®—æ—¶ï¼Œä»…ä»…å°†è¾“å…¥çš„ feature map åˆ†åˆ«å’Œå¯¹åº”çš„ç­‰æ•ˆçŸ©é˜µç›¸ä¹˜å³å¯ã€‚ å°†è¾“å…¥çš„feature map è¿›è¡Œå±•å¹³æ“ä½œå¾—åˆ°ä¸€ä¸ªè¡Œå‘é‡ï¼š å°†ç­‰æ•ˆçŸ©é˜µä¹Ÿå¯¹åº”çš„è¿›è¡Œå±•å¹³æ“ä½œå¾—åˆ°ä¸€ç³»åˆ—çš„åˆ—å‘é‡ï¼š è¿™é‡Œç›¸ä¹˜å¾—åˆ°çš„ç»“æœå…¶å®å°±æ˜¯å·ç§¯è¾“å‡ºç»“æœçš„å±•å¹³ï¼š ä¸Šè¿°å°†å·ç§¯è½¬æ¢æˆä¸ºä¸€èˆ¬çš„çŸ©é˜µæ±‚æ‹Ÿçš„é—®é¢˜ï¼Œå…¶ä¸»è¦çš„åŸå› æ˜¯æ—¶æ–¹ä¾¿å¹¶è¡ŒåŒ–çš„å¤„ç†æ“ä½œã€‚ é€šè¿‡ä¸Šè¿°çš„å¤„ç†ï¼Œå¯ä»¥å°†å·ç§¯è½¬æ¢æˆä¸ºä¸€ä¸ªçŸ©é˜µçš„è¿ç®—ï¼Œä½†æ˜¯è¿™ä¸ªè¿‡ç¨‹æ˜¯å¦å¯ä½ å‘¢ï¼Ÿå¾ˆæ˜¾ç„¶è¿™ä¸ªè¿‡ç¨‹æ—¶ä¸å¯é€†çš„ï¼Œå› ä¸ºè¿™é‡Œçš„çŸ©é˜µ$\\boldsymbol C^{16\\times 4}$ä¸æ˜¯æ–¹é˜µï¼Œæ— æ³•è¿›è¡Œæ±‚æ‹Ÿæ“ä½œï¼Œå› æ­¤è½¬ç½®å·ç§¯ä¸èƒ½ç§°ä¸ºåå·ç§¯ã€‚ é‚£é€€ä¸€æ­¥æ¥è¯´ï¼Œå¦‚ä½•å¾—åˆ°ä¸€ä¸ªè¾“å…¥ä¸º$1\\times4$ è¾“å‡ºä¸º$1\\times16$ çš„å·ç§¯å‘¢ï¼Ÿ å…¶å®å°±æ˜¯å°†æˆ‘ä»¬ç­‰æ•ˆçŸ©é˜µè½¬ç½®å¤„ç†å³å¯ï¼Œè¿™é‡Œä»…ä»…æ˜¯ä¿è¯å½¢çŠ¶ä¸Šæ˜¯ç›¸ä¼¼çš„ï¼Œä½†æ˜¯å…¶æ•°å€¼ä¸Šä¸ç›¸ç­‰ã€‚ ç”±äºåœ¨è¿›è¡Œç­‰æ•ˆçŸ©é˜µè½¬åŒ–æ—¶ï¼Œæˆ‘ä»¬çš„ä¸»è¦å°†æ¯ä¸€ä¸ªç­‰æ•ˆçŸ©é˜µè¿›è¡Œå±•å¹³å¤„ç†ï¼Œå°†$\\boldsymbol C^{T}(4\\times16)$ åå˜æ¢å¾—åˆ°16ä¸ª$4\\times4$çš„ç­‰æ•ˆçŸ©é˜µã€‚ è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ç­‰æ•ˆå·ç§¯æ ¸å’Œ$O^{2\\times2}$è¿›è¡Œå·ç§¯çš„ç»“æœå’Œç»¿è‰²å·ç§¯æ ¸ä¸å³ä¸‹è§’çš„å·ç§¯è¿ç®—çš„ç»“æœæ—¶ç›¸åŒçš„ã€‚ è¿™é‡Œç»¿è‰²çš„å·ç§¯æ ¸å¯ä»¥çœ‹æˆæ˜¯æ ¸åŸæ¥çš„å·ç§¯æ ¸è¿›è¡Œä¸Šä¸‹å·¦å³åè½¬æ“ä½œ æ€»ç»“ä¹‹å‰çš„æ“ä½œå¦‚ä¸‹ï¼š è†¨èƒ€å·ç§¯åŸºæœ¬çŸ¥è¯† è†¨èƒ€å·ç§¯å…¶å®å°±æ˜¯å·ç§¯æ ¸æ˜¯å­˜åœ¨é—´éš™çš„ï¼Œä¸­é—´çš„é—´éš™å«åšè†¨èƒ€å› å­ï¼Œå…¶ä¸»è¦çš„ä½œç”¨å…¶å®å°±æ˜¯å¢å¤§æ„Ÿå—é‡ã€‚ä¸€èˆ¬æƒ…å†µä¸‹æ˜¯å¯¹å…¶paddingè¿›è¡Œè®¾ç½®ï¼Œä½¿å¾—å…¶è¾“å…¥å’Œè¾“å‡ºä¿æŒä¸å˜ã€‚ å¯¹äºè¯­ä¹‰åˆ†å‰²æ¥è¯´ï¼Œæˆ‘ä»¬éœ€è¦ä¸Šé‡‡æ ·å’Œä¸‹é‡‡æ ·ï¼Œä¸‹é‡‡æ ·ä¸€èˆ¬æ˜¯åˆ†ç±»ç½‘ç»œï¼Œåœ¨åˆ†ç±»è¿‡ç¨‹ä¸­ä¸€èˆ¬åŠ å…¥æœ€å¤§æ± åŒ–max poolingå±‚æ¥è¿›è¡Œæ“ä½œçš„ï¼Œä½†æ˜¯å…¶ä¼šæå¤§çš„å‡å°é«˜å®½ã€å¹¶ä¸”ä¸¢å¤±ä¸€äº›ç»†èŠ‚ä¿¡æ¯å’Œå°ç›®æ ‡çš„ä¿¡æ¯ï¼Œè¿™ä¸ªæ— æ³•é€šè¿‡ä¸Šé‡‡æ ·æ¥æ¢å¤ã€‚ é‚£ä¹ˆç›´æ¥å»æ‰max poolingï¼Œä½†æ˜¯è¿™æ ·åšä¼šä½¿å¾—æ„Ÿå—é‡å‡å°ï¼Œå› ä¸ºå‰é¢æ„Ÿå—é‡å‘ç”Ÿå˜åŒ–ä¹Ÿä¼šå½±å“åç»­ç½‘ç»œçš„åˆ†ç±»å’Œè¯†åˆ«ã€‚ å› æ­¤ä½¿ç”¨è†¨èƒ€å·ç§¯ï¼Œä¸€æ–¹é¢ä¿æŒåŸæ¥çš„H,Wï¼ŒåŒæ—¶å¯ä»¥å¢å¤§æ„Ÿå—é‡ï¼Œå› æ­¤åœ¨è¯­ä¹‰åˆ†å‰²ä¸­æ¯”è¾ƒå¸¸ç”¨ã€‚ gridding effectç°è±¡ ä¸‹å›¾å°±æ˜¯gridding effectç°è±¡ï¼Œèµ·ä¸»è¦æ˜¯å› ä¸ºè¿™é‡Œè†¨èƒ€çš„ç³»æ•°ç›¸åŒï¼Œå¯¼è‡´è¿ç»­çš„å‡ å±‚ä¸Šé¢éƒ½æ²¡æœ‰åˆ©ç”¨åˆ°é—´éš”è¡Œåˆ—ä¸Šé¢çš„ç»†èŠ‚ä¿¡æ¯ã€‚ å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä¸Šé¢çš„æ•°å­—ä»£è¡¨çš„æ˜¯è¿™ä¸ªå—è¢«ç”¨åˆ°çš„æ¬¡æ•°ï¼Œå®é™…è¿›è¡Œè†¨èƒ€å·ç§¯æ—¶è¦å°½å¯èƒ½çš„é¿å…ä¸Šè¿°ä¿¡æ¯ã€‚ å‚æ•°çš„æ•°é‡ä¸Šæ˜¯ä¸€æ ·çš„ï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯ä¸€èˆ¬çš„å·ç§¯çš„è¯ï¼Œæ„Ÿå—é‡åªæœ‰7x7. å¦‚ä½•è®¾è®¡è†¨èƒ€ç³»æ•° è¿™é‡Œå®šä¹‰äº†æœ€å¤§é0å…ƒç´ çš„è·ç¦»ä¸º$M_{i}$ M_{i}=\\max[M_{i+1}-2r_i,M_{i+1}-2(M_{i+1}-r_i),r_i] å…¶ä¸­çš„$M_n=r_n$ï¼Œæˆ‘ä»¬è®¾è®¡çš„ç›®æ ‡æ˜¯è®©$M_2 \\le K$ã€‚åœ¨å®é™…æ±‚è§£çš„æ—¶å€™å°±æ˜¯å°†é€šè¿‡é€’æ¨ï¼Œä»$M_n=r_n$ ä¸æ–­æ¥æ¨ç†å¾—åˆ°$M_2$å³å¯ã€‚ ä¸‹é¢ç»™å‡º$r=[1,2,5]$å’Œ$r=[1,2,9]$çš„æ•ˆæœã€‚ è¿™é‡Œç”±é€’æ¨å…¬å¼å¯å¾—ï¼Œ$M_1\\ge r_1$ï¼Œå¦‚æœ$r_1&gt;1$æ—¶ï¼Œé‚£æ ·çš„è¯å°±ä¸€å®šå­˜åœ¨é—´éš™ï¼Œå› æ­¤è¿™é‡Œçš„$r_i$ä¸€èˆ¬éƒ½è¦è®¾è®¡æˆ1. å¯ä»¥å°†å‚æ•°è®¾è®¡æˆé”¯é½¿ç»“æ„ï¼ŒåŒæ—¶å…¬çº¦æ•°æ˜¯ä¸å¯ä»¥å¤§äº1çš„ã€‚ å½“$r=[2,4,8]$ çš„æ—¶å€™ï¼Œå…¶é¢„æµ‹çš„ç»“æœä¸ºï¼š ä»¥ä¸Šæ˜¯åˆ†å‰²çš„æ•ˆæœå¯¹æ¯”ï¼Œä½¿ç”¨HDCè®¾è®¡å‡†åˆ™çš„ç»†èŠ‚ä¿¡æ¯ä¿å­˜çš„å¾ˆå¥½ã€‚","link":"/2022/06/26/%E8%AF%AD%E4%B9%89%E5%88%86%E5%89%B2%E5%8F%8APytorch%E5%AE%9E%E7%8E%B0/%E8%AF%AD%E4%B9%89%E5%88%86%E5%89%B2%E5%89%8D%E8%A8%80/"},{"title":"Ch9 åç«¯ ç¬¬äºŒéƒ¨åˆ† BAæ–¹æ³•å’Œå›¾ä¼˜åŒ–","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦æ‰¿æ¥ch6çš„è§‚æµ‹é—®é¢˜ï¼Œè§£å†³çš„å¦ä¸€ç§æ–¹æ³•ï¼Œç°é˜¶æ®µä½¿ç”¨çš„æ¯”EKFè¦é«˜ã€‚ä¸»è¦åŒ…æ‹¬æŠ•å½±æ¨¡å‹å’ŒBAä»£ä»·å‡½æ•°å»ºæ¨¡å’Œæ±‚è§£ï¼Œç¨€ç–åŒ–å’Œè¾¹ç¼˜åŒ–ä»¥åŠé²æ£’æ ¸å‡½æ•°ã€‚ä»£ç éƒ¨åˆ†ä¹‹åå•ç‹¬åˆ—å‡ºã€‚ æ‰€è°“çš„ Bundle AdjustmentR(BA)ï¼Œæ˜¯æŒ‡ä»è§†è§‰å›¾åƒä¸­æç‚¼å‡ºæœ€ä¼˜çš„3Dæ¨¡å‹å’Œç›¸æœºå‚æ•°ï¼ˆå†…å‚æ•°å’Œå¤–å‚æ•°ï¼‰ã€‚ è€ƒè™‘ä»ä»»æ„ç‰¹å¾ç‚¹å‘å°„å‡ºæ¥çš„å‡ æŸå…‰çº¿(bundles of light rays )ï¼Œå®ƒä»¬ä¼šåœ¨å‡ ä¸ªç›¸æœºçš„æˆåƒå¹³é¢ä¸Šå˜æˆåƒç´ æˆ–æ˜¯æ£€æµ‹åˆ°çš„ç‰¹å¾ç‚¹ã€‚ å¦‚æœæˆ‘ä»¬è°ƒæ•´ï¼ˆadjustment)å„ç›¸æœºå§¿æ€å’Œå„ç‰¹å¾ç‚¹çš„ç©ºé—´ä½ç½®ï¼Œä½¿å¾—è¿™äº›å…‰çº¿æœ€ç»ˆæ”¶æŸåˆ°ç›¸æœºçš„å…‰å¿ƒï¼Œå°±ç§°ä¸ºBAã€‚ æ¥ä¸‹æ¥ï¼Œå…ˆæ¥å¤ä¹ ä¸€ä¸‹ä¹‹å‰å­¦ä¹ å…³äºç›¸æœºæŠ•å½±æ¨¡å‹å’Œéçº¿æ€§ä¼˜åŒ–çš„çŸ¥è¯†ã€‚ æŠ•å½±æ¨¡å‹å’ŒBAä»£ä»·å‡½æ•°é¦–å…ˆæ¥å¤ä¹ æŠ•å½±çš„æ•´ä¸ªè¿‡ç¨‹ï¼Œä»ä¸€ä¸ªä¸–ç•Œåæ ‡ç³»ä¸­çš„ç‚¹på‡ºå‘ï¼ŒæŠŠç›¸æœºçš„å†…å¤–å‚æ•°å’Œç•¸å˜éƒ½è€ƒè™‘è¿›æ¥ï¼Œæœ€åæŠ•å½±æˆåƒç´ ã€‚ æŠŠä¸–ç•Œåæ ‡è½¬æ¢æˆç›¸æœºçš„åæ ‡ï¼Œè¿™é‡Œå°†ä½¿ç”¨åˆ°ç›¸æœºçš„å¤–å‚æ•°($R,t$)ï¼š \\boldsymbol{P}^{\\prime}=\\boldsymbol{R} \\boldsymbol{p}+\\boldsymbol{t}=\\left[X^{\\prime}, Y^{\\prime}, Z^{\\prime}\\right]^{\\mathrm{T}} å°†$\\boldsymbol Pâ€™$ æŠ•å½±åˆ°å½’ä¸€åŒ–å¹³é¢ï¼Œå¾—åˆ°å½’ä¸€åŒ–çš„åæ ‡ï¼š \\boldsymbol{P}_{\\mathrm{c}}=\\left[u_{\\mathrm{c}}, v_{\\mathrm{c}}, 1\\right]^{\\mathrm{T}}=\\left[X^{\\prime} / Z^{\\prime}, Y^{\\prime} / Z^{\\prime}, 1\\right]^{\\mathrm{T}} è€ƒè™‘å½’ä¸€åŒ–æ—¶åæ ‡çš„ç•¸å˜æƒ…å†µï¼Œå¾—åˆ°å»ç•¸å˜å‰çš„åŸå§‹åƒç´ æ•°æ®åæ ‡ã€‚è¿™é‡Œæš‚æ—¶åªè€ƒè™‘å¾„å‘çš„ç•¸å˜ï¼š \\left\\{\\begin{array}{l}u_{\\mathrm{c}}^{\\prime}=u_{\\mathrm{c}}\\left(1+k_{1} r_{\\mathrm{c}}^{2}+k_{2} r_{\\mathrm{c}}^{4}\\right) \\\\ v_{\\mathrm{c}}^{\\prime}=v_{\\mathrm{c}}\\left(1+k_{1} r_{\\mathrm{c}}^{2}+k_{2} r_{\\mathrm{c}}^{4}\\right)\\end{array}\\right. æ ¹æ®å†…å‚æ¨¡å‹ï¼Œè®¡ç®—åƒç´ çš„åæ ‡ï¼š \\left\\{\\begin{array}{l}u_{s}=f_{x} u_{\\mathrm{c}}^{\\prime}+c_{x} \\\\ v_{s}=f_{y} v_{\\mathrm{c}}^{\\prime}+c_{y}\\end{array}\\right. å°†ä¸Šè¿°çš„è¡¨ç¤ºä½¿ç”¨ä¸€ä¸ªæµç¨‹å›¾å°±å¯ä»¥å½¢è±¡çš„è¡¨ç¤ºå‡ºæ¥ï¼š ä¸Šè¿°çš„è¿‡ç¨‹å…¶å®å°±æ˜¯ä¸€ä¸ªè§‚æµ‹æ–¹ç¨‹ $\\boldsymbol{z}=h(\\boldsymbol{x}, \\boldsymbol{y})$ã€‚ ç°åœ¨æˆ‘ä»¬å°†ä¸Šè¿°è§‚æµ‹æ–¹ç¨‹è¿›è¡Œå‚æ•°åŒ–è¿‡ç¨‹ï¼Œå…·ä½“çš„æœ‰ è¿™é‡Œçš„$x$ ä»£è¡¨çš„å°±æ˜¯æ­¤æ—¶ç›¸æœºçš„ä½å§¿ï¼Œå³å¤–å‚$R,t$ å®ƒå¯¹åº”çš„æç¾¤ä¸º$T$ ï¼Œå¯¹äºçš„æä»£æ•°ä¸º$\\xi$ . è·¯æ ‡ç‚¹$y$ å³è¿™é‡Œçš„ä¸‰ç»´ç‚¹ $p$ ï¼Œè€Œè§‚æµ‹æ•°æ®åˆ™æ˜¯åƒç´ åæ ‡ z \\stackrel{\\text { def }}{=}\\left[u_{s}, v_{s}\\right]^{\\mathrm{T}} ã€‚ äºæ˜¯ï¼Œä»æœ€å°äºŒä¹˜çš„è§’åº¦æ¥è€ƒè™‘ï¼Œé‚£ä¹ˆå¯ä»¥åˆ—å†™å…³äºæ­¤è§‚æµ‹æ–¹ç¨‹çš„è¯¯å·®ï¼š \\boldsymbol{e}=\\boldsymbol{z}-h(\\boldsymbol{T}, \\boldsymbol{p})ä¹‹åå°†å…¶ä»–æ—¶åˆ»çš„è§‚æµ‹é‡ä¹Ÿè€ƒè™‘è¿›æ¥ï¼Œç»™è¯¯å·®åŠ å…¥ä¸‹æ ‡ã€‚è®¾$z_{ij}$ ä¸ºåœ¨å§¿æ€$T_i$ å¤„è§‚å¯Ÿè·¯æ ‡$p_j$ äº§ç”Ÿçš„æ•°æ®ï¼Œæ•´ä½“çš„ä»£ä»·å‡½æ•°ä¸ºï¼š J=\\frac{1}{2} \\sum_{i=1}^{m} \\sum_{j=1}^{n}\\left\\|\\boldsymbol{e}_{i j}\\right\\|^{2}=\\frac{1}{2} \\sum_{i=1}^{m} \\sum_{j=1}^{n}\\left\\|\\boldsymbol{z}_{i j}-h\\left(\\boldsymbol{T}_{i}, \\boldsymbol{p}_{j}\\right)\\right\\|^{2} äº‹å®ä¸ŠBAå±äºæ‰¹é‡å¼çš„ä¼˜åŒ–æ–¹æ³•ï¼› ç»™å®šå¾ˆå¤šä¸ªç›¸æœºä½å§¿ä¸è§‚æµ‹æ•°æ®ï¼Œè®¡ç®—æœ€ä¼˜çš„çŠ¶æ€ä¼°è®¡ï¼› å®šä¹‰æ¯ä¸ªè¿åŠ¨/è§‚æµ‹æ–¹ç¨‹çš„è¯¯å·®ï¼Œå¹¶ä»åˆå§‹ä¼°è®¡å¼€å§‹å¯»æ‰¾æ¢¯åº¦ä¸‹é™ã€‚ BAçš„æ±‚è§£æ ¹æ®ä¸Šè¿°çš„å…¬å¼ï¼Œå¾ˆæ˜æ˜¾è¯¥é—®é¢˜æ˜¯ä¸€ä¸ªéçº¿æ€§çš„ä¼˜åŒ–é—®é¢˜ï¼Œæ±‚è§£çš„ä¸»è¦æ–¹æ³•ä¹Ÿæ˜¯ç»™å®šåˆå€¼ï¼Œä¸æ–­åœ°å¯»æ‰¾ä¸‹é™çš„æ–¹å‘$\\Delta x$ï¼Œæ¥ç¡®å®šç›®æ ‡å‡½æ•°çš„æœ€ä¼˜è§£ï¼Œä¹‹åä¸æ–­åœ°æ±‚è§£å¢é‡æ–¹ç¨‹ã€‚å°½ç®¡è¯¯å·®é¡¹éƒ½æ˜¯é’ˆå¯¹å•ä¸ªä½å§¿å’Œè·¯æ ‡ç‚¹çš„ï¼Œåœ¨æ•´ä½“çš„BAç›®æ ‡å‡½æ•°ä¸Šï¼Œè‡ªå˜é‡å†™æˆæ‰€æœ‰å˜é‡çš„å‘é‡çš„å½¢å¼ï¼š \\boldsymbol{x}=\\left[\\boldsymbol{T}_{1}, \\ldots, \\boldsymbol{T}_{m}, \\boldsymbol{p}_{1}, \\ldots, \\boldsymbol{p}_{n}\\right]^{\\mathrm{T}}å…¶å¯¹äºçš„å¢é‡æ–¹ç¨‹ä¸­çš„è‡ªå˜é‡åº”è¯¥å†™æˆå‘é‡çš„å½¢å¼ï¼Œåœ¨è¿™ä¸ªæ„ä¹‰ä¸‹ï¼Œå½“æˆ‘ä»¬çš„ç»™è‡ªè‡ªå˜é‡ä¸€ä¸ªå¢é‡æ—¶ï¼Œå…¶ç›®æ ‡å‡½æ•°å˜ä¸ºï¼š \\frac{1}{2}\\|f(\\boldsymbol{x}+\\Delta \\boldsymbol{x})\\|^{2} \\approx \\frac{1}{2} \\sum_{i=1}^{m} \\sum_{j=1}^{n}\\left\\|\\boldsymbol{e}_{i j}+\\boldsymbol{F}_{i j} \\Delta \\boldsymbol{\\xi}_{i}+\\boldsymbol{E}_{i j} \\Delta \\boldsymbol{p}_{j}\\right\\|^{2}å…¶ä¸­ï¼Œ$F_{ij}$ è¡¨ç¤ºæ•´ä¸ªä»£ä»·å‡½æ•°åœ¨å½“å‰çŠ¶æ€ä¸‹å¯¹ç›¸æœºä½å§¿çš„åå¯¼æ•°ï¼Œè€Œ$E_{ij}$ ä¸ºç›®æ ‡å‡½æ•°å¯¹ä½ç½®ç‚¹çš„åå¯¼ã€‚äºæ˜¯å°†ç›¸æœºä½å§¿å˜é‡å’Œç©ºé—´ç‚¹å•ç‹¬å†™åˆ°ä¸€èµ·å¯å¾—ï¼š \\boldsymbol{x}_{\\mathrm{c}}=\\left[\\boldsymbol{\\xi}_{1}, \\boldsymbol{\\xi}_{2}, \\ldots, \\boldsymbol{\\xi}_{m}\\right]^{\\mathrm{T}} \\in \\mathbb{R}^{6 m}\\\\ \\boldsymbol{x}_{p}=\\left[\\boldsymbol{p}_{1}, \\boldsymbol{p}_{2}, \\ldots, \\boldsymbol{p}_{n}\\right]^{\\mathrm{T}} \\in \\mathbb{R}^{3 n}äºæ˜¯å°†ä¸Šè¿°è¡¨è¾¾å¼ç®€åŒ–è¡¨ç¤ºä¸ºï¼š \\frac{1}{2}\\|f(\\boldsymbol{x}+\\Delta \\boldsymbol{x})\\|^{2}=\\frac{1}{2}\\left\\|\\boldsymbol{e}+\\boldsymbol{F} \\Delta \\boldsymbol{x}_{c}+\\boldsymbol{E} \\Delta \\boldsymbol{x}_{p}\\right\\|^{2} .éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¯¥å¼ä»ä¸€ä¸ªç”±å¾ˆå¤šå°å‹äºŒæ¬¡é¡¹ä¹‹å’Œï¼Œå˜æˆçŸ©é˜µçš„å½¢å¼ã€‚è¿™é‡Œçš„é›…å¯æ¯”çŸ©é˜µçš„Eå’ŒFå¿…é¡»æ˜¯ç›®æ ‡å‡½æ•°å¯¹æ•´ä½“å˜é‡çš„å¯¼æ•°ï¼Œå®ƒå°†ä¸€ä¸ªå¾ˆå¤§çš„çŸ©é˜µï¼Œé‡Œé¢è¿›è¡Œåˆ†å—ã€‚æœ€åç»„åˆèµ·æ¥å½¢æˆå¢é‡æ–¹ç¨‹ï¼š \\boldsymbol{H} \\Delta \\boldsymbol{x}=\\boldsymbol{g}æ ¹æ®ç¬¬å…­ç« å¯å¾—ï¼Œè¿™é‡Œçš„$H=J^TJ/J^TJ+\\lambda I$ çš„å½¢å¼ï¼Œå…¶ä¸­æˆ‘ä»¬å°†æ•´ä¸ªå˜é‡è¿›è¡Œåˆ†ç±»å¯å¾—ï¼Œ$J=[F\\ \\ E].$ è¿™é‡Œä»¥G-Næ³•ä¸ºä¾‹ï¼Œå¯¹HçŸ©é˜µè¿›è¡Œåˆ†å—ï¼š \\boldsymbol{H}=\\boldsymbol{J}^{\\mathrm{T}} \\boldsymbol{J}=\\left[\\begin{array}{ll}\\boldsymbol{F}^{\\mathrm{T}} \\boldsymbol{F} & \\boldsymbol{F}^{\\mathrm{T}} \\boldsymbol{E} \\\\ \\boldsymbol{E}^{\\mathrm{T}} \\boldsymbol{F} & \\boldsymbol{E}^{\\mathrm{T}} \\boldsymbol{E}\\end{array}\\right]ä¸éš¾å‘ç°ï¼Œå› ä¸ºè€ƒè™‘äº†æ‰€æœ‰çš„ä¼˜åŒ–å˜é‡ï¼Œæ‰€ä»¥è¿™ä¸ªçº¿æ€§æ–¹ç¨‹çš„ç»´åº¦å°†éå¸¸å¤§ï¼ŒåŒ…å«äº†æ‰€æœ‰çš„ç›¸æœºä½å§¿å’Œè·¯æ ‡ç‚¹ã€‚å°¤å…¶æ˜¯åœ¨è§†è§‰SLAMä¸­ï¼Œä¸€å¹…å›¾åƒä¼šæå‡ºæ•°ç™¾ä¸ªç‰¹å¾ç‚¹ï¼Œå¤§å¤§å¢åŠ äº†è¿™ä¸ªçº¿æ€§æ–¹ç¨‹çš„è§„æ¨¡ã€‚ å¦‚æœç›´æ¥å¯¹Hæ±‚é€†æ¥è®¡ç®—å¢é‡æ–¹ç¨‹ï¼Œç”±äºçŸ©é˜µæ±‚é€†æ˜¯å¤æ‚åº¦ä¸ºO(n3)çš„æ“ä½œï¼Œé‚£ä¹ˆæ¶ˆè€—çš„è®¡ç®—èµ„æºä¼šéå¸¸å¤šã€‚ è¿™é‡Œçš„HçŸ©é˜µæ˜¯æœ‰ä¸€å®šçš„ç‰¹æ®Šç»“æ„çš„ï¼š æ¯ä¸ªè§‚æµ‹åªå…³ç³»ä¸¤ä¸ªå˜é‡ï¼Œå…¶ä¸­ä¸€ä¸ªæ˜¯ç›¸æœºï¼Œä¸€ä¸ªæ˜¯è·¯æ ‡ï¼› çº¯è§†è§‰BAä¸­ï¼Œä¸å­˜åœ¨ç›¸æœºä¸ç›¸æœº/è·¯æ ‡ä¸è·¯æ ‡ä¹‹é—´çš„å…³è”ï¼› æ•´ä¸ªè¯¯å·®å‡½æ•°ç”±è®¸å¤šä¸ªè¿™æ ·å°çš„é¡¹ç»„æˆã€‚ åˆ©ç”¨å˜é‡çš„ç¨€ç–æ€§ï¼Œå¯ä»¥æå¤§çš„åŠ é€Ÿè¿ç®—æ•ˆç‡ã€‚ ç¨€ç–åŒ–å’Œè¾¹ç¼˜åŒ–è€ƒè™‘ä»£ä»·å‡½æ•°é‡Œçš„ä¸€é¡¹$e_{ij}$å¯å¾—ï¼Œæ­¤é¡¹ä»…ä»…å’Œç¬¬iä¸ªç›¸æœºå’Œç¬¬jä¸ªè·¯æ ‡æœ‰å…³ï¼Œå› æ­¤è®¡ç®—å¾—åˆ°çš„é›…å¯æ¯”çŸ©é˜µï¼Œä»…ä»…åœ¨ç¬¬ié¡¹å’Œç¬¬jé¡¹çš„ä½ç½®æœ‰å€¼å…¶ä½™ä½ç½®éƒ½ä¸ºé›¶ã€‚ \\boldsymbol{J}_{i j}(\\boldsymbol{x})=\\left(\\mathbf{0}_{2 \\times 6}, \\ldots \\mathbf{0}_{2 \\times 6}, \\frac{\\partial \\boldsymbol{e}_{i j}}{\\partial \\boldsymbol{T}_{i}}, \\boldsymbol{0}_{2 \\times 6}, \\ldots \\mathbf{0}_{2 \\times 3}, \\ldots \\boldsymbol{0}_{2 \\times 3}, \\frac{\\partial \\boldsymbol{e}_{i j}}{\\partial \\boldsymbol{p}_{j}}, \\mathbf{0}_{2 \\times 3}, \\ldots \\boldsymbol{0}_{2 \\times 3}\\right)åœ¨è®¡ç®—è¿™ä¸ªå¢é‡æ–¹ç¨‹ç³»æ•°Hæ—¶ï¼Œè®¡ç®—çš„å…¬å¼å¦‚ä¸‹ï¼š \\boldsymbol{H}=\\sum_{i, j} \\boldsymbol{J}_{i j}^{\\mathrm{T}} \\boldsymbol{J}_{i j}$\\boldsymbol{J}_{i j}^{\\mathrm{T}} \\boldsymbol{J}_{i j}$ ä»…ä»…åœ¨$(i,i),(i,j),(j,j),(j,i)$å¤„æ˜¯ä¸ä¸º0çš„ï¼Œå…¶ä½™çš„åœ°æ–¹éƒ½ä¸º0çš„ç¨€ç–çŸ©é˜µã€‚ æ³¨æ„ï¼Œ$i$ æ˜¯æ‰€æœ‰ç›¸æœºä½å§¿çš„å–å€¼ï¼Œ$j$ æ˜¯æ‰€æœ‰è·¯æ ‡ç‚¹ä¸­çš„å–å€¼ã€‚äºæ˜¯æˆ‘ä»¬åˆ†å—å¯å¾—å¦‚ä¸‹çš„çŸ©é˜µï¼š \\boldsymbol{H}=\\left[\\begin{array}{ll}\\boldsymbol{H}_{11} & \\boldsymbol{H}_{12} \\\\ \\boldsymbol{H}_{21} & \\boldsymbol{H}_{22}\\end{array}\\right] ä½†æ˜¯ï¼Œä»¥ä¸Šçš„è®¨è®ºæ˜¯é’ˆå¯¹çº¯è§†è§‰çš„SLAMçš„ï¼Œå› ä¸ºçº¯è§†è§‰çš„SLAMæ˜¯æ²¡æœ‰è¿åŠ¨æ–¹ç¨‹ï¼Œä»…ä»…åªæœ‰è§‚æµ‹æ–¹ç¨‹ï¼Œä½†æ˜¯å¦‚æœæ¢åšæ˜¯æ¿€å…‰SLAMæ—¶ï¼Œæœ‰è¿åŠ¨æ–¹ç¨‹ï¼Œäºæ˜¯$H_{11},H_{22}$ä¹Ÿä¸ç¨€ç–äº†ã€‚ æ¯”å¦‚ï¼Œå¦‚æœ$x_{k}=Ax_k+b$ æ—¶ï¼Œæ­¤æ—¶å°±æœ‰$H_{11}$ä¸ºä¸‰å¯¹è§’çŸ©é˜µã€‚ è¿™é‡Œï¼Œä¸ºäº†æ–¹ä¾¿ç†è§£æˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªå…·ä½“çš„æ¡ˆä¾‹ï¼š åœ¨æ­¤åœºæ™¯ä¸‹çš„BAç›®æ ‡å‡½æ•°å¯ä»¥å†™æˆï¼š J=\\frac{1}{2}\\left(\\left\\|e_{11}\\right\\|^{2}+\\left\\|e_{12}\\right\\|^{2}+\\left\\|e_{13}\\right\\|^{2}+\\left\\|e_{14}\\right\\|^{2}+\\left\\|e_{23}\\right\\|^{2}+\\left\\|e_{24}\\right\\|^{2}+\\left\\|e_{25}\\right\\|^{2}+\\left\\|e_{26}\\right\\|^{2}\\right)è¿™é‡Œçš„$e_{ij}$ä½¿ç”¨ä¹‹å‰çš„å®šä¹‰ï¼Œè¿™é‡Œä»¥$e_{11}$ä¸ºä¾‹ï¼Œå…¶ä»…ä»…æè¿°çš„ä¸º$C_1$å’Œ$P_1$çš„å…³ç³»ï¼Œäºæ˜¯$J_{11}$çš„è¡¨è¾¾å¼ä¸ºï¼š \\boldsymbol{J}_{11}=\\frac{\\partial \\boldsymbol{e}_{11}}{\\partial \\boldsymbol{x}}=\\left(\\frac{\\partial \\boldsymbol{e}_{11}}{\\partial \\boldsymbol{\\xi}_{1}}, \\mathbf{0}_{2 \\times 6}, \\frac{\\partial \\boldsymbol{e}_{11}}{\\partial \\boldsymbol{p}_{1}}, \\mathbf{0}_{2 \\times 3}, \\mathbf{0}_{2 \\times 3}, \\mathbf{0}_{2 \\times 3}, \\mathbf{0}_{2 \\times 3}, \\mathbf{0}_{2 \\times 3}\\right)è¿™é‡Œçš„$x=(\\xi_1,\\xi_2,p_1,p_2,p_3,p_4,p_5,p_6)^T$ ï¼Œä»…å¯¹$\\xi_1$çš„åå¯¼æœ‰å€¼ï¼Œå…¶ä»–éƒ½ä¸º0. ç”±ä¸‹å›¾æ‰€ç¤ºï¼Œå°† $J_{ij}$ æŒ‰ç…§ä¸€å®šçš„é¡ºåºæ’åˆ—å¯å¾—$J$ çŸ©é˜µï¼Œè¿›è€Œå¾—åˆ°äº†$H$ çŸ©é˜µå›¾ä¸‹å›¾æ‰€ç¤ºã€‚ é€šè¿‡è§‚å¯Ÿ$H$çŸ©é˜µå¯å¾—ï¼Œé™¤å»å¯¹è§’çº¿å…ƒç´ ï¼Œå¯¹äºä¸Šè¿°å›¾ç»“æ„çš„é‚»æ¥çŸ©é˜µå’Œ$H$çŸ©é˜µçš„é™¤å¯¹è§’çº¿ä½ç½®å¤–å…¶ä½™éƒ¨åˆ†æœ‰ç€å®Œå…¨ä¸€è‡´çš„ç»“æ„ã€‚å…¶éé›¶éƒ¨åˆ†çš„çŸ©é˜µå—å¯ä»¥ç†è§£ä¸ºä¸¤ä¸ªå…ƒç´ ä¹‹é—´å­˜åœ¨è”ç³»ï¼Œæˆ–ç§°ä¸ºçº¦æŸã€‚ äºæ˜¯å¯å¾—ï¼Œå›¾ç»“æ„å’Œå¢é‡æ–¹ç¨‹çš„ç¨€ç–æ€§å­˜åœ¨æ˜æ˜¾çš„è”ç³»ã€‚ è€ƒè™‘æ›´ä¸ºä¸€èˆ¬çš„æƒ…å†µï¼Œå…¶è·¯æ ‡ç‚¹çš„ä¸ªæ•°æ˜¯è¿œå¤§äºç›¸æœºçš„å§¿æ€çš„ï¼Œå› æ­¤$H$çŸ©é˜µçš„å½¢çŠ¶æ¯”è¾ƒç±»ä¼¼äºç®­å¤´çš„å½¢çŠ¶ã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†åˆ©ç”¨$H$çš„ç‰¹æ®Šç»“æ„æ¥è¿›è¡Œå¢é‡æ–¹ç¨‹ $Hx=g$ çš„æ±‚è§£ã€‚ åŠ é€Ÿçš„æ‰‹æ®µä¸ºSchuræ¶ˆå…ƒï¼Œåˆç§°ä¸ºè¾¹ç¼˜åŒ–(Marglinalization)ã€‚ å¦‚å›¾æ‰€ç¤ºå°†çŸ©é˜µè¿›è¡Œåˆ†å—å¯å¾—ä¸Šè¿°4ä¸ªå—$\\boldsymbol {B,E,E^T,C}$ ã€‚äºæ˜¯æˆ‘ä»¬å¯ä»¥å°†å¢é‡æ–¹ç¨‹ $Hx=g$ è½¬åŒ–æˆä¸ºï¼š \\left[\\begin{array}{ll}\\boldsymbol{B} & \\boldsymbol{E} \\\\ \\boldsymbol{E}^{\\mathrm{T}} & \\boldsymbol{C}\\end{array}\\right]\\left[\\begin{array}{l}\\Delta \\boldsymbol{x}_{\\mathrm{c}} \\\\ \\Delta \\boldsymbol{x}_{p}\\end{array}\\right]=\\left[\\begin{array}{l}\\boldsymbol{v} \\\\ \\boldsymbol{w}\\end{array}\\right] Bï¼ŒCï¼šéƒ½æ˜¯å¯¹è§’å—ï¼Œä½†æ˜¯Bçš„ç»´åº¦å°ï¼ŒCçš„ç»´åº¦å¤§ã€‚ Eå’ŒEè½¬ç½®ï¼šä¸å›¾æ¨¡å‹å¯¹åº”ï¼Œå¯ç¨ å¯†ã€‚ å› ä¸ºå¯¹è§’å—çš„æ±‚æ‹Ÿæ¯”è¾ƒç®€å•ï¼Œäºæ˜¯å°±å°†Cè¿›è¡Œç±»ä¼¼é«˜æ–¯æ¶ˆå…ƒå¤„ç†ï¼Œæ¶ˆå»å³ä¸Šè§’çš„çŸ©é˜µå—å¯å¾—ï¼š \\left[\\begin{array}{cc}\\boldsymbol{I} & -\\boldsymbol{E} \\boldsymbol{C}^{-1} \\\\ \\mathbf{0} & \\boldsymbol{I}\\end{array}\\right]\\left[\\begin{array}{cc}\\boldsymbol{B} & \\boldsymbol{E} \\\\ \\boldsymbol{E}^{\\mathrm{T}} & \\boldsymbol{C}\\end{array}\\right]\\left[\\begin{array}{l}\\Delta \\boldsymbol{x}_{\\mathrm{c}} \\\\ \\Delta \\boldsymbol{x}_{p}\\end{array}\\right]=\\left[\\begin{array}{cc}\\boldsymbol{I} & -\\boldsymbol{E} \\boldsymbol{C}^{-1} \\\\ \\boldsymbol{0} & \\boldsymbol{I}\\end{array}\\right]\\left[\\begin{array}{l}\\boldsymbol{v} \\\\ \\boldsymbol{w}\\end{array}\\right]è¿›ä¸€æ­¥ç®€åŒ–å¯å¾—ï¼š \\left[\\begin{array}{cc}\\boldsymbol{B}-\\boldsymbol{E} \\boldsymbol{C}^{-1} \\boldsymbol{E}^{\\mathrm{T}} & \\mathbf{0} \\\\ \\boldsymbol{E}^{\\mathrm{T}} & \\boldsymbol{C}\\end{array}\\right]\\left[\\begin{array}{c}\\Delta \\boldsymbol{x}_{\\mathrm{c}} \\\\ \\Delta \\boldsymbol{x}_{p}\\end{array}\\right]=\\left[\\begin{array}{c}\\boldsymbol{v}-\\boldsymbol{E} \\boldsymbol{C}^{-1} \\boldsymbol{w} \\\\ \\boldsymbol{w}\\end{array}\\right]æ¶ˆå…ƒä¹‹åï¼Œç¬¬ä¸€è¡Œå’Œ $\\Delta x_p$ æ˜¯æ— å…³çš„ï¼Œå› æ­¤æˆ‘ä»¬ä½¿ç”¨å•ç‹¬å–å‡ºåå¯å¾—å§¿æ€éƒ¨åˆ†çš„å¢é‡æ–¹ç¨‹ä¸ºï¼š \\left[\\boldsymbol{B}-\\boldsymbol{E} \\boldsymbol{C}^{-1} \\boldsymbol{E}^{\\mathrm{T}}\\right] \\Delta \\boldsymbol{x}_{\\mathrm{c}}=\\boldsymbol{v}-\\boldsymbol{E} \\boldsymbol{C}^{-1} \\boldsymbol{w}è¯¥æ–¹ç¨‹çš„æ±‚è§£å¯ä»¥åˆ†æˆä¸¤éƒ¨åˆ†ï¼š æ±‚è§£ä¸ŠåŠéƒ¨åˆ†ï¼Œè§„æ¨¡æ¯”è¾ƒå°ï¼Œäºæ˜¯å¾—åˆ° $\\Delta x_c$ ï¼› ç„¶åå°†å…¶ç»“æœå¸¦å…¥åˆ°ä¸‹åŠéƒ¨åˆ†ï¼Œå¾—å‡º$\\Delta \\boldsymbol{x}_{p}=\\boldsymbol{C}^{-1}\\left(\\boldsymbol{w}-\\boldsymbol{E}^{\\mathrm{T}} \\Delta \\boldsymbol{x}_{\\mathrm{c}}\\right)$ è¿™é‡Œä¸»è¦æ˜¯åˆ©ç”¨äº†å¯¹è§’é˜µ$C$ çš„é€†æ¯”è¾ƒå®¹æ˜“æ±‚è§£çš„ç‰¹ç‚¹ï¼Œè€Œä¸”æ•´ä¸ªçš„è®¡ç®—é‡ä¸»è¦å‡ ç§åœ¨æ±‚è§£ç¬¬ä¸€ä¸ªå¢é‡æ–¹ç¨‹çš„éƒ¨åˆ†ï¼Œå…¶ä¸­æˆ‘ä»¬è®°$S=\\boldsymbol{B}-\\boldsymbol{E} \\boldsymbol{C}^{-1} \\boldsymbol{E}^{\\mathrm{T}}$ ï¼Œå¦‚å›¾æ‰€ç¤ºSçŸ©é˜µä¸ä¸€å®šå…·æœ‰å¾ˆå¼ºçš„ç¨€ç–æ€§äº†ã€‚ ä¸Šè¿°åšæ³•ç§°ä¸ºMarginalizationæˆ–Schuræ¶ˆå…ƒï¼š ä»æ¶ˆå…ƒè§’åº¦æ¥è®²ï¼Œäº¦å¯ä½¿ç”¨Choleskyç­‰å…¶ä»–æ¶ˆå…ƒæ–¹å¼è§£æ­¤ç¨€ç–æ–¹ç¨‹ï¼› ä»Marginalizationè§’åº¦æ¥è®²ï¼Œæ˜¯æˆ‘ä»¬æŠŠæ‰€æœ‰çš„è·¯æ ‡ä¿¡æ¯è¾¹ç¼˜åŒ–åˆ°äº†ç›¸æœºçš„ä¿¡æ¯ä¸­ã€‚ è¿™éƒ¨åˆ†æ¶ˆå…ƒçš„éƒ¨åˆ†åˆå«Schurè¡¥ã€‚ å¯¹è¾¹ç¼˜åŒ–çš„ç†è§£ï¼š æ ¹æ®ä»¥ä¸‹è”åˆåˆ†å¸ƒä¸ªæ¡ä»¶åˆ†å¸ƒã€è¾¹ç¼˜åˆ†å¸ƒçš„å…³ç³»æœ‰ï¼š P\\left(\\boldsymbol{x}_{\\mathrm{c}}, \\boldsymbol{x}_{p}\\right)=P\\left(\\boldsymbol{x}_{\\mathrm{c}} \\mid \\boldsymbol{x}_{p}\\right) P\\left(\\boldsymbol{x}_{p}\\right)ä½¿ç”¨æ¦‚ç‡çš„æ€è·¯ç†è§£å°±æ˜¯ï¼Œé¦–å…ˆæ˜¯å›ºå®š$\\Delta x_p$ æ¥æ±‚è§£$\\Delta x_c$ å¯ä»¥çœ‹ä½œæ˜¯å·²çŸ¥çš„è”åˆå’Œè¾¹ç¼˜ï¼Œæ±‚è§£æ¡ä»¶æ¦‚ç‡$P\\left(\\boldsymbol{x}_{\\mathrm{c}} \\mid \\boldsymbol{x}_{p}\\right)$ ã€è¿™é‡Œæˆ‘çš„ç†è§£ä¸ºæ±‚è§£çš„$\\Delta x_c$çš„è¿‡ç¨‹å¯¹äºçš„æ˜¯æ±‚å¾—æ¦‚ç‡$P\\left(\\boldsymbol{x}_{\\mathrm{c}} \\mid \\boldsymbol{x}_{p}\\right)$ ã€‘ï¼Œä¹‹ååè¿‡æ¥åœ¨æ±‚è§£$P\\left(\\boldsymbol{x}_{p}\\right)$ã€å¯¹äºçš„æ±‚è§£$ \\Delta x_p$çš„è¿‡ç¨‹ã€‘ ã€‚ å¯¹äºEKFæ¥è®²ï¼Œå…¶å‰é¢çš„æ‰€æœ‰çš„è¿›è¡Œä¹Ÿæ˜¯è¢«è¾¹ç¼˜åŒ–åˆ°æœ€è¿‘çš„ä¸€ä¸ªçŠ¶æ€ä¸Šé¢ï¼Œå³æˆ‘ä»¬æ ¹æ®å·²çŸ¥æ¥è®¡ç®— $P(\\boldsymbol x_k|\\boldsymbol x_{k-1},\\boldsymbol x_{k-2},â€¦,\\boldsymbol z_{k-1},â€¦)$ ã€‚ è¿™ä¸ªè¿‡ç¨‹ä¹Ÿå«ä½œé«˜æ–¯æ¨è®ºã€‚ é€šå¸¸æƒ…å†µä¸‹çš„Margæ“ä½œä¼šç»™HçŸ©é˜µå¸¦æ¥å¡«å……ï¼ˆfill-inï¼‰ï¼Œä½¿å…¶ä¸å†å…·æœ‰ç¨€ç–ç»“æ„ï¼› æ‰€ä»¥ï¼Œè¦ä¹ˆåˆ»æ„é€‰æ‹©ç‰¹å®šçš„margç­–ç•¥ï¼Œè¦ä¹ˆä»…ä½¿ç”¨ç¨ å¯†çš„Hæ±‚è§£çº¿æ€§æ–¹ç¨‹ï¼Œä½†è¿™æ ·æ•ˆç‡ä¼šé™ä½ã€‚ è¿™é‡Œæ¯”è¾ƒéš¾ä»¥ç†è§£ï¼Œä¹‹åçœ‹åˆ°ç›¸å…³çš„æ•™ç¨‹åœ¨ä»”ç»†æ€è€ƒã€‚ ä¹‹å‰åˆ†æäº†Hç¨€ç–æ€§çš„ç‰©ç†æ„ä¹‰ï¼Œç°åœ¨æˆ‘æ¥åˆ†æä»¥ä¸‹è¿™ä¸ªSçŸ©é˜µçš„ç‰©ç†æ„ä¹‰ã€‚ è¿™é‡ŒSçŸ©é˜µçš„ç»´åº¦å’Œç›¸æœºçš„ç»´åº¦ç›¸åŒï¼Œæ¯ä¸ªè¡Œåˆ—éƒ½å¯¹åº”ä¸€ä¸ªç›¸æœºã€‚äºæ˜¯æœ‰å¯¹äºSçŸ©é˜µçš„éé›¶é¡¹ä»£è¡¨æ˜¯ä¸¤ä¸ªç›¸æœºå˜é‡ä¹‹é—´å­˜åœ¨å…±åŒè§‚æµ‹çš„è·¯æ ‡ç‚¹ï¼Œæœ‰æ—¶ç§°ä¸ºå…±è§†ã€‚ é²æ£’æ ¸å‡½æ•°ä¸»è¦è€ƒå¯Ÿçš„æ˜¯ä¼˜åŒ–çš„ç›®æ ‡å‡½æ•°ï¼Œå½“é¢å¯¹è¯¯åŒ¹é…çš„é¡¹æ—¶ï¼Œæ­¤é¡¹æœ¬æ¥å°±æ˜¯é”™çš„ï¼Œé€ æˆäº†å¾ˆå¤§çš„è¯¯å·®ï¼Œåœ¨è¿›è¡Œæ¢¯åº¦ä¼˜åŒ–æ—¶ï¼Œå…¶ä¼šå°†æœ¬æ¥æ­£ç¡®çš„é¡¹ä¹Ÿæ”¹é”™äº†ã€‚ å‡ºç°ä¸Šè¿°é—®é¢˜çš„ä¸»è¦åŸå› ä¸ºï¼šå½“è¯¯å·®å¾ˆå¤§æ—¶ï¼Œå…¶äºŒèŒƒæ•°çš„å¢é•¿å¾ˆå¿«ã€‚äºæ˜¯ä¸»è¦çš„è§£å†³åŠæ³•å°±æ˜¯å°†è¯¯å·®çš„äºŒèŒƒæ•°æ¢æˆä¸€ä¸ªå¢é•¿æ²¡é‚£ä¹ˆå¿«çš„å‡½æ•°ï¼ŒåŒæ—¶ä¹Ÿè¦ä¿è¯è‡ªå·±çš„å¯å¯¼æ€§å’Œå…‰æ»‘æ€§ï¼Œä½¿å¾—æ•´ä½“çš„ä¼˜åŒ–æ•ˆæœæ›´åŠ ç¨³å¥ï¼Œè¿™æ ·çš„æ ¸å‡½æ•°å«åšRobust Kernelã€‚ Robust Kernelé²æ£’æ ¸å‡½æ•°çš„ç§ç±»æœ‰å¾ˆå¤šï¼Œå…¶ä¸­æœ€å¸¸ç”¨çš„å½“å±Huberæ ¸å‡½æ•°ã€‚ H(e)=\\left\\{\\begin{array}{ll}\\frac{1}{2} e^{2} & \\text { å½“ }|e| \\leqslant \\delta, \\\\ \\delta\\left(|e|-\\frac{1}{2} \\delta\\right) & \\text { å…¶ä»– }\\end{array}\\right.å½“è¯¯å·®çš„å¢é•¿è¾¾åˆ°ä¸€å®šçš„é˜ˆå€¼åï¼Œå…¶å¢é•¿æ›²çº¿ç”±åŸæ¥çš„äºŒæ¬¡å˜æˆäº†ä¸€æ¬¡ï¼Œç›¸å½“äºé™åˆ¶äº†æœ€å¤§çš„æ¢¯åº¦å€¼ï¼ŒåŒæ—¶ä¹Ÿä¿è¯äº†åŸæ¥çš„å…‰æ»‘æ€§ï¼Œæ–¹ä¾¿æ±‚å¯¼ã€‚ è¿˜æœ‰å¾ˆå¤šæ ¸å‡½æ•°ï¼Œå¦‚Cauchyæ ¸å‡½æ•°ï¼ŒYukeyæ ¸å‡½æ•°ç­‰ç­‰ã€‚ è¿™é‡Œæ—¶é—´éƒ¨åˆ†çš„ä»£ç æ¯”è¾ƒå¤šï¼Œä¹‹åä¼šå•ç‹¬å‡ºä¸€è®²æ¥ä»‹ç»ä½¿ç”¨Cereså’ŒG2Oæ¥è§£å†³BAé—®é¢˜ã€‚","link":"/2022/06/26/SLAM/ch9-%E5%90%8E%E7%AB%AF-%E7%AC%AC%E4%BA%8C%E9%83%A8%E5%88%86-BA%E6%96%B9%E6%B3%95/"},{"title":"Ch10 åç«¯ ç¬¬ä¸‰éƒ¨åˆ† ä½ç½®å›¾å’Œæ»‘åŠ¨çª—å£","text":"hljs.initHighlightingOnLoad(); ä¸Šä¸€è®²ä¸»è¦ä»‹ç»BAå›¾ä¼˜åŒ–ç®—æ³•ï¼Œä½†æ˜¯å¯ä»¥ç²¾ç¡®åœ°ä¼˜åŒ–å‡ºæ¯ä¸ªç›¸æœºçš„ä½å§¿å’Œç‰¹å¾ç‚¹çš„ä½ç½®ã€‚ä¸è¿‡åœ¨æ›´å¤§çš„åœºæ™¯ä¸­å…¶è®¡ç®—çš„æ•ˆç‡ä¼šå¤§å¤§çš„é™ä½ã€‚å¯¼è‡´è®¡ç®—é‡è¶Šæ¥è¶Šå¤§ï¼Œä»¥è‡³äºæ— æ³•å®ç°å®æ—¶åŒ–çš„è¦æ±‚ï¼Œæœ¬æ–‡ä¸»è¦ä»‹ç»ä¸¤ç§å¸¸ç”¨çš„æ–¹æ³•ï¼Œæ»‘åŠ¨çª—å£æ³•å’Œä½å§¿å›¾æ³•ã€‚ æ»‘åŠ¨çª—å£å®é™…ç¯å¢ƒä¸‹çš„BAç»“æ„å¸¦æœ‰ç›¸æœºä½å§¿å’Œç©ºé—´ç‚¹çš„å›¾ä¼˜åŒ–ç§°ä¸ºBAé—®é¢˜ï¼Œå®ƒä»¬èƒ½å¤Ÿæœ‰æ•ˆåœ°å¤§è§„æ¨¡çš„å®šä½å’Œå»ºå›¾ã€‚åœ¨SFMé‡Œæ˜¯ååˆ†çš„é‡è¦çš„ï¼Œä½†æ˜¯å¯¹äºSLAMé‡Œï¼Œæˆ‘ä»¬å¾€å¾€æ˜¯éœ€è¦æ§åˆ¶BAçš„è§„æ¨¡ï¼Œå¦åˆ™æ— æ³•ä¿è¯å®æ—¶æ€§ã€‚å› æ­¤åœ¨SFMé‡Œå’Œæœ‰æ•ˆçš„æ–¹æ³•ï¼Œåœ¨SLAMé‡Œä¸è§å¾—æœ‰æ•ˆã€‚ æ§åˆ¶è§„æ¨¡çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚åœ¨è¿ç»­çš„è§†é¢‘é‡Œæå–å‡ºä¸€éƒ¨åˆ†ä½œä¸ºå…³é”®å¸§ï¼Œä»…ä»…æ„é€ å…³é”®å¸§å’Œè·¯æ ‡ç‚¹ä¹‹é—´çš„BAï¼Œäºæ˜¯éå…³é”®å¸§åªç”¨äºå®šä½ï¼Œå¯¹å»ºå›¾åˆ™æ²¡æœ‰å½±å“ã€‚éšç€æ—¶é—´çš„æ¨ç§»ï¼Œå…³é”®å¸§é€æ¸çš„å¢åŠ ï¼Œåœ°å›¾çš„è§„æ¨¡æ‰©å¼ ï¼ŒBAç®—æ³•çš„è®¡ç®—æ•ˆç‡ä¼šå¤§å¤§çš„é™ä½ã€‚å› æ­¤ï¼Œè§£å†³çš„ä¸»è¦çš„é—®é¢˜å˜æˆäº†å¦‚ä½•æ›´å¥½çš„æ§åˆ¶è§„æ¨¡ã€‚ æœ€ç®€å•çš„æ€è·¯ï¼Œä»…ä¿ç•™ç¦»å½“å‰æ—¶åˆ»æœ€è¿‘çš„Nä¸ªå…³é”®ç‚¹ï¼Œå»æ‰æ›´æ—©æ—¶åˆ»çš„å…³é”®ç‚¹ï¼Œè¯¥æ–¹æ³•å°±æ˜¯æ»‘åŠ¨çª—å£æ³•çš„é›å½¢ã€‚ è¿™é‡Œä¸ä¸€å®šéè¦å»æ—¶é—´ä¸Šé è¿‘ï¼Œä¹Ÿå¯è€ƒè™‘åœ¨åœ¨æ—¶é—´ä¸Šé è¿‘ï¼Œå¹¶ä¸”ç©ºé—´ä¸Šå¯ä»¥å±•å¼€çš„å…³é”®å¸§ï¼Œé˜²æ­¢ç›¸æœºåœæ­¢è¿åŠ¨åå‡ºç°é€€åŒ–çš„ç°è±¡ã€‚ è¿›ä¸€æ­¥è€ƒè™‘ï¼Œå¦‚ORB-SLAM2ä¸Šé¢çš„ï¼Œå®šä¹‰äº†å…±è§†å›¾çš„ç»“æ„ï¼Œä»…è€ƒè™‘å’Œå½“å‰çš„è§†å›¾æœ‰20ä¸ªä»¥ä¸Šå…±è§†è·¯æ ‡çš„å…³é”®å¸§ï¼Œå…¶ä½™å›ºå®šä¸å˜ï¼Œè¿™æ ·åœ¨å…±è§†å…³ç³»æ„é€ å‡†ç¡®æ—¶ï¼Œå¯ä»¥æ›´é•¿æ—¶é—´ä¿è¯æœ€ä¼˜ã€‚ å…±è§†å›¾ï¼šå’Œå½“å‰ç›¸æœºå­˜åœ¨å…±åŒè§‚æµ‹çš„å…³é”®å¸§ç»„æˆçš„å›¾ã€‚ ä¸‹é¢è¯¦ç»†ä»‹ç»å…³äºæ»‘åŠ¨çª—å£æ³•çš„ä¸»è¦å®ç°ã€‚ æ»‘åŠ¨çª—å£æ³•ç°åœ¨è€ƒè™‘ä¸€ä¸ªæ»‘åŠ¨çª—å£ï¼Œå‡è®¾çª—å£å†…æœ‰Nä¸ªå…³é”®å¸§ï¼Œäºæ˜¯ä½å§¿å¯ä»¥è¡¨ç¤ºä¸ºï¼š$\\boldsymbol x_1,\\boldsymbol x_2,\\cdots,\\boldsymbol x_N$ ,è¿™é‡Œå‡è®¾å…¶åœ¨å‘é‡ç©ºé—´ï¼Œä½¿ç”¨æä»£æ•°æ¥è¡¨è¾¾ã€‚ è¿™é‡Œæˆ‘ä»¬ä¸»è¦å…³æ³¨çš„æ˜¯å…³é”®å¸§çš„ä½ç½®å’Œä¸ç¡®å®šåº¦ï¼Œå…¶å¯¹åº”çš„æ˜¯é«˜æ–¯åˆ†å¸ƒçš„å‡å€¼å’Œåæ–¹å·®çŸ©é˜µã€‚ åŒæ—¶è¿™å‡ ä¸ªå…³é”®å¸§å’Œæ»‘åŠ¨çª—å£çš„è·¯æ ‡ç‚¹$\\boldsymbol y_1,\\boldsymbol y_2,\\cdots,\\boldsymbol y_M$ ä¸€èµ·æ„æˆäº†ä¸€ä¸ªå±€éƒ¨åœ°å›¾ã€‚è¿™é‡Œå¯ä»¥ä½¿ç”¨ä¸Šä¸€ç« çš„BAæ–¹æ³•æ¥å¤„ç†ã€‚ä¸»è¦åŒ…æ‹¬æ„å»ºå›¾ä¼˜åŒ–æ¨¡å‹ã€æ„å»ºHessiançŸ©é˜µã€è¾¹ç¼˜åŒ–è·¯æ ‡ç‚¹æ¥åŠ é€Ÿï¼š \\left[\\boldsymbol{x}_{1}, \\ldots, \\boldsymbol{x}_{N}\\right]^{\\mathrm{T}} \\sim N\\left(\\left[\\boldsymbol{\\mu}_{1}, \\ldots, \\boldsymbol{\\mu}_{N}\\right]^{\\mathrm{T}}, \\boldsymbol{\\Sigma}\\right)å…¶ä¸­ï¼Œ$\\mu_k$ä»£è¡¨ç¬¬kä¸ªå…³é”®å¸§ä½å§¿çš„å‡å€¼ï¼Œ$\\Sigma$ä¸ºæ‰€æœ‰å…³é”®å¸§çš„åæ–¹å·®çŸ©é˜µã€‚ è¿™é‡Œçš„å‡å€¼éƒ¨åˆ†ä¸ºBAä¼˜åŒ–ä¹‹åçš„ç»“æœï¼Œè€Œåæ–¹å·®ä¸ºæ•´ä¸ªBAçš„HçŸ©é˜µè¿›è¡Œè¾¹ç¼˜åŒ–çš„ç»“æœï¼Œå³SçŸ©é˜µã€‚ åœ¨æ»‘åŠ¨çª—å£ä¸­ï¼Œå½“çª—å£ç»“æ„å‘ç”Ÿæ”¹å˜ï¼Œè¿™äº›çŠ¶æ€å˜é‡åº”è¯¥å¦‚ä½•å˜åŒ–ï¼Ÿè¿™ä»¶äº‹æƒ…å¯ä»¥åˆ†æˆä¸¤éƒ¨åˆ†è®¨è®ºï¼š æˆ‘ä»¬éœ€è¦åœ¨çª—å£ä¸­æ–°å¢ä¸€ä¸ªå…³é”®å¸§ï¼Œä»¥åŠå®ƒè§‚æµ‹åˆ°çš„è·¯æ ‡ç‚¹ã€‚ æˆ‘ä»¬éœ€è¦æŠŠçª—å£ä¸­ä¸€ä¸ªæ—§çš„å…³é”®å¸§åˆ é™¤ï¼Œä¹Ÿå¯èƒ½åˆ é™¤å®ƒè§‚æµ‹åˆ°çš„è·¯æ ‡ç‚¹ã€‚ æ–°å¢ä¸€ä¸ªå…³é”®å¸§å’Œè·¯æ ‡ç‚¹è€ƒè™‘åœ¨ä¸Šä¸ªæ—¶åˆ»ï¼Œæ»‘åŠ¨çª—å£å·²ç»å»ºç«‹äº†Nä¸ªå…³é”®å¸§ï¼Œæˆ‘ä»¬ä¹Ÿå·²çŸ¥é“å®ƒä»¬æœä»æŸä¸ªé«˜æ–¯åˆ†å¸ƒ,å…¶å‡å€¼å’Œæ–¹å·®å¦‚å‰æ‰€è¿°ã€‚æ­¤æ—¶ï¼Œæ–°æ¥äº†ä¸€ä¸ªå…³é”®å¸§$\\boldsymbol x_N$ï¼Œé‚£ä¹ˆæ•´ä¸ªé—®é¢˜ä¸­çš„å˜é‡å˜ä¸º Nï¼‹1 ä¸ªå…³é”®å¸§å’Œæ›´å¤šè·¯æ ‡ç‚¹çš„é›†åˆã€‚è¿™å®é™…ä¸Šä»æ˜¯å¹³å‡¡çš„ï¼Œæˆ‘ä»¬åªéœ€æŒ‰ç…§æ­£å¸¸çš„BAæµç¨‹å¤„ç†å³å¯ã€‚å¯¹æ‰€æœ‰ç‚¹è¿›è¡Œè¾¹ç¼˜åŒ–æ—¶ï¼Œå³å¾—åˆ°è¿™Nï¼‹1ä¸ªå…³é”®å¸§çš„é«˜æ–¯åˆ†å¸ƒå‚æ•°ã€‚ åˆ é™¤ä¸€ä¸ªå°±çš„å…³é”®å¸§åœ¨è€ƒè™‘åˆ é™¤æ—§çš„å…³é”®å¸§æ—¶ï¼Œå°±ä¼šå‡ºç°ä¸€ä¸ªç†è®ºé—®é¢˜ï¼Œå°±æ˜¯è¦åˆ é™¤çš„å…³é”®å¸§å¹¶ä¸æ˜¯å­¤ç«‹çš„ï¼Œå…¶ä¼šå’Œå…¶ä»–å…³é”®å¸§ä¸€èµ·è§‚å¯Ÿåˆ°ç›¸åŒçš„è·¯æ ‡ç‚¹ã€‚å³å…¶è¾¹ç¼˜åŒ–åŠ¿å¿…ä¼šé€ æˆçŸ©é˜µä¸åœ¨ç¨€ç–ã€‚ åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å‡è®¾çœ‹åˆ°äº†è·¯æ ‡ç‚¹$\\boldsymbol y_1$è‡³$\\boldsymbol y_4$ï¼Œäºæ˜¯ï¼Œåœ¨å¤„ç†ä¹‹å‰ï¼ŒBAé—®é¢˜çš„HessiançŸ©é˜µåº”è¯¥åƒå›¾10-2ä¸­çš„å·¦å›¾ä¸€æ ·,åœ¨$\\boldsymbol x_1$è¡Œçš„$\\boldsymbol y_1$åˆ°$\\boldsymbol y_4$åˆ—å­˜åœ¨ç€éé›¶å—è¡¨ç¤º$\\boldsymbol x_1$çœ‹åˆ°äº†å®ƒä»¬ã€‚ è€ƒè™‘è¾¹ç¼˜åŒ–$\\boldsymbol x_1$ï¼Œé‚£ä¹ˆSchuræ¶ˆå…ƒè¿‡ç¨‹ç›¸å½“äºé€šè¿‡çŸ©é˜µè¡Œå’Œåˆ—æ“ä½œæ¶ˆå»éå¯¹è§’çº¿å¤„å‡ ä¸ªéé›¶çŸ©é˜µå—ï¼Œæ˜¾ç„¶è¿™å°†å¯¼è‡´å³ä¸‹è§’çš„è·¯æ ‡ç‚¹çŸ©é˜µå—ä¸å†æ˜¯éå¯¹è§’çŸ©é˜µï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºè¾¹ç¼˜åŒ–ä¸­çš„å¡«å…¥(Fill-in) ã€‚ ä¹‹å‰ch9æ˜¯è€ƒè™‘åˆ°å…³é”®å¸§çš„æ•°é‡ä¼šæ¯”è·¯æ ‡ç‚¹å°å¾ˆå¤šï¼Œäºæ˜¯å°†è·¯æ ‡ç‚¹è¾¹ç¼˜åŒ–äº†å…ˆæ±‚è§£å‡ºæˆ‘ä»¬çš„ä½å§¿ï¼Œæ­¤æ—¶çš„å¡«å…¥å‘ç”Ÿåœ¨å·¦ä¸Šè§’çš„ä½å­çŸ©é˜µä¸Šã€‚ ä½†æ˜¯ï¼Œåˆ é™¤å…³é”®å¸§æ—¶ï¼Œæˆ‘ä»¬ä¼˜åŒ–çš„æ—¶çª—å£ï¼Œäºæ˜¯å°†å…³é”®å¸§è¿›è¡Œè¾¹ç¼˜åŒ–ï¼Œè¿™æ ·å¯¹å³ä¸‹è§’çš„è·¯æ ‡ç‚¹éƒ¨åˆ†é€ æˆç ´åã€‚ä¹‹å‰ç¨€ç–åŠ é€Ÿçš„æ–¹æ³•æ— æ³•ç»§ç»­ä½¿ç”¨ï¼Œå› æ­¤åœ¨æ—©æœŸçš„EKFåç«¯æ—¶æ— æ³•å¤„ç†å¤§è§„æ¨¡çš„æ»‘åŠ¨çª—å£çš„ã€‚ ä¸è¿‡ï¼Œå¦‚æœæˆ‘ä»¬å¯¹è¾¹ç¼˜åŒ–çš„è¿‡ç¨‹è¿›è¡Œä¸€äº›æ”¹é€ ï¼Œä¹Ÿå¯ä»¥ä¿æŒæ»‘åŠ¨çª—å£BAçš„ç¨€ç–æ€§ã€‚ ä¾‹å¦‚ï¼Œåœ¨è¾¹ç¼˜åŒ–æŸä¸ªæ—§çš„å…³é”®å¸§æ—¶ï¼ŒåŒæ—¶è¾¹ç¼˜åŒ–å®ƒè§‚æµ‹åˆ°çš„è·¯æ ‡ç‚¹ã€‚è¿™æ ·ï¼Œè·¯æ ‡ç‚¹çš„ä¿¡æ¯å°±ä¼šè½¬æ¢æˆå‰©ä¸‹é‚£äº›å…³é”®å¸§ä¹‹é—´çš„å…±è§†ä¿¡æ¯ï¼Œä»è€Œä¿æŒå³ä¸‹è§’éƒ¨åˆ†çš„å¯¹è§’å—ç»“æ„ã€‚ ä¾‹å¦‚ï¼Œåœ¨OKVIS ä¸­ï¼Œæˆ‘ä»¬ä¼šåˆ¤æ–­è¦è¾¹ç¼˜åŒ–çš„é‚£ä¸ªå…³é”®å¸§ï¼Œå®ƒçœ‹åˆ°çš„è·¯æ ‡ç‚¹æ˜¯å¦åœ¨æœ€æ–°çš„å…³é”®å¸§ä¸­ä»èƒ½çœ‹åˆ°ã€‚ å¦‚æœä¸èƒ½ï¼Œå°±ç›´æ¥è¾¹ç¼˜åŒ–è¿™ä¸ªè·¯æ ‡ç‚¹ï¼› å¦‚æœèƒ½ï¼Œå°±ä¸¢å¼ƒè¢«è¾¹ç¼˜åŒ–å…³é”®å¸§å¯¹è¿™ä¸ªè·¯æ ‡ç‚¹çš„è§‚æµ‹ï¼Œä»è€Œä¿æŒBAçš„ç¨€ç–æ€§ã€‚ SWFä¸­è¾¹ç¼˜åŒ–çš„ç›´è§‚è§£é‡Šè¾¹ç¼˜åŒ–åœ¨æ¦‚ç‡ä¸Šçš„æ„ä¹‰å°±æ˜¯æŒ‡æ¡ä»¶æ¦‚ç‡ã€‚ å½“æˆ‘ä»¬è¾¹ç¼˜åŒ–æŸä¸ªå…³é”®å¸§ï¼Œå³â€œä¿æŒè¿™ä¸ªå…³é”®å¸§å½“å‰çš„ä¼°è®¡å€¼ï¼Œæ±‚å…¶ä»–çŠ¶æ€å˜é‡ä»¥è¿™ä¸ªå…³é”®å¸§ä¸ºæ¡ä»¶çš„æ¡ä»¶æ¦‚ç‡â€ã€‚ å½“æŸä¸ªå…³é”®å¸§è¢«è¾¹ç¼˜åŒ–ï¼Œå®ƒè§‚æµ‹åˆ°çš„è·¯æ ‡ç‚¹å°±ä¼šäº§ç”Ÿä¸€ä¸ªâ€œè¿™äº›è·¯æ ‡åº”è¯¥åœ¨å“ªé‡Œâ€çš„å…ˆéªŒä¿¡æ¯ï¼Œä»è€Œå½±å“å…¶ä½™éƒ¨åˆ†çš„ä¼°è®¡å€¼ã€‚å¦‚æœå†è¾¹ç¼˜åŒ–è¿™äº›è·¯æ ‡ç‚¹ï¼Œé‚£ä¹ˆå®ƒä»¬çš„è§‚æµ‹è€…å°†å¾—åˆ°ä¸€ä¸ªâ€œè§‚æµ‹å®ƒä»¬çš„å…³é”®å¸§åº”è¯¥åœ¨å“ªé‡Œâ€çš„å…ˆéªŒä¿¡æ¯ã€‚ ä»æ•°å­¦çš„è§’åº¦ä¸Šæ¥çœ‹ï¼Œå…¶è¾¹ç¼˜åŒ–æŸäº›å¸§çš„è¿‡ç¨‹ï¼Œå…¶å®å¯ä»¥çœ‹æˆæ˜¯ä»è”åˆåˆ†å¸ƒåˆ°æ¡ä»¶åˆ†å¸ƒã€‚ p\\left(\\boldsymbol{x}_{1}, \\ldots \\boldsymbol{x}_{4}, \\boldsymbol{y}_{1}, \\ldots \\boldsymbol{y}_{6}\\right)=p\\left(\\boldsymbol{x}_{2}, \\ldots, \\boldsymbol{x}_{4}, \\boldsymbol{y}_{1}, \\ldots \\boldsymbol{y}_{6} \\mid \\boldsymbol{x}_{1}\\right) \\underbrace{p\\left(\\boldsymbol{x}_{1}\\right)}_{\\text {èˆå» }} .ç„¶åèˆå»è¢«è¾¹ç¼˜åŒ–éƒ¨åˆ†çš„ä¿¡æ¯ã€‚åœ¨å˜é‡è¢«è¾¹ç¼˜åŒ–ä¹‹åï¼Œæˆ‘ä»¬åœ¨å·¥ç¨‹ä¸­å°±ä¸åº”å†ä½¿ç”¨å®ƒã€‚æ‰€ä»¥æ»‘åŠ¨çª—å£æ³•æ¯”è¾ƒé€‚åˆVOç³»ç»Ÿï¼Œè€Œä¸é€‚åˆå¤§è§„æ¨¡å»ºå›¾çš„ç³»ç»Ÿã€‚ ä½å§¿å›¾ä½å§¿å›¾çš„ä¸»è¦æ„ä¹‰æ ¹æ®ä¹‹å‰çš„è®¨è®ºå¯å¾—ï¼Œç‰¹å¾ç‚¹åœ¨ä¼˜åŒ–çš„é—®é¢˜ä¸Šå æ®äº†ç»å¤§å¤šæ•°çš„é—®é¢˜ï¼Œç»è¿‡è‹¥å¹²æ¬¡è§‚æµ‹æ—¶å€™ï¼Œæ”¶æ•›çš„ç‚¹å˜åŒ–å¾ˆå°ï¼Œè€Œå‘æ•£çš„ç‚¹å·²ç»è¢«å‰”é™¤äº†ï¼Œäºæ˜¯å¯¹æ”¶æ•›çš„ç‚¹å·²çŸ¥è¿›è¡Œä¼˜åŒ–ä¼¼ä¹æœ‰ç‚¹è´¹åŠ›ä¸è®¨å¥½çš„æ„Ÿè§‰ã€‚ å› æ­¤æˆ‘ä»¬å€¾å‘äºå°†ç‰¹å¾ç‚¹è¿›è¡Œå›ºå®šï¼Œä»…ä»…æ¥ä¼˜åŒ–ä½å§¿ï¼Œå°†ç‰¹å¼ ç‚¹çœ‹ä½œæ˜¯ä½å§¿ä¹‹é—´çš„çº¦æŸã€‚ è¿™æ ·çš„æ€è·¯å¯ä»¥åº”ç”¨åœ¨å¤šä¼ æ„Ÿå™¨èåˆçš„é—®é¢˜ä¸Šï¼Œæ¯”å¦‚è½®é€Ÿä¼ æ„Ÿå™¨å’ŒGPSçš„æ•°æ®å°±å¯ä»¥å°†å…¶ä¹Ÿåƒç‰¹å¾ç‚¹é‚£æ ·ï¼Œä»…ä»…å°†å…¶ä½œä¸ºçº¦æŸè€ƒè™‘ã€‚ è¿™é‡Œï¼Œå¯¹äºBAæ¥è¯´ï¼Œå…¶ç‰¹å¾ç‚¹çš„æ•°é‡è¿œè¿œå¤§äºä½å§¿èŠ‚ç‚¹ã€‚ä¸€ä¸ªå…³é”®å¸§å¾€å¾€å…³è”äº†ä¸Šç™¾ä¸ªå…³é”®ç‚¹ï¼Œå°±ç®—åˆ©ç”¨ç¨€ç–æ€§ï¼Œå…¶æ±‚è§£çš„è§„æ¨¡ä¹Ÿè¿‡äºå¤§ï¼Œå•é CPUä¹Ÿå¾ˆéš¾è®¡ç®—ï¼Œäºæ˜¯SLAMçš„åº”ç”¨åœºæ™¯å°±è¢«å¤§å¤§çš„é™åˆ¶ä½äº†ã€‚ä¸»è¦çš„è§£å†³æ–¹æ³•æœ‰ä¸¤ç§ï¼š ä¸€ç§æ˜¯ä½¿ç”¨æ»‘åŠ¨çª—å£ï¼Œèˆå»ä¸€äº›å†å²æ•°æ®ï¼› å¦ä¸€ç§æ˜¯ä½å§¿å›¾ï¼Œèˆå»å¯¹è·¯æ ‡çš„ä¼˜åŒ–ã€‚ ä½å§¿å›¾çš„ä¼˜åŒ–ç°åœ¨è¿›è¡Œä½å§¿å›¾ä¼˜åŒ–ï¼Œé¦–å…ˆè¦æ˜ç¡®çš„æ˜¯ä½å§¿å›¾çš„èŠ‚ç‚¹å’Œè¾¹æ˜¯ä»€ä¹ˆã€‚ èŠ‚ç‚¹ï¼šè¡¨ç¤ºç›¸æœºçš„ä½å§¿ï¼Œä»¥ $\\boldsymbol T_1,\\boldsymbol T_2,\\cdots,\\boldsymbol T_n$ æ¥è¡¨ç¤ºã€‚ è¾¹ï¼šä¸¤ä¸ªä½å§¿èŠ‚ç‚¹ä¹‹é—´ç›¸å¯¹çš„ä½å§¿èŠ‚ç‚¹ä¼°è®¡ã€‚ è¿™é‡Œæˆ‘ä»¬å‡è®¾æ¥ä¼°è®¡ $\\boldsymbol T_i$ å’Œ $\\boldsymbol T_j$ ä¹‹å‰çš„è¿åŠ¨ä¸º$\\boldsymbol \\Delta T_{ij}$ ,å…¶å¯ä»¥æœ‰è‹¥å¹²ç§è¡¨è¾¾çš„æ–¹å¼ï¼Œä¸»è¦çš„æ–¹å¼æœ‰ä»¥ä¸‹ä¸¤ç§ï¼š \\Delta \\boldsymbol{\\xi}_{i j}= \\boldsymbol{\\xi}_{i}^{-1} \\circ \\boldsymbol{\\xi}_{j}=\\ln \\left(\\exp \\left(\\left(-\\boldsymbol{\\xi}_{i}\\right)^{\\wedge}\\right) \\exp \\left(\\boldsymbol{\\xi}_{j}^{\\wedge}\\right)\\right)^{\\vee} \\\\ \\boldsymbol{\\Delta} \\boldsymbol{T}_{i j}=\\boldsymbol{T}_{i}^{-1} \\boldsymbol{T}_{j} \\\\æŒ‰ç…§å›¾ä¼˜åŒ–çš„æ€è·¯ä¸Šè¿°çš„ç­‰å¼ä¸€èˆ¬æ˜¯ä¸ä¼šå¾ˆå¥½çš„æ»¡è¶³ä¸Šè¿°çš„æ’ç­‰çš„å…³ç³»çš„ï¼Œæˆ‘ä»¬ä¼˜åŒ–çš„ç›®æ ‡æ˜¯æƒ³è¦è®©å…¶å°½å¯èƒ½åœ°ç›¸ç­‰ã€‚ è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨æœ€å°äºŒä¹˜è¯¯å·®ï¼Œç„¶åè®¨è®ºè¯¯å·®å…³äºä¼˜åŒ–å˜é‡çš„å¯¼æ•°ï¼Œäºæ˜¯æ„å»º$e_{ij}$ çš„è¡¨è¾¾å¼å¦‚ä¸‹ï¼š \\begin{aligned} \\boldsymbol{e}_{i j}&= \\ln \\left(\\Delta \\boldsymbol{T}_{i j}^{-1} \\boldsymbol{T}_{i}^{-1} \\boldsymbol{T}_{j}\\right)^{\\vee} \\\\ &=\\ln \\left(\\exp \\left(\\left(-\\boldsymbol{\\xi}_{i j}\\right)^{\\wedge}\\right) \\exp \\left(\\left(-\\boldsymbol{\\xi}_{i}\\right)^{\\wedge}\\right) \\exp \\left(\\boldsymbol{\\xi}_{j}^{\\wedge}\\right)\\right)^{\\vee} . \\end{aligned}æ³¨æ„åœ¨ä½å§¿å›¾ä¸­ï¼Œä¼˜åŒ–çš„å˜é‡æœ‰ä¸¤ä¸ª$\\boldsymbol \\xi_i$ å’Œ $\\boldsymbol \\xi_j$ ï¼Œæ˜¯ä¸ªäºŒå…ƒå‡½æ•°æ±‚å¯¼ï¼Œé¦–å…ˆæ˜¯ä¸€èµ·ç»™$\\boldsymbol \\xi_i$ å’Œ $\\boldsymbol \\xi_j$ ä¸€ä¸ªå·¦æ‰°åŠ¨ï¼Œå¯å¾—ï¼š \\hat{\\boldsymbol{e}}_{i j}=\\ln \\left(\\boldsymbol{T}_{i j}^{-1} \\boldsymbol{T}_{i}^{-1} \\exp \\left(\\left(-\\boldsymbol{\\delta} \\boldsymbol{\\xi}_{i}\\right)^{\\wedge}\\right) \\exp \\left(\\delta \\boldsymbol{\\xi}_{j}^{\\wedge}\\right) \\boldsymbol{T}_{j}\\right)^{\\vee}è¿™é‡Œæ‰°åŠ¨é¡¹è¢«ç§»åŠ¨åˆ°å¼å­çš„ä¸­é—´ï¼Œä¸ºäº†åˆ©ç”¨ä¸ŠBCHè¿‘ä¼¼ï¼Œéœ€è¦å°†å…¶ä»¥åˆ°å¼å­çš„å·¦ç«¯æˆ–è€…å³ç«¯ï¼Œå›é¡¾ç¬¬å››è®²çš„ä¼´éšæ€§è´¨å¯å¾—ï¼š \\exp \\left((\\operatorname{Ad}(\\boldsymbol{T}) \\boldsymbol{\\xi})^{\\wedge}\\right)=\\boldsymbol{T} \\exp \\left(\\boldsymbol{\\xi}^{\\wedge}\\right) \\boldsymbol{T}^{-1}\\\\\\exp \\left(\\boldsymbol{\\xi}^{\\wedge}\\right) \\boldsymbol{T}=\\boldsymbol{T} \\exp \\left(\\left(\\operatorname{Ad}\\left(\\boldsymbol{T}^{-1}\\right) \\boldsymbol{\\xi}\\right)^{\\wedge}\\right)è¿™é‡Œï¼Œé€šè¿‡å¼•å…¥æ‰°åŠ¨é¡¹ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå¥½çš„å°†æ‰°åŠ¨é¡¹å‘ç€å·¦å³ä¾§è¿›è¡Œäº¤æ¢ï¼Œäºæ˜¯ å°†å…¶å¸¦å…¥åˆ°è¯¯å·®è¡¨è¾¾å¼å¯å¾—ï¼š \\begin{aligned} \\hat{e}_{i j} &=\\ln \\left(\\boldsymbol{T}_{i j}^{-1} \\boldsymbol{T}_{i}^{-1} \\exp \\left(\\left(-\\boldsymbol{\\delta} \\boldsymbol{\\xi}_{i}\\right)^{\\wedge}\\right) \\exp \\left(\\delta \\boldsymbol{\\xi}_{j}^{\\wedge}\\right) \\boldsymbol{T}_{j}\\right)^{\\vee} \\\\ &=\\ln \\left(\\boldsymbol{T}_{i j}^{-1} \\boldsymbol{T}_{i}^{-1} \\boldsymbol{T}_{j} \\exp \\left(\\left(-\\operatorname{Ad}\\left(\\boldsymbol{T}_{j}^{-1}\\right) \\boldsymbol{\\delta} \\boldsymbol{\\xi}_{i}\\right)^{\\wedge}\\right) \\exp \\left(\\left(\\operatorname{Ad}\\left(\\boldsymbol{T}_{j}^{-1}\\right) \\boldsymbol{\\delta} \\boldsymbol{\\xi}_{j}\\right)^{\\wedge}\\right)^{\\vee}\\right.\\\\ & \\approx \\ln \\left(\\boldsymbol{T}_{i j}^{-1} \\boldsymbol{T}_{i}^{-1} \\boldsymbol{T}_{j}\\left[\\boldsymbol{I}-\\left(\\operatorname{Ad}\\left(\\boldsymbol{T}_{j}^{-1}\\right) \\boldsymbol{\\delta} \\boldsymbol{\\xi}_{i}\\right)^{\\wedge}+\\left(\\operatorname{Ad}\\left(\\boldsymbol{T}_{j}^{-1}\\right) \\boldsymbol{\\delta} \\boldsymbol{\\xi}_{j}\\right)^{\\wedge}\\right]\\right)^{\\vee} \\\\ & \\approx e_{i j}+\\frac{\\partial \\boldsymbol{e}_{i j}}{\\partial \\delta \\xi_{i}} \\boldsymbol{\\delta} \\boldsymbol{\\xi}_{i}+\\frac{\\partial \\boldsymbol{e}_{i j}}{\\partial \\delta \\boldsymbol{\\xi}_{j}} \\boldsymbol{\\delta} \\boldsymbol{\\xi}_{j} \\end{aligned}æŒ‰ç…§æä»£æ•°ä¸Šçš„æ±‚å¯¼æ³•åˆ™ï¼Œæˆ‘ä»¬æ±‚å‡ºäº†è¯¯å·®å…³äºä¸¤ä¸ªä½å§¿çš„JacobiçŸ©é˜µï¼š \\begin{aligned} \\frac{\\partial \\boldsymbol{e}_{i j}}{\\partial \\boldsymbol{\\delta} \\boldsymbol{\\xi}_{i}} &=-\\mathcal{J}_{r}^{-1}\\left(\\boldsymbol{e}_{i j}\\right) \\operatorname{Ad}\\left(\\boldsymbol{T}_{j}^{-1}\\right) \\\\ \\frac{\\partial \\boldsymbol{e}_{i j}}{\\partial \\boldsymbol{\\delta} \\boldsymbol{\\xi}_{j}} &=\\mathcal{J}_{r}^{-1}\\left(\\boldsymbol{e}_{i j}\\right) \\operatorname{Ad}\\left(\\boldsymbol{T}_{j}^{-1}\\right) \\end{aligned}å¯¹äº$\\mathscr {se}(3)$ å·¦å³é›…å¯æ¯”çš„$\\boldsymbol {\\mathcal J}_r$çš„å½¢å¼ä¼šè¿‡äºå¤æ‚ï¼Œå…¶é€šå¸¸æˆ‘ä»¬ä»…ä»…å–ä¸€å®šçš„è¿‘ä¼¼å³å¯ï¼Œæ³¨æ„ä¸Šè¿°è¿‘ä¼¼æˆç«‹çš„è¦æ±‚æ˜¯åœ¨$e_{ij}$ä¸æ˜¯å¾ˆå¤§çš„æ—¶å€™ã€‚ \\boldsymbol {\\mathcal{J}}_{r}^{-1}\\left(e_{i j}\\right) \\approx \\boldsymbol I+\\frac{1}{2}\\left[\\begin{array}{cc}\\phi_{e}^{\\wedge} & \\rho_{e}^{\\wedge} \\\\ 0 & \\phi_{e}^{\\wedge}\\end{array}\\right]ä¸Šè¿°é—®é¢˜æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªæœ€å°äºŒä¹˜é—®é¢˜ï¼Œå…¶ä¼˜åŒ–çš„å˜é‡ä¸ºå„ä¸ªé¡¶ç‚¹çš„ä½å§¿ï¼Œè¾¹æ¥è‡ªäºä½å§¿è§‚æµ‹çš„çº¦æŸï¼Œè¿™é‡Œè®° $\\mathcal E$ ä¸ºæ‰€æœ‰è¾¹çš„é›†åˆ ï¼š \\min \\frac{1}{2} \\sum_{i, j \\in \\mathcal{E}} \\boldsymbol{e}_{i j}^{\\mathrm{T}} \\boldsymbol{\\Sigma}_{i j}^{-1} \\boldsymbol{e}_{i j}å®è·µéƒ¨åˆ†æœ¬èŠ‚ä¸»è¦ä»‹ç»çš„æ˜¯ä½¿ç”¨G2Oæ¥è§£å†³ä½å§¿å›¾çš„ä¼˜åŒ–é—®é¢˜ï¼Œé¦–å…ˆæ¥é…ç½®CMakeList.txtæ–‡ä»¶å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031cmake_minimum_required(VERSION 2.8)project(pose_graph)set(CMAKE_BUILD_TYPE &quot;Release&quot;)set(CMAKE_CXX_FLAGS &quot;-std=c++11 -O2&quot;)list(APPEND CMAKE_MODULE_PATH ${PROJECT_SOURCE_DIR}/cmake_modules)# Eigeninclude_directories(&quot;/usr/include/eigen3&quot;)# sophus find_package(Sophus REQUIRED)include_directories(${Sophus_INCLUDE_DIRS})# g2o find_package(G2O REQUIRED)include_directories(${G2O_INCLUDE_DIRS})add_executable(pose_graph_g2o_SE3 pose_graph_g2o_SE3.cpp)target_link_libraries(pose_graph_g2o_SE3 g2o_core g2o_stuff g2o_types_slam3d ${CHOLMOD_LIBRARIES} )add_executable(pose_graph_g2o_lie pose_graph_g2o_lie_algebra.cpp)target_link_libraries(pose_graph_g2o_lie g2o_core g2o_stuff ${CHOLMOD_LIBRARIES} ${Sophus_LIBRARIES} Sophus::Sophus ) Sophus::Sophus åŸæ¥çš„æ–‡ä»¶å› ä¸ºç¼ºå°‘è¿™ä¸€ä¸ªè€Œç¼–è¯‘æŠ¥é”™ï¼ŒåŠ ä¸Šè¿™ä¸€å¥å°±å¯ä»¥æ­£å¸¸è¿è¡Œäº†ã€‚ ä¹‹åï¼Œæœ¬æ–‡è§£å†³çš„ä¸»è¦çš„é—®é¢˜æ˜¯é€šè¿‡ä¼˜åŒ–æ¥è§£å‡ºä¸€ä¸ªèºçº¿ä¸Šå‡çš„çƒçš„è½¨è¿¹ï¼Œæˆ‘ä»¬åœ¨èºæ—‹ä¸Šå‡çš„çƒä¸Šé¢åŠ å…¥äº†ä¸€äº›å™ªå£°å¯ä»¥å¾—å‡ºä»¥ä¸‹çš„è½¨è¿¹ã€‚ é€šè¿‡ä¸‹é¢çš„ç¨‹åºä¼˜åŒ–ä¹‹åå°±å¯ä»¥å¾—åˆ°å»é™¤å™ªå£°çš„ç¨‹åºå¦‚ä¸‹æ‰€ç¤ºã€‚ g2oåŸç”Ÿçš„ä½å§¿ä¼˜åŒ–è¿™é‡Œä¼˜åŒ–çš„æ–¹æ³•ç”±ä¸¤ç§ï¼Œä¸€ç§æ˜¯ä½¿ç”¨g2oè‡ªå¸¦çš„æ–¹æ³•æ¥å®ç°ï¼Œå…¶ä¸»è¦ç¨‹åºä¸ºpose_graph_g2o_SE3.cpp ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778#include &lt;iostream&gt;#include &lt;fstream&gt;#include &lt;string&gt;#include &lt;g2o/types/slam3d/types_slam3d.h&gt;#include &lt;g2o/core/block_solver.h&gt;#include &lt;g2o/core/optimization_algorithm_levenberg.h&gt;#include &lt;g2o/solvers/eigen/linear_solver_eigen.h&gt;using namespace std;/************************************************ * æœ¬ç¨‹åºæ¼”ç¤ºå¦‚ä½•ç”¨g2o solverè¿›è¡Œä½å§¿å›¾ä¼˜åŒ– * sphere.g2oæ˜¯äººå·¥ç”Ÿæˆçš„ä¸€ä¸ªPose graphï¼Œæˆ‘ä»¬æ¥ä¼˜åŒ–å®ƒã€‚ * å°½ç®¡å¯ä»¥ç›´æ¥é€šè¿‡loadå‡½æ•°è¯»å–æ•´ä¸ªå›¾ï¼Œä½†æˆ‘ä»¬è¿˜æ˜¯è‡ªå·±æ¥å®ç°è¯»å–ä»£ç ï¼Œä»¥æœŸè·å¾—æ›´æ·±åˆ»çš„ç†è§£ * è¿™é‡Œä½¿ç”¨g2o/types/slam3d/ä¸­çš„SE3è¡¨ç¤ºä½å§¿ï¼Œå®ƒå®è´¨ä¸Šæ˜¯å››å…ƒæ•°è€Œéæä»£æ•°. * **********************************************/int main(int argc, char **argv) { if (argc != 2) { cout &lt;&lt; &quot;Usage: pose_graph_g2o_SE3 sphere.g2o&quot; &lt;&lt; endl; return 1; } ifstream fin(argv[1]); if (!fin) { cout &lt;&lt; &quot;file &quot; &lt;&lt; argv[1] &lt;&lt; &quot; does not exist.&quot; &lt;&lt; endl; return 1; } // è®¾å®šg2o typedef g2o::BlockSolver&lt;g2o::BlockSolverTraits&lt;6, 6&gt;&gt; BlockSolverType; typedef g2o::LinearSolverEigen&lt;BlockSolverType::PoseMatrixType&gt; LinearSolverType; auto solver = new g2o::OptimizationAlgorithmLevenberg( g2o::make_unique&lt;BlockSolverType&gt;(g2o::make_unique&lt;LinearSolverType&gt;())); g2o::SparseOptimizer optimizer; // å›¾æ¨¡å‹ optimizer.setAlgorithm(solver); // è®¾ç½®æ±‚è§£å™¨ optimizer.setVerbose(true); // æ‰“å¼€è°ƒè¯•è¾“å‡º int vertexCnt = 0, edgeCnt = 0; // é¡¶ç‚¹å’Œè¾¹çš„æ•°é‡ while (!fin.eof()) { string name; fin &gt;&gt; name; if (name == &quot;VERTEX_SE3:QUAT&quot;) { // SE3 é¡¶ç‚¹ g2o::VertexSE3 *v = new g2o::VertexSE3(); int index = 0; fin &gt;&gt; index; v-&gt;setId(index); v-&gt;read(fin); optimizer.addVertex(v); vertexCnt++; if (index == 0) v-&gt;setFixed(true); } else if (name == &quot;EDGE_SE3:QUAT&quot;) { // SE3-SE3 è¾¹ g2o::EdgeSE3 *e = new g2o::EdgeSE3(); int idx1, idx2; // å…³è”çš„ä¸¤ä¸ªé¡¶ç‚¹ fin &gt;&gt; idx1 &gt;&gt; idx2; e-&gt;setId(edgeCnt++); e-&gt;setVertex(0, optimizer.vertices()[idx1]); e-&gt;setVertex(1, optimizer.vertices()[idx2]); e-&gt;read(fin); optimizer.addEdge(e); } if (!fin.good()) break; } cout &lt;&lt; &quot;read total &quot; &lt;&lt; vertexCnt &lt;&lt; &quot; vertices, &quot; &lt;&lt; edgeCnt &lt;&lt; &quot; edges.&quot; &lt;&lt; endl; cout &lt;&lt; &quot;optimizing ...&quot; &lt;&lt; endl; optimizer.initializeOptimization(); optimizer.optimize(30); cout &lt;&lt; &quot;saving optimization results ...&quot; &lt;&lt; endl; optimizer.save(&quot;result.g2o&quot;); return 0;} æä»£æ•°ä¸Šçš„ä½å§¿ä¼˜åŒ–å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨æä»£æ•°æ¥è‡ªå·±å†™éœ€è¦ä¼˜åŒ–çš„è¾¹å’Œç‚¹ï¼Œè‡ªå·±å†™é›…å¯æ¯”çŸ©é˜µç­‰ï¼Œå…¶ä¸»è¦çš„ç¨‹åºä¸ºpose_graph_g2o_lie_algebra.cppï¼Œä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209#include &lt;iostream&gt;#include &lt;fstream&gt;#include &lt;string&gt;#include &lt;Eigen/Core&gt;#include &lt;g2o/core/base_vertex.h&gt;#include &lt;g2o/core/base_binary_edge.h&gt;#include &lt;g2o/core/block_solver.h&gt;#include &lt;g2o/core/optimization_algorithm_levenberg.h&gt;#include &lt;g2o/solvers/eigen/linear_solver_eigen.h&gt;#include &lt;sophus/se3.hpp&gt;using namespace std;using namespace Eigen;using Sophus::SE3d;using Sophus::SO3d;/************************************************ * æœ¬ç¨‹åºæ¼”ç¤ºå¦‚ä½•ç”¨g2o solverè¿›è¡Œä½å§¿å›¾ä¼˜åŒ– * sphere.g2oæ˜¯äººå·¥ç”Ÿæˆçš„ä¸€ä¸ªPose graphï¼Œæˆ‘ä»¬æ¥ä¼˜åŒ–å®ƒã€‚ * å°½ç®¡å¯ä»¥ç›´æ¥é€šè¿‡loadå‡½æ•°è¯»å–æ•´ä¸ªå›¾ï¼Œä½†æˆ‘ä»¬è¿˜æ˜¯è‡ªå·±æ¥å®ç°è¯»å–ä»£ç ï¼Œä»¥æœŸè·å¾—æ›´æ·±åˆ»çš„ç†è§£ * æœ¬èŠ‚ä½¿ç”¨æä»£æ•°è¡¨è¾¾ä½å§¿å›¾ï¼ŒèŠ‚ç‚¹å’Œè¾¹çš„æ–¹å¼ä¸ºè‡ªå®šä¹‰ * **********************************************/typedef Matrix&lt;double, 6, 6&gt; Matrix6d;// ç»™å®šè¯¯å·®æ±‚J_R^{-1}çš„è¿‘ä¼¼Matrix6d JRInv(const SE3d &amp;e) { Matrix6d J; J.block(0, 0, 3, 3) = SO3d::hat(e.so3().log()); J.block(0, 3, 3, 3) = SO3d::hat(e.translation()); J.block(3, 0, 3, 3) = Matrix3d::Zero(3, 3); J.block(3, 3, 3, 3) = SO3d::hat(e.so3().log()); // J = J * 0.5 + Matrix6d::Identity(); J = Matrix6d::Identity(); // try Identity if you want return J;}// æä»£æ•°é¡¶ç‚¹typedef Matrix&lt;double, 6, 1&gt; Vector6d;class VertexSE3LieAlgebra : public g2o::BaseVertex&lt;6, SE3d&gt; {public: EIGEN_MAKE_ALIGNED_OPERATOR_NEW virtual bool read(istream &amp;is) override { double data[7]; for (int i = 0; i &lt; 7; i++) is &gt;&gt; data[i]; setEstimate(SE3d( Quaterniond(data[6], data[3], data[4], data[5]), Vector3d(data[0], data[1], data[2]) )); } virtual bool write(ostream &amp;os) const override { os &lt;&lt; id() &lt;&lt; &quot; &quot;; Quaterniond q = _estimate.unit_quaternion(); os &lt;&lt; _estimate.translation().transpose() &lt;&lt; &quot; &quot;; os &lt;&lt; q.coeffs()[0] &lt;&lt; &quot; &quot; &lt;&lt; q.coeffs()[1] &lt;&lt; &quot; &quot; &lt;&lt; q.coeffs()[2] &lt;&lt; &quot; &quot; &lt;&lt; q.coeffs()[3] &lt;&lt; endl; return true; } virtual void setToOriginImpl() override { _estimate = SE3d(); } // å·¦ä¹˜æ›´æ–° virtual void oplusImpl(const double *update) override { Vector6d upd; upd &lt;&lt; update[0], update[1], update[2], update[3], update[4], update[5]; _estimate = SE3d::exp(upd) * _estimate; }};// ä¸¤ä¸ªæä»£æ•°èŠ‚ç‚¹ä¹‹è¾¹class EdgeSE3LieAlgebra : public g2o::BaseBinaryEdge&lt;6, SE3d, VertexSE3LieAlgebra, VertexSE3LieAlgebra&gt; {public: EIGEN_MAKE_ALIGNED_OPERATOR_NEW virtual bool read(istream &amp;is) override { double data[7]; for (int i = 0; i &lt; 7; i++) is &gt;&gt; data[i]; Quaterniond q(data[6], data[3], data[4], data[5]); q.normalize(); setMeasurement(SE3d(q, Vector3d(data[0], data[1], data[2]))); for (int i = 0; i &lt; information().rows() &amp;&amp; is.good(); i++) for (int j = i; j &lt; information().cols() &amp;&amp; is.good(); j++) { is &gt;&gt; information()(i, j); if (i != j) information()(j, i) = information()(i, j); } return true; } virtual bool write(ostream &amp;os) const override { VertexSE3LieAlgebra *v1 = static_cast&lt;VertexSE3LieAlgebra *&gt; (_vertices[0]); VertexSE3LieAlgebra *v2 = static_cast&lt;VertexSE3LieAlgebra *&gt; (_vertices[1]); os &lt;&lt; v1-&gt;id() &lt;&lt; &quot; &quot; &lt;&lt; v2-&gt;id() &lt;&lt; &quot; &quot;; SE3d m = _measurement; Eigen::Quaterniond q = m.unit_quaternion(); os &lt;&lt; m.translation().transpose() &lt;&lt; &quot; &quot;; os &lt;&lt; q.coeffs()[0] &lt;&lt; &quot; &quot; &lt;&lt; q.coeffs()[1] &lt;&lt; &quot; &quot; &lt;&lt; q.coeffs()[2] &lt;&lt; &quot; &quot; &lt;&lt; q.coeffs()[3] &lt;&lt; &quot; &quot;; // information matrix for (int i = 0; i &lt; information().rows(); i++) for (int j = i; j &lt; information().cols(); j++) { os &lt;&lt; information()(i, j) &lt;&lt; &quot; &quot;; } os &lt;&lt; endl; return true; } // è¯¯å·®è®¡ç®—ä¸ä¹¦ä¸­æ¨å¯¼ä¸€è‡´ virtual void computeError() override { SE3d v1 = (static_cast&lt;VertexSE3LieAlgebra *&gt; (_vertices[0]))-&gt;estimate(); SE3d v2 = (static_cast&lt;VertexSE3LieAlgebra *&gt; (_vertices[1]))-&gt;estimate(); _error = (_measurement.inverse() * v1.inverse() * v2).log(); } // é›…å¯æ¯”è®¡ç®— virtual void linearizeOplus() override { SE3d v1 = (static_cast&lt;VertexSE3LieAlgebra *&gt; (_vertices[0]))-&gt;estimate(); SE3d v2 = (static_cast&lt;VertexSE3LieAlgebra *&gt; (_vertices[1]))-&gt;estimate(); Matrix6d J = JRInv(SE3d::exp(_error)); // å°è¯•æŠŠJè¿‘ä¼¼ä¸ºIï¼Ÿ _jacobianOplusXi = -J * v2.inverse().Adj(); _jacobianOplusXj = J * v2.inverse().Adj(); }};int main(int argc, char **argv) { if (argc != 2) { cout &lt;&lt; &quot;Usage: pose_graph_g2o_SE3_lie sphere.g2o&quot; &lt;&lt; endl; return 1; } ifstream fin(argv[1]); if (!fin) { cout &lt;&lt; &quot;file &quot; &lt;&lt; argv[1] &lt;&lt; &quot; does not exist.&quot; &lt;&lt; endl; return 1; } // è®¾å®šg2o typedef g2o::BlockSolver&lt;g2o::BlockSolverTraits&lt;6, 6&gt;&gt; BlockSolverType; typedef g2o::LinearSolverEigen&lt;BlockSolverType::PoseMatrixType&gt; LinearSolverType; auto solver = new g2o::OptimizationAlgorithmLevenberg( g2o::make_unique&lt;BlockSolverType&gt;(g2o::make_unique&lt;LinearSolverType&gt;())); g2o::SparseOptimizer optimizer; // å›¾æ¨¡å‹ optimizer.setAlgorithm(solver); // è®¾ç½®æ±‚è§£å™¨ optimizer.setVerbose(true); // æ‰“å¼€è°ƒè¯•è¾“å‡º int vertexCnt = 0, edgeCnt = 0; // é¡¶ç‚¹å’Œè¾¹çš„æ•°é‡ vector&lt;VertexSE3LieAlgebra *&gt; vectices; vector&lt;EdgeSE3LieAlgebra *&gt; edges; while (!fin.eof()) { string name; fin &gt;&gt; name; if (name == &quot;VERTEX_SE3:QUAT&quot;) { // é¡¶ç‚¹ VertexSE3LieAlgebra *v = new VertexSE3LieAlgebra(); int index = 0; fin &gt;&gt; index; v-&gt;setId(index); v-&gt;read(fin); optimizer.addVertex(v); vertexCnt++; vectices.push_back(v); if (index == 0) v-&gt;setFixed(true); } else if (name == &quot;EDGE_SE3:QUAT&quot;) { // SE3-SE3 è¾¹ EdgeSE3LieAlgebra *e = new EdgeSE3LieAlgebra(); int idx1, idx2; // å…³è”çš„ä¸¤ä¸ªé¡¶ç‚¹ fin &gt;&gt; idx1 &gt;&gt; idx2; e-&gt;setId(edgeCnt++); e-&gt;setVertex(0, optimizer.vertices()[idx1]); e-&gt;setVertex(1, optimizer.vertices()[idx2]); e-&gt;read(fin); optimizer.addEdge(e); edges.push_back(e); } if (!fin.good()) break; } cout &lt;&lt; &quot;read total &quot; &lt;&lt; vertexCnt &lt;&lt; &quot; vertices, &quot; &lt;&lt; edgeCnt &lt;&lt; &quot; edges.&quot; &lt;&lt; endl; cout &lt;&lt; &quot;optimizing ...&quot; &lt;&lt; endl; optimizer.initializeOptimization(); optimizer.optimize(30); cout &lt;&lt; &quot;saving optimization results ...&quot; &lt;&lt; endl; // å› ä¸ºç”¨äº†è‡ªå®šä¹‰é¡¶ç‚¹ä¸”æ²¡æœ‰å‘g2oæ³¨å†Œï¼Œè¿™é‡Œä¿å­˜è‡ªå·±æ¥å®ç° // ä¼ªè£…æˆ SE3 é¡¶ç‚¹å’Œè¾¹ï¼Œè®© g2o_viewer å¯ä»¥è®¤å‡º ofstream fout(&quot;result_lie.g2o&quot;); for (VertexSE3LieAlgebra *v:vectices) { fout &lt;&lt; &quot;VERTEX_SE3:QUAT &quot;; v-&gt;write(fout); } for (EdgeSE3LieAlgebra *e:edges) { fout &lt;&lt; &quot;EDGE_SE3:QUAT &quot;; e-&gt;write(fout); } fout.close(); return 0;} æ•°æ®å…¶ä¸­çš„sphere.g2oæ–‡ä»¶é‡Œé¢è®°å½•çš„æ˜¯ä¸Šè¿°èºæ—‹çƒè½¨è¿¹çš„ä»£ç ï¼Œå…¶ä¸­å¯¹äºèŠ‚ç‚¹å³ä½å§¿çš„è¡¨ç¤ºä½¿ç”¨çš„æ˜¯èŠ‚ç‚¹IDã€å››å…ƒæ•°å’Œå¹³ç§»å‘é‡$q_x,q_y,q_z,q_w,t_x,t_y,t_z$ ï¼Œè€Œå¯¹äºè¾¹æ¥è¯´ï¼Œå…¶åªè¦çš„è¡¨ç¤ºä¸ºä¸¤ä¸ªèŠ‚ç‚¹çš„IDã€å››å…ƒæ•°ã€å¹³ç§»å‘é‡å’Œä¿¡æ¯çŸ©é˜µ(åæ–¹å·®çŸ©é˜µ)ï¼Œå…·ä½“çš„æ˜¾ç¤ºå¦‚ä¸‹æ‰€ç¤ºï¼š 1234567VERTEX_SE3:QUAT 2496 0.693766 85.4427 -76.1338 0.762427 -0.0510961 -0.61895 -0.181645 VERTEX_SE3:QUAT 2497 0.796386 85.3713 -76.1324 0.769185 -0.00858573 -0.622899 -0.142402 VERTEX_SE3:QUAT 2498 0.911804 85.3343 -76.0976 0.776067 0.0278687 -0.621979 -0.10043 VERTEX_SE3:QUAT 2499 1.0318 85.323 -76.0615 0.779315 0.0718127 -0.620437 -0.0506864 EDGE_SE3:QUAT 0 1 -0.0187953 0.0328449 -0.125146 0.0634648 -0.000250128 0.00237634 0.997981 10000 0 0 0 0 0 10000 0 0 0 0 10000 0 0 0 40000 0 0 40000 0 40000 EDGE_SE3:QUAT 1 2 -0.00836587 0.0518559 -0.141405 0.0636098 -0.000538 0.00162238 0.997973 10000 0 0 0 0 0 10000 0 0 0 0 10000 0 0 0 40000 0 0 40000 0 40000 EDGE_SE3:QUAT 2 3 0.0116518 0.0646362 -0.123843 0.0628369 0.0060981 -0.00213561 0.998003 10000 0 0 0 0 0 10000 0 0 0 0 10000 0 0 0 40000 0 0 40000 0 40000","link":"/2022/06/26/SLAM/ch10-%E5%90%8E%E7%AB%AF-%E7%AC%AC%E4%B8%89%E9%83%A8%E5%88%86-%E4%BD%8D%E7%BD%AE%E5%9B%BE%E5%92%8C%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3/"},{"title":"Ch11 å›ç¯æ£€æµ‹","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ç®€å•çš„å…¥é—¨äº†ä¸€ä¸‹å›ç¯æ£€æµ‹ï¼Œä¸»è¦çš„å†…å®¹åŒ…æ‹¬è¯è¢‹æ¨¡å‹ã€å­—å…¸ã€ç›¸ä¼¼åº¦çš„è®¡ç®—ã€ä»¥åŠè®¡ç®—ç›¸ä¼¼åº¦çš„å®éªŒå’Œæ„å»ºè¯å…¸çš„çš„å®éªŒã€‚å½“å…ˆåªè¦ä½¿ç”¨çš„æ„å»ºå­—å…¸çš„æ–¹æ³•æ˜¯åŸºäºèšç±»çš„æ–¹æ³•ã€‚ æ¦‚è¿°å›ç¯æ£€æµ‹çš„æ„ä¹‰ VOå’Œåç«¯éƒ½å­˜åœ¨è¯¯å·®ï¼› SLAMçš„å»ºå›¾å’Œå®šä½æ˜¯è€¦åˆçš„ï¼Œå› æ­¤è¯¯å·®ä¼šä¸æ–­åœ°è¿›è¡Œç´¯è®¡ï¼Œä¸Šä¸€æ­¥å§¿æ€ä¼°è®¡çš„è¯¯å·®ä¼šç§¯ç´¯åˆ°ä¸‹ä¸€æ­¥ã€‚ ç‰¹åˆ«åœ°ï¼Œå¯¹äºå•ç›®ç›¸æœºè€Œè¨€ï¼Œå…¶è¯¯å·®ä¸»è¦åŒ…æ‹¬ä¸‰ä¸ªéƒ¨åˆ†ï¼Œ$R,t,S$(å³scale). åœ¨å•ç›®ç›¸æœºä¼šæœ‰ä¸€ä¸ªåˆå§‹åŒ–çš„è¿‡ç¨‹ï¼Œè¿™ä¸ªåˆå§‹åŒ–å…¶å®å°±æ˜¯å°†å¹³ç§»å‘é‡ $\\boldsymbol t$ è¿›è¡Œå½’ä¸€åŒ–æ“ä½œã€‚ è¿™é‡Œç”±äºå­˜åœ¨ç´¯è®¡çš„è¯¯å·®ï¼Œå› æ­¤åœ¨è¿‡ç¨‹ä¸­ $\\boldsymbol t$ å¯èƒ½ä¼šä¸æ–­åœ°å˜å¤§å’Œç¼©å°ï¼Œè¿™é‡Œæˆ‘ä»¬å°±å‡è®¾è¿‡ç¨‹ä¸­å…¶scaleå¯èƒ½ä¼šä¸æ–­åœ°ç¼©å°ï¼Œäºæ˜¯å¾—å‡ºå…¶ä¼°è®¡çš„æ·±åº¦å°±åœ¨ä¸æ–­åœ°å˜åŒ–ã€‚ å°¤å…¶åœ¨å‡ºç°è½¬å¼¯ä¹‹åå°±ä¼šå‡ºç°å› ä¸ºå¹³ç§»å‘é‡ä¼°è®¡çš„ç´¯è®¡è¯¯å·®è€Œé€ æˆçš„scaleå‡å°çš„æƒ…å†µã€‚ å›ç¯æ£€æµ‹æœ¬è´¨ä¸Šå°±æ˜¯å°†åŸæ¥çš„ä½å§¿çš„åŸºç¡€ä¸ŠåŠ äº†ä¸€ä¸ªçº¦æŸï¼Œä¹‹å‰ç›¸æœºä¹‹é—´çš„ä½å§¿ä¼°è®¡æ˜¯é€šè¿‡BAæ¥è¿›è¡Œçš„ï¼Œå›ç¯æ£€æµ‹ç›¸å½“äºä¸€ä¸ªæ—¶é—´æ›´åŠ ä¹…è¿œçš„çº¦æŸã€‚ æ€»ç»“ï¼š ä¸€æ–¹é¢ï¼Œå›ç¯æ£€æµ‹ä¸»è¦æ˜¯ä¼°è®¡è½¨è¿¹å’Œåœ°å›¾åœ¨é•¿æ—¶é—´çš„æ­£ç¡®æ€§é—®é¢˜ã€‚ å¦ä¸€æ–¹é¢ï¼Œå›ç¯æ£€æµ‹å»ºç«‹äº†å†å²æ•°æ®å’Œå½“å‰çš„å…³è”ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨å›ç¯æ£€æµ‹è¿›è¡Œé‡å®šä½ã€‚ å›ç¯æ£€æµ‹çš„ä¸»è¦æ–¹æ³•ä¸»è¦çš„æ­¥éª¤æ˜¯ï¼š æ£€æµ‹åˆ°å›ç¯çš„å‘ç”Ÿï¼› è®¡ç®—å›ç¯å€™é€‰å¸§å’Œå½“å‰å¸§çš„è¿åŠ¨ï¼› è¿™é‡Œæ˜¯é€šè¿‡å°†å€™é€‰å¸§çš„3Då’Œå½“å‰å¸§çš„2Dè¿›è¡Œä¸€ä¸ªPnPæ¥ä¼°è®¡å‡ºç›¸å¯¹çš„ä½å§¿å˜æ¢çš„çº¦æŸã€‚ä¸»è¦çš„æ–¹æ³•ç”±ä¸¤ç§ï¼š å°†è¿™ä¸ªçº¦æŸæ”¾å…¥åˆ°pose graphä¸­ï¼› å°†å…¶ä½œä¸ºçº¦æŸæ”¾å…¥åˆ°ä¸€ä¸ªå…¨å±€çš„BAä¸­ã€‚ éªŒè¯å›ç¯æ£€æµ‹æ˜¯å¦æˆç«‹ï¼› é—­ç¯ã€‚ ä½†æ˜¯ï¼Œé—®é¢˜æ˜¯å¦‚ä½•éªŒè¯æ˜¯å¦å‘ç”Ÿäº†å›ç¯ï¼š æœ€å®¹æ˜“è®©äººæƒ³åˆ°çš„æ–¹æ³•å°±æ˜¯ç›´æ¥ä»æ‰€æœ‰çš„å›¾ç‰‡ä¸­ä»»æ„é€‰æ‹©ä¸¤ä¸ªè¿›è¡Œæ¯”å¯¹å³å¯ï¼Œä½†æ˜¯è¿™æ ·åšçš„è®¡ç®—å¤æ‚åº¦æ¯”è¾ƒçš„é«˜ä¸º$O(n^2)$ï¼Œä½†æ˜¯è¿™æ ·ä¼šæå¤§çš„å¢åŠ è®¡ç®—é‡ã€‚ å› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸­éšæœºå–æ ·çš„æ–¹æ³•ï¼Œæ¥æ§åˆ¶è¿ç®—çš„è§„æ¨¡ï¼Œä½†æ˜¯éšç€æ ·æœ¬æ•°é‡çš„å¢åŠ ï¼Œå…¶è¿ç®—çš„è§„æ¨¡ä¸æ–­åœ°æ‰©å¤§ï¼Œäºæ˜¯å–æ ·ä¼šéå¸¸çš„ç›²ç›®ï¼Œå–åˆ°çš„ç›¸ä¼¼ç‚¹çš„æ¦‚ç‡ä¼šæ¯”è¾ƒå°ã€‚ åŸºäºé‡Œç¨‹è®¡çš„æ–¹æ³•ï¼šå…ˆå¤§æ¦‚çœ‹ä¸€ä¸‹é‡Œç¨‹è®¡ä¸Šé¢çš„ä¼°è®¡çš„è½¨è¿¹ï¼Œå¦‚æœæ¯”è¾ƒç›¸è¿‘é‚£ä¹ˆå°±æ˜¯è¿›è¡Œå›ç¯æ£€æµ‹ã€‚ä½†æ˜¯åœ¨å¦‚æœè¿åŠ¨çš„èŒƒå›´æ¯”è¾ƒå¤§ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šç”±äºç´¯è®¡è¯¯å·®è€Œå¯¼è‡´å…¶ç›¸å·®çš„å¾ˆè¿œï¼Œä¸çŸ¥åˆ°éœ€ä¸éœ€è¦è¿›è¡Œè¯¯å·®æ£€æµ‹ã€‚ åŸºäºå¤–è§‚çš„æ–¹æ³•ï¼š ç›´æ¥çœ‹å›¾åƒï¼Œè®¡ç®—ç›¸ä¼¼åº¦ã€‚ å¤–è§‚æ–¹æ³•æ˜¯ä¸»æµæ–¹æ³•ï¼› æ ¸å¿ƒåœ¨äºè¡¡é‡å›¾åƒé—´çš„ç›¸ä¼¼æ€§ï¼Œæ¥ä¸€ä¸ªæ–°çš„å›¾åƒï¼Œå’Œå†å²å›¾åƒè¿›è¡Œç›¸ä¼¼æ€§æ¯”è¾ƒã€‚ ä¸€ä¸ªæœ´ç´ çš„æ–¹æ³•å°±æ˜¯è®¡ç®—ä¸¤ä¸ªå›¾ç‰‡ä¹‹é—´çš„ç°åº¦å€¼ä¹‹å·®ï¼Œ$S(A,B)=||A-B||$ ä½†æ˜¯è¿™ç§æ–¹æ³•å¯¹å…‰ç…§å’Œå§¿æ€ä¸æ˜¯å¾ˆé²æ£’ï¼Œå®¹æ˜“å› ä¸ºå‰åå…³ç…§çš„å˜åŒ–æˆ–è€…ç›¸æœºä½ç½®çš„å˜æ¢è€Œäº§ç”Ÿå·¨å¤§çš„è¯¯å·®ã€‚ å› æ­¤è¿™é‡Œå¼•å…¥äº†æ„ŸçŸ¥åå·®(Perceptual Aliasing)å’Œæ„ŸçŸ¥å˜å¼‚(Perceptual Variability) å‡†ç¡®ç‡å’Œå¬å›ç‡ è¿™é‡Œå°†ä¸Šè¿°çš„å››ç§æƒ…å†µå°†è¿›è¡Œç¼©å†™æˆä¸º TPã€FPã€FNã€TNã€‚ è¿™é‡Œå°†å‡é˜³æ€§FPç§°ä¸ºæ„ŸçŸ¥åå·®ï¼Œå°†å‡é˜´æ€§FNç§°ä¸ºæ„ŸçŸ¥å˜å¼‚ã€‚ äºæ˜¯å¾—å‡ºä¸¤ä¸ªé‡è¦çš„ç»Ÿè®¡é‡å‡†ç¡®ç‡å’Œå¬å›ç‡ï¼š Precision=\\dfrac {TP}{TP+FP},\\ Recall=\\dfrac{TP}{TP+FN} é€šå¸¸æƒ…å†µä¸‹ï¼Œä¸Šè¿°çš„ä¸¤ä¸ªç»Ÿè®¡æŒ‡æ ‡æ˜¯ç›¸äº’çŸ›ç›¾çš„ã€‚ å½“æˆ‘ä»¬å°†é˜ˆå€¼æé«˜æ—¶ï¼Œç®—æ³•ä¼šå˜å¾—æ¯”è¾ƒçš„ä¸¥æ ¼ï¼Œäºæ˜¯å°±ä¼šå‡ºç°Precisionå¾ˆé«˜çš„æƒ…å†µã€‚ç”±äºæ£€å‡ºç‡å‡å°ï¼ŒåŸæ¥ä¸€äº›å›ç¯çš„ç‚¹å¯èƒ½ä¼šå‡å°ï¼Œäºæ˜¯å°±ä¼šæœ‰Recallå˜å°çš„æƒ…å†µã€‚ å½“é˜ˆå€¼é™ä½æ—¶ï¼Œç®—æ³•å˜å¾—æ¯”è¾ƒçš„å®½æ¾ï¼Œäºæ˜¯è¢«æ£€æµ‹å‡ºçš„å›ç¯ç‚¹çš„æ•°é‡ä¼šå¢åŠ ï¼Œå¯¼è‡´Recallå¢åŠ ï¼Œä½†æ˜¯æ£€æµ‹å‡ºæ¥çš„ç‚¹é‡Œé¢æ··å…¥äº†å¾ˆå¤šçš„ä¸æ˜¯å›ç¯çš„å‡é˜³æ€§çš„æƒ…å†µï¼Œå¯¼è‡´å‡†ç¡®ç‡ä¸‹é™ã€‚ è¿™é‡Œå°†å‡†ç¡®ç‡å’Œå¬å›ç‡ç”»åˆ°ä¸€ä¸ªå›¾åƒä¸Šé¢å¯å¾—ROCæ›²çº¿ï¼Œå½“ç”¨å¬å›ç‡ä¸ºæ¨ªè½´ï¼Œç”¨å‡†ç¡®ç‡ä¸ºçºµè½´æ—¶ï¼Œæˆ‘ä»¬ä¼šå…³å¿ƒæ•´æ¡æ›²çº¿åå‘å³ä¸Šæ–¹çš„ç¨‹åº¦ã€100%å‡†ç¡®ç‡ä¸‹çš„å¬å›ç‡æˆ–è€…50%å¬å›ç‡æ—¶çš„å‡†ç¡®ç‡ï¼Œä½œä¸ºè¯„ä»·ç®—æ³•çš„æŒ‡æ ‡ã€‚ä¸è¿‡è¯·æ³¨æ„ï¼Œé™¤äº†ä¸€äº›â€œå¤©å£¤ä¹‹åˆ«â€çš„ç®—æ³•ï¼Œæˆ‘ä»¬é€šå¸¸ä¸èƒ½ä¸€æ¦‚è€Œè®ºåœ°è¯´ç®—æ³•Aå°±æ˜¯ä¼˜äºç®—æ³•Bçš„ã€‚æˆ‘ä»¬å¯èƒ½ä¼šè¯´Aåœ¨å‡†ç¡®ç‡è¾ƒé«˜æ—¶è¿˜æœ‰å¾ˆå¥½çš„å¬å›ç‡ï¼Œè€ŒBåœ¨70%å¬å›ç‡çš„æƒ…å†µä¸‹è¿˜èƒ½ä¿è¯è¾ƒå¥½çš„å‡†ç¡®ç‡ï¼Œè¯¸å¦‚æ­¤ç±»ã€‚ ä½†æ˜¯åœ¨SLAMé—®é¢˜ä¸­ï¼Œå¯¹ä¸€èˆ¬çš„å‡†ç¡®æ€§æ¯”è¾ƒçš„çœ‹é‡ï¼Œå› ä¸ºä¸€å¼ ä¸å‡†ç¡®çš„å›¾ç‰‡å¾ˆå¯èƒ½ç ´ç¯BAä¼˜åŒ–çš„ç›®æ ‡ï¼Œé€ æˆå»ºå›¾å¤±æ•ˆã€‚ è¯è¢‹æ¨¡å‹è¯è¢‹,ä¹Ÿå°±æ˜¯ Bag-of-Words (BoW)ï¼Œç›®çš„æ˜¯ç”¨â€œå›¾åƒä¸Šæœ‰å“ªå‡ ç§ç‰¹å¾â€æ¥æè¿°ä¸€å¹…å›¾åƒã€‚ ä¾‹å¦‚ï¼Œæˆ‘ä»¬è¯´æŸå¼ ç…§ç‰‡ä¸­æœ‰ä¸€ä¸ªäººã€ä¸€è¾†è½¦ï¼›è€Œå¦ä¸€å¼ ä¸­æœ‰ä¸¤ä¸ªäººã€ä¸€åªç‹—æ ¹æ®è¿™æ ·çš„æè¿°,å°±å¯ä»¥åº¦é‡è¿™ä¸¤å¹…å›¾åƒçš„ç›¸ä¼¼æ€§ã€‚å†å…·ä½“ä¸€äº›ï¼Œæˆ‘ä»¬è¦åšä»¥ä¸‹ä¸‰æ­¥ï¼š ç¡®å®šäººã€è½¦ã€ç‹—â€ç­‰æ¦‚å¿µâ€”â€”å¯¹åº”äºBoWä¸­çš„â€œå•è¯â€( Word )ï¼Œè®¸å¤šå•è¯æ”¾åœ¨ä¸€èµ·,ç»„æˆäº†â€œå­—å…¸â€ï¼ˆDictionary )ã€‚ ç¡®å®šä¸€å¹…å›¾åƒä¸­å‡ºç°äº†å“ªäº›åœ¨å­—å…¸ä¸­å®šä¹‰çš„æ¦‚å¿µâ€”â€”æˆ‘ä»¬ç”¨å•è¯å‡ºç°çš„æƒ…å†µ(æˆ–ç›´æ–¹å›¾)æè¿°æ•´å¹…å›¾åƒã€‚è¿™å°±æŠŠä¸€å¹…å›¾åƒè½¬æ¢æˆäº†ä¸€ä¸ªå‘é‡çš„æè¿°ã€‚ æ¯”è¾ƒä¸Šä¸€æ­¥ä¸­çš„æè¿°çš„ç›¸ä¼¼ç¨‹åº¦ã€‚ ä»¥ä¸Šé¢ä¸¾çš„ä¾‹å­æ¥è¯´ï¼Œé¦–å…ˆæˆ‘ä»¬é€šè¿‡æŸç§æ–¹å¼å¾—åˆ°äº†ä¸€æœ¬â€œå­—å…¸â€ã€‚å­—å…¸ä¸Šè®°å½•äº†è®¸å¤šå•è¯ï¼Œæ¯ä¸ªå•è¯éƒ½æœ‰ä¸€å®šæ„ä¹‰ï¼Œä¾‹å¦‚äººã€è½¦ã€ç‹—éƒ½æ˜¯åŒ–æ±‚åœ¨å­—å…¸ä¸­çš„å¹³åˆ¤ï¼Œæ‰¾ä¸ªä»$\\omega_1ã€\\omega_2ã€\\omega_3$ã€‚ç„¶åï¼Œå¯¹äºä»»æ„å›¾åƒA,æ ¹æ®å®ƒä»¬å«æœ‰çš„å•è¯ï¼Œå¯è®°ä¸ºï¼š A=1\\cdot \\omega_1+1\\cdot \\omega_2+0\\cdot \\omega_3å­—å…¸æ˜¯å›ºå®šçš„çš„ï¼Œæ­¤æ—¶å°†å¯ä»¥å›¾ç‰‡è½¬æ¢ç§°ä¸ºä¸€ä¸ªå‘é‡ã€‚è¿™ä¸ªå‘é‡ä¸»è¦æ˜¯è®°å½•äº†wordçš„æœ‰æ— ï¼Œè€Œå¿½ç•¥äº†ç‰¹å¾çš„çœŸå®ä½ç½®ã€‚è¿™æ ·åšå°±æ¯”ä¹‹å‰ä½¿ç”¨ç°åº¦è®¡ç®—æ›´åŠ é²æ£’ï¼Œå¯ä»¥é˜²æ­¢ç›¸æœºå§¿æ€å˜æ¢é€ æˆçš„ç›¸ä¼¼åº¦ä¸‹é™çš„æƒ…å†µã€‚ äºæ˜¯ç›¸ä¼¼åº¦çš„è®¡ç®—å…¬å¼å¯ä»¥ä½œï¼š s(a,b)=1-\\frac 1 {\\text{W}}||a-b||_1å…¶ä¸­$a,b$ä¸ºä¸¤ä¸ªå›¾ç‰‡å¯¹åº”çš„å‘é‡ã€‚ å­—å…¸è¿™é‡Œå­—å…¸çš„ç”Ÿæˆç±»ä¼¼äºä¸€ä¸ªèšç±»(Clustering)çš„é—®é¢˜ï¼Œåœ¨æ— ç›‘ç£å­¦ä¹ ä¸­æ¯”è¾ƒçš„å¸¸è§ï¼Œå…¶ä¸­K-meansèšç±»æ˜¯ä¸€ä¸ªæ¯”è¾ƒçš„ç®€å•æœ‰æ•ˆçš„ç®—æ³•ã€‚ è¿™é‡Œå­—å…¸å»ºç«‹çš„æ­¥éª¤ï¼Œé¦–å…ˆåœ¨æå–å›¾åƒä¸ŠNä¸ªç‰¹å¾ç‚¹ï¼Œåœ¨åˆ©ç”¨K-meansèšç±»æ¥æ¥å¾—å‡ºéœ€è¦çš„kç±»ã€‚ K-meansç®—æ³•çš„ä¸»è¦ä¼˜ç‚¹æ˜¯å…¶æ¯”è¾ƒç®€å•æœ‰æ•ˆï¼Œä½†æ˜¯ç¼ºç‚¹æ˜¯éœ€è¦æŒ‡å®šèšç±»çš„æ•°é‡ã€åŒæ—¶ç”±äºéšæœºé€‰å–ç‚¹ä½¿å¾—æ¯æ¬¡èšç±»çš„ç»“æœéƒ½æ˜¯ä¸åŒçš„ï¼Œå¹¶ä¸”ç®—æ³•çš„æ•ˆç‡ä¸æ˜¯å¾ˆé«˜ã€‚ å°†kä¸ªç±»æå–å‡ºæ¥ä»¥åï¼Œæˆ‘ä»¬éœ€è¦å¯¹å­—å…¸è¿›è¡Œæ’åºæ“ä½œï¼Œä¸ºäº†å‡å°éå†çš„æ—¶é—´éœ€è¦è®¾è®¡ä¸€ç§æ–¹ä¾¿æŸ¥æ‰¾çš„æ•°æ®ç»“æ„ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯K-d tree ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ k-d treeï¼škåˆ†ææ ‘ï¼Œdå±‚ï¼Œå³æ€»å…±$k^d$ä¸ªWordï¼Œéœ€è¦æœ€å¤šdæ¬¡æ¯”è¾ƒï¼Œå…¶å¯¹åº”çš„å¤æ‚åº¦ä¸º$O(kd)$ï¼Œè¿™é‡Œ$n=k^d$æ­¤æ—¶æ˜¯å¯¹æ•°çº§åˆ«çš„å¤æ‚åº¦ã€‚ ç›¸ä¼¼åº¦çš„è®¡ç®—ä¸‹é¢ç»™å®šå­—å…¸ï¼Œè·å–å›¾ç‰‡é‡Œå¯¹åº”çš„Wordä¹‹åï¼Œå°±å¯ä»¥è¿›è¡Œç›¸ä¼¼åº¦çš„è®¡ç®—äº†ã€‚ä½†æ˜¯ï¼Œè¿™é‡Œæ¯ä¸ªWordçš„ä½œç”¨å¹¶éæ˜¯ä¸€æ ·çš„ï¼Œéœ€è¦å°±æ˜¯å¯¹å…¶è¿›è¡Œä¸€å®šçš„åŠ æƒå¤„ç†ã€‚é‚£ä¹ˆè¿™é‡Œå¼•å…¥Term Frequency-Inverse Document Frequencyï¼Œç®€å†™ä¸ºTF-IDFï¼Œæ¥è¿›è¡Œæƒé‡çš„è®¡ç®—ï¼š TFçš„æ€æƒ³ï¼šæŸå•è¯åœ¨å›¾åƒä¸­çš„ä¸­ç»å¸¸å‡ºç°ï¼Œå…¶åŒºåˆ†åº¦å°±è¶Šå¤§ã€‚TFéƒ¨åˆ†åˆ™éœ€è¦å¯¹å›¾åƒçš„ç‰¹å¾è¿›è¡Œè®¡ç®—ã€‚ IDFçš„æ€æƒ³ï¼šæŸå•è¯åœ¨å­—å…¸ä¸­å‡ºç°çš„æ¦‚ç‡è¶Šä½ï¼Œå…¶åœ¨åˆ†ç±»å›¾ç‰‡çš„åŒºåˆ†åº¦å°±è¶Šå¤§ã€‚IDFéƒ¨åˆ†å¯åœ¨å­—å…¸è®­ç»ƒè¿‡ç¨‹ä¸­è®¡ç®—ã€‚ è€ƒè™‘æƒé‡ä»¥åï¼Œå¯¹äºæŸå¹…å›¾åƒAï¼Œå®ƒçš„ç‰¹å¾ç‚¹å¯å¯¹åº”åˆ°è®¸å¤šä¸ªå•è¯ï¼Œç»„æˆå®ƒçš„BoWï¼š A=\\{(\\omega_1,\\eta_1),(\\omega_2,\\eta_2),\\cdots,(\\omega_N,\\eta_N)\\}ç”±äºç›¸ä¼¼çš„ç‰¹å¾å¯èƒ½è½åˆ°åŒä¸€ä¸ªç±»ä¸­ï¼Œå› æ­¤å®é™…çš„$v_A$ä¸­ä¼šå­˜åœ¨å¤§é‡çš„é›¶ã€‚æ— è®ºå¦‚ä½•ï¼Œé€šè¿‡è¯è¢‹æˆ‘ä»¬ç”¨å•ä¸ªå‘é‡vAæè¿°äº†ä¸€å¹…å›¾åƒAã€‚è¿™ä¸ªå‘é‡$v_A$æ˜¯ä¸€ä¸ªç¨€ç–çš„å‘é‡ï¼Œå®ƒçš„éé›¶éƒ¨åˆ†æŒ‡ç¤ºäº†å›¾åƒAä¸­å«æœ‰å“ªäº›å•è¯,è€Œè¿™äº›éƒ¨åˆ†çš„å€¼ä¸ºTF-IDF çš„å€¼ã€‚ å®éªŒå’Œè®¨è®ºç›¸ä¼¼æ€§çš„è¯„ä»·ï¼Œè¿™é‡Œè¯„ä»·ç›¸ä¼¼æ€§æ˜¯ä¼šç›´æ¥æ ¹æ®ç›¸ä¼¼æ€§çš„è®¡ç®—å…¬å¼æ¥è®¡ç®—ï¼Œä½†æ˜¯å…¶å€¼çš„ç»å¯¹çš„å¤§å°å¹¶ä¸èƒ½å¾ˆå¥½çš„è§£å†³å®é™…çš„é—®é¢˜ï¼Œä¸€èˆ¬ä½¿ç”¨çš„æ˜¯ç›¸å¯¹å€¼ã€‚ è€ƒè™‘åˆ°è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬ä¼šå–ä¸€ä¸ªå…ˆéªŒç›¸ä¼¼åº¦$s(v_t,v_{t-\\Delta t})$ï¼Œå®ƒè¡¨ç¤ºæŸæ—¶åˆ»å…³é”®å¸§å›¾åƒä¸ä¸Šä¸€æ—¶åˆ»çš„å…³é”®å¸§çš„ç›¸ä¼¼æ€§ã€‚ç„¶åï¼Œå…¶ä»–çš„åˆ†å€¼éƒ½å‚ç…§è¿™ä¸ªå€¼è¿›è¡Œå½’ä¸€åŒ–ï¼š s(v_t,v_{t_j})'=s(v_t,v_{t_j})/s(v_t,v_{t-\\Delta t})ç«™åœ¨è¿™ä¸ªè§’åº¦ä¸Šï¼Œå¦‚æœå½“å‰å¸§ä¸ä¹‹å‰æŸå…³é”®å¸§çš„ç›¸ä¼¼åº¦è¶…è¿‡å½“å‰å¸§ä¸ä¸Šä¸€ä¸ªå…³é”®å¸§ç›¸ä¼¼åº¦çš„3å€ï¼Œå°±è®¤ä¸ºå¯èƒ½å­˜åœ¨å›ç¯ã€‚è¿™ä¸ªæ­¥éª¤é¿å…äº†å¼•å…¥ç»å¯¹çš„ç›¸ä¼¼æ€§é˜ˆå€¼ï¼Œä½¿å¾—ç®—æ³•èƒ½å¤Ÿé€‚åº”æ›´å¤šçš„ç¯å¢ƒã€‚ å°±æ˜¯å‰é¢å‡ å¸§å¾ˆé«˜ï¼Œä¹‹åçš„å‡ å¸§æ…¢æ…¢çš„ä¸‹é™å°±æ˜¯ä»£è¡¨å¯èƒ½å‡ºç°çš„å›ç¯ï¼Œæˆ–è€…ä¹‹å‰æ¯”è¾ƒå°ï¼Œä¹‹åæ…¢æ…¢çš„ä¸Šå‡ï¼Œä½†æ˜¯å‡ºç°çªå˜ä¸ä»£è¡¨å…¶å‡ºç°äº†å›ç¯æ£€æµ‹ã€‚ ç”±äºè¯è¢‹æ¨¡å‹è‡ªèº«çš„é—®é¢˜ï¼Œä¼šå¯¼è‡´å‡ºç°æ„ŸçŸ¥åå·®ï¼Œå°†ä¸€äº›äº§ç”Ÿä¸€äº›çœŸé˜´æ€§çš„ç»“æœï¼Œæ­¤æ—¶éœ€è¦ä¸€å®šçš„éªŒè¯çš„æ‰‹æ®µï¼Œè¿™é‡Œä¸»è¦çš„æ–¹æ³•æœ‰ä¸¤ä¸ªï¼š ä¸€ä¸ªæ–¹æ³•æ˜¯è®¾ç«‹å›ç¯çš„ç¼“å­˜æœºåˆ¶ï¼Œè®¤ä¸ºå•æ¬¡æ£€æµ‹åˆ°çš„å›ç¯å¹¶ä¸è¶³ä»¥æ„æˆè‰¯å¥½çš„çº¦æŸï¼Œè€Œåœ¨ä¸€æ®µæ—¶é—´ä¸­ä¸€ç›´æ£€æµ‹åˆ°çš„å›ç¯ï¼Œæ‰æ˜¯æ­£ç¡®çš„å›ç¯ã€‚è¿™å¯ä»¥çœ‹æˆæ—¶é—´ä¸Šçš„ä¸€è‡´æ€§æ£€æµ‹ã€‚ å¦ä¸€ä¸ªæ–¹æ³•æ˜¯ç©ºé—´ä¸Šçš„ä¸€è‡´æ€§æ£€æµ‹ï¼Œå³å¯¹å›ç¯æ£€æµ‹åˆ°çš„ä¸¤ä¸ªå¸§è¿›è¡Œç‰¹å¾åŒ¹é…ï¼Œä¼°è®¡ç›¸æœºçš„è¿åŠ¨ã€‚ç„¶åï¼ŒæŠŠè¿åŠ¨æ”¾åˆ°ä¹‹å‰çš„ä½å§¿å›¾ä¸­ï¼Œæ£€æŸ¥ä¸ä¹‹å‰çš„ä¼°è®¡æ˜¯å¦æœ‰å¾ˆå¤§çš„å‡ºå…¥ã€‚ å®è·µé¦–å…ˆå¯¼å…¥å¯¹åº”çš„CMakeList.txtæ–‡ä»¶å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223cmake_minimum_required( VERSION 2.8 )project( loop_closure )set( CMAKE_BUILD_TYPE &quot;Release&quot; )set( CMAKE_CXX_FLAGS &quot;-std=c++11 -O3&quot; )# opencv find_package( OpenCV REQUIRED )include_directories( ${OpenCV_INCLUDE_DIRS} )# dbow3 # dbow3 is a simple lib so I assume you installed it in default directory set( DBoW3_INCLUDE_DIRS &quot;/usr/local/include&quot; )set( DBoW3_LIBS &quot;/usr/local/lib/libDBoW3.so&quot; )add_executable( feature_training feature_training.cpp )target_link_libraries( feature_training ${OpenCV_LIBS} ${DBoW3_LIBS} )add_executable( loop_closure loop_closure.cpp )target_link_libraries( loop_closure ${OpenCV_LIBS} ${DBoW3_LIBS} )add_executable( gen_vocab gen_vocab_large.cpp )target_link_libraries( gen_vocab ${OpenCV_LIBS} ${DBoW3_LIBS} ) æ³¨æ„è¿™é‡Œä¸»è¦çš„é—®é¢˜ä¸ºå°†åŸæ¥çš„set( DBoW3_LIBS &quot;/usr/local/lib/libDBoW3.a&quot; )æ”¹æˆset( DBoW3_LIBS &quot;/usr/local/lib/libDBoW3.so&quot; ) ä¸‹é¢é¦–å…ˆè¿›è¡Œè¯»å–å›¾ç‰‡ä¸­çš„ç‰¹å¾ç‚¹å’Œæè¿°å­æ¥æ„é€ æå­—å…¸ï¼Œè¿™é‡Œä¸»è¦è¯»å–å›¾ç‰‡çš„ORBç‰¹å¾ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647#include &quot;DBoW3/DBoW3.h&quot;#include &lt;opencv2/core/core.hpp&gt;#include &lt;opencv2/highgui/highgui.hpp&gt;#include &lt;opencv2/features2d/features2d.hpp&gt;#include &lt;iostream&gt;#include &lt;vector&gt;#include &lt;string&gt;using namespace cv;using namespace std;/*************************************************** * æœ¬èŠ‚æ¼”ç¤ºäº†å¦‚ä½•æ ¹æ®data/ç›®å½•ä¸‹çš„åå¼ å›¾è®­ç»ƒå­—å…¸ * ************************************************/int main( int argc, char** argv ) { // read the image cout&lt;&lt;&quot;reading images... &quot;&lt;&lt;endl; vector&lt;Mat&gt; images; for ( int i=0; i&lt;10; i++ ) { // string path = &quot;./data&quot;+to_string(i+1)+&quot;.png&quot;; string path = &quot;../data/1.png&quot;; images.push_back( imread(path) ); } // detect ORB features cout&lt;&lt;&quot;detecting ORB features ... &quot;&lt;&lt;endl; Ptr&lt; Feature2D &gt; detector = ORB::create(); vector&lt;Mat&gt; descriptors; for ( Mat&amp; image:images ) { vector&lt;KeyPoint&gt; keypoints; Mat descriptor; detector-&gt;detectAndCompute( image, Mat(), keypoints, descriptor ); descriptors.push_back( descriptor ); } // create vocabulary cout&lt;&lt;&quot;creating vocabulary ... &quot;&lt;&lt;endl; DBoW3::Vocabulary vocab; vocab.create( descriptors ); cout&lt;&lt;&quot;vocabulary info: &quot;&lt;&lt;vocab&lt;&lt;endl; vocab.save( &quot;vocabulary.yml.gz&quot; ); cout&lt;&lt;&quot;done&quot;&lt;&lt;endl; return 0;} æ³¨æ„è·¯å¾„çš„è¯»å–çš„ä½ç½®ï¼Œæ˜¯å¦æ­£ç¡®ã€‚ å¯¹äºåªæœ‰åå¼ å›¾ç‰‡è®­ç»ƒå‡ºæ¥çš„å­—å…¸æ¥è¯´ï¼Œä½†æ˜¯å¯èƒ½ä¸å¤Ÿç”¨ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æ›´å¤§è§„æ¨¡çš„å­—å…¸ï¼Œä»¥ä¸‹æ˜¯è®­ç»ƒçš„ä¸»è¦çš„ä»£ç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263#include &quot;DBoW3/DBoW3.h&quot;#include &lt;opencv2/core/core.hpp&gt;#include &lt;opencv2/highgui/highgui.hpp&gt;#include &lt;opencv2/features2d/features2d.hpp&gt;#include &lt;iostream&gt;#include &lt;vector&gt;#include &lt;string&gt;using namespace cv;using namespace std;int main( int argc, char** argv ){ string dataset_dir = argv[1]; ifstream fin ( dataset_dir+&quot;/associate.txt&quot; ); if ( !fin ) { cout&lt;&lt;&quot;please generate the associate file called associate.txt!&quot;&lt;&lt;endl; return 1; } vector&lt;string&gt; rgb_files, depth_files; vector&lt;double&gt; rgb_times, depth_times; while ( !fin.eof() ) { string rgb_time, rgb_file, depth_time, depth_file; fin&gt;&gt;rgb_time&gt;&gt;rgb_file&gt;&gt;depth_time&gt;&gt;depth_file; rgb_times.push_back ( atof ( rgb_time.c_str() ) ); depth_times.push_back ( atof ( depth_time.c_str() ) ); rgb_files.push_back ( dataset_dir+&quot;/&quot;+rgb_file ); depth_files.push_back ( dataset_dir+&quot;/&quot;+depth_file ); if ( fin.good() == false ) break; } fin.close(); cout&lt;&lt;&quot;generating features ... &quot;&lt;&lt;endl; vector&lt;Mat&gt; descriptors; Ptr&lt; Feature2D &gt; detector = ORB::create(); int index = 1; for ( string rgb_file:rgb_files ) { Mat image = imread(rgb_file); vector&lt;KeyPoint&gt; keypoints; Mat descriptor; detector-&gt;detectAndCompute( image, Mat(), keypoints, descriptor ); descriptors.push_back( descriptor ); cout&lt;&lt;&quot;extracting features from image &quot; &lt;&lt; index++ &lt;&lt;endl; } cout&lt;&lt;&quot;extract total &quot;&lt;&lt;descriptors.size()*500&lt;&lt;&quot; features.&quot;&lt;&lt;endl; // create vocabulary cout&lt;&lt;&quot;creating vocabulary, please wait ... &quot;&lt;&lt;endl; DBoW3::Vocabulary vocab; vocab.create( descriptors ); cout&lt;&lt;&quot;vocabulary info: &quot;&lt;&lt;vocab&lt;&lt;endl; vocab.save( &quot;vocab_larger.yml.gz&quot; ); cout&lt;&lt;&quot;done&quot;&lt;&lt;endl; return 0;} ä¹‹åæ˜¯é€šè¿‡ä¹‹å‰æ„å»ºçš„å­—å…¸æ¥è®¡ç®—ç›¸ä¼¼åº¦ï¼Œé¦–å…ˆæˆ‘ä»¬ä¹‹å‰10å¼ å›¾ç‰‡åˆ›å»ºçš„å­—å…¸vocabulary.yml.gzï¼Œä¹‹åå†è¯»å–2900å¼ å›¾ç‰‡åˆ›å»ºçš„å­—å…¸vocab_larger.yml.gzä½†æ˜¯è¯»å–è¿™ä¸ªå­—å…¸å¯èƒ½è¦èŠ±è´¹å¤§é‡çš„æ—¶é—´ã€‚å…¶ä¸»è¦çš„ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071#include &quot;DBoW3/DBoW3.h&quot;#include &lt;opencv2/core/core.hpp&gt;#include &lt;opencv2/highgui/highgui.hpp&gt;#include &lt;opencv2/features2d/features2d.hpp&gt;#include &lt;iostream&gt;#include &lt;vector&gt;#include &lt;string&gt;using namespace cv;using namespace std;/*************************************************** * æœ¬èŠ‚æ¼”ç¤ºäº†å¦‚ä½•æ ¹æ®å‰é¢è®­ç»ƒçš„å­—å…¸è®¡ç®—ç›¸ä¼¼æ€§è¯„åˆ† * ************************************************/int main(int argc, char **argv) { // read the images and database cout &lt;&lt; &quot;reading database&quot; &lt;&lt; endl; // DBoW3::Vocabulary vocab(&quot;./vocabulary.yml.gz&quot;); DBoW3::Vocabulary vocab(&quot;../vocab_larger.yml.gz&quot;); // use large vocab if you want: if (vocab.empty()) { cerr &lt;&lt; &quot;Vocabulary does not exist.&quot; &lt;&lt; endl; return 1; } cout &lt;&lt; &quot;reading images... &quot; &lt;&lt; endl; vector&lt;Mat&gt; images; for (int i = 0; i &lt; 10; i++) { string path = &quot;../data/&quot; + to_string(i + 1) + &quot;.png&quot;; images.push_back(imread(path)); } // NOTE: in this case we are comparing images with a vocabulary generated by themselves, this may lead to overfit. // detect ORB features cout &lt;&lt; &quot;detecting ORB features ... &quot; &lt;&lt; endl; Ptr&lt;Feature2D&gt; detector = ORB::create(); vector&lt;Mat&gt; descriptors; for (Mat &amp;image:images) { vector&lt;KeyPoint&gt; keypoints; Mat descriptor; detector-&gt;detectAndCompute(image, Mat(), keypoints, descriptor); descriptors.push_back(descriptor); } // we can compare the images directly or we can compare one image to a database // images : cout &lt;&lt; &quot;comparing images with images &quot; &lt;&lt; endl; for (int i = 0; i &lt; images.size(); i++) { DBoW3::BowVector v1; vocab.transform(descriptors[i], v1); for (int j = i; j &lt; images.size(); j++) { DBoW3::BowVector v2; vocab.transform(descriptors[j], v2); double score = vocab.score(v1, v2); cout &lt;&lt; &quot;image &quot; &lt;&lt; i &lt;&lt; &quot; vs image &quot; &lt;&lt; j &lt;&lt; &quot; : &quot; &lt;&lt; score &lt;&lt; endl; } cout &lt;&lt; endl; } // or with database cout &lt;&lt; &quot;comparing images with database &quot; &lt;&lt; endl; DBoW3::Database db(vocab, false, 0); for (int i = 0; i &lt; descriptors.size(); i++) db.add(descriptors[i]); cout &lt;&lt; &quot;database info: &quot; &lt;&lt; db &lt;&lt; endl; for (int i = 0; i &lt; descriptors.size(); i++) { DBoW3::QueryResults ret; db.query(descriptors[i], ret, 4); // max result=4 cout &lt;&lt; &quot;searching for image &quot; &lt;&lt; i &lt;&lt; &quot; returns &quot; &lt;&lt; ret &lt;&lt; endl &lt;&lt; endl; } cout &lt;&lt; &quot;done.&quot; &lt;&lt; endl;}","link":"/2022/06/29/SLAM/ch11-%E5%9B%9E%E7%8E%AF%E6%A3%80%E6%B5%8B/"},{"title":"Ch12 å»ºå›¾ ç¬¬ä¸€éƒ¨åˆ† ç«‹ä½“è§†è§‰å»ºå›¾","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡é¦–å…ˆä»‹ç»äº†ä¸€ä¸‹å»ºå›¾çš„ä¸»è¦ä»»åŠ¡ï¼Œæœ¬ç« å»ºå›¾å’Œä¹‹å‰ä¸åŒï¼Œä¹‹å‰ä½¿ç”¨çš„æ»¤æ³¢å™¨æˆ–æ˜¯BAæ–¹æ³•ä¸»è¦æ˜¯åŸºäºå…³é”®å¸§çš„ç¨€ç–åœ°å›¾ï¼Œæœ¬ç« å»ºçš„ä¸»è¦æ˜¯ç¨ å¯†åœ°å›¾ã€‚æœ¬æ–‡äºæ˜¯å°±åŸºäºç§»åŠ¨çš„å•ç›®ç›¸æœºè¿›è¡Œç«‹ä½“è§†è§‰çš„å»ºå›¾ï¼Œå…¶ä¸­ä½¿ç”¨çš„ä¸»è¦ç‰¹å¾æå–æ–¹æ³•æ˜¯æçº¿æœç´¢å’Œå—åŒ¹é…è®¡ç®—ç›¸ä¼¼åº¦NCCçš„å€¼ï¼Œä¹‹åè¿›è¡Œé«˜æ–¯åˆ†å¸ƒæ·±åº¦æ»¤æ³¢æ¥ä¼°è®¡å½“å‰å¸§çš„æ·±åº¦ã€‚ æ¦‚è¿°åœ¨ä¹‹å‰è§†è§‰é‡Œç¨‹è®¡å’ŒBAä¼˜åŒ–éƒ¨åˆ†ï¼Œæˆ‘ä»¬ä¸»è¦å…³æ³¨çš„æ˜¯å…³é”®ç‚¹å³è·¯æ ‡ç‚¹å’Œç›¸æœºçš„ä½ç½®ï¼Œæ­¤æ—¶å»ºç«‹çš„ä¸€ä¸ªç®€ç­”çš„ç¨€ç–çš„åœ°å›¾ï¼Œå…¶ä¸»è¦æ˜¯æ»¡è¶³ä¸€äº›ç®€å•çš„å®šä½çš„æ“ä½œï¼Œä½†æ˜¯å¯¹äºä¸€äº›å¤æ‚çš„åº”ç”¨æ¥è¯´ï¼Œæ¯”å¦‚å¯¼èˆªå’Œé¿éšœçš„é—®é¢˜å°±æ˜¯æ¯”è¾ƒçš„ç¨€ç–åœ°å›¾æ˜¯æ— æ³•æ»¡è¶³è¦æ±‚çš„ã€‚ä¸‹é¢åˆ—ä¸¾ä¸åŒçš„åº”ç”¨å¯¹äºçš„éœ€æ±‚ï¼š å®šä½ã€‚å®šä½æ˜¯åœ°å›¾çš„ä¸€é¡¹åŸºæœ¬åŠŸèƒ½ã€‚åœ¨å‰é¢çš„è§†è§‰é‡Œç¨‹è®¡éƒ¨åˆ†ï¼Œæˆ‘ä»¬è®¨è®ºäº†å¦‚ä½•åˆ©ç”¨å±€éƒ¨åœ°å›¾å®ç°å®šä½ã€‚åœ¨å›ç¯æ£€æµ‹éƒ¨åˆ†ï¼Œæˆ‘ä»¬ä¹Ÿçœ‹åˆ°ï¼Œåªè¦æœ‰å…¨å±€çš„æè¿°å­ä¿¡æ¯ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½é€šè¿‡å›ç¯æ£€æµ‹ç¡®å®šæœºå™¨äººçš„ä½ç½®ã€‚æˆ‘ä»¬è¿˜å¸Œæœ›èƒ½å¤ŸæŠŠåœ°å›¾ä¿å­˜ä¸‹æ¥ï¼Œè®©æœºå™¨äººåœ¨ä¸‹æ¬¡å¼€æœºåä¾ç„¶èƒ½åœ¨åœ°å›¾ä¸­å®šä½ï¼Œè¿™æ ·åªéœ€å¯¹åœ°å›¾è¿›è¡Œä¸€æ¬¡å»ºæ¨¡ï¼Œè€Œä¸æ˜¯æ¯æ¬¡å¯åŠ¨æœºå™¨äººéƒ½é‡æ–°åšä¸€æ¬¡å®Œæ•´çš„SLAMã€‚ å¯¼èˆªã€‚å¯¼èˆªæ˜¯æŒ‡æœºå™¨äººèƒ½å¤Ÿåœ¨åœ°å›¾ä¸­è¿›è¡Œè·¯å¾„è§„åˆ’ï¼Œåœ¨ä»»æ„ä¸¤ä¸ªåœ°å›¾ç‚¹é—´å¯»æ‰¾è·¯å¾„ï¼Œç„¶åæ§åˆ¶è‡ªå·±è¿åŠ¨åˆ°ç›®æ ‡ç‚¹çš„è¿‡ç¨‹ã€‚åœ¨è¯¥è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬è‡³å°‘éœ€è¦çŸ¥é“åœ°å›¾ä¸­å“ªäº›åœ°æ–¹ä¸å¯é€šè¿‡ï¼Œè€Œå“ªäº›åœ°æ–¹æ˜¯å¯ä»¥é€šè¿‡çš„ã€‚è¿™å°±è¶…å‡ºäº†ç¨€ç–ç‰¹å¾ç‚¹åœ°å›¾çš„èƒ½åŠ›èŒƒå›´ï¼Œå¿…é¡»æœ‰å¦å¤–çš„åœ°å›¾å½¢å¼ã€‚ç¨åæˆ‘ä»¬ä¼šè¯´,è¿™è‡³å°‘å¾—æ˜¯ä¸€ç§ç¨ å¯†çš„åœ°å›¾ã€‚ é¿éšœã€‚é¿éšœä¹Ÿæ˜¯æœºå™¨äººç»å¸¸ç¢°åˆ°çš„ä¸€ä¸ªé—®é¢˜ã€‚å®ƒä¸å¯¼èˆªç±»ä¼¼ï¼Œä½†æ›´æ³¨é‡å±€éƒ¨çš„ã€åŠ¨æ€çš„éšœç¢ç‰©çš„å¤„ç†ã€‚åŒæ ·ï¼Œä»…æœ‰ç‰¹å¾ç‚¹ï¼Œæˆ‘ä»¬æ— æ³•åˆ¤æ–­æŸä¸ªç‰¹å¾ç‚¹æ˜¯å¦ä¸ºéšœç¢ç‰©ï¼Œæ‰€ä»¥éœ€è¦ç¨ å¯†åœ°å›¾ã€‚ é‡å»ºã€‚æœ‰æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›åˆ©ç”¨SLAMè·å¾—å‘¨å›´ç¯å¢ƒçš„é‡å»ºæ•ˆæœã€‚è¿™ç§åœ°å›¾ä¸»è¦ç”¨äºå‘äººå±•ç¤ºï¼Œæ‰€ä»¥å¸Œæœ›å®ƒçœ‹ä¸Šå»æ¯”è¾ƒèˆ’æœã€ç¾è§‚ã€‚æˆ–è€…ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠè¯¥åœ°å›¾ç”¨äºé€šä¿¡ï¼Œä½¿å…¶ä»–äººèƒ½å¤Ÿè¿œç¨‹è§‚çœ‹æˆ‘ä»¬é‡å»ºå¾—åˆ°çš„ä¸‰ç»´ç‰©ä½“æˆ–åœºæ™¯â€”â€”ä¾‹å¦‚ä¸‰ç»´çš„è§†é¢‘é€šè¯æˆ–è€…ç½‘ä¸Šè´­ç‰©ç­‰ã€‚è¿™ç§åœ°å›¾äº¦æ˜¯ç¨ å¯†çš„ï¼Œå¹¶ä¸”è¿˜å¯¹å®ƒçš„å¤–è§‚æœ‰ä¸€äº›è¦æ±‚ã€‚æˆ‘ä»¬å¯èƒ½ä¸æ»¡è¶³äºç¨ å¯†ç‚¹äº‘é‡å»º,æ›´å¸Œæœ›èƒ½å¤Ÿæ„å»ºå¸¦çº¹ç†çš„å¹³é¢ï¼Œå°±åƒç”µå­æ¸¸æˆä¸­çš„ä¸‰ç»´åœºæ™¯é‚£æ ·ã€‚ äº¤äº’ã€‚äº¤äº’ä¸»è¦æŒ‡äººä¸åœ°å›¾ä¹‹é—´çš„äº’åŠ¨ã€‚ä¾‹å¦‚ï¼Œåœ¨å¢å¼ºç°å®ä¸­ï¼Œæˆ‘ä»¬ä¼šåœ¨æˆ¿é—´é‡Œæ”¾ç½®è™šæ‹Ÿçš„ç‰©ä½“ï¼Œå¹¶ä¸è¿™äº›è™šæ‹Ÿç‰©ä½“ä¹‹é—´æœ‰ä¸€äº›äº’åŠ¨â€”â€”ä¾‹å¦‚æˆ‘ä»¬ä¼šç‚¹å‡»å¢™é¢ä¸Šæ”¾ç€çš„è™šæ‹Ÿç½‘é¡µæµè§ˆå™¨æ¥è§‚çœ‹è§†é¢‘,æˆ–è€…å‘å¢™é¢æŠ•æ·ç‰©ä½“,å¸Œæœ›å®ƒä»¬æœ‰ï¼ˆè™šæ‹Ÿçš„)ç‰©ç†ç¢°æ’ã€‚å¦å¤–ï¼Œæœºå™¨äººåº”ç”¨ä¸­ä¹Ÿä¼šæœ‰ä¸äººã€ä¸åœ°å›¾ä¹‹é—´çš„äº¤äº’ã€‚ä¾‹å¦‚ï¼Œæœºå™¨äººå¯èƒ½ä¼šæ”¶åˆ°å‘½ä»¤â€œå–æ¡Œå­ä¸Šçš„æŠ¥çº¸â€,é‚£ä¹ˆ,é™¤äº†æœ‰ç¯å¢ƒåœ°å›¾,æœºå™¨äººè¿˜éœ€è¦çŸ¥é“å“ª-å—åœ°å›¾æ˜¯â€œæ¡Œå­â€ï¼Œä»€ä¹ˆå«ä½œâ€œä¹‹ä¸Šâ€ï¼Œä»€ä¹ˆå«ä½œâ€œæŠ¥çº¸â€ã€‚è¿™å°±éœ€è¦æœºå™¨äººå¯¹åœ°å›¾æœ‰æ›´é«˜å±‚é¢çš„è®¤çŸ¥â€”â€”ä¹Ÿç§°ä¸ºè¯­ä¹‰åœ°å›¾ã€‚ è¿™é‡Œéšç€åº”ç”¨çš„ä¸æ–­å¢åŠ ï¼Œå…¶å¯¹äºåœ°å›¾çš„éœ€æ±‚ä¹Ÿåœ¨ä¸æ–­åœ°å˜åŒ–ï¼Œä»æœ€ç®€å•çš„ç¨€ç–åœ°å›¾ï¼Œåˆ°å»ºç«‹ç¨ å¯†åœ°å›¾æ¥æ»¡è¶³å¯¹åº”çš„å¯¼èˆªã€é¿éšœï¼Œå†åˆ°åœ¨ç¨ å¯†åœ°å›¾çš„åŸºç¡€ä¸Šå¢åŠ é—®é¢˜ä¿¡æ¯æ¥æ»¡è¶³ä¸‰ç»´é‡å»ºçš„è¦æ±‚ï¼Œæœ€åä¸ºäº†æ»¡è¶³ä¸‰ç»´äº¤äº’çš„è¦æ±‚ï¼Œç»™åœ°å›¾åŠ å…¥äº†ä¸€å®šçš„è¯­ä¹‰ä¿¡æ¯ã€‚ æœ¬ç« å°†ä¸»è¦å›´ç»•ç€ç¨ å¯†åœ°å›¾å’ŒåŠ å…¥çº¹ç†çš„æ–¹é¢è¿›è¡Œä»‹ç»è®¨è®ºã€‚ å•ç›®ç¨ å¯†é‡å»ºç«‹ä½“è§†è§‰è§†è§‰SLAMçš„ç¨ å¯†é‡å»ºé—®é¢˜æ˜¯æœ¬è®²çš„ç¬¬ä¸€ä¸ªé‡è¦è¯é¢˜ã€‚ç›¸æœºï¼Œè¢«è®¤ä¸ºæ˜¯åªæœ‰è§’åº¦çš„ä¼ æ„Ÿå™¨( Bearing only)ã€‚å•å¹…å›¾åƒä¸­çš„åƒç´ ï¼Œåªèƒ½æä¾›ç‰©ä½“ä¸ç›¸æœºæˆåƒå¹³é¢çš„è§’åº¦åŠç‰©ä½“é‡‡é›†åˆ°çš„äº®åº¦ï¼Œè€Œæ— æ³•æä¾›ç‰©ä½“çš„è·ç¦»(Range )ã€‚è€Œåœ¨ç¨ å¯†é‡å»ºä¸­ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“æ¯ä¸€ä¸ªåƒç´ ç‚¹ï¼ˆæˆ–å¤§éƒ¨åˆ†åƒç´ ç‚¹ï¼‰çš„è·ç¦»,å¯¹æ­¤å¤§è‡´ä¸Šæœ‰å¦‚ä¸‹è§£å†³æ–¹æ¡ˆ: ä½¿ç”¨å•ç›®ç›¸æœºï¼Œä¼°è®¡ç›¸æœºè¿åŠ¨ï¼Œå¹¶ä¸”ä¸‰è§’åŒ–è®¡ç®—åƒç´ çš„è·ç¦»ã€‚ ä½¿ç”¨åŒç›®ç›¸æœºï¼Œåˆ©ç”¨å·¦å³ç›®çš„è§†å·®è®¡ç®—åƒç´ çš„è·ç¦»ï¼ˆå¤šç›®åŸç†ç›¸åŒ)ã€‚ ä½¿ç”¨RGB-Dç›¸æœºç›´æ¥è·å¾—åƒç´ è·ç¦»ã€‚ å…¶ä¸­ï¼Œå‰é¢çš„ä¸¤ç§æ–¹æ³•è¢«ç§°ä¸ºæ˜¯ç«‹ä½“è§†è§‰ï¼Œå…¶ä¸­ç§»åŠ¨å•ç›®ç›¸æœºçš„åˆè¢«ç§°ä¸ºç§»åŠ¨è§†è§’çš„ç«‹ä½“è§†è§‰ã€‚ç›¸æ¯”RGBDç›¸æœºï¼Œå‰é¢çš„è®¡ç®—é‡æ¯”è¾ƒå¤§ï¼Œè€Œä¸”å¯¹åº”çš„ç²¾åº¦ä¹Ÿæ¯”è¾ƒä½ï¼Œä½†æ˜¯RGBDç›¸æœºåœ¨å®¤å¤–å¤§çš„åœºæ™¯ä¸‹çš„ä½¿ç”¨çš„æ•ˆæœä¹Ÿä¸æ˜¯å¾ˆå¥½ï¼Œåœ¨å®¤å¤–è¿˜æ˜¯é€šè¿‡ç«‹ä½“è§†è§‰çš„æ–¹æ³•ã€‚ è¿™é‡Œï¼Œç±»æ¯”ä¹‹å‰ç¨€ç–å»ºå›¾çš„æ–¹å¼ï¼Œå›é¡¾ä¹‹å‰ç‰¹å¾ç‚¹éƒ¨åˆ†çš„è¿‡ç¨‹ï¼š å¯¹å›¾åƒæå–ç‰¹å¾ï¼Œå¹¶æ ¹æ®æè¿°å­è®¡ç®—ç‰¹å¾ä¹‹é—´çš„åŒ¹é…ã€‚æ¢è¨€ä¹‹ï¼Œé€šè¿‡ç‰¹å¾ï¼Œæˆ‘ä»¬å¯¹æŸä¸€ä¸ªç©ºé—´ç‚¹è¿›è¡Œäº†è·Ÿè¸ª,çŸ¥é“äº†å®ƒåœ¨å„ä¸ªå›¾åƒä¹‹é—´çš„ä½ç½®ã€‚ ç”±äºæ— æ³•ä»…ç”¨ä¸€å¹…å›¾åƒç¡®å®šç‰¹å¾ç‚¹çš„ä½ç½®ï¼Œæ‰€ä»¥å¿…é¡»é€šè¿‡ä¸åŒè§†è§’ä¸‹çš„è§‚æµ‹ä¼°è®¡å®ƒçš„æ·±åº¦ï¼ŒåŸç†å³å‰é¢è®²è¿‡çš„ä¸‰è§’æµ‹é‡ã€‚ è€Œå¯¹äºç¨ å¯†çš„å»ºå›¾æ¥è¯´ï¼Œå…¶æ˜¯å°†æ¯ä¸ªåƒç´ éƒ½ä½œä¸ºç‰¹å¾ç‚¹æ¥è®¡ç®—çš„æè¿°å­ï¼Œå› æ­¤å…¶åŒ¹é…é‡‡ç”¨çš„æ˜¯æçº¿æœç´¢å’Œå¿«åŒ¹é…æŠ€æœ¯ã€‚è€Œä¸”ç¡®å®šæ·±åº¦æ˜¯ä¹Ÿæ˜¯é‡‡ç”¨å¤šæ¬¡ä½¿ç”¨ä¸‰è§’æµ‹é‡ç›´è‡³å…¶ä¼°è®¡æ”¶æ•›ã€‚è¿™å°±æ˜¯æ·±åº¦æ»¤æ³¢æŠ€æœ¯ã€‚ æçº¿æœç´¢å’Œå—åŒ¹é…é¦–å…ˆï¼Œæˆ‘ä»¬æ¥æ˜ç¡®ä¸€ä¸‹æçº¿å’Œå—åŒ¹é…çš„å«ä¹‰ï¼š å¦‚å›¾æ‰€ç¤ºï¼Œå·¦è¾¹çš„ç›¸æœºè§‚æµ‹åˆ°äº†æŸä¸ªåƒç´ pã€‚ç”±äºè¿™æ˜¯ä¸€ä¸ªå•ç›®ç›¸æœºï¼Œæ— ä»çŸ¥é“å®ƒçš„æ·±åº¦ï¼Œæ‰€ä»¥å‡è®¾è¿™ä¸ªæ·±åº¦å¯èƒ½åœ¨æŸä¸ªåŒºåŸŸä¹‹å†…ï¼Œä¸å¦¨è¯´æ˜¯æŸæœ€å°å€¼åˆ°æ— ç©·è¿œä¹‹é—´$(d_{min},+\\infty)$ã€‚å› æ­¤ï¼Œè¯¥åƒç´ å¯¹åº”çš„ç©ºé—´ç‚¹å°±åˆ†å¸ƒåœ¨æŸæ¡çº¿æ®µï¼ˆæœ¬ä¾‹ä¸­æ˜¯å°„çº¿)ä¸Šã€‚ä»å¦ä¸€ä¸ªè§†è§’(å³ä¾§ç›¸æœºçœ‹)è¿™æ¡çº¿æ®µçš„æŠ•å½±ä¹Ÿå½¢æˆå›¾åƒå¹³é¢ä¸Šçš„ä¸€æ¡çº¿ï¼Œæˆ‘ä»¬çŸ¥é“è¿™ç§°ä¸ºæçº¿ã€‚ ä½†æ˜¯å¦‚ä½•ç¡®å®šæçº¿ä¸Šé¢çš„é‚£ä¸ª$p_2$æ‰æ˜¯å’Œ$p_1$åŒ¹é…çš„é‚£ä¸ªï¼Œæ‰æ˜¯çš„æƒ…å†µæ˜¯æ²¡æœ‰æè¿°å­ï¼Œæˆ‘ä»¬åªèƒ½åˆ†åˆ«è®¡ç®—æçº¿ä¸Šçš„ç‚¹å’Œ$p_1$çš„ç›¸ä¼¼åº¦ã€‚ ä¸€ç§ç›´è§‚çš„æƒ³æ³•æ˜¯ï¼šæ—¢ç„¶å•ä¸ªåƒç´ çš„äº®åº¦æ²¡æœ‰åŒºåˆ†æ€§ï¼Œæ˜¯å¦å¯ä»¥æ¯”è¾ƒåƒç´ å—å‘¢?æˆ‘ä»¬åœ¨å‘¨å›´å–ä¸€ä¸ªå¤§å°ä¸º $\\omega \\times \\omega$ çš„å°å—,ç„¶ååœ¨æçº¿ä¸Šä¹Ÿå–å¾ˆå¤šåŒæ ·å¤§å°çš„å°å—è¿›è¡Œæ¯”è¾ƒï¼Œå°±å¯ä»¥åœ¨å®šç¨‹åº¦ä¸Šæé«˜åŒºåˆ†æ€§ã€‚è¿™å°±æ˜¯æ‰€è°“çš„å—åŒ¹é…ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œåªæœ‰å‡è®¾åœ¨ä¸åŒå›¾åƒé—´æ•´ä¸ªå°å—çš„ç°åº¦å€¼ä¸å˜ï¼Œè¿™ç§æ¯”è¾ƒæ‰æœ‰æ„ä¹‰ã€‚æ‰€ä»¥ç®—æ³•çš„å‡è®¾ï¼Œä»åƒç´ çš„ç°åº¦ä¸å˜æ€§å˜æˆäº†å›¾åƒå—çš„ç°åº¦ä¸å˜æ€§â€”â€”åœ¨ä¸€å®šç¨‹åº¦ä¸Šå˜å¾—æ›´å¼ºäº†ã€‚ ç°åœ¨å°†å–$p_1$å‘¨å›´çš„å°å—ï¼Œå¹¶ä¸”åœ¨æçº¿ä¸Šä¹Ÿå¯¹åº”çš„å»äº†å¾ˆå¤šå°å—ï¼Œè¿™é‡Œè®°$p_1$æ—è¾¹çš„å°å—ä¸º$\\boldsymbol A \\in \\mathbb R^{\\omega \\times \\omega}$ ï¼Œè¿™é‡Œå°†æçº¿ä¸Šé¢çš„å°å—$\\boldsymbol B_i,i=1,..,n$ ã€‚ä¸‹é¢æ˜¯ä¸åŒçš„è®¡ç®—æ–¹æ³•ï¼š SAD (Sum of Absolute Difference) å³ä¸ºç»å¯¹å€¼ä¹‹å·®ï¼š S(\\boldsymbol{A}, \\boldsymbol{B})_{\\mathrm{SAD}}=\\sum_{i, j}|\\boldsymbol{A}(i, j)-\\boldsymbol{B}(i, j)| SSDã€‚å¹³æ–¹å’ŒæŸå¤±çš„æ„æ€ï¼š S(\\boldsymbol{A}, \\boldsymbol{B})_{\\mathrm{SSD}}=\\sum_{i, j}(\\boldsymbol{A}(i, j)-\\boldsymbol{B}(i, j))^2 NCCã€‚(Normalized Cross Correlation) å½’ä¸€åŒ–äº’ç›¸å…³ï¼Œè¿™ç§æ–¹å¼æ¯”å‰ä¸¤ç§è¦å¤æ‚ï¼Œå®ƒè®¡ç®—çš„æ˜¯ä¸¤ä¸ªå°å—çš„äº’ç›¸å…³æ€§ï¼š S(\\boldsymbol{A}, \\boldsymbol{B})_{\\mathrm{NCC}}=\\frac{\\sum_{i, j} \\boldsymbol{A}(i, j) \\boldsymbol{B}(i, j)}{\\sqrt{\\sum_{i, j} \\boldsymbol{A}(i, j)^{2} \\sum_{i, j} \\boldsymbol{B}(i, j)^{2}}} å’Œæˆ‘ä»¬é‡åˆ°è¿‡çš„è®¸å¤šæƒ…å½¢ä¸€æ ·ï¼Œè¿™äº›è®¡ç®—æ–¹å¼å¾€å¾€å­˜åœ¨ä¸€ä¸ªç²¾åº¦â€“æ•ˆç‡ä¹‹é—´çš„çŸ›ç›¾ã€‚ç²¾åº¦å¥½çš„æ–¹æ³•å¾€å¾€éœ€è¦å¤æ‚çš„è®¡ç®—ï¼Œè€Œç®€å•çš„å¿«é€Ÿç®—æ³•åˆå¾€å¾€æ•ˆæœä¸ä½³ã€‚è¿™éœ€è¦æˆ‘ä»¬åœ¨å®é™…å·¥ç¨‹ä¸­è¿›è¡Œå–èˆã€‚å¦å¤–ï¼Œé™¤äº†è¿™äº›ç®€å•ç‰ˆæœ¬ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæŠŠæ¯ä¸ªå°å—çš„å‡å€¼å»æ‰ï¼Œç§°ä¸ºå»å‡å€¼çš„SSDã€å»å‡å€¼çš„ NCCï¼Œç­‰ç­‰ã€‚å»æ‰å‡å€¼ä¹‹åï¼Œå…è®¸åƒâ€œå°å—Bæ¯”Aæ•´ä½“ä¸Šäº®ä¸€äº›ï¼Œä½†ä»ç„¶å¾ˆç›¸ä¼¼â€è¿™æ ·çš„æƒ…å†µâ€ï¼Œå› æ­¤æ¯”ä¹‹å‰çš„æ›´å¯é ã€‚ è¿™é‡Œçš„ç›¸ä¼¼åº¦åˆ†å¸ƒå‡½æ•°æ˜¯ä¸€ä¸ªéå‡¸çš„å‡½æ•°ï¼Œå­˜åœ¨å¾ˆå¤šçš„å³°å€¼ï¼Œç„¶è€Œä»…ä»…ä¸€ä¸ªç‚¹æ˜¯çœŸå®çš„æƒ…å†µã€‚äºæ˜¯æˆ‘ä»¬å€¾å‘äºä½¿ç”¨æ¦‚ç‡åˆ†å¸ƒæ¥æè¿°æ·±åº¦çš„åˆ†å¸ƒå€¼ï¼Œé—®é¢˜ä¹Ÿå°±è½¬åŒ–æˆä¸ºå¯¹ä¸åŒçš„å›¾ç‰‡è¿›è¡Œæçº¿æœç´¢ï¼Œä¼°è®¡æ·±åº¦åˆ†å¸ƒå°†ä¼šå‘ç”Ÿæ€æ ·çš„å˜åŒ–ï¼Œå³æ‰€è°“çš„æ·±åº¦æ»¤æ³¢å™¨ã€‚ é«˜æ–¯åˆ†å¸ƒçš„æ·±åº¦æ»¤æ³¢å™¨è¿™é‡Œå¯¹åƒç´ è¿›è¡Œæ·±åº¦ä¼°è®¡å…¶å®å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªçŠ¶æ€ä¼°è®¡çš„é—®é¢˜ï¼Œå…¶ä¸­å¯ä»¥ä½¿ç”¨ä¸€èˆ¬çš„éçº¿æ€§ä¼˜åŒ–æ–¹æ³•ï¼Œæˆ–è€…æ˜¯ä½¿ç”¨æ»¤æ³¢çš„æ–¹æ³•ï¼Œè€ƒè™‘åˆ°å…¶ä»–éƒ¨åˆ†æ¯”è¾ƒè€—è´¹è®¡ç®—ï¼Œå› æ­¤è¿™é‡Œé€‰æ‹©ä½¿ç”¨æ»¤æ³¢æ–¹æ³•ã€‚ è®¾æŸä¸ªåƒç´ å€¼çš„æ·±åº¦å€¼dæ»¡è¶³ï¼š$P(d)=N(\\mu,\\sigma^2)$ã€‚ æ¯æ¬¡è¿›æ¥ä¸€ä¸ªæ–°çš„æ•°æ®ï¼Œæˆ‘ä»¬å°±ä¼šè§‚æµ‹åˆ°å…¶æ·±åº¦ï¼ŒåŒæ ·å…¶è§‚æµ‹ä¹Ÿä¸ºé«˜æ–¯åˆ†å¸ƒï¼š$P(d_{obs})=N(\\mu_{obs},\\sigma_{obs}^2)$ã€‚ è¿™é‡Œé€‚åº”è§‚æµ‹åˆ°çš„æ·±åº¦å€¼æ¥æ›´æ–°dçš„åˆ†å¸ƒå€¼ï¼š \\mu_{\\mathrm{fuse}}=\\frac{\\sigma_{\\mathrm{obs}}^{2} \\mu+\\sigma^{2} \\mu_{\\mathrm{obs}}}{\\sigma^{2}+\\sigma_{\\mathrm{obs}}^{2}}, \\quad \\sigma_{\\text {fuse }}^{2}=\\frac{\\sigma^{2} \\sigma_{\\mathrm{obs}}^{2}}{\\sigma^{2}+\\sigma_{\\mathrm{obs}}^{2}}ç”±äºæˆ‘ä»¬ä»…ä»…åªæœ‰ä¸€ä¸ªè§‚æµ‹æ–¹ç¨‹ï¼Œè€Œæ²¡æœ‰è¿åŠ¨æ–¹ç¨‹ï¼Œæ‰€ä»¥è¿™é‡Œä»…ä»…ä½¿ç”¨æ•°æ®èåˆéƒ¨åˆ†ï¼Œä¸éœ€è¦è¿›è¡Œé¢„æµ‹å’Œæ›´æ–°ã€‚ ä¸‹é¢ï¼Œä»‹ç»çš„æ˜¯å¦‚ä½•è§‚æµ‹$\\mu_{obs},\\sigma_{obs^2}$ . è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„å‡ ä½•é—®é¢˜ï¼Œæˆ‘ä»¬åˆ—å†™å‡ºè¿™äº›å‘é‡ä¹‹é—´çš„å‡ ä½•å…³ç³»ï¼š \\begin{aligned} \\boldsymbol{a} &=\\boldsymbol{p}-\\boldsymbol{t} \\\\ \\alpha &=\\arccos \\langle\\boldsymbol{p}, \\boldsymbol{t}\\rangle \\\\ \\beta &=\\arccos \\langle\\boldsymbol{a},-\\boldsymbol{t}\\rangle . \\end{aligned}è¿™é‡Œå¯¹$p_2$æ‰°åŠ¨ä¸€ä¸ªåƒç´ ï¼Œä½¿å¾—$\\beta$ äº§ç”Ÿä¸€ä¸ªå˜åŒ–é‡ï¼Œæˆä¸º$\\beta â€˜$ã€‚æ ¹æ®å‡ ä½•å…³ç³»æœ‰ï¼š \\begin{aligned} \\beta^{\\prime} &=\\arccos \\left\\langle\\boldsymbol{O}_{2} \\boldsymbol{p}_{2}^{\\prime},-\\boldsymbol{t}\\right\\rangle \\\\ \\gamma &=\\pi-\\alpha-\\beta^{\\prime} \\end{aligned}äºæ˜¯ç”±æ­£å¼¦å®šç†å¯å¾—ï¼š \\left\\|\\boldsymbol{p}^{\\prime}\\right\\|=\\|\\boldsymbol{t}\\| \\frac{\\sin \\beta^{\\prime}}{\\sin \\gamma}æˆ‘ä»¬ç¡®å®šäº†ç”±å•ä¸ªåƒç´ çš„ä¸ç¡®å®šå¼•èµ·çš„æ·±åº¦ä¸ç¡®å®šæ€§ï¼Œå¦‚æœå‡è®¾å…¶ä»…ä»…ç”±ä¸€ä¸ªåƒç´ çš„è¯¯å·®ï¼Œäºæ˜¯æœ‰ \\sigma_{\\mathrm{obs}}=\\|\\boldsymbol{p}\\|-\\left\\|\\boldsymbol{p}^{\\prime}\\right\\|å½“ç„¶ï¼Œå¦‚æœæçº¿æœç´¢çš„ä¸ç¡®å®šæ€§å¤§äºä¸€ä¸ªåƒç´ ï¼Œåˆ™æˆ‘ä»¬å¯æŒ‰ç…§æ­¤æ¨å¯¼æ”¾å¤§è¿™ä¸ªä¸ç¡®å®šæ€§ã€‚æ¥ä¸‹æ¥çš„æ·±åº¦æ•°æ®èåˆå·²ç»åœ¨å‰é¢ä»‹ç»è¿‡äº†ã€‚åœ¨å®é™…å·¥ç¨‹ä¸­ï¼Œå½“ä¸ç¡®å®šæ€§å°äºä¸€å®šé˜ˆå€¼æ—¶ï¼Œå°±å¯ä»¥è®¤ä¸ºæ·±åº¦æ•°æ®å·²ç»æ”¶æ•›äº†ã€‚ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬ç»™å‡ºäº†ä¼°è®¡ç¨ å¯†æ·±åº¦çš„ä¸€ä¸ªå®Œæ•´çš„è¿‡ç¨‹ï¼š å…·ä½“çš„ä»£ç æ¯”è¾ƒçš„å¤šï¼Œä¸å†å¤ç°ï¼Œä»¥ä¸‹æ˜¯å®éªŒçš„å…·ä½“ç»“æœã€‚ å®éªŒä¸­å­˜åœ¨çš„é—®é¢˜åƒç´ æ¢¯åº¦çš„é—®é¢˜å½“æˆ‘ä»¬è¿›è¡Œå¿«åŒ¹é…æ—¶ï¼Œå¦‚æœå¯¹åº”çš„å›¾åƒæ¯”è¾ƒçš„å¹³æ»‘ï¼Œå…¶æ¢¯åº¦å’Œçº¹ç†æ¯”è¾ƒçš„å¼±æ—¶ï¼Œå°±ä¼šé€ æˆåŒ¹é…çš„è¿‡ç¨‹å®¹æ˜“å‡ºç°è¯¯åŒ¹é…ã€‚ è¿™é‡Œç‰µæ¶‰ä¸€ä¸ªé—®é¢˜ï¼Œè¯¥é—®é¢˜åœ¨ç›´æ¥æ³•ä¸­å·²ç»è§è¿‡ä¸€æ¬¡ã€‚åœ¨è¿›è¡Œå—åŒ¹é…ï¼ˆå’ŒNCCçš„è®¡ç®—ï¼‰æ—¶ï¼Œæˆ‘ä»¬å¿…é¡»å‡è®¾å°å—ä¸å˜ï¼Œç„¶åå°†è¯¥å°å—ä¸å…¶ä»–å°å—è¿›è¡Œå¯¹æ¯”ã€‚è¿™æ—¶ï¼Œæœ‰æ˜æ˜¾æ¢¯åº¦çš„å°å—å°†å…·æœ‰è‰¯å¥½çš„åŒºåˆ†åº¦ï¼Œä¸æ˜“å¼•èµ·è¯¯åŒ¹é…ã€‚å¯¹äºæ¢¯åº¦ä¸æ˜æ˜¾çš„åƒç´ ï¼Œç”±äºåœ¨å—åŒ¹é…æ—¶æ²¡æœ‰åŒºåˆ†æ€§ï¼Œå°†éš¾ä»¥æœ‰æ•ˆåœ°ä¼°è®¡å…¶æ·±åº¦ã€‚åä¹‹ï¼Œåƒç´ æ¢¯åº¦æ¯”è¾ƒæ˜æ˜¾çš„åœ°æ–¹ï¼Œæˆ‘ä»¬å¾—åˆ°çš„æ·±åº¦ä¿¡æ¯ä¹Ÿç›¸å¯¹å‡†ç¡®ï¼Œä¾‹å¦‚æ¡Œé¢ä¸Šçš„æ‚å¿—ã€ç”µè¯ç­‰å…·æœ‰æ˜æ˜¾çº¹ç†çš„ç‰©ä½“ã€‚å› æ­¤ï¼Œæ¼”ç¤ºç¨‹åºåæ˜ äº†ç«‹ä½“è§†è§‰ä¸­ä¸€ä¸ªéå¸¸å¸¸è§çš„é—®é¢˜ï¼šå¯¹ç‰©ä½“çº¹ç†çš„ä¾èµ–æ€§ã€‚è¯¥é—®é¢˜åœ¨åŒç›®è§†è§‰ä¸­ä¹Ÿæå…¶å¸¸è§ï¼Œä½“ç°äº†ç«‹ä½“è§†è§‰çš„é‡å»ºè´¨é‡ååˆ†ä¾èµ–äºç¯å¢ƒçº¹ç†ã€‚æˆ‘ä»¬çš„æ¼”ç¤ºç¨‹åºåˆ»æ„ä½¿ç”¨äº†çº¹ç†è¾ƒå¥½çš„ç¯å¢ƒï¼Œä¾‹å¦‚ï¼Œåƒæ£‹ç›˜æ ¼ä¸€èˆ¬çš„åœ°æ¿,å¸¦æœ‰æœ¨çº¹çš„æ¡Œé¢ï¼Œç­‰ç­‰ï¼Œå› æ­¤èƒ½å¾—åˆ°ä¸€ä¸ªçœ‹ä¼¼ä¸é”™çš„ç»“æœã€‚ç„¶è€Œåœ¨å®é™…ä¸­ï¼Œåƒå¢™é¢ã€å…‰æ»‘ç‰©ä½“è¡¨é¢ç­‰äº®åº¦å‡åŒ€çš„åœ°æ–¹å°†ç»å¸¸å‡ºç°ï¼Œå½±å“æˆ‘ä»¬å¯¹å®ƒçš„æ·±åº¦ä¼°è®¡ã€‚ä»æŸç§è§’åº¦æ¥è¯´ï¼Œè¯¥é—®é¢˜æ˜¯æ— æ³•åœ¨ç°æœ‰çš„ç®—æ³•æµç¨‹ä¸ŠåŠ ä»¥æ”¹è¿›å¹¶è§£å†³çš„â€”â€”å¦‚æœæˆ‘ä»¬ä¾ç„¶åªå…³å¿ƒæŸä¸ªåƒç´ å‘¨å›´çš„é‚»åŸŸ(å°å—ï¼‰çš„è¯ã€‚ æ€»æ˜¯å°±æ˜¯åœ¨å¼±çº¹ç†çš„æƒ…å†µä¸‹ï¼Œå—åŒ¹é…æ—¶æ— æ³•è¿›è¡Œçš„ã€‚ åœ¨å®é™…ä¸­ï¼Œæ¢¯åº¦ä¸æçº¿çš„æƒ…å†µå¾ˆå¯èƒ½ä»‹äºäºŒè€…ä¹‹é—´ï¼šæ—¢ä¸æ˜¯å®Œå…¨å‚ç›´ä¹Ÿä¸æ˜¯å®Œå…¨å¹³è¡Œã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬è¯´ï¼Œå½“åƒç´ æ¢¯åº¦ä¸æçº¿å¤¹è§’è¾ƒå¤§æ—¶ï¼Œæçº¿åŒ¹é…çš„ä¸ç¡®å®šæ€§å¤§;è€Œå½“å¤¹è§’è¾ƒå°æ—¶ï¼ŒåŒ¹é…çš„ä¸ç¡®å®šæ€§å˜å°ã€‚ é€†æ·±åº¦è¿™é‡Œä¸»è¦æ—¶æœ‰å¯¹åæ ‡ç‚¹å‚æ•°åŒ–çš„é—®é¢˜æ¥è¿›è¡Œå¼•å…¥ã€‚ é¦–å…ˆï¼Œå¯¹äºä¸€ä¸ªåæ ‡ç‚¹ä¸€èˆ¬å…¶ä½¿ç”¨ä¸–ç•Œåæ ‡ç³»ä¸‹çš„$(x,y,z)$æ¥è¿›è¡Œæè¿°ï¼Œä¸€èˆ¬è®¤ä¸ºä¸‰ä¸ªç‚¹éƒ½æ˜¯éšæœº(é«˜æ–¯)åˆ†å¸ƒçš„ã€‚ ç„¶è€Œï¼Œåœ¨æœ¬èŠ‚çš„æ¡ˆä¾‹ä¸­å…¶ä¸»è¦æ˜¯é€šè¿‡çš„ç›¸æœºä¸Šçš„åæ ‡$(u,v)$å’Œå¯¹åº”åƒç´ å¤„çš„æ·±åº¦å€¼æ¥è¡¨ç¤ºçš„ã€‚é€šå¸¸è®¤ä¸ºåæ ‡å‚æ•°æ˜¯ä¸ªå¸¸å€¼ï¼Œè€Œæ·±åº¦å€¼$d$æ˜¯ä¸€ä¸ªä¸€ç»´çš„é«˜æ–¯åˆ†å¸ƒã€‚ è™½ç„¶è¡¨ç¤ºçš„æ˜¯åŒä¸€ä¸ªé‡ï¼Œä½†æ˜¯ç»“æœç¡®å®ä¸ä¸€æ ·çš„ï¼Œå› æ­¤è¿™é‡Œçš„åæ ‡å€¼$(x,y,z)$ä¸€å®šå…·æœ‰ä¸€å®šçš„ç›¸å…³æ€§ï¼Œå³å…¶åæ–¹å·®çŸ©é˜µçš„éå¯¹è§’å…ƒç´ æ˜¯ä¸ä¸º0çš„ã€‚å¯¹åº”$(u,v),d$æ¥è¯´ï¼Œå…¶åƒç´ åæ ‡å’Œæ·±åº¦ä¹Ÿæ˜¯è¿‘ä¼¼ç‹¬ç«‹çš„æƒ…å†µï¼Œç”šè‡³ä¹Ÿå¯ä»¥å‡è®¾ä¸¤ä¸ªåƒç´ åæ ‡ä¹Ÿæ˜¯ç‹¬ç«‹çš„ã€‚ é€†æ·±åº¦(Inverse depth)æ˜¯è¿‘å¹´æ¥SLAMç ”ç©¶ä¸­å‡ºç°çš„ä¸€ç§å¹¿æ³›ä½¿ç”¨çš„å‚æ•°åŒ–æŠ€å·§ã€‚åœ¨æ¼”ç¤ºç¨‹åºä¸­ï¼Œæˆ‘ä»¬å‡è®¾æ·±åº¦å€¼æ»¡è¶³é«˜æ–¯åˆ†å¸ƒã€‚ç„¶è€Œè¿™æ ·åšåˆä¸åˆç†å‘¢ï¼Ÿæ·±åº¦çœŸçš„è¿‘ä¼¼äºä¸€ä¸ªé«˜æ–¯åˆ†å¸ƒå—?ä»”ç»†æƒ³æƒ³ï¼Œæ·±åº¦çš„æ­£æ€åˆ†å¸ƒç¡®å®å­˜åœ¨ä¸€äº›é—®é¢˜: æˆ‘ä»¬å®é™…æƒ³è¡¨è¾¾çš„æ˜¯ï¼šè¿™ä¸ªåœºæ™¯æ·±åº¦å¤§æ¦‚æ˜¯5~10ç±³ï¼Œå¯èƒ½æœ‰ä¸€äº›æ›´è¿œçš„ç‚¹ï¼Œä½†è¿‘å¤„è‚¯å®šä¸ä¼šå°äºç›¸æœºç„¦è·ï¼ˆæˆ–è®¤ä¸ºæ·±åº¦ä¸ä¼šå°äº0)ã€‚è¿™ä¸ªåˆ†å¸ƒå¹¶ä¸æ˜¯åƒé«˜æ–¯åˆ†å¸ƒé‚£æ ·ï¼Œå½¢æˆä¸€ä¸ªå¯¹ç§°çš„å½¢çŠ¶ã€‚å®ƒçš„å°¾éƒ¨å¯èƒ½ç¨é•¿ï¼Œè€Œè´Ÿæ•°åŒºåŸŸåˆ™ä¸ºé›¶ã€‚ åœ¨ä¸€äº›å®¤å¤–åº”ç”¨ä¸­ï¼Œå¯èƒ½å­˜åœ¨è·ç¦»éå¸¸è¿œï¼Œä¹ƒè‡³æ— ç©·è¿œå¤„çš„ç‚¹ã€‚æˆ‘ä»¬çš„åˆå§‹å€¼ä¸­éš¾ä»¥æ¶µç›–è¿™äº›ç‚¹ï¼Œå¹¶ä¸”ç”¨é«˜æ–¯åˆ†å¸ƒæè¿°å®ƒä»¬ä¼šæœ‰ä¸€äº›æ•°å€¼è®¡ç®—ä¸Šçš„å›°éš¾ã€‚ äºæ˜¯ï¼Œé€†æ·±åº¦åº”è¿è€Œç”Ÿã€‚äººä»¬åœ¨ä»¿çœŸä¸­å‘ç°ï¼Œå‡è®¾æ·±åº¦çš„å€’æ•°ï¼Œä¹Ÿå°±æ˜¯é€†æ·±åº¦,ä¸ºé«˜æ–¯åˆ†å¸ƒæ˜¯æ¯”è¾ƒæœ‰æ•ˆçš„ã€‚éšåï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œé€†æ·±åº¦ä¹Ÿå…·æœ‰æ›´å¥½çš„æ•°å€¼ç¨³å®šæ€§ï¼Œä»è€Œé€æ¸æˆä¸ºä¸€ç§é€šç”¨çš„æŠ€å·§ï¼Œå­˜åœ¨äºç°æœ‰SLAMæ–¹æ¡ˆä¸­çš„æ ‡å‡†åšæ³•ä¸­ã€‚ å›¾åƒé—´çš„åæ ‡å˜æ¢é—®é¢˜åœ¨è¿›è¡Œå—åŒ¹é…ä¹‹å‰ï¼Œè¿›è¡Œä¸€æ¬¡å›¾åƒå˜æ¢æ—¶éå¸¸å¸¸è§çš„é¢„å¤„ç†æ–¹å¼ï¼Œå› æ­¤æˆ‘ä»¬ä¸€èˆ¬å‡è®¾å°å—åœ¨ç›¸æœºè¿åŠ¨æ—¶æ˜¯ä¿æŒä¸å˜çš„ï¼Œä½†æ˜¯è¿™ä»…ä»…åœ¨å¹³ç§»æ—¶æˆç«‹ï¼Œåœ¨ä¸€èˆ¬çš„ç›¸æœºå‘ç”Ÿæ—‹è½¬å˜æ¢æ—¶å°±ä¸æˆç«‹äº†ã€‚ ä¸ºé˜²æ­¢è¿åŠ¨å¯¹åŒ¹é…çš„å¹²æ‰°ï¼Œè¿™é‡Œå°†åœ¨å—åŒ¹é…ä¹‹å‰è¿›è¡Œè¿åŠ¨å˜æ¢ï¼Œæ¶ˆé™¤è¿åŠ¨å¸¦æ¥çš„å½±å“ã€‚æŠŠå‚è€ƒå¸§ä¸å½“å‰å¸§ä¹‹é—´çš„è¿åŠ¨è€ƒè™‘è¿›æ¥ï¼Œæ ¹æ®ç›¸æœºæ¨¡å‹ï¼Œå‚è€ƒå¸§ä¸Šçš„ä¸€ä¸ªåƒç´ $P_c$ä¸çœŸå®çš„ä¸‰ç»´ç‚¹ä¸–ç•Œåæ ‡$P_w$æœ‰ä»¥ä¸‹å…³ç³»: d_{\\mathrm{R}} \\boldsymbol{P}_{\\mathrm{R}}=\\boldsymbol{K}\\left(\\boldsymbol{R}_{\\mathrm{RW}} \\boldsymbol{P}_{\\mathrm{W}}+\\boldsymbol{t}_{\\mathrm{RW}}\\right) .ç±»ä¼¼åœ°ï¼Œå¯¹äºå½“å‰å¸§,äº¦æœ‰$P_w$åœ¨å®ƒä¸Šè¾¹çš„æŠ•å½±ï¼Œè®°ä½œ$P_c$ï¼š d_{\\mathrm{C}} \\boldsymbol{P}_{\\mathrm{C}}=\\boldsymbol{K}\\left(\\boldsymbol{R}_{\\mathrm{CW}} \\boldsymbol{P}_{\\mathrm{W}}+\\boldsymbol{t}_{\\mathrm{CW}}\\right) .ä»£å…¥å¹¶æ¶ˆå»$P_w$ï¼Œå³å¾—ä¸¤å¹…å›¾åƒä¹‹é—´çš„åƒç´ å…³ç³»ï¼š d_{\\mathrm{C}} \\boldsymbol{P}_{\\mathrm{C}}=d_{\\mathrm{R}} \\boldsymbol{K} \\boldsymbol{R}_{\\mathrm{CW}} \\boldsymbol{R}_{\\mathrm{RW}}^{\\mathrm{T}} \\boldsymbol{K}^{-1} \\boldsymbol{P}_{\\mathrm{R}}+\\boldsymbol{K} \\boldsymbol{t}_{\\mathrm{CW}}-\\boldsymbol{K} \\boldsymbol{R}_{\\mathrm{CW}} \\boldsymbol{R}_{\\mathrm{RW}}^{\\mathrm{T}} \\boldsymbol{K} \\boldsymbol{t}_{\\mathrm{RW}}å½“çŸ¥é“d,PRæ—¶ï¼Œå¯ä»¥è®¡ç®—å‡ºPçš„æŠ•å½±ä½ç½®ã€‚æ­¤æ—¶ï¼Œå†ç»™Pä¸¤ä¸ªåˆ†é‡å„ä¸€ä¸ªå¢é‡$du,dv$ ,å°±å¯ä»¥æ±‚å¾—$P$çš„å¢é‡$du_c,dv_c$ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œç®—å‡ºåœ¨å±€éƒ¨èŒƒå›´å†…å‚è€ƒå¸§å’Œå½“å‰å¸§å›¾åƒåæ ‡å˜æ¢çš„ä¸€ä¸ªçº¿æ€§å…³ç³»æ„æˆä»¿å°„å˜æ¢ï¼š \\left[\\begin{array}{l}\\mathrm{d} u_{\\mathrm{c}} \\\\ \\mathrm{d} v_{\\mathrm{c}}\\end{array}\\right]=\\left[\\begin{array}{ll}\\dfrac{\\mathrm{d} u_{\\mathrm{c}}}{\\mathrm{d} u} & \\dfrac{\\mathrm{d} u_{\\mathrm{c}}}{\\mathrm{d} v} \\\\ \\dfrac{\\mathrm{d} v_{\\mathrm{c}}}{\\mathrm{d} u} & \\dfrac{\\mathrm{d} v_{\\mathrm{c}}}{\\mathrm{d} v}\\end{array}\\right]\\left[\\begin{array}{l}\\mathrm{d} u \\\\ \\mathrm{~d} v\\end{array}\\right]æ ¹æ®ä»¿å°„å˜æ¢çŸ©é˜µï¼Œæˆ‘ä»¬å¯ä»¥å°†å½“å‰å¸§(æˆ–å‚è€ƒå¸§)çš„åƒç´ è¿›è¡Œå˜æ¢ï¼Œå†è¿›è¡Œå—åŒ¹é…ï¼Œä»¥æœŸè·å¾—å¯¹æ—‹è½¬æ›´å¥½çš„æ•ˆæœã€‚ å…¶ä»–çš„æ”¹è¿› é¦–å…ˆï¼Œå°±æ˜¯å¯ä»¥é€šè¿‡å¹¶è¡ŒåŒ–æ¥å®ç°æœ¬ç¨‹åºï¼Œå› ä¸ºæ¯ä¸ªåƒç´ å—çš„è®¡ç®—å…¶å®æ—¶äº’ç›¸ç‹¬ç«‹çš„è¿‡ç¨‹ã€‚ å…¶æ¬¡ï¼Œç»“åˆæˆ‘åœ¨æ·±åº¦å­¦ä¹ é¢„æµ‹æ·±åº¦çš„é—®é¢˜æ¥çœ‹ï¼Œå…¶æ·±åº¦é¢„æµ‹ä¼šå‡ºç°ç›¸é‚»ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´å˜æ¢è¿‡äºå‰§çƒˆçš„é—®é¢˜ï¼Œäºæ˜¯å¯ä»¥å¢åŠ ç©ºé—´çš„æ­£åˆ™é¡¹ï¼Œä½¿å¾—å…¶ç©ºé—´ä¸Šæ›´åŠ å¹³æ»‘ã€‚ ç„¶åï¼Œæˆ‘ä»¬æ²¡æœ‰æ˜¾å¼åœ°å¤„ç†å¤–ç‚¹(Outlier)çš„æƒ…å†µã€‚äº‹å®ä¸Šï¼Œç”±äºé®æŒ¡ã€å…‰ç…§ã€è¿åŠ¨æ¨¡ç³Šç­‰å„ç§å› ç´ çš„å½±å“ï¼Œä¸å¯èƒ½å¯¹æ¯ä¸ªåƒç´ éƒ½ä¿æŒæˆåŠŸåŒ¹é…ã€‚è€Œæ¼”ç¤ºç¨‹åºçš„åšæ³•ä¸­ï¼Œåªè¦NCCå¤§äºä¸€å®šå€¼,å°±è®¤ä¸ºå‡ºç°äº†æˆåŠŸçš„åŒ¹é…ï¼Œæ²¡æœ‰è€ƒè™‘åˆ°é”™è¯¯åŒ¹é…çš„æƒ…å†µã€‚ æœ€åï¼Œå¤„ç†é”™è¯¯åŒ¹é…äº¦æœ‰è‹¥å¹²ç§æ–¹å¼ï¼Œæ¯”å¦‚å‡åŒ€-é«˜æ–¯æ··åˆåˆ†å¸ƒä¸‹çš„æ·±åº¦æ»¤æ³¢å™¨ç­‰ã€‚ ä½†æ˜¯ï¼Œå°½ç®¡å¯ä»¥é€šè¿‡æ”¹è¿›è¿›è¡Œä¸€å®šç¨‹åº¦ä¸Šçš„æé«˜ï¼Œä½†æ˜¯æœ‰äº›é—®é¢˜å­˜åœ¨ç†è®ºä¸Šçš„å›°éš¾ï¼Œä¾‹å¦‚å¯¹äºç¯å¢ƒçº¹ç†çš„ä¾èµ–ï¼Œåˆå¦‚åƒç´ æ¢¯åº¦å’Œçº§çº¿çš„å…³è”çš„é—®é¢˜ï¼Œè¿™äº›å¾ˆéš¾æé«˜é€šè¿‡è°ƒæ•´ä»£ç å®ç°æ¥è§£å†³ã€‚å¯¹äºç«‹ä½“è§†è§‰è€Œè¨€ï¼Œè¿™é‡Œçš„è¿‡äºä¾èµ–ç¯å¢ƒçº¹ç†å’Œå…‰ç…§æ˜¯ä¸å¯é çš„ã€‚","link":"/2022/07/01/SLAM/ch12-%E5%BB%BA%E5%9B%BE-%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86-%E7%AB%8B%E4%BD%93%E8%A7%86%E8%A7%89%E5%BB%BA%E5%9B%BE/"},{"title":"Ch12 å»ºå›¾ ç¬¬äºŒéƒ¨åˆ† RGB-Dç¨ å¯†å»ºå›¾","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦ä»‹ç»çš„æ˜¯å…³äºRGB-Dè¿›è¡Œç¨ å¯†å»ºå›¾ï¼Œæ ¹æ®ä¸åŒçš„éœ€æ±‚å¾—åˆ°äº†ä¸åŒçš„åœ°å›¾ï¼ŒåŒ…æ‹¬ä¸€èˆ¬çš„ç‚¹äº‘åœ°å›¾ï¼Œç‚¹äº‘ç½‘æ ¼åœ°å›¾ï¼Œä»¥åŠå‹ç¼©ä¹‹åçš„ç‚¹äº‘å…«å‰æ ‘åœ°å›¾ç­‰ï¼Œå¹¶è¿›è¡Œç›¸å…³ä»£ç çš„å®ç°ã€‚ RGB-Dç¨ å¯†å»ºå›¾æ¦‚è¿°è¿™é‡Œä½¿ç”¨RGB-Dç›¸æœºæœ‰å‡ ç‚¹ä¼˜åŠ¿ï¼š åœ¨RGB-Dç›¸æœºä¸­å¯ä»¥å®Œå…¨é€šè¿‡ä¼ æ„Ÿå™¨ä¸­ç¡¬ä»¶çš„æµ‹é‡å¾—åˆ°ï¼Œæ— é¡»æ¶ˆè€—å¤§é‡çš„è®¡ç®—èµ„æºæ¥ä¼°è®¡ã€‚ å¹¶ä¸”ï¼ŒRGB-Dçš„ç»“æ„å…‰æˆ–é£æ—¶åŸç†ï¼Œä¿è¯äº†æ·±åº¦æ•°æ®å¯¹çº¹ç†çš„æ— å…³æ€§ã€‚å³ä½¿é¢å¯¹çº¯è‰²çš„ç‰©ä½“ï¼Œåªè¦å®ƒèƒ½å¤Ÿåå°„å…‰ï¼Œæˆ‘ä»¬å°±èƒ½æµ‹é‡åˆ°å®ƒçš„æ·±åº¦ã€‚ åˆ©ç”¨RGB-Dè¿›è¡Œç¨ å¯†å»ºå›¾æ˜¯ç›¸å¯¹å®¹æ˜“çš„ã€‚ä¸è¿‡ï¼Œæ ¹æ®åœ°å›¾å½¢å¼ä¸ç½‘ï¼Œä¹Ÿå­˜åœ¨æœ‰è‹¥å¹²ç§çš„ä¸»æµå»ºå›¾æ–¹å¼ã€‚æœ€ç›´è§‚ã€æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯æ ¹æ®ä¼°ç®—çš„ç›¸æœºä½å§¿ï¼Œå°†RGB-Dæ•°æ®è½¬åŒ–ä¸ºç‚¹äº‘ï¼Œç„¶åè¿›è¡Œæ‹¼æ¥ï¼Œæœ€åå¾—åˆ°ä¸€ä¸ªç”±ç¦»æ•£çš„ç‚¹ç»„æˆçš„ç‚¹äº‘åœ°å›¾(Point Cloud Map )ã€‚ åœ¨æ­¤åŸºç¡€ä¸Šï¼Œå¦‚æœæˆ‘ä»¬å¯¹å¤–è§‚æœ‰è¿›ä¸€æ­¥çš„è¦æ±‚ï¼Œå¸Œæœ›ä¼°è®¡ç‰©ä½“çš„è¡¨é¢ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ä¸‰è§’ç½‘æ ¼(Mesh)ã€é¢ç‰‡(Surfel)è¿›è¡Œå»ºå›¾ã€‚ å¦å¤–ï¼Œå¦‚æœå¸Œæœ›çŸ¥é“åœ°å›¾çš„éšœç¢ç‰©ä¿¡æ¯å¼€åœ¨åœ°å›¾ä¸Šå¯¼èˆªï¼Œä¹Ÿå¯è¿›è¿‡ä½“ç´ (Voxel)å»ºç«‹å æ®ç½‘æ ¼åœ°å›¾(Occupancy Map )ã€‚ ç‚¹äº‘åœ°å›¾è¿™é‡Œæˆ‘ä»¬å»ºç«‹ç‚¹äº‘åœ°å›¾ï¼Œå…¶ä¸»è¦å¯¹ç‚¹äº‘è¯»å–çš„ä»£ç å…¶å®å’Œç¬¬ä¸€ç‰ˆçš„ch5ç›¸ä¼¼ï¼Œä½†æ˜¯è¿™é‡Œåœ¨å…¶åŸºç¡€ä¸Šå¢åŠ äº†ä¸€äº›æ»¤æ³¢çš„æ“ä½œã€‚ é¦–å…ˆæ‰§è¡Œpointcloud_mapping.cppç”Ÿæˆmap.pcdæ–‡ä»¶ï¼Œä¹‹åä½¿ç”¨pcl_viewer map.pcdæ¥è¿›è¡Œæ‰“å¼€æ“ä½œã€‚ åœ¨ç”Ÿæˆæ¯å¸§ç‚¹äº‘æ—¶ï¼Œå»æ‰æ·±åº¦å€¼æ— æ•ˆçš„ç‚¹ã€‚è¿™ä¸»è¦æ˜¯è€ƒè™‘åˆ°Kinectçš„æœ‰æ•ˆé‡ç¨‹ï¼Œè¶…è¿‡é‡ç¨‹ä¹‹åçš„æ·±åº¦å€¼ä¼šæœ‰è¾ƒå¤§è¯¯å·®æˆ–è¿”å›ä¸€ä¸ªé›¶ã€‚ 12345678// depth filter and statistical removal PointCloud::Ptr tmp(new PointCloud);pcl::StatisticalOutlierRemoval&lt;PointT&gt; statistical_filter;statistical_filter.setMeanK(50);statistical_filter.setStddevMulThresh(1.0);statistical_filter.setInputCloud(current);statistical_filter.filter(*tmp);(*pointCloud) += *tmp åˆ©ç”¨ç»Ÿè®¡æ»¤æ³¢å™¨æ–¹æ³•å»é™¤å­¤ç«‹ç‚¹ã€‚è¯¥æ»¤æ³¢å™¨ç»Ÿè®¡æ¯ä¸ªç‚¹ä¸è·ç¦»å®ƒæœ€è¿‘çš„Nä¸ªç‚¹çš„è·ç¦»å€¼çš„åˆ†å¸ƒï¼Œå»é™¤è·ç¦»å‡å€¼è¿‡å¤§çš„ç‚¹ã€‚è¿™æ ·ï¼Œå°±ä¿ç•™äº†é‚£äº›â€œç²˜åœ¨ä¸€èµ·â€çš„ç‚¹ï¼Œå»æ‰äº†å­¤ç«‹çš„å™ªå£°ç‚¹ã€‚ åˆ©ç”¨ä½“ç´ ç½‘ç»œæ»¤æ³¢å™¨è¿›è¡Œé™é‡‡æ ·ã€‚ç”±äºå¤šä¸ªè§†è§’å­˜åœ¨è§†é‡é‡å ï¼Œåœ¨é‡å åŒºåŸŸä¼šå­˜åœ¨å¤§é‡çš„ä½ç½®ååˆ†ç›¸è¿‘çš„ç‚¹ã€‚è¿™ä¼šå ç”¨è®¸å¤šå†…å­˜ç©ºé—´ã€‚ä½“ç´ æ»¤æ³¢ä¿è¯äº†åœ¨æŸä¸ªä¸€å®šå¤§å°çš„ç«‹æ–¹ä½“ï¼ˆæˆ–ç§°ä½“ç´ ï¼‰å†…ä»…æœ‰ä¸€ä¸ªç‚¹ï¼Œç›¸å½“äºå¯¹ä¸‰ç»´ç©ºé—´è¿›è¡Œäº†é™é‡‡æ ·ï¼Œä»è€ŒèŠ‚çœäº†å¾ˆå¤šå­˜å‚¨ç©ºé—´ã€‚ 12345678// voxel filter pcl::VoxelGrid&lt;PointT&gt; voxel_filter;double resolution = 0.03;voxel_filter.setLeafSize(resolution, resolution, resolution); // resolutionPointCloud::Ptr tmp(new PointCloud);voxel_filter.setInputCloud(pointCloud);voxel_filter.filter(*tmp);tmp-&gt;swap(*pointCloud); ä½“ç´ æ»¤æ³¢ä¹‹åçš„æ•ˆæœå›¾ï¼Œåœ¨ä¸€ä¸ª0.03x0.03x0.03çš„å°ç«‹æ–¹ä½“é‡Œé¢ä»…ä»…ä¿ç•™ä¸€ä¸ªä½“ç´ ç‚¹ï¼š ç‚¹äº‘é‡å»ºç½‘ç»œç‚¹äº‘çš„ä¼˜ç‚¹æ˜¯å¯ä»¥æ˜¯æˆ‘ä»¬å¾ˆå¿«çš„è¿›è¡Œå¯è§†åŒ–ï¼Œå¯¹RGB-Då›¾åƒå¯ä»¥é«˜æ•ˆçš„ç”Ÿæˆä¸ç”¨é¢å¤–çš„å¤„ç†ï¼Œä½†æ˜¯ç‚¹äº‘åœ°å›¾æ¯”è¾ƒçš„åˆçº§ï¼Œä¸€äº›é—®é¢˜å¯èƒ½æ— æ³•æ»¡è¶³è¦æ±‚ã€‚ 1ï¼å®šä½éœ€æ±‚ï¼šå†³äºå‰ç«¯è§†è§‰é‡Œç¨‹è®¡çš„å¤„ç†æ–¹å¼ã€‚å¦‚æœæ˜¯åŸºäºç‰¹å¾ç‚¹çš„è§†è§‰é‡Œç¨‹è®¡,ç”±äºç‚¹äº‘ä¸­æ²¡æœ‰å­˜å‚¨ç‰¹å¾ç‚¹ä¿¡æ¯ï¼Œåˆ™æ— æ³•ç”¨äºåŸºäºç‰¹å¾ç‚¹çš„å®šä½æ–¹æ³•ã€‚å¦‚æœå‰ç«¯æ˜¯ç‚¹äº‘çš„ ICPï¼Œé‚£ä¹ˆå¯ä»¥è€ƒè™‘å°†å±€éƒ¨ç‚¹äº‘å¯¹å…¨å±€ç‚¹äº‘è¿›è¡ŒICPä»¥ä¼°è®¡ä½å§¿ã€‚ç„¶è€Œ,è¿™è¦æ±‚å…¨å±€ç‚¹äº‘å…·æœ‰è¾ƒå¥½çš„ç²¾åº¦ã€‚æˆ‘ä»¬å¤„ç†ç‚¹äº‘çš„æ–¹å¼å¹¶æ²¡æœ‰å¯¹ç‚¹äº‘æœ¬èº«è¿›è¡Œä¼˜åŒ–,æ‰€ä»¥æ˜¯ä¸å¤Ÿçš„ã€‚2ï¼å¯¼èˆªä¸é¿éšœçš„éœ€æ±‚ï¼šæ— æ³•ç›´æ¥ç”¨äºå¯¼èˆªå’Œé¿éšœã€‚çº¯ç²¹çš„ç‚¹äº‘æ— æ³•è¡¨ç¤ºâ€œæ˜¯å¦æœ‰éšœç¢ç‰©â€çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬ä¹Ÿæ— æ³•åœ¨ç‚¹äº‘ä¸­åšâ€œä»»æ„ç©ºé—´ç‚¹æ˜¯å¦è¢«å æ®â€è¿™æ ·çš„æŸ¥è¯¢ï¼Œè€Œè¿™æ˜¯å¯¼èˆªå’Œé¿éšœçš„åŸºæœ¬éœ€è¦ã€‚ä¸è¿‡ï¼Œå¯ä»¥åœ¨ç‚¹äº‘åŸºç¡€ä¸Šè¿›è¡ŒåŠ å·¥ï¼Œå¾—åˆ°æ›´é€‚åˆå¯¼èˆªä¸é¿éšœçš„åœ°å›¾å½¢å¼ã€‚ 3ï¼å¯è§†åŒ–å’Œäº¤äº’ï¼šå…·æœ‰åŸºæœ¬çš„å¯è§†åŒ–ä¸äº¤äº’èƒ½åŠ›ã€‚æˆ‘ä»¬èƒ½å¤Ÿçœ‹åˆ°åœºæ™¯çš„å¤–è§‚,ä¹Ÿèƒ½åœ¨åœºæ™¯é‡Œæ¼«æ¸¸ã€‚ä»å¯è§†åŒ–è§’åº¦æ¥è¯´,ç”±äºç‚¹äº‘åªå«æœ‰ç¦»æ•£çš„ç‚¹ï¼Œæ²¡æœ‰ç‰©ä½“è¡¨é¢ä¿¡æ¯ï¼ˆä¾‹å¦‚æ³•çº¿)ï¼Œæ‰€ä»¥ä¸å¤ªç¬¦åˆäººä»¬çš„å¯è§†åŒ–ä¹ æƒ¯ã€‚ä¾‹å¦‚ï¼Œä»æ­£é¢å’ŒèƒŒé¢çœ‹ç‚¹äº‘åœ°å›¾çš„ç‰©ä½“æ˜¯ä¸€æ ·çš„ï¼Œè€Œä¸”è¿˜èƒ½é€è¿‡ç‰©ä½“çœ‹åˆ°å®ƒèƒŒåçš„ä¸œè¥¿ï¼šè¿™äº›éƒ½ä¸å¤ªç¬¦åˆæˆ‘ä»¬æ—¥å¸¸çš„ç»éªŒã€‚ å› æ­¤å¯ä»¥ä»ç‚¹äº‘åœ°å›¾å‡ºå‘æ¥å¼€å‘æ›´é«˜çº§çš„åŠŸèƒ½ã€‚æ¯”å¦‚é’ˆå¯¹å¯¼èˆªçš„åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥æˆ‘ä»¬ä»ç‚¹äº‘å‡ºå‘æ„å»ºå æ®ç½‘ç»œ(Occupancy Grid) åœ°å›¾ã€‚å†æ¯”å¦‚SFMä¸­ï¼Œå¸¸å¸¸ç”¨åˆ°æ³Šæ¾é‡å»ºçš„æ–¹æ³•ï¼Œå°±å¯ä»¥æ„å»ºç‰©ä½“çš„ç½‘ç»œåœ°å›¾ï¼Œå¾—åˆ°è¡¨é¢çš„ä¿¡æ¯ã€‚é™¤æ­¤ä»¥å¤–ï¼ŒSurfelä¹Ÿæ˜¯ä¸€ç§è¡¨è¾¾ç‰©ä½“è¡¨é¢çš„æ–¹å¼ï¼Œä»¥é¢å…ƒä½œä¸ºåœ°å›¾çš„åŸºæœ¬å•å…ƒã€‚ æ³¨æ„ï¼šè¿™é‡Œç½‘æ ¼åŒ–çš„æ˜¯ä½“ç´ è¿‡æ»¤ä¹‹åçš„ç‚¹äº‘æ–‡ä»¶map.pcdã€‚å¦‚æœç›´æ¥ä½¿ç”¨ä½“ç´ ä¹‹å‰çš„æ–‡ä»¶å°±ä¼šå‡ºç°å¡é¡¿æ—¶é—´é•¿ç­‰é—®é¢˜ã€‚ ä¸»è¦çš„ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788#include &lt;pcl/point_cloud.h&gt;#include &lt;pcl/point_types.h&gt;#include &lt;pcl/io/pcd_io.h&gt;#include &lt;pcl/visualization/pcl_visualizer.h&gt;#include &lt;pcl/kdtree/kdtree_flann.h&gt;#include &lt;pcl/surface/surfel_smoothing.h&gt;#include &lt;pcl/surface/mls.h&gt;#include &lt;pcl/surface/gp3.h&gt;#include &lt;pcl/surface/impl/mls.hpp&gt;// typedefstypedef pcl::PointXYZRGB PointT;typedef pcl::PointCloud&lt;PointT&gt; PointCloud;typedef pcl::PointCloud&lt;PointT&gt;::Ptr PointCloudPtr;typedef pcl::PointXYZRGBNormal SurfelT;typedef pcl::PointCloud&lt;SurfelT&gt; SurfelCloud;typedef pcl::PointCloud&lt;SurfelT&gt;::Ptr SurfelCloudPtr;SurfelCloudPtr reconstructSurface( const PointCloudPtr &amp;input, float radius, int polynomial_order) { pcl::MovingLeastSquares&lt;PointT, SurfelT&gt; mls; pcl::search::KdTree&lt;PointT&gt;::Ptr tree(new pcl::search::KdTree&lt;PointT&gt;); mls.setSearchMethod(tree); mls.setSearchRadius(radius); mls.setComputeNormals(true); mls.setSqrGaussParam(radius * radius); mls.setPolynomialFit(polynomial_order &gt; 1); mls.setPolynomialOrder(polynomial_order); mls.setInputCloud(input); SurfelCloudPtr output(new SurfelCloud); mls.process(*output); return (output);}pcl::PolygonMeshPtr triangulateMesh(const SurfelCloudPtr &amp;surfels) { // Create search tree* pcl::search::KdTree&lt;SurfelT&gt;::Ptr tree(new pcl::search::KdTree&lt;SurfelT&gt;); tree-&gt;setInputCloud(surfels); // Initialize objects pcl::GreedyProjectionTriangulation&lt;SurfelT&gt; gp3; pcl::PolygonMeshPtr triangles(new pcl::PolygonMesh); // Set the maximum distance between connected points (maximum edge length) gp3.setSearchRadius(0.05); // Set typical values for the parameters gp3.setMu(2.5); gp3.setMaximumNearestNeighbors(100); gp3.setMaximumSurfaceAngle(M_PI / 4); // 45 degrees gp3.setMinimumAngle(M_PI / 18); // 10 degrees gp3.setMaximumAngle(2 * M_PI / 3); // 120 degrees gp3.setNormalConsistency(true); // Get result gp3.setInputCloud(surfels); gp3.setSearchMethod(tree); gp3.reconstruct(*triangles); return triangles;}int main(int argc, char **argv) { // Load the points PointCloudPtr cloud(new PointCloud); if (argc == 0 || pcl::io::loadPCDFile(argv[1], *cloud)) { cout &lt;&lt; &quot;failed to load point cloud!&quot;; return 1; } cout &lt;&lt; &quot;point cloud loaded, points: &quot; &lt;&lt; cloud-&gt;points.size() &lt;&lt; endl; // Compute surface elements cout &lt;&lt; &quot;computing normals ... &quot; &lt;&lt; endl; double mls_radius = 0.05, polynomial_order = 2; auto surfels = reconstructSurface(cloud, mls_radius, polynomial_order); // Compute a greedy surface triangulation cout &lt;&lt; &quot;computing mesh ... &quot; &lt;&lt; endl; pcl::PolygonMeshPtr mesh = triangulateMesh(surfels); cout &lt;&lt; &quot;display mesh ... &quot; &lt;&lt; endl; pcl::visualization::PCLVisualizer vis; vis.addPolylineFromPolygonMesh(*mesh, &quot;mesh frame&quot;); vis.addPolygonMesh(*mesh, &quot;mesh&quot;); vis.resetCamera(); vis.spin();} å…«å‰æ ‘åœ°å›¾ä¸‹é¢æˆ‘ä»¬ä»‹ç»ä¸€ç§åœ¨å¯¼èˆªé‡Œé¢æ¯”è¾ƒå¸¸è§çš„ã€æœ¬èº«å…·æœ‰è¾ƒå¥½æ€§èƒ½çš„åœ°å›¾çš„å½¢å¼ï¼Œå…«å‰æ ‘åœ°å›¾ã€‚åœ¨ç‚¹äº‘åœ°å›¾ä¸­ï¼Œæˆ‘ä»¬è™½ç„¶æœ‰äº†ä¸‰ç»´ç»“æ„ï¼Œè¿›è¡Œäº†ä½“ç´ è¿‡æ»¤æé«˜åˆ†è¾¨ç‡ï¼Œä½†æ˜¯ç‚¹äº‘æœ‰å‡ ä¸ªæ˜æ˜¾çš„ç¼ºç‚¹ï¼š ç‚¹äº‘åœ°å›¾é€šå¸¸è§„æ¨¡å¾ˆå¤§ï¼Œæ‰€ä»¥pcd æ–‡ä»¶ä¹Ÿä¼šå¾ˆå¤§ã€‚ä¸€å¹…640åƒç´ Ã—480åƒç´ çš„å›¾åƒï¼Œä¼šäº§ç”Ÿ30ä¸‡ä¸ªç©ºé—´ç‚¹,éœ€è¦å¤§é‡çš„å­˜å‚¨ç©ºé—´ã€‚å³ä½¿ç»è¿‡ä¸€äº›æ»¤æ³¢åï¼Œpcdæ–‡ä»¶ä¹Ÿæ˜¯å¾ˆå¤§çš„ã€‚è€Œä¸”è®¨åŒä¹‹å¤„åœ¨äº,å®ƒçš„â€œå¤§â€å¹¶ä¸æ˜¯å¿…éœ€çš„ã€‚ç‚¹äº‘åœ°å›¾æä¾›äº†å¾ˆå¤šä¸å¿…è¦çš„ç»†èŠ‚ã€‚æˆ‘ä»¬å¹¶ä¸ç‰¹åˆ«å…³å¿ƒåœ°æ¯¯ä¸Šçš„è¤¶çš±ã€é˜´æš—å¤„çš„å½±å­è¿™ç±»ä¸œè¥¿ï¼ŒæŠŠå®ƒä»¬æ”¾åœ¨åœ°å›¾é‡Œæ˜¯åœ¨æµªè´¹ç©ºé—´ã€‚ç”±äºè¿™äº›ç©ºé—´çš„å ç”¨ï¼Œé™¤éæˆ‘ä»¬é™ä½åˆ†è¾¨ç‡ï¼Œå¦åˆ™åœ¨æœ‰é™çš„å†…å­˜ä¸­æ— æ³•å»ºæ¨¡è¾ƒå¤§çš„ç¯å¢ƒï¼Œç„¶è€Œé™ä½åˆ†è¾¨ç‡ä¼šå¯¼è‡´åœ°å›¾è´¨é‡ä¸‹é™ã€‚ ç‚¹äº‘åœ°å›¾æ— æ³•å¤„ç†è¿åŠ¨ç‰©ä½“ã€‚å› ä¸ºæˆ‘ä»¬çš„åšæ³•é‡Œåªæœ‰â€œæ·»åŠ ç‚¹â€ï¼Œè€Œæ²¡æœ‰â€œå½“ç‚¹æ¶ˆå¤±æ—¶æŠŠå®ƒç§»é™¤â€çš„åšæ³•ã€‚è€Œåœ¨å®é™…ç¯å¢ƒä¸­ï¼Œè¿åŠ¨ç‰©ä½“çš„æ™®éå­˜åœ¨ï¼Œä½¿å¾—ç‚¹äº‘åœ°å›¾å˜å¾—ä¸å¤Ÿå®ç”¨ã€‚ è¿™é‡Œçš„ä¸»è¦çš„æƒ³æ³•æ˜¯å°†ä¹‹å‰çš„ä¸€ä¸ªæé€Ÿå—ä¸æ–­åœ°è¿›è¡Œå…«ç­‰ä»½ï¼Œç›´åˆ°è¾¾åˆ°æƒ³è¦çš„ç²¾åº¦ä¸ºæ­¢ã€‚å½“æˆ‘ä»¬ä»ç”±ä¸‹ä¸€å±‚å‘ä¸Šä¸€å±‚èµ°æ—¶ï¼Œå…¶åœ°å›¾çš„ä½“ç§¯å°±ä¼šæ‰©å¤§åˆ°åŸæ¥çš„å…«å€ã€‚å…¶å¯¹äºçš„ä½“ç§¯å’Œæ·±åº¦æ—¶å‘ˆç°æŒ‡æ•°å¢é•¿çš„ï¼Œä½¿ç”¨æ›´å¤§çš„æ·±åº¦æ—¶ï¼Œå…¶å»ºæ¨¡ä½“ç§¯ä¼šå¢åŠ çš„å¾ˆå¿«ã€‚ å¯èƒ½ä¼šæœ‰ç–‘é—®ï¼Œå…«å‰æ ‘è¿™æ ·ä¸æ˜¯å’Œä¸€èˆ¬çš„ä½“ç´ è¿‡æ»¤å™¨ä¸€æ ·å—ï¼Ÿè¿™é‡Œè¦è¯´æ˜çš„æ˜¯å…«å‰æ ‘å­˜å‚¨çš„æ˜¯äºŒå€¼0/1ï¼Œä»£è¡¨å½“å‰å°æ­£æ–¹ä½“èŠ‚ç‚¹ä¸Šæœ‰æ— å…ƒç´ çš„å¡«å……ï¼Œä¸æ˜¯ä¸‰åæ ‡çš„æ•°å€¼ã€‚å¦‚æœç²¾åº¦è¦æ±‚ä¸é«˜æ—¶ï¼Œä»…ä»…éœ€è¦è¿›è¡Œå±•å¼€åˆ°ä¸Šé¢çš„èŠ‚ç‚¹å¤„å³å¯ï¼Œä¸éœ€è¦è¿›è¡Œå‘ä¸‹å±•å¼€äº†ã€‚ å‰é¢è¯´å…«å‰æ ‘çš„èŠ‚ç‚¹å­˜å‚¨äº†å®ƒæ˜¯å¦è¢«å æ®çš„ä¿¡æ¯ã€‚ä»ç‚¹äº‘å±‚é¢æ¥è®²ï¼Œè‡ªç„¶å¯ä»¥ç”¨0è¡¨ç¤ºç©ºç™½ï¼Œ1è¡¨ç¤ºè¢«å æ®ã€‚è¿™ç§0-1çš„è¡¨ç¤ºå¯ä»¥ç”¨ä¸€ä¸ªæ¯”ç‰¹æ¥å­˜å‚¨ï¼ŒèŠ‚çº¦ç©ºé—´ã€‚ä½†æ˜¯ï¼Œç”±äºå™ªå£°çš„å½±å“ï¼Œå¯èƒ½ä¼šçœ‹åˆ°æŸä¸ªç‚¹ä¸€ä¼šå„¿ä¸º0ï¼Œä¸€ä¼šå„¿ä¸º1ï¼›æˆ–è€…å¤šæ•°æ—¶åˆ»ä¸º0ï¼Œå°‘æ•°æ—¶åˆ»ä¸º1ï¼›æˆ–è€…é™¤äº†â€œæ˜¯â€â€œå¦â€ä¸¤ç§æƒ…å†µï¼Œè¿˜æœ‰ä¸€ä¸ªæœªçŸ¥çš„çŠ¶æ€ã€‚ é€‰æ‹©ç”¨æ¦‚ç‡å½¢å¼è¡¨è¾¾æŸèŠ‚ç‚¹æ˜¯å¦è¢«å æ®çš„äº‹æƒ…ã€‚ä¾‹å¦‚ï¼Œç”¨ä¸€ä¸ªæµ®ç‚¹æ•°$x\\in[0,1]$æ¥è¡¨è¾¾ã€‚è¿™ä¸ª$x$ä¸€å¼€å§‹å–0.5ã€‚å¦‚æœä¸æ–­è§‚æµ‹åˆ°å®ƒè¢«å æ®ï¼Œé‚£ä¹ˆè®©è¿™ä¸ªå€¼ä¸æ–­å¢åŠ ï¼›åä¹‹ï¼Œå¦‚æœä¸æ–­è§‚æµ‹åˆ°å®ƒæ˜¯ç©ºç™½ï¼Œé‚£å°±è®©å®ƒä¸æ–­å‡å°å³å¯ã€‚ä½†æ˜¯å¦‚æœè®©$x$ä¸æ–­åœ°å‡å°ï¼Œå®ƒå¯èƒ½ä¼šè·‘åˆ°$[0,1]$ä¹‹å¤–ï¼Œäºæ˜¯å¼•å…¥æ¦‚ç‡å¯¹æ•°å€¼(Log-odds)æ¥è¡¨ç¤ºã€‚è¿™é‡Œè®¾$y \\in \\mathbb R$ ä¸ºæ¦‚ç‡å¯¹æ•°å€¼ï¼Œ$x=0\\sim1$çš„æ¦‚ç‡å€¼ï¼Œäºæ˜¯å»ºç«‹ä»–ä»¬ä¹‹é—´çš„logitå˜æ¢ï¼š y=\\operatorname{logit}(x)=\\log \\left(\\frac{x}{1-x}\\right)å…¶å¯¹åº”çš„åå˜æ¢ä¸ºï¼š x=\\operatorname{logit}^{-1}(y)=\\frac{\\exp (y)}{\\exp (y)+1}å¯ä»¥çœ‹å‡ºæ¥ï¼Œå½“$y$ä»$-\\infty$ åˆ°$+\\infty$ æ—¶ï¼Œ$x$ç›¸åº”çš„ä¹Ÿä»0å˜åˆ°1ã€‚è€Œå½“$y=0$æ—¶ï¼Œ$x=0.5$ ï¼Œå› æ­¤è¿™é‡Œä¸å¦¨ä½¿ç”¨$y$æ¥è¡¨ç¤ºèŠ‚ç‚¹æ˜¯å¦è¢«å æ®ï¼Œå½“æ£€æµ‹ä¸åˆ°å æ®æ—¶å°±å°†$y$å¢åŠ ä¸€ä¸ªå€¼ï¼Œå¦åˆ™å°±è®©$y$å‡å°ä¸€ä¸ªå€¼ã€‚éœ€è¦æŸ¥è¯¢æ¦‚ç‡æ—¶å°±é€†logitå˜æ¢ï¼Œè½¬æ¢ä¸ºæ¦‚ç‡å³å¯ã€‚ä½¿ç”¨æ•°å­¦è¡¨è¿°å°±æ˜¯ï¼Œè®¾æŸä¸ªèŠ‚ç‚¹ä¸º$n$ï¼Œè§‚æµ‹æ•°æ®ä¸º$z$ã€‚é‚£ä¹ˆä»å¼€å§‹åˆ° $t$ æ—¶åˆ»æŸèŠ‚ç‚¹çš„æ¦‚ç‡å¯¹æ•°å€¼å°±ä¸º$L(n|z_{1:t})$ï¼Œäºæ˜¯$t+1$æ—¶åˆ»ç”±æœ‰ï¼š L\\left(n \\mid z_{1: t+1}\\right)=L\\left(n \\mid z_{1: t-1}\\right)+L\\left(n \\mid z_{t}\\right)è½¬åŒ–ä¸ºæ¦‚ç‡å½¢å¼å°±æ˜¯ï¼š P\\left(n \\mid z_{1: T}\\right)=\\left[1+\\frac{1-P\\left(n \\mid z_{T}\\right)}{P\\left(n \\mid z_{T}\\right)} \\frac{1-P\\left(n \\mid z_{1: T-1}\\right)}{P\\left(n \\mid z_{1: T-1}\\right)} \\frac{P(n)}{1-P(n)}\\right]^{-1}æœ‰äº†å¯¹æ•°æ¦‚ç‡ï¼Œå°±å¯ä»¥æ ¹æ®RGB-Dæ•°æ®æ›´æ–°æ•´ä¸ªå…«å‰æ ‘åœ°å›¾äº†ã€‚å‡è®¾åœ¨RGB-Då›¾åƒä¸­è§‚æµ‹åˆ°æŸä¸ªåƒç´ å¸¦æœ‰æ·±åº¦dï¼Œå°±è¯´æ˜ï¼šåœ¨æ·±åº¦å€¼å¯¹åº”çš„ç©ºé—´ç‚¹ä¸Šè§‚å¯Ÿåˆ°äº†ä¸€ä¸ªå æ®æ•°æ®ï¼Œå¹¶ä¸”ï¼Œä»ç›¸æœºå…‰å¿ƒå‡ºå‘åˆ°è¿™ä¸ªç‚¹çš„çº¿æ®µä¸Šåº”è¯¥æ˜¯æ²¡æœ‰ç‰©ä½“çš„ï¼ˆå¦åˆ™ä¼šè¢«é®æŒ¡)ã€‚åˆ©ç”¨è¿™ä¸ªä¿¡æ¯ï¼Œå¯ä»¥å¾ˆå¥½åœ°å¯¹å…«å‰æ ‘åœ°å›¾è¿›è¡Œæ›´æ–°,å¹¶ä¸”èƒ½å¤„ç†è¿åŠ¨çš„ç»“æ„ã€‚ è¿™éƒ¨åˆ†å¯¹åº”çš„ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182#include &lt;iostream&gt;#include &lt;fstream&gt;using namespace std;#include &lt;opencv2/core/core.hpp&gt;#include &lt;opencv2/highgui/highgui.hpp&gt;#include &lt;octomap/octomap.h&gt; // for octomap #include &lt;Eigen/Geometry&gt;#include &lt;boost/format.hpp&gt; // for formating stringsint main(int argc, char **argv) { vector&lt;cv::Mat&gt; colorImgs, depthImgs; // å½©è‰²å›¾å’Œæ·±åº¦å›¾ vector&lt;Eigen::Isometry3d&gt; poses; // ç›¸æœºä½å§¿ ifstream fin(&quot;../data/pose.txt&quot;); if (!fin) { cerr &lt;&lt; &quot;cannot find pose file&quot; &lt;&lt; endl; return 1; } for (int i = 0; i &lt; 5; i++) { boost::format fmt(&quot;../data/%s/%d.%s&quot;); //å›¾åƒæ–‡ä»¶æ ¼å¼ colorImgs.push_back(cv::imread((fmt % &quot;color&quot; % (i + 1) % &quot;png&quot;).str())); depthImgs.push_back(cv::imread((fmt % &quot;depth&quot; % (i + 1) % &quot;png&quot;).str(), -1)); // ä½¿ç”¨-1è¯»å–åŸå§‹å›¾åƒ double data[7] = {0}; for (int i = 0; i &lt; 7; i++) { fin &gt;&gt; data[i]; } Eigen::Quaterniond q(data[6], data[3], data[4], data[5]); Eigen::Isometry3d T(q); T.pretranslate(Eigen::Vector3d(data[0], data[1], data[2])); poses.push_back(T); } // è®¡ç®—ç‚¹äº‘å¹¶æ‹¼æ¥ // ç›¸æœºå†…å‚ double cx = 319.5; double cy = 239.5; double fx = 481.2; double fy = -480.0; double depthScale = 5000.0; cout &lt;&lt; &quot;æ­£åœ¨å°†å›¾åƒè½¬æ¢ä¸º Octomap ...&quot; &lt;&lt; endl; // octomap tree octomap::OcTree tree(0.01); // å‚æ•°ä¸ºåˆ†è¾¨ç‡ for (int i = 0; i &lt; 5; i++) { cout &lt;&lt; &quot;è½¬æ¢å›¾åƒä¸­: &quot; &lt;&lt; i + 1 &lt;&lt; endl; cv::Mat color = colorImgs[i]; cv::Mat depth = depthImgs[i]; Eigen::Isometry3d T = poses[i]; octomap::Pointcloud cloud; // the point cloud in octomap for (int v = 0; v &lt; color.rows; v++) for (int u = 0; u &lt; color.cols; u++) { unsigned int d = depth.ptr&lt;unsigned short&gt;(v)[u]; // æ·±åº¦å€¼ if (d == 0) continue; // ä¸º0è¡¨ç¤ºæ²¡æœ‰æµ‹é‡åˆ° Eigen::Vector3d point; point[2] = double(d) / depthScale; point[0] = (u - cx) * point[2] / fx; point[1] = (v - cy) * point[2] / fy; Eigen::Vector3d pointWorld = T * point; // å°†ä¸–ç•Œåæ ‡ç³»çš„ç‚¹æ”¾å…¥ç‚¹äº‘ cloud.push_back(pointWorld[0], pointWorld[1], pointWorld[2]); } // å°†ç‚¹äº‘å­˜å…¥å…«å‰æ ‘åœ°å›¾ï¼Œç»™å®šåŸç‚¹ï¼Œè¿™æ ·å¯ä»¥è®¡ç®—æŠ•å°„çº¿ tree.insertPointCloud(cloud, octomap::point3d(T(0, 3), T(1, 3), T(2, 3))); } // æ›´æ–°ä¸­é—´èŠ‚ç‚¹çš„å æ®ä¿¡æ¯å¹¶å†™å…¥ç£ç›˜ tree.updateInnerOccupancy(); cout &lt;&lt; &quot;saving octomap ... &quot; &lt;&lt; endl; tree.writeBinary(&quot;octomap.bt&quot;); return 0;} æˆ‘ä»¬ä½¿ç”¨octomap:OcTreeæ„å»ºæ•´å¼ åœ°å›¾ã€‚å®é™…ä¸Šï¼Œå…«å‰æ ‘åœ°å›¾æä¾›äº†è®¸å¤šç§å…«å‰æ ‘:æœ‰å¸¦åœ°å›¾çš„ï¼Œæœ‰å¸¦å æ®ä¿¡æ¯çš„ï¼Œä¹Ÿå¯ä»¥è‡ªå·±å®šä¹‰æ¯ä¸ªèŠ‚ç‚¹éœ€è¦æºå¸¦å“ªäº›å˜é‡ã€‚ å…«å‰æ ‘åœ°å›¾å†…éƒ¨æä¾›äº†ä¸€ä¸ªç‚¹äº‘ç»“æ„ã€‚å®ƒæ¯” PCLçš„ç‚¹äº‘ç¨å¾®ç®€å•ä¸€äº›ï¼Œåªæºå¸¦ç‚¹çš„ç©ºé—´ä½ç½®ä¿¡æ¯ã€‚æˆ‘ä»¬æ ¹æ®RGB-Då›¾åƒå’Œç›¸æœºä½å§¿ä¿¡æ¯ï¼Œå…ˆå°†ç‚¹çš„åæ ‡è½¬è‡³ä¸–ç•Œåæ ‡ï¼Œç„¶åæ”¾å…¥å…«å‰æ ‘åœ°å›¾çš„ç‚¹äº‘ï¼Œæœ€åäº¤ç»™å…«å‰æ ‘åœ°å›¾ã€‚ä¹‹åï¼Œå…«å‰æ ‘åœ°å›¾ä¼šæ ¹æ®ä¹‹å‰ä»‹ç»çš„æŠ•å½±ä¿¡æ¯ï¼Œæ›´æ–°å†…éƒ¨çš„å æ®æ¦‚ç‡ï¼Œæœ€åä¿å­˜æˆå‹ç¼©åçš„å…«å‰æ ‘åœ°å›¾ã€‚æˆ‘ä»¬æŠŠç”Ÿæˆçš„åœ°å›¾å­˜æˆoctomap.btä»¶ã€‚ æ€»ç»“æœ€åä¸€éƒ¨åˆ†ä¸ºå®æ—¶ä¸‰ç»´é‡å»ºçš„å†…å®¹ï¼Œè¿™é‡Œç”±äºæ•°é‡Œçš„ä»‹ç»æ¯”è¾ƒç®€ç•¥ï¼Œå› æ­¤è¿™é‡Œä¸å†èµ˜è¿°ã€‚ è¿™æ¬¡çš„è§†è§‰SLAMåå››è®²çš„ç¬¬ä¸€è½®å·²ç»å®Œç»“ï¼Œåç»­é’ˆå¯¹ä¸€äº›æ¨¡å—ä¼šå‡ºä¸€äº›ç»†åŒ–çš„æ•™ç¨‹ï¼Œä»¥åŠä¼šæ·±å…¥å­¦ä¹ ä¸¤ä¸ªæ¡†æ¶ORB-SLAMå’ŒVINS-SLAMçš„è¿™ä¸¤ä¸ªç»å…¸çš„æ¡†æ¶ã€‚","link":"/2022/07/01/SLAM/ch12-%E5%BB%BA%E5%9B%BE-%E7%AC%AC%E4%BA%8C%E9%83%A8%E5%88%86-RGB-D%E7%A8%A0%E5%AF%86%E5%BB%BA%E5%9B%BE/"},{"title":"Faster R-CNNç†è®ºçŸ¥è¯†å’ŒPASCAL VOC2012æ•°æ®é›†","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦è®²è§£çš„æ˜¯Faster R-CNNåŸºæœ¬ç†è®ºå’ŒPASCAL VOC2012æ•°æ®é›†çš„ä½¿ç”¨ï¼Œå…³äºFaster R-CNNç†è®ºçš„ä»£ç éƒ¨åˆ†å°†ä¼šåœ¨åé¢çš„æ•™ç¨‹ä¸­è¿›è¡Œè¯¦ç»†çš„è®²è§£ã€‚ Faster R-CNNåŸºæœ¬ç†è®º ä¸»è¦æ­¥éª¤Faster R-CNNç®—æ³•æµç¨‹å¯åˆ†ä¸º3ä¸ªæ­¥éª¤ï¼š å°†å›¾åƒè¾“å…¥ç½‘ç»œå¾—åˆ°ç›¸åº”çš„ç‰¹å¾å›¾ï¼› ä½¿ç”¨RPNç»“æ„ç”Ÿæˆå€™é€‰æ¡†ï¼Œå°†RPNç”Ÿæˆçš„å€™é€‰æ¡†æŠ•å½±åˆ°ç‰¹å¾å›¾ä¸Šè·å¾—ç›¸åº”çš„ç‰¹å¾çŸ©é˜µï¼› å°†æ¯ä¸ªç‰¹å¾çŸ©é˜µé€šè¿‡ROI poolingå±‚ç¼©æ”¾åˆ°7x7å¤§å°çš„ç‰¹å¾å›¾ï¼Œæ¥ç€å°†ç‰¹å¾å›¾å±•å¹³é€šè¿‡ä¸€ç³»åˆ—å…¨è¿æ¥å±‚å¾—åˆ°é¢„æµ‹ç»“æœã€‚ æ€»ç»“æ¥è¯´ï¼Œå°±æ˜¯ä¸€ä¸ªRPN+Fast R-CNNçš„åä¸‰å±‚ã€‚ RPNç½‘ç»œ è¿™é‡Œè¾“å…¥çš„æ˜¯ç‰¹å¾å›¾(feature map)è€Œä¸æ˜¯åŸæ¥çš„å›¾ç‰‡ï¼Œä½¿ç”¨ä¸€ä¸ªæ»‘åŠ¨ä¸²å£åœ¨feature mapä¸Šé¢è¿›è¡Œæ»‘åŠ¨ã€‚ è¿™é‡Œçš„kæŒ‡çš„æ˜¯achor boxçš„æ•°é‡ï¼Œachor boxä¸ºäº‹å…ˆå®šä¹‰å¥½çš„å…·æœ‰ä¸€å®šçŸ©å½¢æ¡†ï¼Œå…¶ç”Ÿæˆçš„ä¸»è¦è¿‡ç¨‹æ˜¯ï¼š é¦–å…ˆç”Ÿæˆä¸­å¿ƒç‚¹ï¼Œå°†åŸå›¾çš„è¾¹é•¿/ç‰¹å¾å›¾çš„è¾¹é•¿å¾—åˆ°x,yæ–¹å‘çš„æ”¾å¤§æ¯”ä¾‹ï¼Œè®°ä¸º$x_{scale},y_{scale}$ ï¼Œè®°åœ¨ç‰¹å¾å›¾ä¸Šçš„åæ ‡ä¸º$x_0,y_0$ã€‚åœ¨åŸå›¾ä¸­çš„åæ ‡è®°ä¸º$x=x_{scale}x_0$, $y=y_{scale}y_0$ã€‚ ä¹‹åä»¥$(x,y)$ä¸ºä¸­å¿ƒç”Ÿæˆå‡ ä¸ªachorã€‚ å°†æ»‘åŠ¨çª—å£è¾“å…¥åˆ°å¯¹åº”çš„è¾“å…¥åˆ°å¯¹åº”çš„ç½‘ç»œä¸­å»ï¼Œè¿™é‡Œæœ‰ä¸¤ä¸ªå¯ä»¥å‚è€ƒçš„ç½‘ç»œï¼š ä¸€ä¸ªæ˜¯ZFç½‘ç»œï¼Œå…¶è¾“å‡ºä¸º256ç»´çš„ç¼–ç ï¼› å¦ä¸€ä¸ªæ˜¯VGG16ç½‘ç»œï¼Œå…¶è¾“å‡ºæ˜¯512ç»´çš„ç¼–ç ã€‚ ä¹‹åå°†ç¼–ç åˆ†åˆ«æé«˜å„è‡ªçš„å…¨è¿æ¥å±‚ã€‚ cls layerè¾“å‡ºçš„ä¸º2kçš„scoreï¼Œå…¶å«ä¹‰æ˜¯è¿™ä¸ªachor boxæ‰€åŒ…å«çš„ç‰¹å¾å›¾æ˜¯å›¾ç‰‡æˆ–æ˜¯èƒŒæ™¯çš„æ¦‚ç‡ã€‚ reg layerè¾“å‡ºçš„ä¸º4kçš„coordinate çš„æ¦‚ç‡ï¼Œ4ä¸ªå‚æ•°åˆ†åˆ«ä¸ºachor boxå¯¹åº”æ¡†çš„ä½ç½®(x,y)å’Œå®½åº¦é«˜åº¦(h,w)ã€‚ clså¾—åˆ°çš„ä»…ä»…æ˜¯é¢„æµ‹æ¯ä¸ªachor å¯¹åº”çš„æ˜¯èƒŒæ™¯çš„æ¦‚ç‡å’Œæ˜¯ç›®æ ‡çš„æ¦‚ç‡ã€‚ regä¹Ÿæ˜¯ä»…ä»…å¯¹åº”æ¯ä¸ªachorå¯¹åº”çš„å›å½’å‚æ•°ï¼Œå…¶ä¸­åŒ…å«ç€å¯¹ä½ç½®å’Œå®½é«˜å‚æ•°ã€‚ å› ä¸ºç›®æ ‡å¯¹åº”çš„é•¿çŸ­å’Œé«˜å®½æ¯”ä¾‹å„è‡ªä¸åŒï¼Œå¤šä»¥è¿™é‡Œä¼šæ ¹æ®ç»éªŒå¾—åˆ°å¯¹åº”çš„å…ˆéªŒæ¡†ã€‚ åœ¨æ¯ä¸ªå°ºåº¦ä¸Šç”Ÿæˆå¯¹åº”å°ºåº¦çš„3ä¸ªï¼Œæ¯ä¸ªå°ºåº¦ä¸‹æœ‰ä¸‰ç§å¯¹åº”çš„é•¿å®½æ¯”ä¾‹ï¼Œå¯¹åº”æ¯ä¸ªä½ç½®æœ‰9ç§achor. æ³¨ï¼šè¿™é‡Œçš„æ»‘åŠ¨çª—å£å…¶å®æ˜¯3x3çš„å·ç§¯ï¼Œå…¶padding=1,stride=1å¾—åˆ°çš„è§„æ¨¡å’Œfeature mapä¸€æ ·ã€‚ åœ¨ç‰¹å¾å›¾ä¸Š3x3çš„patchå¯¹åº”çš„æ„Ÿå—é‡ä¸¤ç§ç½‘ç»œåˆ†åˆ«ï¼šZFä¸º171ï¼ŒVGG16ä¸º228ã€‚æ˜¯é—®é¢˜æ˜¯è¿™ä¹ˆå°çš„æ„Ÿå—é‡æ˜¯å¦‚ä½•è¯†åˆ«æ¯”è‡ªå·±å¤§çš„achorçš„ï¼Œè¿™é‡ŒåŸè®ºæ–‡è®²çš„æ˜¯å¯ä»¥è¯†åˆ«ï¼Œå°½ç®¡achorçš„ä¸€éƒ¨åˆ†åœ¨æ„Ÿå—é‡å¤–é¢ã€‚ å…¶å®å°±æ˜¯è§å¾®çŸ¥è‘—ï¼Œé€šè¿‡å±€éƒ¨æ¥é¢„æµ‹å…¨å±€ã€‚ ç‰¹å¾è¯†åˆ«é—®é¢˜å¯¹äºä¸€å¼ 1000x600x3çš„å›¾åƒï¼Œè¿›è¡Œå®Œç‰¹å¾æå–ä¹‹åå¤§çº¦æœ‰60x40x9(20k)ä¸ªanchorï¼Œå¿½ç•¥è·¨è¶Šè¾¹ç•Œçš„anchorä»¥åï¼Œå‰©ä¸‹çº¦6kä¸ªanchorã€‚ å¯¹äºRPNç”Ÿæˆçš„å€™é€‰æ¡†ä¹‹é—´å­˜åœ¨å¤§é‡é‡å ï¼ŒåŸºäºå€™é€‰æ¡†çš„clså¾—åˆ†ï¼Œé‡‡ç”¨éæå¤§å€¼æŠ‘åˆ¶ï¼ŒIoUè®¾ä¸º0.7ï¼Œè¿™æ ·æ¯å¼ å›¾ç‰‡åªå‰©2kä¸ªå€™é€‰æ¡†ã€‚ é€šè¿‡RPNç½‘ç»œä¹‹åï¼Œä¸€å…±ä¼šæœ‰ä¸Šä¸‡ä¸ªachorï¼Œè¿™é‡Œä¸€å¼ å›¾ç‰‡ç­›é€‰ä¹‹åä»…ä»…ä¿ç•™256ä¸ªï¼Œå…¶ä¸­çš„æ­£æ ·æœ¬ï¼šè´Ÿæ ·æœ¬=1ï¼š1ï¼Œå¦‚æœæ­£æ ·æœ¬çš„ä¸å¤Ÿ128ä¸ªï¼Œé‚£ä¹ˆä¸è¶³çš„ç”±è´Ÿæ ·æœ¬æ¥è¡¥å…¨ã€‚ æ­£æ ·æœ¬çš„é€‰å–æ¡ä»¶ï¼š achor å’Œ Ground truth çš„ $IoU&gt;0.7$ ï¼› achor å’Œ Ground truth çš„ $IoU$ æœ€å¤§ã€‚ å½“ç¬¬äºŒä¸ªæ¡ä»¶æ²¡åŠæ³•æ»¡è¶³æ—¶ï¼Œä½¿ç”¨ç¬¬ä¸€ä¸ªæ¡ä»¶ã€‚ è´Ÿæ ·æœ¬çš„é€‰å–æ¡ä»¶ï¼š achor å’Œ Ground truth çš„ $IoU&lt;0.3$ ï¼› achor å’Œ Ground truth çš„ $IoU$ æœ€å°ã€‚ å¯¹äºæ­£è´Ÿæ ·æœ¬ä¹‹å¤–çš„éƒ¨åˆ†ç›´æ¥èˆå»ã€‚ æŸå¤±å‡½æ•° è¿™é‡Œ$N_{reg}$ ä»£è¡¨çš„æ˜¯achorçš„ä½ç½®æ•°ä¸æ˜¯æ€»æ•°ã€‚ å¯¹äºæƒé‡è®ºæ–‡é‡Œ$\\lambda=10$ï¼Œæ­¤æ—¶ä¸¤ä¸ªåˆ†ç±»æŸå¤±çš„æƒé‡ç»Ÿä¸€è¿‘ä¼¼çš„ææˆ$1/N_{cls}$å³å¯ã€‚ å…¶ä»–çš„éƒ¨åˆ†å’Œä¹‹å‰çš„Fast R-CNNç›¸åŒã€‚ æ³¨æ„ï¼šæ­¤æŸå¤±å‡½æ•°ä¸ºä¸€ä¸ªå¤šåˆ†ç±»çš„æŸå¤±ï¼Œå› ä¸ºä½¿ç”¨äºŒåˆ†ç±»æ—¶æ¯ä¸ªachorå°±ä»…ä»…é¢„æµ‹ä¸€ä¸ªå€¼ã€‚ æŸå¤±å‡½æ•°ä¸ºï¼š$L_{cls}=-\\sum\\limits_{i=1}^2 p_i^*\\log(p_i)=-\\log(p_i)$ ä¾‹å¦‚ï¼Œå¯¹äºç¬¬ä¸€ä¸ªachoræ¥è¯´ï¼Œå…¶ä¸ºçœŸå®çš„æ ·æœ¬ï¼Œäºæ˜¯æŸå¤±å‡½æ•°è®¡ç®—é€‰æ­£æ ·æœ¬çš„æ¦‚ç‡0.9ï¼Œ$L_{cls}=-\\log(0.9)$ï¼›å¯¹äºç¬¬äºŒä¸ªachoræ¥è¯´ï¼Œå…¶ä¸ºèƒŒæ™¯ï¼Œäºæ˜¯å¯¹äºçš„æŸå¤±å‡½æ•°å°±é€‰ä¸ºè´Ÿæ ·æœ¬çš„æ¦‚ç‡0.2ï¼Œ$L_{cls}=-\\log(0.2)$ å¯¹äºäºŒåˆ†ç±»çš„æŸå¤±å‡½æ•°çš„è®¡ç®—å…¬å¼ä¸ºï¼š $L_{cls}=- p_i^ \\log(p_i)-(1-p_i^ ) \\log(1-p_i)$ è¿™é‡Œåœ¨pytorchçš„å®˜ç½‘ç»™å‡ºçš„ä»£ç é‡Œé¢ï¼Œä½¿ç”¨çš„æ˜¯äºŒåˆ†ç±»çš„æƒ…å†µã€‚ è¾¹ç•Œæ¡†æŸå¤±å‡½æ•°çš„è¡¨è¾¾å¼å’Œä¹‹å‰Fast R-CNNæ˜¯ä¸€æ ·çš„ã€‚ Faster R-CNNçš„è®­ç»ƒè¿‡ç¨‹ç°åœ¨æ˜¯ç›´æ¥é‡‡ç”¨RPN Loss+ Fast R-CNN Lossçš„è”åˆè®­ç»ƒæ–¹æ³• åŸè®ºæ–‡ä¸­é‡‡ç”¨åˆ†åˆ«è®­ç»ƒRPNä»¥åŠFast R-CNNçš„æ–¹æ³•ï¼š åˆ©ç”¨ImageNeté¢„è®­ç»ƒåˆ†ç±»æ¨¡å‹åˆå§‹åŒ–å‰ç½®å·ç§¯ç½‘ç»œå±‚å‚æ•°ï¼Œå¹¶å¼€å§‹å•ç‹¬è®­ç»ƒRPNç½‘ç»œå‚æ•°ï¼› å›ºå®šRPNç½‘ç»œç‹¬æœ‰çš„å·ç§¯å±‚ä»¥åŠå…¨è¿æ¥å±‚å‚æ•°ï¼Œå†åˆ©ç”¨lmageNeté¢„è®­ç»ƒåˆ†ç±»æ¨¡å‹åˆå§‹åŒ–å‰ç½®å·ç§¯ç½‘ç»œå‚æ•°ï¼Œå¹¶åˆ©ç”¨RPNç½‘ç»œç”Ÿæˆçš„ç›®æ ‡å»ºè®®æ¡†å»è®­ç»ƒFast RCNNç½‘ç»œå‚æ•°ã€‚ å›ºå®šåˆ©ç”¨Fast RCNNè®­ç»ƒå¥½çš„å‰ç½®å·ç§¯ç½‘ç»œå±‚å‚æ•°ï¼Œå»å¾®è°ƒRPNç½‘ç»œç‹¬æœ‰çš„å·ç§¯å±‚ä»¥åŠå…¨è¿æ¥å±‚å‚æ•°ã€‚ åŒæ ·ä¿æŒå›ºå®šå‰ç½®å·ç§¯ç½‘ç»œå±‚å‚æ•°ï¼Œå»å¾®è°ƒFast RCNNç½‘ç»œçš„å…¨è¿æ¥å±‚å‚æ•°ã€‚æœ€åRPNç½‘ç»œä¸Fast RCNNç½‘ç»œå…±äº«å‰ç½®å·ç§¯ç½‘ç»œå±‚å‚æ•°ï¼Œæ„æˆä¸€ä¸ªç»Ÿä¸€ç½‘ç»œã€‚ æ€»ç»“ æ¡†æ¶é€æ¸ç®€æ´ï¼Œæ•ˆæœä¹Ÿéå¸¸å¥½ã€‚ PASCAL VOC2012æ•°æ®é›†æ¦‚è¿° å…¶ä¸­å¯¹äºæ•°æ®ä¸Šç›®æ ‡çš„æ ‡æ³¨ï¼Œå°¤å…¶æ˜¯è¯­ä¹‰åˆ†å‰²è¿˜è¦å°†è½®å»“ä¹Ÿè¦è¿›è¡Œæ ‡æ³¨ï¼Œæ¯”è¾ƒçš„éæ—¶è´¹åŠ›ã€‚ å¦‚ä¸‹é¢çš„ç¬¬ä¸€è¡Œï¼Œæ˜¯å¯¹å…¶è¿›è¡Œå®ä¾‹åˆ†å‰²å’Œè¯­ä¹‰åˆ†å‰²ï¼ŒäºŒè€…ä¸æ˜¯å®Œå…¨ç›¸åŒã€‚ ç¬¬äºŒè¡Œä¸»è¦æ˜¯è¿›è¡Œè¡Œä¸ºæ£€æµ‹çš„ä¿¡æ¯ï¼Œç¬¬ä¸‰è¡Œæ˜¯å…³äºäººä½“éƒ¨ä½æ£€æµ‹çš„ä¿¡æ¯ã€‚ ä¹‹åï¼Œæˆ‘ä»¬è¿›å…¥å®˜ç½‘è¿›è¡Œæ•°æ®é›†çš„ä¸‹è½½ï¼Œå…¶æ•°æ®é›†çš„å®˜ç½‘ä¸ºï¼šhttp://host.robots.ox.ac.uk/pascal/VOC/voc2012/index.html è¿›å…¥åˆ°æ•°æ®é›†ä¸­ï¼Œå…¶ä¸­çš„ç±»åˆ«æœ‰20å¤šç§ã€‚ Vehicles House Animals Other Aeroplane Bottle Bird Person Bicycle Chair Cat Boat Dining Cow Bus Potted plant Dog Car Sofa Horse Motorbike TV/Moniter Sheep Train è¿™é‡Œæˆ‘ä»¬ä¸»è¦å…³æ³¨æ˜¯Mainæ–‡ä»¶é‡Œé¢çš„å†…å®¹ï¼Œä¸‹é¢çš„ä¸»è¦æ˜¯ç”¨äºå›¾åƒåˆ†å‰²ä½¿ç”¨çš„æ–‡ä»¶äº†ã€‚ è¿™é‡Œçš„.xmlæ˜¯.htmlæ–‡ä»¶çš„ä¸€ç§æ¼”å˜çš„å½¢å¼ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051&lt;annotation&gt; &lt;filename&gt;2012_004331.jpg&lt;/filename&gt; # æ–‡ä»¶å &lt;folder&gt;VOC2012&lt;/folder&gt; # å­˜åœ¨äºå“ªä¸ªæ–‡ä»¶åŠ ä¸‹ &lt;object&gt; &lt;name&gt;person&lt;/name&gt; &lt;actions&gt; # è¿™ä¸ªæ–‡ä»¶æ˜¯ä¸»è¦æ¥è¿›è¡Œçš„äººç±»å§¿æ€è¯†åˆ«çš„ &lt;jumping&gt;1&lt;/jumping&gt; &lt;other&gt;0&lt;/other&gt; &lt;phoning&gt;0&lt;/phoning&gt; &lt;playinginstrument&gt;0&lt;/playinginstrument&gt; &lt;reading&gt;0&lt;/reading&gt; &lt;ridingbike&gt;0&lt;/ridingbike&gt; &lt;ridinghorse&gt;0&lt;/ridinghorse&gt; &lt;running&gt;0&lt;/running&gt; &lt;takingphoto&gt;0&lt;/takingphoto&gt; &lt;usingcomputer&gt;0&lt;/usingcomputer&gt; &lt;walking&gt;0&lt;/walking&gt; &lt;/actions&gt; &lt;bndbox&gt; # æ¡†å‡ºèŒƒå›´ &lt;xmax&gt;208&lt;/xmax&gt; &lt;xmin&gt;102&lt;/xmin&gt; &lt;ymax&gt;230&lt;/ymax&gt; &lt;ymin&gt;25&lt;/ymin&gt; &lt;/bndbox&gt; &lt;difficult&gt;0&lt;/difficult&gt; # æ˜¯å¦å®¹æ˜“è¢«æ£€æŸ¥å‡ºæ¥ &lt;pose&gt;Unspecified&lt;/pose&gt; &lt;point&gt; &lt;x&gt;155&lt;/x&gt; &lt;y&gt;119&lt;/y&gt; &lt;/point&gt; &lt;/object&gt; &lt;segmented&gt;0&lt;/segmented&gt; # æ˜¯å¦è¿›è¡Œäº†åˆ†å‰²ï¼Œè¿›è¡Œäº†å°±æ˜¯1ï¼Œåä¹‹å°±æ˜¯0 &lt;size&gt; &lt;depth&gt;3&lt;/depth&gt; &lt;height&gt;375&lt;/height&gt; &lt;width&gt;500&lt;/width&gt; &lt;/size&gt; # è®°å½•å›¾ç‰‡çš„å¤§å° &lt;source&gt; &lt;annotation&gt;PASCAL VOC2012&lt;/annotation&gt; &lt;database&gt;The VOC2012 Database&lt;/database&gt; &lt;image&gt;flickr&lt;/image&gt; &lt;/source&gt;&lt;/annotation&gt; å…¶æ¬¡Mainæ–‡ä»¶å¤¹ä¸‹ä¸»è¦è®°å½•çš„æ˜¯æ–‡ä»¶åï¼Œå…¶ä¸­train valå†…çš„æ–‡ä»¶åä¹¦äº’æ–¥çš„ï¼Œæœ€åçš„æ–‡ä»¶æ˜¯è¿›è¡Œæ±‡æ€»çš„æ–‡ä»¶ã€‚ è¿™é‡Œè½½å…¥ä¿¡æ¯çš„æµç¨‹ï¼Œé¦–å…ˆï¼Œè¯»å–train.txtæ–‡ä»¶ï¼Œè·å–æ¯ä¸ªçš„ä¿¡æ¯ï¼ˆtxtæ–‡ä»¶é‡Œé¢è£…çš„å…¶å®å…¨æ˜¯æ–‡ä»¶çš„åå­—ï¼‰ã€‚ä¹‹åï¼Œæ ¹æ®æ–‡ä»¶åæ¥åˆ°JPEGimageæ–‡ä»¶å¤¹é‡Œè¯»å–å¯¹åº”çš„å›¾ç‰‡çš„æ–‡ä»¶ã€‚ åœ¨æˆ‘ä»¬è®­ç»ƒä¹‹åï¼Œéœ€è¦è¿›è¡Œæ ‡æ³¨æ¥è·å¾—è‡ªå·±çš„æ•°æ®é›†ã€‚ æ ‡æ³¨è‡ªå·±çš„æ•°æ®é›†è¿™é‡Œé‡‡ç”¨çš„å·¥å…·æ˜¯åœ¨githubä¸Šé¢çš„æ–‡ä»¶â€”â€”LabelImgã€‚å®‰è£…çš„è¯æ˜¯ä½¿ç”¨çš„pip install labelImg. åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œç›´æ¥è¾“å…¥å‘½ä»¤labelImg [IMAGE_PATH] [PRE-DEFINED CLASS FILE]ã€‚å…¶ä¸­ç¬¬ä¸€ä¸ªæ˜¯æ–‡ä»¶çš„è·¯å¾„ï¼Œåé¢ä¸€ä¸ªæ˜¯å…³äºè¿™ä¸ªæ•°æ®é›†çš„ç±»åˆ«çš„æ ‡ç­¾ã€‚ å…·ä½“æ˜¯ä½¿ç”¨æ­¥éª¤å¦‚ä¸‹ï¼š æ‰“å¼€é¡¹ç›®æ–‡ä»¶å¤¹-&gt;data-&gt;predefined_classes.txtä¿®æ”¹æ ‡æ³¨ç±»åˆ«ä¿¡æ¯ï¼› æ‰“å¼€è½¯ä»¶ï¼› è®¾ç½®å›¾åƒæ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼Œä»¥åŠæ ‡æ³¨æ–‡ä»¶ä¿å­˜ç›®å½•ï¼› æ ‡æ³¨å›¾åƒï¼Œå¹¶ä¿å­˜ï¼› è‹¥è¦ä¿®æ”¹æºä»£ç åœ¨é¡¹ç›®çš„libs-&gt;labelFile.pyæ–‡ä»¶ä¸­ä¿®æ”¹ã€‚ åœ¨å·¦è¾¹å¤„è¿›è¡Œå¼€å§‹ç”»æ¡†ã€ä¿å­˜ã€åˆ‡æ¢ä¸Šä¸‹ç­‰ã€‚ä¹‹åç‚¹å‡»ä¿å­˜ï¼Œå°±ä¼šä¿å­˜åˆ°å¯¹åº”çš„annotationsæ–‡ä»¶å¤¹ä¸­ã€‚ ä¹‹åè¿˜è¦å°†æ–‡ä»¶åä¹Ÿä¿å­˜åˆ°Mainæ–‡ä»¶å¤¹ä¸­å³å¯ã€‚","link":"/2022/07/02/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E5%8F%8APytorch%E5%AE%9E%E7%8E%B0/Faster-R-CNN%E7%90%86%E8%AE%BA%E7%9F%A5%E8%AF%86%E5%92%8CPASCAL-VOC2012%E6%95%B0%E6%8D%AE%E9%9B%86/"},{"title":"FCNç½‘ç»œè¯¦ç»†ä»£ç å®ç°","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦æ˜¯ä»‹ç»æ¨¡å‹å…·ä½“æ¨¡å‹çš„å®ç°éƒ¨åˆ†ï¼Œä¸»è¦ä»æ¨¡å‹éƒ¨åˆ†çš„æ­å»ºè¿‡ç¨‹ï¼ŒåŒ…æ‹¬backboneå’Œæ€»çš„FCNæ­å»ºçš„è¿‡ç¨‹ï¼Œä»¥åŠè‡ªå®šä¹‰æ•°æ®é›†éƒ¨åˆ†å’Œè®¡ç®—æ··æ·†çŸ©é˜µå¾—åˆ°éƒ¨åˆ†ã€‚è¿™é‡Œé¢çš„éš¾ç‚¹æ˜¯é‡æ„backboneéƒ¨åˆ†ã€collate_fn()å‡½æ•°çš„æ„å»ºéƒ¨åˆ†ä»¥åŠæ··æ·†çŸ©é˜µçš„ç´¢å¼•è®¡ç®—ï¼Œæºç å¤„ç†çš„éƒ½æ˜¯å¾ˆå·§å¦™çš„ã€‚ å¦‚æœæœ‰ä¸æ˜ç™½çš„å‚è€ƒå¤§ä½¬çš„æºç ã€‚ æ¨¡å‹çš„æ­å»ºbackbonebackboneéƒ¨åˆ†ï¼Œè¿™éƒ¨åˆ†å…¶å®å°±æ˜¯ä¹‹å‰è®²çš„ResNet50å’ŒResNet101ä¸¤ä¸ªéƒ¨åˆ†ã€‚ è¿™è¾¹å’Œä¹‹å‰çš„ä¸å¤ªä¹‹å¤„åœ¨äºè¿™é‡ŒåŠ å…¥äº†è†¨èƒ€å·ç§¯ï¼š 12345678910111213class ResNet(nn.Module): def __init__(self, block, layers, num_classes=1000, zero_init_residual=False, groups=1, width_per_group=64, replace_stride_with_dilation=None, norm_layer=None): super(ResNet, self).__init__() ... if replace_stride_with_dilation is None: # each element in the tuple indicates if we should replace # the 2x2 stride with a dilated convolution instead replace_stride_with_dilation = [False, False, False] é»˜è®¤çš„æƒ…å†µæ—¶ä¸‰ä¸ªFalseï¼Œæˆ‘ä»¬åœ¨FCNä¸­ä½¿ç”¨æ—¶ä¼šå°†åä¸¤ä½èµ‹å€¼ä¸ºTrueï¼Œå…·ä½“çš„ä»£ç å¦‚ä¸‹é¢æ‰€ç¤ºï¼š 1234def fcn_resnet50(aux, num_classes=21, pretrain_backbone=False): # 'resnet50_imagenet': 'https://download.pytorch.org/models/resnet50-0676ba61.pth' # 'fcn_resnet50_coco': 'https://download.pytorch.org/models/fcn_resnet50_coco-1167a1af.pth' backbone = resnet50(replace_stride_with_dilation=[False, True, True]) å…¶å®å°±æ˜¯ä¿®æ”¹äº†layer3å’Œlayer4çš„å†…å®¹ã€‚ åœ¨æ„å»ºè¿™ä¸¤ä¸ªå±‚çš„Bottleneck1,Bottleneck2çš„æ—¶å€™ï¼Œä¼šå°†è†¨èƒ€å·ç§¯çš„å‚æ•°ä¼ é€’åˆ°ResNetçš„_make_layer()å‡½æ•°å†…éƒ¨ï¼š å‰é¢æˆ‘ä»¬äº†ï¼Œå› ä¸ºä½¿ç”¨äº†è†¨èƒ€å·ç§¯ï¼Œå› æ­¤è¿™é‡Œå°±ä¸åœ¨å¯¹å…¶è¿›è¡Œä¸‹é‡‡æ ·æ“ä½œï¼Œäºæ˜¯å°±å°†dilation=strideï¼Œç„¶åå°†stride=1å³å¯ã€‚è¿™é‡Œçš„dilationå·²ç»è¢«ä¿®æ”¹æˆ2äº†ã€‚ ä¸‹é¢æ ¹æ®ä¸‹å›¾layer3çš„ç»“æ„å¯çŸ¥ï¼Œå…¶ç¬¬ä¸€ä¸ªBottleneck1çš„è†¨èƒ€å·ç§¯ä¸ºprevious_dilation=1ï¼Œåé¢5ä¸ªBottleneck2çš„è†¨èƒ€ç³»æ•°ä¸ºdilation=2ã€‚ è¿™é‡Œçš„dilationå·²ç»è¢«ä¿®æ”¹æˆ2ï¼Œåœ¨æ„å»ºLayer4çš„æ—¶å€™ï¼Œå…¶previous_dilation=2ï¼ŒåŒæ ·çš„æ“ä½œå†æ¬¡self.dilation *= stride äºæ˜¯å°±æœ‰dilation=4ã€‚ æ„å»ºFCNæ¨¡å‹ é¦–å…ˆï¼Œå°è£…å¥½resnet50æ„å»ºçš„å‡½æ•°ã€‚å…¶ä¸­å¦‚æœéœ€è¦å¯¼å…¥é¢„è®­ç»ƒçš„æƒé‡æ—¶ï¼Œè¿™éœ€è¦å°†æ³¨é‡Šéƒ¨åˆ†çš„æƒé‡çš„é“¾æ¥ä¸‹è½½åˆ°æœ¬åœ°å³å¯ã€‚ ä¹‹åï¼Œå®šä¹‰è¾…åŠ©åˆ†ç±»å™¨å’Œä¸»åˆ†ç±»å™¨ï¼Œå¯¹äºè¾…åŠ©åˆ†ç±»å™¨æ¥è®²å…¶å®å°±æ˜¯ä½¿ç”¨ifæ¥æ„å»ºä¸€ä¸ªé”®å€¼å¯¹ï¼Œä¿å­˜åˆ°return_layersã€‚ è¿™é‡Œä½¿ç”¨çš„IntermediateLayerGetterå‡½æ•°æ¥å¯¹è¿™é‡Œçš„å‰é¢çš„backboneè¿›è¡Œé‡æ„ï¼Œæ¥æ‹¿åˆ°layer3,layer4çš„è¾“å‡ºã€‚ 12345678910class IntermediateLayerGetter(nn.ModuleDict): _version = 2 __annotations__ = { &quot;return_layers&quot;: Dict[str, str], } def __init__(self, model: nn.Module, return_layers: Dict[str, str]) -&gt; None: # å…ˆåˆ¤æ–­ä¸€ä¸‹ï¼Œè¿™é‡Œé¢çš„å…ƒç´ æ˜¯ä¸æ˜¯modelé‡Œé¢æ¨¡å—çš„å­é›† if not set(return_layers).issubset([name for name, _ in model.named_children()]): raise ValueError(&quot;return_layers are not present in model&quot;) é¦–å…ˆï¼Œéå†è¿™é‡Œå¯¹åº”çš„æ‰€æœ‰çš„å±‚çš„åå­—ï¼Œçœ‹æœ‰æ²¡æœ‰layer3å’Œlayer4çš„åå­—ã€‚å¦‚æœæ²¡æœ‰å°±ç›´æ¥æŠ¥é”™ã€‚ ä¹‹åï¼Œé‡æ–°æ¥æ„å»ºæ¨¡å‹çš„é”®å€¼å¯¹ã€‚ 123orig_return_layers = return_layersreturn_layers = {str(k): str(v) for k, v in return_layers.items()}# ä¿è¯å…¶ä¸ºå­—ç¬¦ä¸² æ¥ç€ï¼Œé‡æ„backboneï¼Œå°†å…¶ä¸­æ²¡æœ‰ç”¨åˆ°æ¨¡å—è¿›è¡Œåˆ é™¤æ“ä½œã€‚ 123456789101112# é‡æ–°æ„å»ºbackboneï¼Œå°†æ²¡æœ‰ä½¿ç”¨åˆ°çš„æ¨¡å—å…¨éƒ¨åˆ æ‰layers = OrderedDict()# å»ºç«‹äº†ä¸€ä¸ªæœ‰åºçš„å­—å…¸é›†for name, module in model.named_children(): layers[name] = module # å¦‚æœè¿™é‡Œçš„modelé‡Œçš„nameåœ¨return_layerä¸­å‡ºç°äº† # å°†return_layeré‡Œé¢çš„å¯¹åº”é¡¹åˆ å» if name in return_layers: del return_layers[name] # return_layersä¸ºç©ºçš„ if not return_layers: break å›åˆ°æœ¬æ¨¡å‹æ¥çœ‹ï¼Œåœ¨return_layersé‡Œé¢çš„å°±æ˜¯layer3,layer4ä¸¤ä¸ªï¼Œå¯¹åº”æ²¡æœ‰è¾…åŠ©åˆ†ç±»å™¨çš„å°±æ˜¯ä»…ä»…æœ‰layer4ä¸€ä¸ªäº†ï¼Œäºæ˜¯åœ¨å°†layeråˆ å»ä»¥åå°±ç›´æ¥é‡æ„ç»“æŸäº†ã€‚ è¿™é‡Œreturn_layerçš„å€¼ä¸º: 1{'layer4':'out'; 'layer3':'aux'} è¿™æ­¥æ“ä½œçš„æ„å›¾æ˜¯å°†backboneé‡Œçš„è¿›è¡Œé‡æ„ï¼Œreturn_layeré‡Œé¢çš„å…ƒç´ è¢«é‡æ„å®Œï¼Œå°±å…³é—­é€šé“ï¼Œä¸æ¥å—åé¢çš„layerã€‚ 12super(IntermediateLayerGetter, self).__init__(layers)self.return_layers = orig_return_layers æœ€åï¼Œåœ¨foward()å‡½æ•°é‡Œè¿›è¡Œé‡æ–°æ„å»ºï¼Œè¾“å‡ºçš„outæ˜¯ä¸ªå­—å…¸ï¼Œåœ¨æ­¤ä»£ç ï¼Œå¦‚æœè¿™é‡ŒåŠ å…¥äº†è¾…åŠ©åˆ†ç±»å™¨ï¼Œåˆ™å…¶è¾“å‡ºå€¼å°±ä¸ºï¼š 1{'out': xxx; 'aux': xx} è¿™é‡Œçš„xxxå…¶å®å°±æ˜¯å¯¹åº”çš„å±‚è¾“å‡ºçš„å€¼ã€‚ 12345678def forward(self, x: Tensor) -&gt; Dict[str, Tensor]: out = OrderedDict() for name, module in self.items(): x = module(x) if name in self.return_layers: out_name = self.return_layers[name] out[out_name] = x return out å°†backboneéƒ¨åˆ†å¤„ç†å¥½ä¹‹åï¼Œæˆ‘ä»¬æ¥å¤„ç†åé¢çš„FCNHeadçš„å†…å®¹ï¼Œæ„å»ºå¯¹åº”çš„ç±»å¦‚ä¸‹ï¼š 123456789101112class FCNHead(nn.Sequential): def __init__(self, in_channels, channels): inter_channels = in_channels // 4 layers = [ nn.Conv2d(in_channels, inter_channels, 3, padding=1, bias=False), nn.BatchNorm2d(inter_channels), nn.ReLU(), nn.Dropout(0.1), nn.Conv2d(inter_channels, channels, 1) ] super(FCNHead, self).__init__(*layers) ä¹‹åæ„å»ºå°†åˆ†ç±»å™¨çš„éƒ¨åˆ†åŠ å…¥åˆ°å¯¹åº”çš„ä»£ç ä¸­å¯å¾—ï¼š æ„å»ºå¥½åˆ†ç±»å™¨ä¹‹åï¼Œå°†backboneã€classifierã€aux_classesæ¥å®ä¾‹åŒ–FCNç½‘ç»œã€‚ä¸‹é¢æ¥ä»‹ç»FCNç½‘ç»œçš„å…·ä½“çš„æ„å»ºæ–¹æ³•ã€‚ é¦–å…ˆï¼Œè¿›è¡Œç½‘ç»œçš„åˆå§‹åŒ–æ“ä½œï¼Œå‚æ•°ä¸ºä¸Šé¢æåˆ°çš„ä¸‰ä¸ªå‚æ•°ã€‚ ä¹‹åï¼Œè¿›è¡Œå‰å‘ä¼ é€’æ“ä½œï¼Œæ³¨æ„è¿™é‡Œçš„è¾“å‡ºä¸æ˜¯ç›´æ¥è¾“å‡ºçš„Tensorçš„å€¼ï¼Œè€Œæ˜¯ç›´æ¥è¾“å‡ºçš„å¯¹åº”çš„æœ‰åºé”®å€¼å¯¹{key:val(Tensor)}. 12345678910111213141516171819202122def forward(self, x: Tensor) -&gt; Dict[str, Tensor]: input_shape = x.shape[-2:] # contract: features is a dict of tensors features = self.backbone(x) result = OrderedDict() # æœ€åçš„è¾“å‡º x = features[&quot;out&quot;] x = self.classifier(x) # åŸè®ºæ–‡ä¸­è™½ç„¶ä½¿ç”¨çš„æ˜¯ConvTranspose2dï¼Œä½†æƒé‡æ˜¯å†»ç»“çš„ï¼Œæ‰€ä»¥å°±æ˜¯ä¸€ä¸ªbilinearæ’å€¼ x = F.interpolate(x, size=input_shape, mode='bilinear', align_corners=False) result[&quot;out&quot;] = x # è€ƒè™‘è¾…åŠ©åˆ†ç±»å™¨çš„æƒ…å†µ if self.aux_classifier is not None: x = features[&quot;aux&quot;] x = self.aux_classifier(x) # åŸè®ºæ–‡ä¸­è™½ç„¶ä½¿ç”¨çš„æ˜¯ConvTranspose2dï¼Œä½†æƒé‡æ˜¯å†»ç»“çš„ï¼Œæ‰€ä»¥å°±æ˜¯ä¸€ä¸ªbilinearæ’å€¼ x = F.interpolate(x, size=input_shape, mode='bilinear', align_corners=False) result[&quot;aux&quot;] = x return result è‡ªå®šä¹‰è¯»å–æ•°æ®é›†é¦–å…ˆæ¥çœ‹VOCSegmentationç±»çš„åˆå§‹åŒ–æ“ä½œã€‚ voc_rootï¼šä¸ºæ•°æ®é›†çš„æ–‡ä»¶å¤¹çš„è·¯å¾„ã€‚ year=2012ï¼šä¸ºå¯¹åº”æ•°æ®é›†çš„å¹´ä»½ï¼ŒVOCæ•°æ®é›†è¿˜æœ‰ä¸€ä¸ªæ˜¯2007å¹´çš„ã€‚ transforms=Noneï¼šä¸ºå¯¹åº”çš„é¢„å¤„ç†çš„æ–¹æ³•ï¼Œè¿™é‡Œè®­ç»ƒé›†å’Œæµ‹è¯•é›†æ˜¯ä¸ä¸€æ ·çš„ã€‚ txt_name: str = &quot;train.txt&quot;ï¼šä¸ºæ­¤æ—¶è¯»å–çš„è®­ç»ƒé›†çš„æ–‡ä»¶è¿˜æ˜¯æµ‹è¯•é›†çš„æ–‡ä»¶ã€‚ä¹‹å‰åœ¨ç›®æ ‡æ£€æµ‹ç¯‡é‡Œæœ‰è®²è¿‡è¿™ä¸ªæ•°æ®é›†ã€‚ åœ¨ç¡®å®šäº†åç§°ä¹‹åï¼Œå…¶å¼€å§‹è¿›è¡Œè·¯å¾„çš„æ‹¼æ¥å·¥ä½œï¼Œå¾—åˆ°ä¸€ç³»åˆ—çš„è·¯å¾„ã€‚ è¿™é‡Œæ˜¯è¯»å–æ–‡ä»¶éƒ¨åˆ†çš„ä»£ç ï¼Œå¯ä»¥å‚è€ƒå€Ÿé‰´çš„æ˜¯åˆ†è¡Œæ¥è¯»å–æ–‡ä»¶çš„ä»£ç ã€‚ 12with open(os.path.join(txt_path), &quot;r&quot;) as f: file_names = [x.strip() for x in f.readlines() if len(x.strip()) &gt; 0] ä¸‹é¢æ˜¯è¯»å–å›¾ç‰‡imageå’Œæ ‡ç­¾maskçš„æ“ä½œï¼š åœ¨__getitem__()å‡½æ•°é‡Œå¸¦å®šä¹‰æ ¹æ®ç´¢å¼•æ¥è¯»å–å›¾ç‰‡ï¼Œå¹¶ä¸”æ¥è¿›è¡Œå›¾åƒçš„å¤„ç†ï¼Œtransformså¤„ç†éƒ¨åˆ†åœ¨æœ€å¼€å§‹è®²è§£ä½¿ç”¨çš„é‚£ä¸ªéƒ¨åˆ†ï¼Œåˆ†è®­ç»ƒå’Œæµ‹è¯•å®šä¹‰äº†ä¸åŒçš„å¤„ç†æ–¹å¼ã€‚ è¿™é‡Œçš„targetæ–‡ä»¶å…¶å®å°±æ˜¯å¯¹åº”çš„æ ‡ç­¾ï¼Œå…¶ä½¿ç”¨Imageæ‰“å¼€ä¹‹åå…¶å®æ˜¯ä¸€ä¸ªè°ƒè‰²æ¿æ¨¡å¼ï¼Œä½¿ç”¨ä¸ªå•é€šé“çš„æ•°æ®ï¼Œè€Œä¸”å…¶å¯¹åº”çš„æ•°å€¼å°±æ˜¯å¯¹åº”çš„ç±»åˆ«å€¼ã€‚ ä¸‹é¢æ¥çœ‹collate_fn()å‡½æ•°å®šä¹‰çš„æ˜¯æ•°æ®æ‰“åŒ…çš„æ–¹å¼ï¼Œé¦–å…ˆå°†æ•°æ®æŒ‰ç…§batchè¿›è¡Œæ‰“åŒ…æ“ä½œ å°†æˆ‘ä»¬è¿›è¡Œæ‰“åŒ…æ“ä½œï¼ŒåŒæ—¶cat_listæ˜¯å¯¹å›¾ç‰‡è¿›è¡Œå¡«å……æ“ä½œï¼Œå°¤å…¶æ˜¯å¯¹åº”æµ‹è¯•é›†ï¼Œæ²¡æœ‰è¿›è¡Œæ•´ä½“çš„resizeæ“ä½œï¼Œå› æ­¤éœ€è¦å¯¹ç©ºç™½çš„åœ°æ–¹è¿›è¡Œåˆ‡ç‰‡æ“ä½œã€‚ åœ¨æœ¬ä¾‹ä¸­batch=4ï¼Œäºæ˜¯å°±å¾—åˆ°ä¸€ä¸ªlistï¼Œå…¶ä¸­æœ‰4ä¸ªtupleï¼Œç¬¬iä¸ªtupleå…¶å®å°±æ˜¯å¯¹åº”çš„æ¯ä¸ªbatchåœ¨iå·ä½ç½®ä¸Šçš„æ•°å€¼ã€‚(i=0,1,2,3) ä¸‹é¢æ˜¯cat_listå‡½æ•°çš„å…·ä½“çš„å®ç°è¿‡ç¨‹ï¼š 12345678def cat_list(images, fill_value=0): # è®¡ç®—è¯¥batchæ•°æ®ä¸­ï¼Œchannel, h, wçš„æœ€å¤§å€¼ max_size = tuple(max(s) for s in zip(*[img.shape for img in images])) batch_shape = (len(images),) + max_size batched_imgs = images[0].new(*batch_shape).fill_(fill_value) for img, pad_img in zip(images, batched_imgs): pad_img[..., :img.shape[-2], :img.shape[-1]].copy_(img) return batched_imgs ç¬¬ä¸€æ­¥æ˜¯è¯»å–æœ€å¤§çš„é•¿å®½å‚æ•°ï¼Œç„¶åå°†batchå‚æ•°æ”¾åˆ°æœ€å‰é¢ã€‚ ç¬¬äºŒæ­¥å°±æ˜¯è¿›è¡Œå¡«å……æ“ä½œï¼Œè¿™é‡Œçš„imagesæ˜¯Tensorç±»å‹çš„å‚æ•°ï¼Œåˆ©ç”¨å…¶new()æ–¹æ³•ä¼ å…¥éå…³é”®å­—å‚æ•°*batch_shape=(4,3,480,480)æ¥åˆ›å»ºä¸€ä¸ªå¤§å°ä¸ºbatch_shapeé‡Œé¢å†…å®¹å¡«å……fill_value. ç¬¬ä¸‰æ­¥å°±æ˜¯å°†é‡Œé¢å¯¹åº”çš„å†…å®¹è¿›è¡Œå¡«å……ï¼Œå°†imgçš„å†…å®¹å¡«å……åˆ°pad_imgç›¸åº”çš„ä½ç½®ä¸Šã€‚ æ··æ·†çŸ©é˜µè®¡ç®—è¯„ä¼°æŒ‡æ ‡é¦–å…ˆï¼Œå¤ä¹ ä¹‹å‰æµ‹è¯•å‡½æ•°evaluate()ï¼š 12345678910111213141516171819def evaluate(model, data_loader, device, num_classes): model.eval() confmat = utils.ConfusionMatrix(num_classes) # åˆ›å»ºæ··æ·†çŸ©é˜µçš„å¯¹è±¡ metric_logger = utils.MetricLogger(delimiter=&quot; &quot;) header = 'Test:' with torch.no_grad(): for image, target in metric_logger.log_every(data_loader, 100, header): image, target = image.to(device), target.to(device) output = model(image) # è¾“å‡ºæ˜¯ä¸€ä¸ªæœ‰åºå¤§çš„å­—å…¸é›†åˆ output = output['out'] # è¿™é‡Œå–å‡ºä¸»åˆ†ç±»å™¨ä½†å¯¹äºçš„è¾“å‡º confmat.update(target.flatten(), output.argmax(1).flatten()) confmat.reduce_from_all_processes() return confmat å°†é¢„æµ‹å’ŒçœŸå®çš„ç»“æœå…ˆè¿›è¡Œå±•å¹³æ“ä½œï¼Œåœ¨ä¼ å…¥åˆ°æ··æ·†çŸ©é˜µï¼Œè°ƒç”¨update()å‡½æ•°æ¥è¿›è¡Œæ›´æ–°çŸ©é˜µã€‚ ä¸‹é¢æ˜¯ConfusionMatrixçš„å…·ä½“çš„å®ç°è¿‡ç¨‹ï¼Œé¦–å…ˆæ˜¯updateå‡½æ•°ï¼š 1234567891011def update(self, a, b): n = self.num_classes if self.mat is None: # åˆ›å»ºæ··æ·†çŸ©é˜µ self.mat = torch.zeros((n, n), dtype=torch.int64, device=a.device) with torch.no_grad(): # å¯»æ‰¾GTä¸­ä¸ºç›®æ ‡çš„åƒç´ ç´¢å¼• k = (a &gt;= 0) &amp; (a &lt; n) # ç»Ÿè®¡åƒç´ çœŸå®ç±»åˆ«a[k]è¢«é¢„æµ‹æˆç±»åˆ«b[k]çš„ä¸ªæ•°(è¿™é‡Œçš„åšæ³•å¾ˆå·§å¦™) inds = n * a[k].to(torch.int64) + b[k] self.mat += torch.bincount(inds, minlength=n**2).reshape(n, n) é¦–å…ˆï¼Œæ˜¯ç¡®å®šå¯¹åº”çš„å€¼ç±»åˆ«æ•°å’Œæ··æ·†çŸ©é˜µï¼Œå¦‚æœä¹‹å‰æ²¡æœ‰å°±æ ¹æ®è¾“å…¥çš„å‘é‡é‡æ–°åˆ›å»ºä¸€ä¸ªæ–°çš„ã€‚ ä¹‹åï¼Œå¯»æ‰¾å¯¹åº”çœŸå®ç›®æ ‡å‡ºçš„ç´¢å¼•å€¼ã€‚å…¶ä¸­ä»£ç ä¸­çš„kæ˜¯ä¸€ä¸ªå‘é‡ï¼Œè¿”å›çš„å…ƒç´ æ˜¯boolç±»å‹çš„ï¼Œå…¶ä¸»è¦æ˜¯ä»£è¡¨çš„æ˜¯åœ¨æˆ‘ä»¬ç±»åˆ«æ ‡ç­¾0 ~ n-1ä¹‹å†…çš„æœ‰æ•ˆï¼Œå¯¹åº”255çš„æ ‡ç­¾ä»£è¡¨çš„ä¸æ˜¯æ²¡æœ‰æ„ä¹‰å°±æ˜¯éš¾ä»¥é¢„æµ‹çš„ï¼Œè¿™æ ·å°±é€‰æ‹©æ€§çš„å»å¿½ç•¥æ‰è¿™ç§æƒ…å†µã€‚ a[k]å°±æ˜¯å–aä¸­å¯¹åº”ä½ç½®ä¸ºtrueçš„å†…å®¹ã€‚ ç„¶åï¼Œè¿™é‡Œæˆ‘ä»¬è®¡ç®—å‡ºæ¥çš„æ··æ·†çŸ©é˜µå…¶å®æ˜¯ä¸€ä¸ªå‘é‡ï¼Œä¹‹åå†å°†å…¶å±•å¹³æˆä¸ºä¸€ä¸ªçŸ©é˜µçš„ï¼Œé‚£ç°åœ¨æœ‰ç¡®å®šä¸€äº›æ¯ä¸ªå…ƒç´ åœ¨æ··æ·†å‘é‡ä¸Šé¢çš„ç´¢å¼•å€¼inds = n * a[k].to(torch.int64) + b[k] ã€‚ ä¾‹å¦‚ï¼Œæœ€åçš„3ä»£å…¥å…¬å¼å°±å¾—å‡ºå…¶å¯¹åº”çš„ç´¢å¼•å€¼ä¸º $3\\times4+2=15$ï¼Œå³å¡«å†™åˆ°æœ€åé‚£é‚£ä¸ªå…ƒç´ å¯¹åº”çš„ä¸­ã€‚ç¬¬ä¸€ä¸ªå…ƒç´ å¯¹åº”çš„ä¸º$0 \\times 4 +1=1$ å¯¹åº”çš„æ˜¯ç¬¬äºŒä¸ªä½ç½®ï¼Œå«ä¹‰æ˜¯çœŸå®æ ‡ç­¾ä¸ºç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œä½†æ˜¯å®é™…é¢„æµ‹æˆç«‹ç¬¬äºŒä¸ªå…ƒç´ ã€‚ æœ€åï¼Œç»Ÿè®¡å‘ˆç°çš„é¢‘æ¬¡ï¼Œæ”¾åˆ°æ··æ·†å‘é‡å¯¹åº”çš„ç´¢å¼•indsä¸Šã€‚æœ€åè¿˜åŸæˆçŸ©é˜µçš„å½¢å¼ï¼Œå°†å…¶åŠ è½½ä¹‹å‰çš„æ··æ·†çŸ©é˜µä¸Šã€‚ 1self.mat += torch.bincount(inds, minlength=n**2).reshape(n, n) åœ¨éå†å®Œä¸€ä¸ªepochä¹‹åï¼Œå°±å¼€å§‹å–æ‰“å°å¯¹åº”è¯„ä»·æŒ‡æ ‡ï¼Œè¿™é‡Œæˆ‘ä»¬é‡è½½äº†å¯¹åº”çš„æ‰“å°çš„æ–¹æ³•ã€‚ 1234567891011def __str__(self): acc_global, acc, iu = self.compute() return ( 'global correct: {:.1f}\\n' 'average row correct: {}\\n' 'IoU: {}\\n' 'mean IoU: {:.1f}').format( acc_global.item() * 100, ['{:.1f}'.format(i) for i in (acc * 100).tolist()], ['{:.1f}'.format(i) for i in (iu * 100).tolist()], iu.mean().item() * 100) è¿™é‡Œè°ƒç”¨äº†compute()æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¸»è¦å°±æ˜¯è®¡ç®—å¯¹åº”çš„è¯„ä»·æŒ‡æ ‡çš„ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š 123456789def compute(self): h = self.mat.float() # è®¡ç®—å…¨å±€é¢„æµ‹å‡†ç¡®ç‡(æ··æ·†çŸ©é˜µçš„å¯¹è§’çº¿ä¸ºé¢„æµ‹æ­£ç¡®çš„ä¸ªæ•°) acc_global = torch.diag(h).sum() / h.sum() # è®¡ç®—æ¯ä¸ªç±»åˆ«çš„å‡†ç¡®ç‡ acc = torch.diag(h) / h.sum(1) # è®¡ç®—æ¯ä¸ªç±»åˆ«é¢„æµ‹ä¸çœŸå®ç›®æ ‡çš„iou iu = torch.diag(h) / (h.sum(1) + h.sum(0) - torch.diag(h)) return acc_global, acc, iu è¿™è¾¹ç”¨åˆ°çš„ç›¸å…³çš„è¯„ä»·æŒ‡æ ‡ï¼Œæˆ‘ä»¬å¯ä»¥å‚è€ƒå‰ä¸€ç¯‡åšå®¢ã€‚ sum(1)è®¡ç®—åˆ—å’Œï¼Œsum(0)è®¡ç®—è¡Œå’Œï¼Œsum()è®¡ç®—å…¨å±€ä¹‹å’Œã€‚","link":"/2022/07/05/%E8%AF%AD%E4%B9%89%E5%88%86%E5%89%B2%E5%8F%8APytorch%E5%AE%9E%E7%8E%B0/FCN%E7%BD%91%E7%BB%9C%E8%AF%A6%E7%BB%86%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0/"},{"title":"FCNè¯­ä¹‰åˆ†å‰²ç½‘ç»œç†è®ºåŠç®€è¦ä»£ç ","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡é¦–å…ˆä»‹ç»çš„æ˜¯FCNçš„ç†è®ºéƒ¨åˆ†ï¼Œå…¶ä¸­FCå±‚CNNåŒ–æ˜¯ä¸€ä¸ªäº®ç‚¹ï¼Œä¸‹é¢ä»‹ç»äº†3ç§ä¸å¦‚çš„ç»“æ„FCN-32sã€FCN-16s ã€FCN-8sã€‚ç”±äºè¿™ç¯‡æ–‡ç« æ˜¯15å¹´çš„è®ºæ–‡ï¼Œå½“æ˜¯ä¸»è¦çš„åˆ†ç±»ç½‘ç»œæ˜¯VGGï¼Œå¦‚ä»Šåˆ†åˆ«ç½‘ç»œçš„ç™¾èŠ±é½æ”¾ï¼Œå› æ­¤æˆ‘ä»¬ä»…ä»…åŸºäºåŸæ–‡çš„æ¡†æ¶ï¼Œä½†backnoneä½¿ç”¨çš„æ˜¯resnet-50ã€‚ä»£ç éƒ¨åˆ†ç®€å•çš„ä»‹ç»äº†ä»£ç çš„è®­ç»ƒéƒ¨åˆ†å’Œä»£ç å¦‚ä½•ä½¿ç”¨ï¼Œå…·ä½“çš„æ¨¡å‹æ­å»ºã€æ•°æ®é›†å¤„ç†å’Œæ··æ·†çŸ©é˜µè®¡ç®—çš„å†…å®¹è¯·çœ‹ä¸‹ç¯‡ã€‚ å¦‚æœæœ‰ä¸æ˜ç™½çš„ï¼Œå‚è€ƒå¤§ä½¬çš„æºç ã€‚ åŸºæœ¬ç†è®ºæ¦‚è¿°FCNçš„å…¨ç§°ä¸ºFully Convolution Network. æ˜¯é¦–ä¸ªç«¯å¯¹ç«¯çš„é’ˆå¯¹åƒç´ çº§é¢„æµ‹çš„å…¨å·ç§¯ç¥ç»ç½‘ç»œã€‚ è¿™é‡Œå¯¹æ¯”PASCAL VOCä¸Šè¡¨ç°ï¼Œæ— è®ºè®¡ç®—æ—¶é—´å’Œå’Œå‡†ç¡®ç‡ï¼Œéƒ½æ˜¯æ¯”ä¹‹å‰å¥½ä¸å°‘çš„ã€‚ å…¶åŸºæœ¬çš„åŸæ¥æ˜¯æé«˜å·ç§¯æ“ä½œå°†ä¸æ–­åœ°è¿›è¡Œä¸‹é‡‡æ ·ï¼Œå¾—åˆ°ä¸€ä¸ª21ä¸ªchannelåœ°å‘é‡(ç®—ä¸ŠèƒŒæ™¯ä¸€å…±æœ‰21ç±»)ï¼Œç„¶åå°†å…¶è¿›è¡Œä¸Šé‡‡æ ·ä½¿å¾—å…¶å¤§å°å’ŒåŸæ¥åœ°å›¾ç‰‡ç›¸ä¼¼ã€‚é’ˆå¯¹æ¯ä¸ªpixelè¿›è¡Œsoftmaxï¼Œå–æœ€å¤§çš„ç±»åˆ«ä½œä¸ºæˆ‘ä»¬çš„è¿™ä¸ªpixelçš„é¢„æµ‹å€¼ã€‚ åœ¨å½“æ—¶ï¼Œåˆ†ç±»ç½‘ç»œä¸€èˆ¬ä¼šåœ¨æœ€åç›´æ¥å±•å¹³ï¼Œç„¶åæ¥ä¸Šä¸€ä¸ªå…¨è¿æ¥å±‚ï¼Œå› æ­¤è¿™æ ·å°±æ˜¯å¯¹è¾“å…¥çš„å›¾ç‰‡çš„å¤§å°æœ‰ä¸€å®šçš„é™åˆ¶ï¼Œå¦‚å›¾å¿…é¡»æ˜¯96x96çš„å›¾ç‰‡æ‰è¡Œã€‚ FCå±‚CNNåŒ–æ¢æˆä¸€èˆ¬çš„å…¨å·ç§¯ä¹‹åï¼Œå…¶æœ€åçš„è¾“å‡ºä¸ä¸€å®šæ˜¯ä¸€ä¸ªå‘é‡ï¼Œåªä¸€ä¸ª2Dçš„çŸ©é˜µã€‚å°†å…¶è½¬æ¢æˆçƒ­åŠ›å›¾heat mapçš„å½¢å¼å°±ä¸ºä¸Šä¸Šé¢æ‰€ç¤ºï¼Œå…¶å¯¹çŒ«çš„tabby catçš„éƒ¨åˆ†ç”±å¾ˆå¼ºçš„æ³¨æ„åŠ›ã€‚ å¯¹äºVGG16è€Œè¨€ï¼Œæˆ‘ä»¬ä½¿ç”¨è¾ƒå¤šæ˜¯Dæ¶æ„ã€‚è¿™é‡Œä½¿ç”¨äº†5ä¸ªmax poolingå±‚ä¸€å…±ä¸‹é‡‡æ ·äº†32å€ï¼Œä¹‹åæˆ‘ä»¬å°†ä¼šé‡ç‚¹å…³æ³¨çš„æ˜¯Maxpool3å’ŒMaxpool4è¿™ä¸¤å±‚ã€‚ ä¸‹é¢ä»‹ç»å°†å…¨è¿æ¥å±‚å·ç§¯åŒ–çš„è¿‡ç¨‹ã€‚ è¿™ä¸¤ä¸ªçš„å‚æ•°é‡æ˜¯ä¸€æ ·çš„(å¿½ç•¥åç½®)ï¼Œä½†æ˜¯å¯¹äºå·ç§¯è€Œè¨€ï¼Œå…¶å¯ä»¥é€šè¿‡paddingæ¥æ§åˆ¶è¾“å‡ºå‘é‡çš„å¤§å°ã€‚å¦‚padding=3ï¼Œåˆ™å¾—åˆ°çš„Hå’ŒWæ˜¯ä¸å˜çš„ã€‚ ä¸åŒç»“æ„çš„FCN-Xs è¿™é‡Œä¸»è¦å‘ˆç°æ˜¯ä¸åŒçš„FCNä¸‹çš„æ•ˆæœå›¾ï¼Œå¯¹æ¯”å¯ä»¥é‡‡ç”¨å¸¸é‡‡ç”¨çš„å€ç‡è¶Šå°ï¼Œå…¶æ•ˆæœå°±è¶Šå¥½ï¼Œæµ‹è¯•å‘ç°é€šè¿‡8å€çš„ä¸Šé‡‡æ ·è¿˜åŸåˆ°åŸå›¾çš„FCN-8sç½‘ç»œçš„æ•ˆæœæ˜¯æœ€å¥½çš„ã€‚ ä½†æ˜¯è¿™ä¸ªå›¾ç‰‡å¯¹äºé—®é¢˜çš„å…¶ä¸‰ç§ç»“æ„çš„æè¿°ä¸æ˜¯å¾ˆå¥½ï¼Œä¸‹é¢æ¥ç²¾ç»†çš„æ¥çœ‹å…·ä½“ä¸‰ç§ç»“æœçš„è¡¨ç°å½¢å¼ã€‚ è¿™é‡ŒåŸè®ºæ–‡åœ¨Backboneçš„ç¬¬ä¸€ä¸ªå·ç§¯å±‚çš„ä½ç½®ï¼Œå°†paddingè®¾ç½®æˆä¸º100ï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯å½“å›¾ç‰‡çš„å¤§å°å°äº192æ—¶ï¼Œå¦‚æœç›´æ¥è¾“å…¥ä¼šé€ æˆå…¶åœ¨FC6å¤„çš„å¤§å°å·²ç»å°äº7äº†ï¼Œæ— æ³•ä½¿ç”¨7x7çš„å·ç§¯äº†ã€‚ ä½†æ˜¯è¿™ç§åšæ³•ç›¸å½“çš„ä¸è‡ªç„¶ï¼Œå…¶å®åœ¨FC6å¤„å¯ä»¥å°†7x7æ¢æˆ3x3ä¹Ÿå¥½ã€‚è€Œä¸”padding=100ä¼šæ— ç«¯çš„å¢åŠ è®¡ç®—é‡ï¼Œè€Œä¸”æ¢å¤åˆ°åŸæ¥çš„å›¾ç‰‡ä¹‹åè¿˜è¦è¿›è¡Œä¸€ä¸‹è£å‰ªcropæ“ä½œã€‚ å¹¶ä¸”å½“å›¾ç‰‡å°äº32x32æ—¶ï¼Œæ²¡å‡ºBackboneæ—¶ä¼°è®¡å°±å‡ºé”™äº†ï¼Œä½†æ˜¯å°äº32çš„å›¾ç‰‡å°±ç®—åšäº†è¯­ä¹‰åˆ†å‰²ï¼Œå…¶æ•ˆæœä¼°è®¡ä¹Ÿå¾ˆå·®åŠ²ã€‚æ¯æ¬¡è¿™ä¸ªæƒ…å†µæ²¡å¿…è¦è€ƒè™‘ã€‚å› æ­¤è¿™é‡Œæˆ‘ä»¬å°†FC6çš„7x7æ¢æˆ3x3ï¼Œå¹¶ä¸”å›¾ç‰‡çš„å¤§å°å¤§äº32å°±ä¸ä¼šæœ‰é—®é¢˜äº†ã€‚ å›¾ç‰‡è¾“å…¥è¿›æ¥ï¼Œç»è¿‡VGG16çš„Backboneä¹‹åï¼ŒHã€Wç¼©å°äº†32å€ã€channels=512ï¼› ä¹‹åå°†è¿›å…¥FC6å±‚è¿™é‡Œ7x7çš„å·ç§¯å¯¹äºçš„padding=3ï¼Œå…¶å¯¹åº”çš„(H,W)ä¸å˜ï¼Œchannels=4096ã€‚ ç„¶åFC7å±‚è¾“å‡ºåçš„ç»“æœå’Œä¸Šä¸€å±‚æ—¶ç›¸åŒçš„ï¼Œä¸‹é¢è¿›å…¥ä¸€ä¸ª1x1çš„Convå±‚å…¶è¾“å‡ºä¸ºnum_cls=20+1ã€‚ æœ€åè¿›è¡Œä¸Šé‡‡æ ·æ“ä½œï¼Œä½¿ç”¨çš„æ˜¯åŸºäºåŒçº¿æ€§æ’å€¼çš„è½¬ç½®å·ç§¯ã€‚ åœ¨åŸç†çš„è®ºæ–‡é‡Œï¼Œå…¶æ˜¯å°†è¿™ä¸ªä¸Šé‡‡æ ·ç»™å†»ç»“ç€äº†ï¼ŒåŸå› è¿™ä¸ªè®­ç»ƒå’Œä¸è®­ç»ƒçš„æ•ˆæœæ˜¯å·®ä¸å¤šçš„ã€‚ upçš„ç†è§£æ˜¯ï¼Œå…¶ä¸Šé‡‡æ ·ç‡è¿‡å¤§ï¼Œé€ æˆå…¶æ•ˆæœéå¸¸å·®åŠ²ã€‚åœ¨U-Neté‡Œé¢ï¼Œæ¯æ¬¡ä¸Šé‡‡æ ·çš„å€ç‡éƒ½æ˜¯2å€ã€‚ è¿™é‡Œå¯¹åº”FCN-16sçš„ç»“æ„ï¼Œå‰é¢å’ŒFCN-32sæ˜¯ä¸€æ ·çš„çŸ¥é“å…ˆè¿›è¡Œäº†ä¸€ä¸ª2å€ç‡çš„ä¸Šé‡‡æ ·ï¼› ä¹‹åæ˜¯å°†Maxpool4å¯¹åº”çš„feature mapæå–å‡ºæ¥ï¼Œè¿›è¡Œ1x1å·ç§¯æ¥å˜æ¢é€šé“æ•°ï¼Œç„¶åå’Œä¸»çº¿ç›¸åŠ ã€‚ æœ€åè¿›è¡Œ16å€ç‡çš„ä¸Šé‡‡æ ·ã€‚ å‰é¢çš„éƒ¨åˆ†å’ŒFCN-16sç›¸ä¼¼ï¼Œå°†è¾“å‡ºè¿›è¡Œä¸¤å€ç‡çš„ä¸Šé‡‡æ ·ä½¿å¾—å’Œmaxpool3 å¯¹åº”çš„feature mapçš„Hã€Wç›¸åŒçš„ã€‚ æå–maxpool3 å¯¹åº”çš„feature mapï¼Œä½¿ç”¨1x1çš„å·ç§¯å˜æ›´é€šé“æ•°åï¼Œå’Œä¸»çº¿ç›¸åŠ ã€‚ æœ€åè¿›è¡Œ8å€ç‡çš„ä¸Šé‡‡æ ·å³å¯ã€‚ æŸå¤±è®¡ç®— è¿™é‡Œå…¶å®å°±æ˜¯æ¯ä¸ªpixelå•ç‹¬è®¡ç®—çš„äº¤å‰ç†µæŸå¤±ã€‚ æ€»ç»“ï¼šä¸Šè¿°å³ä¸ºFCNçš„ç½‘ç»œçš„ä¸»è¦çš„åŸç†ï¼Œå› ä¸ºå‘æ–‡æ—¶é—´æ¯”è¾ƒçš„æ—©ï¼Œä½†æ˜¯æœ€å¥½çš„åˆ†ç±»çš„ç½‘ç»œä¼°è®¡å°±æ˜¯VGGäº†ï¼Œè€Œå½“ä¸‹åˆ†ç±»çš„ç½‘ç»œä¸æ–­çš„æ›´æ–°ï¼Œå‡ºç°äº†å¦‚ResNetã€VITç­‰ç»“æ„ä¹Ÿå†ä¸æ–­æ”¹è¿›ç€FCNçš„backboneã€‚ åœ¨ä»£ç çš„å®ç°ç¯èŠ‚ï¼Œpytorchæºç ä½¿ç”¨çš„æ˜¯resnet-50æ¥ä½œä¸ºçš„BackBoneï¼Œå¹¶ä¸”ä½¿ç”¨äº†è†¨èƒ€å·ç§¯çš„æŠ€æœ¯ï¼Œè¿™ç‚¹å’ŒåŸæ¥çš„è®ºæ–‡é‡Œé¢çš„ç½‘ç»œæœ‰æ‰€ä¸åŒã€‚ ä»£ç å®ç°æ¦‚è¿°é¦–å…ˆæ¥çœ‹pytorchç»™å‡ºçš„æºç çš„å®ç°ï¼Œå…¶ä¸­pytorchå®˜æ–¹çš„ä½¿ç”¨çš„backboneæ˜¯åŸºäºresnet50çš„ï¼Œå¹¶ä¸”å·²ç»ä½¿ç”¨äº†è†¨èƒ€å·ç§¯ï¼Œè¿™é‡Œå’ŒåŸè®ºæ–‡çš„VGG16ä¸åŒã€‚ layer1å’Œlayer2åˆ†åˆ«å¯¹åº”çš„æ˜¯conv_2å’Œconv_3ã€‚ layer3å’Œlayer4ä½¿ç”¨çš„æ˜¯Bottleneck1å’ŒBottleneck2åœ¨ä¸€èµ·å †å çš„æ–¹å¼æ¥è¡¨ç°çš„ã€‚ è¿™é‡Œçš„Bottleneck1çš„åšæ³•æ˜¯å°†åŸæ¥çš„3x3å’Œæ®‹å·®éƒ¨åˆ†çš„1x1éƒ¨åˆ†çš„ç»“æ„è¿›è¡Œstrideç”±2æ”¹æˆäº†1ï¼Œä¸è¿›è¡Œä¸‹é‡‡æ ·stride=2æ“ä½œï¼Œå–è€Œä»£ä¹‹çš„æ˜¯å°†3x3å·ç§¯æ”¹æˆè†¨èƒ€å·ç§¯ã€‚ åŒæ ·çš„Bottleneck2ä¹Ÿæ˜¯ä½¿ç”¨è†¨èƒ€ç³»æ•°ä¸º2çš„è†¨èƒ€å·ç§¯ã€‚ ä¸‹é¢è¿›å…¥FCå±‚ï¼Œè¿™é‡Œä¹Ÿå¯¹åŸæ¥çš„ç½‘ç»œè¿›è¡Œäº†å¾ˆå¤§çš„ä¿®æ”¹ã€‚ é¦–å…ˆé€šè¿‡ä¸€ä¸ª3x3çš„å·ç§¯æ¥å°†channelç”±2048-&gt;512ï¼Œå¹¶ä¸”ä¸æ”¹å˜Hã€W=60 ä¹‹å1x1å·ç§¯æ¥ä¿®æ”¹channelç”±512-&gt;num_classesã€‚ æœ€åä½¿ç”¨åŒçº¿æ€§æ’å€¼æ¥æ¢å¤åˆ°åŸæ¥çš„å¤§å°ã€‚ è¿™é‡Œæ—è¾¹çš„æ˜¯ä¸€ä¸ªè¾…åŠ©çš„åˆ†ç±»å™¨ï¼Œå…¶è¾“å…¥ä¸»è¦æ¥è‡ªäºlayerçš„è¾“å‡º60x60x1024ï¼Œé˜²æ­¢è¯¯å·®æ¢¯åº¦æ— æ³•ä¼ é€’åˆ°æµ…å±‚ã€‚ä½†æ˜¯ä¸€èˆ¬å¯ä»¥ç›´æ¥åˆ é™¤æ¥æé«˜ç½‘ç»œçš„æ€§èƒ½ã€‚ ä»£ç çš„ä½¿ç”¨æœ¬æºç ä¸»è¦æ¥è‡ªäºpytorchå®˜æ–¹çš„torchvisionæ–‡ä»¶ä¸‹ï¼Œé¡¹ç›®çš„åœ°å€æ˜¯ï¼šhttps://github.com/pytorch/vision/tree/main/torchvision/models/segmentation æ–‡ä»¶çš„ä¸»è¦çš„ç»“æ„ï¼š 12345678â”œâ”€â”€ src: æ¨¡å‹çš„backboneä»¥åŠFCNçš„æ­å»ºâ”œâ”€â”€ train_utils: è®­ç»ƒã€éªŒè¯ä»¥åŠå¤šGPUè®­ç»ƒç›¸å…³æ¨¡å—â”œâ”€â”€ my_dataset.py: è‡ªå®šä¹‰datasetç”¨äºè¯»å–VOCæ•°æ®é›†â”œâ”€â”€ train.py: ä»¥fcn_resnet50(è¿™é‡Œä½¿ç”¨äº†Dilated/Atrous Convolution)è¿›è¡Œè®­ç»ƒâ”œâ”€â”€ train_multi_GPU.py: é’ˆå¯¹ä½¿ç”¨å¤šGPUçš„ç”¨æˆ·ä½¿ç”¨â”œâ”€â”€ predict.py: ç®€æ˜“çš„é¢„æµ‹è„šæœ¬ï¼Œä½¿ç”¨è®­ç»ƒå¥½çš„æƒé‡è¿›è¡Œé¢„æµ‹æµ‹è¯•â”œâ”€â”€ validation.py: åˆ©ç”¨è®­ç»ƒå¥½çš„æƒé‡éªŒè¯/æµ‹è¯•æ•°æ®çš„mIoUç­‰æŒ‡æ ‡ï¼Œå¹¶ç”Ÿæˆrecord_mAP.txtæ–‡ä»¶â””â”€â”€ pascal_voc_classes.json: pascal_vocæ ‡ç­¾æ–‡ä»¶ é¢„è®­ç»ƒæƒé‡çš„ä¸‹è½½ï¼š æ³¨æ„ï¼šå®˜æ–¹æä¾›çš„é¢„è®­ç»ƒæƒé‡æ˜¯åœ¨COCOä¸Šé¢„è®­ç»ƒå¾—åˆ°çš„ï¼Œè®­ç»ƒæ—¶åªé’ˆå¯¹å’ŒPASCAL VOCç›¸åŒçš„ç±»åˆ«è¿›è¡Œäº†è®­ç»ƒï¼Œæ‰€ä»¥ç±»åˆ«æ•°æ˜¯21(åŒ…æ‹¬èƒŒæ™¯) è¿™é‡Œå¯èƒ½æ˜¯å°†COCOå’ŒPASCAL VOCç›¸åŒçš„ç±»åˆ«è¿›è¡Œè®­ç»ƒçš„ã€‚ fcn_resnet50: https://download.pytorch.org/models/fcn_resnet50_coco-1167a1af.pth fcn_resnet101: https://download.pytorch.org/models/fcn_resnet101_coco-7ecb50ca.pth æ³¨æ„ï¼Œä¸‹è½½çš„é¢„è®­ç»ƒæƒé‡è®°å¾—è¦é‡å‘½åï¼Œæ¯”å¦‚åœ¨train.pyä¸­è¯»å–çš„æ˜¯fcn_resnet50_coco.pthæ–‡ä»¶ï¼Œ ä¸æ˜¯fcn_resnet50_coco-1167a1af.pth è®­ç»ƒæ–¹æ³•ï¼š ç¡®ä¿æå‰å‡†å¤‡å¥½æ•°æ®é›† ç¡®ä¿æå‰ä¸‹è½½å¥½å¯¹åº”é¢„è®­ç»ƒæ¨¡å‹æƒé‡ è‹¥è¦ä½¿ç”¨å•GPUæˆ–è€…CPUè®­ç»ƒï¼Œç›´æ¥ä½¿ç”¨train.pyè®­ç»ƒè„šæœ¬ è‹¥è¦ä½¿ç”¨å¤šGPUè®­ç»ƒï¼Œä½¿ç”¨torchrun --nproc_per_node=8 train_multi_GPU.pyæŒ‡ä»¤,nproc_per_nodeå‚æ•°ä¸ºä½¿ç”¨GPUæ•°é‡ å¦‚æœæƒ³æŒ‡å®šä½¿ç”¨å“ªäº›GPUè®¾å¤‡å¯åœ¨æŒ‡ä»¤å‰åŠ ä¸ŠCUDA_VISIBLE_DEVICES=0,3(ä¾‹å¦‚æˆ‘åªè¦ä½¿ç”¨è®¾å¤‡ä¸­çš„ç¬¬1å—å’Œç¬¬4å—GPUè®¾å¤‡) CUDA_VISIBLE_DEVICES=0,3 torchrun --nproc_per_node=2 train_multi_GPU.py å…·ä½“æ­¥éª¤Step1ï¼šè®¾ç½®è®­ç»ƒæ—¶éœ€è¦çš„å‚æ•°1234567891011121314151617181920212223242526272829303132333435def parse_args(): import argparse parser = argparse.ArgumentParser(description=&quot;pytorch fcn training&quot;) parser.add_argument(&quot;--data-path&quot;, default=&quot;/data/&quot;, help=&quot;VOCdevkit root&quot;) # è®¾ç½®è·¯å¾„ parser.add_argument(&quot;--num-classes&quot;, default=20, type=int) # å»æ‰èƒŒæ™¯åçš„ç±»åˆ«æ•° parser.add_argument(&quot;--aux&quot;, default=True, type=bool, help=&quot;auxilier loss&quot;) # æ˜¯å¦ä½¿ç”¨è¾…åŠ©åˆ†ç±»å™¨ parser.add_argument(&quot;--device&quot;, default=&quot;cuda&quot;, help=&quot;training device&quot;) # è®¾ç½®è®­ç»ƒæ‰€ç”¨çš„è®¾å¤‡ parser.add_argument(&quot;-b&quot;, &quot;--batch-size&quot;, default=4, type=int) # è®¾ç½®ä¸€ä¸ªbatchçš„å¤§å°ï¼Œæ ¹æ®GPUç°å­˜æ¥è€ƒè™‘ parser.add_argument(&quot;--epochs&quot;, default=30, type=int, metavar=&quot;N&quot;, help=&quot;number of total epochs to train&quot;) # è®¾ç½®å¾ªç¯çš„æ¬¡æ•° parser.add_argument('--lr', default=0.0001, type=float, help='initial learning rate') parser.add_argument('--momentum', default=0.9, type=float, metavar='M', help='momentum') parser.add_argument('--wd', '--weight-decay', default=1e-4, type=float, metavar='W', help='weight decay (default: 1e-4)', dest='weight_decay') parser.add_argument('--print-freq', default=10, type=int, help='print frequency') parser.add_argument('--resume', default='', help='resume from checkpoint') parser.add_argument('--start-epoch', default=0, type=int, metavar='N', help='start epoch') # Mixed precision training parameters parser.add_argument(&quot;--amp&quot;, default=False, type=bool, help=&quot;Use torch.cuda.amp for mixed precision training&quot;) args = parser.parse_args() return args Step2ï¼šæ•°æ®é¢„å¤„ç†ä¸ºæ•°æ®é¢„å¤„ç†çš„ä¸¤ä¸ªç±»ï¼Œç¬¬ä¸€ä¸ªæ˜¯å¤„ç†è®­ç»ƒæ•°æ®çš„ç±»ï¼Œç¬¬äºŒä¸ªæ˜¯å¤„ç†éªŒè¯æ•°æ®çš„ç±»ã€‚ 1234567891011121314151617class SegmentationPresetTrain: def __init__(self, base_size, crop_size, hflip_prob=0.5, mean=(0.485, 0.456, 0.406), std=(0.229, 0.224, 0.225)): min_size = int(0.5 * base_size) max_size = int(2.0 * base_size) trans = [T.RandomResize(min_size, max_size)] if hflip_prob &gt; 0: trans.append(T.RandomHorizontalFlip(hflip_prob)) trans.extend([ T.RandomCrop(crop_size), T.ToTensor(), T.Normalize(mean=mean, std=std), ]) self.transforms = T.Compose(trans) def __call__(self, img, target): return self.transforms(img, target) å…¶ä¸­çš„base_sizeä¸ºåŸºç¡€çš„è¾¹é•¿ï¼Œmin_sizeä¸ºæœ€å°è¾¹é•¿ï¼Œmax_sizeä¸ºæœ€å¤§è¾¹é•¿ã€‚è¿™é‡Œæ˜¯å°†imageå’Œtargetä¸€èµ·è¿›è¡Œç¼©æ”¾ã€‚ ä¸‹é¢è¿›è¡Œçš„æ˜¯éšæœºè£å‰ªæ“ä½œï¼š è¿™é‡Œåœ¨è£å‰ªä¹‹å‰å°±é¦–å…ˆæ¥åˆ¤æ–­ä¸€äº›è¿™ä¸ªå›¾ç‰‡çš„ç›®æ ‡å°ºå¯¸å’Œå½“ä¸‹çš„å°ºå¯¸é‚£ä¸ªå¤§ï¼Œå¦‚æœç›®æ ‡å°ºå¯¸å¤§äºå½“ä¸‹å°ºå¯¸ä¸­é•¿å®½ä¸­çš„ä¸€ä¸ªï¼Œå°±ç»™é‚£ä¸ªå°çš„å¡«å……0ï¼Œå¯¹åº”çš„ç»™targeté‡Œé¢ä¼šå¡«å……255ï¼Œ255åœ¨è¯­ä¹‰åˆ†å‰²é‡Œå°±æ˜¯æ²¡æœ‰æ„ä¹‰çš„æ„æ€ã€‚ å¯¹äºéš¾ä»¥åˆ†ç±»çš„éƒ¨åˆ†ä¹Ÿæ˜¯ä½¿ç”¨çš„255æ¥æ ‡è®°ï¼Œè¿™æ ·åœ¨è®­ç»ƒçš„æ—¶å€™å°±ä¼šç›´æ¥å¿½ç•¥ã€‚ ä¸‹é¢æ˜¯ToTensoræ“ä½œï¼Œå…¶å®å°±æ˜¯æŠŠ[0,255]-&gt;[0,1]. å¯¹äºéªŒè¯çš„è¿‡ç¨‹ï¼Œå…¶å®ä¹Ÿæ˜¯å·®ä¸å¤šçš„ï¼Œå°±æ˜¯ä¸éœ€è¦è¿›è¡Œéšæœºçš„å‰ªè£æ“ä½œäº†ã€‚ 1234567891011121314151617class SegmentationPresetEval: def __init__(self, base_size, mean=(0.485, 0.456, 0.406), std=(0.229, 0.224, 0.225)): self.transforms = T.Compose([ T.RandomResize(base_size, base_size), T.ToTensor(), T.Normalize(mean=mean, std=std), ]) def __call__(self, img, target): return self.transforms(img, target) # train=trueå°±è¿›è¡Œè®­ç»ƒé›†çš„æ•°æ®å¢å¼ºï¼Œåä¹‹å°±æ˜¯è¿›è¡Œæµ‹è¯•é›†çš„æ•°æ®å¢å¼º def get_transform(train): base_size = 520 crop_size = 480 return SegmentationPresetTrain(base_size, crop_size) if train else SegmentationPresetEval(base_size) Step3ï¼šåˆ›å»ºæ¨¡å‹è¿™é‡Œæœ‰ä¸‰ä¸ªé‡è¦çš„å‚æ•°ï¼š auxï¼šboolç±»å‹çš„å‚æ•°ï¼Œæ˜¯å¦ä½¿ç”¨è¾…åŠ©åˆ†ç±»å™¨ï¼› num_classesï¼šintç±»å‹ï¼Œä¸€å…±æœ‰å¤šå¥½ä¸ªç±»ï¼Œä¸ç®—èƒŒæ™¯ï¼› pretrain=Trueï¼šboolç±»å‹ï¼Œæ˜¯å¦ä½¿ç”¨é¢„è®­ç»ƒæ¨¡å‹ï¼Œé»˜è®¤æ˜¯éœ€è¦ä½¿ç”¨ã€‚ 1234567891011121314151617181920212223def create_model(aux, num_classes, pretrain=True): # åˆ›å»ºæ¨¡å‹ï¼Œå…¶å®å°±æ˜¯å°†æ¨¡å‹ç±»è¿›è¡Œå®ä¾‹åŒ– model = fcn_resnet50(aux=aux, num_classes=num_classes) if pretrain: # å°†æ–‡ä»¶è½½å…¥åˆ°æ¨¡å‹ä¹‹ä¸­ weights_dict = torch.load(&quot;./fcn_resnet50_coco.pth&quot;, map_location='cpu') # å½“ç±»åˆ«æ•°ä¸º21æ—¶ï¼Œå°±ä¸éœ€è¦çš„è¿›è¡Œä¿®æ”¹ç±»åˆ«æ•°çš„æ“ä½œäº† if num_classes != 21: # å®˜æ–¹æä¾›çš„é¢„è®­ç»ƒæƒé‡æ˜¯21ç±»(åŒ…æ‹¬èƒŒæ™¯) # å¦‚æœè®­ç»ƒè‡ªå·±çš„æ•°æ®é›†ï¼Œå°†å’Œç±»åˆ«ç›¸å…³çš„æƒé‡åˆ é™¤ï¼Œé˜²æ­¢æƒé‡shapeä¸ä¸€è‡´æŠ¥é”™ for k in list(weights_dict.keys()): if &quot;classifier.4&quot; in k: # è¿™é‡Œçš„&quot;classifier.4&quot;å°±æ˜¯ä¸ªåˆ†ç±»ä¸ªæ•°ç›¸å…³çš„æƒé‡ del weights_dict[k] missing_keys, unexpected_keys = model.load_state_dict(weights_dict, strict=False) if len(missing_keys) != 0 or len(unexpected_keys) != 0: print(&quot;missing_keys: &quot;, missing_keys) print(&quot;unexpected_keys: &quot;, unexpected_keys) return model å…¶ä¸­model.load_state_dictçš„è¿”å›å€¼æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ—¶ç¡®å®çš„æƒé‡missing_keysï¼Œå¦ä¸€ä¸ªæ˜¯å¤šä½™çš„æƒé‡unexpected_keysã€‚ Step4ï¼šå…³äºè®­ç»ƒå‡½æ•°çš„ä¸»ç¨‹åºæ³¨æ„ï¼š VOCSegmentationæ˜¯å®šä¹‰åœ¨æ•°æ®å¤„ç†æ–‡ä»¶çš„ç±»ï¼Œè¿™é‡Œä»…ä»…æ˜¯è°ƒç”¨ï¼Œå…·ä½“åé¢ä¼šè¯´ã€‚ å…¶ä¸­çš„backboneå°±æ˜¯resnet50ï¼Œclassifierå…¶å®å°±æ˜¯FC_Headã€‚ create_lr_scheduleræ˜¯ä¸€ç§å­¦ä¹ ç‡çš„æ›´æ–°ç­–ç•¥ï¼Œè¿™é‡Œçš„ç­–ç•¥æ˜¯å…ˆç¼“æ…¢çš„å¢é•¿åˆ°æŒ‡å®šçš„å­¦ä¹ ç‡ï¼Œä¹‹åå†æ…¢æ…¢çš„ä¸‹é™ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103def main(args): device = torch.device(args.device if torch.cuda.is_available() else &quot;cpu&quot;) batch_size = args.batch_size # segmentation nun_classes + background num_classes = args.num_classes + 1 # ç”¨æ¥ä¿å­˜è®­ç»ƒä»¥åŠéªŒè¯è¿‡ç¨‹ä¸­ä¿¡æ¯ results_file = &quot;results{}.txt&quot;.format(datetime.datetime.now().strftime(&quot;%Y%m%d-%H%M%S&quot;)) # VOCdevkit -&gt; VOC2012 -&gt; ImageSets -&gt; Segmentation -&gt; train.txt train_dataset = VOCSegmentation(args.data_path, year=&quot;2012&quot;, transforms=get_transform(train=True), txt_name=&quot;train.txt&quot;) # VOCdevkit -&gt; VOC2012 -&gt; ImageSets -&gt; Segmentation -&gt; val.txt val_dataset = VOCSegmentation(args.data_path, year=&quot;2012&quot;, transforms=get_transform(train=False), txt_name=&quot;val.txt&quot;) num_workers = min([os.cpu_count(), batch_size if batch_size &gt; 1 else 0, 8]) # è¿™é‡Œæ˜¯ç¡®å®šè®­ç»ƒçš„æ ¸æ•° train_loader = torch.utils.data.DataLoader(train_dataset, batch_size=batch_size, num_workers=num_workers, shuffle=True, pin_memory=True, collate_fn=train_dataset.collate_fn) val_loader = torch.utils.data.DataLoader(val_dataset, batch_size=1, num_workers=num_workers, pin_memory=True, collate_fn=val_dataset.collate_fn) # åˆ›å»ºæ¨¡å‹ model = create_model(aux=args.aux, num_classes=num_classes) model.to(device) # è®°å½•æ‰€æœ‰æœ‰æ¢¯åº¦å¯ä»¥è¿›è¡Œä¼˜åŒ–çš„å‚æ•° # å…¶ä¸­çš„backboneå°±æ˜¯resnet50 # classifierå…¶å®å°±æ˜¯FC_Head params_to_optimize = [ {&quot;params&quot;: [p for p in model.backbone.parameters() if p.requires_grad]}, {&quot;params&quot;: [p for p in model.classifier.parameters() if p.requires_grad]} ] if args.aux: params = [p for p in model.aux_classifier.parameters() if p.requires_grad] # å’Œå¤§æ¨¡å‹çš„å­¦ä¹ ç‡ä¸ä¸€æ ·ï¼Œè¿™é‡Œæ˜¯åœ¨å•ç‹¬è®¾ç½®å­¦ä¹ ç‡æ˜¯å…¨å±€çš„10å€ params_to_optimize.append({&quot;params&quot;: params, &quot;lr&quot;: args.lr * 10}) optimizer = torch.optim.SGD( params_to_optimize, lr=args.lr, momentum=args.momentum, weight_decay=args.weight_decay ) scaler = torch.cuda.amp.GradScaler() if args.amp else None # åˆ›å»ºå­¦ä¹ ç‡æ›´æ–°ç­–ç•¥ï¼Œè¿™é‡Œæ˜¯æ¯ä¸ªstepæ›´æ–°ä¸€æ¬¡(ä¸æ˜¯æ¯ä¸ªepoch) lr_scheduler = create_lr_scheduler(optimizer, len(train_loader), args.epochs, warmup=True) # if args.resume: checkpoint = torch.load(args.resume, map_location='cpu') model.load_state_dict(checkpoint['model']) optimizer.load_state_dict(checkpoint['optimizer']) lr_scheduler.load_state_dict(checkpoint['lr_scheduler']) args.start_epoch = checkpoint['epoch'] + 1 if args.amp: scaler.load_state_dict(checkpoint[&quot;scaler&quot;]) start_time = time.time() # å¼€å§‹è®­ç»ƒ for epoch in range(args.start_epoch, args.epochs): mean_loss, lr = train_one_epoch(model, optimizer, train_loader, device, epoch, lr_scheduler=lr_scheduler, print_freq=args.print_freq, scaler=scaler) # ç”¨éªŒè¯å€¼æ¥æ›´æ–°æ··æ·†çŸ©é˜µ confmat = evaluate(model, val_loader, device=device, num_classes=num_classes) val_info = str(confmat) print(val_info) # write into txt with open(results_file, &quot;a&quot;) as f: # è®°å½•æ¯ä¸ªepochå¯¹åº”çš„train_lossã€lrä»¥åŠéªŒè¯é›†å„æŒ‡æ ‡ train_info = f&quot;[epoch: {epoch}]\\n&quot; \\ f&quot;train_loss: {mean_loss:.4f}\\n&quot; \\ f&quot;lr: {lr:.6f}\\n&quot; f.write(train_info + val_info + &quot;\\n\\n&quot;) save_file = {&quot;model&quot;: model.state_dict(), &quot;optimizer&quot;: optimizer.state_dict(), &quot;lr_scheduler&quot;: lr_scheduler.state_dict(), &quot;epoch&quot;: epoch, &quot;args&quot;: args} if args.amp: save_file[&quot;scaler&quot;] = scaler.state_dict() torch.save(save_file, &quot;save_weights/model_{}.pth&quot;.format(epoch)) total_time = time.time() - start_time total_time_str = str(datetime.timedelta(seconds=int(total_time))) print(&quot;training time {}&quot;.format(total_time_str)) é‡è¦çš„å°è£…å‡½æ•°æŸå¤±å‡½æ•°è¿™é‡Œæ˜¯ä¸Šé¢é‡è§çš„åˆ°çš„æŸå¤±å‡½æ•°çš„å…·ä½“çš„å®ç°ï¼š 1234567891011def criterion(inputs, target): losses = {} for name, x in inputs.items(): # å¿½ç•¥targetä¸­å€¼ä¸º255çš„åƒç´ ï¼Œ255çš„åƒç´ æ˜¯ç›®æ ‡è¾¹ç¼˜æˆ–è€…paddingå¡«å…… losses[name] = nn.functional.cross_entropy(x, target, ignore_index=255) if len(losses) == 1: return losses['out'] # å¦‚æœæœ‰è¾…åŠ©åˆ†ç±»å™¨äºæ˜¯å°†ä¹˜ä»¥æƒé‡0.5åï¼ŒåŠ åœ¨ä¸»åˆ†ç±»å™¨ä¹‹å return losses['out'] + 0.5 * losses['aux'] è®­ç»ƒä¸€ä»£çš„å‡½æ•°è¿™é‡Œå°†ä¸Šé¢è®­ç»ƒçš„è¿‡ç¨‹ç›´æ¥å°è£…æˆä¸€ä¸ªå‡½æ•°å¦‚ä¸‹ï¼Œå’Œä»¥å¾€ä¸åŒçš„æ˜¯ï¼Œä¹‹å‰æ˜¯æ¯ä¸ªepochä¼šå‡ºç°è¿›è¡Œå­¦ä¹ ç‡çš„æ›´æ–°ï¼Œè€Œè¿™é‡Œæ˜¯æ¯ä¸€æ­¥å°±æ›´æ–°ä¸€æ¬¡å­¦ä¹ ç‡ã€‚ 123456789101112131415161718192021222324252627def train_one_epoch(model, optimizer, data_loader, device, epoch, lr_scheduler, print_freq=10, scaler=None): model.train() metric_logger = utils.MetricLogger(delimiter=&quot; &quot;) metric_logger.add_meter('lr', utils.SmoothedValue(window_size=1, fmt='{value:.6f}')) header = 'Epoch: [{}]'.format(epoch) for image, target in metric_logger.log_every(data_loader, print_freq, header): image, target = image.to(device), target.to(device) with torch.cuda.amp.autocast(enabled=scaler is not None): output = model(image) loss = criterion(output, target) optimizer.zero_grad() if scaler is not None: scaler.scale(loss).backward() scaler.step(optimizer) scaler.update() else: loss.backward() optimizer.step() lr_scheduler.step() lr = optimizer.param_groups[0][&quot;lr&quot;] metric_logger.update(loss=loss.item(), lr=lr) return metric_logger.meters[&quot;loss&quot;].global_avg, è¿”å›çš„æ—¶è®­ç»ƒçš„å¹³å‡æŸå¤±å’Œå­¦ä¹ ç‡ã€‚ éªŒè¯å‡½æ•°ä¸‹é¢ä¸ºéªŒè¯å‡½æ•°çš„å…·ä½“å½¢å¼ï¼Œé¦–å…ˆæ—¶å»ºç«‹æ··æ·†çŸ©é˜µconfmatå¦‚ä¸‹ï¼Œ 123456789101112131415161718def evaluate(model, data_loader, device, num_classes): model.eval() confmat = utils.ConfusionMatrix(num_classes) metric_logger = utils.MetricLogger(delimiter=&quot; &quot;) header = 'Test:' with torch.no_grad(): for image, target in metric_logger.log_every(data_loader, 100, header): image, target = image.to(device), target.to(device) output = model(image) output = output['out'] confmat.update(target.flatten(), output.argmax(1).flatten()) # è¿™é‡Œå°†é¢„æµ‹æœ€å¤§æ¦‚ç‡çš„é‚£ä¸ªç±»ä½œä¸ºæœ€åçš„é¢„æµ‹å€¼ # ç„¶åè®¡ç®—ä¸é¢„æµ‹å€¼å’Œç›®æ ‡å€¼ä¹‹é—´çš„æ’å€¼æ¥å¯¹æœ€åæ··æ·†çŸ©é˜µè¿›è¡Œæ›´æ–° confmat.reduce_from_all_processes() return confmat é¢„æµ‹å‡½æ•° åœ¨é¢„æµ‹è¿‡ç¨‹ä¸­ï¼Œä¸€èˆ¬ä¸ä½¿ç”¨è¾…åŠ©åˆ†ç±»å™¨ï¼Œaux=False. paletteè°ƒè‰²æ¿æ–‡ä»¶ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566def main(): aux = False # inference time not need aux_classifier classes = 20 # è‡ªå·±è®­ç»ƒå¥½çš„æƒé‡çš„åç§° weights_path = &quot;./save_weights/model_29.pth&quot; # è‡ªå·±ä¸‹è½½çš„å›¾ç‰‡çš„åç§° img_path = &quot;./test.jpg&quot; # å¯¼å…¥json,å…¶å®å°±æ˜¯è°ƒè‰²æ¿ palette_path = &quot;./palette.json&quot; assert os.path.exists(weights_path), f&quot;weights {weights_path} not found.&quot; assert os.path.exists(img_path), f&quot;image {img_path} not found.&quot; assert os.path.exists(palette_path), f&quot;palette {palette_path} not found.&quot; with open(palette_path, &quot;rb&quot;) as f: pallette_dict = json.load(f) pallette = [] for v in pallette_dict.values(): pallette += v # get devices device = torch.device(&quot;cuda:0&quot; if torch.cuda.is_available() else &quot;cpu&quot;) print(&quot;using {} device.&quot;.format(device)) # create model model = fcn_resnet50(aux=aux, num_classes=classes+1) # delete weights about aux_classifier weights_dict = torch.load(weights_path, map_location='cpu')['model'] for k in list(weights_dict.keys()): # éå†åˆ å»è¾…åŠ©åˆ†ç±»å™¨çš„å†…å®¹ if &quot;aux&quot; in k: del weights_dict[k] # load weights model.load_state_dict(weights_dict) model.to(device) # load image original_img = Image.open(img_path) # from pil image to tensor and normalize data_transform = transforms.Compose([transforms.Resize(520), transforms.ToTensor(), transforms.Normalize(mean=(0.485, 0.456, 0.406), std=(0.229, 0.224, 0.225))]) img = data_transform(original_img) # expand batch dimension # å°±æ˜¯å¢åŠ ä¸€ä¸ªbatchç»´åº¦ img = torch.unsqueeze(img, dim=0) model.eval() # è¿›å…¥éªŒè¯æ¨¡å¼ with torch.no_grad(): # init model img_height, img_width = img.shape[-2:] init_img = torch.zeros((1, 3, img_height, img_width), device=device) model(init_img) t_start = time_synchronized() output = model(img.to(device)) t_end = time_synchronized() print(&quot;inference+NMS time: {}&quot;.format(t_end - t_start)) prediction = output['out'].argmax(1).squeeze(0) prediction = prediction.to(&quot;cpu&quot;).numpy().astype(np.uint8) mask = Image.fromarray(prediction) mask.putpalette(pallette) mask.save(&quot;test_result.png&quot;)","link":"/2022/07/05/%E8%AF%AD%E4%B9%89%E5%88%86%E5%89%B2%E5%8F%8APytorch%E5%AE%9E%E7%8E%B0/FCN%E8%AF%AD%E4%B9%89%E5%88%86%E5%89%B2%E7%BD%91%E7%BB%9C%E7%90%86%E8%AE%BA%E5%8F%8A%E7%AE%80%E8%A6%81%E4%BB%A3%E7%A0%81/"},{"title":"DeepLab Vxè¯­ä¹‰åˆ†å‰²ç½‘ç»œåŠä»£ç å®ç°","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦ç†è®ºéƒ¨åˆ†åˆ†åˆ«ä»‹ç»äº†DeepLab v1ã€DeepLab v2ã€DeepLab v3æ¨¡å‹çš„ä¸»è¦æ¶æ„ï¼Œè§£å†³çš„ä¸»è¦é—®é¢˜å¦‚ç©ºé—´ä¸å˜æ€§å’Œä¸‹é‡‡æ ·ä¸¢å¤±ä¿¡æ¯ç­‰ï¼Œä»¥åŠä¸ºäº†è§£å†³æ–‡ä¸­æåˆ°çš„é—®é¢˜é‡‡å–çš„æ‰‹æ®µã€‚åœ¨ä»£ç å®ç°éƒ¨åˆ†ï¼ŒPytorchä¸»è¦æ˜¯è¿›è¡Œäº†æ˜¯åŸºäºFCNç½‘ç»œæ¥ä¿®æ”¹çš„ã€‚åœ¨backboneéƒ¨åˆ†å¯ä»¥é€‰æ‹©resnetå’Œmobilenet v3ï¼Œæœ¬æ–‡ä¸»è¦è®²è§£çš„æ˜¯resentéƒ¨åˆ†ã€‚åœ¨ASPPéƒ¨åˆ†ï¼Œæ˜¯åŸºäºFCNHeadçš„æ¡†æ¶æ¥æ­å»ºçš„ã€‚ DeepLab V1 ä¸»è¦çš„é—®é¢˜é¦–å…ˆï¼Œæ–‡ç« æ€»ç»“äº†å½“å‰æƒ…å†µä¸‹è¯­ä¹‰åˆ†å‰²å­˜åœ¨çš„é—®é¢˜ï¼Œå…¶ä¸­ä¸»è¦åŒ…æ‹¬ä¸‹é‡‡æ ·æ“ä½œä¼šé€ æˆåˆ†è¾¨ç‡çš„ä¸‹é™ï¼Œå…¶æ¬¡å°±æ˜¯æ— æ³•ä¿è¯ç©ºé—´ä¸å˜æ€§ï¼Œå› ä¸ºåœ¨åˆ†ç±»ç½‘ç»œä¸­ï¼Œä¸€èˆ¬éƒ½æ˜¯è¦æ»¡è¶³ç©ºé—´ä¸å˜æ€§çš„ï¼Œå°±æ˜¯å›¾ç‰‡æ—‹è½¬å¹³ç§»å˜åŒ–ä¹‹åå…¶é¢„æµ‹çš„ç»“æœæ˜¯ä¸å˜çš„ï¼Œä½†æ˜¯å¯¹äºè¯­ä¹‰åˆ†å‰²è€Œè¨€ï¼Œä¸å¯ä»¥å‡ºç°ç©ºé—´ä¸å˜æ€§ã€‚ å¯¹äºä¸Šè¿°çš„é—®é¢˜ï¼Œæœ¬æ–‡ç»™å‡ºçš„è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨è†¨èƒ€å·ç§¯æ¥ä¿è¯åˆè¶³å¤Ÿçš„åˆ†è¾¨ç‡ï¼Œå…¶æ¬¡å°±æ˜¯ä½¿ç”¨Fully-connected CRF(Conditional Random Field)ï¼Œä½†æ˜¯è¿™ä¸ªåœ¨æ—©æœŸçš„è¯­ä¹‰åˆ†å‰²é‡Œé¢ä½¿ç”¨è¾ƒå¤šï¼Œä½†æ˜¯åœ¨v3å¼€å§‹å°±ä¸åœ¨ä½¿ç”¨äº†ã€‚ ç½‘ç»œçš„ä¼˜åŠ¿ é€Ÿåº¦æ›´å¿«ï¼Œè®ºæ–‡ä¸­è¯´æ˜¯å› ä¸ºé‡‡ç”¨äº†è†¨èƒ€å·ç§¯çš„åŸå› ï¼Œä½†fully-connected CRFså¾ˆè€—æ—¶ï¼› å‡†ç¡®ç‡æ›´é«˜ï¼Œç›¸æ¯”ä¹‹å‰æœ€å¥½çš„ç½‘ç»œæå‡äº†7.2ä¸ªç‚¹ï¼› æ¨¡å‹ç»“æ„ç®€å•ï¼Œä¸»è¦ç”±DCNNs (Deep Convolutional Nerual Networcks) å’ŒCRFsè”çº§æ„æˆã€‚ è¿™é‡Œé¢å¸¸è§çš„ç»“æ„åˆä»¥ä¸‹å‡ ç§ï¼ŒåŒ…æ‹¬MSCã€CRFã€LargeFOVå•ä¸ªç»“æ„ï¼Œä½†æœ¬æ–‡æˆ‘ä»¬ä»…ä»…è®²MSCã€LargeFOV. Large FOV åœ¨ä¿è¯Mean IoUä¸ä¸‹é™çš„å‰æä¸‹ï¼Œå»åŠ å¿«æ¨¡å‹çš„è®­ç»ƒé€Ÿåº¦ã€‚ ç½‘ç»œçš„backboneä¹Ÿæ˜¯å½“æ˜¯æ•ˆæœæœ€å¥½çš„VGG16ç½‘ç»œã€‚ è¿™é‡Œä¹Ÿæ˜¯ä½¿ç”¨äº†å…¨è¿æ¥FCå±‚åŒ–ä¸ºå·ç§¯çš„æ“ä½œï¼Œä½¿ç”¨çš„æ˜¯kernel_size=7x7,channels=4096çš„å·ç§¯ç½‘ç»œã€‚ä½†æ˜¯è¿™æ ·è¿™æ ·åšä¸ºæˆä¸ºæœ¬æ–‡çš„ä¸€ä¸ªè®¡ç®—çš„ç“¶é¢ˆã€‚äºæ˜¯å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼Œä¼šæœ‰ä¸€ä¸ªå¯¹å·ç§¯æ ¸è¿›è¡Œä¸‹é‡‡æ ·å¾—åˆ°kernel_size=4x4çš„æƒ…å†µã€‚ å½“æˆ‘ä»¬è¿™é‡Œçš„kernel_size=4ä¹‹åï¼Œä¼šå°†å¯¹åº”çš„æ„Ÿå—é‡åŸæ¥çš„ä¸€åŠï¼Œäºæ˜¯å°±ä¼šå‡ºç°Mean_IoUé™ä½çš„æƒ…å†µï¼ŒåŒæ—¶å…¶è¯»å–é€Ÿåº¦å’Œå ç”¨çš„å†…å­˜éƒ½ä¼šå‡é«˜ã€‚ ä¹‹åï¼Œé€šè¿‡æé«˜è†¨èƒ€ç³»æ•°input_stride=8ï¼Œäºæ˜¯å°±ä¼šå‡ºç°æ„Ÿå—é‡æ¢å¤åˆ°åŸæ¥æƒ…å†µã€‚ æœ€åï¼Œç»§ç»­å°†å·ç§¯æ ¸çš„å°ºå¯¸ä¸‹é™åˆ°kernel_size=4ï¼Œå…¶ä¸­è†¨èƒ€ç³»æ•°ä¸Šå‡åˆ°input_stride=12ï¼ŒåŒæ—¶å·ç§¯æ ¸ä¸ªæ•°ä¸‹é™åˆ°channels=1024ï¼Œæœ€åå¾—åˆ°çš„è¿ç®—é€Ÿåº¦åˆè¿ç®—é€Ÿåº¦å’ŒMean_IoUéƒ½æœ‰æ‰€ä¸Šå‡ã€‚ äºæ˜¯LargeFOV å°±ç­‰ä»·äºä¸€ä¸ªå·ç§¯æ ¸ä¸ºkernel_size=3ï¼Œè†¨èƒ€ç³»æ•°ä¸º12çš„å·ç§¯ã€‚ æœ€åçš„é…ç½®å›¾å¦‚ä¸‹å›¾ï¼š è¿™é‡Œçš„backboneä¸ºVGGç½‘ç»œï¼Œä½†æ˜¯æœ‰éƒ¨åˆ†ä¹Ÿæ˜¯è¿›è¡Œäº†ä¿®æ”¹ï¼š ç¬¬ä¸€ä¸ªMaxpoolï¼Œå°†åŸæ¥çš„kernel_size=2-&gt;3ã€‚ å…¶ä¸­å‰ä¸‰ä¸ªä¸‹é‡‡æ ·æ“ä½œçš„å€ç‡ä¸º8å€ã€‚ MSc(Multi-Scale) å…¶å®å°±æ˜¯èåˆå¤šä¸ªå°ºåº¦ä¸Šçš„æ•°æ®ï¼Œå…¶å®è¿™é‡ŒåŸè®ºæ–‡çš„ä½œè€…ä¸æ˜¯å¾ˆæ¨èï¼Œä½œè€…æ¯”è¾ƒæ¨èå»ä½¿ç”¨CRFã€‚ è¿™é‡Œæ˜¯å°†åŸå›¾å°ºåº¦å’Œå‰é¢4ä¸ªmaxpoolå°ºåº¦è¿›è¡Œèåˆï¼Œæœ€åæé«˜é—´çº§éƒ½è½¬åŒ–ä¸º28x28xnum_class. DeepLab v2 ç›¸æ¯”äºv1å…¶ä¸»è¦çš„æå‡åœ¨äºå…¶æ¢äº†backboneï¼Œ2016å¹´åˆ†ç±»é¢†åŸŸçš„é‡è¦ä½œå“resentå‡ºä¸–ï¼Œå…¶æ•ˆæœåŠ›å‹VGGï¼Œäºæ˜¯å¥½å¤šé—®é¢˜çš„backboneå°±æŠ•å‘äº†resnetï¼Œå…¶æ¬¡å°±æ˜¯å…¶å¼•å…¥äº†asppç»“æ„ã€‚ ä¸»è¦çš„é—®é¢˜è¿™é‡Œå…¶å®å’Œä¹‹å‰çš„v1å¤§è‡´ç›¸åŒï¼ŒåŸºæœ¬çš„é—®é¢˜æœ‰ä¸‰ä¸ªï¼š åˆ†è¾¨ç‡ä¼šè¢«é™ä½ï¼Œ(ä¸»è¦æ˜¯ç”±äºä¸‹é‡‡æ ·stride&gt;1çš„å±‚å¯¼è‡´çš„)ï¼› ç›®æ ‡çš„å¤šå°ºåº¦é—®é¢˜ï¼› DCNNsçš„ä¸å˜æ€§(invarience)ä¼šé™ä½å®šä½çš„ç²¾åº¦ã€‚ åœ¨v1çš„åŸºç¡€ä¸Šå¢åŠ äº†å¤šå°ºåº¦çš„é—®é¢˜ã€‚ å¯¹åº”çš„è§£å†³æ–¹æ³• é’ˆå¯¹åˆ†è¾¨ç‡è¢«é™ä½çš„é—®é¢˜ï¼Œä¸€èˆ¬å°±æ˜¯å°†æœ€åçš„å‡ ä¸ªMaxpoolingå±‚çš„strideè®¾ç½®æˆ1(å¦‚æœæ˜¯é€šè¿‡å·ç§¯ä¸‹é‡‡æ ·çš„ï¼Œæ¯”å¦‚resnetï¼ŒåŒæ ·å°†strideè®¾ç½®æˆ1å³å¯)ï¼Œé…åˆä½¿ç”¨è†¨èƒ€å·ç§¯ã€‚ å°±æ˜¯å’Œå‰é¢ä¸€æ ·ï¼Œå°†ä¸‹é‡‡æ ·çš„å·ç§¯å±‚çš„stride=1ï¼Œé…åˆè†¨èƒ€å·ç§¯æ¥ä½¿ç”¨ã€‚ é’ˆå¯¹ç›®æ ‡å¤šå°ºåº¦çš„é—®é¢˜ï¼Œæœ€å®¹æ˜“æƒ³åˆ°çš„å°±æ˜¯å°†å›¾åƒç¼©æ”¾åˆ°å¤šä¸ªå°ºåº¦åˆ†åˆ«é€šè¿‡ç½‘ç»œè¿›è¡Œæ¨ç†ï¼Œæœ€åå°†å¤šä¸ªç»“æœè¿›è¡Œèåˆå³å¯ã€‚è¿™æ ·åšè™½ç„¶æœ‰ç”¨ä½†æ˜¯è®¡ç®—é‡å¤ªå¤§äº†ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒDeepLab V2ä¸­æå‡ºäº†ASPPæ¨¡å—(atrous spatial pyramid pooling)ã€‚ é’ˆå¯¹DCNNsä¸å˜æ€§å¯¼è‡´å®šä½ç²¾åº¦é™ä½çš„é—®é¢˜ï¼Œå’ŒDeepLab V1å·®ä¸å¤šè¿˜æ˜¯é€šè¿‡CRFsè§£å†³ï¼Œä¸è¿‡è¿™é‡Œç”¨çš„æ˜¯fully connected pairwise CRFï¼Œç›¸æ¯”V1é‡Œçš„fully connected CRFè¦æ›´é«˜æ•ˆç‚¹ã€‚ ç½‘ç»œçš„ä¼˜åŠ¿ è¿ç®—é€Ÿåº¦ä¼šæ›´å¿«ï¼› å…¶å‡†ç¡®ç‡ä¼šæ›´é«˜ï¼Œå¹¶ä¸”åœ¨å½“æ˜¯state-of-artï¼› æ¨¡å‹çš„ç»“æ„ç®€å•ï¼Œä½†æ˜¯è¿˜æ˜¯åŸæ¥çš„DCNNs+CRFçš„è”çº§ã€‚ ASPP(atrous spatial pyramid pooling) å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæ˜¯å°†å›¾ç‰‡ç»è¿‡ä¸åŒçš„è†¨èƒ€å·ç§¯å¾—åˆ°ä¸åŒå°ºåº¦çš„ç‰¹å¾ï¼Œä¹‹åå°†ä¸åŒå°ºåº¦çš„ç‰¹å¾è¿›è¡Œå¹¶è”ã€‚ è¿™é‡Œæœ‰ä¸¤ç§ASPPç»“æ„ï¼Œå’ŒLargeFOVç›¸æ¯”çš„ç»“æ„å¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚ ASPP-Så¯¹åº”çš„è†¨èƒ€ç³»æ•°ä¸º $r=\\{2,4,8,12\\}$ ï¼› ASPP-Lå¯¹åº”çš„è†¨èƒ€ç³»æ•°ä¸º $r=\\{6,12,18,24\\}$ï¼› éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸Šå›¾çš„backboneæ˜¯é’ˆå¯¹ä¸€èˆ¬çš„VGG16çš„ï¼Œåœ¨resnetä¸ºbackboneçš„ç½‘ç»œä¸­ï¼Œå…¶åªæœ‰ä¸€ä¸ª3x3çš„è†¨èƒ€å·ç§¯ï¼Œæ²¡æœ‰åé¢é‚£ä¸¤ä¸ªå…¨è¿æ¥å±‚ã€‚ æ¶ˆèå®éªŒ ä¸Šå›¾çš„ä¸»è¦çš„æ–¹æ³•åŒ…æ‹¬ï¼ŒMSCä»£è¡¨å¤šå°ºåº¦æ“ä½œã€COCOä»£è¡¨æ˜¯å¦è¿›è¡Œé¢„è®­ç»ƒæ“ä½œã€Augä»£è¡¨æ˜¯å¦è¿›è¡Œæ•°æ®å¢å¼ºã€LargeFOVã€ASPPã€CRFæ˜¯ä¸»è¦æ¥è§£å†³ç©ºé—´ä¸å˜æ€§çš„æ–¹æ³•ã€‚ MScä¸­å°†åŸæ¥çš„å›¾åƒå˜æˆscale={0.5,0.75,1}ï¼Œä¹‹åçš„èåˆæ“ä½œå°±å»ä¸Šè¿°ä¸‰ä¸ªè¾“å‡ºé‡Œé¢çš„æœ€å¤§å€¼ï¼Œç›¸æ¯”åŸæ¥æå‡äº†ä¸¤ä¸ªç‚¹ã€‚ COCOå°±æ˜¯å°†å…¶åœ¨COCOæ•°æ®é›†ä¸Šè¿›è¡Œé¢„è®­ç»ƒæ“ä½œï¼Œç›¸æ¯”ä¹‹å‰æå‡äº†ä¸¤ä¸ªç‚¹ã€‚ Augå°±æ˜¯å¯¹æ•°æ®è¿›è¡Œå¢å¼ºæ“ä½œï¼Œå…¶å®å°±æ˜¯å¯¹æ•°æ®è¿›è¡Œ0.5-1.5å€çš„ç¼©æ”¾ã€‚ LargeFOVå¯¹æœ€åçš„ç»“æœçš„æå‡ä¸æ˜¯å¾ˆæ˜æ˜¾ã€‚ ASPPå’ŒCRFå¯¹æœ€åçš„æå‡æœ‰1.5ä¸ªç‚¹å·¦å³ã€‚ç›¸æ¯”ä¹‹ä¸‹CRFçš„æå‡å°±ä¸æ˜¯å¾ˆæ˜æ˜¾äº†ï¼Œä½†æ˜¯åœ¨v1ä¸­æ˜¯å¯ä»¥æä¸Š4ä¸ªç‚¹å·¦å³ã€‚ å°†VGG16æ¢æˆresnet101å¤§æ¦‚å¯ä»¥æå‡3ä¸ªç‚¹ã€‚ å­¦ä¹ ç­–ç•¥çš„è®¾è®¡ è¿™é‡Œæé«˜æ›´æ”¹å­¦ä¹ ç‡çš„ç­–ç•¥å°±å¯ä»¥æé«˜3ä¸ªç‚¹çš„æå‡ã€‚ learing\\_rate=lr\\times(1-\\frac{iter}{max\\_iter})^{power} ä½œè€…çš„ç‚¼ä¸¹èƒ½åŠ›å¤ªå¼ºäº†ã€‚ ç½‘ç»œçš„ç»“æ„ è¿™é‡Œå’ŒFCNå…¶å®å¾ˆåƒï¼Œlarge3ä¹‹å‰åŸºæœ¬ä¸Šç…§æŠ„çš„resnet-101ï¼Œåé¢å°±é‡æ–°ä¿®æ”¹çš„ç½‘ç»œï¼Œå°†è†¨èƒ€å·ç§¯åŠ å…¥åˆ°ç½‘ç»œä¹‹ä¸­äº†ã€‚ å¦‚å³å›¾æ‰€ç¤ºï¼Œå…¶ä¸»è¦çš„layer3,layer4ä¸»è¦çš„å˜åŒ–æ˜¯å–æ¶ˆäº†ä¸‹é‡‡æ ·ï¼Œæ¢æˆäº†å¯¹åº”çš„è†¨èƒ€å·ç§¯ï¼Œå…¶ä¸­åœ¨layer3é‡Œé¢å¾—åˆ°è†¨èƒ€ç³»æ•°ä¸º2ï¼Œåœ¨layer4é‡Œé¢çš„è†¨èƒ€ç³»æ•°ä¸º4ï¼Œå‰é¢æ²¡æœ‰è†¨èƒ€å·ç§¯ï¼Œå› æ­¤ä¸ä¼šå‡ºç°gridding effectçš„ç°è±¡ã€‚ ä¸‹é¢æ¥ä¸€ä¸ªASPPæ“ä½œçš„ï¼Œå°†å…¶è¾“å…¥åˆ°å››ä¸ªå¸¦åç½®çš„å·ç§¯ï¼Œå…¶è¾“å‡ºçš„ç»´åº¦å°±æ˜¯åˆ†ç±»çš„ä¸ªæ•°ã€‚ æˆ‘ä¼°è®¡è¿™é‡Œçš„è†¨èƒ€å·ç§¯åº”è¯¥ä¼šæœ‰paddingï¼Œè¦ä¸ç„¶ä¸ä¼šå‡ºç°è¾“å…¥å’Œè¾“å‡ºä¸€æ ·çš„å°ºå¯¸çš„æƒ…å†µã€‚ DeepLab V3æ¦‚è¿° å¼•å…¥äº†Multi-gridçš„æ€æƒ³ï¼Œä¹‹å‰åœ¨v2é‡Œé¢è†¨èƒ€ç³»æ•°éƒ½æ˜¯éšæ„è¿›è¡Œå®ç°çš„ï¼Œåœ¨v3ä¸­ä¸ºäº†é¿å…å‡ºç°gridding effectè¿™é‡Œé‡æ–°è®¾è®¡äº†è†¨èƒ€ç³»æ•°ã€‚ æ”¹è¿›ä¹‹å‰çš„ASPPç»“æ„ã€‚ ç§»é™¤äº†CRFç»“æ„ï¼Œå› ä¸ºCPFç»“æ„åœ¨v2é‡Œé¢æœ‰æ—¶å€™å°±æ•ˆæœéå¸¸æå‡ä¸å¦‚åœ¨v1ç»“æ„ä¸­æ˜æ˜¾äº†ã€‚ ä»¥ä¸Šåˆ†åˆ«æ˜¯å¦‚ä½•è·å–å¤šå°ºåº¦ä¿¡æ¯çš„æ–¹æ³•ï¼š ç¬¬ä¸€ç§æ˜¯å°†å›¾ç‰‡ç¼©æ”¾åˆ°ä¸åŒçš„ç»“æ„ç±»å‹ï¼Œåˆ†åˆ«è¿›è¡Œçš„ç‰¹å¾æå–åå†è¿›è¡Œèåˆmergeã€‚ ç¬¬äºŒç§æ˜¯å°†é€‚ç”¨encoder-decoderæ¶æ„ï¼Œè¿™ç§æ¶æ„çš„ä»£è¡¨ç½‘ç»œæ˜¯U-Netï¼Œå…ˆè¿›è¡Œä¸‹é‡‡æ ·ï¼Œç„¶åä¸Šé‡‡æ ·çš„æ—¶å€™ä¸æ–­èåˆä¹‹å‰çš„ä¿¡æ¯ã€‚ ç¬¬ä¸‰ç§æ˜¯å…ˆè¿›è¡Œä¸‹é‡‡æ ·ï¼Œä¹‹åæé«˜è†¨èƒ€å·ç§¯æ¥æ¢å¤åˆ°åŸæ¥çš„å¤§å°ï¼Œæ”¹æ¶æ„çš„ä»£è¡¨å°±æ˜¯DeepLab v1ã€‚ ç¬¬å››ç§æ˜¯å¼•å…¥ASPPæ¶æ„æ¥è·å–å¤šå°ºåº¦ä¿¡æ¯èåˆçš„èƒ½åŠ›ï¼Œè¯¥æ¶æ„çš„ä»£è¡¨æ˜¯DeepLab v2ã€‚ DeepLab v3çš„ä¸¤ç§ç»“æ„ å…¶å®æœ¬æ–‡æ„å»ºäº†ä¸¤ä¸ªæ¨¡å‹ï¼Œä½†æ˜¯æœ€ågithubä»£ç å¤ç°æ¯”è¾ƒå¤šçš„è¿˜æ˜¯ASPPçš„æ¨¡å‹ï¼ŒupçŒœæƒ³ASPPæ¯”è¾ƒæ¶ˆè€—å†…å­˜ï¼Œå¯èƒ½ç”±äºå½“æ˜¯çš„å†…å­˜ä¸å¤šæ‰ç”¨äº†ç¬¬ä¸€ä¸ªæ¨¡å‹ã€‚ ä¸‹é¢æ¥åˆ†åˆ«çœ‹ä¸¤ä¸ªæ¨¡å‹ï¼š cascaded modelä¸­å‰é¢çš„4ä¸ªå±‚å¯¹åº”çš„å°±æ˜¯ResNetç»“æ„ä¸­çš„layer1,layer2,layer3,layer4 ç”±äºlayer1æ˜¯æ²¡æœ‰è¿›è¡Œä¸‹é‡‡æ ·çš„ï¼Œè¿›è¡Œä¸‹é‡‡æ ·çš„æ˜¯layer1ä¹‹å‰çš„maxpoolå±‚ï¼Œäºæ˜¯å…¶å›¾ä¸­æ ‡æ³¨çš„é€šé“æ•°æœ‰é—®é¢˜ã€‚ å…¶æ¬¡å°±æ˜¯ï¼Œç”±äºå½“æ˜¯æ˜¾å¡å†…å­˜çš„é—®é¢˜ï¼Œå…¶ä¹‹å‰åœ¨è®­ç»ƒæ˜¯å°†ä¸‹é‡‡æ ·ç‡ä¸º16ï¼ŒéªŒè¯çš„æ—¶å€™è®¾ç½®ä¸º8ï¼Œæ¥èŠ‚çº¦ç¼“å­˜å¼€é”€ï¼Œå¢å¤§è®­ç»ƒè¿‡ç¨‹ä¸­çš„batch_sizeã€‚ è¿™é‡Œçš„è†¨èƒ€ç³»æ•°æœ‰ç‰¹å®šçš„è®¡ç®—å…¬å¼$è†¨èƒ€ç³»æ•°=rate \\times multi_grid$ åé¢çš„å‡ ä¸ªå±‚block5,6,7åœ¨ç»“æ„ä¸Šå’Œblock4æ˜¯ç›¸åŒçš„ï¼Œéƒ½æ˜¯æ®‹å·®å—æ‹¼æ¥çš„ç»“æ„ï¼Œå°±æ˜¯è†¨èƒ€ç³»æ•°ä¸åŒè€Œå·²ã€‚ ASPP model è¿™ä¸ªæ¨¡å‹ä¹ä¸€çœ‹æ˜¯å…¶å®å’Œä¹‹å‰çš„DeepLab v2å¾ˆç±»ä¼¼ï¼Œä½†æ˜¯å…¶åœ¨ASPPæ¨¡å—çš„ç»“æ„ä¸Šé¢è¿›è¡Œäº†è°ƒæ•´ã€‚ è¿™é‡Œä¸€å…±æœ‰5ä¸ªåˆ†æ”¯ï¼Œåˆ†åˆ«æ˜¯Conv1x1ã€Conv3x3_rate=6ã€Conv3x3_rate=12ã€Conv3x3_rate=18ã€å…¨å±€poolingã€‚æœ€åæé«˜ä¸€ä¸ªConcatæ‹¼æ¥å’Œä¸€ä¸ªConv1x1ã€‚ å¦‚ä¸‹å›¾æ‰€ç¤ºä¸ºäºŒè€…çš„å¯¹æ¯”å›¾ï¼Œå…¶ä¸­å¯¹åº”v3æ¥è¯´ï¼Œå½“å…¶ä¸‹é‡‡æ ·ç‡ä¸º8æ—¶ï¼Œå¯¹åº”çš„è†¨èƒ€ç³»æ•°è¦ç¿»å€ã€‚ ç›¸æ¯”ä¹‹ä¸‹ï¼Œv2çš„ASPPç»“æ„å°±æ˜¾å¾—å¾ˆç®€é™‹ã€‚ Multi-grid è¿™é‡Œç”±ä¸Šé¢å¯çŸ¥ï¼Œblock5,6,7çš„ç»“æ„å’Œä¹‹å‰ä¸€æ ·ï¼Œéƒ½æ˜¯ä¸‰ä¸ªå·ç§¯ç›¸è¿çš„æ®‹å·®ç»“æ„ï¼Œäºæ˜¯å°±æœ‰Multi-Gridçš„å‚æ•°æœ‰ä¸‰ä¸ªï¼Œè¿™ä¸‰ä¸ªçš„è†¨èƒ€ç³»æ•°è®¡ç®—çš„å…¬å¼ä¸ºï¼š$è†¨èƒ€ç³»æ•°=rate \\times multi_grid$ ã€‚ å¯¹äºcascade model ä¸»è¦é‡‡ç”¨çš„æ˜¯$(1,2,1)$çš„Multi-gridï¼Œæ­¤æ—¶æ•ˆæœæœ€å¥½ã€‚ å¯¹äºASPP model ä¸»è¦é‡‡ç”¨çš„æ˜¯$(1,2,4)$çš„Multi-gridï¼Œæ­¤æ—¶æ•ˆæœæœ€å¥½ã€‚ æ¶ˆèå®éªŒcascaded model MSå¯¹åº”çš„æ”¾å¤§çš„å€ç‡ï¼Œ$sclaes=\\{0.5,0.75,1.0,1.25,1.5,1.75\\}$ï¼Œè¿™é‡Œä½¿ç”¨MSä¹‹åå¯ä»¥æé«˜0.8ä¸ªç™¾åˆ†ç‚¹ã€‚ OSå…¶å®æ˜¯out_strideå°±æ˜¯ä¸‹é‡‡æ ·ç‡çš„å¤§å°ï¼Œå°†åœ¨æ˜¾å­˜å…è®¸çš„æƒ…å†µä¸‹ï¼Œå°†16å€å˜æˆ8å€å°±ç§‘ç ”æé«˜1.5ä¸ªç™¾åˆ†ç‚¹ã€‚ Flipå³ä¸ºå»¶æ°´å¹³æ–¹å‘åè½¬çš„æ“ä½œï¼Œå¯ä»¥æé«˜0.4ä¸ªç‚¹ã€‚ ASPP model OS=8æé«˜äº†1.3ä¸ªç™¾åˆ†ç‚¹ï¼ŒMSæé«˜äº†1ä¸ªç™¾åˆ†ç‚¹ï¼ŒFlipæé«˜äº†1ä¸ªç™¾åˆ†ç‚¹ï¼ŒCOCOæ•°æ®é›†ä¸Šçš„è¿›è¡Œé¢„è®­ç»ƒæ“ä½œï¼Œå¯ä»¥æé«˜3ç™¾åˆ†ç‚¹ã€‚ è®­ç»ƒç»†èŠ‚ å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œç›¸æ¯”DeepLab v2-CRF ,DeepLab v3çš„åœ¨è®­ç»ƒçš„æ•ˆæœä¸Šæå‡çš„äº†6ä¸ªç™¾åˆ†ç‚¹ï¼Œåœ¨æ¶ˆèå®éªŒä¸­ï¼Œä»…ä»…å®éªŒMS+æ”¹è¿›çš„ASPPå…¶å®ä¹Ÿä¸è‡³äºå°±æå‡6ä¸ªç‚¹ï¼Œäºæ˜¯å°±æ˜¯åœ¨è®­ç»ƒçš„è¿‡ç¨‹è¿›è¡Œäº†ä¸€äº›tickã€‚ crop_sizeï¼šä»£è¡¨çš„æ˜¯è¾“å…¥åˆ°ç½‘ç»œä¸­çš„å¤§å°ï¼Œå¦‚æœå›¾ç‰‡å¤§äºcrop_sizeå°±å°†å…¶è¿›è¡Œéšæœºçš„å‰ªè£æ“ä½œã€‚ å¢å¤§crop_sizeå°±ä¼šå¯ä»¥æé«˜9ä¸ªç™¾åˆ†ç‚¹ã€‚ è®­ç»ƒçš„æ—¶å€™è¿˜åŸå›åˆ°åŸæ¥çš„å°ºåº¦ä¹‹åå†æ¥è®¡ç®—æŸå¤±ï¼Œåœ¨DeepLab v2ä¸­æ˜¯çœŸå®çš„æ ‡ç­¾ä¹Ÿè¿›è¡Œç¼©æ”¾ï¼Œå…ˆè®¡ç®—æŸå¤±ç„¶åå†è¿›è¡Œä¸Šé‡‡æ ·ã€‚ è¿™æ ·åšçš„åŸå› æ—¶ä½†æ˜¯çš„ç®—ä¾‹ä¸è¶³ï¼Œè¿™æ ·åšçš„å¯ä»¥åŠ å¿«è®¡ç®—é€Ÿåº¦ã€‚ å¦‚æœè¿˜åŸåˆ°åŸæ¥åˆ°å°ºå¯¸ä¹‹åå†æ¥è®¡ç®—æŸå¤±ï¼Œå°±ä¼šæ¯”åŸæ¥æé«˜1.2ä¸ªç™¾åˆ†ç‚¹ã€‚ fine-tuning (å¾®è°ƒ) è¿™é‡Œå°±æ˜¯åœ¨è®­ç»ƒçš„è¿‡ç¨‹ä¸­é€‰æ‹©æ€§çš„å†»ç»“æŸäº›å±‚ã€‚æœ¬æ–‡åœ¨è®­ç»ƒçš„è¿‡ç¨‹ä¸­ï¼Œé€‰æ‹©æ€§çš„å†»ç»“BNå±‚å°±ä¼šè¾¾åˆ°å¾ˆå¥½çš„æ•ˆæœï¼Œæå‡1.3ä¸ªç™¾åˆ†ç‚¹ã€‚ Pytorch å®˜æ–¹å®ç°çš„DeepLab v3 Pytorchçš„ä»£ç æ˜¯æ²¡æœ‰ä½¿ç”¨Multi-Gridçš„ã€‚ å¤šäº†ä¸€ä¸ªFCNHeadè¾…åŠ©è®­ç»ƒåˆ†æ”¯ï¼Œå¯ä»¥é€‰æ‹©ä¸ä½¿ç”¨ã€‚ æ— è®ºæ˜¯è®­ç»ƒè¿˜æ˜¯éªŒè¯output_strideéƒ½ä½¿ç”¨çš„8ã€‚ ASPPä¸­ä¸‰ä¸ªè†¨èƒ€å·ç§¯åˆ†æ”¯çš„è†¨èƒ€ç³»æ•°æ˜¯12,24,36ã€‚ ä»¥ä¸‹æ˜¯è¿™ä¸ªDeepLab v3çš„ç½‘ç»œå›¾ï¼Œè¿™é‡Œæˆ‘ä»¬ä»ç»†èŠ‚çš„åœ°æ–¹æ¥å¯¹å…¶è¿›è¡Œåˆ†æã€‚ å‰é¢çš„ä¸‰å±‚å·²ç»ä¸‹é‡‡æ ·äº†8å€äº†ï¼Œå› æ­¤è¿™é‡Œä¸æ˜¯å¾ˆéœ€è¦å†æ¬¡è¿›è¡Œä¸‹é‡‡æ ·äº†ï¼ŒåŸè®ºæ–‡æ˜¯ä¸‹é‡‡æ ·16å€ï¼Œå› æ­¤å…¶åœ¨layer3å‡ºè¿˜æ˜¯éœ€è¦å†æ¬¡è¿›è¡Œä¸‹é‡‡æ ·æ“ä½œã€‚å› æ­¤åœ¨layer3,4å¤„å°±å°†stride=1ä¸è¿›è¡Œä¸‹é‡‡æ ·æ“ä½œã€‚ backboneå‡ºæ¥ä»¥åå°±è¿›å…¥ASPPå±‚ï¼Œå‡ºæ¥ä¹‹åæˆ‘ä»¬è¿›å…¥ä¸€ä¸ªç±»ä¼¼äºFCN Headçš„ç»“æ„å°†channel=num_classï¼Œæœ€åè¿›è¡ŒåŒçº¿æ€§æ’å€¼ä¸Šé‡‡æ ·è¾“å‡ºã€‚ DeepLab v3çš„pytorchä»£ç å®ç°æœ¬é¡¹ç›®ä¸»è¦æ¥è‡ªäºpytorchå®˜æ–¹çš„æºç ï¼šhttps://github.com/pytorch/vision/tree/main/torchvision/models/segmentation ç¯å¢ƒçš„é…ç½® Python3.6/3.7/3.8 Pytorch1.10 Ubuntuæˆ–Centos(Windowsæš‚ä¸æ”¯æŒå¤šGPUè®­ç»ƒ) æœ€å¥½ä½¿ç”¨GPUè®­ç»ƒ è¯¦ç»†ç¯å¢ƒé…ç½®è§requirements.txt æ–‡ä»¶çš„ç»“æ„12345678â”œâ”€â”€ src: æ¨¡å‹çš„backboneä»¥åŠDeepLabv3çš„æ­å»ºâ”œâ”€â”€ train_utils: è®­ç»ƒã€éªŒè¯ä»¥åŠå¤šGPUè®­ç»ƒç›¸å…³æ¨¡å—â”œâ”€â”€ my_dataset.py: è‡ªå®šä¹‰datasetç”¨äºè¯»å–VOCæ•°æ®é›†â”œâ”€â”€ train.py: ä»¥deeplabv3_resnet50ä¸ºä¾‹è¿›è¡Œè®­ç»ƒâ”œâ”€â”€ train_multi_GPU.py: é’ˆå¯¹ä½¿ç”¨å¤šGPUçš„ç”¨æˆ·ä½¿ç”¨â”œâ”€â”€ predict.py: ç®€æ˜“çš„é¢„æµ‹è„šæœ¬ï¼Œä½¿ç”¨è®­ç»ƒå¥½çš„æƒé‡è¿›è¡Œé¢„æµ‹æµ‹è¯•â”œâ”€â”€ validation.py: åˆ©ç”¨è®­ç»ƒå¥½çš„æƒé‡éªŒè¯/æµ‹è¯•æ•°æ®çš„mIoUç­‰æŒ‡æ ‡ï¼Œå¹¶ç”Ÿæˆrecord_mAP.txtæ–‡ä»¶â””â”€â”€ pascal_voc_classes.json: pascal_vocæ ‡ç­¾æ–‡ä»¶ é¢„è®­ç»ƒæƒé‡çš„ä¸‹è½½ æ³¨æ„ï¼šå®˜æ–¹æä¾›çš„é¢„è®­ç»ƒæƒé‡æ˜¯åœ¨COCOä¸Šé¢„è®­ç»ƒå¾—åˆ°çš„ï¼Œè®­ç»ƒæ—¶åªé’ˆå¯¹å’ŒPASCAL VOCç›¸åŒçš„ç±»åˆ«è¿›è¡Œäº†è®­ç»ƒï¼Œæ‰€ä»¥ç±»åˆ«æ•°æ˜¯21(åŒ…æ‹¬èƒŒæ™¯) deeplabv3_resnet50: https://download.pytorch.org/models/deeplabv3_resnet50_coco-cd0a2569.pth deeplabv3_resnet101: https://download.pytorch.org/models/deeplabv3_resnet101_coco-586e9e4e.pth deeplabv3_mobilenetv3_large_coco: https://download.pytorch.org/models/deeplabv3_mobilenet_v3_large-fc3c493d.pth æ³¨æ„ï¼Œä¸‹è½½çš„é¢„è®­ç»ƒæƒé‡è®°å¾—è¦é‡å‘½åï¼Œæ¯”å¦‚åœ¨train.pyä¸­è¯»å–çš„æ˜¯deeplabv3_resnet50_coco.pthæ–‡ä»¶ï¼Œ ä¸æ˜¯deeplabv3_resnet50_coco-cd0a2569.pth å…¶ä»–çš„å¤§éƒ¨åˆ†å’Œä¹‹å‰çš„FCNç±»ä¼¼ï¼Œæ¯”å¦‚å¦‚ä½•æ„å»ºæ•°æ®é›†ã€æ··æ·†çŸ©é˜µã€ä»¥åŠå¦‚ä½•è¿›è¡Œè®­ç»ƒå’Œè¯„ä¼°ç­‰ï¼Œæœ¬æ–‡ä¸»è¦è®²è§£å’Œä¹‹å‰ä¸ä¸€æ ·çš„éƒ¨åˆ†ï¼Œä¾‹å¦‚æ¨¡å‹çš„æ­å»ºã€å­¦ä¹ ç‡æ›´æ–°ç­–ç•¥çš„è®¾è®¡ç­‰ã€‚ å­¦ä¹ ç‡æ›´æ–°ç­–ç•¥çš„å®ç°ä¸‹é¢æ˜¯åˆ›å»ºå­¦ä¹ ç‡æ›´æ–°ç®—æ³•çš„ä¸»è¦ä»£ç ï¼š 12345678910111213141516171819202122232425def create_lr_scheduler(optimizer, num_step: int, epochs: int, warmup=True, warmup_epochs=1, warmup_factor=1e-3): assert num_step &gt; 0 and epochs &gt; 0 if warmup is False: warmup_epochs = 0 def f(x): &quot;&quot;&quot; æ ¹æ®stepæ•°è¿”å›ä¸€ä¸ªå­¦ä¹ ç‡å€ç‡å› å­ï¼Œ æ³¨æ„åœ¨è®­ç»ƒå¼€å§‹ä¹‹å‰ï¼Œpytorchä¼šæå‰è°ƒç”¨ä¸€æ¬¡lr_scheduler.step()æ–¹æ³• &quot;&quot;&quot; if warmup is True and x &lt;= (warmup_epochs * num_step): alpha = float(x) / (warmup_epochs * num_step) # warmupè¿‡ç¨‹ä¸­lrå€ç‡å› å­ä»warmup_factor -&gt; 1 return warmup_factor * (1 - alpha) + alpha else: # warmupålrå€ç‡å› å­ä»1 -&gt; 0 # å‚è€ƒdeeplab_v2: Learning rate policy return (1 - (x - warmup_epochs * num_step) / ((epochs - warmup_epochs) * num_step)) ** 0.9 return torch.optim.lr_scheduler.LambdaLR(optimizer, lr_lambda=f) è¾“å…¥çš„å‚æ•° num_stepï¼šæ¯ä¸ªepoché‡Œé¢æœ‰å¤šå°‘æ­¥ï¼› epochï¼šè¿™ä¸ªè®­ç»ƒä¸€å…±æœ‰å¤šå°‘å¾ªç¯epochï¼› warmup=Trueï¼šæ˜¯å¦éœ€è¦è¿›è¡Œçƒ­èº«è®­ç»ƒï¼Œä¸€èˆ¬æƒ…å†µä¸‹éƒ½æ˜¯ä¸ºTrueçš„ï¼› warmup_epochs=1ï¼šçƒ­èº«è®­ç»ƒæŒç»­çš„å¤šå°‘ä¸ªå¾ªç¯epochï¼Œé»˜è®¤æ˜¯1ï¼› warmup_factor=1e-3ï¼šåœ¨çƒ­èº«é˜¶æ®µå°±æ˜¯å°†å­¦ä¹ ç‡ä»warmup_factoré€æ¸é€’å¢åˆ°1çš„ä¸€ä¸ªè¿‡ç¨‹ã€‚ å†…ç½®å®ç°å‡½æ•° å¼€å§‹çš„æ—¶å€™ï¼Œé»˜è®¤æƒ…å†µæ˜¯è¿›è¡Œwarmupçš„ï¼Œäºæ˜¯å°†å­¦ä¹ ç‡ä»warmup_factoré€æ¸é€’å¢åˆ°1ï¼Œåˆ°ç¬¬äºŒä¸ªepochä¹‹åå°±æ˜¯æŒ‰ç…§DeepLab v2é‡Œç»™å‡ºçš„ç­–ç•¥è¿›è¡Œè®­ç»ƒã€‚ 12345678910111213# åˆ›å»ºå­¦ä¹ ç‡æ›´æ–°ç­–ç•¥ï¼Œè¿™é‡Œæ˜¯æ¯ä¸ªstepæ›´æ–°ä¸€æ¬¡(ä¸æ˜¯æ¯ä¸ªepoch)lr_scheduler = create_lr_scheduler(optimizer, len(train_loader), args.epochs, warmup=True)# å­¦ä¹ ç‡å˜åŒ–çš„å¯è§†åŒ–import matplotlib.pyplot as pltlr_list = []for _ in range(args.epochs): for _ in range(len(train_loader)): lr_scheduler.step() lr = optimizer.param_groups[0][&quot;lr&quot;] lr_list.append(lr)plt.plot(range(len(lr_list)), lr_list)plt.show() æ¨¡å‹çš„åˆ›å»ºæ•´ä½“æ¨¡å‹çš„æ­å»º ä¸Šé¢ä¸ºåˆ›å»ºæ¨¡å‹çš„ä¸»è¦ä»£ç ï¼Œå…¶ä¸­å¤§éƒ¨åˆ†å’Œä¹‹å‰çš„FCNå¾ˆåƒï¼Œæˆ‘çŒœæƒ³å¯èƒ½æ˜¯å¼€å‘æ¨¡å‹çš„é‚£äº›äººæƒ³è¦è®©ä»£ç å¤ç”¨æ€§æ›´å¥½ï¼Œæ–¹ä¾¿æ¨¡å‹å’Œæ¡†æ¶ä¸Šçš„ç»Ÿä¸€æ‰è¿™æ ·åšçš„ã€‚å…¶ä¸­å°±æ¯”å¦‚DeepLab v3ä¸­æœ¬æ¥å°±æ²¡æœ‰ç”¨è¾…åŠ©åˆ†ç±»å™¨ï¼Œä½†æ˜¯è¿™ä¸ªæ¨¡å‹å°±åŠ äº†è¾…åŠ©åˆ†ç±»å™¨ã€‚ è¿™é‡Œçš„å¯¼å…¥é¢„è®­ç»ƒçš„éƒ¨åˆ†å…¶å®å°±æ˜¯å’Œä¹‹å‰çš„æ•ˆæœä¸€æ ·ã€‚ å…ˆå¯¼å…¥åœ¨COCOæ•°æ®é›†ä¸Šé¢„å…ˆè®­ç»ƒå¥½çš„æ¨¡å‹æƒé‡ã€‚ ä¹‹ååˆ å»åˆ†ç±»çš„éƒ¨åˆ†ï¼Œå› ä¸ºå…¶å¯¹åº”çš„ç±»åˆ«è‚¯èƒ½å’Œè‡ªå·±çš„ä»»åŠ¡ä¸åŒã€‚ æœ€åå°±å‰©ä½™æƒé‡å¯¼å…¥åˆ°æ¨¡å‹ä¸­å»ã€‚ ä¸‹é¢æˆ‘ä»¬è¿›å…¥ç¬¬ä¸€æ­¥åˆ›å»ºdeeplabv3_resnetæ¨¡å‹çš„ä»£ç ï¼Œè¯¥ä»£ç ä¸»è¦åœ¨deeplabv3_model.pyçš„æ–‡ä»¶ä¸‹ã€‚ 123456789101112131415161718192021222324252627def deeplabv3_resnet50(aux, num_classes=21, pretrain_backbone=False): # 'resnet50_imagenet': 'https://download.pytorch.org/models/resnet50-0676ba61.pth' # 'deeplabv3_resnet50_coco': 'https://download.pytorch.org/models/deeplabv3_resnet50_coco-cd0a2569.pth' backbone = resnet50(replace_stride_with_dilation=[False, True, True]) if pretrain_backbone: # è½½å…¥resnet50 backboneé¢„è®­ç»ƒæƒé‡ backbone.load_state_dict(torch.load(&quot;resnet50.pth&quot;, map_location='cpu')) out_inplanes = 2048 aux_inplanes = 1024 return_layers = {'layer4': 'out'} if aux: return_layers['layer3'] = 'aux' backbone = IntermediateLayerGetter(backbone, return_layers=return_layers) aux_classifier = None # why using aux: https://github.com/pytorch/vision/issues/4292 if aux: aux_classifier = FCNHead(aux_inplanes, num_classes) classifier = DeepLabHead(out_inplanes, num_classes) model = DeepLabV3(backbone, classifier, aux_classifier) return model å¦‚æœä¸æƒ³é€‚åº”ä¹‹å‰çš„cocoæ•°æ®é›†çš„é¢„è®­ç»ƒæ¨¡å‹ï¼Œå¯ä»¥è‡ªå·±å¯¼å…¥resnet-50åœ¨imagenetæ•°æ®é›†ä¸Šçš„æ•°æ®æ¥è¿›è¡Œè®­ç»ƒã€‚ ä¹‹åå°†å°±æ˜¯é‡æ„backboneï¼Œå°†æ²¡æœ‰ç”¨åˆ°çš„æ¨¡å—åˆ å»ã€‚ ç„¶åä½¿ç”¨DeepLabHeadæ¨¡å—æ¥æ„å»ºè¾…åŠ©åˆ†ç±»å™¨å’Œä¸»åˆ†ç±»å™¨ã€‚ ASPPç»“æ„ä¹Ÿæ˜¯åŒ…å«åœ¨DeepLabHeadçš„ç»“æ„é‡Œé¢çš„ã€‚ æœ€åå°†åˆ†ç±»å™¨ã€è¾…åŠ©åˆ†ç±»å™¨ã€backboneæ¥ä¸€åŒæ„å»ºDeepLab V3å¤§æ¨¡å‹ã€‚ è¿™é‡Œçš„æ˜¯å®ç°çš„è¿‡ç¨‹å’Œä¹‹å‰çš„FCNç½‘ç»œç›¸åŒï¼Œå…¶å…·ä½“å®ç°çš„ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829class DeepLabV3(nn.Module): __constants__ = ['aux_classifier'] def __init__(self, backbone, classifier, aux_classifier=None): super(DeepLabV3, self).__init__() self.backbone = backbone self.classifier = classifier self.aux_classifier = aux_classifier def forward(self, x: Tensor) -&gt; Dict[str, Tensor]: input_shape = x.shape[-2:] # contract: features is a dict of tensors features = self.backbone(x) result = OrderedDict() x = features[&quot;out&quot;] x = self.classifier(x) # ä½¿ç”¨åŒçº¿æ€§æ’å€¼è¿˜åŸå›åŸå›¾å°ºåº¦ x = F.interpolate(x, size=input_shape, mode='bilinear', align_corners=False) result[&quot;out&quot;] = x if self.aux_classifier is not None: x = features[&quot;aux&quot;] x = self.aux_classifier(x) # ä½¿ç”¨åŒçº¿æ€§æ’å€¼è¿˜åŸå›åŸå›¾å°ºåº¦ x = F.interpolate(x, size=input_shape, mode='bilinear', align_corners=False) result[&quot;aux&quot;] = x return result è¿™é‡Œä½¿ç”¨mobilenetv3æ¥å®ç°çš„ä»£ç å’Œresnetç•¥å¾®ä¸åŒï¼Œè¿™é‡Œä¸å†ç»†è®²ã€‚ ä¹‹å‰è®ºæ–‡çš„ä½œè€…è®²è¿‡ï¼Œè½¬ç½®å·ç§¯å’ŒåŒçº¿æ€§æ’å€¼çš„æ•ˆæœç›¸åŒï¼Œä½†æ˜¯æ’å€¼çš„è®¡ç®—é€Ÿåº¦å¿«ã€‚ ç”±äºå‰é¢çš„éƒ¨åˆ†ä¹‹å‰å·²ç»æœ‰æ‰€ä»‹ç»äº†ï¼Œç°åœ¨æˆ‘ä»¬ç›´æ¥è·³å…¥åˆ°DeepLabHeadç»“æ„ä¸­ã€‚ è¿™é‡Œçš„DeepLabHeadå±‚çš„ç»“æ„æ˜¯ç›´æ¥ç»§æ‰¿è‡ªnn.Sequentialçš„ã€‚ åœ¨Sequentialä¸­ä»–å†™äº†ç›¸åº”çš„forwardå‡½æ•°ï¼Œæˆ‘ä»¬å¦‚æœä¸éœ€è¦é‡å†™çš„è¯ï¼Œå°±å¯ä»¥åªå†™ç›¸åº”çš„å±‚ï¼Œä¸å»é‡å†™å¯¹åº”çš„forwardå‡½æ•°ã€‚ 123456789class DeepLabHead(nn.Sequential): def __init__(self, in_channels: int, num_classes: int) -&gt; None: super(DeepLabHead, self).__init__( ASPP(in_channels, [12, 24, 36]), nn.Conv2d(256, 256, 3, padding=1, bias=False), nn.BatchNorm2d(256), nn.ReLU(), nn.Conv2d(256, num_classes, 1) ) è¿™ä¸ªç»“æ„å°±æ˜¯æŒ‰ç…§ä¹‹å‰çš„ç»™å‡ºçš„ç»“æ„æ¥ç›´æ¥æ­å»ºçš„ï¼Œå¹¶ä¸”è¿™ä¸ªç±»æ˜¯ä¸éœ€è¦é‡å†™å‰å‘ä¼ é€’å‡½æ•°çš„ã€‚ é¦–å…ˆå°†backboneé‡Œé¢çš„ä¿¡æ¯è¾“å…¥åˆ°ASPPé‡Œé¢è¿›è¡Œå¤šå°ºåº¦èåˆï¼› ç„¶åå°†å…¶è¾“å‡ºè¾“å…¥åˆ°ä¸€ä¸ªConv3x3çš„ç½‘ç»œè¿›è¡Œä¿¡æ¯æå–ï¼› ä¹‹åé€šè¿‡ä¸€ä¸ªConv1x1çš„å·ç§¯ï¼Œå…¶å®æ˜¯ä½œç”¨å’Œå…¨è¿æ¥å±‚ç±»ä¼¼ï¼Œå°†é€šé“æ•°å˜æˆå’Œç±»åˆ«æ•°ä¸€æ ·ï¼› æœ€åå°†è¾“å‡ºè¿›è¡ŒäºŒç»´æ’å€¼è¿˜åŸåˆ°åŸæ¥çš„å°ºå¯¸ã€‚ ASPPç»“æ„çš„å®ç°ä¸‹é¢æˆ‘ä»¬æ¥å¯¹ASPPçš„å®ç°è¿›è¡Œåˆ†æã€‚ è¿™é‡Œçš„è¾“å…¥å‚æ•°ä¸ºè¾“å…¥é€šé“çš„é€šé“æ•°in_channelså’Œè†¨èƒ€ç³»æ•°atrous_ratesã€‚ åé¢å»ºç«‹ç¬¬ä¸€ä¸ªåˆ†æ”¯Conv1x1æ¨¡å—çš„éƒ¨åˆ†ã€‚ ç„¶ååˆ†åˆ«æ¥æ„å»ºå…¶ä½™çš„å‡ ä¸ªå¸¦æœ‰è†¨èƒ€ç³»æ•°çš„Conv3x3çš„å—ï¼Œè¿™é‡Œé¦–å…ˆatrous_ratesåˆ—è¡¨åŒ–ï¼Œç„¶åéå†æ¯ä¸ªç³»æ•°ï¼Œæ¥åˆ›å»ºä¸åŒçš„ASPPConvå—ã€‚å…¶å®ç°çš„ä»£ç å¦‚ä¸‹ï¼š 1234567class ASPPConv(nn.Sequential): def __init__(self, in_channels: int, out_channels: int, dilation: int) -&gt; None: super(ASPPConv, self).__init__( nn.Conv2d(in_channels, out_channels, 3, padding=dilation, dilation=dilation, bias=False), nn.BatchNorm2d(out_channels), nn.ReLU() ) æœ€åå†åŠ å…¥ä¸€ä¸ªå…¨å±€çš„æ± åŒ–å±‚ï¼Œå…¶ä»£ç å¦‚ä¸‹ï¼š 12345678class ASPPPooling(nn.Sequential): def __init__(self, in_channels: int, out_channels: int) -&gt; None: super(ASPPPooling, self).__init__( nn.AdaptiveAvgPool2d(1), nn.Conv2d(in_channels, out_channels, 1, bias=False), nn.BatchNorm2d(out_channels), nn.ReLU() ) è¿™é‡Œå°†ä¸Šè¿°åˆ›å»ºå¥½çš„å‡ ä¸ªå¹¶è”çš„æ¨¡å—æ”¾åˆ°nn.ModuleListä¸­ï¼Œå†åˆ›å»ºä¸€ä¸ªæ˜ å°„å±‚æ¥èåˆä¸Šé¢äº”ä¸ªé€šé“ä¸­çš„è¾“å‡ºã€‚ æœ€åï¼Œå®ç°å‰å‘ä¼ æ’­å‡½æ•°ï¼Œå…¶ä¸­éå†ä¸Šè¿°nn.ModuleListé‡Œé¢çš„æ‰€æœ‰çš„æ¨¡å—ï¼Œè®¡ç®—xé€šè¿‡ä¸Šé¢äº”ä¸ªç»“æ„ä¹‹åçš„è¾“å‡ºï¼Œå°†è¾“å‡ºconcatenateåå¯¼å…¥åˆ°ä¿¡æ¯èåˆå±‚ä¸­å¤„ç†å¾—åˆ°æœ€åçš„è¾“å‡ºã€‚","link":"/2022/07/07/%E8%AF%AD%E4%B9%89%E5%88%86%E5%89%B2%E5%8F%8APytorch%E5%AE%9E%E7%8E%B0/DeepLab-Vx%E8%AF%AD%E4%B9%89%E5%88%86%E5%89%B2%E7%BD%91%E7%BB%9C%E5%8F%8A%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0/"},{"title":"LR-ASPPè¯­ä¹‰åˆ†å‰²ç½‘ç»œåŠä»£ç å®ç°","text":"hljs.initHighlightingOnLoad(); LR-ASPPåŸºäºMobileNetv3ä¸­æå‡ºçš„ï¼Œéå¸¸é€‚åˆäºç§»åŠ¨ç«¯ä¸Šçš„æ­¥éƒ¨ç½²ã€‚ å…¶backnoneéƒ¨åˆ†æ˜¯ä¸€ä¸ªmobilenet v3ç½‘ç»œåœ¨æ„å»ºæ—¶ä¸»è¦å°±å…¶featureéƒ¨åˆ†çš„stride=2çš„éƒ¨åˆ†æå–å‡ºæ¥ï¼ŒHeadéƒ¨åˆ†ä¼˜ç‚¹ç±»ä¼¼äºä¹‹å‰çš„FCNç½‘ç»œã€‚ åŸºæœ¬ç†è®ºé¦–å…ˆï¼Œæˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸‹ä¹‹å‰å­¦ä¹ çš„è¯­ä¹‰åˆ†å‰²ç½‘ç»œã€‚ å°½ç®¡é€Ÿåº¦éå¸¸å¿«ï¼Œä½†æ˜¯å…¶é¢„æµ‹å¾—åˆ°çš„mIoUå°±ç›¸æ¯”ä¹‹ä¸‹éå¸¸ä½ã€‚å› æ­¤ç ”ç©¶å°±æ˜¯å†ç²¾åº¦å’Œé€Ÿåº¦ä¹‹é—´è¿›è¡Œå–èˆçš„ã€‚ å·¦è¾¹æ˜¯MobileNetv3ç½‘ç»œï¼Œå³è¾¹å°±æ˜¯ä¸€ä¸ªåˆ†å‰²å¤´Segmentation Head. å¯¹äºMobileNetv3ç½‘ç»œéƒ¨åˆ†ï¼Œä¸ºäº†æ‰“é€ ä¸€ä¸ªè½»é‡çº§çš„è¯­ä¹‰åˆ†å‰²ç½‘ç»œï¼Œè¿™é‡Œè¿›è¡Œ16å€çš„ä¸‹é‡‡æ ·ã€‚ å¯¹äºSegmentation Headéƒ¨åˆ†ï¼Œä¸Šé¢è¿›è¡Œäº†ä¸€ä¸ªConv1x1æ¥è¿›è¡Œé€šé“çš„è°ƒæ•´ï¼Œä¸‹é¢è¿›è¡Œäº†ä¸€ä¸ªç±»ä¼¼äºSEnetçš„è‡ªæ³¨æ„åŠ›æœºåˆ¶ã€‚å°†ä¸¤éƒ¨åˆ†ç›¸ä¹˜åè¿›è¡Œä¸€æ¬¡2å€çš„åŒçº¿æ€§æ’å€¼çš„ä¸Šé‡‡æ ·ï¼Œä¹‹åå°†é€šé“æ•°æœ‰128å˜æˆnum_classã€‚æœ€åï¼Œå°†ä¸‹é‡‡æ ·å…«å€çš„ç‰¹å¾å±‚å¼•è¿‡æ¥ï¼Œé€šè¿‡Conv1x1æ¥è®²é€šé“æ•°å˜æˆnum_classï¼Œå’Œä¸»ç‰¹å¾å›¾ç›¸åŠ åè¿›è¡Œå…«å€çš„ä¸Šé‡‡æ ·ã€‚ Pytorchå®ç°LR-ASPPçš„ä¸»è¦ä»£ç ä»¥ä¸‹æ˜¯å®ç°Pytorchç½‘ç»œçš„æ€»å›¾ï¼Œå…¶ä¸»è¦çš„æ˜¯æ¨¡å—åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œä¸€ä¸ªMobileNetv3çš„å…·ä½“å®ç°çš„éƒ¨åˆ†ï¼Œå¦ä¸€éƒ¨åˆ†æ˜¯Segmentation Headçš„éƒ¨åˆ†ã€‚ MobileNetv3éƒ¨åˆ†åŠ å…¥è†¨èƒ€å·ç§¯åçš„MobileNetv3çš„å®ç°éƒ¨åˆ†ï¼Œç”±äºä»…ä»…éœ€è¦ä¸‹é‡‡æ ·16å€å³å¯ï¼Œå› æ­¤å€’æ•°ç¬¬å››å±‚çš„stride=1ï¼Œå¹¶ä¸”ä»è¿™å±‚å¼€å§‹åé¢çš„å±‚å…¨å˜æˆrate=2çš„è†¨èƒ€å·ç§¯ã€‚ Segmentation Headçš„éƒ¨åˆ†è¿™é‡Œå…¶å®è¿›è¡Œäº†ä¸€ä¸ªç±»ä¼¼äºSE-Netçš„é€šé“è‡ªæ³¨æ„åŠ›æœºåˆ¶å±‚ï¼Œç±»ä¼¼äºæ—©æœŸFCNç»“æ„ï¼Œå…ˆè¿›è¡Œ2å€çš„ä¸Šé‡‡æ ·ï¼Œä¹‹åå†å’ŒMobileNetv3éƒ¨åˆ†8å€çš„ä¸‹é‡‡æ ·å±‚è¿›è¡Œèåˆæ“ä½œï¼Œä¹‹åå°†èåˆçš„ç»“æ„è¿›è¡Œ8å€çš„ä¸Šé‡‡æ ·ã€‚ æ³¨ï¼šè¿™é‡Œçš„num_classæ˜¯åŒ…å«èƒŒæ™¯ç±»åˆ«çš„ã€‚ å…·ä½“ä»£ç å®ç°è¿™é‡Œè¯­ä¹‰åˆ†å‰²ç³»åˆ—çš„è®­ç»ƒå’Œæµ‹è¯•ä»£ç å‡ ä¹å¤§åŒå°å¼‚ï¼Œå› æ­¤æ­¤å¤„ä¸åœ¨è¿›è¡Œèµ˜è¿°ï¼Œä¸‹é¢ä¸»è¦å°±æ¨¡å‹çš„å»ºç«‹éƒ¨åˆ†è¿›è¡Œä»‹ç»ã€‚ é¦–å…ˆï¼Œåœ¨train.pyé‡Œçš„åˆ›å»ºæ¨¡å‹å‡½æ•°çš„ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819def create_model(num_classes, pretrain=True): model = lraspp_mobilenetv3_large(num_classes=num_classes) if pretrain: weights_dict = torch.load(&quot;./lraspp_mobilenet_v3_large.pth&quot;, map_location='cpu') if num_classes != 21: # å®˜æ–¹æä¾›çš„é¢„è®­ç»ƒæƒé‡æ˜¯21ç±»(åŒ…æ‹¬èƒŒæ™¯) # å¦‚æœè®­ç»ƒè‡ªå·±çš„æ•°æ®é›†ï¼Œå°†å’Œç±»åˆ«ç›¸å…³çš„æƒé‡åˆ é™¤ï¼Œé˜²æ­¢æƒé‡shapeä¸ä¸€è‡´æŠ¥é”™ for k in list(weights_dict.keys()): if &quot;low_classifier&quot; in k or &quot;high_classifier&quot; in k: del weights_dict[k] missing_keys, unexpected_keys = model.load_state_dict(weights_dict, strict=False) if len(missing_keys) != 0 or len(unexpected_keys) != 0: print(&quot;missing_keys: &quot;, missing_keys) print(&quot;unexpected_keys: &quot;, unexpected_keys) return model è¿™é‡Œå’Œä¹‹å‰ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥è½½å…¥åŸºäºcocoæ•°æ®é›†é¢„è®­ç»ƒå¾—åˆ°å…¨å±€çš„æ•°æ®é›†ã€‚ä¹Ÿå¯ä»¥å•ç‹¬å¯¼å…¥åœ¨mobilenetåœ¨Imagenetä¸Šçš„é¢„è®­ç»ƒæƒé‡ã€‚ ä¸‹é¢æ˜¯åˆ›ç«‹mobilenetv3çš„ä»£ç ï¼š 123456789101112131415161718192021222324def lraspp_mobilenetv3_large(num_classes=21, pretrain_backbone=False): # 'mobilenetv3_large_imagenet': 'https://download.pytorch.org/models/mobilenet_v3_large-8738ca79.pth' # 'lraspp_mobilenet_v3_large_coco': 'https://download.pytorch.org/models/lraspp_mobilenet_v3_large-d234d4ea.pth' backbone = mobilenet_v3_large(dilated=True) if pretrain_backbone: # è½½å…¥mobilenetv3 large backboneé¢„è®­ç»ƒæƒé‡ backbone.load_state_dict(torch.load(&quot;mobilenet_v3_large.pth&quot;, map_location='cpu')) backbone = backbone.features # Gather the indices of blocks which are strided. These are the locations of C1, ..., Cn-1 blocks. # The first and last blocks are always included because they are the C0 (conv1) and Cn. stage_indices = [0] + [i for i, b in enumerate(backbone) if getattr(b, &quot;is_strided&quot;, False)] + [len(backbone) - 1] low_pos = stage_indices[-4] # use C2 here which has output_stride = 8 high_pos = stage_indices[-1] # use C5 which has output_stride = 16 low_channels = backbone[low_pos].out_channels high_channels = backbone[high_pos].out_channels return_layers = {str(low_pos): &quot;low&quot;, str(high_pos): &quot;high&quot;} backbone = IntermediateLayerGetter(backbone, return_layers=return_layers) model = LRASPP(backbone, low_channels, high_channels, num_classes) return è¿™é‡Œæˆ‘ä»¬åœ¨åšå¥½å¯¼å…¥æƒé‡çš„éƒ¨åˆ†ä¹‹åï¼Œå°±å°†featuresçš„éƒ¨åˆ†è¿›é¡¹æå–ã€‚ é¦–å…ˆï¼Œé€šè¿‡ç¬¬ä¸€ä¸ªå‘½ä»¤ä¸»è¦æ˜¯å°†æˆ‘ä»¬featureå±‚çš„é¦–å°¾å·²ç»stride=2çš„å±‚å–å‡ºæ¥ï¼Œè¿™é‡Œself.is_strided = cnf.stride &gt; 1. ä¹‹åï¼Œå°±æ˜¯å°†å¯¹åº”çš„æå–å‡ºä¸‹é‡‡æ ·8å€çš„å±‚å’Œä¸‹é‡‡æ ·16å€çš„å±‚ã€‚å¹¶å–å‡ºå…¶å¯¹åº”çš„out_channels 12low_pos = stage_indices[-4] # use C2 here which has output_stride = 8high_pos = stage_indices[-1] # use C5 which has output_stride = 16 æœ€åï¼Œå°±ç›´æ¥å°†æˆ‘ä»¬çš„ç½‘ç»œè¿›è¡Œé‡æ„æ“ä½œã€‚ ä¸‹é¢æ˜¯æ„å»ºLRASPPç±»çš„ä»£ç ï¼š 12345678910111213141516171819202122232425model = LRASPP(backbone, low_channels, high_channels, num_classes)class LRASPP(nn.Module): __constants__ = ['aux_classifier'] def __init__(self, backbone: nn.Module, low_channels: int, high_channels: int, num_classes: int, inter_channels: int = 128) -&gt; None: super(LRASPP, self).__init__() self.backbone = backbone self.classifier = LRASPPHead(low_channels, high_channels, num_classes, inter_channels) def forward(self, x: Tensor) -&gt; Dict[str, Tensor]: input_shape = x.shape[-2:] features = self.backbone(x) out = self.classifier(features) out = F.interpolate(out, size=input_shape, mode=&quot;bilinear&quot;, align_corners=False) result = OrderedDict() result[&quot;out&quot;] = out return result å…¶ä¸»è¦çš„è¾“å…¥ä¸ºbackboneã€low_channelsã€high_channelsã€num_class. è¿™é‡Œçš„backnoneéƒ¨åˆ†ä¸ºå°±æ˜¯ä¹‹å‰å¯¹å®šä¹‰çš„é‚£ä¸ªmobilenet v3ï¼Œä¹‹åclassiferéƒ¨åˆ†å°±æ˜¯Segmentationéƒ¨åˆ†ã€‚å…¶å¯¹åº”çš„ç±»ä¸ºLRASPPHeadã€‚ é¦–å…ˆï¼Œå–å‡ºå¯¹åº”çš„é«˜å’Œå®½çš„å‚æ•°ï¼› ä¹‹åï¼Œä¸€æ¬¡å‘ç€backboneå’Œclassifierè¿›è¡Œä¼ æ’­ï¼› æœ€åï¼Œè¿›è¡Œä¸€æ¬¡çº¿æ€§æ’å€¼ï¼Œå°†ç»“æœè®°å½•åœ¨ä¸€ä¸ªæœ‰åºå­—å…¸é›†resultä¸­ã€‚ ä¸‹é¢æ˜¯LRASPPHeadå…·ä½“çš„å®ç°éƒ¨åˆ†çš„ä»£ç ï¼š 123456789101112131415161718192021222324252627282930class LRASPPHead(nn.Module): def __init__(self, low_channels: int, high_channels: int, num_classes: int, inter_channels: int) -&gt; None: super(LRASPPHead, self).__init__() self.cbr = nn.Sequential( nn.Conv2d(high_channels, inter_channels, 1, bias=False), nn.BatchNorm2d(inter_channels), nn.ReLU(inplace=True) ) self.scale = nn.Sequential( nn.AdaptiveAvgPool2d(1), nn.Conv2d(high_channels, inter_channels, 1, bias=False), nn.Sigmoid() ) self.low_classifier = nn.Conv2d(low_channels, num_classes, 1) self.high_classifier = nn.Conv2d(inter_channels, num_classes, 1) def forward(self, inputs: Dict[str, Tensor]) -&gt; Tensor: low = inputs[&quot;low&quot;] high = inputs[&quot;high&quot;] x = self.cbr(high) s = self.scale(high) x = x * s x = F.interpolate(x, size=low.shape[-2:], mode=&quot;bilinear&quot;, align_corners=False) return self.low_classifier(low) + self.high_classifier(x) ä¸Šè¿°ç½‘ç»œå’Œä»£ç çš„å¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š","link":"/2022/07/07/%E8%AF%AD%E4%B9%89%E5%88%86%E5%89%B2%E5%8F%8APytorch%E5%AE%9E%E7%8E%B0/LR-ASPP%E8%AF%AD%E4%B9%89%E5%88%86%E5%89%B2%E7%BD%91%E7%BB%9C%E5%8F%8A%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0/"},{"title":"U-Netç½‘ç»œåŠä»£ç å®ç°","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ç®€å•ä»‹ç»å…³äºU-Netç½‘ç»œçš„å†…å®¹ï¼Œå¹¶åŸºäº Pytorch è¿›è¡Œå®ç°ã€‚è¿™é‡Œå¯¹U-Netè¿›è¡Œä¸€å®šç¨‹åº¦ä¸Šçš„ä¿®æ”¹ï¼Œå¢åŠ äº†paddingä½¿å¾—å…¶è¾“å…¥å’Œè¾“å‡ºç›¸ç­‰ï¼Œæ–¹ä¾¿ä¹‹åçš„æ”¹è¿›æ“ä½œã€‚ æ¦‚è¿°ä¸‹å›¾å°±æ˜¯è‘—åçš„U-Netç½‘ç»œä¸»è¦å‘è¡¨åœ¨è‘—åçš„ä¸Šåˆå½±åƒæœŸåˆŠçš„MICCAIä¸Šé¢ï¼Œç”±äºå‘è¡¨æ—¶æ˜¯2015å¹´ï¼Œå› æ­¤å…¶å¯¹åº”çš„ä¸€äº›ç½‘ç»œçš„æ­å»ºæ¯”è¾ƒç®€å•ã€‚ æœ¬æ–‡çš„ç»“æ„æ˜¯å…¸å‹çš„Encoder-Decoderç±»å‹çš„ï¼Œencoderéƒ¨åˆ†å¯¹åº”çš„æ˜¯contracting pathéƒ¨åˆ†ï¼Œè€Œdecoderå¯¹åº”çš„expansiveçš„éƒ¨åˆ†ã€‚ ä¸Šå›¾ååº”å‡ºå‡ ä¸ªæ˜æ˜¾çš„ç¼ºç‚¹ï¼š é¦–å…ˆï¼Œè¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒæ—©æœŸçš„å·¥ä½œï¼ŒBNå±‚è¿˜æ²¡æœ‰å¹¿æ³›åœ°é€‚ç”¨ã€‚ å…¶æ¬¡ï¼Œå°±æ˜¯åŸè®ºæ–‡å¯¹äºç»´åº¦åœ°æŠŠæ¡ä¸æ˜¯å¾ˆåˆ°ä½ï¼Œå›¾åƒçš„H,Wåœ¨è¿›è¡Œæ®‹å·®å±‚çš„æ—¶å€™ç»å¸¸æœ‰æ‹¼æ¥ä¸ä¸Šçš„æƒ…å†µã€‚å¹¶ä¸”è¾“å…¥å’Œè¾“å‡ºçš„ç»´åº¦å¯¹ä¸ä¸Šã€‚ç°åœ¨ç»å¸¸å¯¹å·ç§¯å±‚è¿›è¡Œpaddingæ“ä½œã€‚ å¯¹äºæˆ‘ä»¬é«˜åˆ†è¾¨ç‡çš„å›¾åƒæ¥è¯´ï¼Œå…¶ä¸»è¦çš„æ“ä½œæ˜¯å°†å›¾ç‰‡åˆ†å—å¤„ç†ï¼Œå¦åˆ™æ˜¾å­˜æ˜¯æ˜æ˜¾ä¸è¶³çš„ã€‚ä¹‹åå°†ç›¸é‚»æ¡†é€‰æ—¶è¦æœ‰é‡å çš„éƒ¨åˆ†ï¼Œè¿™æ ·å¯ä»¥æ›´å¥½çš„å¯¹è¾¹ç•Œéƒ¨åˆ†è¿›è¡Œåˆ†å‰²ã€‚ å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä¸ºçœŸå®å›¾ç‰‡å’Œä¸€èˆ¬çš„å®ä¾‹åˆ†å‰²ä¸è¯­ä¹‰åˆ†å‰²çš„æ•ˆæœå›¾ï¼Œå¯ä»¥å‘ç°åœ¨ç»†èƒè¾¹ç•Œéƒ¨åˆ†å¤„æ•ˆæœä¸æ˜¯å¾ˆç¨³å®šã€‚ äºæ˜¯åœ¨è®­ç»ƒçš„æ—¶å€™å°†ç»†èƒå’Œç»†èƒä¹‹é—´çš„è¾¹ç•Œçš„åŒºåŸŸåœ¨æŸå¤±å‡½æ•°é‡Œè®­ç»ƒçš„æƒé‡å€¼å¢å¤§ã€‚ä½†æ˜¯æ–‡ç« ä½œè€…å¹¶æ²¡æœ‰è¿›è¡Œæ¶ˆèå®éªŒï¼Œå…·ä½“çš„æ•ˆæœå®šçš„é‡åˆ†æã€‚ å…·ä½“çš„ä»£ç å®ç°æœ¬é¡¹ç›®ä¸»è¦å‚è€ƒçš„å¼€æºä»“åº“æœ‰å¦‚ä¸‹ä¸¤ä¸ªï¼š https://github.com/milesial/Pytorch-UNet https://github.com/pytorch/vision å…¶ç¯å¢ƒçš„é…ç½®ã€ä»£ç çš„è®­ç»ƒå’Œæµ‹è¯•çš„éƒ¨åˆ†éƒ½ä¸ä¹‹å‰çš„FCNã€DeepLab v3ã€LR-ASPPéƒ½æ˜¯å¾ˆç›¸ä¼¼ï¼Œäºæ˜¯è¿™é‡Œå°±ä¸å¤šèµ˜è¿°ï¼Œå°†å…³æ³¨çš„é‡ç‚¹æ”¾åœ¨æ¨¡å‹çš„æ­å»ºä¸Šã€‚ ä»£ç æ–‡ä»¶çš„ä¸»è¦ç»“æ„ï¼š 1234567â”œâ”€â”€ src: æ­å»ºU-Netæ¨¡å‹ä»£ç â”œâ”€â”€ train_utils: è®­ç»ƒã€éªŒè¯ä»¥åŠå¤šGPUè®­ç»ƒç›¸å…³æ¨¡å—â”œâ”€â”€ my_dataset.py: è‡ªå®šä¹‰datasetç”¨äºè¯»å–DRIVEæ•°æ®é›†(è§†ç½‘è†œè¡€ç®¡åˆ†å‰²)â”œâ”€â”€ train.py: ä»¥å•GPUä¸ºä¾‹è¿›è¡Œè®­ç»ƒâ”œâ”€â”€ train_multi_GPU.py: é’ˆå¯¹ä½¿ç”¨å¤šGPUçš„ç”¨æˆ·ä½¿ç”¨â”œâ”€â”€ predict.py: ç®€æ˜“çš„é¢„æµ‹è„šæœ¬ï¼Œä½¿ç”¨è®­ç»ƒå¥½çš„æƒé‡è¿›è¡Œé¢„æµ‹æµ‹è¯•â””â”€â”€ compute_mean_std.py: ç»Ÿè®¡æ•°æ®é›†å„é€šé“çš„å‡å€¼å’Œæ ‡å‡†å·® upçš„GitHubä»“åº“å¯¹åº”çš„åœ°å€ä¸ºï¼šhttps://github.com/WZMIAOMIAO/deep-learning-for-image-processing/tree/75f81bff3f2ca53866ece59042ad0a473f2fb930/pytorch_segmentation/unet ä¸Šé¢æœ‰æœ¬é¡¹ç›®ä½¿ç”¨çš„æ•°æ®é›†ï¼Œæºä»£ç èµ„æºã€‚ æ¨¡å‹çš„æ­å»ºæ¨¡å‹çš„ç»“æ„å¦‚å›¾ï¼Œè¿™é‡ŒæŒ‰ç…§ä¸Šè¿°ä¸¤ä¸ªæ¯”è¾ƒæƒå¨çš„å¼€æºä»“åº“æ¥è¿›è¡Œç»˜åˆ¶çš„ï¼ŒåŸºäºç»éªŒåŒçº¿æ€§æ’å€¼çš„é€Ÿåº¦æ¯”è£…ç½®å·ç§¯çš„é€Ÿåº¦å¿«ï¼Œäºæ˜¯ä¸Šé‡‡æ ·éƒ¨åˆ†å°±åŸºäºä¸Šçº¿æ€§æ’å€¼æ¥å¯¹ç½‘ç»œæœºè¿›è¡Œæ„å»ºã€‚ å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œçš„ä¸‹é‡‡æ ·è¿˜æ˜¯ç›´æ¥ä½¿ç”¨Maxpool 2x2ã€‚æ¯ä¸ªç½‘ç»œéƒ½å›ºå®šï¼Œéƒ½æ˜¯ä¸€ä¸ªä¸‹é‡‡æ ·æ¥ä¸¤ä¸ªå·ç§¯æ“ä½œã€‚ FCNç½‘ç»œä¸Šè¯´ç›´æ¥ä¸‹é‡‡æ ·ä¼šé€ æˆåˆ†å‰²æ—¶æ¸…æ™°åº¦çš„ä¸‹é™ï¼Œäºæ˜¯ä½¿ç”¨è†¨èƒ€å·ç§¯ã€‚ ç”±äºè¿™é‡ŒU-Netç½‘ç»œçš„æ¨¡å—æ¯”è¾ƒå¥½ï¼Œè¿™é‡ŒæŒ‰ç…§æ¨¡å—æ¥å¯¹ç½‘ç»œè¿›è¡Œä¸åŒçš„æ“ä½œã€‚ ä¸‹é‡‡æ ·ç½‘ç»œå—é¦–å…ˆï¼Œæ„å»ºçš„æ˜¯ä¸‹é‡‡æ ·å±‚çš„æ“ä½œã€‚ æ„å»ºæ¯ä¸ªä¸‹é‡‡æ ·ä¹‹åéƒ½ä¼šæ¥ä¸Šä¸¤ä¸ªå·ç§¯çš„æ“ä½œã€‚ 123456789101112class DoubleConv(nn.Sequential): def __init__(self, in_channels, out_channels, mid_channels=None): if mid_channels is None: mid_channels = out_channels super(DoubleConv, self).__init__( nn.Conv2d(in_channels, mid_channels, kernel_size=3, padding=1, bias=False), nn.BatchNorm2d(mid_channels), nn.ReLU(inplace=True), nn.Conv2d(mid_channels, out_channels, kernel_size=3, padding=1, bias=False), nn.BatchNorm2d(out_channels), nn.ReLU(inplace=True) ) è¿™é‡Œå’Œä¹‹å‰çš„DeepLabv3ä¸€æ ·ï¼Œå¯¹åº”ä¸éœ€è¦é‡å†™å‰å‘ä¼ æ’­çš„å‡½æ•°ï¼Œå°±ç›´æ¥ç»§æ‰¿nn.Sequenttialå³å¯ã€‚ è¿™é‡Œæœ‰ä¸ªé‡è¦çš„å‚æ•°å°±æ˜¯mid_channelsï¼Œå°±æ˜¯ä¸€èˆ¬æƒ…å†µä¸‹ä¸¤ä¸ªå·ç§¯è¾“å…¥çš„in_channelsï¼Œout_channelså’Œä¸¤ä¸ªå·ç§¯ä¹‹é—´çš„mid_channelséƒ½æ˜¯ä¸€æ ·ï¼Œå› æ­¤ä¸€èˆ¬æƒ…å†µä¸‹è¿™ä¸ªå‚æ•°ä¸ºè®¾ä¸ºNoneã€‚ä½†æ˜¯ä¹Ÿæœ‰ç‰¹æ®Šæƒ…å†µï¼Œå°±æ˜¯æˆ‘ä»¬ä½¿ç”¨åŒçº¿æ€§æ’å€¼æ—¶ï¼Œå› ä¸ºåŒçº¿æ€§æ’å€¼ä¸åŒäºè½¬ç½®å·ç§¯å¯ä»¥ä¿®æ”¹é€šé“çš„ç»´åº¦ï¼Œäºæ˜¯æˆ‘ä»¬å°±è¦åœ¨è¿™ä¸ªä¸¤ä¸ªå·ç§¯å±‚ä¸Šä¿®æ”¹è¾“å‡ºçš„å‚æ•°out_channels=in_channels//2. ä¸‹é¢å°†ä¸€ä¸ªMaxpoolå’Œä¹‹å‰è¿ç»­å·ç§¯å±‚DoubleConvè¿›è¡Œåˆå¹¶ï¼š 123456class Down(nn.Sequential): def __init__(self, in_channels, out_channels): super(Down, self).__init__( nn.MaxPool2d(2, stride=2), DoubleConv(in_channels, out_channels) ) äºæ˜¯å°±å°†ä¸‹é‡‡æ ·å±‚æ„å»ºå®Œæ¯•ï¼Œä¸‹é¢æ¥æ„å»ºä¸Šé‡‡æ ·ç½‘ç»œå—ã€‚ ä¸Šé‡‡æ ·ç½‘ç»œå—å…¶ä¸­ä¸Šé‡‡æ ·å±‚ä¹Ÿç”¨åˆ°äº†ä¸¤ä¸ªè¿ç»­çš„å·ç§¯æ“ä½œï¼Œä½†æ˜¯å¯¹åº”ä½¿ç”¨åŒçº¿æ€§æ’å€¼çš„å—ç”±äºå…¶ä¸èƒ½æ”¹å˜ç»´åº¦ï¼Œå› æ­¤è¦å°è¯•åœ¨DoubleConvä¸Šå°†ç»´åº¦è¿›è¡Œä¿®æ”¹ã€‚ 1234567891011121314151617181920212223class Up(nn.Module): def __init__(self, in_channels, out_channels, bilinear=True): super(Up, self).__init__() if bilinear: self.up = nn.Upsample(scale_factor=2, mode='bilinear', align_corners=True) self.conv = DoubleConv(in_channels, out_channels, in_channels // 2) else: self.up = nn.ConvTranspose2d(in_channels, in_channels // 2, kernel_size=2, stride=2) self.conv = DoubleConv(in_channels, out_channels) def forward(self, x1: torch.Tensor, x2: torch.Tensor) -&gt; torch.Tensor: x1 = self.up(x1) # [N, C, H, W] diff_y = x2.size()[2] - x1.size()[2] diff_x = x2.size()[3] - x1.size()[3] # padding_left, padding_right, padding_top, padding_bottom x1 = F.pad(x1, [diff_x // 2, diff_x - diff_x // 2, diff_y // 2, diff_y - diff_y // 2]) x = torch.cat([x2, x1], dim=1) x = self.conv(x) return x è¿™é‡Œä¸‹é‡‡æ ·çš„å€ç‡ä¸º16ï¼Œä½†æ˜¯å¯¹åº”è¾“å…¥çš„å›¾ç‰‡çš„å°ºå¯¸ä¸ä¸€å®šä¸º16çš„å€æ•°ï¼Œç”±äºpytorchçš„ä¸‹é‡‡æ ·æœºåˆ¶æ˜¯å‘ä¸‹å–æ•´çš„ã€‚äºæ˜¯å°±ä¼šå‡ºç°ä¸Šé‡‡æ ·ä¹‹åçš„å°ºå¯¸å°äºä¹‹å‰å›¾ç‰‡çš„å°ºå¯¸ï¼Œå¯¼è‡´æ²¡åŠæ³•è¿›è¡Œæ‹¼æ¥ã€‚ä¾‹å¦‚ï¼Œ7x7ä¸‹é‡‡æ ·åå˜æˆ3x3ï¼Œç„¶åä¸Šé‡‡æ ·å¯å¾—6x6ï¼Œä¸ºäº†æ»¡è¶³æ‹¼æ¥çš„è¦æ±‚ï¼Œå°±å°†6x6çš„è¿›è¡Œä¸€ä¸ªpaddingæ“ä½œå˜æˆ1x1. æœ€åï¼Œå°†è¾“å‡ºå±‚çš„å°±æ˜¯ä¸€ä¸ªä¸åŒçš„æ™®é€šçš„1x1å·ç§¯æ¥ä¿®æ”¹ä¸€ä¸‹ç©ºé—´ã€‚ 12345class OutConv(nn.Sequential): def __init__(self, in_channels, num_classes): super(OutConv, self).__init__( nn.Conv2d(in_channels, num_classes, kernel_size=1) ) æ„å»ºæ•´ä½“çš„ç½‘ç»œä¸‹é¢åŸºäºä¹‹å‰ç»™å‡ºçš„ç½‘ç»œå›¾æ¥æ„å»ºæ•´ä½“çš„U-Netç½‘ç»œå¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536class UNet(nn.Module): def __init__(self, in_channels: int = 1, num_classes: int = 2, bilinear: bool = True, base_c: int = 64): super(UNet, self).__init__() self.in_channels = in_channels self.num_classes = num_classes self.bilinear = bilinear self.in_conv = DoubleConv(in_channels, base_c) self.down1 = Down(base_c, base_c * 2) self.down2 = Down(base_c * 2, base_c * 4) self.down3 = Down(base_c * 4, base_c * 8) factor = 2 if bilinear else 1 self.down4 = Down(base_c * 8, base_c * 16 // factor) self.up1 = Up(base_c * 16, base_c * 8 // factor, bilinear) self.up2 = Up(base_c * 8, base_c * 4 // factor, bilinear) self.up3 = Up(base_c * 4, base_c * 2 // factor, bilinear) self.up4 = Up(base_c * 2, base_c, bilinear) self.out_conv = OutConv(base_c, num_classes) def forward(self, x: torch.Tensor) -&gt; Dict[str, torch.Tensor]: x1 = self.in_conv(x) x2 = self.down1(x1) x3 = self.down2(x2) x4 = self.down3(x3) x5 = self.down4(x4) x = self.up1(x5, x4) x = self.up2(x, x3) x = self.up3(x, x2) x = self.up4(x, x1) logits = self.out_conv(x) return {&quot;out&quot;: logits} å®éªŒè¡¨æ˜ï¼ŒåŒçº¿æ€§æ’å€¼å’Œè½¬ç½®å·ç§¯çš„æ•ˆæœå…¶å®æ˜¯äº§ä¸å¤šï¼Œä½†æ˜¯åŒçº¿æ€§æ’å€¼çš„è¿ç®—é€Ÿåº¦è¦æ¯”ä¹‹å‰è½¬ç½®å·ç§¯çš„é€Ÿåº¦è¦å¿«ã€‚ä½†æ˜¯ä½œè€…ä½¿ç”¨çš„æ•°æ®é›†æ˜¯ä¸€ä¸ªæ¯”è¾ƒå°çš„æ•°æ®é›†ï¼Œå¯èƒ½åœ¨å°çš„æ•°æ®é›†ä¸Šé¢çš„äºŒè€…çš„æ•ˆæœæ˜¯ä¸€ç›´çš„ï¼Œå¤§çš„æ•°æ®é›†ä¸Šè¿˜æœ‰å¾…æ£€éªŒã€‚ å…¶æ¬¡ï¼Œå°±æ˜¯åœ¨upå±‚çš„å‚æ•°ï¼Œæœ¬è´¨é—®é¢˜è¿˜æ˜¯ä¸Šé‡‡æ ·æ— æ³•è¿›è¡Œé€šé“å˜æ¢çš„é—®é¢˜ã€‚ è‡ªå®šä¹‰æ•°æ®é›† trainï¼šä»£è¡¨æ‰æ˜¯çš„æ•°æ®é›†æ˜¯è®­ç»ƒé›†è¿˜æ˜¯æµ‹è¯•é›†ï¼Œboolç±»å‹ï¼Œä¸ºTrueä»£è¡¨æ˜¯è®­ç»ƒé›†ï¼Œåä¹‹ä¸ºæµ‹è¯•é›†ã€‚ rootï¼šä»£è¡¨ç»™å‡ºçš„æ•°æ®é›†çš„ç›®å½•è·¯å¾„ï¼› tranformsï¼šä»£è¡¨å¯¹å›¾ç‰‡å¤„ç†çš„æ–¹å¼ï¼› åœ¨__init__é‡Œè¿›è¡Œäº†ä¸€ç³»åˆ—çš„è·¯å¾„çš„æ“ä½œï¼Œæ¥ç¡®å®šæ¥å¾—å‡ºå›¾ç‰‡çš„è·¯å¾„ï¼Œæ ‡ç­¾çš„è·¯å¾„ç­‰ã€‚ ä¹‹åæ£€æŸ¥å›¾ç‰‡çš„åç§°å’Œæ ¼å¼æ˜¯å¦æ­£ç¡®ã€‚ ä¸‹é¢ä¸º__geitem__æ“ä½œçš„å…·ä½“ä»£ç ï¼Œè¿™é‡Œå¼€å§‹æ—¶æˆ‘ä»¬å°†å›¾ç‰‡è½¬æ¢ä¸ºRGBå›¾ç‰‡ï¼Œå°†manualè½¬åŒ–ä¸ºç°åº¦å›¾ç‰‡ã€‚ è¿™é‡Œå’Œæˆ‘ä»¬çš„ä¹ æƒ¯ä¸åŒï¼Œä¸€èˆ¬æƒ…å†µä¸‹å¯¹åº”èƒŒæ™¯åŒºåŸŸä¸º0ï¼Œå¯¹äºå‰æ™¯åŒºåŸŸä¸º1ï¼Œå¯¹äºä¸æ„Ÿå…´è¶£çš„åŒºåŸŸä¸º255ã€‚ äºæ˜¯è¿™é‡Œå°†manualçš„å€¼é™¤ä»¥255ï¼Œç„¶åå°†roi_maskåŒºåŸŸé‡Œé¢çš„ä¸æ„Ÿå…´è¶£è®¾ä¸º255ï¼ŒèƒŒæ™¯å˜æˆ0ï¼Œæœ€åå’Œmanualè¿›è¡Œæ‹¼æ¥æœ€åå¾—åˆ°æˆ‘ä»¬çš„æ‰€è¦çš„maskã€‚ åé¢çš„éƒ¨åˆ†åŸºæœ¬ä¹Ÿå’ŒFCNæ¯”è¾ƒçš„ç±»ä¼¼ï¼Œæ­¤å¤„ä¸åœ¨èµ˜è¿°ã€‚ Dice LossDice similary coefficientä¸»è¦ç”¨äºåº¦é‡ä¸¤ä¸ªå‡ ä½•çš„ç›¸ä¼¼æ€§çš„ã€‚ Dice=\\dfrac{2|X\\bigcap Y|}{|X|+|Y|}åœ¨è¯­ä¹‰åˆ†å‰²ä»»åŠ¡é‡Œï¼ŒXå’ŒYçš„èŒƒå›´éƒ½æ˜¯$[0,1]$ä¹‹é—´çš„ã€‚å½“Xå’ŒYç›¸ä¼¼æ—¶ï¼Œ$Dice$çš„ä¸Šä¸‹å°±ç›¸ç­‰ç»“æœä¸º1ï¼Œåä¹‹åˆ†å­å°±0ï¼Œ$Dice$ å°±ç­‰äº0ã€‚ Dice\\ Loss = 1-\\dfrac {2|X\\bigcap Y|}{|X|+|Y|} ä½†æ˜¯ä¸Šè¿°çš„ç»“æ„ä»…ä»…é™äºåœ¨è®­ç»ƒçš„æ—¶å€™è¿™æ ·åšï¼Œåœ¨æµ‹è¯•è¿‡ç¨‹ä¸­æˆ‘ä»¬ä¸€èˆ¬é€‰æ‹©æ¦‚ç‡æœ€å¤§çš„æ ‡ç­¾ï¼Œå› æ­¤æµ‹è¯•è¿‡ç¨‹é¢„æµ‹å‡ºæ¯ä¸ªéƒ¨åˆ†çš„å€¼å°±æ˜¯0æˆ–è€…1ã€‚å¯¹äºä¸Šé¢çš„çŸ©é˜µï¼Œå°†å¤§äº0.5çš„é¢„æµ‹æˆä¸º1ï¼Œå°†å°äº0.5çš„é¢„æµ‹æˆä¸º0ã€‚ è®­ç»ƒé›†è®¡ç®—Diceå…·ä½“åœ°ä»£ç çš„å®ç°å¦‚ä¸‹ï¼š è¿™é‡Œåœ¨è®¡ç®—çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ˜¯é’ˆå¯¹æŸä¸ªç±»åˆ«æ ‡ç­¾æ¥å•ç‹¬è®¡ç®—ï¼Œä¹‹åå†æ¥æ±‚å¹³å‡å€¼çš„ã€‚åœ¨è®¡ç®—æŸä¸ªæ ‡ç­¾çš„å€¼çš„æ—¶å€™ï¼Œå°†è¿™ä¸ªæ ‡ç­¾çš„å€¼ææˆ1ï¼Œä¸æ˜¯è¿™ä¸ªæ ‡ç­¾çš„å€¼ä¸è®ºèƒŒæ™¯è¿˜æ˜¯ä¸å…³æ³¨çš„ç»Ÿç»Ÿç¤ºä¸º0ï¼Œä¹‹åæ¥å•ç‹¬è®¡ç®—æŸä¸ªæ ‡ç­¾çš„Disc Loss. å…·ä½“å®ç°çš„è¿‡ç¨‹è§æˆ‘ä»¬çš„build_targetçš„ä»£ç ï¼š å…¶ä¸­è¾“å…¥å‚æ•°ä¸­ignore_indexä¸ºä¸å…³æ³¨çš„æ•°æ®çš„ç´¢å¼•å€¼ï¼Œè¿™é‡Œçš„ignore_indexå°±ä¸º255. 12345678910111213def build_target(target: torch.Tensor, num_classes: int = 2, ignore_index: int = -100): &quot;&quot;&quot;build target for dice coefficient&quot;&quot;&quot; dice_target = target.clone() if ignore_index &gt;= 0: ignore_mask = torch.eq(target, ignore_index) dice_target[ignore_mask] = 0 # [N, H, W] -&gt; [N, H, W, C] dice_target = nn.functional.one_hot(dice_target, num_classes).float() dice_target[ignore_mask] = ignore_index else: dice_target = nn.functional.one_hot(dice_target, num_classes).float() return dice_target.permute(0, 3, 1, 2) é¦–å…ˆï¼Œå°†ä¸å…³å¿ƒçš„255å˜æˆ0ã€‚ ç„¶åï¼Œæ„å»ºä¸åŒç±»åˆ«å¯¹åº”çš„one-hotç¼–ç å€¼ï¼Œè¿™é‡Œç›´æ¥è°ƒç”¨nn.Functionalä»£ç æ¥ç›´æ¥äº§ç”Ÿçš„ç¼–ç å€¼ã€‚ ä¹‹åï¼Œå°†æˆ‘ä»¬ä¸å…³å¿ƒçš„éƒ¨åˆ†æ¢å¤æˆ255. æœ€åï¼Œç”±äºä¸Šè¿°æ“ä½œä¹‹åï¼Œå…¶ç»´åº¦å°±å˜æˆ$[N,H,W]$-&gt;$[N,H,W,C]$ï¼Œäºæ˜¯å°±éœ€è¦å°†ç»´åº¦è¿›è¡Œè°ƒæ•´dice_target.permute(0, 3, 1, 2) è®¡ç®—å·targetä¹‹åï¼Œå°†target,xå¯¼å…¥åˆ°dice_losså‡½æ•°ä¸­è®¡ç®—æŸå¤±ï¼š 12345def dice_loss(x: torch.Tensor, target: torch.Tensor, multiclass: bool = False, ignore_index: int = -100): # Dice loss (objective to minimize) between 0 and 1 x = nn.functional.softmax(x, dim=1) fn = multiclass_dice_coeff if multiclass else dice_coeff return 1 - fn(x, target, ignore_index=ignore_index) é¦–å…ˆï¼Œå¯¹è¾“å…¥çš„xåœ¨channelæ–¹å‘è®¡ç®—softmaxæ¥è®¡ç®—å…¶åˆ†åˆ°å„ä¸ªæ ‡ç­¾çš„æ¦‚ç‡ã€‚ ä¹‹åï¼Œmulticlassä¸ºTrueçš„è¯å°±è®¡ç®—multiclass_dice_coeffåä¹‹å°±ç›´æ¥è®¡ç®—dice_coeffã€‚ æœ€åï¼Œå¾—åˆ°discä¹‹åï¼Œå†ç”¨1-diceå°±æ˜¯å¯¹åº”çš„dice lossäº†ã€‚ 1234567def multiclass_dice_coeff(x: torch.Tensor, target: torch.Tensor, ignore_index: int = -100, epsilon=1e-6): &quot;&quot;&quot;Average of Dice coefficient for all classes&quot;&quot;&quot; dice = 0. for channel in range(x.shape[1]): dice += dice_coeff(x[:, channel, ...], target[:, channel, ...], ignore_index, epsilon) return dice / x.shape[1] è¿™é‡Œè®¡ç®—å…¶å®å°±æ˜¯åˆ†åˆ«è®¡ç®—æ¯ä¸ªç±»åˆ«diceï¼Œè€Œæ±‚å¹³å‡ã€‚ ä¸‹é¢å°±æ˜¯æ ¹æ®ä¹‹å‰çš„è®¡ç®—å…¬å¼æ¥è®¡ç®—ä¸€ä¸ªå›¾ç‰‡å¯¹åº”çš„diceå€¼ã€‚ 123456789101112131415161718192021def dice_coeff(x: torch.Tensor, target: torch.Tensor, ignore_index: int = -100, epsilon=1e-6): # Average of Dice coefficient for all batches, or for a single mask # è®¡ç®—ä¸€ä¸ªbatchä¸­æ‰€æœ‰å›¾ç‰‡æŸä¸ªç±»åˆ«çš„dice_coefficient d = 0. batch_size = x.shape[0] for i in range(batch_size): x_i = x[i].reshape(-1) t_i = target[i].reshape(-1) if ignore_index &gt;= 0: # æ‰¾å‡ºmaskä¸­ä¸ä¸ºignore_indexçš„åŒºåŸŸ roi_mask = torch.ne(t_i, ignore_index) x_i = x_i[roi_mask] t_i = t_i[roi_mask] inter = torch.dot(x_i, t_i) sets_sum = torch.sum(x_i) + torch.sum(t_i) if sets_sum == 0: sets_sum = 2 * inter d += (2 * inter + epsilon) / (sets_sum + epsilon) return d / batch_size è¿™é‡Œè¾“å…¥çš„æ•°æ®æ˜¯ä¸€ä¸ªbatchçš„ï¼Œå› æ­¤éœ€è¦é€šè¿‡ä¸€ä¸ªforå¾ªç¯æ¥è®²å•ç‹¬å–å‡ºå¯¹åº”æ¯ä¸€å¼ å›¾ç‰‡ã€‚ ç„¶åï¼Œæ‰¾å‡ºmaskä¸­ä¸ä¸ºignore_indexçš„åŒºåŸŸçš„ç´¢å¼•å€¼roi_maskã€‚ æœ€åï¼ŒæŒ‰ç…§ä¹‹å‰å…¬å¼é‡Œé¢çš„è®¡ç®—çš„æ–¹æ³•ï¼Œè®¡ç®—diceï¼Œå¹¶æŒ‰ç…§batch_sizeå–å¹³å‡å€¼ã€‚ éªŒè¯é›†è®¡ç®—Disc è¿™é‡Œè®²é¢„æµ‹å€¼åœ¨ç±»åˆ«çš„ç»´åº¦ä¸Šå–æœ€å¤§å€¼(pred.argmax(dim=1)ï¼Œè¿™é‡Œè®¡ç®—ä¹Ÿæ˜¯0å’Œ1æ¥è®¡ç®—çš„ï¼Œå¹¶ä¸æ˜¯åƒè®­ç»ƒé›†é‚£æ ·é€šè¿‡æ¦‚ç‡åˆ†æ•°æ¥è®¡ç®—çš„ã€‚ ç„¶åè¿›è¡Œone_hotç¼–ç ï¼Œå†è¿›è¡Œä¿®æ”¹ç»´åº¦æ’åˆ—çš„é¡ºåºpermute(0, 3, 1, 2)ã€‚ 1234567891011121314151617class DiceCoefficient(object): def __init__(self, num_classes: int = 2, ignore_index: int = -100): self.cumulative_dice = None self.num_classes = num_classes self.ignore_index = ignore_index self.count = None def update(self, pred, target): if self.cumulative_dice is None: self.cumulative_dice = torch.zeros(1, dtype=pred.dtype, device=pred.device) if self.count is None: self.count = torch.zeros(1, dtype=pred.dtype, device=pred.device) # compute the Dice score, ignoring background pred = F.one_hot(pred.argmax(dim=1), self.num_classes).permute(0, 3, 1, 2).float() dice_target = build_target(target, self.num_classes, self.ignore_index) self.cumulative_dice += multiclass_dice_coeff(pred[:, 1:], dice_target[:, 1:], ignore_index=self.ignore_index) self.count += 1 æ³¨æ„ï¼špred[:, 1:]çš„ç´¢å¼•æ˜¯ä»1å¼€å§‹å–çš„ï¼Œå› æ­¤è¿™é‡Œæ˜¯å¿½ç•¥äº†èƒŒæ™¯å€¼çš„ã€‚ æœ€åï¼Œé€šè¿‡æˆå‘˜å‡½æ•°æ¥è®¡ç®—diceçš„å‡å€¼ã€‚ 123456def value(self): if self.count == 0: return 0 else: return self.cumulative_dice / self.count # self.countä¸ºç´¯è®¡çš„æ ·æœ¬ä¸ªæ•°","link":"/2022/07/08/%E8%AF%AD%E4%B9%89%E5%88%86%E5%89%B2%E5%8F%8APytorch%E5%AE%9E%E7%8E%B0/U-Net%E7%BD%91%E7%BB%9C%E5%8F%8A%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0/"},{"title":"Meta Learningæ¦‚è¿°","text":"hljs.initHighlightingOnLoad(); åœ¨å·¥ä¸šç•Œç ”ç©¶æ¨¡å‹çš„å‚æ•°çš„æ—¶å€™ï¼Œä¸€èˆ¬éƒ½æ˜¯ä¸€ä¸ªæ¨¡å‹æ”¾åˆ°å‡ åƒå¼ GPUä¸Šæ¥è·‘ï¼Œä½†æ˜¯åœ¨å­¦ä¹ ä¸€ä¸ªäººæœ‰æ—¶å€™éƒ½åˆ†å¸ƒåˆ°ä¸€ä¸ªGPUï¼Œäºæ˜¯å°±ä¼šé€ æˆæˆ‘ä»¬åœ¨é€‰å‚æ•°çš„æ—¶å€™ç›¸å½“çš„å°å¿ƒè°¨æ…ã€‚ Machine learning çš„å›é¡¾ä¸‹é¢æˆ‘ä»¬æ¥é¦–å…ˆæ¥å¤ä¹ ä¸€ä¸‹æœºå™¨å­¦ä¹ çš„ä¸»è¦å†…å®¹ã€‚ å…¶æœ¬è´¨å°±æ˜¯é€šè¿‡å­¦ä¹ æ¥å­¦åˆ°ä¸€ä¸ªå¸¦æœ‰å¾ˆå¤šæœªçŸ¥å‚æ•°çš„å‡½æ•°ï¼Œç¬¬ä¸€æ­¥å®šä¹‰ç½‘ç»œæ¶æ„ï¼Œå…¶å®æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚ ç¬¬äºŒæ­¥å°±æ˜¯å®šä¹‰å¥½æŸå¤±å‡½æ•°ï¼Œå°±æ˜¯æˆ‘ä»¬é€šè¿‡å®šä¹‰å¥½çš„å‡½æ•°(ç½‘ç»œ)æ¥è¿›è¡Œé¢„æµ‹ï¼Œå®šä¹‰é¢„æµ‹æ˜¯å’ŒçœŸå®å€¼ä¹‹é—´çš„è·ç¦»ï¼Œæ±‚å’Œå³å¯ã€‚ ç¬¬ä¸‰æ­¥å°±æ˜¯ä½¿ç”¨æ¢¯åº¦ç­–ç•¥æ¥å­¦ä¹ ï¼Œå¾—åˆ°æœ€å¥½çš„ä¸€ä¸ªç½‘ç»œå‚æ•°ã€‚ Introduction of Meta Learning è¿™é‡Œçš„Learning algorithm æœ¬è´¨ä¸Šä¹Ÿæ˜¯å‡½æ•°ï¼Œè¾“å…¥ä¸ºè®­ç»ƒçš„æ ·æœ¬ï¼Œè¾“å‡ºä¸ºå¯¹åº”çš„æ¨¡å‹(å‡½æ•°)ã€‚ ä½†æ˜¯ç°é˜¶æ®µçš„æ¨¡å‹é‡Œé¢å­¦ä¹ çš„ç®—æ³•éƒ¨åˆ†ç›®å‰è¿˜æ˜¯äººæ‰‹å·¥é€‰å®šçš„ã€‚ äºæ˜¯æˆ‘ä»¬ç±»æ¯”ä¹‹å‰çš„æœºå™¨å­¦ä¹ çš„æ–¹æ³•æ¥å®šä¹‰meta learningçš„ä¸‰ä¸ªæ­¥éª¤ã€‚ Step1ï¼šå®šä¹‰å¯ä»¥å­¦ä¹ çš„å†…å®¹ è¿™é‡Œå¯ä»¥å­¦ä¹ çš„å†…å®¹åŒ…å«ï¼šæ¨¡å‹çš„æ¶æ„ã€è¶…å‚æ•°ã€å­¦ä¹ ç‡ç­‰ã€‚è¿™é‡Œå°†è¿™äº›å¯å­¦ä¹ çš„é¡¹å®šä¹‰ä¸º$\\phi$ (learning components)ã€‚ è¿™é‡Œçš„Componentså…¶å®ä¹Ÿæ˜¯äº”èŠ±å…«é—¨çš„ï¼Œè¿™é‡Œæè€å¸ˆçš„æ„æ€æ˜¯å¯¹äºè¿™é‡Œä¸åŒçš„componentï¼Œå¯¹äºçš„å­¦ä¹ æ–¹æ³•å¯èƒ½æ˜¯ä¸åŒçš„ã€‚ Step2ï¼šå®šä¹‰æŸå¤±å‡½æ•° æˆ‘ä»¬å–‚ç»™æ¨¡å‹çš„æ•°æ®æ˜¯ä¸åŒçš„è®­ç»ƒä»»åŠ¡ï¼Œæ¯”å¦‚è¦è®­ç»ƒä¸€ä¸ªäºŒå…ƒåˆ†ç±»å™¨ï¼Œå…¶ä¸»è¦çš„æ ·æœ¬å°±æ˜¯ä¸åŒçš„äºŒå…ƒåˆ†ç±»çš„ä»»åŠ¡ï¼Œå…¶ä¸­åŒ…æ‹¬æœ‰è‹¹æœå’Œæ©˜å­çš„åˆ†ç±»ã€è¿˜æœ‰è‡ªè¡Œè½¦å’Œæ±½è½¦çš„åˆ†ç±»ç­‰ã€‚ åœ¨æ¯ä¸ªä»»åŠ¡é‡Œé¢æœ‰åˆ†æˆï¼Œè®­ç»ƒé›†å’Œæµ‹è¯•é›†ã€‚ $\\theta^{1*}$ï¼šä»£è¡¨æ˜¯çš„æé«˜é€‚ç”¨$F_{\\phi}$ç®—æ³•ï¼Œåœ¨è®­ç»ƒé›†ä¸­å­¦ä¹ åˆ°çš„å‚æ•°ï¼› ä¹‹åæˆ‘ä»¬å°†è®­ç»ƒå‡ºçš„$f_{\\theta^{1}}$ç”¨åœ¨æµ‹è¯•é›†çš„æ ·æœ¬ï¼Œå¹¶å°†å…¶å’ŒçœŸå®çš„*Ground Truthè¿›è¡Œæ¯”å¯¹æ¥å¾—åˆ°åœ¨Task1 ä¸Šçš„æŸå¤±$l^1$ã€‚ åŸºäºTask2çš„è®­ç»ƒé›†æ•°æ®ï¼Œç®—æ³•$F_{\\phi}$åˆå¯ä»¥å¾—åˆ°ä¸€ä¸ªbikeå’Œcarçš„åˆ†ç±»å™¨ï¼Œä¹‹ååœ¨æµ‹è¯•æ•°æ®çš„æ£€éªŒä¸‹ï¼Œå¾—åˆ°å¯¹åº”çš„æŸå¤±$l^2$ æœ€åï¼Œå°†$F_\\phi$åº”ç”¨åˆ°ä¸åŒçš„ä»»åŠ¡ä¸Šé¢å¯å¾—åˆ°æ•´ä½“çš„æŸå¤±å¦‚ä¸‹ï¼š L(\\phi)=\\sum_{n=1}^{N} l^nå…¶ä¸­Næ˜¯è®­ç»ƒä»»åŠ¡çš„ä¸ªæ•°ã€‚ åœ¨æœºå™¨å­¦ä¹ çš„é—®é¢˜ä¸­ï¼Œæˆ‘ä»¬è®¡ç®—æŸå¤±æ˜¯é€šè¿‡è®­ç»ƒé›†æ¥è®¡ç®—çš„ï¼Œè€Œåœ¨å…ƒå­¦ä¹ é‡Œé¢ï¼Œä¸€ä¸ªå¾ˆå¤§çš„ä¸åŒå°±æ˜¯ï¼Œå…¶æŸå¤±å‡½æ•°æ˜¯ä½¿ç”¨æµ‹è¯•èµ„æ–™æ¥è®¡ç®—çš„ã€‚ Step3ï¼šä¼˜åŒ–å‚æ•° ä¼˜åŒ–æ—¶å°±æ˜¯å¯¹æŸå¤±å‡½æ•°è®¡ç®—æ¢¯åº¦ï¼Œä½†æ˜¯å¦‚æœæŸå¤±å‡½æ•°æ—¶ä¸å¯å¯¼ï¼Œäºæ˜¯å°±æ˜¯ä½¿ç”¨å¼ºåŒ–å­¦ä¹ æˆ–è€…é—ä¼ è¿›åŒ–ç®—æ³•æ¥å¼ºè¡Œtrainã€‚ å…¶æ•´ä½“çš„æ¶æ„å¦‚ä¸‹æ‰€ç¤ºï¼š è¿™é‡Œåˆ†æˆè®­ç»ƒä»»åŠ¡å’Œæµ‹è¯•ä»»åŠ¡ï¼Œæ¯ä¸€ç§ä»»åŠ¡æœ‰åˆ†æˆè®­ç»ƒèµ„æ–™å’Œæµ‹è¯•èµ„æ–™ä¸¤ä¸ªéƒ¨åˆ†ã€‚ è®­ç»ƒçš„è¿‡ç¨‹ä¸­ï¼ŒåŸºäºTraining Taskçš„train set å¾—åˆ°åˆ†ç±»å™¨ï¼Œç„¶ååŸºäºTraining Taskçš„test setå¾—åˆ°æŸå¤±å‡½æ•°ã€‚é€šè¿‡å­¦ä¹ å¾—åˆ°å­¦ä¹ ç®—æ³• $F_{\\phi^*}$ æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨Testing Taské‡Œé¢train setï¼Œä»£å…¥åˆ°å­¦ä¹ ç®—æ³•é‡Œå¾—åˆ°ä¸€ä¸ªåˆ†ç±»å™¨ï¼Œä¹‹åå°†Testing Taské‡Œé¢test setä»£å…¥åˆ†ç¦»å™¨ä¸­ï¼Œè§‚å¯Ÿæ•ˆæœã€‚ æµ‹è¯•ä»»åŠ¡æ˜¯æˆ‘ä»¬çœŸæ­£å…³å¿ƒçš„ï¼Œéœ€è¦æœ‰å¥½ç»“æœçš„ä»»åŠ¡ï¼Œè€Œè®­ç»ƒä»»åŠ¡ä¸å¯ä»¥å’Œæµ‹è¯•ä»»åŠ¡ç›¸åŒæˆ–å¾ˆç›¸å…³ã€‚ å°æ ·æœ¬å­¦ä¹ å…¶å®æ˜¯åŸºäºå…ƒå­¦ä¹ çš„ï¼Œé€šè¿‡å…ƒå­¦ä¹ æ¥ä¼˜åŒ–å¾—å‡ºä¸€ä¸ªå°æ ·æœ¬çš„åˆ†ç±»å™¨æˆ–å›å½’å™¨ã€‚ MLå’ŒMeta learningçš„åŒºåˆ« é¦–å…ˆï¼Œé’ˆå¯¹å­¦ä¹ çš„å†…å®¹æ¥çœ‹ï¼ŒMLæ˜¯å­¦ä¹ ä¸€ä¸ªå‡½æ•°ï¼Œè€ŒMeta Learningå­¦ä¹ çš„æ˜¯ä¸€ç§è·å¾—å‡½æ•°çš„ç­–ç•¥ã€‚ ä¹‹åï¼Œé’ˆå¯¹è®­ç»ƒçš„æ•°æ®ï¼ŒMLé‡Œé¢çš„è®­ç»ƒæ•°æ®æ˜¯ä¸€ä¸ªä»»åŠ¡çš„è®­ç»ƒé›†ï¼Œè€ŒMeta Learningé‡Œé¢çš„è®­ç»ƒé›†æ•°å¤šä¸ªä»»åŠ¡é‡Œçš„è®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼Œè¿™é‡Œä¸ºäº†æ–¹ä¾¿åŒºåˆ†æˆ‘ä»¬å°†è®­ç»ƒé›†éƒ¨åˆ†å«åšSupport set å°†æµ‹è¯•é›†éƒ¨åˆ†å«åšQuery set. è¿™é‡Œå°†Meta Learningå«åšAcross-task Training(è·¨ä»»åŠ¡å­¦ä¹ )ï¼Œå°†MLå«åšWithin-task Trainingã€‚ ä¹‹åï¼Œåœ¨æŸå¤±å‡½æ•°æ–¹é¢ï¼ŒMLæ˜¯ä¸€ä¸ªä»»åŠ¡è®¡ç®—å‡ºæ¥çš„ï¼Œä½†æ˜¯Meta-Learningæ˜¯ä¸€ä¸‹å­å¤šä¸ªä»»åŠ¡åœ¨æµ‹è¯•é›†ä¸Šè®¡ç®—å‡ºæ¥çš„ã€‚ æœ€åï¼Œåœ¨Learning to initializeçš„æ–‡ç« é‡Œé¢å°†Across-task training ç§°ä¸ºouter Loopå°†Within-task Trainingå«åšinner Loopã€‚ ä¸Šè¿°è®²çš„éƒ½æ˜¯äºŒè€…çš„å·®åˆ«ï¼Œä½†æ˜¯äºŒè€…ä¹Ÿæœ‰ç›¸åŒçš„åœ°æ–¹ï¼Œæ¯”å¦‚éƒ½ä¼šå‡ºæ¥overfittingçš„æƒ…å†µã€‚ è€Œä¸”è¿™é‡ŒMeta Learningä¹Ÿæ˜¯éœ€è¦è°ƒæ•´å‚æ•°çš„ã€‚åŒæ—¶Meta Learningä¹Ÿæ˜¯éœ€è¦Development task. ä¸€èˆ¬çš„æœºå™¨å­¦ä¹ çš„æ–¹æ³•æ˜¯éœ€è¦Development taskï¼Œå…¶å®ä¹Ÿå°±æ˜¯å«åšVal taskï¼Œä¸€èˆ¬æ˜¯ä¸å…è®¸åœ¨test setæ˜¯ç›´æ¥è°ƒå‚æ•°çš„ï¼Œé‚£æ˜¯tickã€‚ What is learnable in a learning algorithm?å­¦ä¹ åˆå§‹å€¼Gradient Descent æ¨¡å‹å¯ä»¥å­¦ä¹ çš„å‚æ•°é‡Œé¢ï¼Œé¦–å…ˆè¦çœ‹çš„å°±æ˜¯ $\\theta^0$ ï¼Œå¦‚ä½•æ‰¾åˆ°ä¸€ä¸ªå¥½çš„åˆå§‹åŒ–å‚æ•°æ¥åŠ å¿«æ¨¡å‹çš„æ”¶æ•›ã€‚ ç›®å‰æœ€ç»å…¸çš„å­¦ä¹ åˆå§‹åŒ–å‚æ•°çš„æ–¹æ³•å°±æ˜¯Model Agnostic Meta Learning (MAML) ã€‚ ä½†æ˜¯è®­ç»ƒè¿‡ç¨‹ä¸­å…¶å®ä¹Ÿæ˜¯éœ€è¦è°ƒå‚å’Œè®¾ç½®éšæœºç§å­çš„ã€‚ è‡ªç›‘ç£å­¦ä¹ é‡Œé¢ï¼Œå¯¹äºæ²¡æœ‰ç»™æ ‡ç­¾çš„æƒ…å†µæ¥è®²ï¼Œä¸€èˆ¬æœ‰ä¸¤ç§è¦è§£å†³æ–¹æ³•ï¼Œä¸€ç§æ˜¯ç±»ä¼¼äºBERTé‚£æ ·ï¼Œåšå¡«ç©ºé¢˜ä¸€æ ·çš„æ–¹æ³•æ¥è§£å†³ï¼Œå…¶æ¬¡å°±æ˜¯ä½¿ç”¨å¯¹æ¯”å­¦ä¹ å’Œé®ç›–çš„æ–¹æ³•MAEï¼Œæ¥è§£å†³ã€‚ è¿™é‡Œè®²åˆ°é¢„è®­ç»ƒçš„ç›®çš„æ˜¯ï¼šå› ä¸ºæˆ‘ä»¬Meta-Learningçš„ç›®çš„å…¶å®ä¼˜åŒ–åˆå€¼ï¼Œè€Œé€šè¿‡é¢„è®­ç»ƒçš„å‚æ•°å…¶å®å°±æ˜¯å˜ç›¸çš„å¾—åˆ°ä¸€ç»„å¥½çš„åˆå§‹å€¼æ¥åŠ å¿«æ”¶æ•›ã€‚ ä½†æ˜¯ä¸¤è€…ä¹‹å‰ä¹Ÿæœ‰ä¸€äº›åŒºåˆ«ï¼Œå› ä¸ºè‡ªç›‘ç£çš„å­¦ä¹ æ˜¯ä¸ä½¿ç”¨åˆ°æ ‡ç­¾æ•°æ®çš„ï¼Œè€ŒMeta Learningåœ¨è®­ç»ƒæ˜¯æ—¶å€™éƒ½è¦è¿›è¡Œä½¿ç”¨ã€‚ å½“Self-supervised learningè¿˜æ²¡æœ‰è¢«æ­£å¼çš„æå‡ºæ¥çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ‰€è®¤ä¸ºçš„é¢„è®­ç»ƒå°±æ˜¯ä»å…¶ä»–çš„ä»»åŠ¡é‡Œè®­ç»ƒå‡ºä¸€ç§å‚æ•°ï¼Œä½œä¸ºåˆå§‹å€¼æ¥è¿›è¡Œé¢„è®­ç»ƒï¼Œè¿™ç§æ–¹æ³•ä¹Ÿç§°ä¸ºå¤šä»»åŠ¡å­¦ä¹ ã€‚è¿™ä¸ªæ€è·¯å…¶å®å’ŒMeta Learningå¾ˆåƒã€‚Domain adaptation or transfer learning. MAMLä¸ºä»€ä¹ˆå¥½ï¼Ÿ è¿™é‡Œæˆ‘ä»¬æ€è€ƒä¸ºä»€ä¹ˆMAMLçš„æ•ˆæœä¼šå¦‚æ­¤çš„å¥½ï¼ŒåŸå› æ˜¯MAMLæ˜¯Feature Renseçš„ï¼Œå…¶Outer loopæ˜¯å°½å¯èƒ½çš„å»æ¥è¿‘æˆ‘ä»¬çš„æœ€åçš„ç»“æœçš„ï¼Œä¹‹åinner loopæ˜¯å¾ˆå®¹æ˜“å°±å¾—åˆ°å„è‡ªçš„æœ€å¤§å€¼çš„ã€‚ åœ¨è¿™ä¸ªpaperé‡Œé¢æœ‰å¦å¤–ä¸€ç§æ–¹æ³•â€”â€”ANILã€‚ æ›´å¤šçš„ç»†èŠ‚å’ŒMeta Learningçš„å˜å½¢ï¼Œå‚è€ƒä¸‹é¢çš„å‡ ä¸ªè§†é¢‘ã€‚ å­¦ä¹ learning rateå’Œä¼˜åŒ–çš„æ¶æ„ä¸Šé¢è®¨è®ºçš„å…¶å®å¯¹åˆå§‹çŠ¶æ€å°çš„å‚æ•°è¿›è¡Œå­¦ä¹ ï¼Œä¸‹é¢å°†è¦è®¨è®ºçš„æ˜¯å¦‚ä½•å­¦ä¹ å­¦ä¹ ç‡çš„å‚æ•°ã€‚ è¿™é‡Œåœ¨å¾ˆæ—©ä¹‹å‰å°±æœ‰ä¸€äº›å…³äºç›¸å…³çš„ç ”ç©¶äº†ï¼Œè¿™é‡Œå°†ä¼˜åŒ–å™¨å’Œå­¦ä¹ ç‡ä½œä¸ºå­¦ä¹ å¯¹è±¡ï¼Œåœ¨è®­ç»ƒé›†ä¸Šè¿›è¡Œtrainï¼Œä¹‹ååœ¨æµ‹è¯•é›†ä¸Šè¿›è¡Œæµ‹è¯•æ“ä½œã€‚ä½†æ˜¯å½“æ¿€æ´»å‡½æ•°æ¢æˆRELUä¹‹åå°±ä¼šå‡ºç°å´©æ‰ã€‚ å­¦ä¹ ä¼˜åŒ–çš„ç½‘ç»œæ¶æ„å½“å­¦ä¹ çš„ç›®æ ‡å˜æˆNetworkæ¶æ„çš„è¯ï¼Œå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„Network Architecture Search(NAS)ã€‚ ä½†æ˜¯è¿™é‡Œçš„æ¶æ„çš„é€‰æ‹©æ˜¯æ— æ³•è¿›è¡Œæ±‚å¯¼çš„ï¼Œäºæ˜¯å°±æ˜¯ä½¿ç”¨å¼ºåŒ–å­¦ä¹ æ¥å¼ºè¡Œåšï¼Œå¼ºè¡Œä¼˜åŒ–ã€‚ é™¤äº†å¯ä»¥é€‰æ‹©å¼ºåŒ–å­¦ä¹ çš„æ–¹æ³•ï¼Œè¿™é‡Œå…¶å®ä¹Ÿå¯ä»¥ä½¿ç”¨è¿›åŒ–ç®—æ³•ã€‚ ä½†æ˜¯å…¶å®æˆ‘ä»¬ä¹Ÿæ˜¯å¯ä»¥å¯¹æˆ‘ä»¬æ¨¡å‹è¿›è¡Œå¾®åˆ†çš„ï¼Œæ¯”å¦‚è¿™é‡Œä½¿ç”¨çš„DARTS. å­¦ä¹ æ•°æ®å¢å¼ºçš„æ–¹æ³• å…·ä½“åœ°å¯ä»¥å‚è€ƒä¸Šé¢çš„æ–‡çŒ®ã€‚ ç»™ä¸åŒçš„æ•°æ®èµ‹äºˆä¸åŒçš„æƒé‡ï¼Œå› ä¸ºæœ‰çš„æ—¶å€™å¦‚ä½¿ç”¨SVMæ¨¡å‹æ—¶ï¼Œè¿™ä¸ªè¶Šæ¥è¿‘marginçš„å€¼å¯¹åˆ†ç±»çš„è´¡çŒ®æ„ˆå¤§ï¼Œå› æ­¤å…¶æƒé‡åº”è¯¥è¶Šæ¥è¶Šå¤§ã€‚ä½†æ˜¯æœ‰çš„æ—¶å€™æ¥è¿‘marginçš„å€¼å¯èƒ½æ˜¯å™ªå£°æ•°æ®ï¼Œå¯ä»¥å¿½ç•¥çš„é—®é¢˜ï¼Œå°†å…¶æƒé‡ç¼©å°ã€‚å› æ­¤è¿™é‡Œå¯ä»¥é€šè¿‡å­¦ä¹ æ¥è¿›ä¸€æ­¥çš„å­¦ä¹ è¿™äº›æƒé‡çš„åˆ†å¸ƒã€‚ Beyond Gradient Descentä¸ä½¿ç”¨æ¢¯åº¦ä¸‹é™çš„Meta-Learningï¼Œäºæ˜¯æœºå™¨å°±å‘æ˜äº†æ–°çš„ç®—æ³•ã€‚ åˆ°ç›®å‰ä¸ºæ­¢ï¼Œå…¶å®å°±æ˜¯å°†è®­ç»ƒå’Œæµ‹è¯•åˆ†æˆäº†ä¸¤ä¸ªé˜¶æ®µã€‚ä½†æ˜¯metric-basedçš„æ–¹æ³•æ˜¯å°±æ˜¯å°†è®­ç»ƒå’Œæµ‹è¯•è¿‡ç¨‹åˆåœ¨ä¸€èµ·æ¥è¿›è¡Œè®­ç»ƒã€‚ ApplicationsFew-shot Image Classification è¿™é‡Œçš„N-ways K-shot classificationçš„ä¸»è¦çš„å«ä¹‰æ˜¯æœ‰Nä¸ªä»»åŠ¡ï¼Œæ¯ä¸ªä»»åŠ¡æœ‰Kä¸ªç±»åˆ«ã€‚ åœ¨Meta learningé‡Œé¢ï¼Œå¦‚ä½•å¿«é€Ÿæ‰¾åˆ°è¿™ä¹ˆå¤šçš„ä»»åŠ¡å‘¢ï¼Ÿè¿™é‡Œä½¿ç”¨çš„æ˜¯Omniglotæ•°æ®æ¥è¿›è¡Œå¯»æ‰¾ã€‚ è¿™é‡Œå°†ä¸€ä¸ªæ–‡å­—è®©20ä¸ªäººæ¥è¿›è¡Œä¹¦å†™ã€‚ ä»é‡Œé¢é€‰å‡ºæ¥20ä¸ªæ–‡å­—ï¼Œäºæ˜¯å°±å¾—åˆ°ä¸€ä¸ª20ways 1shotã€‚æµ‹è¯•æ•°æ®å°±æ˜¯è¿™20ä¸ªæ–‡å­—é‡Œé¢å…¶ä¸­çš„ä¸€ä¸ªã€‚ N ways K classï¼šå°±æ˜¯åœ¨è®­ç»ƒé›†é€‰æ‹©Nä¸ªæ–‡å­—ï¼Œæ¯ä¸ªæ–‡å­—å–Kçš„ä¾‹å­ï¼Œåœ¨æµ‹è¯•é›†é€‰æ‹©Nä¸ªæ–‡å­—ï¼Œæ¯ä¸ªæ–‡å­—å–Kçš„ä¾‹å­ã€‚","link":"/2022/07/12/%E9%AB%98%E7%BA%A7%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Meta-Learning%E6%A6%82%E8%BF%B0/"},{"title":"Deep Learning on Point Clouds for 3D Scene Understanding","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦è·ŸéšPointNetå’ŒPointNet++çš„ä½œè€…æ¥ç†è§£å¦‚ä½•å¤„ç†ç‚¹å…ƒçš„æ•°æ®ï¼Œå¹¶åº”ç”¨PointNetåˆ°3Dç›®æ ‡æ£€æµ‹å’Œåœºæ™¯ç†è§£ä¸Šã€‚ 3D Representation : Point Cloudä¸‰ç»´æ•°æ®çš„ä¸»è¦çš„è¡¨å¾æ–¹æ³•æœ‰ä¸€ä¸‹çš„å‡ ç§ï¼Œä¾æ¬¡æ˜¯ç‚¹äº‘(ä¸»è¦æ˜¯é€šè¿‡ä¼ æ„Ÿå™¨ç›´æ¥è·å–çš„ä¸‰ç»´æ•°æ®ï¼Œç›¸å½“äºä¸€ç§åŸå§‹çš„æ•°æ®)ã€ç½‘æ ¼(ä¸»è¦æ˜¯ç”¨åœ¨è®¡ç®—æœºå›¾å½¢å­¦é‡Œé¢ï¼Œæ˜¯ä¸€ç§å¾ˆé€‚åˆå»ºæ¨¡å’Œæ¸²æŸ“çš„æ ¼å¼)ã€ä½“ç´ æˆ–æ …æ ¼(ä¸»è¦æ˜¯é€šè¿‡æ¯ä¸€ä¸ªå°çš„å•å…ƒæ¥ä»£è¡¨æ˜¯å¦æœ‰å†…å®¹ï¼Œå…¶ä¸­çš„å…«å‰æ ‘æ˜¯ä¸€ä¸ªéå¸¸èŠ‚çœç©ºé—´çš„å­˜å‚¨æ–¹å¼)ã€RGBD(ä¸»è¦ä¹Ÿç”¨äºå¯è§†åŒ–çš„éƒ¨åˆ†ï¼Œä½¿ç”¨å¤šä¸ªå›¾ç‰‡çš„è¡¨è¾¾æ›´åŠ ç›´è§‚ã€‚) åœ¨ä¸Šè¿°å½¢å¼ä¸­ï¼Œä½¿ç”¨ç‚¹äº‘è¿›è¡Œä¼ æ„Ÿæ˜¯æœ€å¥½çš„ï¼š ç‚¹å…ƒæ˜¯ä¼ æ„Ÿå™¨å¾—åˆ°çš„åŸå§‹çš„æ•°æ®ï¼Œæ–¹ä¾¿å¤„ç†ï¼› ç‚¹å…ƒçš„è¡¨è¾¾å½¢å¼æ¯”è¾ƒçš„ç®€å•ï¼Œç›¸æ¯”å¦å¤–çš„ä¸‰ä¸ªå½¢å¼è¿˜æœ‰é€‰æ‹©ä½“ç´ çš„å¤§å°æˆ–è€…é€‰æ‹©ç½‘æ ¼é¢ç‰‡çš„å½¢å¼ã€‚ Previous Workåœ¨æ—©äº›æ—¶å€™æ˜¯é€šè¿‡äººå·¥çš„æ–¹å¼æ¥è®¾è®¡ç‚¹äº‘çš„ç‰¹å¾ï¼Œæ¥è¿›è¡Œå­¦ä¹ çš„ã€‚ä½†æ˜¯è¿™äº›ç‰¹å¾æ˜¯åŸºäºäº†å…·ä½“çš„é—®é¢˜è¿›è¡Œçš„å‡è®¾ï¼Œæ²¡åŠæ³•å°†å…¶æ¨å¹¿ä¸è¿›è¡Œç»†èŠ‚ä¸Šçš„ä¼˜åŒ–ã€‚ æ—©æœŸçš„å·¥ä½œå°±æ˜¯ç±»æ¯”äº†CNNï¼Œå…ˆå°†ç‚¹äº‘è¿›è¡Œä½“ç´ ä¸Šçš„æ‰©å±•ï¼Œå› ä¸ºä½“ç´ çš„å®é™…æ¯”è¾ƒçš„è§„æ•´ï¼Œç„¶ååˆ©ç”¨3D-CNNè¿›è¡Œå­¦ä¹ ã€‚ ä½†æ˜¯è¿™æ ·åšæœ‰ä¸€ä¸ªå¾ˆå¤§çš„ç¼ºç‚¹ï¼š é¦–å…ˆï¼Œå…¶æ—¶é—´ä¸Šçš„å¤æ‚åº¦å’Œç©ºé—´ä¸Šçš„å¤æ‚åº¦éƒ½æ˜¯å¾ˆå¤§çš„$O(N^3)$. å…¶æ¬¡ï¼Œå¦‚æœéœ€è¦å¾ˆé«˜çš„ç²¾åº¦ï¼Œå°±éœ€è¦å°†è¿™ä¸ªä½“ç´ çš„ç²¾åº¦è°ƒæ•´çš„å¾ˆé«˜ï¼Œå¯¼è‡´è®¡ç®—ååˆ†çš„ç¼“æ…¢ã€‚ æœ€åï¼Œä½“ç´ çš„æ‰«æä»…ä»…åœç•™åœ¨è¡¨é¢ï¼Œå†…éƒ¨è¿˜æ˜¯ç©ºå¿ƒçš„ï¼Œä¼šå¯¼è‡´è¯†åˆ«ä¸Šå‡ºé”™ã€‚ Projectionï¼šåæ¥æœ‰äººé€‚åº”äºŒç»´æŠ•å½±çš„æ–¹æ³•è¿›è¡Œè¯†åˆ«ï¼Œä½†æ˜¯å¦‚æœé€‰æ‹©çš„è§’åº¦ä¸å¥½ï¼Œå…¶è®­ç»ƒçš„æ•ˆæœä¹Ÿå°±ä¸ä½³ã€‚ Featrue extractionï¼šè¿™ä¸ªæ–¹æ³•æ˜¯å…ˆé€šè¿‡æ‰‹å·¥çš„æ–¹æ³•æ¥è¿›è¡Œæå–ï¼Œä¹‹åé€šè¿‡å…¨è¿æ¥çš„æ–¹æ³•è¯†åˆ«ï¼Œä½†æ˜¯å…¶æ•ˆæœä¹Ÿä¸æ˜¯å¾ˆå¥½ã€‚ å¦‚ä½•ç›´æ¥åœ¨ç‚¹äº‘æ˜¯å®ç°ç‰¹å¾çš„æå–ï¼Ÿ PointNet è¿™é‡ŒPointNetå°±æ˜¯å®ç°äº†ç«¯å¯¹ç«¯çš„ç‰¹å¾æå–ï¼Œè¾“å…¥ç‚¹äº‘çš„æ•°æ®ï¼Œç„¶åè‡ªåŠ¨çš„ä¸ºæˆ‘ä»¬è¿›è¡Œåˆ†ç±»åˆ†å‰²å’Œè¯­ä¹‰çš„ç†è§£ã€‚ å°±æ˜¯åˆ©ç”¨ä¸€ä¸ªåŒä¸€çš„æ¡†æ¶æ¥è¿›è¡Œä¸Šæ¸¸çš„ç‰¹å¾çš„æå–ï¼Œæ–¹ä¾¿é€‚åº”ä¸åŒçš„ä¸‹æ¸¸ä»»åŠ¡ã€‚ æ¨¡å‹çš„è®¾è®¡éµå®ˆä¸¤ä¸ªç‚¹äº‘çš„ä¸»è¦å½¢å¼æ€§è´¨ï¼š ä½ç½®çš„ä¸æ•æ„Ÿçš„æ€§(permutation Invariance)ï¼šç‚¹äº‘å…¶å®æ˜¯ä¸€ä¸ªæ— åºçš„é›†åˆã€‚ å¹³ç§»ä¸å˜æ€§(Transformation Invariance)ï¼šç‚¹äº‘çš„é€‰è£…æœ¬è´¨ä¸Šä¸å½±å“åˆ†ç±»çš„ç»“æœã€‚ permutation Invariance å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå¦‚æœå°†ç‚¹äº‘çš„ä¿¡æ¯éƒ½å­˜å‚¨åœ¨ä¸€ä¸ªçŸ©é˜µé‡Œé¢ï¼Œé‚£ä¹ˆå°†å…¶ä½ç½®è¿›è¡Œå˜æ¢ä¹‹åï¼Œè¿™ä¸ªçŸ©é˜µä¾ç„¶è¡¨ç¤ºçš„æ˜¯åŒä¸€ç‚¹äº‘ã€‚ é‚£å¦‚ä½•æ¥é€šè¿‡ä¸€ä¸ªå°†å…¶$n!$ä¸ªçŸ©é˜µç»Ÿä¸€ç¼–ç ï¼Ÿ è¿™é‡Œé€‚åº”çš„æ˜¯å¯¹ç§°å‡½æ•°ï¼Œå› æ­¤å‡½æ•°å…·æœ‰å¾ˆå¥½çš„ä¸å˜æ€§ã€‚ ä½†æ˜¯è¿™æ ·å¤„ç†åˆäº§ç”Ÿäº†æ–°çš„é—®é¢˜â€”â€”å¦‚ä½•ç”¨ç¥ç»ç½‘ç»œæ¥æ„é€ ä¸Šè¿°çš„å¯¹ç§°å‡½æ•°ã€‚ æ–¹æ³•1ï¼šç›´æ¥å¯¹ç‚¹äº‘çš„ä¸‰ç»´æ•°æ®çš„è¿›è¡Œå–æœ€å€¼çš„æ“ä½œï¼Œä½†æ˜¯è¿™æ ·å¤ªè¿‡ç®€å•ç²—æš´äº†ï¼Œä¼šæŸå¤±å¾ˆå¤šæœ‰ç”¨çš„ä¿¡æ¯ã€‚ æ–¹æ³•2ï¼šå…ˆå°†ä¸‰ç»´æ•°æ®è½¬æ¢åˆ°é«˜ç»´ç©ºé—´ä¸Šï¼Œå…¶å®å°±æ˜¯å°†channel=3-&gt;1024ï¼Œè¿™æ ·é«˜ç»´ç©ºé—´çš„ä¿¡æ¯æ˜¯å†—ä½™çš„ï¼Œä¹‹åè¿›è¡Œå–æœ€å€¼çš„æ“ä½œï¼Œä¸¢å¤±æ‰ä¸€äº›å†—ä½™çš„ä¿¡æ¯ï¼Œè¿™æ ·å°±å‡å°‘çš„ä¿¡æ¯çš„ä¸¢å¤±ã€‚ è€Œä¸”ä¸€ç»„å¤åˆå‡½æ•°ä¸­ï¼Œä¸»è¦ä¸€ä¸ªæ˜¯å¯¹ç§°çš„ï¼Œæ•´ä¸ªå‡½æ•°å°±ä¹Ÿå˜æˆå¯¹ç§°çš„å‡½æ•°ã€‚ å®é™…ä½¿ç”¨æ—¶ï¼Œå°†ç¼–ç å™¨$h$é€‰æ‹©äº†MLPï¼Œå°†$g$ä½¿ç”¨äº†maxpoolingï¼Œå°†ç¼–ç å™¨$\\gamma$é€‰ç”¨äº†MLPã€‚ ä¸‹é¢æ€è€ƒçš„è¿™ä¸ªç‚¹äº‘ç½‘ç»œï¼Œå³ä½¿ç”¨ç¥ç»ç½‘ç»œå¯å¦å®Œå…¨æ¶µç›–æ‰€æœ‰çš„å¯¹ç§°å‡½æ•°ï¼ŒäºŒè€…ä¹‹é—´æ˜¯ä»€ä¹ˆæ ·çš„å…³ç³»ã€‚ åœ¨ç†è®ºä¸Šï¼Œå¦‚æœå‡½æ•°åœ¨Hausdorffç©ºé—´ä¸Šæ˜¯è¿ç»­çš„è¯ï¼Œé€šè¿‡å¢åŠ ç¥ç»ç½‘ç»œçš„å®½åº¦å’Œå¹¿åº¦å³å¯å®ç°æ‹Ÿåˆæ‰€æœ‰çš„å‡½æ•°ã€‚ å®é™…æ“ä½œçš„éš¾åº¦ä¸æï¼Œå°±ç†è®ºè€Œè¨€æ˜¯å…¶æ•ˆæœæ˜¯éå¸¸å¥½çš„ã€‚ Transformation Invariance è¿™é‡ŒT-Netçš„ä»»åŠ¡å°±æ˜¯ç”Ÿæˆå¯¹åº”çš„å˜æ¢çš„å‚æ•°ï¼Œä¹‹åè¾“å…¥åˆ°Transformæ¨¡å‹é‡Œé¢ï¼Œå°†æ•´ä½“çš„ç‚¹äº‘å˜æˆä¸€ä¸ªç»Ÿä¸€çš„ä½å§¿ï¼Œè¿™æ ·çš„è¯å°±æ»¡è¶³ä¹‹å‰çš„å¹³ç§»ä¸å˜æ€§ã€‚ Transformer å…¶å®æ˜¯å¯ä»¥ä½¿ç”¨ä¸€ä¸ªçŸ©é˜µçš„ä¹˜æ³•æ¥ç¡®å®šçš„ã€‚è¿™é‡Œæ˜¯å°†ç‚¹äº‘æ•´ä½“è¿›è¡Œæ—‹è½¬æ“ä½œï¼Œå…¶å®ä¹Ÿå¯ä»¥å¯¹ç‚¹äº‘è¿›è¡Œç¼–ç æ“ä½œï¼Œä¹‹åå¯¹ç¼–ç ä¹‹åçš„ç‰¹å¾è¿›è¡Œæ—‹è½¬æ“ä½œã€‚ è¿™é‡Œæˆ‘ä»¬å¯ä»¥å°†å¯¹å˜æ¢çŸ©é˜µè¿›è¡Œæ­£åˆ™åŒ–ï¼Œä½¿å¾—çŸ©é˜µå°½å¯èƒ½æ¥è¿‘äºä¸€ä¸ªæ­£äº¤çš„çŸ©é˜µã€‚ PointNet ç½‘ç»œ ä¸Šå›¾ä¸ºç‚¹äº‘çš„åˆ†ç±»ç½‘ç»œï¼Œå°±æ˜¯å°†é¦–å…ˆå°†ç‚¹äº‘è¿›è¡Œå…¨å±€çš„æ—‹è½¬æ“ä½œï¼Œä¹‹åå°†å¯¹ç‚¹äº‘è¿›è¡Œç‰¹å¾ç¼–ç æ“ä½œï¼Œæ¥ç€å¯¹ç¼–ç ä¹‹åçš„ç»“æœè¿›è¡Œè¿›ä¸€æ­¥çš„ç¼–ç ï¼Œç„¶åå…¨å±€æ± åŒ–å¾—åˆ°ä¸€ä¸ªå…¨å±€çš„ä¿¡æ¯ï¼Œæœ€åè¿›è¡Œåˆ†ç±»ã€‚ å¯¹åº”ç‚¹äº‘çš„åˆ†å‰²é—®é¢˜æ¥è¯´ï¼Œå…¶å®å°±æ˜¯å¯¹æ¯ä¸ªç‚¹è¿›è¡Œå•ç‹¬çš„åˆ†ç±»çš„ä»»åŠ¡ã€‚è¿™é‡Œæ˜¯å°†å…¨å±€çš„å‘é‡åˆ†åˆ«è¾“å…¥åˆ°ç‚¹çš„å‘é‡ä¸­å»ï¼Œç„¶åè¿›è¡Œç‰¹å¾çš„æå–è¿›è€Œè¿›è¡Œåˆ†ç±»æ“ä½œã€‚ ä¸Šå›¾ä¸ºä¸‰ç»´çš„åœºæ™¯çš„åˆ†å‰²å®ä¾‹ã€‚ åœ¨å†…å­˜å’Œè¿ç®—é€Ÿåº¦ä¸Šï¼Œå…¶å®ç°åœ¨çš„ç»“æœæ˜¯è¿œè¿œå¥½äºä¹‹å‰çš„ç»“æœçš„ã€‚å› æ­¤è¿™ä¸ªæ¡†æ¶é€‚åˆåœ¨ç¡¬ä»¶ä¸Šè¿›è¡Œéƒ¨ç½²æ“ä½œçš„ã€‚ ä¸Šé¢çš„æ•ˆæœå¯ä»¥çœ‹å‡ºï¼ŒPointNetåœ¨ç‚¹äº‘ç¡®å®çš„æƒ…å†µä¸‹å…·æœ‰å¾ˆå¼ºçš„é²æ£’æ€§ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆä¸Šè¿°çš„æ•ˆæœå…·æœ‰å¾ˆå¼ºçš„é²æ£’æ€§å‘¢ï¼Ÿ å¦‚ä¸Šæ‰€ç¤ºï¼Œä½¿ç”¨ä¸Šè¿°çš„å¯è§†åŒ–æ“ä½œï¼ŒPointNetçš„å…¨å±€çš„æ± åŒ–æ“ä½œæ—¶é€‰å‡ºç»“åˆè½®å»“ç‚¹ï¼Œè¿™æ ·çš„è¯å°±ç®—æ˜¯ç¼ºå°‘ç›¸å…³çš„ç‚¹ï¼Œå…¶ä½¿ç”¨çš„æ•ˆæœä¹Ÿæ˜¯é²æ£’çš„ã€‚ PointNet++ å’Œè¿™è¾¹çš„3D-CNNç›¸æ¯”ï¼š PointNetè¦ä¹ˆå°±æ˜¯å¯¹å…¨å±€çš„ä¿¡æ¯è¿›è¡Œå¤„ç†ï¼Œè¦ä¹ˆå°±æ˜¯å¯¹å•ä¸ªç‚¹è¿›è¡Œå¤„ç†ï¼Œæ²¡æœ‰ä¸€ä¸ªå¯¹å±€éƒ¨çš„éƒ¨åˆ†ç‚¹è¿›è¡Œæ“ä½œçš„æ¨¡å—ã€‚ å…¶æ¬¡å°±æ˜¯å¹³ç§»ä¸å˜æ€§ä¸Šåˆç§»åŠ¨çš„å±€é™ï¼Œå¦‚æœå…¨å±€çš„ç‚¹è¢«æ•´ä½“çš„å‘å³è¿›è¡Œå¹³ç§»çš„æ“ä½œä¹‹åå°±ä¼šå‡ºç°åˆ†ç±»çš„ç»“æœå’ŒåŸæ¥ä¸åŒã€‚å•ä¸ªçš„ç‰©ä½“å¯ä»¥ä½¿ç”¨å½’ä¸€åŒ–æ“ä½œï¼Œä½†æ˜¯å¯¹ä¸€ä¸ªæ•´ä½“çš„åœºæ™¯è€Œè¨€ï¼Œä¸çŸ¥é“è¦å…·ä½“ä»¥é‚£ä¸ªç‰©ä½“ä½œä¸ºå½’ä¸€åŒ–çš„åŸºå‡†ã€‚ é’ˆå¯¹ä¸Šè¿°çš„å±€é™æ€§ï¼Œæå‡ºäº†æ–°ä¸€ä»£ç½‘ç»œPointNet++ ç½‘ç»œåŸºæœ¬æ¶æ„ ä¸»è¦çš„æ“ä½œæ˜¯å°†æ•´ä½“åˆ†æˆå¤šä¸ªå°å‹çš„åŒºåŸŸï¼Œæ¯ä¸ªå°åŒºåŸŸåˆ†åˆ«ä½¿ç”¨PointNetç½‘ç»œï¼Œå¹¶ä¸”ä¸æ–­åœ°è¿›è¡Œè¿­ä»£ã€‚äºæ˜¯å°±æ»¡è¶³äº†ä¸Šè¿°åœ°æ€§è´¨ï¼š å¤šçº§ç‰¹å¾å­¦ä¹ ï¼ŒHierarchical feature learning. å¹³ç§»ä¸å˜æ€§ï¼ŒTranslation invariantï¼Œç”±äºæ˜¯å¯¹å±€éƒ¨çš„å°ç‰¹å¾çš„å±€éƒ¨åæ ‡è¿›è¡Œçš„ï¼Œäºæ˜¯å°±ä¼šæœ‰å±€éƒ¨çš„ä¸å˜æ€§ã€‚ ä½ç½®é¡ºåºæ— å…³æ€§ï¼Œpermutation Invariance. é¦–å…ˆé€‰æ‹©å‡ºæ¥ä¸€ä¸ªå°çš„åŒºåŸŸï¼Œå°†å…¶ç‚¹é›†è¿›è¡Œå±€éƒ¨å½’ä¸€åŒ–ï¼Œä¹‹åé€šè¿‡ä¸€ä¸ªPointNetï¼Œåœ¨æ–°çš„ç©ºé—´ä¸Šå¾—åˆ°å¯¹åº”çš„ç‰¹å¾ç‚¹ã€‚äºæ˜¯å¤šæ¬¡æ“ä½œå°±å¾—åˆ°ä¸€ä¸ªæ–°çš„ç‰¹å¾ç‚¹é›†ã€‚ å°†ä¸Šè¿°çš„ç‰¹å¾ç‚¹è¿›è¡Œå¤šå±‚å±€éƒ¨ç‰¹å¾çš„æå–ä¹‹åå†è¿›è¡Œåˆ†ç±»æ“ä½œã€‚ åŒç†è¿›è¡Œå°†ä¸Šè¿°çš„æ“ä½œè¿›è¡Œä¸Šé‡‡æ ·æˆ–è€…æ’å€¼ï¼Œè¿›è€Œå¾—åˆ°åˆ†å‰²åçš„ç‚¹äº‘å›¾ç‰‡ã€‚ å‚æ•°é€‰æ‹©å¯¹äºCNNæ¥è¯´ï¼Œå·ç§¯æ ¸çš„å¤§å°æ˜¯å¯è°ƒçš„è¶…å‚æ•°ï¼Œç›®å‰çš„ç›¸å…³ç ”ç©¶è¡¨æ˜ï¼Œå·ç§¯æ ¸è¶Šå°ï¼Œæ•ˆæœå°±è¶Šå¥½ã€‚ å¯¹äºPointNet++è€Œè¨€ï¼Œåº”è¯¥å¦‚ä½•é€‰æ‹©è¿™ä¸ªåŒºåŸŸçš„å¤§å°ï¼Ÿ å’Œå›¾ç‰‡ç›¸æ¯”ä¸åŒçš„æ˜¯ï¼Œç‚¹äº‘çš„é‡‡æ ·æ—¶ä¸å‡åŒ€çš„ï¼Œè€Œå›¾ç‰‡æ—¶å‡åŒ€çš„NxNçš„ç½‘ç»œã€‚å¯¹äºç‚¹äº‘æ¥è¯´æ—¶ç¦»ç›¸æœºè¿‘çš„é‡‡æ ·å¯†åº¦å¤§ï¼Œä½†æ˜¯ç¦»ç›¸æœºè¿œçš„é‡‡æ ·çš„å¯†åº¦å°ã€‚ è¿™é‡Œè¿›è¡Œå®éªŒï¼Œä¸æ–­åœ°å‡å°ç‚¹çš„æ•°é‡å¯ä»¥å‘ç°å…¶æ•ˆæœçš„ä¸‹é™é€Ÿåº¦è¦å¿«äºåŸå§‹çš„PointNetç½‘ç»œã€‚ æ¨¡å‹çš„ä¿®æ”¹ä¸Šæ˜¯å°†é²æ£’çš„è¿›è¡Œé‡‡æ ·å¯†åº¦çš„è¿›è¡Œè¯†åˆ«ã€‚è¿™é‡Œä½¿ç”¨çš„æ˜¯Mult-scaleçš„æ–¹å¼ï¼Œå°†ä¸€ç³»åˆ—çš„åŠå¾„ç»„æ¥è¿›è¡Œè¯†åˆ«çš„ï¼Œç„¶åå°†å…¶èšåˆåœ¨ä¸€èµ·ï¼Œç±»ä¼¼äºInceptionNet. ä¹‹åæµ‹è¯•å¯å¾—å…¶å¯¹äºæ•´ä½“çš„åœºæ™¯çš„åˆ†å‰²ä¸ªå±€éƒ¨çš„åœºæ™¯çš„åˆ†å‰²éƒ½å…·æœ‰è¾ƒå¥½çš„é²æ£’æ€§ã€‚ å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œa,cè™½ç„¶å‡ ä½•å¤–å½¢ä¸ç›¸ä¼¼ï¼Œä½†æ˜¯æ˜¯åŒä¸€ä¸ªç±»ï¼Œa,bçš„å¤–å½¢ç›¸åŒï¼Œä½†æ˜¯æ˜¯ä¸åŒçš„ç±»ã€‚ å› æ­¤æå–çš„ç‰¹å¾éœ€è¦å­¦ä¹ åˆ°ç‰©ä½“è¡¨é¢çš„æ€§è´¨å˜åŒ–ï¼Œè€Œä¸æ˜¯æ•´ä¸ªç©ºé—´çš„ä½ç½®ã€‚ 3Dç½‘ç»œåœ¨åœºæ™¯ç†è§£ä¸Šçš„åº”ç”¨ å…¶ä¸»è¦çš„åº”ç”¨ä¸»è¦å‡ ç§åœ¨ä¸¤ä¸ªæ–¹é¢ï¼Œä¸€ä¸ªæ˜¯3Dç‰©ä½“è¯†åˆ«ã€å¦ä¸€ä¸ªæ˜¯æµåœºçš„è¯†åˆ«ã€‚ 3D Object Detection ç¬¬ä¸€ç§è§£å†³çš„æ€è·¯æ˜¯åŸºäºå›¾ç‰‡æ¥è¿›è¡Œçš„ï¼Œä¸»è¦æ˜¯ä¸€ä¸ª3D Proposal Network+classification æ¥è¿›è¡Œçš„ã€‚ ä½†æ˜¯è¿™æ ·åšçš„ç¼ºç‚¹æ˜¯3Dçš„æœç´¢ç©ºé—´å¤§ï¼Œå› æ­¤è®¡ç®—çš„é‡ä¹Ÿè¾ƒå¤§ï¼ŒåŒæ—¶å…¶è¾ƒå°çš„ç‰©ä½“çš„æœç´¢çš„æ•ˆæœè¾ƒå·®ï¼Œæ•ˆæœä¹Ÿæ˜¯æœ‰é™çš„ã€‚ ä½¿ç”¨RGBDçš„å›¾ç‰‡æ¥å¯¹ç‰©ä½“è¿›è¡Œä¼°è®¡ï¼Œä½†æ˜¯è¿™æ ·éœ€è¦å¢åŠ ä¸€äº›å’Œå¤§å°ç›¸å…³çš„å…ˆéªŒçŸ¥è¯†ã€‚åŒæ—¶æŠ•å½±ä¹Ÿå…·æœ‰å¾ˆå¤§çš„å±€é™æ€§ï¼Œå¯¹äºä¼°è®¡æ¥è¯´æœ‰è¾ƒå¤§çš„è¯¯å·®ã€‚ åŸºäºè§†é”¥çš„3Dç‰©ä½“è¯†åˆ« è¿™é‡Œé‡‡å–çš„ä¸»è¦å¾—åˆ°æ–¹å¼æ˜¯ï¼Œé€šè¿‡3Dçš„ç›®æ ‡è¯†åˆ«è·å–Bounding Boxï¼Œä¹‹åå¾—åˆ°3Dçš„è§†é”¥ï¼Œç„¶åå€ŸåŠ©PointNetæ¥å®Œæˆåœ¨3Dç©ºé—´å†…çš„å®šä½æ“ä½œã€‚ ä¸Šé¢çš„é—®é¢˜ä¸»è¦é¢ä¸´çš„æŒ‘æˆ˜æ˜¯å…¶å…·æœ‰å¾ˆå¤šçš„å‰æ™¯é®æŒ¡å’ŒèƒŒæ™¯çš„å¹²æ‰°åœ¨å…¶ä¸­ï¼Œæˆ‘ä»¬è¯†åˆ«çš„ç‚¹ä»…ä»…æ˜¯å…¶ä¸­çš„ä¸€å°éƒ¨åˆ†ã€‚ ä¸‹é¢å°±æ˜¯ä¸»è¦çš„pipelineï¼Œé¦–å…ˆ2Dç¡®å®šä¸»è¦çš„ä½ç½®ï¼Œå»ºç«‹ç›¸åº”çš„è§†é”¥é¢ï¼Œä¹‹åä½¿ç”¨PointNetè¿›è¡Œåˆ†å‰²ï¼Œåœ¨è§†é”¥çš„èŒƒå›´åªèƒ½æ¥å¯»æ‰¾ä¸‰ç»´çš„ç‚¹äº‘ï¼Œæœ€ååŸºçŸ³ä½¿ç”¨PointNetæ¥ç²¾ç¡®çš„ç¡®å®šå…¶å…·ä½“çš„èŒƒå›´ï¼Œè·å¾—ç²¾ç¡®çš„bounding boxã€‚ ç›¸æ¯”æ±½è½¦è€Œè¨€ï¼Œå…¶å¯¹äºè¡Œäººçš„æ£€æµ‹æ•ˆæœæ›´å¥½ï¼Œå…¶ä¸»è¦çš„åŸå› å’Œæ˜¾ç„¶ï¼Œå°±æ˜¯äººå¤ªå°çš„ï¼Œ3Då¾ˆéš¾æ£€æµ‹ï¼Œä½†æ˜¯2Då°±æœ‰æ›´é«˜çš„æ£€æµ‹çš„ç‰¹å¾ã€‚ è¿™é‡Œçš„ä¸»è¦æ„æ€å¯èƒ½æ˜¯å°†åŸæ¥çš„2Dä¿¡æ¯è½¬æ¢æˆä¸º3Dçš„ä¿¡æ¯ï¼Œè¿™æ ·çš„è¯å°±å¯ä»¥å¾ˆå¥½çš„å¯¹å›¾åƒçš„ä¿¡æ¯çš„è¿›è¡Œç†è§£ã€‚ å¯¹äºç‚¹äº‘çš„é—®é¢˜ï¼Œå…¶å¯ä»¥å¾ˆå¥½çš„å¯¹å…¶è¿›è¡Œå½’ä¸€åŒ–æ“ä½œã€‚","link":"/2022/08/26/Point%20Cloud/Deep-Learning-on-Point-Clouds-for-3D-Scene-Understanding/"},{"title":"å›¾ç¥ç»ç½‘ç»œâ€”â€”ä¸­ç§‘é™¢è¯¾ç¨‹","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦æ˜¯å‚è€ƒçš„ä¸­ç§‘é™¢æ²ˆè€å¸ˆçš„è¯¾ç¨‹ï¼Œä¸»è¦æ˜¯ä»CNNå‘GNNè¿‡æ¸¡ï¼Œè®¨è®ºäº†ä¸€äº›åŸºç¡€çš„ç†è®ºå·²ç»å›¾ç½‘ç»œçš„è¡¨è¾¾èƒ½åŠ›ã€‚ CNNåŸºæœ¬ç†è®ºCNNçš„äº§ç”Ÿå’Œå‘å±•å·ç§¯ç¥ç»ç½‘ç»œæ˜¯åœ¨å…¨è¿æ¥ç½‘ç»œçš„åŸºç¡€ä¸Šå‘å±•çš„ï¼Œå› ä¸ºå…¨è¿æ¥å±‚çš„è‡ªç”±åº¦å¤ªå¤§ï¼Œå·ç§¯ç½‘ç»œç›¸å½“äºç»™å…¶å¢åŠ äº†å¾ˆå¤šå…ˆéªŒçš„ä¿¡æ¯ï¼Œä½¿å…¶æ–¹ä¾¿è®­ç»ƒï¼Œå¹¶ä¸”åœ¨å›¾ç‰‡é¢†åŸŸè·å¾—å¾ˆå¥½çš„å‘å±•ã€‚ ä¸»è¦æ—©å›¾åƒåˆ†ç±»ã€ç›®æ ‡è¯†åˆ«ã€æœºå™¨ç¿»è¯‘ç­‰æ¬§å¼ç©ºé—´çš„æ•°æ®ä¸­è·å¾—å·¨å¤§çš„æˆåŠŸã€‚ ä¹‹åTCNNåœ¨æ—¶é—´åºåˆ—æ•°æ®ä¸Šçš„è¡¨ç°è¶…è¶Šäº†ä¹‹å‰çš„RNNï¼Œæ€»ç»“å‘ç°CNNå…¶å®å¯ä»¥å­¦ä¹ åˆ°å¾ˆå¤šçš„å±€éƒ¨ç‰¹å¾çš„ä¿¡æ¯ï¼Œä¹‹åå°†è¿™äº›å±€éƒ¨çš„ä¿¡æ¯è¿›è¡Œå †å æˆä¸ºä¸€ä¸ªå±‚æ¬¡åŒ–çš„ç»“æ„ã€‚ å°½ç®¡å·ç§¯ç¥ç»ç½‘è·¯çš„æœ€å¸Œæœ›å­¦ä¹ åˆ°çš„æ˜¯ä¸œè¥¿æ˜¯å…·æœ‰å¹³ç§»ä¸å˜æ€§ã€æ—‹è½¬ä¸å˜æ€§å’Œå°ºåº¦ä¸å˜æ€§ï¼Œä½†æ˜¯åœ¨å®é™…çš„å­¦ä¹ çš„è¿‡ç¨‹ä¸­ï¼Œå…¶ä»…ä»…å¯ä»¥ä¿è¯å¹³ç§»ä¸å˜æ€§ï¼Œä¸è¿‡ä»…ä»…å¹³ç§»ä¸å˜æ€§çš„æ»¡è¶³å°±å·²ç»ä½¿å¾—ç½‘ç»œå…·æœ‰å¼ºå¤§çš„å­¦ä¹ åŠŸèƒ½äº†ã€‚ å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå…¶å·ç§¯æ ¸çš„å½¢çŠ¶å¦‚æœ‰å›¾æ‰€ç¤ºï¼Œå½“é‡åˆ°ç›¸ä¼¼çš„ç»“æ„è¿›è¡Œå­¦ä¹ çš„æ—¶å€™ï¼Œå°±ä¼šå·ç§¯ä¹˜é™¤ä¸€ä¸ªè¾ƒå¤§çš„å€¼ï¼Œè¿™é‡Œå°±ç›¸å½“äºåšäº†ç›®æ ‡æå–çš„å·¥ä½œã€‚ ä½†æ˜¯ä¸Šè¿°çš„è®¨è®ºå…¶å®éƒ½æ˜¯åŸºäºæ¬§å¼ç©ºé—´çš„ï¼ŒHintonå’ŒLeCunæ€è€ƒï¼Œå¦‚ä½•è®©ç½‘ç»œå»é€‚åº”éæ¬§å¼ç©ºé—´çš„æ•°æ®ã€‚ å…¶ä¸­éæ¬§ç©ºé—´é‡Œé¢å…·æœ‰ä»£è¡¨æ€§çš„ç»“æ„æ˜¯ï¼š å›¾ç»“æ„Graphï¼› æµå½¢Manifoldï¼› æ¬§å¼ç©ºé—´ï¼šæ˜¯ç”±æ¬§å¼è·ç¦»å®šä¹‰å‡ºæ¥çš„ç©ºé—´ä¸Šè¿ä¸ªç‚¹çš„è·ç¦»å«åšæ¬§å¼ç©ºé—´ã€‚ å…¶ä¸­çš„æ¬§å¼è·ç¦»å…·æœ‰ä¸‰ä¸ªä¸»è¦çš„æ€§è´¨ï¼ŒåŒ…æ‹¬éè´Ÿï¼Œå¯¹ç§°å’Œä¸‰è§’ä¸ç­‰å¼ã€‚ ä½†æ˜¯å›¾ä¸Šé¢ä½¿ç”¨æœ€çŸ­è·¯å¾„æ¥å®šäºè·ç¦»çš„æ—¶å€™ï¼Œå…¶ä¸æ»¡è¶³ä¸‰è§’ä¸ç­‰å¼çš„æ€§è´¨ï¼Œå› æ­¤å…¶æ˜¯éæ¬§çš„è·ç¦»ã€‚ äºæ˜¯éæ¬§çš„æ•°æ®ç»™å·ç§¯çš„å®šä¹‰æå‡ºäº†æŒ‘æˆ˜ã€‚ ä»CNNåˆ°GNNå¯¹äºæ¬§å¼ç©ºé—´æ¥è¯´ï¼Œå·ç§¯å¾ˆå¥½çš„å®šä¹‰è®¡ç®—æ¬§å¼ç©ºé—´æ•°æ®(å¦‚ç½‘æ ¼)çš„ç®—å­ã€‚ä½†æ˜¯å¯¹æ‰€æœ‰éæ¬§å¼ç©ºé—´çš„ç®—å­è€Œè¨€ï¼Œå·ç§¯è¿˜æ˜¯æ— æ³•ä½œä¸ºè¿ç®—çš„ç®—å­æ¥å¯¹éæ¬§å¼ç©ºé—´è¿›è¡Œè®¡ç®—ã€‚ å…¶å®ï¼Œå¯¹äºå›¾åƒè€Œè¨€å°±æ˜¯ä¸€ä¸ªæ ‡å‡†çš„æ ¼å­ç½‘ç»œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå…¶æ»¡è¶³æ¬§å¼è·ç¦»çš„å…¨éƒ¨çš„è¦æ±‚ã€‚ æˆ‘ä»¬PSè¿›è¡Œå›¾åƒå¤„ç†å…¶å®å°±æ˜¯å’Œå·ç§¯çš„æœ¬è´¨æ˜¯ç±»ä¼¼çš„ï¼Œå°±æ˜¯å¯¹å›¾åƒçš„å±€éƒ¨å’Œå…¨å±€è¿›è¡Œæ“ä½œã€‚ å·ç§¯çš„å®šä¹‰å·ç§¯æœ¬è´¨æ˜¯å°±æ˜¯ä¸€ä¸ªæ•°å­¦ä¸Šçš„æ“ä½œï¼Œå°†ä¸¤ä¸ªå‡½æ•°$f,g$è¿›è¡Œå·ç§¯å¯ä»¥çš„å¾—å‡ºå¦ä¸€ä¸ªå‡½æ•°$h$ï¼Œè¿™é‡Œ$h$ç›¸æ¯”$f$æ›´åŠ å¹³æ»‘ã€‚ é¦–å…ˆæ˜¯ä¸€ä¸ªä¿¡å·ä¸ç³»ç»Ÿä¸­çš„ä¾‹å­ï¼Œå…¶æœ¬è´¨å°±æ˜¯ä¸€ä¸ªä¸€ç»´çš„è¿ç»­å·ç§¯ã€‚ ä¹‹åæ˜¯ä¸€ä¸ªå›¾åƒå¤„ç†ä¸­çš„ä¾‹å­ï¼Œå…¶æœ¬è´¨æ˜¯ä¸€ä¸ªäºŒç»´çš„è¿ç»­å·ç§¯ã€‚ è¿™é‡Œå…¶å®æœ‰ä¸ªè¯¯åŒºï¼Œåœ¨çœŸå®çš„å·ç§¯çš„ä¸Šå°†å·ç§¯çš„å³ä¸‹è§’æ¥ä¹˜ä»¥å›¾åƒçš„å·¦ä¸Šè§’çš„å€¼ï¼Œåç€æ¥ä¹˜çš„ï¼Œè€Œä¸æ˜¯ä¸€èˆ¬ç†è§£ä¸Šçš„å¯¹åº”ä½ç›¸ä¹˜ã€‚ä¸è¿‡å…¶å®å¯¹åº”å­¦ä¹ ç®—æ³•æ¥è¯´ï¼Œå…¶å·ç§¯æ ¸çš„æ•°å€¼æ˜¯å¯å˜çš„ï¼Œé€šè¿‡å­¦ä¹ è·å–çš„ï¼Œå› æ­¤è¿™é‡Œå…¶å®å°±éšä¾¿äº†ã€‚ å¦‚æœæ˜¯å•å•çš„ä½¿ç”¨ä½¿ç”¨CNNï¼Œå…¶å®å¹¶ä¸éœ€è¦å¯¹å·ç§¯ç†è§£å¤ªå¤šã€‚ å›¾å·ç§¯GNNçš„åŸºæœ¬ç†è®ºGNNçš„å®šä¹‰ç›®å‰çš„ç°æœ‰çš„å®šä¹‰æ–¹æ³•å­˜åœ¨ä¸¤ç§ï¼Œä¸€ç§æ˜¯åŸºäºè°±çš„æ–¹æ³•ï¼Œå¦å¤–ä¸€ç§æ˜¯åŸºäºç¦»æ•£ç©ºé—´çš„æ–¹æ³•ã€‚ä½†æ˜¯ç»è¿‡äº†å‡ å¹´çš„å‘å±•ï¼Œå‘ç°ä¸¤ç§æ–¹æ³•å…¶å®æ˜¯ä¸€æ ·çš„ï¼ŒåŸºäºè°±çš„æ–¹æ³•å…¶å®æ˜¯åŸºäºå·ç§¯çš„æ–¹æ³•çš„ç‰¹æ®Šçš„æƒ…å†µã€‚ è°±æ–¹æ³•ï¼šå…¶å®è°±çš„æœ¬è´¨å°±æ˜¯ä¸€ç§ç©ºé—´å˜æ¢ã€‚ è°±æ–¹æ³•çš„ä¸»è¦æ€è·¯ï¼šé€šè¿‡å›¾ä¸Šçš„å‚…é‡Œå¶å˜æ¢æ¥å®šä¹‰çš„å·ç§¯æ ¸ã€‚ ç¼ºç‚¹ï¼šå·ç§¯æ ¸åœ¨è°±åŸŸé‡Œé¢æ˜¯è¿ç»­çš„ï¼Œä½†æ˜¯åœ¨èŠ‚ç‚¹åŸŸé‡Œé¢ä¸æ˜¯å±€éƒ¨åŒ–çš„ï¼Œè¿™ä¸€ç‚¹å¯¼è‡´è¿™ä¸ªæ–¹æ³•é€æ¸è¢«å¼ƒç”¨ã€‚ ç©ºé—´åŸŸçš„æ–¹æ³•ï¼šå®šä¹‰äº†åœ¨èŠ‚ç‚¹åŸŸçš„å·ç§¯ã€‚ ä¸»è¦çš„æŒ‘æˆ˜ï¼šèŠ‚ç‚¹åŸŸçš„é‚»æ¥èŠ‚ç‚¹çš„ç›¸é‚»ä¸ªæ•°æ˜¯ä¸åŒçš„ã€‚ ç©ºé—´åŸŸæ–¹æ³•çš„ä¸»è¦æ€è·¯ï¼šé€šè¿‡æ±‚ä¸€ä¸ªèŠ‚ç‚¹å’Œå…¶é‚»æ¥ç‚¹çš„åŠ æƒå¹³å‡å€¼ï¼Œæ¥å®šä¹‰å…¶èŠ‚ç‚¹ä¸Šçš„å·ç§¯ã€‚ è°±æ–¹æ³•åŸºæœ¬å®šä¹‰ é¦–å…ˆï¼Œå®šä¹‰ä¸€ä¸ªå›¾ç»“æ„ï¼Œå…¶ä¸»è¦æœ‰ä¸‰ä¸ªå…ƒç´ èŠ‚ç‚¹$V$ï¼Œè¾¹$E$ï¼Œæƒé‡$W$ä¸‰ä¸ªéƒ¨åˆ†ã€‚ å…¶ä¸­ï¼Œå®šä¹‰èŠ‚ç‚¹çš„ä¸ªæ•°ä¸º$n=|V|$ï¼Œäºæ˜¯å¾—åˆ°åŠ æƒçš„é‚»æ¥çŸ©é˜µ$R^{n\\times n}$ï¼Œå…¶ä¸­æƒé‡$W\\in R^{n\\times n}$ã€‚ æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªå±äºè‡ªå·±çš„å±æ€§å‘é‡ï¼Œè¿™é‡Œè®¾å±æ€§å‘é‡æ˜¯ä¸€ä¸ª$R^{d\\times1}$ çš„çŸ©é˜µå€¼ï¼Œå°†å…¶åˆå¹¶å¯å¾—$X\\in R^{n \\times d}$ ï¼Œå³æ¯ä¸ªè¡Œå‘é‡ä¸ºä¸€ä¸ªèŠ‚ç‚¹å¯¹åº”çš„å±æ€§å‘é‡ï¼Œæ¯ä¸ªåˆ—å‘é‡ä¸ºå®šä¹‰åœ¨èŠ‚ç‚¹ä¸Šçš„ä¸€ä¸ªä¿¡å·ã€‚ ä¹‹åï¼Œæ¥å®šä¹‰å›¾çš„LaplaciançŸ©é˜µã€‚ é¦–å…ˆï¼Œå®šä¹‰çŸ©é˜µ$D$ï¼Œå…¶æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªå¯¹è§’é˜µã€‚ å½“å®šä¹‰çš„å›¾æ˜¯æœ‰å‘å›¾æ—¶ï¼Œ$D_{ii}=\\sum_jW_{ij}$ï¼Œå³å’Œ$i$èŠ‚ç‚¹ç›¸è¿çš„è¾¹å‘æƒé‡ä¹‹å’Œï¼› å½“å®šä¹‰çš„å›¾ä¸ºæ— å‘å›¾æ—¶ï¼Œ$D_{ii}$å°±æ˜¯è¿™ä¸ªèŠ‚ç‚¹çš„åº¦ã€‚ ç„¶åï¼Œå®šä¹‰æ‹‰æ™®æ‹‰æ–¯çŸ©é˜µ $L=D-W$ã€‚ $L$ æœ¬è´¨ä¸Šæ—¶ä¸€ä¸ªLaplaceç®—å­ï¼Œå…¶åœ¨å›¾ä¸Šæ²¿ç€è¾¹çš„æ–¹å‘è¿›è¡Œæ±‚å¯¼ä¹‹åçš„çŸ©é˜µã€‚ $L$ ç®—å­ä¸»è¦åˆ»ç”»çš„æ˜¯ä¿¡å·çš„å¹³æ»‘æ€§ã€‚ ä¹‹åï¼Œå¯¹çŸ©é˜µè¿›è¡Œæ ‡å‡†åŒ–å¤„ç†ï¼Œä¸»è¦çš„æ“ä½œæ–¹æ³•æœ‰ä¸¤ç§ï¼š $L=I-WD^{-1}$ å•è¾¹æ ‡å‡†åŒ–ï¼Œåœ¨éšæœºè¡Œèµ°ç”¨çš„å¾ˆå¤šã€‚ $L=I-D^{-\\frac 1 2}WD^{-\\frac 1 2}$ å¯¹ç§°æ ‡å‡†åŒ–ï¼Œæ•°å­¦æ€§è´¨æ›´å¥½ã€‚ å›¾å‚…é‡Œå¶å˜æ¢ å‚…é‡Œå¶å˜åŒ–çš„ä¸»è¦æ€æƒ³ï¼šå°±æ˜¯å°†æ‰€æœ‰çš„æ—¶åŸŸä¸Šçš„ä¿¡å·éƒ½æ¢æˆä¸€ç³»åˆ—å‘¨æœŸä¿¡å·çš„å åŠ ã€‚åœ¨è¿™é‡Œé¢ä»…ä»…åªæœ‰æ¯ä¸ªä¿¡å·ä¸Šçš„ç³»æ•°ä¸åŒï¼Œç›¸å½“äºæ˜¯ä½¿ç”¨ä¸€ç³»åˆ—çš„å‘¨æœŸä¿¡å·ä½œä¸ºåŸºåº•ã€‚ å¯¹åº”ä¼ ç»Ÿçš„å‚…é‡Œå¶å˜æ¢æ˜¯ä¸»è¦é’ˆå¯¹çš„æ˜¯æ—¶åŸŸä¸Šçš„æ•°æ®ï¼Œå¯¹åº”å›¾ä¸Šçš„å‚…é‡Œå¶å˜æ¢åˆ™å¤„ç†çš„å°±æ˜¯å›¾ä¸Šçš„ä¿¡æ¯ã€‚ å¯¹äºå›¾çš„å‚…é‡Œå¶å˜æ¢æ¥è¯´ï¼Œé¦–å…ˆæ˜¯å¯¹ $L$ çŸ©é˜µè¿›è¡Œæ±‚ç‰¹å¾å€¼çš„å¤„ç† ç”±äº$L$çš„å¯¹ç§°æ€§ï¼Œåˆ™ä¸ºè®¾å¯¹ç§°çŸ©é˜µï¼Œäºæ˜¯å…¶å¯¹åº”çš„ç‰¹å¾å‘é‡ä¸ºç›¸äº’æ­£äº¤çš„orthonormalï¼Œè®°ä¸º$\\{ u_l\\}^n_{l=1}$ ï¼› æ¯ä¸ªåŸºå¯¹åº”çš„é¢‘ç‡å°±ä¸º$\\{\\lambda_l \\}^n_{l=1}$ æ˜¯ä¸ªéè´Ÿæ•°ï¼› è¿™é‡Œç‰¹å¾å‘é‡å¯¹åº”çš„ç‰¹å¾å€¼è¶Šå¤§çš„ï¼Œå¯¹åº”çš„ä¿¡å·çš„é¢‘ç‡å°±è¶Šé«˜ï¼Œäºæ˜¯å°±æˆä¸ºäº†æ‰€è°“çš„é¢‘ç‡ã€‚ äºæ˜¯å°±å¯ä»¥å°†å›¾çš„LaplaceçŸ©é˜µå¯¹è§’åŒ–å¯å¾—ï¼š$L=U\\Lambda U^T$ å…¶ä¸­ï¼Œ$U=[u_1,u_2,â€¦u_n]$ï¼Œå¹¶ä¸”$\\Lambda=diag([\\lambda_1,â€¦,\\lambda_n])$ è§‚å¯Ÿå¯å¾—ï¼Œå½“æˆ‘ä»¬å°†LaplaceçŸ©é˜µ $L=D-W$ ä¹˜ä»¥ä¸€ä¸ª$[1,1,â€¦,1]$çš„çŸ©é˜µåï¼Œå°±å¯ä»¥ä¸º0ï¼Œäºæ˜¯å°±æœ‰$L[1,1,â€¦.,1]^T=0\\cdot[1,1,â€¦.,1]^T$ã€‚ å› æ­¤å¯¹åº”LaplaceçŸ©é˜µï¼Œä¸€å®šä¼šæœ‰ä¸€ä¸ªç‰¹å¾å€¼ä¸º0ï¼Œå¯¹åº”çš„ç‰¹å¾å‘é‡ä¸ºå…¨1çŸ©é˜µã€‚ ç”±äºè¿™ä¸ªç‰¹å¾å‘é‡ä¸ºå…¨ä¸€ï¼Œäºæ˜¯å¯¹åº”çš„é¢‘ç‡å°±ä¸º0ï¼Œå¯¹åº”çš„ç‰¹å¾å€¼ä¸º0ï¼Œå› æ­¤å°±æœ‰å¯ä»¥å°†é¢‘ç‡ç­‰æ•ˆç‰¹å¾å€¼äº†ã€‚ åœ¨å¾—åˆ°å‚…é‡Œå¶å˜åŒ–çš„åŸºä¹‹åï¼Œè¿™é‡Œå°±å°†ç»™å‡ºçš„å‘é‡çš„åæ ‡ï¼Œé€šè¿‡å›¾å‚…é‡Œå¶å˜æ¢è½¬åŒ–åˆ°è°±åŸŸä¸Šï¼Œå¾—åˆ°è°±åŸŸä¸Šçš„åæ ‡å€¼ã€‚ ä¸Šé¢åˆ†åˆ«ç»™å‡ºäº†å‚…é‡Œå¶çš„æ­£å˜æ¢å’Œé€†å˜æ¢è¿‡ç¨‹ã€‚ å·ç§¯å®šç†ï¼šä¸¤ä¸ªä¿¡å·çš„å·ç§¯å¯ä»¥çœ‹æˆä¸¤ä¸ªä¿¡å·çš„å‚…é‡Œå¶å˜æ¢åçš„å¸¦ç‚¹ç§¯ã€‚ äºæ˜¯ï¼Œè¿™é‡Œæ ¹æ®ä¸Šè¿°çš„å·ç§¯å®šç†å¯å¾—ï¼Œä¸€ä¸ªç»™å®šçš„ä¿¡å·$x$ï¼Œå¦ä¸€ä¸ªä¿¡å·$y$ä½œä¸ºæ»¤æ³¢å™¨ï¼Œå…¶å®å°±æ˜¯å®šä¹‰å·ç§¯ç¥ç»ç½‘ç»œé‡Œé¢çš„å·ç§¯æ ¸ï¼Œäºæ˜¯å°†å·ç§¯è®¡ç®—å¯ä»¥è½¬åŒ–æˆé¢‘åŸŸçš„ç‚¹ç§¯è¿ç®—ã€‚ å…¶å®æœ¬è´¨ä¸Šæ˜¯å› ä¸ºåœ¨è°±åŸŸçš„è®¡ç®—æ¯”è¾ƒç®€å•ï¼Œè½¬åŒ–æˆè°±åŸŸæ–¹ä¾¿è®¡ç®—ï¼Œä¹‹åå†é€šè¿‡çº¿æ€§å˜æ¢å°†å…¶è½¬æ¢å›å»å³å¯ã€‚ è¿™é‡Œ$U^Ty$å°±æ˜¯å¯¹åº”çš„å‚æ•°ï¼ŒåŸºäºä¸Šè¿°ï¼Œå°†ä¸Šè¿°å¼å­è¿›é¡¹ç›¸åº”çš„åŒ–ç®€å¯å¾—ï¼š x*_Gy=U((U^Tx)\\cdot(U^Ty))\\\\ \\Rightarrow x*_Gy=Ug_\\theta U^Tx è¿™é‡Œé¦–å…ˆå®šä¹‰$U^Ty=[\\theta_0,\\theta_1â€¦,\\theta_{n-1}]^T$ ï¼Œå…¶æ˜¯ä¸€ä¸ªå‘é‡å€¼ï¼Œå¯¹åº”çš„ç‚¹ç¨‹å¯ä»¥å°†å…¶è½¬åŒ–æˆä¸ºä¸€ä¸ªçŸ©é˜µä¹˜æ³•çš„è¿‡ç¨‹ï¼Œè®¾çŸ©é˜µä¸º$g_\\theta=diag([\\theta_0,â€¦,\\theta_n-1])$ ã€‚äºæ˜¯å°±ä¼šæœ‰ä¸Šå›¾ä¸­çš„ä¸‰ä¸ªæ­¥éª¤ã€‚è¿™é‡Œçš„$g_\\theta$å…¶å®å°±è¦å­¦ä¹ çš„å‚æ•°ã€‚ é¦–å…ˆï¼Œå°†èŠ‚ç‚¹åŸŸè½¬åŒ–ä¸ºè°±åŸŸï¼› ä¹‹åï¼Œåœ¨è°±åŸŸé‡Œé¢è¿›è¡Œå·ç§¯æ“ä½œï¼› æœ€åï¼Œä½¿ç”¨å›¾å·ç§¯çš„é€†å˜æ¢å°†è°±åŸŸä¸Šçš„å·ç§¯ç»“æœè½¬æ¢åˆ°èŠ‚ç‚¹åŸŸä¸Šé¢ã€‚ äºæ˜¯å°±è¯ç”Ÿäº†åŸºäºè°±çš„å·ç§¯ç¥ç»ç½‘è·¯é¢†åŸŸã€‚ è°±æ–¹æ³•ç¼ºç‚¹ æ±‚åŸºç‰¹å¾å‘é‡å’Œç‰¹å¾çŸ©é˜µå…¶æœ¬è´¨å°±æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¤æ‚çš„é—®é¢˜ï¼Œä¸æ˜¯ç‰¹åˆ«çš„å®¹æ˜“ï¼Œè¿™ç‚¹æå¤§çš„é™åˆ¶äº†è¿™ä¸ªæ–¹æ³•çš„æ¨å¹¿ã€‚ å…¶æ¬¡å°±ç®—å¯ä»¥è®¡ç®—çš„å‡ºæ¥å¯¹åº”çš„ç‰¹å¾å‘é‡ï¼Œä½†æ˜¯å…¶ç‰¹å¾å‘é‡æ‹¼æˆçš„çŸ©é˜µUä¹Ÿæ˜¯ä¸€ä¸ªæ»¡çš„çŸ©é˜µï¼Œå°†èŠ‚ç‚¹åŸŸè½¬æ¢åˆ°è°±åŸŸçš„è®¡ç®—ä¹Ÿæ˜¯$O(n^2)$çš„å¤æ‚åº¦ã€‚ æœ€ååœ¨èŠ‚ç‚¹åŸŸä¸Šæ˜¯ä¸æ˜¯å±€éƒ¨çš„ã€‚æ‰“ä¸ªæ¯”æ–¹ï¼Œç›¸å¯¹ç…§ç‰‡ä¸Šçš„äººä¿®æ”¹ä¸€ä¸‹çœ‰æ¯›ï¼Œå°±ä¼šé€ æˆå…¶ä¿®æ”¹å‡ºæ¥çš„å›¾ç‰‡é¼»å­ä¹Ÿè¢«ä¿®æ”¹çš„äº†ï¼Œè€Œå·ç§¯æ“ä½œçš„æ—¶å€™ï¼Œå…¶ä»…ä»…ä¼šå¯¹å‘¨å›´çš„ä¸€ä¸ª3x3çš„å°çš„é‚»åŸŸä¸Šé¢å°±æ˜¯ä¸€å®šçš„ä¿®æ”¹ï¼Œä¸ä¼šå‡ºç°ç‰µä¸€å‘è€ŒåŠ¨å…¨èº«çš„ç°è±¡ã€‚ å¯¹è°±æ–¹æ³•çš„æ”¹è¿›ChebyNetè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨å¤šé¡¹å¼æ–¹æ³•ï¼Œæ¥å°†æ»¤æ³¢å™¨è¿›è¡Œå‚æ•°è¿‘ä¼¼ï¼Œäºæ˜¯å¾—åˆ° å…¶ä¸­ï¼Œå½“$K\\ge n$æ—¶ï¼Œç­‰å·å°±æˆç«‹äº†ï¼›å½“$K &lt; n$ æ—¶ï¼Œæ­¤æ—¶ä»…èƒ½ä¿è¯çº¦ç­‰äºï¼Œå› ä¸ºå‚æ•°çš„æ¬¡æ•°ä¸å¤Ÿã€‚ è¿™é‡Œå¯ä»¥è®­ç»ƒçš„å‚æ•°ä¸º$\\beta_k$ï¼Œä»£å…¥åŒ–ç®€æ—¶å¯ä»¥å°†å˜æ¢çš„$U$çŸ©é˜µçº¦æ‰ã€‚ åœ¨æ”¹è¿›ä¹‹åï¼Œå‡ºç°äº†ä»¥ä¸‹çš„æœ‰ç‚¹ï¼š é¦–å…ˆï¼Œä¸éœ€è¦æ±‚è§£é‚»æ¥çŸ©é˜µäº†ï¼Œè¿™å¯¹äºå‡å°è®¡ç®—é‡æ¥è¯´æ˜¯ååˆ†æœ‰å®¢è§‚çš„ã€‚ å…¶æ¬¡ï¼Œç”±äº$L$ çŸ©é˜µæ˜¯ç³»æ•°çš„çŸ©é˜µï¼Œå› æ­¤å…¶å¯¹äºè®¡ç®—å¤æ‚åº¦çš„å‡å°æ¥è¯´æ˜¯ååˆ†å®¢è§‚ï¼Œä»$O(n^2)$ è½¬åŒ–æˆä¸º $O(|E|)$ ï¼Œå³å¯¹åº”çš„å¤æ‚åº¦ä»…ä»…å’Œç½‘ç»œé‡Œè¾¹çš„ä¸ªæ•°æœ‰å…³ï¼Œå’ŒèŠ‚ç‚¹çš„ä¸ªæ•°æ— å…³ã€‚ æœ€åï¼Œå°±æ˜¯å¯ä»¥å®ç°åœ¨èŠ‚ç‚¹åŸŸä¸Šçš„å±€éƒ¨åŒ–ï¼Œè¿™é‡Œå·ç§¯è¢«ä¸¥æ ¼çš„é™åˆ¶åœ¨ä¸€ä¸ªåŠå¾„ä¸ºKçš„ä¸€ä¸ªçƒé‡Œé¢ã€‚ $k=1$æ—¶ä»£è¡¨ä»–å¯¹åº”çš„ä¸€é˜¶é‚»å±…ï¼Œk=0æ˜¯ä»£è¡¨çš„å°±æ˜¯ä»–è‡ªèº«ã€‚è¿™è¾¹æœ‰æ—¶é—´å¯ä»¥çœ‹ä¸€ä¸‹Laplaceçš„çŸ©é˜µå¯¹åº”çš„ç†è®ºã€‚ è¿™é‡ŒCheyNetç›¸å½“äºå¯¹ä¹‹å‰æ»¤æ³¢å™¨ç©ºé—´è¿›è¡Œäº†ä¸€å®šçš„é™åˆ¶åŒ…æ‹¬ï¼š å°†æ»¤æ³¢å™¨çš„å½¢å¼ä»…ä»…æ§åˆ¶åˆ°å¤šé¡¹å¼çš„å½¢å¼ï¼› å…¶æ¬¡å°†å‚æ•°çš„ä¸ªæ•°è¿›è¡Œé™åˆ¶ï¼Œä¸€èˆ¬çš„æƒ…å†µä¸‹ï¼Œå…¶å‚æ•°çš„ä¸ªæ•°$k&lt;n$ï¼Œè¿™å°±ä½¿å¾—å…¶è‡ªç”±åº¦æå¤§çš„å‡å°ã€‚ è°±æ–¹æ³•è¿›ä¸€æ­¥çš„æ”¹è¿› ä¹‹å‰æ˜¯å¯¹æ»¤æ³¢å™¨çš„å½¢å¼è¿›è¡Œé™åˆ¶ï¼Œäºæ˜¯å°±ä½¿å¾—å˜æ¢çŸ©é˜µ$U$è¢«æ¶ˆå»ï¼Œè¿™é‡Œæˆ‘ä»¬çš„å…³æ³¨å¾…ç‚¹æ”¾åˆ°äº†Uçš„ä¸Šé¢ã€‚ é€‚åº”å°æ³¢å˜æ¢çš„åŸºæ¥ä»£æ›¿æ­£å¼¦å˜æ¢çš„åŸºï¼Œæ¥è¿›ä¸€æ­¥æ”¹è¿›Uçš„å½¢å¼ã€‚ è¿™é‡Œå¯ä»¥çœ‹å‡ºï¼Œå°æ³¢æ˜¯ç¨€ç–çš„ï¼Œä»…ä»…åœ¨å¯¹åº”çš„ä½ç½®ä¸Šæ˜¯é0çš„ï¼Œå…¶ä»–çš„éƒ¨åˆ†éƒ½æ˜¯0ï¼›è€Œå‚…é‡Œå¶å˜æ¢æ˜¯ç¨ å¯†çš„ï¼Œå‘¨æœŸå˜åŒ–çš„ã€‚ ç”±äºå°æ³¢çš„ç¨€ç–æ€§ï¼Œäºæ˜¯å°±ä¼šæœ‰å…¶å…·æœ‰ä¸€å®šçš„å±€éƒ¨æ€§ï¼Œå°±æ˜¯å…¶ä»…ä»…å¯ä»¥æ§åˆ¶ç¦»ä»–å¾ˆè¿‘çš„ä¸€å°ç‰‡çš„åŒºåŸŸï¼Œå¯¹åº”çš„å¾ˆå¤§çš„åŒºåŸŸæ˜¯æ— æ³•è¿›è¡Œæ§åˆ¶çš„ã€‚è€Œå‚…é‡Œå¶åˆ™ç›¸åã€‚ äºæ˜¯åŸºäºä¸Šè¿°çš„è¡¨è¿°ï¼Œå°†å‚…é‡Œå¶å˜æ¢çš„åç½®æ¢ç®—æˆä¸ºå°æ³¢çš„åç½®ã€‚ äºæ˜¯å°±å¾—å‡ºäº†ä¸€ä¸ªæ–°çš„ç¥ç»ç½‘ç»œçš„å½¢å¼ï¼Œä¸ºå›¾å°æ³¢ç¥ç»ç½‘ç»œã€‚ è¿™é‡Œpä¸ºä¸Šä¸€å±‚ç‰¹å¾å‚æ•°çš„ç»´åº¦ï¼Œqæ˜¯ä¸‹ä¸€å±‚ç‰¹å¾å‚æ•°çš„ç»´åº¦ï¼Œäºæ˜¯è®¡ç®—çš„å¤æ‚åº¦å°±æ˜¯ä¸º$O(npq)$æ˜¯ååˆ†å¤æ‚çš„å‚æ•°çš„ç»´åº¦ã€‚åœ¨å®é™…è®­ç»ƒçš„è¿‡ç¨‹ä¸­æ•ˆæœé©±ä½¿ä¸æ€ä¹ˆæ ·ã€‚ éœ€è¦è¿›ä¸€æ­¥çš„æ”¹è¿›ï¼Œå› ä¸ºä¹‹å‰çš„å·ç§¯æ˜¯å’Œç‰¹å¾å˜æ¢æ”¾åœ¨ä¸€èµ·æ¥å®Œæˆçš„ï¼Œè¿™é‡Œå°±å°†å·ç§¯å’Œç‰¹å¾å˜æ¢åˆ†å¼€æ¥åšï¼Œå³è¿›è¡Œè¿›ä¸€æ­¥çš„è§£è€¦ï¼Œå…·ä½“çš„ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ å…ˆè¿›è¡Œçš„æ˜¯ç‰¹å¾çš„å˜æ¢ï¼Œå°±æ˜¯å°†å…¶ç»´åº¦è¿›è¡Œè½¬æ¢ã€‚ åè¿›è¡Œçš„æ˜¯å›¾å·ç§¯çš„å˜æ¢ã€‚ äºæ˜¯è®¡ç®—çš„å¤æ‚åº¦ï¼Œå°±ä»åŸæ¥çš„$O(npq)$è½¬æ¢æˆä¸º$O(n+p*q)$äº†ã€‚ å®éªŒçš„æ•ˆæœå¦‚ä¸‹ï¼š å®ç°è®ºæ–‡ä¸­çš„ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ ç©ºé—´æ–¹æ³•ç›¸æ¯”è°±æ–¹æ³•ï¼Œç©ºé—´æ–¹æ³•çš„æ•°å­¦å…¬å¼æ²¡æœ‰å¤ªå¤šï¼Œæ¯”è¾ƒé€‚åˆå·¥ç¨‹å¸ˆåº”ç”¨ã€‚å…¶æœ¬è´¨æ˜¯åŸºäºç±»æ¯”çš„æ–¹æ³•ã€‚ åŸºäºCNNçš„ç©ºé—´æ–¹æ³• è¿™ä¸ªæ–¹æ³•çš„æœ¬è´¨å°±æ˜¯å°†CNNè¿›è¡Œåˆ†è§£ï¼Œæå–å‡ºæ¥ä»–ä¸»è¦çš„åšçš„å‡ ä¸ªæ­¥éª¤ï¼Œçœ‹å“ªäº›æ­¥éª¤å¯ä»¥ä¸ºå›¾ç½‘ç»œæ¥ä½¿ç”¨ï¼Œå°†å¯ä»¥ä½¿ç”¨çš„æ­¥éª¤ä¿ç•™ï¼Œä¿®æ”¹ä¸å¯ä»¥é€‚åº”çš„æ­¥éª¤ã€‚ Step1ï¼šç¡®å®šé‚»åŸŸï¼Œè¿™é‡Œå¦‚ä¸Šå›¾æ‰€ç¤ºé‚»åŸŸçš„å¤§å°ä¸º3x3ã€‚ Step2ï¼šåœ¨é‚»åŸŸçš„å†…éƒ¨ç¡®å®šé¡ºåºï¼Œå…¶å®æˆ‘ä»¬é»˜è®¤æ˜¯ä»ä¸Šåˆ°ä¸‹ã€ä»å·¦å‘å³çš„é¡ºåºï¼Œé¢„å®šä¿—ç§°çš„é¡ºåºï¼Œå› æ­¤å¯¹è¿™ä¸€æ­¥å…¶å®å¹¶æ²¡æœ‰æ„Ÿè§‰ã€‚ Step3ï¼šå‚æ•°å…±äº«ï¼Œç›¸å½“äºå·ç§¯ç¥ç»ç½‘ç»œåœ¨å…¨è¿æ¥çš„åŸºç¡€ä¸Šå¢åŠ å¯¹å·ç§¯æ ¸ç»“æ„çš„ä¸Šçš„é™åˆ¶ï¼Œäºæ˜¯å…¶æ‰ä¼šæœ‰è¾ƒå¥½çš„ç»“æ„å¥½è®­ç»ƒï¼Œä½†æ˜¯åœ¨å…¶è¡¨è¾¾ä¸Šæ˜¯å¼±äºå…¨è¿æ¥çš„ç¥ç»ç½‘ç»œçš„ã€‚ å¯¹åº”å›¾ç¥ç»ç½‘ç»œæ¥è¯´ï¼š Step1ï¼šç¡®å®šé‚»å±…ï¼Œè¿™é‡Œä¸Šå¯¹æ¯ä¸ªç‚¹é€‰æ‹©å›ºå®šæ•°é‡çš„é‚»å±…ï¼Œå°±æ˜¯ä»å’Œè¿™ä¸ªèŠ‚ç‚¹ç›´æ¥ç›¸è¿çš„èŠ‚ç‚¹é‡Œé¢ï¼Œé€‰å‡ºè·ç¦»æœ€è¿‘çš„nä¸ªèŠ‚ç‚¹ï¼Œå› æ­¤åªè¦åº¦é‡è·ç¦»çš„å®šä¹‰ä¸€å‡ºæ¥å°±ç¡®å®šäº†ä¸€ç§é‚»åŸŸçš„åˆ’åˆ†ã€‚ å¦‚æœä¸€é˜¶é‚»æ¥ç‚¹çš„ä¸ªæ•°ä¸è¶³ï¼Œå°±ä½¿ç”¨äºŒé˜¶å’Œä¸‰é˜¶æ¥å‡‘æ•°å³å¯ã€‚ä½†æ˜¯å‰ææ˜¯è¦å…ˆå¯¹è·ç¦»è¿›è¡Œå®šä¹‰ã€‚ Step2ï¼šé‚»åŸŸçš„é¡ºåºçš„ç¡®å®šï¼Œé¦–å…ˆè¦ç¡®å®šè·ç¦»çš„åº¦é‡æŒ‡æ ‡ï¼Œç„¶ååˆ†åˆ«æ˜¯å…ˆä¸€é˜¶é‚»æ¥ç‚¹å¼€å§‹éå†æ’åºï¼Œç”±å°åˆ°å¤§æ’åˆ—ï¼Œå¦‚æœæœ‰äºŒé˜¶é‚»æ¥ç‚¹çš„è¯ï¼Œå°±ç»§ç»­å¾€åæ’åˆ—ã€‚ Srep3ï¼šæœ€åå‚æ•°å…±äº«å³å¯ã€‚ è¿›ä¸€æ­¥çš„æ”¹è¿›â€”â€”Graph SAGEé—®é¢˜çš„ç”±æ¥æ˜¯æ’åºçš„é—®é¢˜ä¼šæ¯”è¾ƒçš„å¤æ‚ï¼Œæ¯”å¦‚æˆ·å£æœ¬ä¸Šçš„æˆ·ä¸»çš„é—®é¢˜ï¼Œä»¥åŠé¢†å¯¼åå­—æ’åºçš„é—®é¢˜(è§£å†³çš„åŠæ³•æ˜¯å¦‚æœé¢†å¯¼åå­—çš„ç¬”åˆ’å°‘ï¼Œå°±æŒ‰ç…§ç¬”åˆ’çš„é¡ºåºæ¥è¿›è¡Œæ’åˆ—ï¼Œå¦åˆ™å¦‚æœå§“åçš„æ‹¼éŸ³å­—æ¯å°å°±æŒ‰ç…§æ‹¼éŸ³å­—æ¯æ¥æ’åº)ã€‚ ç”±äºå®šä¹‰é¡ºåºæ¯”è¾ƒçš„å¤æ‚ï¼Œè¿™é‡Œé‡‡å–GraphSAGEçš„æ–¹æ³•ï¼Œä¸»è¦åŒ…å«ä¸¤æ­¥ï¼š é¦–å…ˆï¼Œå¯¹åº”èŠ‚ç‚¹çš„é€‰æ‹©ä¸Šï¼Œé‡‡å–çš„æ˜¯éšæœºæ¸¸èµ°é‡‡æ ·çš„æ–¹æ³•è¿›è¡Œé‡‡æ ·ã€‚ ä¹‹åï¼Œå°†é‡‡æ ·è·å¾—çš„ç‚¹è¿›è¡Œèšåˆï¼Œå…¶å®å°±æ˜¯æ±‚å¹³å‡ã€‚ å…·æœ‰çš„å…¬å¼è§ä¸Šå›¾æ‰€ç¤ºï¼Œå°±æ˜¯è¿™é‡Œçš„ä¸Šä¸€å±‚çš„æ‰€æœ‰é‚»æ¥ç‚¹çš„ä¿¡å·è¿›è¡Œèšåˆï¼› ç„¶åå°†ä¸Šä¸€å±‚çš„é‚»æ¥ç‚¹èŠ‚ç‚¹å€¼å’Œèšä¼šåçš„èšåˆå€¼ä¸€èµ·åˆå¹¶ï¼Œç»„æˆæ–°çš„èŠ‚ç‚¹å€¼ã€‚ è¿™é‡Œçš„èšåˆå€¼å…¶å®æœ‰å¾ˆå¤šçš„è¡¨ç¤ºæ–¹æ³•ï¼Œå¯ä»¥æ˜¯$\\max,\\min,\\sum,mean$ ç­‰ç­‰ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨LSTMæˆ–Transformeræ¨¡å‹ã€‚ è¿™ç¯‡æ–‡ç« çš„Ideaè¿˜ä¸é”™ï¼Œä½†æ˜¯æ”¯æ’‘å…¶é«˜å¼•ç”¨çš„æ˜¯å…¶å›¾ç½‘ç»œçš„æ•°æ®é›†ã€‚ äºæ˜¯åœ¨æ­¤åŸºç¡€ä¸Šï¼Œæœ‰æå‡ºäº†GCNçš„æ–¹æ³•ã€‚ å›¾å·ç§¯ç¥ç»ç½‘ç»œâ€”â€”GCNçš„æå‡ºè¿™ç¯‡æ–‡ç« çš„ä¸»ä½“çš„ç»“æ„æ˜¯ååˆ†çš„ç®€å•çš„ï¼Œä½†æ˜¯å…¶ä¸ºäº†æ˜¾å¾—ä»–çš„å·¥ä½œçœ‹èµ·æ¥å¾ˆæœ‰æ·±åº¦ï¼Œäºæ˜¯å…¶è¯´è‡ªå·±æ˜¯ä»è°±æ–¹æ³•çš„ChebyNeté‡Œé¢ä¸€è·¯æ¨ç†å¾—å‡ºçš„ï¼Œå…¶ä¸»è¦æ˜¯ChebyNetçš„ä¸€é˜¶$k=1$è¿‘ä¼¼çš„æ–¹æ³•ã€‚ ä½†æ˜¯å…¶å¹¶ä¸æ˜¯å®Œå…¨å‚è€ƒçš„è°±æ–¹æ³•ï¼Œè¿™ç¯‡æ–‡ç« è¢«è®°ä½çš„åŸå› æ˜¯ç®€å•ã€‚ è¿™è¾¹ä¸»è¦çš„æ­¥éª¤æœ‰ä¸¤ä¸ªï¼š é¦–å…ˆï¼Œè¿›è¡Œç‰¹å¾å˜æ¢ï¼Œå…¶å®å°±æ˜¯å˜æ¢çŸ©é˜µçš„ç»´åº¦ï¼Œå…¶ä¸­$X \\in R^{n\\times d_0},W^{(0)} \\in R^{d_0 \\times d_1},W^{(1)}\\in R^{d_1\\times d_2}$ ä¹‹åï¼Œåšå®Œä¸€å±‚ç‰¹å¾å˜æ¢è¦è¿‡ä¸€æ¬¡æ¿€æ´»å‡½æ•°ã€‚ æœ€åï¼Œè¿™é‡Œçš„$\\hat{A}$ æ˜¯ä»£è¡¨ä¸€æ¬¡èšåˆï¼Œå¯ä»¥æ˜¯å¯¹é‚»å±…æ±‚æœ€å¤§/æœ€å°/å¹³å‡ã€‚ ç±»æ¯”CNNï¼ŒCNNé‡Œé¢çš„å·ç§¯æ ¸å…¶å®å°±æ˜¯ä¸€ç§ç‰¹å¾æå–å™¨æˆ–è€…æ˜¯æ»¤æ³¢å™¨ï¼Œæ˜¯ä¸€ä¸ª3x3çš„å‚æ•°ä½†æ˜¯å…¶å¯ä»¥å †å æˆå¤šä¸ªé€šé“ã€‚ ä½†æ˜¯å›¾ç½‘ç»œGCNæ˜¯åˆ»ç”»çš„æ˜¯å¯¹åº”ä¸­å¿ƒèŠ‚ç‚¹è€Œè¨€å‘¨å›´èŠ‚ç‚¹å¯¹å…¶çš„é‡è¦æ€§ï¼Œå³æƒé‡å€¼ï¼Œæ˜¯å›ºå®šçš„æ²¡æœ‰å‚æ•°å¯ä»¥å­¦ï¼Œè€Œä¸”ä»…ä»…åªæœ‰ä¸€ä¸ªé€šé“ã€‚äºæ˜¯å¯ä»¥å­¦ä¹ çš„å‚æ•°åªæœ‰ç‰¹å¾å˜åŒ–çš„å‚æ•°ï¼Œè€Œä¸”èšåˆçš„èŒƒå›´ä»…ä»…åªæœ‰é‚»æ¥çš„ä¸€ä¸ªèŠ‚ç‚¹ã€‚ å°½ç®¡è¿™ç¯‡æ–‡ç« æœ‰ä»¥ä¸Šçš„ç¼ºç‚¹ï¼Œä½†æ˜¯å…¶æ¯”è¾ƒçš„ç®€å•ï¼Œå¥½ç†è§£ï¼Œå¹¶ä¸”å…¶æ•ˆæœæ¯”è¾ƒæŸ¥ï¼Œå› æ­¤ç»å¸¸è¢«æ‹¿æ¥åšBaselineæ¥å¯¹æ¯”ã€‚ GCNçš„è¿›ä¸€æ­¥æ”¹è¿›â€”â€”GATåœ¨GCNä¸­ï¼Œç”±äº$\\hat{A}$ ç¼–ç æ˜¯ç¡¬ç¼–ç çš„ï¼Œæ— æ³•ä¿®æ”¹ï¼Œäºæ˜¯GATé€šè¿‡å¼•å…¥Attentionæœºåˆ¶æ¥å¯¹å…¶è¿›è¡Œå‚æ•°åŒ–ï¼Œè¿›è€Œæé«˜ä½¿ç”¨çš„å…·ä½“çš„æ•ˆæœã€‚ åœ¨ä¹‹å‰åˆ†æä¸­ï¼Œå…¶èšåˆçŸ©é˜µæˆ–Laplaciançš„å›ºå®šçš„ï¼Œåœ¨GATä¸­æ—¶é€šè¿‡å­¦ä¹ è·å–çš„ã€‚ åœ¨GATä¸­ï¼Œé¦–å…ˆå°†æ¯ä¸ªèŠ‚ç‚¹çš„ç‰¹å¾å‘é‡è¿›è¡Œç‰¹å¾å˜æ¢ç»Ÿä¸€ç»´åº¦ï¼Œä¹‹åå°†å˜æ¢ä¹‹åçš„ç‰¹å¾å‘é‡è¿›è¡Œself-Attentionæœºåˆ¶çš„è‡ªç›‘ç£å­¦ä¹ æ“ä½œï¼Œå­¦ä¹ ä¸¤è€…ä¹‹é—´çš„ç›¸ä¼¼åº¦$\\alpha_{ij}$æ¥ä½œä¸ºæƒé‡å€¼ ã€‚ è¿™é‡Œä¸ºäº†é˜²æ­¢å­¦ä¹ æƒé‡å€¼è¿‡å¤§ï¼Œè¿™é‡Œè¿›è¡Œå½’ä¸€åŒ–å¤„ç†ã€‚ è¿™é‡Œæœ‰ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯å·ç§¯å˜æ¢çš„å‚æ•°ï¼Œå¦ä¸€ä¸ªæ˜¯ç‰¹å¾å˜æ¢çš„å‚æ•°ã€‚å¹¶ä¸”ç”±äºå·ç§¯å’Œç‰¹å¾å˜æ¢å¯ä»¥å°†å…¶åšæˆå¤šå¤´çš„æ³¨æ„åŠ›æœºåˆ¶ã€‚åªæœ‰æ•°æ®é‡è¶³å¤Ÿå¤šï¼Œå…¶å°±å¯ä»¥æœ‰å¾ˆå¥½çš„æ•ˆæœã€‚ å¦ä¸€ç§æ”¹è¿›â€”â€”MoNet è¿™ç¯‡æ–‡ç« ä¸Š2018å¹´CVPRä¸Šçš„ä¸€ç¯‡æ–‡ç« ï¼Œå…¶ä¸­ä¸»è¦çš„è´¡çŒ®æ˜¯ç»™ç©ºé—´æ–¹æ³•ä¸€ä¸ªä¸€èˆ¬åŒ–çš„å®šä¹‰æ–¹å¼ï¼› æ‰€è°“çš„ç©ºé—´æ–¹æ³•å°±æ˜¯å®šä¹‰å¤šä¸ªæ ¸å‡½æ•°ï¼Œä¹‹åæµ‹é‡æ¯ä¸ªèŠ‚ç‚¹ä¹‹é—´çš„ç›¸ä¼¼åº¦ã€‚ ä¹‹å‰çš„å‡ ç¯‡æ–‡ç« å…¶å®éƒ½æ˜¯åœ¨åº¦é‡èŠ‚ç‚¹ä¹‹é—´çš„ç›¸ä¼¼åº¦æŒ‡æ ‡ï¼Œè¿™é‡Œå¯ä»¥å°†ä¸Šè¿°çš„æ ¸æ–¹æ³•å»ºç«‹ä¸€ä¸ªæ··åˆçš„æ¨¡å‹ã€‚ è®¡ç®—å·ç§¯çš„è¿‡ç¨‹å¯ä»¥çœ‹æˆï¼šä¸åŒçš„æ–¹æ³•ä¹˜ä»¥è‡ªå·±æƒé‡å€¼çš„å’Œï¼Œå¹¶é€šè¿‡å­¦ä¹ æ¥è·å–è¿™äº›æƒé‡å€¼ã€‚ è°±æ–¹æ³•å’Œç©ºé—´æ–¹æ³•çš„å…³ç³»è¿™é‡ŒåŸºäºMoNetç»™å‡ºæ¥çš„ä¸»è¦çš„æƒ³æ³•ï¼Œæˆ‘ä»¬ç±»æ¯”SVMä¸­å®šä¹‰ç›¸ä¼¼åº¦å’Œæ ¸æ–¹æ³•æ¥å¯¹æ¯”åˆ†æä¸­ ä¸»è¦çš„åŒºåˆ«ï¼š å¯¹äºè°±æ–¹æ³•å…¶æœ¬è´¨ç›¸å½“äºæ˜¯é€šè¿‡æ ¸å‡½æ•°æ¥è¿›è¡Œæ˜¾ç¤ºçš„ç©ºé—´å˜æ¢ï¼Œå°†å…¶è½¬åŒ–åˆ°ä¸€ä¸ªçº¿æ€§(æ¬§å¼)ç©ºé—´ä¸Šå»å¤„ç†ï¼Œä¹‹ååˆå°†å…¶æ¢ç®—å›åˆ°ä¹‹å‰çš„èŠ‚ç‚¹ç©ºé—´ä¸Šï¼Œå³é€†å˜æ¢ã€‚ ä¸ä»…çŸ¥é“å˜æ¢çš„æ ¸å‡½æ•°ï¼ŒçŸ¥é“å¦‚ä½•è½¬æ¢åˆ°å¯¹åº”çš„ç©ºé—´ä¸Šï¼ŒåŒæ—¶åˆè¦çŸ¥é“å¦‚ä½•å°†ç»“æœä»å¯¹åº”ç©ºé—´ä¸Šå˜å›æ¥ã€‚ å¯¹äºç©ºé—´æ–¹æ³•å…¶æœ¬è´¨å°±æ˜¯åœ¨ç°æœ‰çš„ç©ºé—´ä¸Šå®šä¹‰å‡ºæ¥ä¸€ä¸ªç›¸ä¼¼åº¦çš„å…¬å¼ï¼Œå³kernel matrix (åˆå«åšçŸ¥è¯†åµŒå…¥çŸ©é˜µ)ï¼Œç›´æ¥è®¡ç®—ç›¸ä¼¼åº¦å³å¯ã€‚ åœ¨SVMé‡Œé¢å…¶å®ä¹Ÿæ˜¯ï¼Œè¿›è¡Œç©ºé—´ä¸Šçš„å˜æ¢å…¶å®å’Œç›´æ¥å®šä¹‰ç›¸ä¼¼åº¦å‡½æ•°(ç›¸ä¼¼åº¦çŸ©é˜µ)æ˜¯ä¸€æ ·çš„ï¼Œåªè¦ä¿è¯å®šä¹‰åœ¨åŸç©ºé—´å®šä¹‰çš„ç›¸ä¼¼åº¦å‡½æ•°æ»¡è¶³ä¸€å®šçš„è¦æ±‚å°±è¡Œï¼Œä¸éœ€è¦è¿›è¡Œå˜æ¢å’Œé€†å˜æ¢ã€‚ äºæ˜¯å›çœ‹ä¸Šè¿°çš„MoNetçš„æ–¹æ³•ï¼Œå…¶ä»£è¡¨çš„ç©ºé—´æ–¹æ³•å…¶æœ¬è´¨å°±æ˜¯å®šä¹‰å¾ˆå¤škernel functionï¼Œå®šä¹‰çš„ç›¸ä¼¼åº¦å‡½æ•°å…¶å®å°±æ˜¯ä¸Šè¿°kernel functionçš„åŠ æƒï¼Œå…¶ä¸­è¿™ä¸ªæƒé‡å‘é‡éœ€è¦å­¦ä¹ è·å–ã€‚ ä¸‹é¢å°†ä¸Šè¿°çš„è°±æ–¹æ³•çš„å…¬å¼è¿›è¡ŒåŒ–ç®€ï¼š è°±CNNï¼šå…¶å¯ä»¥å°†çŸ©é˜µåˆ†è§£æˆnä¸ªåŸºåº•ï¼Œäºæ˜¯å°±åŒ–ç®€æˆä¸ºå¤šä¸ªåŸºåº•ç›¸ä¹˜çš„åŠ æƒå’Œï¼Œæƒé‡å¯ä»¥ç†è§£æˆåœ¨ä¸åŒè°±ç©ºé—´ä¸Šçš„åæ ‡ã€‚äºæ˜¯å°±åŒ–ç®€æˆMoNetçš„è¡¨è¾¾å½¢å¼ã€‚ ChebyNetï¼šå°†å¤šé¡¹å¼è¿›è¡Œå±•å¼€ï¼Œäºæ˜¯ä¹Ÿå¯ä»¥åŒ–ç®€æˆä¸ºMoNetçš„å½¢å¼ã€‚ GCNï¼šå…¶æœ¬è´¨å°±æ˜¯ä»…ä»…ä½¿ç”¨ChebyNetå‰é¢çš„ä¸¤é˜¶å‚æ•°ï¼Œäºæ˜¯å°±å½¢æˆä¸Šè¿°MoNetçš„å½¢å¼ã€‚ä½†æ˜¯å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸¤é¡¹çš„æƒé‡å€¼æ˜¯å…±äº«çš„ã€‚ å€¼å¾—æ€è€ƒçš„æ˜¯ï¼ŒGCNçš„å‚æ•°æœ€å°‘ï¼Œä½†æ˜¯å…¶æ•ˆæœç¡®å®æœ€å¥½çš„ï¼Œä¸ºä»€ä¹ˆï¼Ÿ æç ”ç©¶å¤šè®©è‡ªå·±çš„è„‘å­è½¬ï¼Œå°‘è®©è‡ªå·±çš„GPUè½¬ã€‚ ä¸‹é¢æ¥è§£é‡Šä¸ºä»€ä¹ˆä¸Šé¢çš„ä¸¤ä¸ªæ–¹æ³•ä¸å¦‚ä¸‹é¢çš„GCNå¥½çš„åŸå› ã€‚ å¼•å…¥å¹³æ»‘æ»¤æ³¢å™¨çš„æ¦‚å¿µï¼Œå®šä¹‰äº†ä¸Šè¿°çš„æè¿°å¹³æ»‘æ€§çš„å…¬å¼ã€‚å…¶ä¸­$L$ æ ‡æ³¨åŒ–ä¹‹åçš„LaplaciançŸ©é˜µã€‚å¦‚æœæ˜¯æ ‡å‡†åŒ–ä¹‹å‰ï¼Œå°±å¯ä»¥åœ¨å³è¾¹å»æ‰å¯¹åº”çš„åˆ†æ¯é¡¹ã€‚ $x_u,x_v$å¯ä»¥çœ‹æˆæ˜¯$x$çš„åˆ†é‡ï¼Œ$x$æ˜¯ä¸€ä¸²ä¿¡å·å‘é‡ã€‚ $A_{uv}$ å¯¹åº”çš„æ˜¯é‚»æ¥çŸ©é˜µåœ¨å¯¹åº”ä½ç½®ä¸Šçš„ç³»æ•°ï¼Œå³è¾¹ç›¸è¿ä¸º1ï¼Œå¦åˆ™å°±ä¸º0ã€‚ å› æ­¤å¯å¾—ï¼Œåœ¨æœ‰è¾¹ç›¸è¿çš„ä¸¤ä¸ªèŠ‚ç‚¹çš„å–å€¼ç›¸å·®è¶Šå°ï¼Œè¶Šç›¸ä¼¼ï¼Œåˆ™è®¡ç®—å€¼å°±è¶Šå°ï¼Œè¶Šå¹³æ»‘ã€‚åä¹‹ï¼ŒäºŒè€…å–å€¼ç›¸å·®è¶Šå¤§ï¼Œè®¡ç®—å€¼è¶Šå¤§ï¼Œå¹³æ»‘æ€§è¶Šå·®ã€‚ ä¹Ÿå¯ä»¥è§£é‡Šä¸ºè¿è¾¹çš„èŠ‚ç‚¹å°½å¯èƒ½çš„è¦ç›¸ä¼¼ã€‚ æ ¹æ®ç‰¹å¾å€¼çš„å®šä¹‰ï¼š$u_i\\lambda_i=Lu_i\\ \\Rightarrow \\ \\lambda_i=u_i^TLu_i$ ã€‚ äºæ˜¯$\\lambda_i$å°±å¯ä»¥çœ‹ä½œæ˜¯$u_i$çš„é¢‘ç‡ï¼Œæˆ–å¹³æ»‘åº¦ã€‚ eg. $u_i=(1,1,â€¦,1)^T$å¯¹åº”çš„$\\lambda_i=0$ï¼Œå³ç”±äºä¿¡å·å…¨ç§°éƒ½æ²¡æœ‰å˜åŒ–ï¼Œå¯¹åº”ç‰©ç†æ„ä¹‰å°±æ˜¯é¢‘ç‡ã€‚ äºæ˜¯å°±å¼•å‡ºäº†åŸºç¡€æ»¤æ³¢å™¨çš„æ¦‚å¿µï¼Œå°† $u_iu_i^T$ ä½œä¸ºåŸºç¡€æ»¤æ³¢å™¨ã€‚ é¦–å…ˆï¼Œå¯ä»¥å°†å›¾ä¿¡å·$x$åˆ†è§£ä¸ºä¸Šè¿°çš„å½¢å¼ã€‚ ä¹‹åï¼Œå°†ä¸Šè¿°çš„åŸºç¡€æ»¤æ³¢å™¨ä¹˜åˆ°$x$ä¸Šï¼Œç”±äºæ­£äº¤æ€§å°±å°†å…¶ä»–ä¿¡å·è¿‡æ»¤ï¼Œä»…ä»…ç•™ä¸‹å½“å‰çš„ä¿¡å·åŸºä¸‹çš„åˆ†é‡$\\alpha_iu_i$ã€‚ äºæ˜¯å›åˆ°ä¹‹å‰çš„è°±CNNä¸Šï¼š è¿™é‡Œçš„è°±CNNå°±ç›¸å½“äºä¸€ç³»åˆ—çš„åŸºç¡€æ»¤æ³¢å™¨çš„åŠ æƒä¹‹å’Œã€‚ é‚£ä¹ˆChebyNetè¿™ç§æ»¤æ³¢çš„æ•ˆæœä¸å¥½ï¼Ÿ å› ä¸ºè¿™é‡Œä½¿ç”¨çš„$L^k$å¯¹åº”çš„ç‰¹å¾å€¼å°±ä¸º$\\lambda_i^k$ï¼Œç›¸å½“äºæ˜¯ä¸ªé«˜é€šçš„æ»¤æ³¢å™¨ã€‚ åœ¨ChebyNeté‡Œé¢æœ‰å¾ˆå¤šçš„é«˜é€šé¡¹ï¼Œè¿™æ ·å°±ä¼šé€ æˆä½é¢‘ä¿¡å·è¢«è¿‡æ»¤ï¼Œå¯¼è‡´æ•´ä½“çš„æ•ˆæœå˜å·®ã€‚ äºæ˜¯GCNè®¾è®¡äº†ä½é€šæ»¤æ³¢å™¨ï¼Œä»…ä»…ä¿ç•™å‰ä¸¤é¡¹ï¼Œåœ¨å®é™…çš„å®éªŒæ•ˆæœæ˜¯å¾ˆå¥½çš„ã€‚ è°±CNNå…¶æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå•å…ƒçš„è¿‡æ»¤å™¨ã€‚ ChebyNetæ˜¯ä¸€ä¸ªé«˜é€šçš„è¿‡æ»¤å™¨ï¼Œé˜»æ­¢ä½é¢‘ä¿¡å·çš„é€šè¿‡ã€‚ GCNçš„ä¸€ç§ä½é€šæ»¤æ³¢å™¨ï¼Œé˜»æ­¢é«˜é¢‘ä¿¡å·çš„é€šè¿‡ã€‚ Graph Poolingåœ¨ç¥ç»ç½‘ç»œé‡Œé¢ä¸ä»…ä»…åªæœ‰å·ç§¯ï¼Œè¿˜æœ‰Poolingæ± åŒ–ï¼Œä¹Ÿå«ä¸‹é‡‡æ ·ã€‚åœ¨å›¾ç¥ç»ç½‘ç»œä¸­ä¹Ÿå«èšåˆæ“ä½œã€‚ç›®å‰ä¸»è¦çš„ç ”ç©¶æ–¹æ³•åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯å›¾çš„ç²—åŒ–ï¼Œå°†ç›¸ä¼¼åº¦é«˜çš„èŠ‚ç‚¹è¿›è¡Œåˆå¹¶ï¼Œå¦ä¸€ç§æ˜¯èŠ‚ç‚¹çš„é€‰æ‹©æ³•ï¼Œè®¡ç®—èŠ‚ç‚¹çš„é‡è¦æ€§æŒ‡æ ‡ï¼Œå°†é‡è¦æ€§å¼ºçš„èŠ‚ç‚¹é€‰å‡ºæ¥ï¼Œæ¥å–ä»£è¿™ä¸€ç»„èŠ‚ç‚¹ã€‚ åŸå…ˆçš„æ–¹æ³•æ˜¯å…ˆå¯¹å›¾ä¸Šçš„èŠ‚ç‚¹è¿›è¡Œä¸€æ¬¡èšç±»ï¼Œç„¶åå°†ç±»å‹çš„èŠ‚ç‚¹è¿›è¡Œèšåˆæ“ä½œã€‚å…¶ä¸­èšåˆçš„åŠæ³•åŒ…æ‹¬æ±‚æœ€å¤§æœ€å°ä»¥åŠæ±‚å¹³å‡ç­‰ã€‚äºæ˜¯è¿™ä¸ªé˜¶æ®µäººä»¬ä¹æ­¤ä¸ç–²çš„å°è¯•å„ç§å›¾èšç±»çš„æ–¹æ³•æ¥æé«˜Poolingçš„æ•ˆæœã€‚ åæ¥ä¸€ç¯‡è®ºæ–‡Hierarchical graph representationçš„æ–¹æ³•ä¸»è¦æ˜¯å°†èšç±»çš„éƒ¨åˆ†å’Œèšåˆéƒ¨åˆ†åˆäºŒä¸ºä¸€ï¼Œç„¶åè¿›è¡Œç«¯å¯¹ç«¯çš„å­¦ä¹ ï¼Œç›¸å½“äºæ˜¯ä¸€ç§è½¯èšç±»æ¥å­¦ä¹ ä¸€ç§ç›¸ä¼¼æ€§çš„å‚æ•°æ¥å°†è¡¨ç¤ºæ˜¯å¦è¿›è¡Œèšç±»ã€‚äºæ˜¯ä¹‹å‰å¯¹èšç±»æ–¹æ³•çš„ç ”ç©¶å°±æ²¡äº†æ„ä¹‰ã€‚ å…·ä½“çš„æ“ä½œå°±æ˜¯è®­ç»ƒä¸€ä¸ªMLPï¼Œå°†èŠ‚ç‚¹çš„å±æ€§ç‰¹å¾ä½œä¸ºè¾“å…¥å€¼ï¼Œè¾“å‡ºçš„æ˜¯ä¸€ä¸ªé‡è¦æ€§çš„å‚æ•°å€¼ã€‚ æ¯”è¾ƒå­å›¾çš„é‡è¦æ€§å‚æ•°ï¼Œç”¨å‚æ•°å€¼æœ€é«˜çš„èŠ‚ç‚¹æ¥è¡¨å¾æ•´ä¸ªå­å›¾ï¼Œæ”¾åˆ°åŸæ¥çš„å›¾ä¸­ã€‚ ä½†æ˜¯ç›®å‰è¿™ä¸ªèšåˆæ¯”è¾ƒæœ‰äº‰è®®ï¼Œå› ä¸ºæœ‰äº›ä»»åŠ¡å¦‚èŠ‚ç‚¹çº§åˆ«çš„ä»»åŠ¡ï¼ŒImageä¸Šçš„åƒç´ åˆ†ç±»æ˜¯ä¸éœ€è¦poolingçš„ï¼Œä½†æ˜¯å¦‚æœåšçš„æ˜¯æ•´ä¸ªå›¾çš„åˆ†ç±»æ˜¯éœ€è¦poolingçš„ã€‚è¿‘å¹´æ¥ï¼Œå¦‚åŒ–å­¦ç»“æ„çš„å‘ç°ï¼Œè›‹ç™½è´¨ç»“æ„çš„å‘ç°ï¼Œäº¤é€šæµè¯†åˆ«ç­‰éƒ½æ˜¯å›¾åˆ†ç±»çš„ä»»åŠ¡ï¼Œæ˜¯éœ€è¦Poolingã€‚ å›¾ç¥ç»ç½‘ç»œçš„è¡¨è¾¾èƒ½åŠ›æ¦‚è¿°Expressive Power of Graph Nerual Networksâ€”â€”å›¾ç¥ç»ç½‘ç»œä»¥å¤–çš„æ•…äº‹ã€‚åœ¨è¡¨è¾¾æ€§æ–¹é¢ï¼Œç¡®å®åœ¨ä¸€å®šç¨‹åº¦ä¸Šæ€èµ·äº†ä¸€äº›è®¨è®ºï¼Œæœ¬æ¥ä»¥ä¸ºå…¶å’Œå·ç§¯ç¥ç»ç½‘ç»œä¸€æ ·å¯ä»¥æ€èµ·ä¸€æ¬¡çƒ­æ½®ï¼Œä½†æ˜¯å…¶ä»…ä»…æ€èµ·äº†ä¸€æ³¢è®ºæ–‡ï¼Œå› ä¸ºå¯¹å…¶å¸¦æ¥æ”¹å˜çš„é¢†åŸŸé‡Œé¢ã€‚ å›¾åŠç›‘ç£å­¦ä¹ æ˜¯å›¾ç½‘ç»œæ ‡å‡†ç ”ç©¶çš„é—®é¢˜ï¼Œå°±æ˜¯ä¸€äº›èŠ‚ç‚¹ä¸Šæœ‰å†…å®¹ï¼Œä¸€äº›èŠ‚ç‚¹ä¸Šæ²¡æœ‰å†…å®¹ï¼Œäºæ˜¯é€šè¿‡åŠç›‘ç£å­¦ä¹ æ¥ç»™æ²¡æœ‰å†…å®¹çš„èŠ‚ç‚¹æ‰“ä¸Šæ ‡ç­¾ã€‚åœ¨ç”µå•†å’Œç¤¾äº¤ç½‘ç»œä¸Šæœ‰è¾ƒå¤šçš„å¼•ç”¨ï¼Œä½†æ˜¯åœ¨çŸ¥è¯†å›¾è°±ä¸Šçš„æ•ˆæœç›®å‰è¿˜æ˜¯æœªçŸ¥ã€‚ ç›®å‰ï¼Œå›¾ç½‘ç»œçš„ç ”ç©¶è¿˜æ˜¯åŸºäºç»éªŒ(å…ˆéªŒçŸ¥è¯†)ï¼Œå¯å‘å¼(çæƒ³ççŒœ)ï¼Œå®éªŒè¯•é”™(å°±æ˜¯è¿æ°”å¥½è¯•å‡ºæ¥)ï¼Œå…¶å®è¿™ä¹Ÿä¼šæ˜¯ç§‘ç ”çš„åŸºæœ¬å¥—è·¯ï¼Œå½“å¹´ç¥ç»ç½‘ç»œã€CNNç­‰ä¹Ÿæ˜¯è¢«äººä»¬ç§°ä¸ºç‚¼é‡‘æœ¯è¢«äººè´¨ç–‘ã€‚ æˆªè‡³ç›®å‰ä¹Ÿæ²¡æœ‰å¾ˆå¥½çš„å¯¹è¡¨è¾¾æ€§çš„è§£é‡Šï¼Œè€Œå¯¹äºç¥ç»ç½‘ç»œè€Œè¨€ï¼Œå½“å¹´æ˜¯å…ˆç ”ç©¶çš„ä»–çš„è¡¨è¾¾æ€§ï¼Œå…ˆä½¿ç”¨å•å±‚çš„ç¥ç»ç½‘ç»œæ¥è¿›è¡Œé€»è¾‘ä¸Šç¬¦å·çš„è§£é‡Šï¼Œä»€ä¹ˆâ€œæˆ–â€ã€â€œä¸â€ã€â€œéâ€ï¼Œä½†æ˜¯å•å±‚æ— æ³•è¡¨ç¤ºâ€œå¼‚æˆ–â€çš„é€»è¾‘ï¼Œè€Œå°†å…¶å˜æˆåŒå±‚ä¹‹åå°±å¯ä»¥è¡¨è¾¾ï¼Œè¿›è€Œè¯æ˜äº†åœ¨ä¸€å®šçš„æ¡ä»¶ä¸‹ï¼Œç¥ç»ç½‘ç»œå¯ä»¥æ‹Ÿåˆæ»¡è¶³ä¸€å®šæ¡ä»¶çš„ä»»ä½•å‡½æ•°ï¼Œå³ç¥ç»ç½‘ç»œå…·æœ‰å¾ˆå¼ºçš„è¡¨è¾¾æ€§ï¼Œäºæ˜¯å°±å°†å…¶ä½œä¸ºä¸€ç§é€šç”¨çš„è¡¨ç¤ºå™¨æ¥ä½¿ç”¨ã€‚ æ›¾ç»å›¾ç½‘ç»œè¢«ç”¨åšç»éªŒæ€§çš„åŒ–å­¦æ€§è´¨é¢„æµ‹ï¼Œå°±æ˜¯ç»™å®šä¸€ä¸ªåˆ†å­å¼å’ŒåŒ–å­¦åˆ†å­ä¸­æ¯ä¸ªåŸå­çš„å±æ€§ï¼Œå¯¹åº”çš„å°†æ˜¯å¦æœ‰æ¯’ç­‰æ ‡ç­¾è¾“å…¥è¿›è¡Œè®­ç»ƒï¼Œé¢„æµ‹ç»™å®šåŒ–å­¦åˆ†å­å¼æ¥åˆ¤è¯»å…¶æ˜¯å¦æœ‰æ¯’ã€‚ä¸€åº¦åœ¨Natureä¸Šé¢å‘äº†æ•°ç¯‡ï¼Œå¼•å‘äº†ä¸€å®šçš„äº‰è®®ã€‚è¿˜æœ‰åšåœ°éœ‡é¢„æµ‹çš„ï¼Œè¯æ˜å…¶è¡¨è¾¾èƒ½åŠ›è¿˜å¯ä»¥ã€‚ è¡¨è¾¾èƒ½åŠ›çš„å®šä¹‰äºæ˜¯å¾ˆå¤šäººå°±ä¼šé—®ï¼Œä½•ä¸ºè¡¨è¾¾èƒ½åŠ›ï¼Œè¿™é‡Œæœ‰ä¸¤ç§è§£é‡Šã€‚ ç¬¬ä¸€ç§å°±æ˜¯åˆ©ç”¨ç¼–ç èƒ½åŠ›æ¥è¡¨å¾ï¼Œé€šè¿‡çœ‹ç½‘ç»œä»¥è¡¨å¾å¤šå°‘ä¸œè¥¿ï¼Œå³å¯ä»¥ç”¨å¤šå°‘ä½çš„äºŒè¿›åˆ¶ç¼–ç æ¥è¡¨ç¤ºã€‚eg. 5ä¸ªbitså¯ä»¥è¡¨å¾32ä¸ªç±»åˆ«çŠ¶æ€ã€‚ å¦ä¸€ç§å°±æ˜¯ç”¨è¿‘ä¼¼å™¨çš„è¿‘ä¼¼èƒ½åŠ›æ¥è¿›è¡Œç†è§£ï¼Œè¿™é‡Œä»¥ç¥ç»ç½‘ç»œä¸ºä¾‹ï¼š ä¸€å±‚æ„ŸçŸ¥æœºä¸æ˜¯ä¸€ä¸ªé€šç”¨çš„è¿‘ä¼¼å™¨ï¼Œä»–è¿å¼‚æˆ–éƒ½æä¸å®šã€‚ å¤šå±‚æ„ŸçŸ¥æœºç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªé€šç”¨çš„è¿‘ä¼¼å™¨ï¼Œå¹¶ä¸”å…¶è¡¨å¾èƒ½åŠ›æ˜¯éšç€å±‚æ•°å‘ˆç°æŒ‡æ•°ä¸Šå‡çš„ç‰¹ç‚¹ï¼Œå¦‚æœå¢åŠ èŠ‚ç‚¹çš„æ•°ç›®åˆ™æ˜¯å‘ˆç°çº¿æ€§ä¸Šå‡ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆæ·±åº¦å­¦ä¹ å¯ä»¥è¿™ä¹ˆæˆåŠŸã€‚ åº”ç”¨ä¸‹å›¾æ˜¯åˆ©ç”¨ä¸åŒå±‚æ•°çš„GCNè¿›è¡Œåˆ†ç±»çš„é—®é¢˜ï¼Œå¦‚æœä½¿ç”¨å•å±‚çš„GCNæ˜¯æ²¡åŠæ³•åŒºåˆ†ä¸Šè¿°è¿™ä¹ˆå¤šçš„èŠ‚ç‚¹ã€‚ å¦‚æœå°†GCNçš„å±‚æ•°å¢åŠ åˆ°ä¸¤å±‚ï¼Œäºæ˜¯å°±å¯ä»¥å°†ä¸Šè¿°å¤šæœ‰çš„èŠ‚ç‚¹è¿›è¡ŒåŒºåˆ†ã€‚ åŒæ—¶å­˜åœ¨ä¸€ç§ç½‘ç»œï¼Œæ— è®ºä½ çš„GCNå±‚æ•°æœ‰å¤šæ·±ï¼Œéƒ½æ˜¯æ²¡åŠæ³•åŒºåˆ†æ‰€ä»¥çš„èŠ‚ç‚¹ã€‚ å…·ä½“çš„ä¾‹å­å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œç»™å‡ºçš„ä¸¤ç§ç»“æ„æ˜¯ä¸ä¸€æ ·çš„ï¼Œä½†æ˜¯GCNä¸ç®¡æ€ä¹ˆåšä¹Ÿæ— æ³•åŒºåˆ†ä¸Šè¿°çš„ä¸¤ç§ç½‘ç»œã€‚ åŸå› æ˜¯GCNä¸»è¦åˆ»ç”»çš„æ˜¯ä¸€ä¸ªä»¥ä¸€ä¸ªèŠ‚ç‚¹ä¸ºä¸­å¿ƒå±•å¼€çš„æ ‘çŠ¶ç»“æ„ï¼Œç›¸å½“äºæ˜¯ç”¨ä¸€ä¸ªæ ‘æ¥åˆ»ç”»ä¸€ä¸ªå›¾ç»“æ„ï¼Œä¸Šè¿°ä»¥æ¯ä¸ªèŠ‚ç‚¹å±•å¼€çš„æ ‘å½¢ç»“æ„éƒ½æ˜¯ç›¸åŒçš„ã€‚å…¶è¡¨è¾¾èƒ½åŠ›æ˜¯å­˜åœ¨ä¸Šé™çš„ã€‚ ä¸‹é¢å¦‚ä½•æ£€æµ‹ä¸¤ä¸ªå›¾æ˜¯åŒæ„çš„ï¼Œæ€æ ·æ£€æµ‹å‡ºæ¥ï¼Ÿè¿™é‡Œä½¿ç”¨æ¯”è¾ƒå¤šçš„æ–¹æ³•æ˜¯WLæµ‹è¯•ã€‚ WLæµ‹è¯•(åŒæ„æµ‹è¯•) ä¸»è¦çš„æ–¹æ³•çš„æ­¥éª¤ä¸ºï¼š ä½¿ç”¨TFæ–¹æ³•ï¼Œä¿¡æ¯æ£€ç´¢é‡Œé¢çš„ä¸€ç§åŠæ³•ï¼š é¦–å…ˆæ¯”è¾ƒçš„æ˜¯æ¯ä¸ªèŠ‚ç‚¹çš„èŠ‚ç‚¹å€¼çš„é¢‘æ¬¡ï¼Œå¦‚ç¬¬ä¸€ä¸ªå›¾æœ‰1ä¸ª1ã€3ä¸ª2ã€2ä¸ª6ï¼Œç¬¬äºŒä¸ªå›¾2ä¸ª1ã€1ä¸ª2ã€3ä¸ª6ï¼Œäºæ˜¯ç»“æ„éƒ½ä¸éœ€è¦æ¯”ä¹å·²ç»åˆ¤æ–­å‡ºä¸¤ä¸ªå›¾ä¸ä¸€æ ·ï¼Œä¸æ˜¯åŒæ„çš„ã€‚ ä¹‹åå¦‚æœé¢‘æ¬¡ç›¸åŒï¼Œå°±å°†èŠ‚ç‚¹å€¼çš„æ—è¾¹æ ‡è®°ä¸Šå„ä¸ªé‚»æ¥èŠ‚ç‚¹å€¼ï¼Œç„¶åå†æ¬¡è¿›è¡Œæ¯”è¾ƒã€‚ å¦‚æœä¸€é˜¶é‚»å±…ä¹Ÿç›¸åŒï¼Œå°±æ¯”è¾ƒäºŒé˜¶ã€ä¸‰é˜¶ç­‰é‚»å±…ï¼Œä¸æ–­é‡å¤ä¸‹å»ã€‚ å¦‚æœä¸æ–­é‡å¤æ— ç©·å¤§æ¬¡è¿˜æ˜¯æ²¡æœ‰æ¯”è¾ƒå‡ºæ¥ï¼Œäºæ˜¯å°±æ˜¯åŒæ„ï¼Œä½†æ˜¯å¦‚æœä¸­é—´æœ‰ä¸€æ¬¡å¯¹ä¸ä¸Šï¼Œäºæ˜¯å°±ä¸åŒæ„äº†ã€‚å› æ­¤è¿™ä¸ªæµ‹è¯•çš„ä¸»è¦ç›®çš„æ˜¯è¯ä¼ªï¼Œä¸æ˜¯è¯å®ã€‚ ç”±ä¸Šé¢çš„å›¾å¯çŸ¥ï¼ŒWLæµ‹è¯•çš„å†…æ ¸å…¶å®æ˜¯ä¸€ä¸ªæ ‘çŠ¶çš„ç»“æ„ï¼Œå…¶æ˜¯ä¸€ä¸ªrooted subtreeçš„ç»“æ„ï¼Œå°±æ˜¯æ±‚é‚»æ¥ç‚¹æ±‚å¯¼äºŒé˜¶é‚»æ¥ç‚¹å°±åˆå¾—åˆ°çš„æ˜¯è‡ªå·±æœ¬èº«çš„æƒ…å†µã€‚ åŸºäºè¿™ç§æƒ…å†µGCNåœ¨è®¾è®¡æ˜¯å°±æ²¡æœ‰æ±‚ä¸€é˜¶é‚»æ¥ç‚¹ä»¥ä¸Šçš„èŠ‚ç‚¹ï¼Œå…¶å®ä¸æƒ³å·ç§¯ç½‘ç»œä¸æ–­å¢åŠ æ·±åº¦å¯ä»¥æ˜¯è¡¨è¾¾èƒ½åŠ›æŒ‡æ•°ä¸Šå‡ï¼Œå›¾å·ç§¯çš„éšç€é‚»æ¥ç‚¹çš„é˜¶æ•°ä¸æ–­å‡é«˜ï¼Œå…¶è¡¨è¾¾å­˜åœ¨ä¸Šé™ã€‚ Connection Between GNN and WL testå­¦æœ‰ä½™åŠ›çš„åŒå­¦å¯ä»¥æ¥çœ‹ä¸€ä¸‹ã€‚ åœ¨è®ºæ–‡é‡Œåˆä¸ªå¾ˆé‡è¦çš„æ¦‚å¿µï¼Œå³è¡¨è¾¾èƒ½åŠ›å¦‚ä½•éªŒè¯ï¼Œå°±æ˜¯çœ‹åœ¨è®­ç»ƒé›†çš„å‡†ç¡®æ€§ã€‚ è¡¨è¾¾èƒ½åŠ›å¼ºçš„ç½‘ç»œï¼Œåœ¨è®­ç»ƒé›†ä¸Šæ‹Ÿåˆçš„æ•ˆæœå°±æ˜¯è¶Šå¼ºï¼Œæ¥ä¸€ä¸ªæ›´å¤æ‚çš„ä¸œè¥¿å°±å¯ä»¥æ‹Ÿåˆçš„æ›´è¿‘ã€‚å¦‚äºŒæ¬¡å‡½æ•°çš„è¡¨è¾¾èƒ½åŠ›å°±è¶…è¶Šä¸€æ¬¡å‡½æ•°ï¼Œåœ¨è®­ç»ƒé›†ä¸Šæ‹Ÿåˆçš„æ›´å¥½ã€‚ éšç€è®­ç»ƒæ¬¡æ•°çš„å¢åŠ ï¼Œçœ‹è®­ç»ƒé›†æœ€åçš„ç»“æœæ‹Ÿåˆçš„èƒ½åŠ›èƒ½åŠ›ä¸Šé™è¶Šé«˜ï¼Œå…¶è¡¨è¾¾æ€§å°±è¶Šå¼ºã€‚ è€Œæ•´ç†æ³›åŒ–èƒ½åŠ›çš„æ•ˆæœæ˜¯çœ‹çš„æ˜¯å»ºç«‹åœ¨æµ‹è¯•é›†test set ä¸Šçš„ç»“æ„ã€‚(ä¸æ˜¯éªŒè¯é›†ä¹Ÿä¸æ˜¯è®­ç»ƒé›†)ã€‚ å¯¹åº”ä¸€äº›ç¥ç»ç½‘ç»œï¼Œå…¶è¡¨è¾¾èƒ½åŠ›å¼ºï¼Œä½†æ˜¯ç°åœ¨çš„ä¼˜åŒ–æŠ€æœ¯ä¸æ˜¯å¾ˆå¼ºï¼Œå¯¼è‡´å…¶trainä¸å¥½ï¼Œåœ¨æµ‹è¯•é›†ä¸Šçš„æ³›åŒ–èƒ½åŠ›å¾ˆå·®ï¼Œå³è¿‡æ‹Ÿåˆäº†ï¼Œå…¸å‹çš„ä¾‹å­å°±æ˜¯å…¨è¿æ¥ç¥ç»ç½‘ç»œã€‚ è¡¨è¾¾èƒ½åŠ›æ˜¯ç½‘ç»œèƒ½åŠ›çš„ä¸Šé™ï¼Œéšç€ä¼˜åŒ–ç†è®ºçš„æ·±å…¥ï¼Œè®­ç»ƒèƒ½åŠ›çš„ä¸ç®—å¢å¼ºï¼Œå…¶æ³›åŒ–èƒ½åŠ›ä¼šè¶Šæ¥è¶Šå¥½ï¼Œäºæ˜¯å°±ç½‘ç»œçš„è¡¨è¾¾èƒ½åŠ›æ‰æ˜¯è¡¡é‡ç½‘ç»œèƒ½åŠ›çš„æœ€ç»ˆæ ‡å‡†ã€‚ ç§‘ç ”å¯ä»¥éšé£èµ·èˆï¼Œä½†æ˜¯ä¸èƒ½è·Ÿé£è·‘ã€‚ è¿™é‡Œå¯¹è¡¨è¾¾èƒ½åŠ›çš„ç ”ç©¶å…¶å®å°±æ˜¯è®©æˆ‘ä»¬å¯¹GNNçš„èƒ½åŠ›æœ‰ä¸ªå®¢è§‚çš„ç†è®ºä¸Šçš„ç†è§£ã€‚ GNNå¯¹äºå›¾åˆ†ç±»æ¥è¯´ï¼Œå·²ç»è¢«è¯å®æ˜¯æ— æ³•åšåˆ°é€šç”¨è¿‘ä¼¼å™¨ã€‚ GNNå¯¹äºèŠ‚ç‚¹çš„åˆ†ç±»æ¥è¯´ï¼Œæ˜¯å¯ä»¥åšåˆ°é€šç”¨çš„åˆ†ç±»å™¨çš„ã€‚å¯¹äºçœŸå®ä¸–ç•Œçš„å›¾æ¥è¯´ï¼Œå°±ç®—ä¸ç”¨èŠ‚ç‚¹å¤„çš„å±æ€§ç‰¹å¾ä¹Ÿæ˜¯å¯ä»¥é€šè¿‡WL teståŒºåˆ†å‡ºæ¥çš„ï¼Œå¹¶åšåˆ°é€šç”¨çš„åˆ†ç±»å™¨çš„ã€‚ å¯¹äºç‰¹å®šç±»å‹çš„ä»»åŠ¡æ¥è¯´ï¼Œè¿½æ±‚é€šç”¨çš„è¡¨è¾¾èƒ½åŠ›å…¶å®ä¹Ÿæ˜¯ä¸ç°å®çš„ï¼Œå› ä¸ºåœ¨é€šç”¨çš„è¡¨è¾¾èƒ½åŠ›ä¸ŠCNNè¦æ¯”GCNé«˜å¾ˆå¤šï¼Œä½†æ˜¯å¯¹äºè¿™ç§ç‰¹æ®Šçš„é—®é¢˜æ¥è¯´ï¼ŒGCNçš„æ•ˆæœä¼šæ›´å¥½ã€‚ å¯¹äºæ¯”è¾ƒå·çš„çº¢æµ·æ¥è¯´ï¼Œè¦æ€è€ƒæ˜¯å¦è¦ç»§ç»­å†…å·ï¼Œè‡ªå·±çš„ä¼˜åŠ¿åœ¨èƒ½åŠ›ï¼Œä»€ä¹ˆæ—¶å€™å…¨èº«è€Œé€€ã€‚ æˆ‘ä»¬çœŸæ­£éœ€è¦çš„æ˜¯ï¼Œé€šè¿‡ç›¸ä¼¼çš„å¯¹è±¡ï¼Œæ˜ å°„å¤„ä¸€ä¸ªç›¸ä¼¼çš„è¡¨è¾¾ï¼Œæ–¹ä¾¿ä¸‹æ¸¸ä»»åŠ¡çš„å›¾ç¥ç»ç½‘ç»œï¼Œå¦‚å›¾ä¸Šçš„é¢„è®­ç»ƒã€å¯¹æ¯”å­¦ä¹ ã€è‡ªç›‘ç£ç­‰ã€‚ æœ‰äººå¯èƒ½ä¼šé—®ï¼Œä¸åŒçš„å›¾ä¹‹é—´å¯å¦å®ç°è¿ç§»å­¦ä¹ ï¼Ÿä»å·¥ç¨‹å¸ˆçš„è§’åº¦æ¥çœ‹ï¼Œå°±æ˜¯äºŒè¯ä¸è¯´ç›´æ¥GPUå»è¯•è¯•ï¼Œä¸€èˆ¬æƒ…å†µæ˜¯åˆæ•ˆæœçš„é¢ï¼Œä½†æ˜¯æ•ˆæœä¸ä¸€å®šå¥½ï¼Œå› ä¸ºæ¯•ç«Ÿå›¾ç»“æ„ç›¸å·®è¿‡å¤§çš„è¯ï¼Œè¿ç§»è¿‡å»ä¸€æ ·ä¸æ˜¯å¾ˆå¤§ã€‚ å›¾ç¥ç»ç½‘ç»œçš„å‘å±•å…¶å®è¿‘æœŸä¹Ÿèµ°åˆ°äº†å°¾å£°ï¼Œè¿™äº”å¹´æ˜¯è“¬å‹ƒå‘å±•çš„æ—¶æœŸã€‚å¦‚æœä½ æ˜¯æç†è®ºçš„ï¼Œå¾ˆä¸å¹¸ç°åœ¨è‚¯å°±å‰©ä¸‹å‡ ä¸ªéš¾å•ƒçš„éª¨å¤´é—®é¢˜äº†ï¼Œä½†æ˜¯å¦‚æœä½ æ˜¯æåº”ç”¨çš„ï¼Œé‚£ä¹ˆç°åœ¨æ‰æ˜¯åˆšåˆšå¼€å§‹ï¼Œæœªæ¥å¯æœŸã€‚","link":"/2022/08/26/%E5%9B%BE%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/%E5%9B%BE%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E2%80%94%E2%80%94%E4%B8%AD%E7%A7%91%E9%99%A2%E8%AF%BE%E7%A8%8B/"},{"title":"å›¾ç¥ç»ç½‘ç»œâ€”â€”äººå¤§è¯¾ç¨‹","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡ä¸»è¦æ•´ç†äº†äººå¤§çš„é­è€å¸ˆå…³äºå›¾ç¥ç»ç½‘ç»œçš„ç ”ç©¶ä»¥åŠä¸€äº›è®¨è®ºï¼Œæ€»çš„æ¥è®²å…¶ä¸»è¦åæ•°å­¦ä¸€ç‚¹ï¼Œå¹¶ä¸”å›¾ç¥ç»ç½‘ç»œçš„ç ”ç©¶è¿˜æ˜¯å¤„äºç“¶é¢ˆæœŸã€‚ ä»¥ä¸‹æ˜¯æœ¬èŠ‚è¯¾ç¨‹çš„ä¸»è¦çš„å†…å®¹ã€‚ å›¾ç¥ç»ç½‘ç»œçš„åº”ç”¨æ¡ˆä¾‹ è¿˜æœ‰ä¸€äº›ç½‘ç»œç»“æ„ä¸å¤ªåƒå›¾ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥è¿‘ä¼¼çš„çœ‹æˆæ˜¯å›¾ã€‚ å›¾ç½‘ç»œçš„æ¦‚è¿°å›¾çš„å®šä¹‰ åœ¨å›¾è®ºçš„ç ”ç©¶ä¸­ï¼Œç»å¸¸ä½¿ç”¨ä¸€äº›çŸ©é˜µæ¥å¯¹å›¾è¿›è¡Œè¡¨å¾å­¦ä¹ ï¼Œå…¶ä¸­å…·æœ‰ä»£è¡¨æ€§çš„çŸ©é˜µæœ‰é‚»æ¥çŸ©é˜µã€æ‹‰æ™®æ‹‰æ–¯çŸ©é˜µä»¥åŠèŠ‚ç‚¹çš„ç‰¹å¾çŸ©é˜µã€‚ é¦–å…ˆæ¥çœ‹é‚»æ¥çŸ©é˜µï¼Œå¯¹äºæ— å‘å›¾è€Œè¨€ï¼Œé‚»æ¥çŸ©é˜µå°±æ˜¯åˆ»ç”»èŠ‚ç‚¹ä¹‹é—´æ˜¯å¦ç›¸è¿ï¼Œå¦‚æœæœ‰ç›¸è¿çš„æƒ…å†µå°±ä¸º1ï¼Œå¦åˆ™å°±æ˜¯ä¸º0ã€‚å¯¹å¸¦æƒçš„æ— å‘å›¾è€Œè¨€ï¼Œé‚»æ¥çŸ©é˜µä¸Šé¢çš„å€¼å°±æ¢æˆä¸¤ä¸ªç›¸è¿èŠ‚ç‚¹ä¹‹é—´çš„è¾¹çš„æƒé‡å€¼ã€‚ å¯¹äºæ— å‘å›¾è€Œè¨€ï¼Œä¸Šè¿°çŸ©é˜µå°±æ˜¯ä¸€ä¸ªå¯¹ç§°çš„çŸ©é˜µã€‚å¯¹äºæœ‰æœ‰å‘å›¾è€Œè¨€ï¼Œç”±äºå…¶èŠ‚ç‚¹çš„è¾¹æ˜¯å•å‘çš„ï¼Œäºæ˜¯å°±ä¸æ˜¯å¯¹ç§°çš„çŸ©é˜µã€‚ åœ¨å›¾ç½‘ç»œçš„ç ”ç©¶ä¸­ï¼Œä¸€èˆ¬å°†å…¶å‡è®¾ä¸ºä¸€ä¸ªæ— å‘å›¾æ¥ç ”ç©¶å’Œè®¨è®ºã€‚ ç„¶åæˆ‘ä»¬æ¥çœ‹åº¦æ•°çŸ©é˜µï¼Œè¿™ä¸ªåº¦æ•°çŸ©é˜µï¼Œä¸»è¦åˆ»ç”»çš„æ˜¯å’Œæ¯ä¸ªèŠ‚ç‚¹ç›¸è¿çš„é‚»æ¥ç‚¹çš„ä¸ªæ•°ã€‚å…¶ä¸­åº¦æ•°çŸ©é˜µæ˜¯ä¸€ä¸ªå¯¹è§’çŸ©é˜µã€‚ åŒæ—¶ï¼Œåœ¨ä¸å¸¦æƒçš„æ— å‘å›¾ä¸­ï¼Œå…¶å¯¹æ•°çŸ©é˜µå¯¹è§’çº¿ä¸Šçš„å€¼å…¶å®å°±æ˜¯é‚»æ¥çŸ©é˜µå¯¹åº”è¡Œçš„è¡Œå’Œã€‚$D_{ii}=\\sum_jA_{ij}$ ç„¶åï¼Œå¯¹çŸ©é˜µè¿›è¡Œå½’ä¸€åŒ–å¯å¾—ï¼š è¿›è€Œä½¿ç”¨åº¦æ•°çŸ©é˜µæ¥æ±‚è§£æ ‡å‡†åŒ–ä¹‹åçš„é‚»æ¥çŸ©é˜µå¦‚ä¸‹ï¼š æ³¨æ„è¿™é‡Œè€å¸ˆçš„PPTå†™é”™äº†ï¼Œå€’æ•°ä¸¤è¡Œçš„è¿™è¾¹æ²¡æœ‰å¯¹ç§°ã€‚ æœ€åæ¥æ±‚è§£æœ€é‡è¦çš„æ ‡å‡†åŒ–åçš„æ‹‰æ™®æ‹‰æ–¯çŸ©é˜µã€‚ è¿™è¾¹è€å¸ˆè¾ƒå¿«çš„è®²è§£äº†å…¶ä¸»è¦çš„çŸ©é˜µï¼Œç»†èŠ‚çš„éƒ¨åˆ†å¯ä»¥å‚è€ƒæ²ˆåä¼Ÿè€å¸ˆçš„å›¾ç½‘ç»œçš„è¯¾ç¨‹ï¼Œå°±æ˜¯æ‹‰æ™®æ‹‰æ–¯æ˜¯å…ˆæœ‰äº†ä¸€èˆ¬çš„æ‹‰æ™®æ‹‰æ–¯çŸ©é˜µ$L=D-A$ï¼Œä¹‹åå†è¿›è¡Œçš„å½’ä¸€åŒ–æ“ä½œï¼Œè€Œä¸”å½’ä¸€åŒ–æœ‰ä¸¤ç§ä¸€ç§æ˜¯ä¸å¯¹ç§°çš„å½’ä¸€åŒ–$L=I-D^{-1}A$ï¼Œå¦ä¸€ç§æ˜¯å¯¹ç§°çš„å½’ä¸€åŒ–æ“ä½œ$L=I-D^{-1/2}AD^{-1/2}$ ã€‚ åœ¨å®é™…çš„å·¥ç¨‹åº”ç”¨çš„æ—¶å€™ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šä¼´éšç€å¾ˆå¤šçš„ç‰¹å¾ï¼Œæ¯ä¸ªå±æ€§ç‰¹å¾å°±å¯ä»¥å†™æˆä¸€ä¸ª$f$ ç»´çš„ç‰¹å¾å‘é‡ï¼Œäºæ˜¯å°†æ‰€æœ‰çš„ç‰¹å¾å‘é‡è¿›è¡Œæ‹¼æ¥å°±å¯ä»¥å¾—å‡ºä¸€ä¸ªç‰¹å¾çŸ©é˜µ$X \\in R^{n \\times f}$ ã€‚ æœ‰äº†ç‰¹å¾çŸ©é˜µä¹‹åï¼Œå°±å¯ä»¥å°†å…¶å’Œå›¾çš„æ‹“æ‰‘ç»“æ„è”ç³»åœ¨ä¸€èµ·ï¼Œæ¥å­¦ä¹ é¢„æµ‹èŠ‚ç‚¹å’Œæ•´ä¸ªå›¾çš„æŸäº›æ€§è´¨ã€‚ å›¾å·ç§¯ç½‘ç»œGCNâ€”â€”å›¾ç½‘ç»œçš„é©å‘½å›¾ç½‘ç»œçœŸæ­£çš„ç«èµ·æ¥æ˜¯å»ºç«‹åœ¨GCNçš„è®¾è®¡å’Œå‘ç°ä¸Šï¼Œå…¶ä¸»è¦çš„åˆ›æ–°åœ¨äºå…¶å¼•å…¥èŠ‚ç‚¹å’Œä¸€é˜¶é‚»åŸŸèŠ‚ç‚¹çš„èšåˆæ“ä½œï¼Œç±»åˆ«CNNè®¾è®¡å‡ºæ ‘çŠ¶çš„å·ç§¯æ ¸ç»“æ„æ¥è§£å†³å›¾ä¸Šçš„èšåˆé—®é¢˜ã€‚ å…¶ä¸»è¦çš„æ¶ˆæ¯ä¼ é€’æœºåˆ¶å¦‚ä¸‹ï¼š $P$ çŸ©é˜µçš„ä¸Šé¢åŠ äº†æ³¢æµªçº¿ï¼Œå…¶å®å°±æ˜¯åœ¨åŸå›¾çš„æ¯ä¸ªèŠ‚ç‚¹ä¸Šå¢åŠ äº†è‡ªç¯åçŸ©é˜µã€‚å¦‚æœç”¨ä¹‹å‰æ²ˆè€å¸ˆçš„æ€è·¯æ¥ç†è§£å°±æ˜¯å°†å›¾ç»“æ„å¯¹åº”çš„æ‹‰æ™®æ‹‰æ–¯çŸ©é˜µç”¨ä¸€ä¸ªçŸ©é˜µå¤šé¡¹å¼æ¥è¿‘ä¼¼ï¼Œè¿™ä¸ªGCNä»…ä»…åº”ä¸€ä¸ªä¸€æ¬¡çš„çŸ©é˜µå¤šé¡¹å¼æ¥é€¼è¿‘ã€‚ $H^{(l)}$ä»£è¡¨çš„æ˜¯ä¸Šä¸€å±‚çš„ç‰¹å¾çŸ©é˜µï¼Œæ˜¯ä¸Šä¸€å±‚çš„æ‰€æœ‰çš„èŠ‚ç‚¹å‘é‡æ‹¼æ¥æˆçš„ã€‚ $W^{(l)}$ ä»£è¡¨çš„æ˜¯$l$è½¬æ¢åˆ°$l+1$å±‚çš„ç‰¹å¾å˜æ¢çŸ©é˜µï¼Œå› ä¸ºä¸€æ¬¡å›¾å·ç§¯ä¸»è¦åŒ…å«ä¸¤ä¸ªæ­¥éª¤ï¼Œå…ˆèšåˆä¹‹åè¿›è¡Œç‰¹å¾å˜æ¢ï¼Œå†å°†ç»“æœè¿‡ä¸€æ¬¡æ¿€æ´»å‡½æ•°RELUå°±å¾—åˆ°ä¸‹ä¸€å±‚çš„ç»“æœã€‚ ä¸Šå›¾ä¸ºäº†ç®€å•æ‰€ç¤ºï¼Œå°†ä¸Šé¢çš„ç‰¹å¾çŸ©é˜µæ¢æˆä¸€ä¸ªå•ä½é˜µã€‚ åœ¨èšåˆçš„æ—¶å€™ï¼Œå…ˆè‡ªç¯ï¼Œåè®¡ç®—å½’ä¸€åŒ–çš„ç³»æ•°ï¼Œå…¶å®ç®€åŒ–æ¥è¯´å°±æ˜¯é™¤ä»¥ä¸¤ä¸ªèŠ‚ç‚¹çš„åº¦å¼€æ ¹å·ï¼š X(0,1)'=\\dfrac {X(0,1)} {\\sqrt{deg(V_0)} \\sqrt{deg(V_1)}} ä¸Šè¿°åº¦æ•°çš„è®¡ç®—æ˜¯åŠ ä¸Šè‡ªç¯ä¹‹åçš„ã€‚ å¯¹åº”èŠ‚ç‚¹0æ¥ï¼Œä½¿ç”¨æ±‚å’Œçš„èšåˆæ–¹æ³•æ¥è®¡ç®—ï¼Œå°±å¯ä»¥å¾—å‡ºèŠ‚ç‚¹0èšåˆä¹‹åçš„ç»“æœï¼š X_0=[\\dfrac 1 {\\sqrt{4}\\sqrt{4}},\\dfrac 1 {\\sqrt{4}\\sqrt{3}},\\dfrac 1 {\\sqrt{4}\\sqrt{5}},\\dfrac 1 {\\sqrt{4}\\sqrt{2}},0,0 ]ç±»ä¼¼çš„å›¾ç¥ç»ç½‘è·¯å’Œå·ç§¯ç¥ç»ç½‘ç»œæœ‰ä¸€å®šçš„ç›¸ä¼¼ä¹‹å¤„ï¼š ä½†æ˜¯äºŒè€…ä¹Ÿæ˜¯æœ‰ä¸€å®šçš„åŒºåˆ«ï¼š é¦–å…ˆï¼ŒGCNä»…ä»…åªæœ‰ä¸€ä¸ªé€šé“ï¼Œè€ŒCNNå¯ä»¥å®šä¹‰å¤šä¸ªé€šé“ï¼› å…¶æ¬¡ï¼ŒCNNçš„æƒé‡æ˜¯éœ€è¦å­¦çš„ï¼Œä½†æ˜¯GCNçš„æƒé‡æ˜¯æ ¹æ®å›¾çš„ç»“æ„å›ºå®šçš„ï¼Œå…¶ä»…ä»…å’ŒèŠ‚ç‚¹çš„åº¦æœ‰å…³ã€‚ å›¾ç¥ç»ç½‘ç»œçš„ä»»åŠ¡ èŠ‚ç‚¹åˆ†ç±»çš„ä»»åŠ¡ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸€ç§åŠç›‘ç£å­¦ä¹ çš„ä»»åŠ¡ï¼Œå…¶æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ç›´ä¸€äº›èŠ‚ç‚¹çš„æ ‡ç­¾ï¼Œé€šè¿‡ç®—æ³•æ¥é¢„æµ‹æœªæ ‡è®°çš„èŠ‚ç‚¹ä¸Šçš„æ ‡ç­¾ã€‚ è¿æ¥é¢„æµ‹ä»»åŠ¡ï¼Œå…¶æœ¬è´¨ä¸Šä¹Ÿå°±æ˜¯ç”¨æ¥é¢„æµ‹ä¸¤ä¸ªç‚¹æ˜¯å¦æœ‰èŠ‚ç‚¹ç›¸è¿çš„é—®é¢˜ã€‚ä¸»è¦ç”¨åœ¨å•†å“æ¨èçš„ä»»åŠ¡ä¸Šé¢ã€‚ ç¤¾åŒºå‘ç°ä»»åŠ¡ï¼Œå…¶æœ¬è´¨ä¸Šå°±æ˜¯è¿›è¡Œå›¾èšç±»ä»»åŠ¡ã€‚ äº¤é€šé¢„æµ‹ï¼Œå°±æ˜¯å°†æ¯ä¸ªåœ°æ ‡ç®€åŒ–æˆä¸€ä¸ªèŠ‚ç‚¹ï¼Œäº¤é€šæµé‡å…¶å®å°±æ˜¯è¾¹ä¸Šçš„æƒé‡å‚æ•°ã€‚ è¯ç‰©ç ”å‘ï¼Œæœ¬è´¨å°±æ˜¯å°†åŒ–å­¦æœ‰æœºç‰©çš„åŒ–å­¦ç»“æ„è¾“å…¥ï¼Œè¾“å‡ºçš„æ˜¯å¯¹åº”çš„åŒ–å­¦æ€§è´¨ï¼Œç›®å‰æ˜¯å›¾ç½‘ç»œçš„ä¸»è¦åº”ç”¨ã€‚ä¹‹å‰å¯¹åº”è¯ç‰©ç»“æ„çš„ç ”ç©¶æ˜¯å°±ä¸NLPé‡Œé¢çš„æ–‡æœ¬ç»“æ„æ¥è¿›è¡Œçš„ï¼Œå°†è¯ç‰©ç»“æ„è½¬åŒ–æˆä¸€ç§æ–‡æœ¬å½¢å¼ã€‚ ç›®å‰åœ¨50ä¸ªåŸå­ä¹‹å†…çš„ç ”ç©¶è¿˜æ˜¯å¯ä»¥çš„ã€‚ä½†å¯¹äºçš„è¶…å¤§åˆ†å­çš„è›‹ç™½è´¨è¿˜æ˜¯æœ‰ä¸€å®šçš„ã€‚ å›¾ç½‘ç»œçš„ä¸‰ä¸ªä¸åŒè§†è§’æ»¤æ³¢å™¨â€”â€”GNNçš„è°±åŸŸè§£é‡Šå›¾ä¿¡å·åœ¨å›¾ç¥ç»ç½‘ç»œä¹‹å‰å°±æœ‰å…³äºå›¾ä¿¡å·å¤„ç†çš„ç›¸å…³çš„ç ”ç©¶ï¼Œå› æ­¤å›¾ç¥ç»ç½‘ç»œçš„ç ”ç©¶å…¶å®ç›¸æ¯”ä¹‹ä¸‹æ¯”ä¸æ˜¯å¾ˆæ–°é²œçš„ç ”ç©¶æ–¹å‘ã€‚ è¿™é‡Œå¯ä»¥ä½¿ç”¨å›¾ä¿¡å·å¤„ç†çš„æ€æƒ³æ¥çœ‹å¸¦å›¾ç½‘ç»œé—®é¢˜ã€‚ å›¾ç½‘ç»œç»“æ„å¼åŸºäºåœ°å›¾ä¸Šé¢çš„è·¯ç½‘å›¾çš„ï¼› èŠ‚ç‚¹å±æ€§æ˜¯åŸºäºæµ‹é‡åˆ°å½“åœ°çš„å®é™…æ¸©åº¦ï¼Œæœ‰ä¸€å®šçš„æµ‹é‡å™ªå£°åœ¨é‡Œé¢ã€‚ å› æ­¤ï¼Œæƒ³è¦é€šè¿‡è¯¥èŠ‚ç‚¹çš„é‚»å±…èŠ‚ç‚¹çš„æ¸©åº¦æ¥å¯¹å…¶æµ‹é‡å€¼è¿›è¡ŒSmoothå¹³æ»‘å¤„ç†ï¼Œå›¾ä¿¡å·å¤„ç†ã€‚ é€šè¿‡å°†å›¾ä¿¡å·ä¹˜ä»¥å¯¹åº”çš„æ‹‰æ™®æ‹‰æ–¯çŸ©é˜µ$L$ï¼Œæ¥å°†å›¾ä¿¡å·ä»ä¸­å¿ƒèŠ‚å‘é‚»æ¥ç‚¹ä¸Šé¢è½¬ç§»ã€‚ ç¬¬ä¸€ç§ä¹˜ä»¥ $2I-L$ å¾—åˆ°çš„é‚»æ¥ç‚¹ä¸Šé¢çš„å›¾ä¿¡å·æ˜¯æ­£çš„ï¼› ç¬¬äºŒç§ä¹˜ä»¥ $L$ çš„å¾—åˆ°çš„é‚»æ¥ç‚¹ä¸Šé¢çš„å›¾ä¿¡å·æ˜¯è´Ÿçš„ã€‚ å›¾å‚…é‡Œå¶å˜æ¢ å¾—åˆ°çš„ç‰¹å¾å€¼$\\lambda_i \\in[0,2]$ï¼Œå¹¶ä¸”æ˜¯å¯ä»¥å–åˆ°0çš„ï¼Œåœ¨æ²ˆè€å¸ˆçš„è¯¾ä¸­ï¼Œè¿™ä¸ªå‚æ•°å¯¹åº”çš„æ˜¯ä¿¡å·çš„å˜æ¢çš„é¢‘ç‡ã€‚ å›¾å‚…é‡Œå¶å˜æ¢ç›¸å½“äºå°†å›¾ä¿¡å·ä»åŸæ¥çš„ç‰¹å¾ç©ºé—´å˜æ¢åˆ°ä»¥$\\{u_i\\}_{i=1}^n$ä¸ºåŸºåº•çš„æ­£äº¤çš„å‘é‡ç©ºé—´ä¸Šå»ã€‚ çŸ©é˜µè®ºé‡Œé¢å…³äºçº¿æ€§å˜æ¢çš„éƒ¨åˆ†éœ€è¦å¤ä¹ ä¸€ä¸‹ã€‚ å¦‚å·¦å›¾æ‰€ç¤ºï¼Œå…¶æœ¬è´¨ä¸Šæ˜¯å°†å°†ä¸€ä¸ªä¿¡å·ç”¨å¤šç§ä¸åŒé¢‘ç‡çš„æ­£å¼¦ä¿¡å·æ¥é€¼è¿‘å‡ºæ¥ã€‚ç›¸å½“äºå°†æ—¶åŸŸä¸Šçš„ä¿¡å·å˜åˆ°é¢‘åŸŸä¸Šä¸åŒä¿¡å·çš„çº¿æ€§ç»„åˆã€‚ å¦‚å³å›¾æ‰€ç¤ºï¼Œæ˜¯ä¸€ä¸ªå’Œæ—¶åŸŸç›¸å…³çš„æ¯”è¾ƒç®€å•çš„å›¾ï¼Œæ±‚è§£å…¶æ‹‰æ™®æ‹‰æ–¯çŸ©é˜µçš„ç‰¹å¾å€¼å’Œç‰¹å¾å‘é‡å¯å¾—å›¾ä¸Šæ‰€ç¤ºã€‚ å½“$\\lambda_0=0$æ—¶ï¼Œå…¶å¯¹åº”çš„ç‰¹å¾å‘é‡æ˜¯ä¸€ä¸ªconstå‘é‡ï¼Œå¯ä»¥çœ‹å‡ºå…¶åŸºæœ¬æ˜¯ä¸å˜çš„ï¼Œçœ‹æˆå…¶é¢‘ç‡å°±æ˜¯0ï¼› éšç€ç‰¹å¾å‘é‡çš„å˜å¤§ï¼Œå…¶æ±‚å¾—ç‰¹å¾å‘é‡çš„é¢‘ç‡ä¹Ÿåœ¨ä¸æ–­å˜å¤§ï¼Œå¹¶ä¸”å…¶å¯¹åº”çš„ç‰¹å¾å€¼æ˜¯æ­£äº¤çš„ï¼› æœ€å¤§çš„ç‰¹å¾å€¼$\\lambda_n=2$æ—¶ï¼Œå› æ­¤é¢‘ç‡æœ€å¤§çš„å‘é‡ï¼Œå‘é‡çš„å€¼æ—¶ä¸€æ­£ä¸€è´Ÿäº¤æ›¿å˜åŒ–çš„ã€‚ Ring Graphçš„æ„ä¹‰å°±æ—¶å°†æ­£æ— ç©·å’Œè´Ÿæ— ç©·ç›¸è¿çš„å®æ•°è½´ã€‚ å›¾å‚…é‡Œå¶å˜åŒ–å’Œå‚…é‡Œå¶å˜åŒ–æ—¶ç­‰ä»·çš„ã€‚ å…¶æœ¬è´¨çš„å˜åŒ–æ—¶é¦–å…ˆä»èŠ‚ç‚¹åŸŸ(ç©ºåŸŸ)å˜æ¢åˆ°é¢‘åŸŸï¼Œä¹‹ååœ¨é¢‘åŸŸä¸Šè¿›è¡Œæ»¤æ³¢æ“ä½œï¼Œç„¶åå†å°†æ»¤æ³¢ä¹‹åçš„ä¿¡å·å˜å›åˆ°èŠ‚ç‚¹åŸŸä¸Šã€‚ è¿™é‡Œä¸¾ä¸ªä¾‹å­å°±æ˜¯ç»™ä¸€ä¸ªå›¾ä¿¡å·å¢åŠ äº†ç™½å™ªå£°ã€‚ç„¶åä½¿ç”¨ä¸€ä¸ªä½é€šæ»¤æ³¢å™¨å°†ç™½å™ªå£°å»é™¤åå¯ä»¥è¿‘ä¼¼çš„è¿˜åŸä¹‹å‰çš„åŸå§‹ä¿¡å·ã€‚ å›¾ç½‘ç»œåœ¨èŠ‚ç‚¹åŸŸä¸ŠèŠ‚ç‚¹åˆ†ç±»çš„é—®é¢˜æœ‰ç›¸å½“å¤šçš„åº”ç”¨ã€‚ åŒå¼‚é…å›¾æ˜¯åœ¨å›¾å­¦ä¹ é‡Œé¢æ¯”è¾ƒé‡è¦çš„å†…å®¹ã€‚ åŒé…å›¾ï¼šè¿æœ‰è¾¹çš„ç‚¹ï¼Œå…¶ä¹‹é—´æ€§è´¨æ˜¯æ¯”è¾ƒç›¸ä¼¼çš„ï¼Œä»¥ç¾å›½ä¸¤ä¸ªå…šæ´¾ä¹‹é—´çš„å…³ç³»ç½‘ç»œä¸ºä¾‹ã€‚ å¼‚é…å›¾ï¼šè¿æœ‰è¾¹çš„ç‚¹ï¼Œå…¶ä¹‹é—´çš„æ€§è´¨æ˜¯ç›¸åçš„ï¼Œè¿™é‡Œä»¥å…¬å¸ä¹‹é—´çš„ä¸Šä¸‹å±‚ä¹‹é—´çš„å½’å…³ç³»ä¸ºä¾‹ã€‚ å¯¹äºåŒé…å›¾æ¥è¯´ï¼Œå…¶ä½¿ç”¨æ¯”è¾ƒå¤šçš„æ˜¯ä½é€šæ»¤æ³¢å™¨ï¼Œå¯¹åº”çš„ç‰¹å¾å‘é‡æ˜¯å…¨1å‘é‡ï¼Œæœ€åå¯ä»¥é¢„æµ‹å‡ºæ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½æ˜¯ç›¸åŒçš„ã€‚ å¯¹äºå¼‚é…å›¾æ¥è¯´ï¼Œå…¶ä½¿ç”¨è¾ƒå¤šçš„æ˜¯é«˜é€šæ»¤æ³¢å™¨ï¼Œå¯¹åº”çš„ç‰¹å¾å‘é‡æ˜¯ä¸€æ­£ä¸€è´Ÿäº¤é”™çš„ï¼Œäºæ˜¯é¢„æµ‹å‡ºæ¥çš„æ¯ä¸ªèŠ‚ç‚¹çš„å€¼æ˜¯ç›¸åçš„ã€‚ å›¾å·ç§¯å’Œæ»¤æ³¢å™¨ ä¹‹å‰æ²ˆè€å¸ˆçš„è¯¾ç¨‹é‡Œé¢ä¹Ÿæ˜¯æœ‰è¿™ä¸ªçš„ï¼Œå›¾å·ç§¯åœ¨æ•°å­¦å…¬å¼ä¸Šå¯ä»¥è½¬æ¢ä¸ºå›¾æ»¤æ³¢çš„è¡¨è¾¾æ–¹å¼ã€‚ åœ¨çœŸå®çš„ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œæ±‚è§£ç‰¹å¾å‘é‡çš„è¿‡ç¨‹æ˜¯éœ€è¦å¾ˆå¤šçš„æ±‚è§£ç‰¹å¾æ ¹å’Œç‰¹å¾å‘é‡çš„æ“ä½œï¼Œè®¡ç®—é‡è¿‡å¤§ã€‚ ç°åœ¨ä¸€èˆ¬éƒ½æ˜¯é€šè¿‡çŸ©é˜µå¤šé¡¹å¼æ¥è¿‘ä¼¼æ±‚å‡ºæ»¤æ³¢å™¨çš„è¡¨è¾¾å¼çš„ã€‚ å¯ä»¥è§‚å¯Ÿåˆ°æˆ‘ä»¬æ»¤æ³¢å™¨å¯¹åº”çš„ç‰¹å¾çŸ©é˜µæ˜¯å¯¹è§’é˜µï¼Œæ¯”è¾ƒé€‚åˆçŸ©é˜µå¤šé¡¹å¼çš„åŒ–ç®€æ“ä½œã€‚ ChebyNetå’ŒGCNåœ¨æ²ˆè€å¸ˆçš„è¯¾ä¸Šæ²¡æœ‰ä»”ç»†è¯´ï¼Œè¿™ä¸ªç½‘ç»œä¸ŠåŸºäºå‡½æ•°é€¼è¿‘çš„ç†è®ºæ¥æå‡ºçš„ï¼Œäºæ˜¯åœ¨å‡½æ•°çš„æ¯”è¾ƒæš—é€¼è¿‘é‡Œé¢ç”¨çš„æ¯”è¾ƒå¤šçš„å¤šé¡¹å¼å°±æ˜¯chebyshevå¤šé¡¹å¼ã€‚ chebyshevå¤šé¡¹å¼æ‹Ÿåˆçš„è¯¯å·®ä¸€èŒƒæ•°æœ€å°ã€‚ ä½†æ˜¯å¾ˆå¯æƒœï¼Œç”±äºchebyshevå¤šé¡¹å¼é€šé«˜é¢‘é˜»ä½é¢‘çš„æ€§è´¨ä½¿å¾—ä½¿ç”¨ä¸Šè¿°æ–¹æ³•è®¡ç®—å¾—åˆ°çš„ç»“æœå…¶å®å¹¶ä¸æ˜¯å¾ˆå¥½ã€‚ åœ¨æ­¤åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬ä»…ä½¿ç”¨å‰ä¸¤é˜¶çš„å¤šé¡¹å¼æ¥è¿›è¡Œæ‹Ÿåˆï¼Œäºæ˜¯å¾—åˆ°äº†GCNç½‘ç»œã€‚ ä¸ä»…ä»…ä½¿ç”¨çš„æ¬¡æ•°å‡å°äº†ï¼Œå¹¶ä¸”å‚æ•°çš„æ•°é‡ä¹Ÿå¤§å¤§çš„å‡å°çš„äº†ã€‚ $D^{-1/2}AD^{1/2}$çš„å‰é¢åŠ äº†$I$ï¼Œå°±ç›¸å½“äºæ¯ä¸ªåŠ è‡ªç¯ã€‚ åœ¨å®é™…çš„å®éªŒçš„è¿‡ç¨‹å°±ä¼šå‘ç°ï¼Œå…¶ä»…ä»…åœ¨åªæœ‰ä¸¤å±‚çš„æ—¶å€™ä¼šå‡ºç°è¾ƒå¥½çš„æ•ˆæœï¼Œè¿™å°±æ˜¯æ‰€è°“çš„è¿‡å¹³æ»‘é—®é¢˜ã€‚ åœ¨æˆ‘ä»¬è¿›è¡Œæ‰é‡å½’ä¸€åŒ–çš„å‰åï¼Œå¯¹åº”çš„æ»¤æ³¢å™¨çš„å‡½æ•°éƒ½æ˜¯ä¸€ä¸ªçº¿æ€§çš„ä½é€šæ»¤æ³¢å™¨ã€‚ å½“æˆ‘ä»¬å°†çš„å±‚æ•°é€æ¸çš„å˜å¤šåï¼Œå¾—åˆ°æ»¤æ³¢å‡½æ•°ä¸æ–­åœ°ç´¯ä¹˜ï¼Œå…¶ä½é€šçš„æ•ˆæœä¸æ–­åœ°ç´¯è®¡ï¼Œä½¿å¾—é«˜é¢‘çš„ä¿¡å·è¢«å½»åº•çš„è¿‡æ»¤ã€‚ äºæ˜¯å‡ºç°çš„ä¸Šè¿°è¿‡å¹³æ»‘çš„ç°è±¡ï¼Œéšç€å±‚æ•°çš„ä¸Šå‡ï¼Œå¯¹åº”æ•ˆæœä¼šå˜å¾—è¶Šæ¥è¶Šå·®ã€‚ ä¸Šå›¾æ˜¯å»å¹´æ¥æœ€å°çš„å·¥ä½œï¼Œåˆ©ç”¨æœ€ç®€å•çš„å¤šé¡¹å¼åŸºæ¥è¿›è¡Œå‚æ•°ä¸Šä½¿å¾—å­¦ä¹ ã€‚ ä½†æ˜¯å°½ç®¡å…¶å¾—åˆ°çš„å‚æ•°æ˜¯ç›¸æ¯”ä¹‹å‰çš„å‚æ•°æœ‰å¾ˆå¤§çš„æé«˜ï¼Œä½†æ˜¯è¿™ä¸ªæ¨¡å‹æ²¡æœ‰å¯è§£é‡Šå¯è§£é‡Šæ€§ï¼Œå­¦ä¹ ä¸åˆ°å¾ˆå¥½æ»¤æ³¢å™¨ã€‚ BernNet å¯¹åº”æ»¤æ³¢å™¨è€Œè¨€ï¼Œå…¶å€¼æœ¬æ¥æ˜¯ä¸å¯ä»¥å°äº0çš„ï¼Œå› ä¸ºå°äºé›¶ä¼šé€ æˆä¿¡å·åœ¨æ­£è´Ÿä¹‹é—´ä¸åœçš„æŠ–åŠ¨ï¼Œä¸ç¨³å®šã€‚å› æ­¤è¦æœ€èµ·ç ä¿è¯ä¿¡å·åœ¨$[0,2]$ä¸Šæ˜¯å¤§äºç­‰äº0çš„ã€‚ ç”±äºä¸Šè¿°çš„å¤šé¡¹å¼çš„åŸºæ˜¯æ­£è´Ÿä¹‹é—´ç›¸äº’è½¬åŒ–çš„ï¼Œå› æ­¤å°±ä¼šé€ æˆæˆ‘ä»¬ä¸èƒ½ä»…å•å•çš„æ§åˆ¶å…¶æƒé‡çš„æ•°å€¼ï¼Œæœ€å¥½çš„æ–¹æ³•æ˜¯æ‰¾ä¸€ä¸ªå¤šé¡¹å¼ï¼Œä½¿å…¶æ»¡è¶³åœ¨$[0,2]$ä¸Šé¢ä¿è¯å…¶æœ‰éè´Ÿçš„æ€§è´¨ã€‚ å…¶ç»“æ„è¿‘ä¼¼äºä¸€èˆ¬çš„äºŒé¡¹åˆ†å¸ƒã€‚ æ²¡æœ‰å…¶ä»–åˆ«çš„æ”¹è¿›ï¼Œä»…ä»…å°±æ˜¯æ¢äº†ä¸€ä¸ªå¤šé¡¹å¼åŸºã€‚ è¿™é‡Œæˆ‘æ„Ÿè§‰å…¶åŸºå‡½æ•°çš„å½¢å¼å…¶å®å’Œå°æ³¢å˜æ¢æ¯”è¾ƒçš„ç±»ä¼¼ï¼Œå°±æ˜¯ä»…ä»…åœ¨ä¸€å°å—æ˜¯æœ‰å€¼çš„ï¼Œå…¶ä»–çš„åœ°æ–¹å…¨æ˜¯0ï¼Œæ¯ä¸ªä½ç½®ä¸Šçš„æ•°å€¼ä»…ä»…å¯¹åº”äº†ä¸€ä¸ªåŸºå‡½æ•°çš„å€¼ã€‚ è¿™é‡Œå®éªŒRELUæ¿€æ´»å‡½æ•°è¿›è¡Œé‡å‚æ•°åŒ–ï¼Œä½¿å¾—å…¶å‚æ•°ä¸è¦å°äº0å³å¯ã€‚ Actoræ•°æ®é›†ï¼Œå…¶ä»–çš„æ•°æ®é›†çš„æ•ˆæœä¸å¤ªç†æƒ³ï¼Œæœ€åçš„æ•ˆæœè¿˜ä¸å¦‚ä¸€ä¸ªMLPï¼Œå³å›¾ç»“æ„åŠ äº†åè€Œè¿˜å˜å·®äº†ã€‚ è¿™é‡Œé€šè¿‡å›¾ç½‘ç»œå­¦ä¹ åˆ°çš„ä¸œè¥¿å…¶å®å°±æ˜¯ä¸€ä¸ªæ»¤æ³¢å™¨ã€‚ é€šè¿‡å¯¹æ¯”å­¦ä¹ åˆ°çš„ç³»æ•°å’Œæ»¤æ³¢å™¨çš„å½¢çŠ¶ï¼ŒäºŒè€…æ¯”è¾ƒçš„æ¥è¿‘ï¼Œå› æ­¤å¯ä»¥å¾—å‡ºäºŒè€…çš„å¯è§£é‡Šæ€§æ˜¯æ¯”è¾ƒå¼ºçš„ã€‚ éšæœºæ¸¸èµ°â€”â€”GNNçš„ç©ºåŸŸè§£é‡Šéšæœºæ¸¸èµ°å’ŒCheergerä¸ç­‰å¼ ç›¸å½“äºä»¥ä¸€å®šçš„æ¦‚ç‡åœ¨å›¾ä¸­çš„èŠ‚ç‚¹ä¹‹é—´éšæœºçš„è½¬ç§»ï¼Œè¿™é‡Œå¯ä»¥å€ŸåŠ©é©¬å°”å¯å¤«è¿‡ç¨‹æ¥å®ç°è¿™ä¸ªè¿‡ç¨‹çš„åˆ»ç”»ã€‚ åœ¨éšæœºè¿‡ç¨‹é‡Œé¢æ›¾ç»è®²åˆ°è¿‡ï¼Œå¯¹åº”ç‰¹æ®Šçš„ä¸€ç±»å›¾æ¥è¯´ï¼Œå…¶åœ¨å›¾ä¸Šé¢å­˜åœ¨ç¨³æ€åˆ†å¸ƒã€‚ å¯¹äºæ— å‘å›¾è€Œè¨€ï¼Œå…¶ç¨³æ€çš„åˆ†å¸ƒå¯ä»¥å†™å‡ºæ¥ï¼Œå°±æ˜¯æ¯ä¸ªèŠ‚ç‚¹ä¸Šçš„åº¦æ•°é™¤ä»¥ä¸¤å€çš„è¾¹æ•°ã€‚å› æ­¤ç¨³æ€çš„åˆ†å¸ƒå…¶å®å’Œèµ·å§‹èŠ‚ç‚¹æ˜¯æ— å…³çš„ã€‚ Cheergerä¸ç­‰å¼çš„å¸¸è§çš„åº”ç”¨ è¿™ä¸ªä¸ç­‰å¼ä¸»è¦åˆ»ç”»çš„é—®é¢˜ä¸ºï¼Œä»$u$ä½¿ç”¨Kæ­¥åˆ°è¾¾$v$è½¬ç§»çš„æ¦‚ç‡è·ç¦»èŠ‚ç‚¹$v$ç¨³æ€çš„æ¦‚ç‡æ˜¯å­˜åœ¨ä¸Šå±Šçš„ï¼Œå³æ”¶æ•›çš„ã€‚ è¿™ä¸ªä¸ç­‰å¼æ„å»ºäº†éšæœºæ¸¸èµ°å’Œå›¾çš„æ‹‰æ™®æ‹‰æ–¯çŸ©é˜µã€å›¾å‚…é‡Œå¶å˜åŒ–ä¹‹é—´çš„è”ç³»ã€‚ å¯¹äºè¿™å¼ å›¾çš„ç›´è§‚çš„è§£é‡Šå°±æ˜¯ï¼Œæ”¶æ•›åˆ°ç¨³æ€çš„é€Ÿåº¦è¶Šæ…¢ï¼Œæ‰¾åˆ°å¥½çš„ç¤¾åŒºçš„æ¦‚ç‡å°±æ˜¯è¶Šå°ã€‚å› ä¸ºå·¦è¾¹å›¾ä¸­çš„èŠ‚ç‚¹æ¯”ä¸å®¹æ˜“è·‘åˆ°å³è¾¹å»çš„ã€‚ ç›¸æ¯”ä¹‹å‰æ¥è¯´ï¼Œå…¶ä¸»è¦çš„åŒºåˆ«æ˜¯åœ¨ä¹‹å‰çš„åŸºç¡€ä¸Šå¢åŠ äº†ä¸€äº›è¾¹ï¼Œå…¶æ”¶æ•›çš„é€Ÿåº¦ä¹Ÿå¤§å¤§åŠ å¿«ï¼Œä½†æ˜¯æ‰¾åˆ°çš„ç¤¾åŒºçš„è´¨é‡ä¹Ÿä¸æ–­åœ°ä¸‹é™ã€‚ GCNå’Œéšæœºæ¸¸èµ° è¿™é‡Œå°†ç½‘ç»œåœ¨ä¸æ–­å±•å¼€ï¼Œå¹¶ä¸”å»æ‰ä¸­é—´çš„æ¿€æ´»å‡½æ•°ã€‚ ç„¶åå°†$P=D^{-1/2}AD^{-1/2}$ä»£å…¥åˆ°é‡Œé¢ï¼Œç›¸åŒçš„åœ°æ–¹åˆå¹¶ï¼Œäºæ˜¯ä¸Šè¿°çš„ç¬¬Kå±‚çš„èŠ‚ç‚¹è¡¨è¾¾å¼å°±è½¬æ¢ç§°ä¸ºKæ­¥éšæœºæ¸¸èµ°æ¦‚ç‡åˆ†å¸ƒå…³ç³»ã€‚ äºæ˜¯å°±è§£é‡Šäº†ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿‡å¹³æ»‘çš„é—®é¢˜ï¼Œå› ä¸ºKæ­¥æ¸¸èµ°ä¹‹åä¼šé€æ¸çš„èµ°å‘ç¨³æ€ï¼Œè€Œå¿˜è®°äº†åˆå§‹åŒ–ä¸ŠèŠ‚ç‚¹çš„åˆ†å¸ƒä¿¡æ¯ã€‚ å¦‚æœå¢åŠ æ®‹å·®ï¼Œé‚£æ•ˆæœæ€ä¹ˆæ ·ï¼Ÿ å¢åŠ Residual Connectionå’Œä¸åŠ æ˜¯ä¸€æ ·çš„ï¼Œè¿™é‡Œä¼šå‡ºç°Lazyéšæœºæ¸¸èµ°ï¼Œæœ€ç»ˆä¹Ÿæ˜¯ä¼šæ”¶æ•›åˆ°ç¨³æ€ï¼› ä¸Šè¿°çš„è¿‡ç¨‹çš„è½¬ç§»è§„å¾‹ä¸ºï¼šå›åˆ°è‡ªå·±çš„æ¦‚ç‡æ˜¯0.5ï¼Œè½¬ç§»åˆ°é‚»æ¥ç‚¹çš„æ¦‚ç‡å¹³åˆ†ä½™ä¸‹çš„0.5ã€‚ åŠ å…¥æ®‹å·®è¿æ¥å¯èƒ½åœ¨ä¸€å®šçš„ç¨‹åº¦ä¸Šç¼“è§£è¿‡å¹³æ»‘çš„ç°è±¡ï¼Œä½†æ˜¯æ€»çš„æ¥è¯´å…¶æœ€ç»ˆè¿˜æ˜¯ä¼šé™·å…¥åˆ°ç¨³æ€åˆ†å¸ƒã€‚ ä¸Šè¿°çš„æ–¹æ³•æ˜¯éƒ½æ˜¯æ²¡æœ‰å¢åŠ æ¿€æ´»å‡½æ•°çš„æƒ…å†µï¼Œé‚£ä¹ˆå¦‚æœæˆ‘ä»¬å¢åŠ æ¿€æ´»å‡½æ•°åè¿‡å¹³æ»‘ç°è±¡å¯å¦è¿›ä¸€æ­¥çš„æ”¹å–„ï¼Ÿç­”æ¡ˆåªä¼šåŠ å‰§ä¸Šè¿°è¿‡å¹³æ»‘çš„å½¢è±¡ã€‚ Simple and Deep Graph Convolutional Networksä»¥ä¸Šä»¥åœ¨ç©ºåŸŸä¸»è¦é¢å¯¹çš„é—®é¢˜ï¼Œé­è€å¸ˆç»™å‡ºçš„è§£å†³çš„åŠæ³•å¦‚ä¸‹ ä¸»è¦çš„ä¿®æ”¹åœ¨ä¸¤ä¸ªæ–¹é¢ï¼š æ®‹å·®ç½‘ç»œæ˜¯è¿æ¥çš„åˆå§‹åŒ–çš„$H^{(0)}$ï¼Œè€Œä¸æ˜¯ä¸Šä¸€å±‚ã€‚ å¯¹äºç‰¹å¾å˜æ¢çŸ©é˜µæ˜¯å¢åŠ äº†å•ä½æ˜ å°„ï¼Œè¿™ä¸€æ­¥å…¶å®ç›¸å½“äºåœ¨ç‰¹å¾å˜æ¢åœ°æ–¹è¿›è¡Œäº†ä¸€ä¸ªæ®‹å·®è¿æ¥ï¼Œå³ä¸è¿›è¡Œç‰¹å¾å˜æ¢ï¼Œç›´æ¥è¿åˆ°ä¸‹ä¸€å±‚ã€‚ é¦–å…ˆæ¥çœ‹ä½¿ç”¨åˆå§‹èŠ‚ç‚¹å€¼çš„æ®‹å·®ç½‘ç»œï¼Œè¿™é‡Œæœ‰ä¸ªæ–°çš„åå­—å«åšå¸¦é‡å¯çš„éšæœºæ¸¸èµ°ã€‚ å°±æ˜¯å¢åŠ äº†åˆå§‹èŠ‚ç‚¹çš„æ®‹å·®å°±ä¼šé€ æˆæˆ‘ä»¬ä¼šä»¥ä¸€å®šçš„æ¦‚ç‡è¿”å›åˆå§‹ä½ç½®ï¼Œè¿™æ ·å°±ä¼šè®©èŠ‚ç‚¹è¯•è¯•ä¸ä¼šå¿˜è®°åˆå§‹å€¼çš„ä¿¡æ¯ï¼Œé¿å…æ”¶æ•›åˆ°ç¨³æ€é€ æˆçš„è¿‡å¹³æ»‘ç°è±¡ã€‚ ä½†çœ‹è¿™ä¸ªå¸¦é‡å¯çš„éšæœºæ¸¸èµ°å¯èƒ½è®©äººæ„Ÿè§‰æœ‰ç‚¹é™Œç”Ÿï¼Œä½†æ˜¯ä»–çš„å¦å¤–ä¸€ä¸ªåå­—å°±å¾ˆç†Ÿæ‚‰â€”â€”PageRankã€‚ ä¹‹åæ˜¯å•ä½æ˜ å°„çš„ä¸»è¦å†…å®¹ã€‚ è¿™ä¸ªå•ä½æ˜ å°„ä¹Ÿç›¸å½“äºæ˜¯ä¸€ä¸ªæ®‹å·®è¿æ¥çš„è¿‡ç¨‹ï¼Œå°±æ˜¯ç›¸å½“äºæœ‰ä¸€å®šçš„æ¦‚ç‡ä¸è¿›è¡Œç‰¹å¾å˜æ¢ç›´æ¥å°†å…¶è¿æ¥åˆ°ä¸‹ä¸€å±‚ã€‚ ä¸Šé¢çš„æ•°æ®é›†æ˜¯Coraæ•°æ®é›†ï¼Œå…¶ä¸»è¦è§£å†³çš„è®ºæ–‡å¼•ç”¨ä¹‹é—´çš„é—®é¢˜ã€‚ ä¸Šé¢çš„æ•°æ®é›†æ˜¯PPIæ•°æ®é›†ï¼Œå…¶ä¸»è¦æ˜¯è§£å†³è›‹ç™½è´¨å±æ€§çš„é—®é¢˜ã€‚ ä¼˜åŒ–å‡½æ•°â€”â€”GNN Deep Unfoldingå…¶ä¸»è¦çš„æ€è·¯å°±æ˜¯ä½¿ç”¨æ›´å¥½çš„èƒ½é‡å‡½æ•°æ¥ä½œä¸ºloss functionï¼Œæ¥æ›´å¥½çš„è§£å†³å›¾ç½‘ç»œçš„å­¦ä¹ å’Œä¼˜åŒ–ä¸Šé¢çš„é—®é¢˜ï¼Œä½¿å…¶æ›´å¥½æ›´å¿«çš„æ”¶æ•›ã€‚ ç”¨ä¼˜åŒ–å‡½æ•°çš„è§’åº¦æ¥ç†è§£GCN è¿™ä¸ªé—®é¢˜å†æ²ˆè€å¸ˆçš„è¯¾è¯¾ç¨‹ä¸Šä¹Ÿè®²åˆ°è¿‡ï¼Œå…¶å®å°±æ˜¯è¦æ§åˆ¶è¿è¾¹ç›¸è¿çš„èŠ‚ç‚¹è¦å°½å¯èƒ½åœ°ç›¸ä¼¼ã€‚ äºæ˜¯ï¼Œç‹„åˆ©å…‹é›·èƒ½åŠ›å‡½æ•°å…¶å®é™…æ„ä¹‰ä¸Šå°±å¯¹åº”ç€åŒé…å›¾çš„å‡è®¾ï¼Œä½¿å¾—é‚»å±…èŠ‚ç‚¹çš„ç‰¹å¾å…·æœ‰ç›¸å…³æ€§ã€‚ å°†è¿™ä¸ªä¼˜åŒ–å‡½æ•°è¿›è¡Œè¿‘ç«¯æ¢¯åº¦ä¸‹é™å¾—åˆ°çš„è¡¨è¾¾å¼åŠ ä¸Šæ¿€æ´»å‡½æ•°å°±å’ŒGCNæ˜¯ä¸€æ ·çš„äº†ã€‚ æ²ˆè€å¸ˆè¯¾ä¸Šè®²çš„è¿™ä¸ªå‡½æ•°å°±ç›¸å½“äºè¯æ˜äº†è°±åŸŸçš„æ–¹æ³•å’Œç©ºåŸŸçš„æ–¹æ³•å…·æœ‰ä¸€å®šçš„ç›¸ä¼¼æ€§ï¼Œæ„å»ºäº†æ²Ÿé€šäºŒè€…çš„æ¡¥æ¢ã€‚ ä½†æ˜¯è¿™ä¸ªå‡½æ•°å¯ä»¥ä¸€ç›´è¿›è¡Œä¼˜åŒ–ç›´åˆ°0ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€å…¶åœ¨æœ€åæ”¶æ•›çš„æ—¶å€™ï¼Œå³è¾¹ç›¸è¿çš„èŠ‚ç‚¹å…¶æ€§è´¨åŸºæœ¬ä¸€æ ·ï¼Œå³è¿›å…¥ä¸€ä¸ªç¨³æ€åˆ†å¸ƒå’Œåˆå§‹æ— å…³ã€‚é‚£ä¹ˆï¼Œå°±ä¼šå‡ºç°è¿‡å¹³æ»‘çš„ç°è±¡ã€‚ è¿™é‡Œä¸ºäº†è§£å†³ä¸Šè¿°ç”±äºæ”¶æ•›åˆ°ç¨³æ€è€Œå¿˜è®°åˆå§‹èŠ‚ç‚¹çš„ç¨³æ€ï¼Œè¿™é‡Œåœ¨åé¢å¢åŠ äº†æ­£åˆ™åŒ–çš„é¡¹ï¼Œå°±æ˜¯è®©å…¶åœ¨æ”¶æ•›çš„è¿‡ç¨‹ä¸­æ—¢è¦æ»¡è¶³èƒ½é‡å‡½æ•°æœ€å°ï¼Œä¹Ÿè¦æ»¡è¶³æˆ‘ä»¬çš„ä¸è¦å¿˜è®°åˆå§‹çš„ä¿¡æ¯ã€‚ äºæ˜¯æˆ‘ä»¬å¯¹ä¸Šè¿°ä¼˜åŒ–å‡½æ•°è¿›è¡Œæ±‚å¯¼æ“ä½œå¯å¾—ï¼š è¿™ä¸ªå¼å­å…¶å®å’Œä¹‹å‰GCNIIé‡Œé¢çš„ä½¿ç”¨åˆ©ç”¨åˆå§‹èŠ‚ç‚¹è¿›è¡Œæ®‹å·®çš„è¡¨è¾¾å¼æ—¶ä¸€æ ·çš„ï¼Œè¿™ä¸ªä¼˜åŒ–å‡½æ•°å…¶å®åœ¨2004å¹´å°±å·²ç»æå‡ºï¼Œè¿™é‡Œé­è€å¸ˆç›¸å½“äºç ”ç©¶äº†ä¹‹å‰çš„ä¸€äº›ç ”ç©¶ï¼Œåœ¨å…¶åŸºç¡€ä¸Šå¢åŠ äº†ä¸€äº›æ”¹è¿›ã€‚ äºæ˜¯å°±æœ‰ä»¥ä¸‹çš„é—®é¢˜æœ‰å¾…è§£å†³ã€‚ GNN Inspired by Classical Iterative Algorithmsåœ¨æ­¤åŸºç¡€ä¸Šï¼Œæå‡ºäº†ä¸‹é¢çš„å·¥ä½œã€‚ è¿™é‡Œä¸»è¦æ˜¯å°†æŸå¤±å‡½æ•°é‡Œé¢çš„æ‹‰æ™®æ‹‰æ–¯çŸ©é˜µ$L$æ¢æˆèƒ½é‡å‡½æ•°$\\gamma(L)$ ï¼Œä¸»è¦ä»£è¡¨çš„ä¼ æ’­çš„é€Ÿç‡ï¼Œèµ‹äºˆäº†ç®€å•çš„ç‰©ç†æ„ä¹‰ã€‚ å¹¶ä¸”$\\gamma(L)$æ˜¯åŠæ­£å®šçš„ï¼Œè¦ä¸ç„¶å°±ä¼šé€ æˆæŸå¤±å‡½æ•°ä¸ºéå‡¸çš„ï¼Œä¸æ”¶æ•›ã€‚ å½“$\\gamma(L)=2I-L$æ—¶ï¼Œæ­¤æ—¶å°±æ˜¯çš„èƒ½é‡å‡½æ•°å°±æœ‰ä¸ºç›¸åŠ çš„ï¼ŒåŒå·ã€‚ è¿™æ ·çš„æƒ…å†µä¸‹å…¶é‚»å±…èŠ‚ç‚¹çš„ç‰¹å¾å…·æœ‰è´Ÿç›¸å…³ï¼Œæ»¡è¶³å¼‚é…å›¾çš„å‡è®¾ã€‚ åœ¨æŸå¤±å‡½æ•°çš„éƒ¨åˆ†å¢åŠ ä¸€ä¸ªè´Ÿæ•°çš„æƒ©ç½šé¡¹ï¼Œä¹‹åä½¿ç”¨è¿‘ç«¯æ¢¯åº¦ä¸‹é™çš„æ–¹æ³•æ±‚è§£å¯å¾—çš„è¡¨è¾¾å¼é‡Œé¢ç›¸å½“äºè¿‡äº†ä¸€ä¸ªRELUå‡½æ•°ã€‚ è¿™æ ·å°±å¯ä»¥åœ¨æŸå¤±å‡½æ•°é‡Œé¢æ‰¾åˆ°RELUå‡½æ•°çš„å¯è§£é‡Šæ€§ã€‚ å¯¹ä¸Šé¢çš„å‡½æ•°çš„è¿›è¡Œç‰¹å¾å€¼åˆ†è§£å¾—åˆ°ä¸€ä¸ªå¯¹è§’çº¿å‡½æ•°ï¼Œè§£å¾—ä¸€ç³»åˆ—çš„æ»¤æ³¢å™¨ã€‚ å°†å‰é¢çš„æ¡ä»¶ä»£å…¥åˆ°æ»¤æ³¢å™¨ä¸­ï¼Œå¯å¾—æ»¤æ³¢å™¨çš„èŒƒå›´æ˜¯$h(\\lambda)\\in[0,1]$ï¼› è¿™æ ·å°±å’Œä¹‹å‰BernNeté‡Œé¢çš„æ¨¡å‹å‚æ•°$\\{\\theta_k\\}^K_{k=0}$ ä¸­çš„ $\\theta_k \\ge 0 \\Leftrightarrow h(\\lambda)\\ge0$ã€‚ è®¾è®¡ä¸Šè¿°çš„å‡½æ•°æ¥å…³æ³¨æ¯æ¡è¾¹çš„Smoothç¨‹åº¦ï¼Œä½¿ç”¨åˆ‡çº¿æ–¹å‘æ¥ä»£è¡¨åœ¨åˆ‡ç‚¹æ–¹å‘æ¥ä»£è¡¨æ­¤å¤„å¯¹åº”çš„å‡½æ•°å€¼ã€‚ è¿™å¯¹æ¯ä¸ªè¾¹è¿›é¡¹ç»†åŒ–æ“ä½œå°±å¯¹åº”äº†GATä¸­çš„æ³¨æ„åŠ›æœºåˆ¶ã€‚ å› ä¸ºä¸Šè¿°çš„æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å†³å®šæ¯æ¡è¾¹çš„Smoothç¨‹åº¦ï¼Œå› æ­¤åœ¨å¼‚é…å›¾ä¸Šä½¿ç”¨çš„æ•ˆæœä¼šæ¯”è¾ƒçš„å¥½ã€‚ å±•æœ›å’Œæ€»ç»“ å…³äºå›¾æœºå™¨å­¦ä¹ çš„å‡è®¾ï¼š è¿™é‡Œä¼ ç»Ÿçš„æœºå™¨å­¦ä¹ æ˜¯åŸºäºè®­ç»ƒæ•°æ®å’Œæµ‹è¯•æ•°æ®çš„åŸºæœ¬æ•°æ®åˆ†å¸ƒå¼ç›¸è¿‘ç›¸ä¼¼çš„ã€‚ ä½†æ˜¯å›¾æœºå™¨å­¦ä¹ çš„å‡è®¾ç›®å‰è¿˜ä¸æ˜¯æ˜ç¡®ï¼ŒèŠ‚ç‚¹ä¹‹é—´ä½¿ç”¨è¾¹è¿›è¡Œè¿æ¥çš„å«ä¹‰ä¸æ˜¯å¾ˆæ˜ç¡®çš„ï¼Œä¾‹å¦‚åŒé…å›¾ä»£è¡¨ç›¸é‚»çš„èŠ‚ç‚¹ä¹‹é—´æ˜¯ç›¸ä¼¼çš„ï¼Œè€Œå¼‚é…å›¾ä»£è¡¨ç›¸é‚»çš„èŠ‚ç‚¹ä¹‹é—´æ˜¯ä¸ç›¸ä¼¼çš„ï¼Œé‚£ä¹ˆåˆ°åº•æ˜¯ç›¸ä¼¼è¿˜æ˜¯ä¸ç›¸ä¼¼ï¼Œç›®å‰è¿˜ä¸æ˜¯å¾ˆæ˜ç¡®ã€‚ åœ¨é«˜æ•ˆè®¡ç®—ä¸Šï¼Œå…¶è¿˜æ˜¯ä¸æƒ³æ·±åº¦å­¦ä¹ é‚£æ ·å¯ä»¥è¿›è¡Œå¹¶è¡Œè®¡ç®—ã€‚ å›¾ç¥ç»ç½‘ç»œçš„åº”ç”¨è¿˜æ²¡æœ‰è¢«æ˜ç¡®çš„å¼€å‘å‡ºæ¥ï¼ŒCNNâ€”â€”CVï¼Œtransformerâ€”â€”NLPï¼Œä½†GNNâ€”â€”ï¼Ÿ(åˆ†å­å›¾) Q&amp;A å¯¹äºæœ‰å‘å›¾è€Œè¨€ï¼Œå…¶è¾¹æ˜¯å•å‘çš„ï¼Œå› æ­¤å…¶å¯¹åº”çš„é‚»æ¥çŸ©é˜µä¸æ˜¯å¯¹ç§°ï¼Œè¿›è€Œç‰¹å¾å€¼åˆ†è§£çš„ç»“æœä¸æ˜¯æ­£äº¤çš„ï¼Œäºæ˜¯å¯¹ç”¨æœ‰å‘å›¾çš„è°±åˆ†è§£ä¸Šåº”ç”¨æ˜¯æ¯”è¾ƒå›°éš¾çš„ã€‚å°½ç®¡æœ‰å‘å›¾ä¸Šé¢çš„ä¿¡æ¯æ˜¯è¦æ¯”æ— å‘å›¾å¤šçš„ï¼Œä½†æ˜¯å…¶å®é™…çš„æ•ˆæœæ›´å·®ã€‚ å¯¹äºæ— å‘å›¾æ¥è¯´ï¼Œå…¶åŠ ä¸Šæƒé‡ä¹‹åæ•ˆæœä¼šæ›´å¥½ã€‚ transformerå¯¹äºèŠ‚ç‚¹æ•°å¾ˆå¤šçš„GNNï¼Œå…¶é€‚åº”æ€§ä¹Ÿä¸æ˜¯å¾ˆå¼ºï¼Œè€Œä¸”ç›¸ä¼¼åº¦çš„è®¡ç®—ä¹Ÿä¼šæ¯”è¾ƒçš„å¤æ‚ï¼Œè®¡ç®—å¾—åˆ°çš„ç»“æœæ¯”è¾ƒçš„å¹³å‡ã€‚","link":"/2022/08/26/%E5%9B%BE%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/%E5%9B%BE%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E2%80%94%E2%80%94%E4%BA%BA%E5%A4%A7%E8%AF%BE%E7%A8%8B/"},{"title":"æœ‰é™å…ƒåˆ†æä¸åº”ç”¨â€”â€”åº”ç”¨éƒ¨åˆ†","text":"hljs.initHighlightingOnLoad(); æœ¬è¯¾ç¨‹ä¸»è¦æ¥æºäºæ¸…åå¤§å­¦æ›¾æ”€è€å¸ˆçš„ç½‘è¯¾ï¼Œè¿™éƒ¨åˆ†æ˜¯ç¬¬äºŒéƒ¨åˆ†åº”ç”¨çš„éƒ¨åˆ†ã€‚ä¸»è¦åŒ…å«æ†æ¢çš„æœ‰é™å…ƒæ–¹æ³•ã€è¿ç»­ç»“æ„çš„æœ‰é™å…ƒåˆ†æâ€”â€”ç©ºé—´é—®é¢˜å’Œå‡ ä½•é—®é¢˜ã€æœ‰é™å…ƒæ–¹æ³•æ–¹æ³•çš„åŸºæœ¬æ€§è´¨ã€é«˜é˜¶å¤æ‚å•å…ƒã€æœ‰é™å…ƒæ–¹æ³•çš„åº”ç”¨é¢†åŸŸã€‚ Chapter 7 æ†ã€æ¢çš„æœ‰é™å…ƒåˆ†æ7.1 æ†å•å…ƒçš„æ„å»ºåŠMATLABç¼–ç¨‹ ä½¿ç”¨å‡ ä½•æ–¹ç¨‹æ¥æ±‚åº”å˜åœºå‡½æ•° ä¸‹é¢æ˜¯ä½¿ç”¨çš„ä¸åŒçš„æ–¹æ³•æ¥è·å¾—çš„åˆšåº¦æ–¹ç¨‹ã€‚ 7.2 å±€éƒ¨åæ ‡ä¸­çš„å¹³é¢çº¯å¼¯æ›²æ¢å•å…ƒæ„å»ºåŠMATLABç¼–ç¨‹ 7.3 å±€éƒ¨åæ ‡ç³»ä¸­çš„ä¸€èˆ¬æ¢å•å…ƒæ„å»º 7.4 å¹³é¢æ¢å•å…ƒçš„åæ ‡å˜æ¢ 7.5 åˆ†å¸ƒåŠ›çš„å¤„ç† 7.6 é—¨å‹æ¡†æ¶ç»“æ„çš„å®ä¾‹åˆ†æåŠMATLABç¼–ç¨‹ Chapter 8 è¿ç»­ç»“æ„çš„æœ‰é™å…ƒåˆ†æâ€”â€”å¹³é¢é—®é¢˜8.1 å¹³é¢3èŠ‚ç‚¹çŸ©å½¢å•å…ƒçš„MATLABç¼–ç¨‹ 8.2 å¹³é¢4èŠ‚ç‚¹çŸ©å½¢å•å…ƒçš„MATLABç¼–ç¨‹ 8.3 è½´å¯¹ç§°å•å…ƒ 8.4 åˆ†å¸ƒåŠ›çš„å¤„ç† 8.5 å¹³é¢çŸ©å½¢è–„æ¿çš„åˆ†æå’ŒMATLABç¼–ç¨‹ Chapter 9 è¿ç»­ç»“æ„çš„æœ‰é™å…ƒåˆ†æâ€”â€”ç©ºé—´é—®é¢˜9.1 ç©ºé—´4èŠ‚ç‚¹å››é¢ä½“å•å…ƒåŠMATLABç¼–ç¨‹ 9.2 ç©ºé—´8èŠ‚ç‚¹æ­£å…­é¢ä½“å•å…ƒåŠMATLABç¼–ç¨‹ 9.3 å‚æ•°å•å…ƒçš„åŸç† 9.4 æ•°å€¼ç§¯åˆ† 9.5 å…¸å‹ç©ºé—´é—®é¢˜çš„MATLABç¼–ç¨‹ Chapter 10 æœ‰é™å…ƒæ–¹æ³•çš„åŸºæœ¬æ€§è´¨10.1 èŠ‚ç‚¹ç¼–å·ä¸å­˜å‚¨å¸¦å®½ æœ‰é™å…ƒæ–¹æ³•çš„æ ¸å¿ƒå°±æ˜¯ç»„è£…åˆšåº¦æ–¹ç¨‹ã€‚ 10.2 å½¢çŠ¶å‡½æ•°çŸ©é˜µä¸åˆšåº¦çŸ©é˜µçš„æ€§è´¨ 10.3 è¾¹ç•Œæ¡ä»¶çš„å¤„ç†å’Œæ”¯ååŠ›çš„è®¡ç®— 10.4 ä½ç§»å‡½æ•°æ„é€ ä¸æ”¶æ•›æ€§è¦æ±‚ å¸¸æ•°é¡¹è¦å­˜åœ¨ã€‚ 10.5 $C_0$å‹å•å…ƒå’Œ$C_1$å‹å•å…ƒ 10.6 å•å…ƒçš„æ‹¼ç‰‡å®éªŒ 10.7 æœ‰é™å…ƒåˆ†ææ•°å€¼è§£çš„ç²¾åº¦å’Œæ€§è´¨ ä½¿ç”¨æœ‰é™å…ƒæ–¹æ³•è®¡ç®—çš„å€¼æ€»ä½“ä¸Šæ˜¯åå°çš„ã€‚ 10.8 å•å…ƒåº”åŠ›ç»“æœçš„è¯¯å·®å’Œå¹³å‡å¤„ç† 10.9 æ§åˆ¶è¯¯å·®å’Œæé«˜ç²¾åº¦çš„hæ–¹æ³•å’Œpæ–¹æ³• Chapter 11 é«˜é˜¶åŠå¤æ‚å•å…ƒ11.1 1Dé«˜é˜¶å•å…ƒ 11.2 2Dé«˜é˜¶å•å…ƒ 11.3 3Dé«˜é˜¶å•å…ƒ 11.4 åŸºäºè–„æ¿ç†è®ºçš„å¼¯æ›²æ¿å•å…ƒ 11.5 å­ç»“æ„ä¸è¶…çº§å•å…ƒ Chapter 12 æœ‰é™å…ƒåˆ†æçš„åº”ç”¨é¢†åŸŸå¼•è®º12.1 ç»“æ„æŒ¯åŠ¨çš„æœ‰é™å…ƒåˆ†æï¼šåŸºæœ¬åŸç† 12.2 ç»“æ„æŒ¯åŠ¨çš„æœ‰é™å…ƒåˆ†æå®ä¾‹ 12.3 å¼¹å¡‘æ€§é—®é¢˜çš„æœ‰é™å…ƒåˆ†æï¼šåŸºæœ¬åŸç† 12.4 å¼¹å¡‘æ€§é—®é¢˜çš„æœ‰é™å…ƒåˆ†æï¼šéçº¿æ€§æ–¹ç¨‹æ±‚è§£ 12.5 ä¼ çƒ­é—®é¢˜çš„æœ‰é™å…ƒåˆ†æï¼šåŸºæœ¬åŸç† 12.6 ä¼ çƒ­é—®é¢˜çš„æœ‰é™å…ƒåˆ†æå®ä¾‹ 12.7 çƒ­åº”åŠ›é—®é¢˜çš„æœ‰é™å…ƒåˆ†æï¼šåŸºæœ¬åŸç† 12.8 çƒ­åº”åŠ›é—®é¢˜çš„æœ‰é™å…ƒåˆ†æå®ä¾‹","link":"/2022/08/26/%E6%9C%89%E9%99%90%E5%85%83%E6%96%B9%E6%B3%95/%E6%9C%89%E9%99%90%E5%85%83%E5%88%86%E6%9E%90%E4%B8%8E%E5%BA%94%E7%94%A8%E2%80%94%E2%80%94%E5%BA%94%E7%94%A8%E9%83%A8%E5%88%86/"},{"title":"æœ‰é™å…ƒåˆ†æä¸åº”ç”¨â€”â€”ç†è®ºéƒ¨åˆ†","text":"hljs.initHighlightingOnLoad(); æœ¬è¯¾ç¨‹ä¸»è¦æ¥æºäºæ¸…åå¤§å­¦æ›¾æ”€è€å¸ˆçš„ç½‘è¯¾ï¼Œè¿™éƒ¨åˆ†æ˜¯ç¬¬ä¸€éƒ¨åˆ†ç†è®ºçš„éƒ¨åˆ†ã€‚ä¸»è¦åŒ…å«å¼•è®ºã€åŸºäºç›´æ¥åˆšåº¦æ³•çš„æ†ç³»æœ‰é™å…ƒæ–¹æ³•ã€é’ˆå¯¹å¤æ‚å‡ ä½•å½¢å˜çš„åŠ›å­¦æè¿°ã€å˜å½¢ä½“æ–¹ç¨‹çš„æ±‚è§£çš„è¯•å‡½æ•°ã€åŸºäºè¯•å‡½æ•°çš„ç»å…¸æ–¹æ³•å’Œæœ‰é™å…ƒæ–¹æ³•ã€‚ Chapter 1 å¼•è®º1.1 åŠ›å­¦çš„åˆ†ç±»ï¼šè´¨ç‚¹ã€åˆšä½“ã€å˜å½¢ä½“ è´¨ç‚¹åŠ›å­¦ä¸»è¦æ˜¯å°†ç‰©ä½“ç®€åŒ–æˆä¸ºä¸€ä¸ªç‚¹ã€‚ ç”±äºåˆ†æçš„å¯¹è±¡å˜æˆåˆšä½“ï¼Œåœ¨å°†å…¶ç®€åŒ–åˆ°è´¨å¿ƒçš„åŒæ—¶ï¼Œä¹Ÿè¦è€ƒè™‘ç‰©ä½“çš„è½¬åŠ¨ã€‚ ä»¥ä¸‹æˆ‘ä»¬è¦åˆ†æå˜å½¢çš„ç‰¹æ€§ï¼Œå¯¹åº”å˜å½¢ä½“è€Œè¨€å…¶ä¸»è¦åˆ†æˆç®€å•å½¢çŠ¶å’Œå¤æ‚å½¢çŠ¶ä¸¤ä¸ªæ€§è´¨ã€‚ é¦–å…ˆæ¥åˆ†æç®€å•å½¢çŠ¶æ„ä»¶ï¼ŒåŒ…æ‹¬ææ–™åŠ›å­¦å’Œç»“æ„åŠ›å­¦ã€‚ ææ–™åŠ›å­¦ä¸»è¦æ˜¯åˆ†æç®€å•çš„å˜å½¢ä½“åœ¨å¾®å°å˜å½¢çš„ä¸‹çš„æƒ…å†µã€‚ ç»“æ„åŠ›å­¦å’Œææ–™åŠ›å­¦åŸºæœ¬ç›¸ä¼¼ï¼Œå°±æ˜¯ç»“æ„åŠ›å­¦çš„æ„å»ºæ•°é‡æ›´å¤šï¼Œå¹¶ä¸”å› æ­¤å¾—åˆ°çš„çº¿æ€§æ–¹ç¨‹ç»„çš„æ•°é‡æ›´å¤§ã€‚ å…¶æ¬¡æ¥åˆ†æå¤æ‚å½¢çŠ¶æ„ä»¶ï¼ŒåŒ…æ‹¬å¼¹æ€§åŠ›å­¦å’Œå¼¹å¡‘æ€§åŠ›å­¦ã€‚ å¼¹æ€§åŠ›å­¦å¯¹åº”çš„åœ¨å°å˜å½¢çš„æƒ…å†µï¼Œå–å‡ºä¸€ä¸ªå¾®å…ƒä½“æ¥åˆ†æï¼Œä½†æ˜¯ä¸€èˆ¬æ˜¯å¾—ä¸åˆ°è§£æè§£çš„ï¼Œä¸€èˆ¬æ˜¯æ•°å€¼æ–¹æ³•å¾—åˆ°æ•°å€¼è§£ã€‚ å¼¹å¡‘æ€§åŠ›å­¦åœ¨å¼¹æ€§åŠ›å­¦çš„åŸºç¡€ä¸Šè¿˜è€ƒè™‘äº†å¼¹æ€§å˜åŒ–èŒƒå›´ä»¥å¤–çš„éƒ¨åˆ†ï¼Œå…¶æ±‚è§£æ›´åŠ å›°éš¾ã€‚ 1.2 å˜å½¢ä½“åŠ›å­¦çš„è¦ç‚¹ å¯¹ææ–™çš„åŠ›å­¦åˆ†æä¸Šï¼Œéœ€è¦è¿›è¡Œææ–™çš„æ‹‰ä¼¸å®éªŒï¼Œè¿›è€Œå¾—åˆ°æ‹‰ä¼¸çš„æ›²çº¿ã€‚ åœ¨è¿›è¡Œå®éªŒè®¾è®¡æ—¶ï¼Œè¿™é‡Œè®¾è®¡ä¸‰ç»„å®éªŒï¼Œé€šè¿‡ä¸Šé¢çš„å®éªŒå¾—å‡ºäº†ä¸‰ä¸ªæ›²çº¿ï¼Œç„¶åå®šä¹‰äº†åº”åŠ›$\\sigma$å’Œåº”å˜$\\varepsilon$ ï¼Œäºæ˜¯ä¸Šè¿°çš„ä¸‰ä¸ªæ›²çº¿å°±å¯ä»¥åˆå¹¶å½¢æˆä¸€æ¡æ›²çº¿ï¼Œè¿™æ¡æ›²çº¿å°±å¾ˆå¥½çš„åˆ»ç”»äº†ææ–™çš„åŠ›å­¦æ€§è´¨ã€‚ å…¶ä¸­$E$ä»£è¡¨çš„æ˜¯åŸæ¥çš„ä¸€ç»´ææ–™çš„æ¨æ°æ¨¡é‡ã€‚ ä¸‹é¢å¾—åˆ°äº†å˜å½¢ä½“çš„ä¸‰å¤§å˜é‡ï¼šä½ç§»ã€åº”åŠ›ã€åº”å˜ã€‚ åŒæ—¶ä¹Ÿå¾—åˆ°äº†ä¸‰å¤§åŠ›å­¦æ–¹ç¨‹ï¼šå¹³è¡¡æ–¹ç¨‹ã€ç‰©ç†æ–¹ç¨‹ã€å‡ ä½•æ–¹ç¨‹ã€‚ è¿™ä¸‰å¤§ç±»æ–¹ç¨‹ä¸»è¦æ˜¯å¾®åˆ†æ–¹ç¨‹ã€‚ 1.3 å¾®åˆ†æ–¹ç¨‹æ±‚è§£çš„æ–¹æ³• æ ¹æ®ä¸Šé¢çš„é—®é¢˜å¾—åˆ°æ–¹ç¨‹å¼å¦‚å›¾æ‰€ç¤ºã€‚ æ–¹æ³•ä¸€ï¼šè§£ææ³• æ ¹æ®ä¸Šè¿°çš„ç»“æœå¯å¾—ä¸€ä¸ªä½ç§»çš„äºŒæ¬¡æ–¹ç¨‹å¦‚å›¾æ‰€ç¤ºï¼Œç„¶åæ ¹æ®è¾¹ç•Œæ¡ä»¶è®¡ç®—å¾…å®šçš„ç³»æ•°ã€‚ æ–¹æ³•äºŒï¼šè¿‘ä¼¼æ–¹æ³•(å·®åˆ†) å°†å…¶åˆ†æˆäº”ä¸ªèŠ‚ç‚¹ï¼Œå¯¹æ¯ä¸ªèŠ‚ç‚¹æ¥åˆ—å‡ºä¸€ç»´çš„å·®åˆ†æ–¹ç¨‹å¦‚ä¸‹ã€‚ å°†å¾—åˆ°çš„è¾¹ç•Œæ¡ä»¶ä»£å…¥åˆ°å¯¹åº”çš„èŠ‚ç‚¹ä¸­ï¼š è§£å¾—ä¸Šè¿°èŠ‚ç‚¹å‡ºçš„è§£ä¸ºï¼š (u_1,u_2,u_3,u_4)^T=\\dfrac {PL^2} {AE}(0.16, 0.28, 0.36,0.4)^T è¿™é‡Œä¸ºäº†æé«˜ç²¾åº¦å¯ä»¥å¢åŠ èŠ‚ç‚¹çš„æ•°é‡ã€‚ è¿™é‡Œä½ç§»çŸ©é˜µçš„n-1è¡Œn-1åˆ—å¤„çš„å€¼ä¸º-1ï¼Œäºæ˜¯æ¥å‡ºæ¥çš„ç»“æœå¦‚å›¾æ‰€ç¤ºã€‚ æ–¹æ³•ä¸‰ï¼šè¿‘ä¼¼æ–¹æ³•(è¯•å‡½æ•°) å…¶å®å°±æ˜¯ç»™å®šä¸€ä¸ªæ»¡è¶³è¾¹ç•Œæ¡ä»¶çš„å¾…å®šç³»æ•°å‡½æ•°ï¼Œå°†å…¶ä»£å…¥åˆ°æ§åˆ¶æ–¹ç¨‹é‡Œï¼Œä¼˜åŒ–å‚æ•°ä½¿å¾—æ®‹å·®å‡½æ•°æœ€å°ã€‚ å’Œä¹‹å‰çš„èŠ‚ç‚¹æ³•ç›¸åŒï¼Œå…¶ä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨å¤šä¸ªè¯•å‡½æ•°æ¥è¿›è¡Œé€¼è¿‘ã€‚ æ€»ç»“ å°†ä¸Šè¿°çš„å‡ ç§æ–¹æ³•è¿›è¡Œå¯¹æ¯”å¯å¾—ï¼Œä¸‹é¢çš„ä»æ±‚è§£çš„ç²¾åº¦å’Œç‰¹ç‚¹è¿›è¡Œæ¯”è¾ƒã€‚ å¯¹äºæ˜¯å‡½æ•°è€Œè¨€å…¶ä½¿ç”¨çš„éš¾ç‚¹å°±æ˜¯è·å¾—å¯ä»¥æ»¡è¶³å…¨å±€è¾¹ç•Œæ¡ä»¶çš„è¯•å‡½æ•°ï¼Œåªè¦è¯•å‡½æ•°ç¡®å®šï¼Œåé¢å°±å¾ˆç®€å•äº†ã€‚ 1.4 å‡½æ•°é€¼è¿‘é—®é¢˜ è¿™ç§æ–¹æ³•ç±»ä¼¼äºå‡½æ•°æ‹Ÿåˆã€‚ è¿™ç§æ–¹æ³•ç±»ä¼¼äºåˆ†æ®µçº¿æ€§æ’å€¼ã€‚ åˆ†æå’Œè®¨è®º å…¨åŸŸå±•å¼€ï¼šå¯¹äº1Dé—®é¢˜ï¼Œå…¶åŸºåº•å‡½æ•°è¿˜æ˜¯æ¯”è¾ƒå¥½æ‰¾çš„ï¼Œä½†æ˜¯å¯¹äº2Dã€3Dé—®é¢˜ï¼Œå…¶åŸºåº•å‡½æ•°å°±ä¸æ˜¯å¾ˆå®¹æ˜“è·å¾—äº†ã€‚ å­åŸŸå±•å¼€ï¼šåœ¨åˆ†æ®µç‚¹å¤„çš„è¿ç»­æ€§å’Œå¯å¯¼æ€§è¾ƒå·®ï¼Œå…¶é€¼è¿‘çš„æ•ˆæœè¿˜æ˜¯ä¸é”™çš„ã€‚è¿™ä¸ªæ–¹æ³•çš„ä¸»è¦é—®é¢˜æ˜¯å¦‚ä½•é’ˆå¯¹2Dã€3Dé—®é¢˜æ¥æ„é€ åˆé€‚çš„è¯•å‡½æ•°ã€‚ 1.5 é’ˆå¯¹å¤æ‚åŸŸä¸Šçš„æ„é€ å‡½æ•°æˆ–çº§æ•° å¯¹äº2Dçš„é—®é¢˜è€Œè¨€ã€‚ è§„åˆ™çš„å‡ ä½•åŸŸä¸Šå¯ä»¥ä½¿ç”¨å…¨åŸŸçš„æ–¹æ³•ï¼Œå…¶è¯•å‡½æ•°çš„æ„é€ æ˜¯æ¯”è¾ƒå®¹æ˜“çš„ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å­åŸŸçš„æ–¹æ³•ï¼› å¤æ‚çš„ä¸è§„åˆ™é—®é¢˜å°±ä»…ä»…åªèƒ½ä½¿ç”¨ä¸€èˆ¬çš„å­åŸŸçš„æ–¹æ³•ï¼Œå› ä¸ºå…¨åŸŸçš„è¯•å‡½æ•°æ— æ³•æ‰¾åˆ°ã€‚ å¯¹äº3Dçš„é—®é¢˜å’Œ2Dé—®é¢˜ç±»ä¼¼ã€‚ 1.6 æœ‰é™å…ƒçš„æ ¸å¿ƒï¼šé’ˆå¯¹å¤æ‚å‡ ä½•åŸŸçš„åˆ†ç‰‡å‡½æ•°é€¼è¿‘ å°†ä¸Šè¿°è§„èŒƒåŒ–çš„å­åŸŸå«åšå•å…ƒï¼Œå…¶ä¸­åŒ…æ‹¬ä¸¤èŠ‚ç‚¹çš„æ†ï¼Œä¸‰èŠ‚ç‚¹çš„ä¸‰è§’å½¢å’Œå…«èŠ‚ç‚¹çš„3Då—ã€‚ åˆ©ç”¨ä¸Šè¿°å•å…ƒæ¥æ‹¼å‡ºè§„èŒƒåŒ–çš„å½¢çŠ¶ã€‚ å°†å¸¸ç”¨çš„1Dã€2Dã€3Då•å…ƒæ„å»ºå•å…ƒåº“ã€‚ 1.7 å‘å±•å†å² Chapter 2 åŸºäºç›´æ¥åˆšåº¦æ³•çš„æ†ç³»æœ‰é™å…ƒæ–¹æ³•2.1 å¼¹ç°§çš„åŠ›å­¦åˆ†æåŸç†é¦–å…ˆå®šä¹‰äº†åŸºäºç«¯ç‚¹çš„æè¿°ï¼Œä¹‹åå®šä¹‰èŠ‚ç‚¹çš„æè¿°æ–¹æ³•æ¥æè¿°å¼¹ç°§å¾®å…ƒçš„å—åŠ›ã€‚ ä¸‹é¢æ–¹ç¨‹é‡Œé¢ä»å·¦å‘å³ä¾æ¬¡æ˜¯çŸ©é˜µç³»æ•°ï¼ŒèŠ‚ç‚¹ä½ç§»ï¼ŒèŠ‚ç‚¹åŠ›ã€‚ ä»¥ä¸‹ç»™å‡ºä¸€ä¸ªå®é™…åˆ†æçš„ä¾‹å­ã€‚ è¿™é‡Œçš„$F_2$ä¸ºå¤–éƒ¨ä½œç”¨åˆ°Bç‚¹æ˜¯çš„å¤–åŠ›ï¼Œä¹‹åå°†è¿™äº›è½¬åŒ–ç§°ä¸ºçŸ©é˜µæ–¹ç¨‹å¹¶è¿›è¡Œåˆå¹¶ï¼Œç»„æˆä¸€ä¸ªç³»ç»Ÿã€‚ è¿™é‡Œç”±äº$u_1,u_3=0$äºæ˜¯å°±å°†å¯¹åº”çš„çŸ©é˜µç³»æ•°çš„è¡Œå’Œåˆ—åˆ’æ‰ã€‚ 2.2 å¼¹ç°§å•å…ƒå’Œæ†å•å…ƒçš„æ¯”è¾ƒé¦–å…ˆï¼Œæ¥çœ‹æ•´ä½“çš„ç«¯ç‚¹ä¸Šçš„ç‰©ç†æ–¹ç¨‹å¦‚ä¸‹ã€‚ å¯ä»¥é€šè¿‡åˆšåº¦ç³»æ•°çš„è½¬æ¢æ¥ç”¨å¼¹ç°§çš„å¹³è¡¡æ–¹ç¨‹è®¡ç®—æ†çš„å¹³è¡¡æ–¹ç¨‹ã€‚ æ¥ä¸‹æ¥æ ¹æ®ä¸Šè¿°çš„å…³ç³»æ¥æ¨å¹¿åˆ°å¼¹ç°§å•å…ƒå’Œæ†å•å…ƒã€‚ å¯¹æ¯”å¼¹ç°§æ¥åˆ†ææ†çš„å—åŠ›æƒ…å†µã€‚ 2.3 æ†å•å…ƒçš„åæ ‡å˜æ¢ ä»¥ä¸Šæˆ‘ä»¬çš„åæ ‡ç³»å–å¾—æ˜¯æ†çš„è½´çº¿æ–¹å‘ï¼Œä½†æ˜¯åœ¨å®é™…çš„ç»“æ„åŠŸï¼Œæˆ‘ä»¬éœ€è¦å°†æ•´ä½“åˆæˆåˆ°ä¸€ä¸ªæ–¹ç¨‹é‡Œé¢å»å°±éœ€è¦è·å¾—å°†æ‰€æœ‰çš„æ†çš„åæ ‡ç³»è¿›è¡Œç»Ÿä¸€ã€‚ å°†åæ ‡å˜æ¢ä¹‹åç»“æœå†™æˆçŸ©é˜µå½¢å¼å¯å¾—å¦‚ä¸‹è¡¨è¾¾å¼ã€‚ ä¸‹é¢å°†2Dçš„æƒ…å†µå‘ç€3Dæƒ…å†µæ¨å¹¿å¯å¾—ã€‚ 2.4 å››æ†ç»“æ„çš„æœ‰é™å…ƒåˆ†æ å°†æ¯ä¸ªæ†çœ‹ä½œæ˜¯ä¸€ä¸ªå•å…ƒï¼Œå°†å…¶å’ŒèŠ‚ç‚¹çš„ç¼–å·å¯¹åº”çš„è¡¨æ ¼åˆ—å‡ºå¦‚ä¸‹ã€‚ ç”±äºç¬¬äºŒæ ¹æ†æ˜¯ç”±èŠ‚ç‚¹3æŒ‡å‘èŠ‚ç‚¹2çš„ï¼Œäºæ˜¯å°±ä¼šç”±å…¶èŠ‚ç‚¹çš„ä½™å¼¦ä¸º-1çš„æƒ…å†µã€‚ ä¸‹é¢å¯¹æ¯ä¸ªå•å…ƒè¿›è¡ŒçŸ©é˜µæè¿°ï¼Œå¾—åˆ°å¯¹åº”çš„åˆšåº¦çŸ©é˜µã€‚ å°½ç®¡äºŒå·çŸ©é˜µå’Œ4å·çŸ©é˜µçš„å½¢å¼ä¸€æ ·ï¼Œä½†æ˜¯å…¶å¯¹åº”çš„è‡ªç”±åº¦æ˜¯ä¸ä¸€æ ·çš„ï¼Œå¯¹åº”çš„èŠ‚ç‚¹æ˜¯ä¸ä¸€æ ·çš„ã€‚ å…¶å®è¿™é‡Œä¹Ÿå°±æ˜¯å°†åˆšåº¦çŸ©é˜µæŒ‰ç…§èŠ‚ç‚¹çš„é¡ºåºè¿›è¡Œæ‹¼æ¥ï¼Œè¿™é‡Œçš„ä¸»è¦å¤šçš„æ–¹æ³•æ˜¯å…ˆç¡®å®šå¥½èŠ‚ç‚¹çš„æ’åˆ—é¡ºåºï¼Œä¹‹åæŒ‰ç…§èŠ‚ç‚¹æ¥æ‹¼æ¥çŸ©é˜µï¼Œæ¥ç€å°†è®¡ç®—èŠ‚ç‚¹åŠ›ï¼Œè¿™é‡Œä¸»è¦è®¡ç®—çš„æ˜¯èŠ‚ç‚¹å¤„çš„å¤–åŠ›ï¼Œå› ä¸ºå†…åŠ›éƒ½è¢«æ¶ˆå»äº†ã€‚ ä¸‹é¢è¿›è¡Œçš„æ˜¯èŠ‚ç‚¹æ–¹ç¨‹çš„æ±‚è§£è¿‡ç¨‹ã€‚ è¿™é‡Œä»£å…¥è¾¹ç•Œæ¡ä»¶ï¼Œæ”¯åº§å¤„çš„ä½ç§»ä¸º0ï¼Œå°†ä½ç§»ä¸º0çš„ç›¸å…³çš„è¡Œå’Œåˆ—åˆ’å»å¯å¾—ç®€åŒ–åçš„æ–¹ç¨‹ï¼Œç„¶åè¿›è¡Œæ±‚è§£å³å¯ã€‚ Chapter 3 é’ˆå¯¹å¤æ‚å‡ ä½•å˜å½¢ä½“çš„åŠ›å­¦æè¿°3.1 åŠ›å­¦æè¿°çš„åŸºæœ¬æ€è·¯åŠå˜å½¢åŸºæœ¬å‡è®¾å˜å½¢ä½“å¯ä»¥æŒ‰ç…§ç»“åˆå½¢çŠ¶æ¥åˆ’åˆ†å¯ä»¥åˆ†ä¸ºç®€å•å‡ ä½•å½¢çŠ¶å’Œå¤æ‚å‡ ä½•å½¢çŠ¶ï¼Œé’ˆå¯¹çš„æ˜¯ææ–™åŠ›å­¦å’Œå¼¹æ€§åŠ›å­¦çš„ä¸»è¦çš„ç ”ç©¶ã€‚ ä¸ºäº†å°†æ³¨æ„åŠ›å‡ ç§åœ¨å¤„ç†å¤æ‚å‡ ä½•å½¢çŠ¶ä¸Šï¼Œè¿™é‡Œå°†é’ˆå¯¹ææ–™çš„æ€§è´¨è¿›è¡Œå‡å®šã€‚ ä½†æ˜¯é’ˆå¯¹å¤åˆææ–™ï¼Œæˆ‘ä»¬å¯ä»¥å°†å„å‘å¼‚æ€§è¿›è¡Œæ”¾æ¾ï¼›é’ˆå¯¹å¼¹å¡‘æ€§ææ–™ï¼Œæˆ‘ä»¬å¯ä»¥å°†çº¿å¼¹æ€§çš„å‡è®¾è¿›è¡Œæ”¾æ¾ç­‰ã€‚ 3.2 æŒ‡æ ‡è®°æ³• è¿™é‡Œä½¿ç”¨çš„æ˜¯é»˜è®¤çš„è¡¨ç¤ºæ³•ï¼Œ$F_1$å°±å¯¹åº”$x_1$è½´çš„åˆ†é‡ï¼Œ$F_2$å°±å¯¹åº”$x_2$è½´çš„åˆ†é‡ï¼Œ$F_3$å°±å¯¹åº”$x_3$è½´çš„åˆ†é‡ã€‚ å¯¹äºå“‘æŒ‡æ ‡æ¥è¯´ï¼Œæœ‰é»˜è®¤çš„çˆ±å› æ–¯å¦æ±‚å’Œçº¦å®šã€‚ voigitæ ‡è®°æ³•ï¼Œå°±æ˜¯å°†ä¸€ä¸ªé«˜ç»´çš„å¼ é‡ç®€å†™ç§°ä¸ºä¸€ä¸ªä½ç»´çš„å½¢å¼ï¼Œå¦‚ä¸‹é¢å°±å°†ä¸€ä¸ªäºŒç»´çš„å¼ é‡è½¬æ¢ä¸ºä¸€ç»´çš„åˆ—é˜µã€‚ è¿™é‡Œçš„Voigtå‡†åˆ™ä»…ä»…æ˜¯è§„åˆ™çš„ä¸€ç§ï¼Œä¹Ÿå¯ä»¥æŒ‰ç…§ä¹ æƒ¯çš„é¡ºåºæ¥è¿›è¡Œä¹¦å†™ã€‚ 3.3 å¤æ‚å˜å½¢ä½“æè¿°çš„å»ºæ¨¡æ€è·¯ è¿™é‡Œå°†å¤æ‚çš„å˜å½¢ä½“åˆ†æˆäº†å†…éƒ¨çš„æè¿°å’Œå¤–éƒ¨çš„æè¿°ï¼Œå¯¹äºå†…éƒ¨å°±æ˜¯å»ºç«‹å¯¹äºçš„å¾®å…ƒä½“ï¼Œå¯¹äºå¤–éƒ¨è¡¨é¢åˆ™è¦æ ¹æ®å…¶å‡ ä½•è¾¹ç•Œå’Œå—åŠ›è¾¹ç•Œæ¥æ„å»ºä¸‰å¤§å˜é‡å’Œä¸‰å¤§æ–¹ç¨‹ã€‚ 2Dé—®é¢˜çš„åº”åŠ›çš„å»ºæ¨¡ ç¬¬ä¸€ä¸ªä¸‹æ ‡æ˜¯æ–¹å‘ï¼Œç¬¬äºŒä¸ªä¸‹æ ‡æ˜¯å—åŠ›é¢çš„æ³•çº¿æ–¹å‘ã€‚ 3Dé—®é¢˜çš„åº”åŠ›å»ºæ¨¡ 3.4 å¹³è¡¡æ–¹ç¨‹çš„æ„å»ºä»¥ä¸‹å¯¹å¾®å…ƒä½“è¿›è¡Œå—åŠ›åˆ†æå¯å¾—ä¸‹å›¾ï¼Œå…¶ä¸­ç”±äºå¾®å…ƒå–å¾—è¶³å¤Ÿå°ï¼Œå› æ­¤å…¶å¾®å…ƒä½“å†…éƒ¨çš„ææ–™å¯ä»¥çœ‹æˆæ˜¯å‡åŒ€åˆ†å¸ƒçš„ã€‚ å¯¹äºå¹³é¢æ¥è¯´ï¼Œå¯ä»¥åœ¨ä¸¤ä¸ªæ–¹å‘å’Œä¸€ä¸ªè½¬åŠ¨æ–¹å‘æ¥å»ºç«‹åŠ›å­¦å¹³è¡¡æ–¹ç¨‹å¼ã€‚ å…¶ä¸­æ–¹ç¨‹ä¸­å¸¦æœ‰åæ ‡å¢é‡çš„éƒ¨åˆ†å¯ä»¥ä½¿ç”¨Talyorå±•å¼€ã€‚ ä½¿ç”¨Tayorå±•å¼€ï¼Œæ¶ˆå»é«˜æ¬¡é¡¹ã€‚ ä»¥ä¸Šä¸ºåœ¨xæ–¹å‘ä¸Šçš„å—åŠ›åˆ†æï¼Œä¸‹é¢æ¥è¿›è¡Œyæ–¹å‘çš„è¿›è¡Œåˆ†æã€‚ å…¶ä¸­å‰é¢ä¸¤é¡¹å¼ç”±äº$x,y$åæ ‡å¼•èµ·çš„æ¢¯åº¦å˜åŒ–å¼•èµ·çš„ï¼Œä»–ä»¬ç”±è·Ÿå¾®å…ƒçš„ä½“ç§¯åŠ›è¾¾åˆ°å¹³è¡¡ã€‚ å¯¹äºåŠ›çŸ©å¹³è¡¡ï¼Œè¿™é‡Œå–çš„å¼å¾®å…ƒçš„ä¸­å¿ƒæ±‚åŠ›çŸ©çš„ï¼Œè¿™æ ·å°±å¯ä»¥å°†ä½“ç§¯åŠ›çº¦å»ï¼Œäºæ˜¯åŒ–ç®€çš„ç»“æœå°±æ˜¯å‰ªåº”åŠ›äº’ç­‰å®šå¾‹ã€‚ è¿™é‡Œå°†å…¶æ•´ç†æˆæŒ‡æ ‡çš„å½¢å¼ï¼Œåœ¨åŠ ä¸Šå“‘å˜é‡çš„è‡ªå®šæ±‚å’Œäºæ˜¯å¾—åˆ°äº†æŒ‡æ ‡å½¢å¼çš„è¡¨è¾¾å¼ã€‚ 3.5 å‡ ä½•æ–¹ç¨‹çš„æ„å»ºå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä¸ºå˜å½¢å‰åçš„å¯¹æ¯”å›¾ï¼Œé¦–å…ˆè®¡ç®—çš„æ˜¯ç›¸å¯¹ä¼¸é•¿é‡ï¼Œè¿™é‡Œç”±äºæ˜¯å¾®å…ƒï¼Œå› æ­¤$PA,Pâ€™Aâ€™$çš„è§’åº¦é€ æˆçš„æ¨ªå‘çš„ä½ç§»å°±å¯ä»¥å¿½ç•¥ä¸è®°ã€‚ ç„¶åè®¡ç®—çš„æ˜¯å¤¹è§’çš„å˜æ¢ï¼Œéœ€è¦è®¡ç®—è§’åº¦$\\alpha,\\beta$ çš„å€¼ã€‚è¿™é‡Œå°±æ˜¯åˆ©ç”¨çš„å°è§’è¿‘ä¼¼ï¼Œç”¨$\\tan \\alpha$æ¥è¿‘ä¼¼$\\alpha$ ã€‚ å¯¹ä¸Šä¸Šé¢å¾—åˆ°è®¡ç®—çš„ç»“æ„è¿›è¡Œæ€»ç»“å¯å¾—ï¼š ä¸Šè¿°çš„ä¸‰ä¸ªåˆ†é‡ä¸­ï¼Œä»…ä»…ç”±ä¸¤ä¸ªæ˜¯ç‹¬ç«‹çš„ï¼Œå¦ä¸€ä¸ªæ˜¯ç›¸å…³çš„ã€‚ ä¸Šè¿°çš„æ–¹ç¨‹é‡Œé¢ä»…ä»…åªæœ‰æ»¡è¶³è¿™ä¸ªå˜å½¢çš„åè°ƒæ¡ä»¶çš„æ‰æ˜¯å®é™…å˜å½¢çš„æƒ…å†µï¼Œåœ¨ä¸‹å›¾é‡Œé¢åªæœ‰ç¬¬4ä¸ªæ‰æ˜¯çœŸæ­£çš„å˜å½¢æƒ…å†µã€‚ 3.6 ç‰©ç†æ–¹ç¨‹çš„æ„å»ºç‰©ç†æ–¹ç¨‹çš„æœ¬è´¨å°±æ˜¯å¹¿ä¹‰çš„èƒ¡å…‹å®šå¾‹ã€‚ åœ¨åˆ†æ¯ä½ç½®ä¸Šçš„æ˜¯æ³Šæ¾æ•ˆåº”çš„ä¸»æ–¹å‘ï¼Œå¦‚å›¾æ‰€ç¤ºä¸»æ–¹å‘æ˜¯$x$æ–¹å‘ã€‚ å°†å®é™…çš„åº”åŠ›ä¸€åˆ†ä¸º3ï¼Œè¿›è€Œå¾—åˆ°äº†2Dé—®é¢˜çš„æœ¬æ„æ–¹ç¨‹ã€‚ äºæ˜¯å°†ä¸Šè¿°çš„å½¢å¼åŒ–æˆæŒ‡æ ‡å½¢å¼å¯å¾—ï¼š å…¶é€†è¡Œå¼è½¬åŒ–ä¸ºæŒ‡æ ‡å½¢å¼å¯å¾—ï¼š ä¸Šè¿°å¼ é‡çš„è¡¨è¾¾åœ¨çº¸ä¸Šæ˜¯å†™ä¸å‡ºæ¥çš„ï¼Œåªèƒ½ç”¨ä¸‹æ ‡æ¥è¿›è¡Œè¡¨ç¤ºã€‚ 3.7 è¾¹ç•Œæ¡ä»¶è¿™é‡Œçš„è¾¹ç•Œåˆ†ä¸ºåŠ›çš„è¾¹ç•Œå’Œä½ç§»çš„è¾¹ç•Œï¼Œä¸€èˆ¬ä¹Ÿå°†ç©ºçš„åœ°æ–¹ä¹Ÿè®¤ä¸ºæˆæ˜¯é‡Œçš„è¾¹ç•Œï¼Œåªä¸è¿‡å¯¹åº”çš„åŠ›ä¸º0. ä¸Šé¢è¡¨è¾¾å¼çš„æ„æ€æ˜¯ï¼Œä¸Šè¿°çš„ä¸¤ä¸ªè¾¹ç•Œæ²¡æœ‰æ­æ¥ä¹Ÿæ²¡æœ‰é—´éš™ã€‚ ä½ç§»è¾¹ç•Œ åŠ›çš„è¾¹ç•Œ åœ¨$x$æ–¹å‘çš„å¹³è¡¡æ¡ä»¶ï¼ŒåŒç†å¯ä»¥$y$æ–¹å‘å’ŒåŠ›çŸ©å¹³è¡¡çš„æ–¹å‘ã€‚ Chapter 4 é’ˆå¯¹å¤æ‚å‡ ä½•å½¢çŠ¶å˜å½¢ä½“çš„åŠ›å­¦æè¿°24.1 å‡ ç§é—®é¢˜çš„è®¨è®ºé¦–å…ˆå¯¹ä¹‹å‰å­¦ä¹ çš„æœ‰å…³é—®é¢˜å¦‚ç»™å®šçš„é—®é¢˜ã€ä¸‰å¤§ç±»å˜é‡ã€ä¸‰å¤§ç±»æ–¹ç¨‹ã€è¾¹ç•Œæ¡ä»¶è¿›è¡Œå¤ä¹ å’Œæ€»ç»“ã€‚ ä¸‹é¢æ¥å¼•å‡ºä¸»è¦è®¨è®ºçš„ä¸‰å¤§é—®é¢˜ï¼šå¹³é¢åº”åŠ›ã€å¹³é¢åº”å˜ã€åˆšä½“ä½ç§»ã€‚ å¹³é¢åº”åŠ› ç”±äºåœ¨å…¨éƒ¨çš„åŠ›éƒ½ä½œç”¨åˆ°$xoy$ å› æ­¤å…¶åœ¨å¹³é¢ä¸Šé¢çš„å˜å½¢ä¸º0ï¼Œä½†æ˜¯ç”±äºè€ƒè™‘åˆ°æ³Šæ¾æ•ˆåº”ï¼Œå…¶$z$æ–¹å‘ä¸Šå¯èƒ½ä¼šäº§ç”Ÿå½¢å˜â€”â€”åº”å˜$\\varepsilon_{zz}$ ã€‚ ç®€å•å½’çº³ä»¥ä¸‹å¹³é¢é—®é¢˜çš„åŸºæœ¬å˜é‡ã€‚ å¹³é¢åº”å˜ ç”±äºæ˜¯ä¸€ä¸ªæ— é™é•¿çš„è¾¹ç­‰æˆªé¢æŸ±ä½“ï¼Œå› æ­¤å…¶åœ¨$z$æ–¹å‘ä¸Šçš„ä½ç§»ä¸º0ï¼Œåº”å˜ä¸º0ï¼Œäºæ˜¯å°±å¯¹åº”çš„å‰ªåˆ‡åŠ›ä¹Ÿå°±ä¸º0ï¼Œä½†æ˜¯å…¶å¯¹åº”çš„åº”åŠ›å°±ä¸ä¸€å®šä¸º0äº†ã€‚ ä¸‹é¢æ¥ç®€å•çš„å½’çº³ä¸Šè¿°çš„å¹³é¢åº”å˜é—®é¢˜ã€‚ ä¸Šè¿°ä¸¤ç§é—®é¢˜ç›´æ¥çš„è”ç³»ã€‚ å¹³é¢çš„åˆšä½“ä½ç§» åˆšä½“åœ¨å¹³é¢ç§»åŠ¨æ—¶ï¼Œå…¶å†…éƒ¨ä¸å­˜åœ¨åº”å˜ä»…ä»…åœ¨å¤–éƒ¨æœ‰åŠ›çš„ä½œç”¨ã€‚ 4.2 ç®€å•æ‹‰æ†é—®é¢˜çš„å®Œæ•´å¼¹æ€§åŠ›å­¦æ±‚è§£è¿™é‡Œä½¿ç”¨å‰é¢çš„ä¸‰å¤§ç±»å˜é‡å’Œä¸‰å¤§ç±»æ–¹ç¨‹æ¥å®Œæ•´çš„è§£å†³è¿™ä¸ªç®€å•çš„æ‹‰æ†é—®é¢˜ã€‚ ä¸Šé¢çš„é—®é¢˜æ˜¯ä¸€ä¸ªç®€å•çš„ä¸€ç»´é—®é¢˜ï¼Œäºæ˜¯å°†å¯å¾—ï¼š ä¸‹é¢åˆ†åˆ«ä½¿ç”¨ææ–™åŠ›å­¦å’Œå¼¹æ€§åŠ›å­¦çš„ä¸‰å¤§ç±»å˜é‡å’Œä¸‰å¤§ç±»æ–¹ç¨‹æ¥æ±‚è§£çš„ç»“æœã€‚ å¼¹æ€§åŠ›å­¦çš„è§£æ˜¯ä¸€ä¸ªåˆ†å¸ƒï¼Œè€Œææ–™åŠ›å­¦ä»…ä»…æ±‚å¾—çš„æ—¶å³ç«¯çš„ç»“æœã€‚ 4.3 å¹³é¢çº¯å¼¯æ¢çš„æè¿°åŠæ±‚è§£ è¿™ä¸€éƒ¨åˆ†å’Œææ–™åŠ›å­¦é‡Œé¢æ±‚è§£çš„æƒ…å†µæ—¶ä¸€æ ·ã€‚ ç¡®å®šäº†åŸºæœ¬çš„å˜é‡ä¹‹åï¼Œä¸‹é¢æˆ‘ä»¬æ¥å»ºç«‹ä¸‰å¤§æ–¹ç¨‹ã€‚ é¦–å…ˆæ˜¯å¹³è¡¡æ–¹ç¨‹çš„å»ºç«‹ ä¹‹åæ˜¯å‡ ä½•æ–¹ç¨‹çš„å»ºç«‹ ç”±äºæˆ‘ä»¬åœ¨å‰é¢è¿›è¡Œå¾®å…ƒåˆ†æçš„æ—¶å€™å·²ç»ä½¿ç”¨çš„äº†å‡å¸ƒè½½è·äº†ï¼Œäºæ˜¯è¿™é‡Œçš„è¾¹ç•Œä»…ä»…è€ƒè™‘åœ¨æ”¯åº§å¤„çš„å—åŠ›ã€‚ 4.4 ç©ºé—´å¼¹æ€§é—®é¢˜çš„å®Œæ•´æè¿° è¿™é‡Œè§£å†³ç©ºé—´é—®é¢˜çš„ä¸»è¦çš„æ–¹æ³•æ˜¯ä¸€ç§æ˜¯å–å‡ºå¾®å…ƒä½“æ¥è¿›è¡Œåˆ†æï¼Œå¦ä¸€ç§æ˜¯å°†2Dé—®é¢˜è¿›è¡Œä¸‰ç»´æ¨å¹¿ã€‚ é¦–å…ˆæ˜¯åœ¨å˜é‡æ–¹é¢ã€‚ ä¹‹åæ˜¯å¹³è¡¡æ–¹ç¨‹çš„æ–¹é¢ã€‚ ç„¶åæ˜¯å‡ ä½•æ–¹ç¨‹æ–¹é¢ã€‚ æ¥ä¸‹æ¥æ˜¯ç‰©ç†æ–¹ç¨‹ä¸Šé¢ã€‚ æœ€åæ˜¯åœ¨è¾¹ç•Œæ¡ä»¶æ–¹é¢ã€‚ 3Dé—®é¢˜çš„æŒ‡æ ‡å½¢å¼çš„ä¹¦å†™ã€‚ 4.5 å…³äºå¼ é‡çš„ç†è§£ åœ¨è¿™é‡Œå‘é‡çš„æ¨¡é•¿å…¶å®å°±æ˜¯ä¸€ä¸ªä¸å˜é‡ï¼Œåˆ©ç”¨æ•´ä¸ªä¸å˜é‡æ¥å®šä¹‰å¼ºåº¦çš„å‡†åˆ™ã€‚ å°†ä¸Šè¿°çš„2Dçš„åæ ‡å˜æ¢é—®é¢˜è½¬æ¢æˆ3Dçš„æƒ…å†µã€‚ Chapter 5 å˜å½¢ä½“æ–¹ç¨‹æ±‚è§£çš„è¯•å‡½æ•°æ–¹æ³•çš„åŸç†5.1 å˜å½¢ä½“(å¼¹æ€§)åŠ›å­¦æ–¹ç¨‹æ±‚è§£æ–¹æ³•åˆ†ç±»åŠè¯•å‡½æ•°æ–¹æ³• ä¸‹é¢ä¸ºå‡ ä¸ªä¸»è¦çš„è¯¯å·®è®¡ç®—æ–¹æ³•ã€‚ 5.2 å¹³é¢å¼¯æ›²æ¢çš„æ±‚è§£çš„è¯•å‡½æ•°æ–¹æ³•â€”â€”æ®‹å€¼å¤„ç†æ³• GalerkinåŠ æƒæ–¹æ³• æ®‹å€¼æœ€å°äºŒä¹˜æ³• ç”±äºæ‰€å–çš„åŸºåº•æ˜¯ç›¸åŒçš„ï¼Œäºæ˜¯å°±ä¸¤ç§æ–¹æ³•æœ€åæ±‚å¾—çš„ç»“æœæ˜¯ç›¸åŒçš„ã€‚ 5.3 å¦‚ä½•é™ä½å¯¹è¯•å‡½æ•°çš„é«˜é˜¶å¯¼æ•°åŠè¾¹ç•Œæ¡ä»¶çš„è¦æ±‚ å‰é¢çš„é—®é¢˜å–å¾—æ˜¯æ­£å¼¦å’Œä½™å¼¦ï¼Œå› æ­¤å¯å¯¼æ€§æ˜¯å¾ˆå¥½çš„ã€‚ è¿™é‡Œæ˜¯å°†æ‰€æœ‰çš„å˜é‡å…¨éƒ¨ä»£å…¥æ¢ç®—æˆä½ç§»ã€‚ 5.4 å¹³é¢å¼¯æ›²æ¢æ±‚è§£çš„èƒ½é‡åŸç†æœ¬è®²ä¸»è¦è§£å†³çš„æ˜¯å¦‚ä½•é™ä½å¯¹è¯•å‡½æ•°å¯¼æ•°çš„è¦æ±‚ã€‚ 5.5 æœ€å°åŠ¿èƒ½åŸç†çš„å˜åˆ†æ–¹æ³• 5.6 ä¸€èˆ¬é—®é¢˜çš„è™šåŠŸåŸç† Chapter 6 åŸºäºè¯•å‡½æ•°çš„ç»å…¸æ–¹æ³•å’Œæœ‰é™å…ƒæ–¹æ³•6.1 åŸºäºè¯•å‡½æ•°çš„ç»å…¸æ–¹æ³•å’Œæœ‰é™å…ƒæ–¹æ³• ç¦»æ•£ä¸»è¦åˆ†ä¸ºè‡ªç„¶ç¦»æ•£ã€äººå·¥ç¦»æ•£ã€æ··åˆç¦»æ•£ä¸‰ç§ã€‚ 6.2 æœ‰é™å…ƒæ–¹æ³•çš„åŸºæœ¬æ­¥éª¤ 6.3 è¯•å‡½æ•°ç»å…¸æ–¹æ³•åŠæœ‰é™å…ƒæ–¹æ³•çš„æ¯”è¾ƒ","link":"/2022/08/26/%E6%9C%89%E9%99%90%E5%85%83%E6%96%B9%E6%B3%95/%E6%9C%89%E9%99%90%E5%85%83%E5%88%86%E6%9E%90%E4%B8%8E%E5%BA%94%E7%94%A8%E2%80%94%E2%80%94%E7%90%86%E8%AE%BA%E9%83%A8%E5%88%86/"},{"title":"ç¬¬1ç«  æ§åˆ¶ç³»ç»ŸçŠ¶æ€ç©ºé—´è¡¨è¾¾å¼","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡æ˜¯ç°ä»£æ§åˆ¶ç†è®ºçš„ç¬¬ä¸€ç« ï¼Œä¸»è¦è®²è§£çš„æ˜¯æ§åˆ¶ç³»ç»ŸçŠ¶æ€ç©ºé—´çš„è¡¨è¾¾å¼ã€‚","link":"/2022/08/26/%E7%8E%B0%E4%BB%A3%E6%8E%A7%E5%88%B6%E7%90%86%E8%AE%BA/%E7%AC%AC1%E7%AB%A0-%E6%8E%A7%E5%88%B6%E7%B3%BB%E7%BB%9F%E7%8A%B6%E6%80%81%E7%A9%BA%E9%97%B4%E8%A1%A8%E8%BE%BE%E5%BC%8F/"},{"title":"Gmsh æ•™ç¨‹","text":"hljs.initHighlightingOnLoad(); æœ¬ä¸ªæ•™ç¨‹ä¸»è¦å‚è€ƒçš„æ˜¯Gmshç½‘æ ¼åˆ’åˆ†ä»‹ç»ã€‚å…¶ä½™å»ºè®®å‚è€ƒå…¶å®˜æ–¹ç½‘ç«™çš„ä¸Šé¢çš„æ•™ç¨‹ï¼Œå®˜ç½‘ä¸Šé¢æä¾›äº†åŸºäºä¸åŒè¯­è¨€çš„å…·ä½“çš„æ•™ç¨‹ã€‚ è¿™é‡Œä½œè€…åœ¨Geometryæ¯”è¾ƒå–œæ¬¢ä½¿ç”¨OpenCASCADEå†…æ ¸ï¼Œé»˜è®¤æ˜¯ä½¿ç”¨çš„Built-inæ¨¡å¼ã€‚è®¾ç½®çš„æ˜¯æ—¶å€™ç›´æ¥åœ¨UIç•Œé¢é‡Œç‚¹å‡»å³å¯ï¼Œå°±ä¼šåœ¨å¯¹åº”çš„.geoæ–‡ä»¶é‡Œé¢å‡ºç°ã€‚ åŸºç¡€çŸ¥è¯†ä¸»è¦åˆ†æˆå‡ ä½•æ–‡ä»¶çš„åˆ›å»ºå’Œç½‘æ ¼ç”Ÿæˆçš„å·¥ä½œã€‚ åˆ›å»ºå‡ ä½•å…ƒç´ åˆ›å»ºç‚¹Point è¿™é‡Œå¯ä»¥ç›´æ¥åœ¨geoé‡Œé¢æ¥ç¼–è¾‘ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨åœ¨UIç•Œé¢é‡Œæ¥åˆ›å»ºã€‚ 12345678dx=0.1;w=2.0;h=1.0;Point(1)={0.0, 0.0, 0.0, dx};Point(2)={w, 0.0, 0.0, dx};Point(3)={w, h, 0.0, dx};Point(4)={0.0, h, 0.0, dx}; ä½¿ç”¨UIç•Œé¢çš„æ–¹æ³•å°±æ˜¯ï¼š è¿™é‡Œæˆ‘ä»¬å…¶å®ä¸¤ä¸ªæ–¹æ³•éƒ½å·®ä¸å¤šï¼Œå› æ­¤æ²¡å•¥å¯ä»¥æ¨èçš„ï¼Œæˆ‘ä¸ªäººæ¨èçš„æ˜¯å¦‚æœä¸¤ç§æ–¹æ³•ç›¸ä¼¼ï¼Œæˆ‘ä¼˜å…ˆä½¿ç”¨çš„æ˜¯å†™å‘½ä»¤çš„æ–¹æ³•ã€‚ åˆ›å»ºçº¿Lineè¿™é‡Œä¹Ÿæ˜¯å¯ä»¥ç›´æ¥ä½¿ç”¨é¼ æ ‡é€‰ç‚¹çš„æ–¹æ³•æ¥å–ç‚¹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä»£ç ï¼Œä½¿ç”¨ä»£ç æ—¶ä¸»è¦æ—¶å†™å‡ºå¯¹åº”ä¸¤ä¸ªç‚¹çš„ç´¢å¼•å³å¯ã€‚ 1234Line(1) = {4, 3};Line(2) = {3, 2};Line(3) = {2, 1};Line(4) = {1, 4}; å¦‚æœè¦ä½¿ç”¨UIç•Œé¢ï¼Œå°±æ˜¯ç›´æ¥é€‰æ‹©éœ€è¦åˆ’çº¿çš„ç‚¹ï¼Œä¾æ¬¡é€‰ç‚¹å³å¯ã€‚ ä½†æ˜¯ï¼Œåœ¨å®é™…ä½¿ç”¨çš„æ—¶å€™ï¼Œæ•ˆæœå¹¶ä¸æ˜¯å¾ˆç†æƒ³ï¼Œç‚¹ååˆ†çš„éš¾é€‰ä¸­ã€‚è¿™é‡Œè¿˜æ˜¯æ¨èä½¿ç”¨ä»£ç æ¥è¿›è¡Œå»ºæ¨¡ã€‚ åˆ›å»ºsufaceä½¿ç”¨ä»£ç åˆ›å»ºæ—¶å°±æ˜¯Curve Loopå‘½ä»¤ï¼Œé‡Œé¢çš„å†…å®¹å°±æ˜¯å¯¹åº”çš„ç´¢å¼•å€¼ã€‚ 1Curve Loop(1) = {4, 1, 2, 3}; è¿™é‡Œå¯ä»¥é€‰æ‹©UIç•Œé¢çš„Plane surfaceï¼Œç„¶åé€‰ä¸­å¯¹åº”çš„ç›®æ ‡å³å¯ï¼Œä½†æ˜¯ä¾æ—§æ˜¯é‚£ä¸ªé—®é¢˜ï¼Œæˆ‘çš„è½¯ä»¶é‡Œé¢é€‰æ‹©ç›®æ ‡éå¸¸å›°éš¾ï¼Œæ²¡æœ‰è‡ªåŠ¨çš„é€‰æ‹©å’Œå®šä½ã€‚ è¿™é‡Œæˆ‘æ¨èç›´æ¥æ˜¾ç¤ºå¯¹åº”çš„å‡ ä½•å…ƒç´ ï¼Œè¿™æ ·å°±å¾ˆæ–¹ä¾¿æˆ‘ä»¬äº†è§£å¯¹åº”çš„å…ƒç´ indexï¼Œæ–¹ä¾¿ç›´æ¥å†™ä»£ç ã€‚ å‡ºç°ä¸Šè¿°çš„è™šçº¿å°±æ˜¯ä»£è¡¨æˆ‘ä»¬çš„é¢æ·»åŠ å®Œæˆã€‚ åˆ›å»ºç‰©ç†å…ƒç´ æ·»åŠ Physical groups Curveè¿™é‡Œæ˜¯å°†å‡ ä½•å…ƒç´ è¿›è¡Œç‰©ç†ä¸Šçš„å‘½åï¼Œæ¥æœåŠ¡ä¹‹åçš„ç½‘æ ¼ä¸Šçš„åˆ’åˆ†ã€‚è¿™é‡Œä¼˜å…ˆä½¿ç”¨UIç•Œé¢ï¼Œä½†æ˜¯ä»£ç è¿˜æ˜¯è¦çŸ¥é“å…¶å…·ä½“çš„å«ä¹‰ã€‚ è¿™é‡Œçš„ä»£ç å…¶å®.geoä¹Ÿä¸å«ä»£ç ï¼Œå…¶å®å°±ç±»ä¼¼äº.jsonæ–‡ä»¶ä¸€æ ·ï¼Œæ˜¯ä¸€ç§å­˜å‚¨ä¿¡æ¯çš„ä¸€ç§æ ¼å¼ï¼Œå…¶æœ‰è‡ªå·±çš„è¯­æ³•ã€‚ 1234Physical Curve(&quot;left&quot;, 5) = {4};Physical Curve(&quot;right&quot;, 6) = {2};Physical Curve(&quot;top&quot;, 7) = {1};Physical Curve(&quot;bottom&quot;, 8) = {3}; æ·»åŠ Physical groups surfaceåŒæ ·çš„æ–¹æ³•ï¼Œæ¥åˆ›å»ºç‰©ç†å…ƒç´ ä¸Šçš„surfaceä¿¡æ¯ï¼Œå…¶å¯¹åº”çš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚ 1Physical Surface(&quot;block&quot;, 9) = {1}; ç½‘æ ¼çš„åˆ›å»ºå’Œä¿®æ”¹ç½‘æ ¼çš„åˆ›å»ºä¸Šè¿°ä¿¡æ¯è®¾ç½®å¥½ä¹‹åï¼Œç‚¹å‡»Mesh-&gt;2Då³å¯ç”Ÿæˆå¯¹åº”çš„ç½‘æ ¼ä¿¡æ¯ã€‚ æ­¤æ—¶åˆ’åˆ†ç½‘æ ¼ä¹‹å.geoé‡Œé¢çš„å†…å®¹ä¸åœ¨å¢åŠ ï¼Œå› ä¸ºè¿™é‡Œåˆ’åˆ†ç½‘æ ¼çš„ä¿¡æ¯ä¼šè‡ªåŠ¨çš„ä¿å­˜åœ¨.mshæ–‡ä»¶ä¸­ã€‚ ç½‘æ ¼å¯†åº¦çš„ä¿®æ”¹å¦‚æœæ„Ÿè§‰ä¸Šè¿°ç½‘æ ¼åˆ’åˆ†çš„ç»“æ„æ¯”è¾ƒç²—ï¼Œå¸Œæœ›å¯¹ç½‘æ ¼åˆ’åˆ†çš„ç»“æ„è¿›è¡Œç»†åŒ–ï¼Œé‚£ä¹ˆå°±éœ€è¦è°ƒæ•´æœ€å¼€å§‹çš„dxå‚æ•°ã€‚ è¿™é‡Œæˆ‘ä»¬å°†dx=0.05ï¼Œè§‚å¯Ÿç½‘æ ¼åˆ’åˆ†çš„æ•ˆæœã€‚ è¿™é‡Œæˆ‘ä»¬å°†dx=0.01ï¼Œè§‚å¯Ÿåˆ°ç½‘æ ¼åˆ’åˆ†çš„æ•ˆæœã€‚ ä¹Ÿå¯ä»¥å®šä¹‰æ¯ä¸ªè¾¹ä¸Šçš„æœ‰é™å•å…ƒçš„æ•°é‡æ¥è¿›è¡Œä¿®æ”¹ã€‚ ä¸Šè¿°æ“ä½œå¯¹åº”çš„ä»£ç æ˜¯ï¼š 1Transfinite Curve {4} = 21 Using Progression 1; å¾—åˆ°çš„æ•ˆæœå¦‚ä¸‹æ‰€ç¤ºã€‚ äºæ˜¯å°±ä¼šå‘ç°ï¼Œè¢«ä¿®æ”¹çš„é‚£ä¸€è¾¹ä¸Šçš„ç½‘æ ¼æ¯”è¾ƒçš„å¯†é›†ï¼Œå¦‚æœè¦å¯¹å…¨å±€çš„ç½‘æ ¼éƒ½è¿›è¡Œä¿®æ”¹çš„è¯ï¼Œå°±å°†ä¸Šè¿°å››ä¸ªè¾¹éƒ½è¿›è¡Œä¿®æ”¹ã€‚ å¦‚æœæ˜¯è¦å¯¹æ¯ä¸ªè¾¹éƒ½è¿›è¡Œå¦‚ä¸‹çš„æ“ä½œï¼Œå°±å°†å…¶å¯¹åº”çš„è¾¹çš„indexéƒ½å†™è¿›äº†ï¼š 1Transfinite Curve {4, 3, 2, 1} = 21 Using Progression 1; å¾—åˆ°æ•ˆæœå¦‚ä¸‹æ‰€ç¤ºã€‚ ä¿®æ”¹ç½‘æ ¼çš„ç±»å‹ä¸Šè¿°æ–¹æ³•é»˜è®¤åˆ’åˆ†çš„ç½‘æ ¼æ˜¯ä¸‰è§’å‹çš„ç½‘æ ¼ï¼Œä½†æ˜¯æœ‰æ—¶æˆ‘ä»¬éœ€è¦å››è¾¹å½¢ã€å…­è¾¹å½¢ç­‰é«˜é˜¶çš„ç½‘æ ¼ã€‚è¿™é‡Œå°±æ˜¯éœ€è¦ä¿®æ”¹ç½‘æ ¼çš„ç±»å‹ï¼Œä»¥ä¸‹æ˜¯ä¿®æ”¹ç½‘æ ¼ç±»å‹çš„å‡ ä¸ªæ–¹æ³•ã€‚ ç¬¬ä¸€ç§æ–¹æ³•ï¼Œå°±æ˜¯ä¿®æ”¹ç½‘æ ¼çš„é˜¶æ•°ï¼Œå°†å…¶ä»æœ€åˆçš„ä¸€é˜¶ç½‘æ ¼ä¿®æ”¹æˆäºŒé˜¶æˆ–è€…ä¸‰é˜¶ï¼Œä½†æ˜¯ä¸€èˆ¬æƒ…å†µä¸‹ä¸€äº›æœ‰é™å…ƒè½¯ä»¶æ˜¯ä¸æ”¯æŒä¸‰é˜¶çš„ï¼Œä¸€èˆ¬éƒ½ææˆäºŒé˜¶ç½‘æ ¼å³å¯ã€‚ æ­¤æ—¶å°±å˜æˆäº†ä¸€ä¸ª6èŠ‚ç‚¹äºŒé˜¶ä¸‰è§’å½¢çš„ç½‘æ ¼ï¼Œä½†æ˜¯ä¸Šè¿°æ­¥éª¤ä¸€å®šè¦åœ¨æˆ‘ä»¬ç”ŸæˆäºŒé˜¶ç½‘æ ¼ä¹‹åæ‰å¯ä»¥è¿›è¡Œï¼Œå¦åˆ™æ— æ³•è¿›è¡Œã€‚ ç¬¬äºŒç§æ–¹æ³•ï¼Œæˆ‘ä»¬æ‹¿ä»–æ¥ç”Ÿæˆå››è¾¹å½¢çš„ç½‘æ ¼å¦‚ä¸‹ï¼Œæ‰“å¼€toolé‡Œé¢çš„optionsï¼Œé€‰æ‹©ç½‘æ ¼éƒ¨åˆ†è¿›è¡Œä¿®æ”¹ã€‚ åŸºäºä¸Šè¿°çš„å°±è¯¥å°±å¾—åˆ°äº†å››è¾¹å½¢çš„ç½‘æ ¼ã€‚ ä¸‰ç»´BOXçš„ç½‘æ ¼åˆ’åˆ†æŒ‰ç…§åŒæ ·çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œå¯¹ä¸‰ç»´boxè¿›è¡Œåˆ’åˆ†çš„å®ä¾‹ã€‚ åˆ›å»ºå‡ ä½•å…ƒç´ é¦–å…ˆï¼Œç»˜åˆ¶åŸºæœ¬çš„ç‚¹å…ƒå’ŒåŸºæœ¬çš„çº¿å…ƒï¼Œè¿™é‡Œæˆ‘ä»¬é€šè¿‡å¯¹åº”çš„å‘½ä»¤äº†åˆ›å»ºã€‚åœ¨åé¢çš„æ•™ç¨‹é‡Œé¢ï¼Œæˆ‘ä»¬ä¹Ÿä¼šé€šè¿‡pythonçš„å‘½ä»¤æ¥è¿›è¡Œåˆ›å»ºã€‚ 123456789101112131415161718192021222324252627282930313233//+SetFactory(&quot;OpenCASCADE&quot;);dx=0.1;w=2.0;h=1.0;Point(1)={0.0, 0.0, 0.0, dx};Point(2)={w, 0.0, 0.0, dx};Point(3)={w, h, 0.0, dx};Point(4)={0.0, h, 0.0, dx};Point(5)={0.0, 0.0, w, dx};Point(6)={w, 0.0, w, dx};Point(7)={w, h, w, dx};Point(8)={0.0, h, w, dx};Line(1) = {1, 2};Line(2) = {2, 3};Line(3) = {3, 4};Line(4) = {4, 1};Line(5) = {5, 6};Line(6) = {6, 7};Line(7) = {7, 8};Line(8) = {8, 5};Line(9) = {1, 5};Line(10) = {8, 4};Line(11) = {2, 6};Line(12) = {7, 3}; ä¹‹åï¼Œæˆ‘ä»¬åˆ›å»ºç›¸å…³çš„è¡¨é¢surfaceç‰¹å¾ã€‚æ³¨æ„åœ¨åˆ›å»ºsurfaceè¯­å¥é‡Œé¢ï¼Œæˆ‘ä»¬å¯¹åº”çš„indexä¸Šé¢Lineçš„indexï¼Œä¸æ˜¯å‰é¢çš„å¯¹åº”çš„å‰é¢ç‚¹å¯¹åº”çš„indexã€‚ 123456789101112131415// è¿™é‡Œçš„indexå¯¹åº”çš„æ˜¯ä¸Šé¢ç›´çº¿çš„index// ä¸æ˜¯ç‚¹å¯¹åº”çš„indexCurve Loop(1) = {8, 5, 6, 7};Curve Loop(2) = {4, 1, 2, 3};Curve Loop(3) = {4, 9, 8, 10};Curve Loop(4) = {2, 11, 6, 12};Curve Loop(5) = {3, 10, 7, 12};Curve Loop(6) = {1, 9, 5, 11};Plane Surface(1) = {1};Plane Surface(2) = {2};Plane Surface(3) = {3};Plane Surface(4) = {4};Plane Surface(5) = {5};Plane Surface(6) = {6}; æ³¨æ„ï¼Œé€‰ä¸­çš„å‚æ•°åªæœ‰æŒ‰ä¸‹eé”®æ‰ç®—çœŸæ­£çš„åˆ›å»ºæˆåŠŸã€‚ ä¸‹é¢å’Œä¹‹å‰æœ‰æ‰€ä¸åŒï¼Œè¿™é‡Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªä½“ç´ çš„å‡ ä½•æ¨¡å‹Volumeã€‚ é€šè¿‡UIç•Œé¢æ“ä½œå¾—åˆ°çš„ä»£ç ä¸ºï¼š 12Surface Loop(1) = {1, 3, 2, 6, 4, 5};Volume(1) = {1}; åˆ›å»ºç‰©ç†å…ƒç´ è¿™é‡Œæ·»åŠ çš„ç‰©ç†å…ƒç´ å’Œä¹‹å‰ä¸åŒï¼Œè¿™é‡Œä¸»è¦æ˜¯æ·»åŠ çš„Surfaceè€Œä¸æ˜¯Curveã€‚ä¹‹åç»™volumeä¹Ÿè¦æ·»åŠ å¯¹åº”çš„ç‰©ç†å…ƒç´ ã€‚ å¯¹åº”çš„ä»£ç å¦‚ä¸‹ï¼š 123Physical Surface(&quot;left&quot;, 13) = {1};Physical Surface(&quot;right&quot;, 14) = {2};Physical Volume(&quot;block&quot;, 15) = {1}; ç½‘æ ¼çš„ç”Ÿæˆå’Œä¿®æ”¹ç½‘æ ¼çš„ç”Ÿæˆå’Œä¹‹å‰ç›¸ä¼¼ï¼Œç›´æ¥ç‚¹å‡»Meshå³å¯ç”Ÿæˆã€‚ ç½‘æ ¼çš„ä¿®æ”¹å’Œä¹‹å‰æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯ç›´æ¥åˆ°optionsé‡Œé¢çš„Meshé‡Œè¿›è¡Œä¿®æ”¹å‚æ•°ï¼Œå…·ä½“å‚æ•°ä¿®æ”¹å¦‚ä¸‹ï¼š ä½†æ˜¯ä¸Šè¿°çš„åˆ’åˆ†å‘ç”Ÿäº†æŠ¥é”™ï¼Œäºæ˜¯æˆ‘ä»¬æ›´æ¢ç½‘æ ¼çš„ç”Ÿæˆé…ç½®ã€‚ å¾—åˆ°çš„æ•ˆæœå¦‚ä¸‹ï¼š ç½‘æ ¼çš„ä¿å­˜å¦‚æœè¦æ˜¯ä¿å­˜ç§°ä¸º4.0ç‰ˆæœ¬ä»¥ä¸Šçš„æ ¼å¼å°±ç›´æ¥é€‰æ‹©save meshå³å¯ï¼Œä½†æ˜¯å¦‚æœè¦ä¿å­˜æˆä¸º2.0ç‰ˆæœ¬çš„å°±éœ€è¦è¿›è¡Œä¿®æ”¹æ ¼å¼ä¸ºExportå³å¯ã€‚ ä¸‹é¢æ˜¯ä¿å­˜æˆä¸º2.0æ ¼å¼çš„æ–¹æ³•ï¼š é¦–å…ˆç‚¹å‡»Exportï¼Œè¿™å€™é€‰æ‹©æ ¼å¼ï¼Œè¿™é‡Œè¿˜æ˜¯é€‰æ‹©.mshçš„æ ¼å¼ï¼Œä¹‹åä¼šå¼¹å‡ºä¸€ä¸ªçª—å£æ¥è®¾ç½®å’Œç¼–è¾‘å¯¼å‡ºçš„ç»“æœã€‚ ä¹‹åï¼Œå°†ä¿å­˜æˆä¸ºçš„æ ¼å¼æ•°æ®è®¾ç½®ä¸ºVersion 2 ASCIIå³å¯ã€‚ å†4.0ä¿å­˜çš„æ–‡ä»¶é‡Œé¢æ˜¯ç¦»æ•£çš„ä¿å­˜ç€è®°å½•çš„èŠ‚ç‚¹çš„åæ ‡å‚æ•°ï¼Œä½†æ˜¯åœ¨2.0ä¹‹å‰æ˜¯åœ¨ä¸€å—éƒ½è®°å½•ç€å‚æ•°ï¼Œæ–¹ä¾¿æŸ¥é˜…ã€‚4.0çš„ç‰¹ç‚¹æ˜¯èŠ‚çœå†…å­˜çš„å¼€é”€ã€‚ åŸºäºPythonçš„å‘½ä»¤æµé€šè¿‡ä¸Šé¢çš„æ•™ç¨‹ï¼Œæˆ‘ä»¬å·²ç»å¯¹Gmshå‡ ä½•æ–‡ä»¶é‡Œé¢çš„å†…å®¹çš„å«ä¹‰æœ‰äº†åˆæ­¥çš„ç†è§£ï¼Œå¹¶ä¸”ä¹Ÿäº†è§£äº†UIç•Œé¢çš„åŸºæœ¬çš„ä½¿ç”¨ã€‚ç°åœ¨è¿›è¡Œçš„ä¸»è¦æ˜¯å¦‚ä½•é€šè¿‡Pythonæ¥ä»å¤–éƒ¨è°ƒç”¨Gmshæ¥å¯¼å…¥å‡ ä½•æ¨¡å‹ï¼Œå¹¶åˆ’åˆ†ç½‘æ ¼ã€‚ è¿™éƒ¨åˆ†çš„æ•™ç¨‹ä¸»è¦æ˜¯åŸºäºå®˜ç½‘ä¸Šé¢çš„demoæ¥è¿›è¡Œå­¦ä¹ ã€‚ä¸‹é¢å…ˆæ•´ç†ä»¥ä¸‹æ¯ä¸ªdemoå¯¹åº”çš„ä¸»è¦çš„å†…å®¹ï¼Œæ–¹ä¾¿ä»¥åå‚è€ƒã€‚ t1: Geometry basics, elementary entities, physical groups t2: Transformations, extruded geometries, volumes t3: Extruded meshes, parameters, options t4: Built-in functions, holes in surfaces, annotations, entity colors t5: Mesh sizes, loops, holes in volumes t6: Transfinite meshes t7: Background meshes t8: Post-processing and animations t9: Plugins t10: Mesh size fields t11: Unstructured quadrangular meshes t12: Cross-patch meshing with compounds t13: Remeshing an STL file without an underlying CAD model t14: Homology and cohomology computation t15: Embedded points, lines and surfaces t16: Constructive Solid Geometry, OpenCASCADE geometry kernel t17: Anisotropic background mesh t18: Periodic meshes t19: Thrusections, fillets, pipes, mesh size from curvature t20: STEP import and manipulation, geometry partitioning t21: Mesh partitioning 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131import gmshimport sys# åœ¨è°ƒç”¨APIä¹‹å‰éƒ½è¦è¿›è¡Œåˆå§‹åŒ–gmsh.initialize()# ç„¶åå°±æ˜¯åˆ›å»ºä¸€ä¸ªæ¨¡å‹å¹¶ä¸”å°†å…¶å‘½åä¸º&quot;t1&quot;gmsh.model.add(&quot;t1&quot;)# æ­¤å¤„çš„pythonæä¾›äº†ç›´æ¥æ”¯æŒCADæ¨¡å‹çš„å†…æ ¸ã€‚# built-in å†…æ ¸æ˜¯æœ¬æ•™ç¨‹ä¸»è¦ä½¿ç”¨çš„å†…æ ¸ï¼Œå…¶æ”¯æŒçš„APIå‡½æ•°æœ‰`gmsh.model.geo`çš„å‰ç¼€# ================================åˆ›å»ºç‚¹å…ƒç´ ====================================# è¿™é‡Œåœ¨æ¨¡å‹é‡Œé¢æœ€åŸºæœ¬çš„å…ƒç´ æ˜¯ç‚¹ï¼Œ# åˆ›å»ºç‚¹ä½¿ç”¨çš„APIä¸º gmsh.model.geo.addPoint()# - å‰é¢çš„3ä¸ªå‚æ•°ä¸ºåæ ‡å€¼(x,y,z)# - ç¬¬4ä¸ªå‚æ•°æ˜¯ç½‘æ ¼ç‚¹ä¹‹é—´çš„é—´è·# - ç¬¬5ä¸ªå‚æ•°ä¸ºpointçš„æ ‡ç­¾ï¼Œæˆ–è€…æ˜¯ç´¢å¼•ï¼Œä¸€èˆ¬æ˜¯æ­£æ•´æ•°lc = 1e-2gmsh.model.geo.addPoint(0, 0, 0, lc, 1)# æ³¨æ„è¿™é‡Œå«æœ‰å¦å¤–çš„ä¸€ä¸ªæ¨¡å‹occ# gmsh.model.occ.add_point()# è¿™é‡Œä½¿ç”¨äº†é©¼å³°å‘½åæ³•`addPoint()`# ä½†æ˜¯ä¹Ÿæœ‰å¦å¤–çš„ä¸€ä¸ªå‡½æ•°å`add_point()`,ä¸¤è€…æ˜¯å¯ä»¥äº’æ¢çš„ã€‚# å…¶æ¬¡ï¼Œç½‘æ ¼å¤§å°å°†æ ¹æ®è®¾å®šçš„ç½‘æ ¼é—´è·é€šè¿‡æ’å€¼çš„æ–¹æ³•è·å¾—çš„ã€‚# å…¶ä»–çš„æ–¹æ³•å°±æ˜¯ä½¿ç”¨é€šç”¨çš„ç½‘æ ¼æ ¼å¼å­—æ®µæ¥è§£å†³å…·ä½“è§ t10.py# è¿˜æœ‰ä¸€ä¸ªç‰¹æ®Šçš„æƒ…å†µå°±æ˜¯ä½¿ç”¨èƒŒæ™¯ç½‘æ ¼background mesh t7.py# å¦‚æœæ²¡æœ‰æä¾›ç›®æ ‡ç½‘æ ¼å°ºå¯¸ï¼Œåˆ™å°†æ ¹æ®æ¨¡å‹æ•´ä½“å°ºå¯¸å¯¹æ¨¡å‹ä½¿ç”¨é»˜è®¤çš„å‡åŒ€ç²—å°ºå¯¸ã€‚gmsh.model.geo.addPoint(.1, 0, 0, lc, 2)gmsh.model.geo.addPoint(.1, .3, 0, lc, 3)# å¦‚æœæ²¡æœ‰æ˜¾å¼æä¾›æ ‡è®°ï¼Œåˆ™ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªæ–°æ ‡è®°ï¼Œå¹¶ç”±å‡½æ•°è¿”å›:p4 = gmsh.model.geo.addPoint(0, .3, 0, lc)# ================================åˆ›å»ºç›´çº¿å…ƒç´ ====================================# æ›²çº¿æ˜¯Gmshçš„ç¬¬äºŒç§å…ƒç´ å®ä½“ï¼Œåœ¨æ›²çº¿ä¸­ï¼Œç›´çº¿æ˜¯æœ€ç®€å•çš„ã€‚# ä½¿ç”¨å†…ç½®å†…æ ¸åˆ›å»ºç›´çº¿æ®µçš„APIéµå¾ªç›¸åŒçš„çº¦å®š:# - å‰ä¸¤ä¸ªå‚æ•°æ˜¯ç‚¹ç´¢å¼•tag(ç›´çº¿çš„èµ·å§‹ç‚¹å’Œç»“æŸç‚¹)ï¼Œ# - æœ€åä¸€ä¸ª(å¯é€‰çš„)æ˜¯ç›´çº¿çš„tagã€‚# è¿™é‡Œæ›²çº¿çš„æ ‡ç­¾å’Œç´¢å¼•æ˜¯ç›¸å¯¹äºç›´çº¿ç‹¬ç«‹çš„ï¼Œå› æ­¤è¿™ä¸ªæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨æ ‡ç­¾1# æ¯ç§å…ƒç´ çš„æ ‡ç­¾éƒ½æ˜¯ç›¸äº’ç‹¬ç«‹ã€‚gmsh.model.geo.addLine(1, 2, 1)gmsh.model.geo.addLine(3, 2, 2)gmsh.model.geo.addLine(3, p4, 3)gmsh.model.geo.addLine(4, 1, p4)# ================================åˆ›å»ºæ›²é¢å…ƒç´ ====================================# æ›²é¢æ˜¯Gmshçš„ç¬¬ä¸‰ç§å…ƒç´ å®ä½“ï¼Œ# ä¸ºäº†åˆ©ç”¨ä¸Šé¢çš„å››ä¸ªç›´çº¿å®šä¹‰ä¸€ä¸ªç®€å•çš„çŸ©å½¢æ›²é¢ï¼Œè¿™é‡Œéœ€è¦å®šä¹‰ä¸€ä¸ªç®€å•çš„æ›²çº¿ç¯# æ›²çº¿ç¯è·¯æ˜¯ç”±ä¸€ç»„æœ‰åºçš„è¿æ¥æ›²çº¿å®šä¹‰çš„ï¼Œæ¯æ¡æ›²çº¿éƒ½æœ‰ä¸€ä¸ªç¬¦å·(å–å†³äºæ›²çº¿å½¢æˆç¯è·¯çš„æ–¹å‘)ã€‚# - åˆ›å»ºæ›²çº¿å¾ªç¯çš„APIå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ç»„æ•´æ•°ï¼Œ# - ç¬¬äºŒä¸ª(å¯é€‰)å‚æ•°æ˜¯curve loopæ ‡è®°(åœ¨æ›²çº¿å¾ªç¯ä¸­å¿…é¡»æ˜¯å”¯ä¸€çš„):gmsh.model.geo.addCurveLoop([4, 1, -2, 3], 1)# ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥å°†æ›²é¢å®šä¹‰ä¸ºä¸€ä¸ªæ›²çº¿å¾ªç¯åˆ—è¡¨# (è¿™é‡Œåªæœ‰ä¸€ä¸ªï¼Œä»£è¡¨å¤–éƒ¨è½®å»“ï¼Œå› ä¸ºæ²¡æœ‰å­”â€”â€”å‚è§' t4.py'çš„ä¸€ä¸ªå¸¦æœ‰å­”çš„æ›²é¢çš„ä¾‹å­):gmsh.model.geo.addPlaneSurface([1], 1)# ================================è¿›è¡Œç½‘æ ¼åŒ–====================================# åœ¨å¯¹å®ƒä»¬è¿›è¡Œç½‘æ ¼åŒ–ä¹‹å‰(æ›´ä¸€èˆ¬åœ°è¯´ï¼Œåœ¨å®ƒä»¬è¢«å†…ç½®CADå†…æ ¸å‡½æ•°ä¹‹å¤–çš„APIå‡½æ•°ä½¿ç”¨ä¹‹å‰)ï¼Œ# CADå®ä½“å¿…é¡»ä¸ Gmshæ¨¡å‹åŒæ­¥ï¼Œåè€…å°†åˆ›å»ºç›¸å…³çš„ Gmshæ•°æ®ç»“æ„ã€‚# å°±æ˜¯è¯´ä¹‹å‰åˆ›å»ºæ˜¯CADå®ä½“ï¼Œä¸æ˜¯ Gmshæ¨¡å‹ï¼Œéœ€è¦å°†å…¶è”ç³»åœ¨ä¸€èµ·# å®ç°åŒæ­¥çš„APIï¼šgmsh.model.geo.synchronize()# åŒæ­¥å¯ä»¥åœ¨ä»»ä½•æ—¶å€™è°ƒç”¨ï¼Œä½†å®ƒä»¬æ¶‰åŠå¤§é‡çš„è®¡ç®—é‡;# å› æ­¤ï¼Œè™½ç„¶æ‚¨å¯ä»¥åœ¨æ¯ä¸ªCADå‘½ä»¤ä¹‹ååŒæ­¥å†…éƒ¨CADæ•°æ®ï¼Œä½†é€šå¸¸æœ€å¥½æ˜¯å°½é‡å‡å°‘åŒæ­¥ç‚¹çš„æ•°é‡ã€‚# åœ¨è¿™ä¸ªå±‚é¢æ˜¯ï¼ŒGmshå·²ç»çŸ¥é“äº†æ˜¾ç¤ºçŸ©å½¢surface 1 å¹¶ä¸”ç»˜åˆ¶ç½‘æ ¼ã€‚# ä¸€ä¸ªå¯é€‰çš„æ­¥éª¤ï¼šå°†å‡ ä½•å…ƒç´ å˜æˆå…·æœ‰ç‰©ç†æ„ä¹‰çš„ç»„# ä¾‹å¦‚å®šä¹‰ä¸€äº›æ•°å­¦å±æ€§(â€œåŸŸâ€ã€â€œè¾¹ç•Œâ€)ã€åŠŸèƒ½å±æ€§(â€œå·¦ç¿¼â€ã€â€œæœºèº«â€)æˆ–ææ–™å±æ€§(â€œé’¢â€ã€â€œç¢³â€)ï¼Œé‚£ä¹ˆå°±éœ€è¦ä¸€ä¸ªå¯é€‰æ­¥éª¤ã€‚# è¿™æ ·çš„ç»„åœ¨Gmshä¸­ç§°ä¸ºâ€œç‰©ç†ç»„â€ã€‚# é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœå®šä¹‰äº†ç‰©ç†ç»„ï¼ŒGmshå°†åªåœ¨è¾“å‡ºæ–‡ä»¶ä¸­å¯¼å‡ºè‡³å°‘å±äºä¸€ä¸ªç‰©ç†ç»„çš„ç½‘æ ¼å…ƒç´ ã€‚# (è¦å¼ºåˆ¶Gmshä¿å­˜æ‰€æœ‰å…ƒç´ ï¼Œæ— è®ºå®ƒä»¬æ˜¯å¦å±äºç‰©ç†ç»„ï¼Œè®¾ç½®' Mesh.SaveAll()é€‰é¡¹ä¸º1ã€‚)# ç‰©ç†ç»„ä¹Ÿç”±æ ‡ç­¾tagï¼Œä½†æ˜¯æ˜¯ä¸¥æ ¼çš„æ­£intï¼Œå¹¶ä¸”åœ¨æ¯ä¸ªç»´åº¦(0Dã€1Dã€2Dæˆ–3D)éƒ½åº”è¯¥æ˜¯å”¯ä¸€çš„ã€‚# ä¹Ÿå¯ä»¥ç»™ç‰©ç†ç»„å‘½åï¼Œå…·ä½“è¯·çœ‹ä¸‹é¢çš„API# é¦–å…ˆï¼Œå®šä¹‰çš„æ˜¯è¾¹ç•Œæ›²çº¿left, right, bottom -&gt; Line 1,2,4# - ç¬¬ä¸€ä¸ªå‚æ•°dim, ç¬¬äºŒä¸ªå‚æ•°æ˜¯è¢«å®šä¹‰å…ƒç´ å®ä½“çš„tag, ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯è¿™ä¸ªç‰©ç†ç»„çš„tag=-1# - ç¬¬å››ä¸ªæ˜¯name, å°±æ˜¯ç›´æ¥ç»™ç‰©ç†å‘½ågmsh.model.addPhysicalGroup(1, [1, 2, 4], 5)# ä¹‹åï¼Œå®šä¹‰ä¸€ä¸ªç‰©ç†æ›²é¢ï¼Œå¹¶å°†å…¶å‘½åä¸º My surfacegmsh.model.addPhysicalGroup(2, [1], name=&quot;My surface&quot;)# æœ€åï¼Œæˆ‘ä»¬ç”Ÿæˆç½‘æ ¼2Dgmsh.model.mesh.generate(2)# å°†å…¶ä¿å­˜# gmsh.write(&quot;t1.msh&quot;)# æ³¨æ„ï¼Œåœ¨é»˜è®¤çš„æƒ…å†µä¸‹ï¼Œè¿™é‡Œå°†ä¼šå°†æˆ‘ä»¬ç‰©ç†ç»„ä¿¡æ¯å°†ä¼šä¿å­˜åˆ°.mshæ–‡ä»¶ä¸­# Gmshå°†åªåœ¨è¾“å‡ºç½‘æ ¼æ–‡ä»¶ä¸­å¯¼å‡ºé‚£äº›è‡³å°‘å±äºä¸€ä¸ªç‰©ç†ç»„çš„å…ƒç´ ã€‚å¦‚æœè¦å…¨éƒ¨å¯¼å‡º# gmsh.option.setNumber(&quot;Mesh.SaveAll&quot;, 1)# é»˜è®¤æƒ…å†µä¸‹ï¼ŒGmshä»¥æœ€æ–°ç‰ˆæœ¬çš„Gmshç½‘æ ¼æ–‡ä»¶æ ¼å¼(' MSH'æ ¼å¼)ä¿å­˜ç½‘æ ¼ã€‚# é€šè¿‡æŒ‡å®šå…·æœ‰ä¸åŒæ‰©å±•åçš„æ–‡ä»¶åï¼Œå¯ä»¥å°†ç½‘æ ¼ä¿å­˜ä¸ºå…¶ä»–ç½‘æ ¼æ ¼å¼ã€‚ä¾‹å¦‚# gmsh.write(&quot;t1.unv&quot;)# æ‚¨ä¹Ÿå¯ä»¥ä¿å­˜ç½‘æ ¼åœ¨æ—§ç‰ˆæœ¬çš„MSHæ ¼å¼:ç®€å•è®¾ç½®gmsh.option.setNumber(&quot;Mesh.MshFileVersion&quot;, 2)gmsh.write(&quot;t1.msh&quot;)# å¯¹äºä»»ä½•ç‰ˆæœ¬å·' x'ã€‚# ä½œä¸ºä¸€ç§æ›¿ä»£æ–¹æ³•ï¼Œä½ ä¹Ÿå¯ä»¥ä¸æ˜¾å¼æŒ‡å®šæ ¼å¼ï¼Œåªé€‰æ‹©ä¸€ä¸ªå¸¦æœ‰'.msh2â€™æˆ–â€˜.msh4çš„æ‰©å±•ã€‚# ä¸ºäº†å¯è§†åŒ–æ¨¡å‹ï¼Œæˆ‘ä»¬å¯ä»¥è¿è¡Œå›¾å½¢ç”¨æˆ·ç•Œé¢# Here we run it only if &quot;-nopopup&quot; is not provided in the# command line arguments:if '-nopopup' not in sys.argv: gmsh.fltk.run()# åœ¨3.0ä¹‹åï¼Œåœ¨åŸæœ‰å†…ç½®çš„æ ¸çš„åŸºç¡€ä¸Šï¼Œåˆæ·»åŠ äº†å†…ç½®çš„OCC CADå†…æ ¸# åœ¨è°ƒç”¨çš„æ—¶å€™ï¼Œå¢åŠ  `gmsh.model.occ' çš„å‰ç¼€# Different CAD kernels have different features. With OpenCASCADE, instead of# defining the surface by successively defining 4 points, 4 curves and 1 curve# loop, one can define the rectangular surface directly with# gmsh.model.occ.addRectangle(.2, 0, 0, .1, .3)# åœ¨OCCçš„å†…æ ¸é‡Œé¢ï¼Œå¯ä»¥ç›´æ¥ç»˜åˆ¶çŸ©å½¢çš„å†…æ ¸# ä¹‹åè¿›è¡ŒåŒæ­¥æ¨¡å‹çš„æ“ä½œ# gmsh.model.occ.synchronize()# è·å–å¯¹åº”çš„ç‚¹çŸ©é˜µçš„æ“ä½œå¯ä»¥æ˜¯# gmsh.model.getBoundary().# æœ€åï¼Œç»“æŸä½¿ç”¨ Gmsh Python API:gmsh.finalize() 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157# ------------------------------------------------------------------------------## Gmsh Python tutorial 2## Transformations, extruded geometries, volumes## ------------------------------------------------------------------------------import gmshimport sysimport math# If sys.argv is passed to gmsh.initialize(), Gmsh will parse the command line# in the same way as the standalone Gmsh app:gmsh.initialize(sys.argv)gmsh.model.add(&quot;t2&quot;)# æ•´ç†é‡å¤ç¬¬ä¸€ä¸ªå®éªŒçš„ä¾‹å­# Copied from `t1.py'...lc = 1e-2gmsh.model.geo.addPoint(0, 0, 0, lc, 1)gmsh.model.geo.addPoint(.1, 0, 0, lc, 2)gmsh.model.geo.addPoint(.1, .3, 0, lc, 3)gmsh.model.geo.addPoint(0, .3, 0, lc, 4)gmsh.model.geo.addLine(1, 2, 1)gmsh.model.geo.addLine(3, 2, 2)gmsh.model.geo.addLine(3, 4, 3)gmsh.model.geo.addLine(4, 1, 4)gmsh.model.geo.addCurveLoop([4, 1, -2, 3], 1)gmsh.model.geo.addPlaneSurface([1], 1)gmsh.model.geo.synchronize()gmsh.model.addPhysicalGroup(1, [1, 2, 4], 5)gmsh.model.addPhysicalGroup(2, [1], name=&quot;My surface&quot;)# è¿™é‡Œåœ¨ç¬¬ä¸€ä¸ªåŸºç¡€ä¸Šé¢å¢åŠ äº†æ–°çš„ç‚¹å’Œæ›²çº¿gmsh.model.geo.addPoint(0, .4, 0, lc, 5)gmsh.model.geo.addLine(4, 5, 5)# Gmshä¹Ÿæä¾›æ—‹è½¬å˜æ¢çš„å·¥å…·ï¼Œé’ˆå¯¹å®é™…çš„å…ƒç´ å’Œå‰¯æœ¬# é¦–å…ˆï¼Œæ˜¯æ—‹è½¬å˜æ¢# - å‚æ•°1ï¼šå‘é‡vector ä¸»è¦æ˜¯ä»£è¡¨(dim, tag)# - å‚æ•°2ï¼švectorï¼Œä¸»è¦ä»£è¡¨(dx,dy,dz)å…·ä½“çš„å¹³ç§»é‡# ä¸‹é¢ä»¥ä¸€ä¸ªç‚¹ä¸ºä¾‹gmsh.model.geo.translate([(0, 5)], -0.02, 0, 0)# ä¸‹é¢æ˜¯ä¸€ä¸ªæ—‹è½¬çš„ä¾‹å­# - å‚æ•°1ï¼š(dim, tag)# - å‚æ•°2ï¼šæ—‹è½¬ä¸­å¿ƒ(0, 0.3, 0)# - å‚æ•°3ï¼šæ—‹è½¬æ–¹å‘(0, 0, 1)# - å‚æ•°4ï¼šæ—‹è½¬è§’åº¦ -pi / 4gmsh.model.geo.rotate([(0, 5)], 0, 0.3, 0, 0, 0, 1, - math.pi / 4)# Point3å¯ä»¥å€å¤åˆ¶ï¼Œä¹‹åå¹³ç§»0.05ä¸ªå•ä½# copy() è¾“å…¥æ˜¯(dim, tag) è¿”å›æ˜¯å¦ä¸€ä¸ªå‘é‡å¯¹(dim, tag)ov = gmsh.model.geo.copy([(0, 3)])gmsh.model.geo.translate(ov, 0, 0.05, 0)# ä½¿ç”¨æ‹·è´ç‚¹çš„æ ‡ç­¾æ¥åˆ›å»ºæ–°çš„ç‚¹# The new point tag is available in ov[0][1], and can be used to create new# lines:gmsh.model.geo.addLine(3, ov[0][1], 7)gmsh.model.geo.addLine(ov[0][1], 5, 8)gmsh.model.geo.addCurveLoop([5, -8, -7, 3], 10)gmsh.model.geo.addPlaneSurface([10], 11)# ä»¥åŒæ ·çš„æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥å¹³ç§»è¡¨é¢1å’Œ 11çš„æ‹·è´ov = gmsh.model.geo.copy([(2, 1), (2, 11)])gmsh.model.geo.translate(ov, 0.12, 0, 0)print(&quot;New surfaces &quot; + str(ov[0][1]) + &quot; and &quot; + str(ov[1][1]))# å·æ˜¯Gmshä¸­çš„ç¬¬å››ç§åŸºæœ¬å®ä½“ã€‚å°±åƒæˆ‘ä»¬å®šä¹‰æ›²çº¿ç¯æ¥æ„å»ºæ›²é¢ä¸€æ ·ï¼Œæˆ‘ä»¬ä¹Ÿå¿…é¡»å®šä¹‰æ›²é¢ç¯# (å³ã€‚`shell `)æ¥æ„å»ºå·ã€‚ä¸‹é¢çš„ä½“ç§¯æ²¡æœ‰å­”ï¼Œå› æ­¤ç”±ä¸€ä¸ªè¡¨é¢ç¯ç»„æˆ:gmsh.model.geo.addPoint(0., 0.3, 0.12, lc, 100)gmsh.model.geo.addPoint(0.1, 0.3, 0.12, lc, 101)gmsh.model.geo.addPoint(0.1, 0.35, 0.12, lc, 102)# åªæœ‰è¾“å…¥ä¸€ä¸‹çš„å‘½ä»¤æ‰å¯ä»¥å°†æˆ‘ä»¬ä¸Šè¿°çš„å‘½ä»¤åŒæ­¥çš„åˆ°UIç•Œé¢gmsh.model.geo.synchronize()xyz = gmsh.model.get_value(0, 5, [])print(xyz)# æ•´ç†è·å–çš„æ˜¯ tag = 5ä¸ªç‚¹çš„åæ ‡gmsh.model.geo.addPoint(xyz[0], xyz[1], 0.12, 103)# åˆ›å»ºä¸€äº›æ–°çš„çº¿gmsh.model.geo.addLine(4, 100, 110)gmsh.model.geo.addLine(3, 101, 111)gmsh.model.geo.addLine(6, 102, 112)gmsh.model.geo.addLine(5, 103, 113)gmsh.model.geo.addLine(103, 100, 114)gmsh.model.geo.addLine(100, 101, 115)gmsh.model.geo.addLine(101, 102, 116)gmsh.model.geo.addLine(102, 103, 117)gmsh.model.geo.addCurveLoop([115, -111, 3, 110], 118)# è¿™é‡Œçš„æ­£è´Ÿå·æ˜¯æ–¹å‘çº¦æŸ# å…¶æœ¬è´¨æ˜¯è¦å°†ç‚¹è¿›è¡Œé¦–å°¾è¿æ¥gmsh.model.geo.addPlaneSurface([118], 119)gmsh.model.geo.addCurveLoop([111, 116, -112, -7], 120)gmsh.model.geo.addPlaneSurface([120], 121)gmsh.model.geo.addCurveLoop([112, 117, -113, -8], 122)gmsh.model.geo.addPlaneSurface([122], 123)gmsh.model.geo.addCurveLoop([114, -110, 5, 113], 124)gmsh.model.geo.addPlaneSurface([124], 125)gmsh.model.geo.addCurveLoop([115, 116, 117, 114], 126)gmsh.model.geo.addPlaneSurface([126], 127)gmsh.model.geo.addSurfaceLoop([127, 119, 121, 123, 125, 11], 128)gmsh.model.geo.addVolume([128], 129)# å½“ä¸€ä¸ªä½“ç§¯å¯ä»¥ä»ä¸€ä¸ªè¡¨é¢æŒ¤å‡ºæ—¶ï¼Œé€šå¸¸ç›´æ¥ä½¿ç”¨`extrude() `å‡½æ•°æ¯”æ‰‹åŠ¨åˆ›å»ºæ‰€æœ‰çš„ç‚¹ã€# æ›²çº¿å’Œè¡¨é¢æ›´å®¹æ˜“ã€‚# ä¾‹å¦‚ï¼Œä¸‹é¢çš„å‘½ä»¤æ²¿zè½´æŒ¤å‹è¡¨é¢11å¹¶è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªæ–°çš„ä½“ç§¯(ä»¥åŠæ‰€æœ‰éœ€è¦çš„ç‚¹ã€æ›²çº¿å’Œè¡¨é¢)ã€‚# å…¶å®å°±æ˜¯ä»¥ è¡¨é¢11ä¸ºåœ°é¢ï¼Œå¾—åˆ°ä¸€ä¸ªä¸»æŸ±ä½“# æ­£å¦‚é¢„æœŸçš„é‚£æ ·ï¼Œè¯¥å‡½æ•°æ¥å—(dim, tag)å¯¹çš„å‘é‡ä½œä¸ºè¾“å…¥ï¼Œ# åŒæ—¶æ¥å—å˜æ¢å‘é‡ï¼Œå¹¶è¿”å›(dim, tag)å¯¹çš„å‘é‡ä½œä¸ºè¾“å‡ºov2 = gmsh.model.geo.extrude([ov[1]], 0, 0, 0.12)# ä¸å‡ ä½•ç‚¹ç›¸å…³çš„ç½‘æ ¼å°ºå¯¸å¯ä»¥é€šè¿‡ä¼ é€’å¯¹åº”ç‚¹çš„(dim, tag)å¯¹å‘é‡æ¥è®¾ç½®:gmsh.model.geo.mesh.setSize([(0, 103), (0, 105), (0, 109), (0, 102), (0, 28), (0, 24), (0, 6), (0, 5)], lc * 3)gmsh.model.geo.synchronize()# We group volumes 129 and 130 in a single physical group with tag `1' and name# &quot;The volume&quot;:gmsh.model.addPhysicalGroup(3, [129, 130], 1, &quot;The volume&quot;)# We finally generate and save the mesh:gmsh.model.mesh.generate(3)# è¯·æ³¨æ„ï¼Œå¦‚æœè½¬æ¢å·¥å…·å¯ä»¥æ–¹ä¾¿åœ°åˆ›å»ºå¤æ‚çš„å‡ ä½•å›¾å½¢ï¼Œ# å®ƒæœ‰æ—¶ä¹Ÿæœ‰åŠ©äºç”Ÿæˆâ€œå¹³é¢â€å‡ ä½•å›¾å½¢ï¼Œå…·æœ‰æ‰€æœ‰åŸºæœ¬å®ä½“çš„æ˜¾å¼è¡¨ç¤ºã€‚# ä½¿ç”¨å†…ç½®çš„CADå†…æ ¸ï¼Œè¿™å¯ä»¥é€šè¿‡å°†æ¨¡å‹ä¿å­˜åœ¨ â€œGmsh unrolling GEOâ€æ ¼å¼:# gmsh.write(&quot;t2.geo_unrolled&quot;);# With the OpenCASCADE CAD kernel, unrolling the geometry can be achieved by# exporting in the `OpenCASCADE BRep' format:# gmsh.write(&quot;t2.brep&quot;);# (OpenCASCADE geometries can also be exported as STEP files.)# å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒGmshä»æ¥æ²¡æœ‰å°†å‡ ä½•æ•°æ®è½¬æ¢ä¸ºé€šç”¨è¡¨ç¤º:å¯¹å‡ ä½•å®ä½“çš„æ‰€æœ‰æ“ä½œéƒ½æ˜¯é€šè¿‡ç›¸å…³çš„CADå†…æ ¸æœ¬åœ°æ‰§è¡Œçš„ã€‚# å› æ­¤ï¼Œæˆ‘ä»¬ä¸èƒ½å°†å†…ç½®å†…æ ¸æ„é€ çš„å‡ ä½•å›¾å½¢å¯¼å‡ºä¸ºOpenCASCADE BRepæ–‡ä»¶;# æˆ–å°†OpenCASCADEæ¨¡å‹å¯¼å‡ºä¸ºunroll GEOæ–‡ä»¶ã€‚# Launch the GUI to see the results:if '-nopopup' not in sys.argv: gmsh.fltk.run()gmsh.finalize()","link":"/2022/09/04/%E6%9C%89%E9%99%90%E5%85%83%E6%96%B9%E6%B3%95/Gmsh-%E6%95%99%E7%A8%8B/"},{"title":"APDL Learning 1","text":"hljs.initHighlightingOnLoad(); æœ¬è¯¾ç¨‹ä¸»è¦å‚è€ƒçš„æ˜¯æ•™ç¨‹çš„ä¸€ç³»åˆ—è§†é¢‘ï¼Œä¸»è¦çš„ä½œç”¨æ˜¯æ‰“åŸºç¡€çš„æ“ä½œï¼Œæ­¤è§†é¢‘é€šä¿—æ˜“æ‡‚ï¼Œä½†æ˜¯å°±æ˜¯æ¡ˆä¾‹æ¯”è¾ƒçš„å°‘ï¼Œå¦‚æœéœ€è¦æ·±åº¦çš„äº†è§£è¿˜è¦å‚è€ƒå…¶ä»–çš„è¯¾ç¨‹ã€‚ æ ‡é‡å‚æ•°å‚æ•°è¯´æ˜ä¸»è¦çš„å‚æ•°çš„åˆ†ç±»ï¼šæ ‡é‡å‚æ•°ã€æ•°ç»„å‚æ•°(åŒ…æ‹¬æ•°å€¼ã€å­—ç¬¦å’Œè¡¨æ•°ç»„)ã€‚ ä¸»è¦çš„ç”¨é€”ï¼š èµ‹å€¼ï¼› æ‰¹é‡æ•°æ®å¤„ç†(è¿ç®—/è¯»å†™)ï¼› ä¸å¿…å£°æ˜å‚æ•°çš„ç±»å‹ï¼Œè¿™ç‚¹å’ŒC++ä¸åŒï¼› ä½¿ç”¨ä¸ºå£°æ˜çš„å‚æ•°èµ‹â€æå°å€¼â€œ(çº¦ä¸º2E-100)ï¼› æ— è®ºæ˜¯æ•´å‹è¿˜æ˜¯å®å‹éƒ½æ˜¯æŒ‰ç…§åŒç²¾åº¦å‚¨å­˜ï¼› æ•°ç»„å‚æ•°å¿…é¡»å…ˆå®šä¹‰åä½¿ç”¨ã€‚ å‘½åè§„åˆ™ å‚æ•°åä¸è¶…è¿‡8ä¸ªå­—ç¬¦ï¼Œå¹¶ä»¥å­—æ¯å¼€å¤´ã€‚ å‚æ•°åä¸­åªèƒ½å‡ºç°å­—æ¯ï¼Œæ•°å­—å’Œä¸‹åˆ’çº¿ã€‚ é¿å…ä»¥ä¸‹åˆ’çº¿å¼€å¤´ï¼Œä»¥ä¸‹åˆ’çº¿å¼€å¤´/ç»“å°¾çš„å‚æ•°ä¸ºç³»ç»Ÿéšå«å‚æ•°ã€‚ å‚æ•°åä¸åˆ†å¤§å°å†™ï¼Œå¦‚â€œRADâ€å’Œâ€œRadâ€æ˜¯ä¸€æ ·çš„ã€‚æ‰€æœ‰çš„å‚æ•°éƒ½ä»¥å¤§å†™å½¢å¼å­˜å‚¨ã€‚ ä¸èƒ½ä½¿ç”¨å®ä¸“ç”¨å±€éƒ¨å‚æ•°å: ARG1~ARG9å’ŒAR10~AR99 ä¸èƒ½ä½¿ç”¨ç”±*ABBRå‘½ä»¤å®šä¹‰çš„ç¼©å†™ã€‚ é¿å…ä½¿ç”¨ANSYSæ ‡è¯†: DOFï¼šTEMP, UX,PRESç­‰ï¼› å¸¸ç”¨ï¼šALL, PICK,STATç­‰ï¼› ç”¨æˆ·å®šä¹‰ï¼šå¦‚ç”¨ETABLEå‘½ä»¤å®šä¹‰çš„ï¼› æ•°ç»„ç±»å‹ï¼šå¦‚CHARï¼ŒARRAYï¼ŒTABLEç­‰ã€‚ å®šä¹‰å‚æ•° å‘½ä»¤*SET å®šä¹‰ï¼› èµ‹å€¼å· â€œ=â€ å®šä¹‰ï¼› GUIèœå•å®šä¹‰ï¼šUtility Menu &gt; Parameters &gt; Scalar Parameters å¯åŠ¨æ—¶é©±åŠ¨å‘½ä»¤çš„å®šä¹‰ åˆ©ç”¨ *GET å‘½ä»¤æˆ–å‡½æ•°æå–ANSYSæ•°æ®åº“æ•°æ®èµ‹å€¼å®šä¹‰ ANSYS å­˜å‚¨çš„æ˜¯ä¸€ä¸ªå‚æ•°çš„å®é™…å€¼(æ•°å­—æˆ–å­—ç¬¦ä¸²)ï¼Œè€Œä¸æ˜¯å‚æ•°åã€‚ å…¶å®å¯ä»¥ç›´æ¥æ˜¯åœ¨GUIç•Œé¢é‡Œå®šä¹‰å‚æ•°ã€‚ Entityï¼Œè¿™ä¸ªå…³é”®å­—ä¸»è¦æ˜¯æŒ‡èŠ‚ç‚¹ã€å•å…ƒã€é¢ã€å®ä½“ç­‰ã€‚ item1ï¼Œä¸»è¦æ˜¯å¯¹è±¡çš„é¡¹ç›®åï¼Œå³ä½ç§»ã€åº”åŠ›ã€åº”å˜ã€‚ ä¸‹é¢å‘½ä»¤çš„ç¬¬ä¸€è¡Œå…¶å®å°±æ˜¯ï¼šå°†èŠ‚ç‚¹1çš„åæ ‡èµ‹å€¼ç»™$x_1$å˜é‡ã€‚ nsortå‘½ä»¤æ˜¯å°†åé¢çš„ç­‰æ•ˆåº”åŠ›sè¿›è¡Œåº”åŠ›æ’åºã€‚ ! åé¢çš„å†…å®¹æ˜¯é’ˆå¯¹è¯­å¥çš„è¯´æ˜ï¼Œå…¶å®å°±æ˜¯æ³¨é‡Šã€‚ å‚æ•°çš„åˆ é™¤å‚æ•°åˆ é™¤çš„ä¸»è¦çš„æ–¹æ³•æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯åœ¨èœå•é‡Œåˆ é™¤ï¼Œå¦ä¸€ä¸ªæ˜¯ç›´æ¥ä½¿ç”¨å‘½ä»¤çš„æ–¹æ³•æ¥è¿›è¡Œåˆ é™¤ï¼Œå‘½ä»¤çš„æ–¹å¼å°±æ˜¯ç›´æ¥å°†ä¸Šé¢çš„è¿›è¡Œèµ‹ç©ºæ“ä½œã€‚ æ³¨æ„ï¼š\\prepæ˜¯å‰å¤„ç†çš„å£°æ˜ç¬¦å·ï¼Œå³è¡¨è¾¾çš„æ˜¯å½“å‰çš„æ“ä½œæ˜¯å¤„äºå‰å¤„ç†çš„çš„å’Œè¿‡ç¨‹å†…ã€‚ blc4 ,,,w,hå…¶å®å°±æ˜¯ä»£è¡¨ç€å»ºç«‹ä¸€ä¸ªé•¿æ–¹å½¢çš„æ“ä½œã€‚ æœ€åå°±æ˜¯ï¼Œå¦‚æœw,hè¢«ä¿®æ”¹äº†ï¼Œä½†æ˜¯é•¿æ–¹å½¢çš„å½¢çŠ¶æ˜¯ä¸ä¼šè¢«ä¿®æ”¹çš„ã€‚ æ•°ç»„å‚æ•°æ¦‚è¿° æ ‡é‡å‚æ•°ï¼Œå®ƒåªæœ‰ä¸€ä¸ªå€¼â€”â€”æ•°å­—æˆ–è€…å­—ç¬¦ï¼› ANSYSä¹Ÿæä¾›æ•°ç»„å‚æ•°ï¼Œå®ƒæœ‰è‹¥å¹²ä¸ªå€¼ã€‚æ•°å­—æ•°ç»„å’Œå­—ç¬¦æ•°ç»„éƒ½æ˜¯æœ‰æ•ˆçš„ï¼› è¡Œåˆ—é¢ä¸‹æ ‡ä»1å¼€å§‹çš„è¿ç»­æ•´æ•°ï¼› æ•°ç»„å…ƒç´ ä¸ºæ•´å‹æˆ–å®å‹æ•°ï¼› è¿™é‡Œæ¯”è¾ƒç‰¹æ®Šçš„æ˜¯Tableæ•°æ®ï¼Œå…¶åŒ…å«ç¬¬0è¡Œå’Œç¬¬0åˆ—ï¼Œå¹¶ä¸”å¸¸ç”¨äºä¸€èˆ¬çš„æè¿°éšæ—¶é—´å˜æ¢çš„å˜é‡ï¼Œä¾‹å¦‚ä¸Šå›¾çš„é‡Œé¢åŠ›å­¦å‚æ•°å°±æ˜¯è¿™æ ·ï¼Œå¯¹äºæ²¡æœ‰çš„å‚æ•°ä¼šç›´æ¥è¿›è¡Œå‚æ•°çš„è‡ªåŠ¨æ’å€¼è¡¥å…¨çš„æ“ä½œã€‚ å®šä¹‰æ–¹æ³•é¦–å…ˆæ˜¯é€šè¿‡GUIæ¥è¿›è¡Œå®šä¹‰ï¼Œä¸»è¦å¯ä»¥ç¼–è¾‘çš„å‚æ•°æ˜¯æ•°ç»„çš„ç±»å‹å’Œæ•°ç»„çš„ç»´åº¦å‚æ•°ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚ å…¶ä¸­åœ¨Editç•Œé¢é‡Œè¿›è¡Œç¼–è¾‘ï¼Œåœ¨addç•Œé¢é‡Œè¿›è¡Œå®šä¹‰ã€‚ ä¸‹é¢ä¸»è¦æ˜¯ä½¿ç”¨å‘½ä»¤çš„æ–¹å¼æ¥è¿›è¡Œå®šä¹‰ï¼Œå…³é”®è¯æ˜¯*DIMä¹‹åçš„å‡ ä¸ªå‚æ•°ä¾æ¬¡æ˜¯ï¼š æ•°ç»„çš„åç§° æ•°ç»„çš„ç±»å‹ æ•°ç»„çš„ç»´åº¦ ä¸Šé¢çš„åšæ³•ä»…ä»…æ˜¯å°†æˆ‘ä»¬çš„å‚æ•°è¿›è¡Œå®šä¹‰ï¼Œä½†æ˜¯æ•°ç»„çš„èµ‹å€¼è¿˜éœ€è¦å…¶ä»–çš„å‘½ä»¤æ¥è¿›è¡Œè®¡ç®—ã€‚ èµ‹å€¼å®šä¹‰ å•ä¸ªæ•°ç»„çš„å…ƒç´ â€”â€”å’ŒScalarå˜é‡ç›¸åŒ å¤šä¸ªæ•°ç»„å…ƒç´ çš„èµ‹å€¼â€”â€”æŒ‰ç…§ä¸‹æ ‡ç´¢å¼•å·è¿›è¡Œèµ‹å€¼ A(1)=1,2,3,4 äº¤äº’å¼ç¼–è¾‘æ•°ç»„(*VEDIT) å¡«å……æ•°ç»„å˜é‡(*VFILL) ç”¨æ•°æ®æ–‡ä»¶èµ‹å€¼ARRAY (*VREADå‘½ä»¤) ç”¨æ•°æ®æ–‡ä»¶èµ‹å€¼TABLE (*TREADå‘½ä»¤) ä¸Šè¿°çš„ç´¢å¼•DTAB(1,1)çš„ç¬¬ä¸€ä¸ª1ä»£è¡¨æ˜¯æ•´è¡Œçš„æ„æ€ï¼Œç±»ä¼¼äºmatlabçš„1:endçš„ä½œç”¨ã€‚ DATAçš„æ„æ€æ˜¯æ•°æ®å¡«å……ï¼Œä¾æ¬¡å¡«å…¥ä¸‹é¢çš„å‡ ä¸ªæ•°ã€‚ RAMPçš„æ„æ€æ˜¯å¢é‡å¡«å……ï¼Œç¬¬ä¸€ä¸ªæ•°åˆå§‹å€¼ï¼Œç¬¬äºŒä¸ªæ˜¯å…¬å·®ã€‚ RANDçš„æ„æ€æ˜¯éšæœºæ•°å¡«å……ï¼Œåœ¨ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªä¹‹é—´çš„éšæœºæ•°æ¥å¡«å……ã€‚ ä¸Šé¢çš„ç¨‹åºéœ€è¦ä½¿ç”¨å‘½ä»¤æ•´ä½“è¯»å–çš„æ“ä½œæ¥è¿›è¡Œï¼› 3F6.1å¯èƒ½æ˜¯6ä½æµ®ç‚¹æ•°ï¼Œå¹¶ä¸”å°æ•°ç‚¹æœ‰ä¸€ç»´ã€‚ time``X-Cooä»£è¡¨çš„æ˜¯ç¬¬0åˆ—å’Œç¬¬0è¡Œï¼› å¯¹äºå­—ç¬¦æ•°ç»„æ˜¯æ— æ³•æ˜¯ä½¿ç”¨GUIç•Œé¢æ¥å®ç°èµ‹å€¼çš„ï¼Œå¿…é¡»é€šè¿‡å‘½ä»¤è¡Œèµ‹å€¼ç¬¦å·çš„çš„æ–¹æ³•ã€‚ å¯è§†åŒ– è¿™ä¸ªå‘½ä»¤çš„ä¸»è¦çš„ä½œç”¨æ˜¯ä½¿ç”¨åˆ—è¡¨çš„æ–¹å¼ï¼Œå°†æ‰€æœ‰çš„å‚æ•°éƒ½æ˜¾ç¤ºå‡ºæ¥ã€‚ é™¤äº†å­—ç¬¦å‹çš„æ•°æ®ï¼Œéƒ½æ˜¯å¯ä»¥ä½¿ç”¨ä¸€èˆ¬çš„è¿™ä¸ªå‘½ä»¤æ˜¾ç¤ºå‡ºæ¥ã€‚ å‚æ•°çš„å­˜å‚¨ SCALARä»£è¡¨å­˜å‚¨å†…å®¹æ˜¯æ ‡é‡ï¼Œscalaræ˜¯å­˜å‚¨æ–‡ä»¶åï¼Œsavæ˜¯åç¼€åã€‚ å‚æ•°çš„æ¢å¤ åˆ é™¤ARRAYå‚æ•° è·å–æ•°æ®åº“çš„æ“ä½œ æ•°ç»„çš„æ“ä½œ *VFUNçš„åŠŸèƒ½å’Œå‡½æ•°è®¡ç®—æ˜¯ç›¸ä¼¼çš„ï¼Œå°±æ˜¯å¯¹å½“å‰çš„æ•°ç»„è¿›è¡Œå‡½æ•°æ“ä½œã€‚ ä¸»è¦çš„ä½œç”¨å°±æ˜¯å¯¹æ•´ä¸ªæ•°åˆ—è¿›è¡Œæ‰«æï¼Œä¸»è¦çš„ä½œç”¨æ˜¯æ±‚è§£æ•°åˆ—çš„æœ€å¤§å’Œæœ€å°å€¼çš„ç­‰ç»Ÿè®¡é—®é¢˜ã€‚ ä¸‹é¢æ˜¯ä¸»è¦çš„æ•°å­¦è®¡ç®—çš„è¿ç®—å‘½ä»¤ã€‚ å®çš„ä½¿ç”¨APDL (ANSYSå‚æ•°è®¾è®¡è¯­è¨€ï¼‰æœ€å¼ºæœ‰åŠ›çš„ç‰¹å¾ä¹‹ä¸€æ˜¯åˆ›å»ºå®çš„èƒ½åŠ›ã€‚ å®å°±æ˜¯ä¸€ç³»åˆ—è´®å­˜åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­çš„ANSYSå‘½ä»¤ï¼Œå¹¶ä¸”èƒ½è±¡ä¸€ä¸ªANSYSå‘½ä»¤ä¸€æ ·æ¥è¿è¡Œã€‚å¸¸ç”¨å®åŠŸèƒ½ï¼š å®ƒå¯ä»¥å¦‚åŒANSYSå‘½ä»¤ä¸€æ ·å…·æœ‰å˜é‡ã€‚Â·åˆ†æ”¯å’Œå¾ªç¯ç”¨æ¥æ§åˆ¶ä¸€ç³»åˆ—å‘½ä»¤ã€‚ äº¤äº’å¼ç‰¹å¾å¦‚å›¾å½¢æ‹¾å–ï¼Œæç¤ºï¼Œä»¥åŠå¯¹è¯æ¡†ã€‚ å®å¯ä»¥åµŒå¥—ä¸€ä¸€ä¸ªå®å¼•ç”¨ç¬¬äºŒä¸ªå®ï¼Œç¬¬äºŒä¸ªå®å¼•ç”¨ç¬¬ä¸‰ä¸ªå®ï¼Œç­‰ç­‰ï¼Œä¸€ç›´å¯åµŒå¥—20çº§ã€‚ ç”¨äºåˆ›å»ºç”¨æˆ·å‘½ä»¤ è°ƒç”¨å¯¹è±¡:ANSYSå‘½ä»¤ã€GUIå‡½æ•°æˆ–å°†å€¼ä¼ ç»™å®å‚æ•° æ–‡ä»¶åå’Œæ‰©å±•åè§„åˆ™ æ–‡ä»¶åä¸èƒ½è¶…è¿‡32ä¸ªå­—ç¬¦ã€‚ æ–‡ä»¶åä¸èƒ½ä»¥æ•°å­—å¼€å¤´ æ‰©å±•åä¸èƒ½è¶…è¿‡8ä¸ªå­—ç¬¦ æ‰©å±•ååº”ä¸º.macçš„å®ç­‰åŒäºANSYSå‘½ä»¤ ä¸èƒ½ä½¿ç”¨æ‰©å±•å.MAC(ç”¨äºANSYSå†…éƒ¨å®) æ–‡ä»¶åæˆ–æ–‡ä»¶æ‰©å±•åä¸­ä¸èƒ½åŒ…å«ç©ºæ ¼ ä¸èƒ½åŒ…å«å½“å‰æ–‡ä»¶ç³»ç»Ÿç¦æ­¢ä½¿ç”¨çš„å­—ç¬¦ å®çš„åˆ›å»º å’Œä¹‹å‰ä¸åŒçš„æ˜¯è¿™é‡ŒæŒ‡å®šäº†arg1çš„ç±»å‹ã€‚ å®çš„è¿è¡Œå’Œä¸»è¦å‘½ä»¤ æµç¨‹æ§åˆ¶ Do-loopå¾ªç¯æ§åˆ¶ æ¡ä»¶åˆ†æ”¯ æ— æ¡ä»¶åˆ†æ”¯ å®åµŒå¥— é‡å¤æ‰§è¡Œå‘½ä»¤ *EXITçš„ä½œç”¨æ˜¯ç›´æ¥å°†å¾ªç¯åœæ­¢ï¼› *CYCLEçš„ä½œç”¨æ˜¯ç»§ç»­å¾ªç¯æ“ä½œï¼›","link":"/2022/09/30/%E6%9C%89%E9%99%90%E5%85%83%E6%96%B9%E6%B3%95/APDL-learning-1/"},{"title":"APDL Learning 2","text":"hljs.initHighlightingOnLoad(); æœ¬æ•™ç¨‹å‚è€ƒçš„æ˜¯æ°´å“¥Ansysçš„æ•™ç¨‹ï¼Œæœ¬æ•™ç¨‹è®²çš„ååˆ†çš„è¯¦ç»†ï¼Œå»ºè®®å­¦ä¹ ã€‚ æœ¬èŠ‚ä¸»è¦è®²è§£çš„æ˜¯å˜é‡çš„å‘½ååŸåˆ™å’Œè¿ç®—ã€æµç¨‹æ§åˆ¶ç±»å‘½ä»¤ã€GETå‘½ä»¤è¯¦è§£ã€APDLå‡½æ•°å‘½ä»¤ã€‚ æ¦‚è¿° $ç›¸å½“äºæ˜¯ä¸€ä¸ªå›è½¦çš„ä½œç”¨ï¼Œè¿™æ ·å¤„ç†ä¸»è¦æ˜¯ä¸ºäº†å‡å°‘ä»£ç çš„ç¨‹åº¦ã€‚ !ä¸»è¦æ˜¯å¤„ç†æ³¨é‡Šä¿¡æ¯çš„ã€‚ å˜é‡å‘½ååŸåˆ™åŠè¿ç®— å‚æ•°ç±»å‹åˆ†ç±»ï¼šå˜é‡ã€æ•°ç»„ å˜é‡ç±»å‹:æ•°å€¼å‹å’Œå­—ç¬¦å‹ å‚æ•°èµ‹å€¼å¯ä¸äº‹å…ˆæŒ‡å®šå‚æ•°ç±»å‹ï¼Œç›´æ¥èµ‹å€¼ ä¸‹é¢æ˜¯å¯¹äºçš„å‚æ•°åŒ–çš„å‘½ä»¤æµï¼Œè¿™æ ·æ–¹ä¾¿ä¿®æ”¹æ¨¡å‹çš„å‚æ•°ã€‚ å˜é‡çš„å‘½ååŸåˆ™ å‚æ•°å¿…é¡»ä»¥å­—æ¯å¼€å¤´ï¼Œé•¿åº¦ä¸èƒ½è¶…è¿‡32å­—ç¬¦ å‚æ•°ååªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿ï¼Œä¸èƒ½å‡ºç°å…¶ä»–ç¬¦å·ï¼Œå¦‚@ã€# è¿™é‡Œçš„#åœ¨APDLé‡Œçš„æ„æ€æ˜¯ä¹˜æ³•çš„å«ä¹‰ã€‚ ä¸‹åˆ’çº¿ä¸èƒ½ä½œä¸ºåå­—çš„å¼€å¤´æˆ–è€…ç»“å°¾ é¿å¼€å®æ–‡ä»¶å‚æ•°ä¸“ç”¨åï¼šARG1~ARG9ã€ AR10ï½AR99 è¿™é‡Œé¢æ˜¯å®æ–‡ä»¶çš„ä¸“ç”¨åã€‚ ç¦ç”¨ANSYSå‡½æ•°å‘½ä»¤å¸¦æœ‰çš„æ ‡è¯†ç¬¦å·ï¼Œå¦‚ETã€Kdistç­‰ APDLé‡Œé¢çš„å‡½æ•°åº“çš„å†…å®¹ä¸è¦é‡åã€‚ å‚æ•°ååº”å°½å¯èƒ½å…·æœ‰å¯è¯»æ€§ï¼Œæ…ç”¨å¸¸ç”¨äºå¾ªç¯æ ‡è¯†ç¬¦å· å˜é‡çš„èµ‹å€¼ã€æŸ¥è¯¢å’Œåˆ é™¤ æ°´å“¥çš„å»ºè®®æ˜¯ï¼Œå¯¹äºæ¯”è¾ƒçš„å¤æ‚çš„ç¨‹åºï¼Œå½“æˆ‘ä»¬ä½¿ç”¨å®Œç›¸å…³çš„å˜é‡ä¹‹åçš„æ˜¯éœ€è¦å°†æ²¡ç”¨çš„å˜é‡è¿›è¡Œåˆ é™¤æ“ä½œï¼Œè¿™æ ·é˜²æ­¢ç¨‹åºåœ¨åé¢äº§ç”Ÿæ­§ä¹‰ã€‚ é’ˆå¯¹å˜é‡çš„æŸ¥è¯¢çš„é—®é¢˜ï¼Œè¿™é‡Œä¸»è¦æ˜¯ç”¨æ¥æŸ¥çœ‹å˜é‡æ˜¯å¦å¯¼å…¥æˆåŠŸï¼Œæœ‰æ—¶å˜é‡å¹¶æ²¡æœ‰å¯¼å…¥æˆåŠŸï¼Œä½†æ˜¯æˆ‘ä»¬è¿™è¾¹ä¹Ÿä¸çŸ¥é“ã€‚å…¶ä½œç”¨ç±»ä¼¼print() å˜é‡è¿ç®— å˜é‡è¿ç®—ï¼šåŸºæœ¬è¿ç®—ã€æ•°å­¦å‡½æ•°ï¼› åŸºæœ¬è¿ç®—ï¼šåŠ ã€å‡ã€ä¹˜ã€é™¤ã€‚ =ï¼šæ˜¯èµ‹å€¼æ“ä½œï¼›==ï¼šæ˜¯ç­‰äºæ“ä½œã€‚ æ¡ˆä¾‹ æ•°å€¼å‹å’Œå­—ç¬¦å‹å˜é‡çš„åŠ¨æ€æ›¿æ¢ï¼š_%_%ï¼› ä½œç”¨ï¼šç›¸åŒçš„å‰ç¼€å­—ç¬¦å±€éƒ¨ä»¥æ•°å­—è¡¨è¾¾å˜é‡ï¼› åœ¨å˜é‡çš„å‘½åæ—¶ï¼Œä¸€å®šè¦æœ‰ä¸€å®šçš„è§„å¾‹å¯å¾ªï¼Œæ–¹ä¾¿é˜…è¯»ã€‚ ä¸Šè¿°è¿ç®—ç¬¦ä¸»è¦ç”¨äºï¼š å»ºæ¨¡å·¥ä½œé‡å¤§ï¼› å¤–éƒ¨è¾“å…¥å‚æ•°å¤šï¼› éœ€è¦çµæ´»ä½¿ç”¨å¾ªç¯å‘½ä»¤çš„ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465! ==========================! æ ‡å‡†çš„é¢„å¤„ç†æ¨¡æ¿! ==========================finish! ç»“æŸä¸Šä¸€ä¸ªä»»åŠ¡/filname,wangjia! ä¿å­˜çš„æœ¬ä»»åŠ¡çš„åç§°/prep7! å¼€å§‹å‰å¤„ç†ä»»åŠ¡! ===========================! å•å…ƒææ–™å‚æ•°çš„å®šä¹‰! et,1,beam188! ===========================!ä¸Šæ—‹èŠ‚ç‚¹å»ºæ¨¡csys,1!åŠå¾„r1=2500$r2=5629$r3=8755$r4=11878r5=14996$r6=18108$r7=21212$r8=24308r9=27394$r10=30496$r11=3351$r12=36580r13=39614$r14=41406!é«˜åº¦h1=0$h2=-82$h3=-227$h4=-46$h5=-707$h6=-1041$h7=-1438h8=-1897$h9=-2419$h10=-3003$h11=-3649$h12=-4357$h13=-5126$h14=-5611! ç¬¬ä¸€åœˆn,1,r1,10,h1! å®šä¹‰ç¬¬ä¸€ä¸ªèŠ‚ç‚¹,åŠå¾„æ˜¯r1,è§’åº¦æ˜¯10Â°,é«˜åº¦æ˜¯h1! åˆ›å»ºå¾ªç¯æ¥åˆ›å»ºçš„å‰©ä½™çš„èŠ‚ç‚¹*DO, i, 1, 8n, i+1, r1, 10+40*i, h1*ENDDO! åœ¨å»ºç«‹ç¬¬äºŒåœˆæ—¶éœ€è¦è·å¾—ç¬¬ä¸€åœˆæœ€å¤§çš„ç¼–å·*get, node1, node, 0, num, maxd! å–å‡ºæœ€å¤§çš„èŠ‚ç‚¹ç¼–å·ï¼Œå¹¶èµ‹å€¼ç»™node1! ç¬¬äºŒåœˆn, node1+1, r2, 10, h2*do, i, 2, 18n, node1+i, r2, 10+20*(i-1), h3*enddo*get,node2, node, 0, num, maxd! ç¬¬ä¸‰åœˆn, node2+1, r3, 10, h3*do, i, 2, 18n, node2+i, r3, 10+20*(i-1), h3*enddo*get,node3, node, 0, num, maxd! ç¬¬å››åˆ°å…­åœˆï¼Œå› ä¸ºå…¶æ€§è´¨æ—¶ç›¸åŒçš„ï¼Œäºæ˜¯å°†å…¶å†™åœ¨ä¸€èµ·*do, j, 4, 6k=j-1n, node%k%+1, r%j%, 10, h%j%*do, i, 2, 36n, node%k%+i, r%j%, 10+(i-1)*10, h%j%*enddo*get, node%j%, node, 0, num, maxd*enddo ä¸Šè¿°å¾—åˆ°çš„æ•ˆæœï¼š å˜é‡è¿ç®—ä¿®æ”¹å¯åŠ¨æ–‡ä»¶ è¦ç‚¹æ¢³ç†ï¼š é»˜è®¤çš„è§’åº¦çš„æ˜¯å¼§åº¦åˆ¶çš„ï¼Œé€šè¿‡å‘½ä»¤çš„æ¥è¿›è¡Œè½¬æ¢ï¼Œå¦‚æœæƒ³è¦çš„æ¯æ¬¡æ‰“å¼€éƒ½æ˜¯è§’åº¦å€¼çš„è¯ï¼Œå¯ä»¥åœ¨å¯åŠ¨æ–‡ä»¶æ¥è¿›è¡Œä¿®æ”¹ã€‚ å…¶æ¬¡çš„å°±æ˜¯åœ¨å¯åŠ¨æ–‡ä»¶é‡Œé¢çš„æ·»åŠ é¢„å®šä¹‰çš„å˜é‡æˆ–è€…ä¿®æ”¹è§’åº¦å€¼çš„é—®é¢˜ï¼Œå…¶å®ä¸Šè¿°çš„é—®é¢˜åŸºæœ¬çš„æ€è·¯æ˜¯ä¸€æ ·çš„ã€‚ æµç¨‹æ§åˆ¶ç±»å‘½ä»¤ æµç¨‹æ§åˆ¶ï¼šå†³å®šå‘½ä»¤è¿è¡Œçš„æ¬¡æ•°ã€é¡ºåºï¼› ä½œç”¨ï¼šå¼ºåŒ–é€»è¾‘ï¼Œå¢åŠ å¯è¯»æ€§ï¼Œå‡å°‘å†—ä½™åº¦ï¼› ç±»åˆ«ï¼š *GO æ— æ¡ä»¶åˆ†æ”¯ï¼› *IF-*IFelse-*Else-*Endifæ¡ä»¶åˆ¤æ–­åˆ†æ”¯ï¼› *DO-*Enddo å¾ªç¯ *Dowhile å¾ªç¯ *Repeat é‡å¤å‘½ä»¤ *IFæµç¨‹æ§åˆ¶åŸºæœ¬æ¦‚å¿µ æ ¹æ®åˆ¤æ–­æ¡ä»¶æ¥ç¡®å®šåç»­å‘½ä»¤æ‰§è¡Œçš„æƒ…å†µï¼› ä½œç”¨ï¼šå¼ºåŒ–é€»è¾‘ï¼Œå¢åŠ å¯è¯»æ€§ï¼Œå‡å°‘å†—ä½™åº¦ï¼› Valeç›¸å½“äºä¸€ä¸ªBoolè¡¨è¾¾å¼ï¼Œå…¶å¯ä»¥æ˜¯å€¼ä¹Ÿå¯ä»¥æ˜¯è¡¨è¾¾å¼ã€‚ ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨å•æ¬¡åˆ¤å®šï¼Œå°±ä½¿ç”¨å•æ¬¡åˆ¤å®šï¼Œè¿™æ ·çš„è¯é€»è¾‘æ¸…æ¥šï¼Œå…³ç³»ç®€ç­”ã€‚ ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå‰é¢çš„å…­ä¸ªä½¿ç”¨è¾ƒå¤šï¼ŒåŸºæœ¬å¯ä»¥è§£å†³æ‰€æœ‰çš„é—®é¢˜ã€‚ åœ¨åµŒå¥—çš„æ—¶å€™ï¼Œè¦æœ‰æ„è¯†çš„è¿›è¡Œç¼©è¿›æ“ä½œã€‚ æœ€å¥½ä¸è¦åµŒå¥—å¤ªå¤šï¼Œè¿™æ ·çš„è¯å¯è¯»æ€§å¤ªå·®ã€‚ æ¡ˆä¾‹è¿™é‡Œä¸»è¦çš„å®Œæˆçš„ä»»åŠ¡æ˜¯ç»™å‡ºå¯¹åº”çš„æ··å‡åœŸçš„ç­‰çº§ï¼Œå¾—å‡ºå¯¹åº”çš„å¼¹æ€§æ¨¡é‡å‚æ•°ã€‚ å…·ä½“çš„åˆ›å»ºä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839Finsish/clear/prep7 ! è¿›å…¥å‰å¤„ç†ç•Œé¢D=4 ! å¼¹ç°§çš„ç›´å¾„C=8 ! å¼¹ç°§çš„æ—‹ç»•æ¯”N=10 ! å¼¹ç°§çš„åœˆæ•°dz=C*D ! å¼¹ç°§çš„ä¸­å¾„t=dz/2.5 ! å¼¹ç°§èŠ‚è·(èºè·)*if,t,lt,D,thent=d !èŠ‚è·çš„æœ€å°å€¼ä¸ºç°§ä¸ç›´å¾„ï¼Œæ‹‰ä¼¸å¼¹ç°§çš„t=D*endif! ============================! 2.åˆ›å»ºä¸€åœˆèºæ—‹çº¿csys,1 ! è®¾ç½®å½“å‰åæ ‡ç³»ä¸ºä¸»åæ ‡ç³»k,1,dz/2,0,-t/2 k,2,dz/2,180 ! åˆ›å»ºä¸¤ä¸ªå…³é”®ç‚¹l,1,2 ! åˆ›å»ºåŠåœˆèºæ—‹çº¿csys,0 ! è®¾ç½®ç›´è§’åæ ‡ç³»lsymm,z,1lsymm,y,2,,,,,1 ! åˆ©ç”¨å¯¹ç§°æ€§ç”Ÿæˆå¦ä¸€å¤–åŠåœˆçš„èºæ—‹çº¿nummrg,all,cm,l1,line ! åˆå¹¶å…³é”®ç‚¹å¹¶å°†å¦å¤–ä¸¤æ¡çº¿å®šä¹‰ä¸ºç»„ä»¶! ============================! 3.èºæ—‹çº¿ç«¯éƒ¨åˆ›å»ºç°§ä¸ç•Œé¢kwpave,1wprota, ,90 ! ç§»åŠ¨å·¥ä½œå¹³é¢ï¼Œå¹¶å¯¹å…¶è¿›è¡Œæ—‹è½¬cyl4,,,d/2 ! åˆ›å»ºç›´æ¥ä¸ºDçš„åœ†é¢! ============================! 4.æ²¿ç€L1è·¯å¾„åˆ›å»ºä½“ã€å¤åˆ¶ä½“ç­‰vdrag,1,,,,,,l1 ! æ‹–æ‹‰åˆ›å»ºä½“vgen,n,all,,,,,t ! å¤åˆ¶ä½“Næ¬¡nummrg,kp ! åˆå¹¶å…³é”®ç‚¹wpcsys ! å·¥ä½œå¹³é¢å½’ä½ *Do æ§åˆ¶å‘½ä»¤åŸºæœ¬æ¦‚å¿µè¿™é‡ŒDoå¾ªç¯çš„ä½œç”¨å’Œå…¶ä»–è¯­è¨€é‡Œé¢çš„forå¾ˆç›¸ä¼¼ã€‚ å«ä¹‰ï¼šé€šè¿‡æŒ‡å®šçš„æ¬¡æ•°æ¥å¾ªç¯æ“ä½œæ‰§è¡Œå‘½ä»¤ï¼› åŠŸèƒ½ï¼šå‡å°ç¼–ç¨‹ç¯‡å¹…ã€èŠ‚çº¦å»ºæ¨¡æ—¶é—´ã€å¢åŠ å¯è¯»æ€§ã€‚ VINCç›¸å½“äºå¾ªç¯å˜é‡ä¹‹é—´çš„é—´éš”ï¼›å½“å…¶ä¸ºæ­£æ—¶ï¼Œä¸ºé¡ºåºéå†ï¼Œå½“å…¶ä¸ºè´Ÿæ—¶ï¼Œä¸ºé€†åºéå†ã€‚ Abing_1ä¸ºä¸­é—´çš„å¾ªç¯è¯­å¥ï¼› å½“é‡å¤çš„æ¬¡æ•°è¶…è¿‡ä¸‰æ¬¡æ—¶ï¼Œåº”è¯¥è€ƒè™‘å¾ªç¯æ“ä½œã€‚ å¾ªç¯çš„æ¬¡æ•°å¤ªå¤šï¼Œå°±ä¼šé€ æˆä»£ç çš„å¯è¯»æ€§å˜å·®ã€‚ æ¡ˆä¾‹ æœ€åçš„æ•ˆæœå¦‚å›¾æ‰€ç¤ºï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990*AFUN,DEG! å°†å…¨å±€çš„æ¢æˆè§’åº¦åˆ¶Finish/clear/prep7f=40/7 ! å®šä¹‰çŸ¢é«˜8mSpan=40 ! å®šä¹‰è·¨åº¦Kn=8 ! å®šä¹‰æ²¿ç¯çš„åˆ†å‰²çš„åˆ†æ•°Kn=8Nx=6 ! å®šä¹‰ç¯æ†çš„åœˆæ•°Nx=6! ======================================! 2.è®¡ç®—èŠ‚ç‚¹çš„åæ ‡çš„ä½ç½®ï¼Œå¹¶å®šä¹‰èŠ‚ç‚¹csys,2 ! è½¬æ¢ä¸ºçƒé¢åæ ‡ç³»R=(Span*Span/4+f*f)/(2*f) ! æ ¹æ®çŸ¢é«˜å’Œè·¨åº¦æ¥è®¡ç®—æ›²é¢çš„åŠå¾„RDPha=Atn(Span/2/Sqrt(R*R-Span*Span/4))/Nx! è®¡ç®—ç›¸é‚»ä¸¤ç¯ä¹‹é—´å¯¹åº”çš„å¤¹è§’DphaN,1,R,0,90 ! å®šä¹‰é¡¶ç‚¹1å·èŠ‚ç‚¹ï¼Œåæ ‡ä¸º(R,0,90)*DO,i,1,Nx ! å¯¹ç§°åŒºçš„èŠ‚ç‚¹å¾ªç¯ï¼Œç¬¬iåœˆå¯åˆ†ä¸ºKn*iä»½ *DO,j,1,Kn*i x=R ! è¾“å…¥x,y,z y=(j-1)*360/(Kn*i) z=90-i*DPha N,1+Kn*(i-1)*i/2+j,x,y,z ! è¾“å…¥æ¯ä¸ªç‚¹çš„ç¼–å· *ENDDO*ENDDO! ======================================Numnode=1+Kn*(Nx-1)/2+Kn*Nx ! å®šä¹‰æœ€å¤§çš„èŠ‚ç‚¹! 3.å®šä¹‰å•å…ƒçš„ç±»å‹å’Œå‚æ•°ET,1,BEAM188 ! å®šä¹‰å¼¹æ€§æ¨¡é‡EXMP,EX,1,2.06e11 ! å®šä¹‰ææ–™çš„æ³Šæ¾æ¯”MP,DENS,1,7850 ! å®šä¹‰ææ–™çš„å¯†åº¦å‚æ•°SECTYPE,1,BEAM,CTUBE !ï¼å®šä¹‰ç¬¬ä¸€ç±»å•å…ƒæˆªé¢ä¸ºåœ†ç®¡æˆªé¢SECOFFSET,CENTSECDATA, 0.147/2,0.152/2,8 ! æˆªé¢ä¸º152*5çš„åœ†ç®¡çš„æˆªé¢å¤–å¾„152ï¼Œå†…å¾„147! è¿™é‡Œçš„1ä»£è¡¨çš„æ˜¯ç¬¬ä¸€ç±»ææ–™! ======================================! 4.å®šä¹‰å•å…ƒçš„è¿æ¥TYPE,1 ! è®¾ç½®å•å…ƒçš„ç±»å‹å·ä¸º 1MAT,1 ! è®¾ç½®ææ–™çš„å±æ€§å·ä¸º 1SECNUM,1 ! è®¾ç½®æˆªé¢å·ä¸º 1! ç¯å‘æ†è¿æ¥*DO,i,1,Nx ! ç¬¬1~Nxåœˆçš„èŠ‚ç‚¹å¾ªç¯ *DO,j,1,Kn*i-1 ! ç¬¬1~Kn*i-1å¯¹ç§°åŒºçš„èŠ‚ç‚¹å¾ªç¯ E,1+Kn*(i-1)*i/2+j, 1+Kn*(i-1)*i/2+j+1 ! è¿æ¥ç›¸é‚»èŠ‚ç‚¹ *ENDDO E,1+Kn*(i-1)*i/2+Kn*i,1+Kn*(i-1)*i/2+1*ENDDO! å¾„å‘çš„å•å…ƒè¿æ¥*DO,i,1,Kn ! å¯¹å„ä¸ªå¯¹ç§°åŒºè¿›è¡Œå¾ªç¯ E,1,1+i*ENDDO*DO,i,1,Nx-1 ! ä»å†…åœˆé‡Œé¢çš„ç¬¬äºŒåœˆå¼€å§‹å¾ªç¯*DO,j,1,Kn ! å¯¹å„ä¸ªå¾ªç¯åŒºå¼€å§‹å¾ªç¯ *DO,k,1,i+1 ! å¯¹å¾ªç¯åŒºå†…çš„æ†å¼€å§‹å¾ªç¯ *IF,k,EQ,i+1,THEN ! åˆ¤æ–­æ˜¯å¦æ˜¯å½“å‰å¯¹ç§°åŒºå†…æœ€åä¸€æ ¹æ† *IF,j,EQ,Kn,THEN ! åˆ¤æ–­æ˜¯å¦æ˜¯æœ€åä¸€ä¸ªå¯¹ç§°åŒº E,1+Kn*(i-1)*i/2+1,1+Kn*(i+1)*i/2+(j-1)*(i+1)+k ! å°†ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å’Œæœ€åä¸€ä¸ªèŠ‚ç‚¹è¿æ† *ELSE E,1+Kn*(i-1)*i/2+(j-1)*i+k,1+Kn*(i+1)*i/2+(j-1)*(i+1)+k ! ä¸€èˆ¬åŒºå†…æœ€åä¸€æ ¹è¿æ† *ENDIF *ELSE E,1+Kn*(i-1)*i/2+(j-1)*i+k,1+Kn*(i+1)*i/2+(j-1)*(i+1)+k ! ä¸€èˆ¬æ­£å‘è¿æ† *ENDIF*ENDDO *DO,k,1,i E,1+Kn*(i-1)*i/2+(j-1)*i+k,1+Kn*(i+1)*i/2+(j-1)*(i+1)+k+1 ! ä¸€èˆ¬è´Ÿå‘è¿æ†*ENDDO*ENDDO*ENDDO!(5)å®šä¹‰è¾¹ç•Œçº¦æŸ*DO,i,1,1+kn*(Nx-1)*Nx/2+Kn*Nx *IF,i,GT,1+kn*(Nx-1)*Nx/2,then D,i,all,0*ENDIF*ENDDO *GETå‘½ä»¤è¯¦è§£åŸºæœ¬æ¦‚å¿µå…¶å®*GETå‘½ä»¤æ˜¯ä¸€ç§åŠŸèƒ½å‘½ä»¤ï¼Œä¹Ÿæ˜¯å‡½æ•°å‘½ä»¤çš„ä¸€ç§ã€‚ ä¸»è¦åŠŸèƒ½æ˜¯æŸ¥è¯¢è·å–å‘½ä»¤ã€å¹¶ä¸”å¹¿æ³›ç”¨äºå‰å¤„ç†å’Œåå¤„ç†ï¼› å‚æ•°åŒ–ç¼–ç¨‹ä¸­ï¼Œå¦‚ä½•è·å–å½“å‰æ¨¡å‹ä¸­æœ€å¤§çš„å…³é”®ç‚¹ç¼–ç ï¼Ÿ 123! å¼€å§‹æ–°çš„å…³é”®ç‚¹çš„å»ºç«‹*Get,Kn_max,kp,0,num,maxdK,Kn_max+1,x1,y1,z1 ä¸Šé¢çš„å‘½ä»¤ä¸»è¦è¿›è¡Œçš„æ˜¯å°†ä¸Šé¢æ¨¡å‹ä¸­æœ€å¤§å…³é”®ç‚¹çš„ç¼–å·è®°å½•åœ¨ä¸Šè¿°çš„Kn_maxã€‚ ä¸Šè¿°æ˜¯å‰å¤„ç†è¿‡ç¨‹å¸¸ç”¨çš„æ–¹æ³•ã€‚ è¿™è¾¹éœ€è¦å­¦ä¼šæŸ¥çœ‹å¸®åŠ©æ–‡æ¡£ï¼Œä¸‹é¢æ˜¯ä¸¤ä¸ªå¸¸è§çš„ä»»åŠ¡ï¼Œä½¿ç”¨å¯¹åº”Getå‘½ä»¤æ¥å®ç°ï¼š ç›®æ ‡1ï¼šè·å–å½“å‰é€‰æ‹©ä»»åŠ¡é›†ä¸­å…³é”®ç‚¹çš„æœ€å¤§ç¼–å·ï¼› 1*Get,Par,kp,0,num,max è¿™ä¸ªåœ¨Helpé‡Œé¢æ‰¾åˆ°å‰å¤„ç†çš„éƒ¨åˆ†æŸ¥è¯¢ã€‚ ç›®æ ‡2ï¼šè·å–å·²çŸ¥èŠ‚ç‚¹num_nodeåœ¨xæ–¹å‘ä¸Šçš„ä½ç§»ï¼› 1*Get,Par,node,num_node,u,x è¿™ä¸ªåœ¨Helpçš„åå¤„ç†éƒ¨åˆ†å¯ä»¥æ‰¾åˆ° æ¡ˆä¾‹æœ¬æ¡ˆä¾‹ä¸»è¦æ˜¯è·å–æ¨¡æ€åˆ†æä¹‹åçš„é˜»å°¼å€¼ã€‚ è¿™é‡Œä¸»è¦æ˜¯æ¶‰åŠåˆ°æ’åºç›¸å…³çš„å†…å®¹ï¼Œåœ¨getçš„æ—¶å€™éœ€è¦è¿›è¡Œsortæ“ä½œã€‚ APDLå‡½æ•°å‘½ä»¤åŸºæœ¬æ¦‚è¿° ä¸€ä¸ªå®Œæ•´çš„åˆ†æä¸»è¦åŒ…å«å‰å¤„ç†ã€æ±‚è§£ã€åå¤„ç†ä¸‰éƒ¨åˆ†ã€‚ å‰å¤„ç†ï¼šåŒ…å«æœ‰é™å…ƒçš„ææ–™çš„å®šä¹‰ã€å‡ ä½•æ¨¡å‹çš„ç»˜åˆ¶ã€‚ æ±‚è§£ï¼šåŒ…å«æ±‚è§£ç±»å‹çš„è®¾ç½®ã€æ±‚è§£å™¨çš„è®¾ç½®ã€åˆ†æå’Œè¾“å‡ºçš„è®¾ç½®ã€‚ åå¤„ç†ï¼šåˆ†ä¸ºä¸¤ç§ï¼Œé€šç”¨åå¤„ç†ã€èŠ‚ç‚¹æ•´ä¸ªæ—¶é—´å†ç¨‹çš„åå¤„ç†è¿‡ç¨‹ã€‚å…¶ä¸­é€šç”¨åå¤„ç†ä¸»è¦åŒ…æ¢æ˜¯é™æ€èŠ‚ç‚¹çš„ä½ç§»å’Œå˜å½¢é—®é¢˜ã€‚åŠ¨æ€çš„åå¤„ç†é¡¾åæ€ä¹‰æ˜¯æµ‹é‡å…¶åœ¨æ•´ä¸ªå†ç¨‹çš„å˜åŒ–çš„åŸºæœ¬çš„è¿‡ç¨‹ã€‚ \\prep7æ˜¯å‰å¤„ç†çš„å…³é”®è¯ï¼› \\soluæ˜¯æ±‚è§£é˜¶æ®µçš„å…³é”®è¯ï¼› \\post1æ˜¯é€šç”¨åå¤„ç†å…³é”®è¯ï¼Œ\\post26æ˜¯æ—¶é—´å†ç¨‹å¤„ç†çš„å…³é”®è¯ã€‚ å‰å¤„ç†ä»¥ä¸‹æ˜¯æ°´å“¥å½’ç±»çš„å…­å¤§ç±»å‰å¤„ç†çš„è¿‡ç¨‹ï¼Œä¸»è¦æ˜¯åŒ…å«ææ–™ã€å•å…ƒã€åæ ‡ç³»ã€æ¨¡å‹å»ºç«‹ã€ç½‘æ ¼åˆ’åˆ†ã€è½½è·å’Œçº¦æŸã€‚ å¦‚æœæˆ‘ä»¬æ˜¯å¯¼å…¥çš„æ¨¡å‹æ¥è¿›è¡Œå»ºæ¨¡ï¼Œé‚£ä¹ˆåæ ‡ç³»è¿™è¾¹å°±æ²¡æœ‰ä¹‹å‰é‚£ä¹ˆé‡è¦äº†ï¼Œä½†æ˜¯å¦‚æœåœ¨APDLé‡Œé¢è¿›è¡Œå»ºæ¨¡ï¼Œé‚£å°±æ¯”è¾ƒé‡è¦ï¼Œå› ä¸ºåœ¨å»ºæ¨¡çš„æ—¶å€™ä¼šæ¶‰åŠåˆ°æ¬§å¼åæ ‡è½¬çƒåæ ‡æˆ–æŸ±åæ ‡çš„é—®é¢˜ã€‚ åœ¨å»ºæ¨¡çš„éƒ¨åˆ†ä¸»è¦åˆ†æˆäº†ä¸‹é¢çš„ä¸ƒä¸ªéƒ¨åˆ†ï¼Œæœ¬ç« ä¸»è¦ä¾§é‡çš„æ˜¯å¸ƒå°”è¿ç®—å’Œå…ƒç´ é€‰æ‹©ï¼Œå…ƒç´ é€‰æ‹©çš„å‘½ä»¤å¾ˆé‡è¦ã€‚ ææ–™å®šä¹‰ å•å…ƒå®šä¹‰ åæ ‡ç³»çš„å®šä¹‰ å»ºç«‹æ¨¡å‹è¿™é‡Œçš„å†…å®¹æ¯”è¾ƒçš„å¤šï¼Œä½†æ˜¯å…¶æ˜¯æœ‰è§„å¾‹å¯å¾ªçš„ï¼Œè¿™é‡Œä»¥BOOLè¿ç®—ä¸ºä¾‹æ¥ä»‹ç»ã€‚ L:ç›´çº¿ï¼›K:å…³é”®ç‚¹ï¼›A:é¢ï¼›V:ä½“ã€‚ gen:å¤åˆ¶å‘½ä»¤ç»„ï¼Œ\\SB:å‡æ³•æ—ï¼Œ*glue:ç²˜è´´æ—ï¼Œ*overlap:åˆ‡å‰²æ—ï¼Œ*dele:åˆ é™¤æ—ã€‚ *SEL:é€‰æ‹©æ—ï¼Œéå¸¸çš„é‡è¦ã€‚ Locæ˜¯æ ¹æ®ç»™å‡ºçš„åæ ‡æ¥è¿›è¡Œé€‰æ‹©ã€‚ ä¸Šè¿°çš„æ“ä½œï¼Œä¸»è¦æ˜¯å°†ä¹‹å‰å·¦å³çš„è¾¹ç•Œåˆ å»ã€‚ å…ˆé€‰å¯¹åº”çš„ç›´çº¿ï¼Œä¹‹åé€‰æ‹©ä¾é™„äºç›´çº¿çš„æ‰€æœ‰çš„èŠ‚ç‚¹ï¼› NSLLä¸­Nä»£è¡¨çš„æ˜¯èŠ‚ç‚¹ï¼ŒLä»£è¡¨çš„æ˜¯å¯¹åº”çš„ç›´çº¿ï¼Œäºæ˜¯ä¸Šè¿°çš„åŸºæœ¬çš„é—®é¢˜å°±æ˜¯å°†é€‰æ‹©ä¾é™„äºç›´çº¿çš„èŠ‚ç‚¹ã€‚ å…¶ä»–è¾…åŠ©å‘½ä»¤ ALLSELå‘½ä»¤ï¼šä¸€èˆ¬é€‚ç”¨äºç”¨æˆ·å¯¹æ¨¡å‹è¿›è¡Œé€‰æ‹©æ“ä½œåï¼Œå¦‚æœéœ€è¦æ¢å¤åˆ°é»˜è®¤çŠ¶æ€ï¼Œé‡‡ç”¨è¯¥å‘½ä»¤ï¼Œç‰¹åˆ«æ˜¯æ±‚è§£å‰ï¼Œåº”é‡‡ç”¨ Allselï¼Œ all å¯¹æ¨¡å‹è¿›è¡Œé€‰æ‹©å¤ä½ï¼Œä¸ç„¶å¾ˆå®¹æ˜“æ±‚è§£å¤±è´¥ã€‚ *Plot æ—å‘½ä»¤ï¼šè¯¥ç±»å‘½ä»¤ä¸»è¦æ˜¯é’ˆå¯¹å½“æˆ‘ä»¬é‡‡ç”¨é€‰æ‹©æ—å‘½ä»¤å¯¹æ¨¡å‹è¿›è¡Œé€‰æ‹©åï¼Œæˆ‘ä»¬éœ€è¦å¯¹é€‰æ‹©çš„å…ƒç´ è¿›è¡Œå•ç‹¬æ˜¾ç¤ºï¼Œä»¥æ–¹ä¾¿æˆ‘ä»¬è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œï¼Œä¾‹ï¼š 12Asel,s,loc,x,10,100 !é€‰æ‹© x æ–¹å‘åæ ‡ä¸º 10 åˆ° 100 çš„é¢Aplot !å•ç‹¬æ˜¾ç¤ºè¿™äº›é¢ å‹ç¼©å’Œé‡æ–°ç¼–å·ï¼šæ‰€è°“å‹ç¼©ï¼Œä¹Ÿå³æ˜¯å½“ä¸¤ä¸ªèŠ‚ç‚¹å®Œå…¨é‡åˆï¼ˆåæ ‡ç›¸åŒï¼‰æ—¶ï¼Œå¯ä»¥é‡‡ç”¨è¿™ä¸ªå‘½ä»¤åˆå¹¶ä¸ºä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¿™ç§æƒ…å†µæ—¶å¸¸å‘ç”Ÿåœ¨è¿›è¡Œå¤åˆ¶æ“ä½œè¿‡ç¨‹å½“ä¸­ã€‚ 123Nummrg, node !åˆå¹¶åŒä½ç½®çš„èŠ‚ç‚¹Nummrg, kp !åˆå¹¶åŒä½ç½®çš„å…³é”®ç‚¹Nummrg, all !å°½é‡ä¸è¦ä½¿ç”¨è¿™ä¸ªå‘½ä»¤ é‡æ–°ç¼–å·åŠŸèƒ½ä¸»è¦ä½¿ç”¨äºèŠ‚ç‚¹åˆå¹¶ä¹‹åï¼Œä¸€èˆ¬å’Œ Nummrg å‘½ä»¤æ­é…ä½¿ç”¨ï¼Œå¸¸è§æ ¼å¼å¦‚ä¸‹ï¼š 1Numcmp,all Cmå‘½ä»¤ï¼šåœ¨å¾ˆå¤šæƒ…å†µä¸‹éœ€è¦æ­é…å‰é¢ä»‹ç»çš„é€‰æ‹©æ—å‘½ä»¤ï¼Œé€šè¿‡é€‰å®šç‰¹å®šçš„å…ƒç´ ï¼Œé‡‡ç”¨Cm å‘½ä»¤å‘½åï¼Œç»„å»ºä¸€ä¸ªæ–°çš„é›†åˆã€‚ æ±‚è§£ç½‘æ ¼åˆ’åˆ† ç½‘æ ¼åˆ’åˆ†çš„ä¸»è¦çš„æ­¥éª¤ï¼šå±æ€§åˆ’åˆ†ã€å¤§å°æ§åˆ¶ã€åˆ’åˆ†ç½‘æ ¼ã€ç½‘æ ¼æ¸…é™¤(ä¸ºäº†é˜²æ­¢ç½‘æ ¼åˆ’åˆ†çš„æ•ˆæœä¸å¥½ï¼Œä½†æ˜¯åˆæ— æ³•è¿›è¡Œæ’¤é”€çš„é—®é¢˜ï¼Œåªèƒ½ç›´æ¥åˆ é™¤ã€‚) è½½è·å’Œçº¦æŸ åœ¨ç‚¹å’Œé¢ä¸Šé€šè¿‡å¾ªç¯çš„æ–¹æ³•æ¥è¿›è¡Œçš„æ–½åŠ è·è½½ã€‚ å…³äºå‡å¸ƒè·è½½çš„æ–½åŠ  å‡å¸ƒè·è½½æ˜¯å¸¸è§çš„è·è½½ç±»å‹ï¼Œå…¶æ–½åŠ æ–¹å¼ä¸€èˆ¬é‡‡ç”¨ Sfa æˆ–è€… Sfeï¼Œè¿™é‡Œå”¯ä¸€éœ€è¦çš„æ˜¯ä¾¿æ˜¯è·è½½çš„æ–¹å‘é—®é¢˜ã€‚ å¦‚æœé‡‡ç”¨ Sfa å‘½ä»¤ï¼Œåˆ™æ–¹å‘ä¸é¢çš„æ³•å‘ç›¸å…³ï¼Œé»˜è®¤è·è½½æ–¹å‘ä¸æ³•å‘ç›¸åï¼Œè€Œå¦‚æœé‡‡ç”¨ Sfe å‘½ä»¤ï¼Œåˆ™æ–¹å‘ä¸å•å…ƒåºå·ç›¸å…³ï¼Œå…·ä½“éœ€æŸ¥è¯¢å•å…ƒè§£é‡Šï¼Œä¾‹å¦‚ï¼Œ c++181çš„å•å…ƒè¯´æ˜å¦‚ä¸‹å›¾ã€‚ å…³äº Sfcum å‘½ä»¤ è¯¥å‘½ä»¤ç›´æ¥ä¸»è¦æ§åˆ¶è·è½½åŠ è½½æ–¹å¼ï¼Œä¸€èˆ¬è½¯ä»¶é»˜è®¤é’ˆå¯¹åŒä¸€å…ƒç´ æ–½åŠ çš„åŒä¸€ç§ç±»å‹è·è½½ï¼Œåè€…æ–½åŠ ä¼šè¦†ç›–å‰è€…æ–½åŠ ï¼Œå¦‚æœæœ‰çš„æ—¶å€™æˆ‘ä»¬éœ€è¦è¿›è¡Œå åŠ ï¼Œå°±å¯ä»¥ä½¿ç”¨è¯¥å‘½ä»¤ã€‚ å…³äºé‡åŠ›åŠ é€Ÿåº¦ANSYS ä¸­é‡åŠ›åŠ é€Ÿåº¦çš„æ–½åŠ é‡‡ç”¨ Acel å‘½ä»¤ï¼Œ ä½¿ç”¨è¯¥å‘½ä»¤éœ€è¦æ³¨æ„ä¸‰ä¸ªæ–¹é¢ï¼š å•ä½çš„ç¡®å®šã€‚ å½“é‡‡ç”¨ N-mm å•ä½åˆ¶æ—¶ï¼Œé‡åŠ›åŠ é€Ÿåº¦åº”ä¸º 9800ï¼Œå½“é‡‡ç”¨ N-m å•ä½åˆ¶æ—¶ï¼Œé‡åŠ›åŠ é€Ÿåº¦åº”ä¸º 9.8ã€‚ æ–¹å‘çš„ç¡®å®šã€‚åœ¨ ANSYS ç»å…¸ç¯å¢ƒä¸‹ï¼Œä¸€ä¸ªæ¯”è¾ƒç‰¹æ®Šçš„æ˜¯é‡åŠ›åŠ é€Ÿåº¦çš„æ–¹å‘ä¸å®é™…æ–¹å‘æ˜¯ç›¸åçš„ï¼Œä¾‹å¦‚æˆ‘ä»¬å®é™…é‡åŠ›åŠ é€Ÿåº¦ä¸º-Z æ–¹å‘ï¼Œä½†æ˜¯æˆ‘ä»¬æ–½åŠ çš„æ—¶å€™åŠ é€Ÿåº¦å€¼åˆ™é‡‡ç”¨æ­£å€¼ï¼Œ è¿™ä¸»è¦ä¸åŠ¨åŠ›æ–¹ç¨‹çš„å»ºç«‹æœ‰å…³ï¼Œå¯æŸ¥çœ‹ç›¸å…³ä¸“è‘—ã€‚ 1Acel,,,9800 !é‡åŠ›åŠ é€Ÿåº¦æ–½åŠ  é‡åŠ›åŠ é€Ÿåº¦çš„åˆ é™¤ã€‚å½“å‰é¢ä¸€ä¸ªè·è½½æ­¥è€ƒè™‘é‡åŠ›è·è½½å·¥å†µåï¼Œå¦‚æœä¸‹ä¸€æ­¥è®¡ç®—æˆ‘ä»¬ä¸éœ€è¦è€ƒè™‘é‡åŠ›ï¼Œè¿™æ—¶å€™éœ€è¦å¯¹é‡åŠ›åŠ é€Ÿåº¦è¿›è¡Œå¤ä½ï¼Œ APDL å¹¶æ— ç›´æ¥åˆ é™¤çš„ç›¸å…³å‘½ä»¤ï¼Œå¯é€šè¿‡æŒ‡å®šé‡åŠ›åŠ é€Ÿåº¦ä¸º 0 æ¥ç­‰æ•ˆã€‚ å…³äºè·è½½ä¸çº¦æŸçš„åˆ é™¤ åˆ é™¤å‘½ä»¤ä½¿ç”¨æ ¼å¼ï¼š *deleï¼Œå¯ç®€ç§°ä¸º dele æ—ï¼Œä½¿ç”¨å•å…ƒã€èŠ‚ç‚¹ã€å…³é”®ç‚¹ã€çº¿å’Œé¢ã€‚ æ±‚è§£å™¨çš„è®¾è®¡ Static æˆ–è€… 0ï¼Œä»£è¡¨é™åŠ›åˆ†æï¼› Buckle æˆ–è€… 1ï¼Œä»£è¡¨å±ˆæ›²åˆ†æï¼› Modal æˆ–è€… 2ï¼Œä»£è¡¨æ¨¡æ€åˆ†æï¼› Harmic æˆ–è€… 3ï¼Œä»£è¡¨è°å“åº”åˆ†æï¼› Trans æˆ–è€… 4ï¼Œä»£è¡¨ç¬æ€åˆ†æï¼› Substr æˆ–è€… 5ï¼Œä»£è¡¨å­ç»“æ„åˆ†æï¼› Spectr æˆ–è€… 6ï¼Œä»£è¡¨è°±åˆ†æã€‚ ä¸‹é¢æ—¶æ¯”è¾ƒé‡è¦çš„å‘½ä»¤ã€‚ Neqitä¸»è¦é’ˆå¯¹çš„æ˜¯éçº¿æ€§é—®é¢˜çš„æ±‚è§£ï¼Œæ¥è®¾ç½®æœ€å°çš„è¿­ä»£é•¿åº¦ã€‚ Solveæ±‚è§£å½“å‰çš„é—®é¢˜ã€‚ ä¸Šè¿°å‘½ä»¤é‡Œé¢å¥½å¤šäº‹é’ˆå¯¹éçº¿æ€§çš„ï¼Œäºæ˜¯3â€»éƒ½æ˜¯æœ€å¥½è¦è®°ä½çš„ã€‚ åå¤„ç†èŠ‚ç‚¹ç»“æœå’Œå•å…ƒç»“æœ èŠ‚ç‚¹è§£ï¼šèŠ‚ç‚¹çš„ä½ç§»è§£ï¼Œé€šè¿‡{K}{X}={F}å¾—åˆ°çš„ï¼Œæœ€ä¸ºåŸå§‹çš„è§£ï¼› å•å…ƒè§£ï¼šå•å…ƒçš„åº”åŠ›åº”å˜ï¼Œæ˜¯èŠ‚ç‚¹è§£æ´¾ç”Ÿå¾—åˆ°çš„æ´¾ç”Ÿè§£ï¼Œæ˜¯ä¸è¿ç»­çš„ã€‚ èŠ‚ç‚¹å•å…ƒè§£ï¼šèŠ‚ç‚¹çš„åº”åŠ›åº”å˜ï¼Œæ´¾ç”Ÿè§£çš„å¹³å‡åŒ–æ˜¾ç¤ºã€‚ åå¤„ç†å‘½ä»¤ä¾æ®å¤„ç†å•å…ƒå¯¹è±¡è€Œåˆ’åˆ† æ¢å•å…ƒï¼šå•å…ƒè¡¨(Etableï¼ŒEsortï¼ŒPlls)ï¼› å£³å•å…ƒï¼šä½ç§»ã€åº”åŠ›ã€å£³å•å…ƒå†…åŠ›ï¼› å®ä½“å•å…ƒï¼šé¢æ“ä½œ(é«˜çº§)ã€‚ SETï¼Œç›¸å½“äºæ˜¯æŒ‡é’ˆè·å–è¯»å–ç»“æœæ•°æ®ï¼› å¯¹äº5çš„è¦å°½å¯èƒ½è®°ä½ï¼Œ3\\ä»¥ä¸‹æŒ‡å¯¼æœ‰å°±å¥½ã€‚ é€šç”¨çš„åå¤„ç† æœ‰é™å…ƒåå¤„ç†çš„æ“ä½œæ¯”å¦‚å°†æ¨¡å‹è®¾ç½®æˆä¸ºä¸€ä¸ªæ•´ä½“çš„ç»“åˆï¼Œè¿™äº›æ“ä½œä¸»è¦æ˜¯éœ€è¦ç»éªŒç§¯ç´¯æ¥å­¦ä¹ æ€»ç»“ã€‚ æ¡ˆä¾‹æ¶²å‹æœºä¸»ç‰ŒåŠçš„è®¡ç®—é—®é¢˜ æ¨¡å‹å»ºç«‹(äº†è§£)ç¬¬ä¸€ç§ç½‘æ ¼åˆ’åˆ†çš„æ–¹æ³• 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100! ============================! å®šäºä¸»è¦çš„å•å…ƒç±»å‹et,1,solid186et,2,surf154! ============================! å®šä¹‰ä½¿ç”¨åˆ°çš„ææ–™å±æ€§mp,ex,1,2.1e11! å®šä¹‰æ¨æ°æ¨¡é‡mp,prxy,1,0.2! ============================! ç›¸å…³çš„å‡ ä½•å‚æ•°! APDLçš„å•ä½åˆ¶ä¸ºmr1=2.25r2=4.5H=17D=3.4Pres=400e6div1=6div2=40arc_div1=20! ============================! å¼€å§‹å»ºæ¨¡æ“ä½œ! å†…åœˆçš„å››ä¸ªèŠ‚ç‚¹k,1,-r2,0.5*Hk,2,-r1,0.5*Hk,3,r1,0.5*Hk,4,r2,0.5*Hk,5,0,0.5*H+r1k,6,0,0.5*H+r2! å¯¹å…³é”®ç‚¹è¿›è¡Œè¿çº¿æ“ä½œl,1,2l,3,4larc,2,3,5,r1 !å»ºç«‹åœ†å¼§larc,1,4,6,r2al,1,3,2,4 !ç”±çº¿ç”Ÿæˆé¢! åŸºäºå‡ ä½•å‚æ•°å®šä¹‰ä¸‹æ‹±æ¢çš„6ä¸ªå…³é”®ç‚¹k,7,-1*r2,-0.5*hk,8,-1*r1,-0.5*hk,9,r1,-0.5*hk,10,r2,-0.5*hk,11,0,-1*(r2+0.5*h)k,12,0,-1*(r1+0.5*h)l,7,8l,9,10larc,7,10,11,r2larc,8,9,12,r1al,5,6,7,8blc4,-1*r2,-0.5*h,r1,hblc4,r1,-0.5*h,r1,haglue,all ! å°†æ‰€æœ‰çš„é¢ä¹‹é—´è¿›è¡Œçº¿æ€§ç²˜è¿æ“ä½œ! è¿›è¡Œæ‹‰ä¼¸æ•´ä½“çš„æ“ä½œ*get,kp_num,kp,0,num,maxdk,kp_num+1,-r2,0.5*H,Dl,1,kp_num+1! è¿”å›ä¸Šä¸€æ­¥æ“ä½œå¯¹åº”çš„ç¼–å·ll1=_returnallsel,all! é€‰æ‹©å…¨éƒ¨çš„å…ƒç´ è¿›è¡Œæ‹‰ä¼¸æ“ä½œVDRAG,all,,,,,,ll1! ============================! ä¸‹é¢å¼€å§‹è¿›è¡Œç½‘æ ¼åˆ’åˆ†lsel,s,loc,y,0.5*h! é€‰æ‹©yæ˜¯-0.5*hçš„çº¿lsel,a,loc,y,-0.5*h! é€‰æ‹©yæ˜¯-0.5*hçš„çº¿lsel,r,loc,z,0! æ§åˆ¶æ˜¯é€‰æ‹©z=0çš„çº¿lesize,all,,,div1! å°†ä¸Šè¿°é€‰æ‹©å¥½çš„çº¿å˜æˆ6ç­‰åˆ†lsel,s,loc,x,-r1lsel,a,loc,x,-r2lsel,a,loc,x,r1lsel,a,loc,x,r2lsel,r,loc,z,0! é€‰æ‹©z=0ä¸Šå¯¹åº”çš„xå‘ç°ä¸Šçš„çŸ­çº¿lesize,all,,,div2! å°†ä¸Šè¿°çš„çŸ­çº¿åˆ’åˆ†ä¸º40ä»½! é€‰æ‹©åˆ’åˆ†å¥½çš„å¼§çº¿lsel,s,loc,y,0.5*h+0.1,0.5*h+r2lsel,a,loc,y,0.5*h-0.1,-0.5*h-r2lsel,r,loc,z,0lesize,all,,,arc_div1esize,d/10allsel,all! æ‰«æ åˆ’åˆ†vsweep,all ç¬¬äºŒç§å»ºæ¨¡çš„æ–¹æ³• 123456789101112131415161718192021222324252627282930313233! ç¬¬äºŒä¸­å»ºæ¨¡çš„æ–¹æ³•wpoffs,,0.5*h! é¦–å…ˆï¼Œè®¾å®šå·¥ä½œå¹³é¢cyl4,,,r1,0,r2,180,d! ç»˜åˆ¶åœ†æŸ±é¢wpoffs,r1! ä¿®æ”¹å·¥ä½œå¹³é¢blc4,,,r2-r1,-0.5*h,d! ç»˜åˆ¶åœ†æŸ±ä½“wpcsys,-1! å·¥ä½œé¢å½’ä½vsel,s,loc,y,0,0.5*hvgen,2,all,,,-r2-r1! é€‰æ‹©é•¿æ–¹ä½“ï¼Œä¹‹åå°†å…¶å¤åˆ¶allsel,allvsymm,y,all! å¯¹ç§°æ“ä½œï¼Œyè½´ä¸ºå¯¹ç§°è½´vglue,all! å°†ä¸¤éƒ¨åˆ†åˆåœ¨ä¸€èµ·! é€‰æ‹©å¹¶ä¸”åˆ’åˆ†ç½‘æ ¼lsel,s,loc,x,r1lsel,a,loc,x,r2lsel,a,loc,x,-r1lsel,a,loc,x,-r2lsel,r,loc,z,0lesize,all,,,div2*0.5allsel,allesize,h/div2/4vsweep,all åŠ è½½å’Œæ±‚è§£æ¨¡å—","link":"/2022/10/19/%E6%9C%89%E9%99%90%E5%85%83%E6%96%B9%E6%B3%95/APDL-learning-2/"},{"title":"APDL Learning 3","text":"hljs.initHighlightingOnLoad(); æœ¬æ•™ç¨‹å‚è€ƒçš„æ˜¯æ°´å“¥Ansysçš„æ•™ç¨‹ï¼Œæœ¬æ•™ç¨‹è®²çš„ååˆ†çš„è¯¦ç»†ï¼Œå»ºè®®å­¦ä¹ ã€‚ æœ¬èŠ‚ä¸»è¦è®²è§£çš„æ˜¯å˜é‡çš„åŠŸèƒ½å•å…ƒæ¨¡å—ã€æ•°ç»„ä¸å˜é‡ã€æ–‡ä»¶çš„è¯»å…¥ä¸å†™å‡ºå’Œå®æ–‡ä»¶ã€‚ åŠŸèƒ½å•å…ƒæ¨¡å—åŸºæœ¬ç†è®º ä¸Šè¿°çš„å‡½æ•°å‘½ä»¤æ˜¯æ¯”è¾ƒé‡è¦çš„ï¼Œæœ€å¥½ç›´æ¥è®°ä½ã€‚ å…¶ä¸­æ¯”è¾ƒé‡è¦çš„å‘½ä»¤æœ‰ï¼š n=nnear(n1)è¿”å›æ˜¯è·ç¦»èŠ‚ç‚¹n1æœ€è¿‘çš„èŠ‚ç‚¹ç¼–å·ã€‚ n=node(x,y,z)è¿”å›çš„æ˜¯(x,y,z)å¯¹åº”èŠ‚ç‚¹çš„ç¼–å·ï¼Œè·å–èŠ‚ç‚¹çš„ç¼–å·ä¹‹åï¼Œå¯ä»¥é€šè¿‡GETå‘½ä»¤æ¥è·å–çš„ç›¸åº”çš„ä½ç§»ã€‚ å®ä¾‹ï¼šå·²å»ºç«‹Node1,Node2ï¼Œç°åœ¨éœ€è¦æ–°å»ºä¸€ä¸ªåæ ‡ä¸ºNode1å’ŒNode2å¹³å‡å€¼å¾—èŠ‚ç‚¹Node3. åˆå§‹å¾—æ–¹æ³•ï¼š 1234567891011*Get,x1,node,num,node1,loc,x !è·å–èŠ‚ç‚¹Node1xæ–¹å‘åæ ‡å€¼*Get,y1,node,num,node1,loc,y !è·å–èŠ‚ç‚¹Node1 Yæ–¹å‘åæ ‡å€¼*Get,z1,node,num,node1,loc,z !è·å–èŠ‚ç‚¹Node1Zæ–¹å‘åæ ‡å€¼*Get,x2,node,num,node2,loc,x !è·å–èŠ‚ç‚¹Node2xæ–¹å‘åæ ‡å€¼*Get,y2,node,num,node2,loc,y !è·å–èŠ‚ç‚¹Node2 Yæ–¹å‘åæ ‡å€¼*Get,z2,node,num,node2,loc,z !è·å–èŠ‚ç‚¹Node2zæ–¹å‘åæ ‡å€¼xx=(x1+x2)/2 !æ–°å»ºèŠ‚ç‚¹xæ–¹å‘åæ ‡yy=(y1+y2)/2 !æ–°å»ºèŠ‚ç‚¹Yæ–¹å‘åæ ‡zz=(z1+z2)/2 !æ–°å»ºèŠ‚ç‚¹zæ–¹å‘åæ ‡n,node3,xx,yy,zz !æ–°å»ºèŠ‚ç‚¹Node3 ç®€åŒ–ä¹‹åå¾—æ–¹æ³•ï¼š 1234Xx=(nx(nodel)+nx(node2))/2Yy=(ny(nodel)+ny(node2))/2Zz=(nz(node1)+nz(node2))/2n,node3,xx,yy,zz !æ–°å»ºèŠ‚ç‚¹Node3 æ ¹æ®ä¸Šè¿°çš„å‘½ä»¤å¯å¾—ï¼ŒNX()å‘½ä»¤å¯ä»¥çœ‹ä½œæ˜¯*GET,par,node,0,loc,xã€‚ _Returnæ˜¯ä¸€ç§ç‰¹æ®Šçš„åŠŸèƒ½å‘½ä»¤ï¼Œè¿”å›å‡½æ•°ä½œç”¨å€¼ï¼Œå¹¶å­˜äºæŒ‡å®šçš„å˜é‡ä¸­ã€‚ ä¸‹é¢æ˜¯å¸¸è§çš„æ˜äº®çš„è¿”å›å€¼ï¼š æ¡ˆä¾‹ï¼Œçº¿åŠ¨æˆé¢ï¼Œå‚æ•°åŒ–å»ºæ¨¡ã€‚ 123456789L,101,568Q1=_Return !è¿”å›ç”Ÿæˆçº¿çš„ç¼–å·ï¼Œå¹¶èµ‹å€¼ç»™å˜é‡Q1L,587,125Q2=_Return !è¿”å›ç”Ÿæˆçº¿çš„ç¼–å·ï¼Œå¹¶èµ‹å€¼ç»™å˜é‡Q2L,124,586Q3=_Return !è¿”å›ç”Ÿæˆçº¿çš„ç¼–å·ï¼Œå¹¶èµ‹å€¼ç»™å˜é‡Q3L,101,568Q4=_Return !è¿”å›ç”Ÿæˆçº¿çš„ç¼–å·ï¼Œå¹¶èµ‹å€¼ç»™å˜é‡Q4ALï¼ŒQ1ï¼ŒQ2ï¼ŒQ3ï¼ŒQ4 !ç”Ÿæˆé¢ æ¡ˆä¾‹åˆ†æç­æ¿åœ°åŸºå¼¹ç°§çš„å»ºæ¨¡ è¿™ä¸ªä¾‹å­æ¯”è¾ƒç®€å•ï¼Œå®é™…å·¥ç¨‹ä¸Šçš„ç½‘æ ¼ä¸å¯èƒ½æ˜¯è¿™ä¹ˆå‡åŒ€ã€‚ ä½†æ˜¯åœ¨åˆ’åˆ†å•å…ƒçš„æ—¶å€™ï¼Œå¯èƒ½ä¼šå‡ºç°ä¸åŒç±»å‹çš„èŠ‚ç‚¹ï¼Œä¸‰è§’å½¢çš„èŠ‚ç‚¹æˆ–æ˜¯å››è¾¹å½¢çš„èŠ‚ç‚¹å•å…ƒã€‚å¦‚æœä¸ºä¸‰è§’å½¢çš„å•å…ƒï¼Œé‚£ä¹ˆå…¶è·å–å¾—åˆ°çš„ç¬¬å››ä¸ªèŠ‚ç‚¹çš„å€¼å’Œç¬¬ä¸‰ä¸ªæ˜¯ç›¸åŒçš„ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100finish/clear/prep7! è®¾è®¡å•å…ƒet,1,shell181et,3,combin39keyopt,3,4,0keyopt,3,3,3keyopt,3,1,0keyopt,3,2,1! å®šä¹‰ææ–™mp,ex,1,3,25e4 ! C40å¼¹æ€§æ¨¡é‡mp,dens,1,2600e-12 ! å¯†åº¦mp,prxy,1,0.2ESF=200 ! å¼¹æ€§åœ°åŸºçš„åˆšåº¦blc4,,,80000,100000esize,2000amesh,allallsel,all!=============================*get,tmmax,node,,num,max ! æ•´ä¸ªæ¨¡å‹çš„æœ€å¤§çš„èŠ‚ç‚¹å·esel,s,type,,1 ! é€‰æ‹©c++çš„å•å…ƒnsle,s,corner ! é€‰æ‹©å…¨éƒ¨çš„äº¤ç‚¹å•å…ƒ! ä¸‹é¢å°±æ˜¯æ±‚è§£æ¯ä¸ªå•å…ƒä¸Šçš„å¼¹ç°§çš„åˆšåº¦*get,ntol,node,,count ! èŠ‚ç‚¹æ€»æ•°*get,etol,elem,,count ! å•å…ƒæ€»æ•°*get,nmax,node,,num,max ! æœ€å¤§èŠ‚ç‚¹å·! dimå¥½åƒæ˜¯æ•°ç»„çš„å®šä¹‰! ä¸Šé¢getè·å–çš„æ˜¯æ•°ç»„çš„ç»´åº¦*dim,nodno,,ntol ! å­˜å‚¨èŠ‚ç‚¹å•å…ƒ*dim,nodk,,nmax ! å­˜å‚¨å„èŠ‚ç‚¹é¢ç§¯ã€å¼¹ç°§å•å…ƒ8*dim,eleno,,etol ! å­˜å‚¨å•å…ƒå·! è·å–å„ä¸ªå•å…ƒå·*get,e1,elem,,num,mineleno(1)=e1*do,i,2,etole1=elnext(n1) ! è·å–å½“å‰èŠ‚ç‚¹ä¸‹ä¸€ä¸ªå•å…ƒçš„ç¼–å·eleno(i)=e1*enddo! è·å–å„ä¸ªèŠ‚ç‚¹å·*get,n1,node,,num,minnodno(1)=n1*do,i,2,ntoln1=ndnext(n1) ! è·å–å½“å‰èŠ‚ç‚¹ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„ç¼–å·nodno(i)=n1*enddo! è·å–æ¯ä¸ªèŠ‚ç‚¹çš„å¯¹åº”çš„é¢ç§¯*do,i,1,etolei=eleno(i)n1=nelem(ei,1) ! è·å–eiå•å…ƒçš„ç¬¬1ä¸ªèŠ‚ç‚¹n2=nelem(ei,2) ! è·å–eiå•å…ƒçš„ç¬¬2ä¸ªèŠ‚ç‚¹n3=nelem(ei,3) ! è·å–eiå•å…ƒçš„ç¬¬3ä¸ªèŠ‚ç‚¹n4=nelem(ei,4) ! è·å–eiå•å…ƒçš„ç¬¬4ä¸ªèŠ‚ç‚¹*get,ai,elem,ei,area*if,n3,ne,n4,thenai=ai/4.0! å¦‚æœ3å’Œ4èŠ‚ç‚¹å€¼ä¸åŒï¼Œé‚£å°±æ˜¯å››è¾¹å½¢nodk(n1)=nodk(n1)+ainodk(n2)=nodk(n2)+ainodk(n3)=nodk(n3)+ainodk(n4)=nodk(n4)+ai*elseai=ai/3.0nodk(n1)=nodk(n1)+ainodk(n2)=nodk(n2)+ainodk(n3)=nodk(n3)+ai*endif*enddo! æ±‚å¾—å•å…ƒå¾—åˆšåº¦*do,i,1,nmaxnodk(i)=nodk(i)*ESF*enddo*do,i,1,ntolni=nodno(i)r,i+1,0.01,nodk(ni)*0.01*enddo! åˆ›å»ºå¼¹ç°§å•å…ƒtype,3*do,i,1,ntolni=nodno(i)n,tmmax+i,nx(ni),ny(ni),nz(ni)-2000 ! åˆ›å»ºèŠ‚ç‚¹å•å…ƒ(é‡åˆ)! å‘ä¸‹åç§»2000ï¼Œå¢å¼ºå®¢è§‚æ€§real,i+1! æ³¨æ„æ­¤å¤„ç”Ÿæˆå¼¹ç°§å•å…ƒèŠ‚ç‚¹çš„é¡ºåºï¼Œæ”¹å˜äº†é¡ºåºä¹Ÿå³e,ni,tmmax+i*enddonsel,s,,,tmmax+1,tmmax+ntolallsel,alleplot æ•°ç»„å’Œå˜é‡åŸºæœ¬æ¦‚å¿µ å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œå¯ä»¥å­˜å‚¨å¤šä¸ªæ•°æ®ã€‚ æ•°ç»„åˆ†ç±»ï¼š ä¸€ç»´æ•°ç»„ï¼šä¸€è¡Œæ•°æ®æˆ–è€…ä¸€åˆ—æ•°æ®ï¼Œå¯ä»¥è¿›è¡ŒçŸ¢é‡è¿ç®—ï¼› äºŒç»´æ•°ç»„ï¼šè¡Œå’Œåˆ—çš„ç»„æˆï¼Œæœ‰Mè¡Œå’ŒNåˆ—ï¼Œæ¯è¡Œå…ƒç´ æ˜¯é€šè¿‡$(i,j)$ ä½ç½®åæ ‡è¿›è¡Œç´¢å¼•çš„ã€‚ æ•°ç»„å’Œå˜é‡æ˜¯å¯ä»¥äº’ç›¸è½¬æ¢çš„ã€‚ ä¸‰ç»´æ•°ç»„ï¼šè¡Œã€åˆ—ã€é¢ç»„æˆï¼ŒäºŒç»´ç©ºé—´è¿‡æ¸¡åˆ°ä¸‰ç»´ç©ºé—´ï¼Œæ¯ä¸ªé¢ä¸ºä¸€ä¸ªäºŒç»´çš„æ•°ç»„ç»„æˆï¼Œé€šè¿‡$(i,j,k)$æ¥è¿›è¡Œç´¢å¼•ã€‚ å…¶å®å¹³æ—¶ä¸‰ç»´æ•°ç»„ä¸æ€ä¹ˆç”¨ï¼Œå¾ªç¯åµŒå¥—æ¯”è¾ƒçš„éº»çƒ¦ã€‚ æ•°ç»„çš„å®šä¹‰ Typeæ˜¯æˆ‘ä»¬å®šä¹‰æ•°ç»„çš„ç±»ä¼¼ï¼Œä¸»è¦åˆ†ä¸ºarrayã€Charã€Tableä¸‰ä¸ªç±»å‹ï¼›è¿™ä¸‰ä¸ªç±»å‹çš„ä¸»è¦æ¡ˆä¾‹å¯ä»¥è§ç¬¬ä¸€çš„å­¦ä¹ æ•™ç¨‹ã€‚ Imaxã€Jmaxã€Kmaxå…¶å®æ˜¯ç”¨æ¥å®šä¹‰æ•°ç»„çš„å¤§å°å’Œç»´åº¦ç”¨çš„ã€‚ Var1ã€Var2ã€Var3åªè¦æ˜¯åœ¨å¤„ç†Tableç±»å‹çš„æ•°æ®æ—¶æ‰ä¼šç”¨åˆ°ã€‚ æ¡ˆä¾‹ 123456*Dim,nodenum,array,15!å®šä¹‰æ•°ç»„Nodenum,ç»´æ•°ä¸º15*1*1ï¼Œä¸€ç»´æ•°ç»„*Dim,nodenum,array,15,5!å®šä¹‰æ•°ç»„Nodenum,ç»´æ•°ä¸º15*5*1ï¼ŒäºŒç»´æ•°ç»„*Dim,nodenum,array,15,5,6!å®šä¹‰æ•°ç»„Nodenum,ç»´æ•°ä¸º15*5*6ï¼Œä¸‰ç»´æ•°ç»„ åœ¨å®é™…çš„ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä½ç»´æ•°ç»„è§£å†³çš„é—®é¢˜å°±ä¸è¦ä½¿ç”¨é«˜ç»´æ•°ç»„ã€‚å› ä¸ºä½ç»´çš„æ•°ç»„ç´¢å¼•æ¯”è¾ƒçš„æ–¹ä¾¿ã€‚ 123456789*get,tmmax,node,,num,max !æ•´ä¸ªæ¨¡å‹çš„æœ€å¤§èŠ‚ç‚¹å·esel,s,type,,1nsle,s,corner*get,ntol,node,,count!èŠ‚ç‚¹æ€»æ•°*get,etol,elem,,count !å•å…ƒæ€»æ•°*get,nmax,node,,num,max !æœ€å¤§èŠ‚ç‚¹å·*dim,nodno,,ntol !å­˜å‚¨èŠ‚ç‚¹å·*dim,nodk,,nmax !å­˜å‚¨å„èŠ‚ç‚¹é¢ç§¯ã€å¼¹ç°§åˆšåº¦*dim,eleno,,etol !å­˜å‚¨å•å…ƒå· æ•°ç»„çš„åˆ é™¤å¯¹äºä¸´æ—¶ç»„å»ºçš„æ•°ç»„ï¼Œå¦‚æœåç»­ä¸å†åˆ©ç”¨ï¼Œéœ€è¦åŠæ—¶è¿›è¡Œåˆ é™¤æ“ä½œã€‚æ•°ç»„çš„åˆ é™¤ä¸å˜é‡ç±»ä¼¼ï¼Œé‡‡ç”¨â€œ=â€è¿›è¡Œèµ‹ç©ºå€¼è¿›è¡Œåˆ é™¤ï¼Œå¯¹äºå­—ç¬¦å‹æ•°ç»„ï¼Œåˆ™èµ‹å€¼ä¸ºâ€â€ã€‚åˆ é™¤æ—¶åªéœ€è¦åˆ é™¤å˜é‡åçš„ç¬¬ä¸€ä¸ªå…ƒç´ å³å¯ï¼Œä¾‹å¦‚ï¼š 1234*Dim,nodeNum,array,13,4,3 !å®šä¹‰æ•°å€¼å‹æ•°ç»„ï¼Œåä¸ºnodeNumï¼Œä¸ºä¸€ä¸ªä¸‰ç»´æ•°ç»„nodeNum(1,1,1)=!åˆ é™¤æ•°ç»„ æ•°ç»„çš„èµ‹å€¼æ•°ç»„çš„èµ‹å€¼å…¶å®æœ‰ä¸¤ç§æ–¹æ³•ï¼š ç›´æ¥åœ¨APDLä¸­é‡‡ç”¨â€=â€çš„å½¢å¼èµ‹å€¼ï¼Œæ­¤æ—¶ç»å¸¸éœ€è¦é‡‡ç”¨ç»“åˆå¾ªç¯æ“ä½œ*DOä½¿ç”¨ã€‚ åˆ©ç”¨*Vreadå‘½ä»¤ï¼Œé€šè¿‡æ–‡ä»¶çš„å†™å…¥çš„æ–¹æ³•è¿›è¡Œèµ‹å€¼ã€‚ ä¸»è¦æŸ¥çœ‹æ•°ç»„ï¼Œé˜²æ­¢å‡ºç°è¿‡å¤šçš„é”™è¯¯ï¼Œå› ä¸ºä¸åŒçš„å†™å…¥çš„æ–¹æ³•ï¼Œå¾—åˆ°çš„ç»“æœæ˜¯ä¸ä¸€æ ·çš„ã€‚ â€œ=â€èµ‹å€¼æ³•ï¼š å•ä¸ªå…ƒç´ çš„èµ‹å€¼ï¼› åˆ—çŸ¢é‡è¿›è¡Œèµ‹å€¼(ä½æ•°æœ€å¥½ä¸è¦é•¿è¿‡10)ã€‚ æ¡ˆä¾‹ ç°æœ‰æ•°ç»„åä¸ºKnumï¼Œå…¶å€¼ä¸ºKnum = [24 6810 12141618]Tï¼Œåˆ™åœ¨APDLä¸­çš„å®ç°æ–¹æ³•å¦‚ä¸‹ï¼š 123456789*Dim,Knum,array,9,1,1!å®šä¹‰ä¸€ç»´æ•°ç»„KnumKnum(1)=2,4,6,8,10,12,14,16,18!é€šè¿‡åˆ—çŸ¢é‡èµ‹å€¼çš„æ–¹å¼èµ‹å€¼ç»™æ•°ç»„*Do,I,1,9!é€šè¿‡*doå¾ªç¯ï¼Œä¾æ¬¡èµ‹å€¼ç»™Knumçš„å…ƒç´ Knum(i)=2*I!è¿›è¡Œæ•°ç»„çš„èµ‹å€¼*Enddo è¾“å…¥çŸ©é˜µKï¼š K=\\left[\\begin{array}{ccc}1 & 3 & 5 \\\\ 4 & 6 & 8 \\\\ 7 & 9 & 11\\end{array}\\right]12345678910*Dim,Knum,array,3,3,1!å®šä¹‰äºŒç»´æ•°ç»„KnumKnum(1,1)=1,4,7!é€šè¿‡åˆ—çŸ¢é‡çš„æ–¹å¼èµ‹å€¼ç»™æ•°ç»„Knum(1,2)=3,6,9Knum(1,3)=5,8,11*Do,j,1,3!é€šè¿‡*doå¾ªç¯èµ‹å€¼ç»™æ•°ç»„*Do,1,1,3Knum(j,i)=3*(J-1)+1+2*(i-1)*Enddo*Enddo ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¦‚æœéå¤–éƒ¨æ–‡ä»¶å¯¼å…¥çš„æ•°å€¼ï¼Œçš†æœ‰æ•°å€¼è§„å¾‹å¯å¾ª,è¿™æ—¶å¯è€ƒè™‘é‡‡ç”¨*doè¿›è¡Œèµ‹å€¼æ“ä½œï¼Œå½“ç„¶ï¼Œå¦‚æœæ•°æ®ä¸å¤šï¼Œä¾ç„¶å¯ä»¥é‡‡ç”¨åˆ—çŸ¢é‡ç”šè‡³å•ä¸ªæ•°å€¼èµ‹å€¼çš„æ–¹æ³•è¿›è¡Œï¼Œæ•°æ®è¶Šå¤šï¼Œé‡‡ç”¨å¾ªç¯çš„ä¼˜åŠ¿å°±è¶Šå¤§ã€‚ æ•°ç»„çš„æŸ¥çœ‹ æ•°å€¼èµ‹å€¼å®Œæ¯•åï¼Œä¸åº”æ€¥äºè¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œï¼Œè€Œåº”å¯¹æ•°ç»„è¿›è¡ŒæŸ¥çœ‹ï¼Œä»¥ç¡®å®šå®šä¹‰çš„æ•°ç»„è¾¾åˆ°äº†é¢„å®šçš„è¦æ±‚ï¼Œç‰¹åˆ«æ˜¯é’ˆå¯¹é€šè¿‡*vreadæ–¹å¼ä»å¤–éƒ¨æ–‡ä»¶å†™å…¥æ•°æ®çš„æ•°ç»„ï¼Œå¾ˆå¤šæ—¶å€™ç”±äº*Vreadæ ¼å¼é—®é¢˜ï¼Œæ•°æ®æ²¡èƒ½æ­£ç¡®å¯¼å…¥ï¼Œå¯¼è‡´åç»­æ“ä½œå‡ºç°é”™è¯¯ã€‚ æŸ¥çœ‹æ•°ç»„çš„æ–¹å¼æœ‰ä¸¤ç§ï¼Œä¸€ç§é€šè¿‡*Statuså‘½ä»¤è¿›è¡ŒæŸ¥çœ‹ï¼Œå¦å¤–ä¸€ç§é€šè¿‡èœå•æ UtilityMenuâ€”-â€”Parametersâ€”â€”Array Parametersâ€”â€”Define/Editã€‚ è¿™é‡Œæ°´å“¥æ¯”è¾ƒæ¨èä½¿ç”¨GUIçš„æ–¹æ³•æ¥è¿›è¡ŒæŸ¥çœ‹ã€‚ æ—¶é—´å†ç¨‹å˜é‡å’Œæ•°ç»„çš„è½¬æ¢ æ—¶é—´å†ç¨‹åå¤„ç†å˜é‡åªå­˜åœ¨äºæ•°æ®åº“ä¸­ï¼Œç¦»å¼€åå¤„ç†æ¨¡å—ï¼Œä¼šè¢«è½¯ä»¶ä»å½“å‰æ•°æ®åº“ä¸­åˆ é™¤ï¼Œåªèƒ½ä¸ºä¸€ç»´æ•°é‡ã€‚ æ•°ç»„å­˜åœ¨äºç¨‹åºè¿è¡Œå…¨è¿‡ç¨‹ï¼Œå¯ä»¥ä¸ºä¸€ç»´ã€äºŒç»´ã€ä¸‰ç»´ã€‚ æ•°ç»„çš„å€¼ä¸€ç›´å­˜åœ¨ï¼Œé™¤éä½ å…³é—­äº†ANSYSã€‚ å˜é‡ä¸å¯é€šè¿‡å‘½ä»¤æµçš„æ–¹å¼å¯¼å‡ºï¼Œä½†å¯æ‰‹åŠ¨ä¿å­˜ä¸ºCSVæ ¼å¼ç”¨excelæ‰“å¼€ã€‚ ä½†æ˜¯å½“ç¨‹åºé‡Œé¢çš„å˜é‡è¿‡å¤šæ—¶ï¼Œæ¯ä¸ªéƒ½éœ€è¦è¿›è¡Œå•ç‹¬ä¿å­˜ã€‚ æ•°ç»„å¯é€šè¿‡*Vreadã€*Vwriteå¯¼å…¥æˆ–è€…å†™å‡ºã€‚ ä¸»è¦çš„æ“ä½œæœ‰ï¼šæ—¶é—´å†ç¨‹å˜é‡èµ‹å€¼ç»™æ•°ç»„å’Œæ•°ç»„èµ‹å€¼ç»™å˜é‡ä¸¤ç§ã€‚ æ—¶é—´å†ç¨‹å˜é‡èµ‹å€¼ç»™æ•°ç»„(ç”¨çš„å¤š) åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œä¸€èˆ¬å…³æ³¨çš„æ˜¯å‰ä¸¤ä¸ªå‚æ•°ï¼Œæœ€ç»ˆæ•°ç»„çš„åç§°å’Œæ—¶é—´å†ç¨‹åå¤„ç†çš„ç¼–å·ï¼Œåé¢çš„ä¸¤ä¸ªå‚æ•°ä½¿ç”¨çš„ä¸æ˜¯å¾ˆå¤šã€‚ æ•°ç»„èµ‹å€¼ç»™æ—¶é—´å†ç¨‹å˜é‡ æ–‡ä»¶çš„è¯»å…¥å’Œå†™å‡ºè¿™é‡Œçš„å‘½ä»¤ä¸æ˜¯å¾ˆå¤šï¼Œä½†æ˜¯å¯¹åº”ç ”ç©¶æ˜¯ç›¸å½“é‡è¦çš„ã€‚ åœ°éœ‡æ—¶ç¨‹åˆ†æï¼Œéœ€è¦è¯»å…¥åœ°éœ‡æ³¢æ•°æ®ï¼› ç»“æ„ååº”è°±åˆ†æï¼Œéœ€è¦è¯»å…¥ååº”è°±æ•°æ®ï¼› æ—¶é—´å†ç¨‹åå¤„ç†ï¼Œéœ€è¦å°†ç»“æœæ•°æ®å¯¼å‡ºå¹¶é‡‡ç”¨ç¬¬ä¸‰æ–¹æ•°æ®è½¯ä»¶å¯¹ç»“æœè¿›è¡Œç»˜åˆ¶ç¾åŒ–ã€‚ æ–‡ä»¶çš„è¯»å…¥å’Œå†™å‡ºä¸»è¦åŒ…å«ä¸‰ä¸ªæ–¹é¢çš„å†…å®¹ï¼šæ•°æ®æ ¼å¼ã€æ–‡ä»¶è¯»å…¥ã€æ–‡ä»¶å†™å‡ºã€‚ æ–‡ä»¶è¯»å…¥æ–‡ä»¶è¯»å…¥çš„åŸºæœ¬æ ¼å¼123456789101112*Create,dataread,mac!åˆ›å»ºå®æ–‡ä»¶ï¼Œåä¸ºdatareadï¼Œåç§°å¯æ›´æ”¹*dim,Elcentro,,2600!åˆ›å»ºè¯»å…¥æ•°æ®çš„æ•°ç»„*vread,Elcentro(1,1),Elcentro,txt,,ijk!è¯»å…¥æ–‡ä»¶Elcentro.txtçš„æ•°æ®(f6.3)!è¯»å…¥æ ¼å¼*End!ç»“æŸå®æ–‡ä»¶çš„åˆ›å»ºDataread!è¿è¡Œå®æ–‡ä»¶ å…·ä½“å‘½ä»¤1*Vread,ParP,Frname,Ext,--,Label,n1,n2,n3,Nskip ParPæ˜¯è¯»å…¥æ•°æ®çš„èµ‹å€¼å¯¹è±¡æ•°ç»„ï¼Œä½¿ç”¨å‰éœ€é‡‡ç”¨*dimå‘½ä»¤è¿›è¡Œå®šä¹‰ï¼› Frnameä¸ºå¸¦è·¯å¾„çš„æ–‡ä»¶åï¼Œæ³¨æ„è·¯å¾„ä¸èƒ½æœ‰ä¸­æ–‡åï¼Œå¦‚æœæ˜¯æ”¾åœ¨å·¥ä½œç›®å½•ä¸‹ï¼Œåˆ™ç›´æ¥å†™æ–‡ä»¶åå­—å³å¯; Extæ˜¯æ–‡ä»¶çš„æ‰©å±•åï¼› Labelæ˜¯å–å€¼é¡ºåºæ ‡è¯†å­—ç¬¦ï¼Œåˆ†åˆ«ä¸ºIJKã€IKJã€JIKã€JKIã€KIJã€KJIï¼Œé»˜è®¤ä¸ºIJKï¼› å…¶å®å°±æ˜¯å…ˆå†™å…¥è¡Œè¿˜æ˜¯å…ˆå†™å…¥åˆ—ã€‚ nlã€n2ã€n3åˆ†åˆ«ä¸ºæ ¹æ®å–å€¼é¡ºåºæ ‡è¯†ç¬¦æ‰€é‡‡ç”¨çš„å–å€¼ï¼› Nskipä¸ºè¯»å…¥æ•°æ®æ–‡ä»¶æ—¶éœ€è¦è·³è¿‡çš„å¼€å§‹è¡Œæ•°ï¼Œé»˜è®¤ä¸º0ï¼Œè¡¨ç¤ºä»ç¬¬ä¸€è¡Œå¼€å§‹è¯»å…¥æ•°æ®ã€‚ ANSYSä¸­è¯»å–æ•°æ®æ€»æ˜¯æŒ‰ç…§è¡Œè¿›è¡Œï¼Œæœ€åç»“æœçš„ä¸åŒåªæ˜¯å’Œå†™å…¥æ•°ç»„é¡ºåºä»¥åŠè¯»å–çš„æ•°å€¼ä¸ªæ•°æœ‰å…³!æœªåŒ¹é…åˆ°çš„æ•°æ®ä¼šä»¥0ä»£æ›¿ã€‚ æ¡ˆä¾‹å¯¹æ¯” é¦–å…ˆï¼Œè¯»å–æ˜¯ä»AA(1,1)å¼€å§‹çš„ã€‚ ijk,6,5çš„æ„æ€æ˜¯å…ˆè¯»å…¥åˆ—ï¼Œå¹¶ä¸”æ¯åˆ—æ˜¯è¯»å–6ä¸ªæ•°å­—ã€‚æ³¨æ„è¿™é‡Œè¯»å–åŸæ¥æ–‡ä»¶é‡Œé¢çš„æ•°æ®éƒ½æ˜¯æŒ‰ç…§è¡Œæ¥è¯»å–çš„ã€‚ (5f3.0)ï¼šè¯»å–æ–‡ä»¶æ—¶ï¼Œæ˜¯æŒ‰ç…§è¡Œçš„é¡ºåºæ¥è¯»å…¥çš„ï¼Œ5ä»£è¡¨æ¯æ¬¡è¯»å…¥5ä¸ªæ•°æ®æ¯ä¸ªæ•°æ®çš„é•¿åº¦ä¸º3ï¼Œç©ºæ ¼å°±æ˜¯ç›´æ¥å¿½ç•¥äº†ã€‚ (4f3.0)ï¼šå°±æ˜¯è¯»å–æ—¶ï¼Œæ¯è¡Œä»…ä»…è¯»å–4ä¸ªæ•°ï¼Œæœ€åçš„æ•°å°±ä¸è¯»äº†ã€‚ è¯»å…¥æ•°æ®ä¹‹åå†æŒ‰ç…§åˆ—çš„é¡ºåºå†™å…¥åˆ°æ•°ç»„å†…ã€‚ è¯»å®Œä¹‹åå‘ç°å…¶æœ€åçš„æ•°ä¸å¤Ÿäº†ï¼Œäºæ˜¯å°±ä½¿ç”¨0æ¥è¿›è¡Œè¡¥å…¨ã€‚ (5f5.0)çš„å«ä¹‰æ˜¯ï¼Œæ¯è¡Œè¯»å–5ä¸ªæ•°æ®ï¼Œæ¯ä¸ªæ•°æ®çš„é•¿åº¦ä¸º5ï¼ŒåŒ…å«ç©ºæ ¼ä¹Ÿå äº†ä¸€ä½æ•°ï¼Œåé¢å‘ç°ä»…ä»…è¯»äº†ä¸‰ä¸ªå°±ä¸å¤Ÿäº†ï¼Œäºæ˜¯ä½¿ç”¨0æ¥è¿›è¡Œè¡¥é½ã€‚ è¯»å…¥åˆ°æ•°ç»„çš„æ—¶å€™ï¼Œä»…ä»…è¯»å…¥å‰ä¸‰åˆ—çš„å†…å®¹ï¼Œåé¢çš„æ²¡æœ‰å†…å®¹è¯»å…¥å°±ä½¿ç”¨0æ¥è¿›è¡Œè¡¥é½ã€‚ è¿™é‡Œæ”¹å˜å†™å…¥æ•°ç»„çš„åˆ—æ•°4ï¼Œå°†è¯»å–çš„5ä¸ªæ•°çš„å‰å››ä¸ªå†™å…¥ï¼Œæœ€åä¸€ä¸ªå†™å…¥åˆ°ä¸‹ä¸€è¡Œä¸­ã€‚ AA(6,5)å®šä¹‰çš„æ˜¯6è¡Œäº”åˆ—ï¼Œè¿™é‡Œå†™å…¥å…ˆå†™è¡Œï¼Œå¹¶ä¸”ä¸€æ¬¡å°±å¦‚6ä¸ªå…ƒç´ ï¼Œè¶…è¿‡æ¯æ¯è¡Œæ‰€èƒ½å®¹çº³çš„5ä¸ªå…ƒç´ çš„ä¸Šé™ï¼Œå°±æŠ¥é”™äº†ã€‚ æ”¹æˆè¿™æ ·çš„è¯å°±å¯ä»¥äº†ï¼Œæ¯æ¬¡å†™å…¥5ä¸ªå…ƒç´ å³å¯ã€‚ æ•°ç»„è¯»å…¥åï¼Œæœ€å¥½è¦è¿›è¡ŒæŸ¥çœ‹æ“ä½œï¼Œé˜²æ­¢å‡ºç°é”™è¯¯ã€‚ æ€»ç»“ ç¡®å®šè¯»å…¥æ•°æ®çš„ç»´åº¦ï¼Œå¦‚è¡Œæ•°mä»¥åŠåˆ—æ•°nã€‚ å®šä¹‰æ•°ç»„ï¼Œç»´æ•°ä¸ºm*nï¼Œ *dim,parp,array,m,n é‡‡ç”¨*vreadå‘½ä»¤ï¼Œå¹¶ä¸”é‡‡ç”¨JIKçš„é¡ºåº *vread,parp(1,1),data,txt,,jik,n,m æ–‡ä»¶å†™å‡ºæ–‡ä»¶å†™å‡ºçš„åŸºæœ¬æ ¼å¼ æ•°æ®æ ¼å¼ç´§æŒ¨*Vwriteå’Œ*Vreadå‘½ä»¤ï¼› ä¸»è¦çš„10ç§æ•°æ®æ ¼å¼ï¼š Iæ ¼å¼ã€Fæ ¼å¼ã€Eæ ¼å¼ã€Gæ ¼å¼ã€Dæ ¼å¼ã€Læ ¼å¼ã€Aæ ¼å¼ã€Hæ ¼å¼ã€Xæ ¼å¼ã€/(æ–œæ )æ ¼å¼ã€‚å®é™…ä¸Š90%çš„æ ¼å¼éƒ½æ˜¯Fæ ¼å¼ã€‚ Fæ ¼å¼ Fæ ¼å¼åˆç§°ä¹‹ä¸ºå°æ•°å‹æ ¼å¼ï¼Œä¸ºæœ€å¸¸ç”¨çš„æ ¼å¼ï¼Œç«¥é‹ä»¬åº”é‡ç‚¹æŒæ¡ã€‚å…¶ä½¿ç”¨å½¢å¼ä¸ºFw.dï¼Œå…¶ä¸­wå„æ•°å€¼å çš„æ€»ä½æ•°ï¼Œdè¾“å‡ºæ•°æ®çš„å°æ•°ä½æ•°(å°æ•°ç‚¹åçš„ä½æ•°)ã€‚ æ³¨æ„äº‹é¡¹ å‘å³é é½ï¼Œæ²¡æœ‰çš„ä½¿ç”¨ç©ºæ ¼æ¥è¡¥å…¨ã€‚åƒç¬¬äºŒä¸ªæ˜¯è¾“å…¥çš„ä½æ•°å¤§äºäº†4ä½ï¼Œäºæ˜¯å°±æ˜¯ä¸è¿›è¡Œè¾“å‡ºäº†ï¼Œå…¨éƒ¨ä½¿ç”¨ç©ºæ ¼æ¥è¿›è¡Œä¸å»æ“ä½œã€‚ å¯¹åº”å°æ•°éƒ¨åˆ†ï¼Œç»™å®šçš„ä½æ•°å¤šäº†å°±æ˜¯è¡¥0ï¼Œå°‘äº†å°±å°†ç›¸å…³çš„ä½æ•°è¿›è¡Œèˆå»ã€‚ Iæ ¼å¼ ç”±äºè¿™ä¸ªæ ¼å¼ç”¨çš„æ¯”è¾ƒçš„å°‘ï¼Œåœ¨è¿™é‡Œå°±ç®€å•ç•¥è¿‡äº†ã€‚ Xæ ¼å¼ å…·ä½“å‘½ä»¤1*Vwriteï¼ŒPar1 ,Par2ï¼Œ Par3ï¼ŒPar4ï¼ŒPar5,Par6, , ï¼Œ Par19 å…¶ä¸­ï¼ŒPar1~Par19æ˜¯ä¾æ¬¡å†™å‡ºçš„19ä¸ªå‚æ•°æˆ–è€…å‚æ•°ï¼Œåœ¨ä½¿ç”¨*Vwriteè¿›è¡Œæ•°æ®å†™å‡ºä¹‹å‰ï¼Œå¿…é¡»éœ€ç”¨*Cfopenå‘½ä»¤æ‰“å¼€æˆ–è€…åˆ›å»ºä¸€ä¸ªæ•°æ®æ–‡ä»¶ï¼Œ*Cfclosåˆ™ä¸ºå…³é—­æ–‡ä»¶ï¼Œéœ€é…å¯¹ä½¿ç”¨ã€‚ 1*Cfopen,Fname,Ext,--,Loc ä¸è¯»å…¥å‘½ä»¤*Vreadç›¸ç±»ä¼¼ï¼Œ*VwriteåŒæ ·ä¸èƒ½ä½œä¸ºå·²çŸ¥çš„APDLå‘½ä»¤ç›´æ¥è¾“å…¥å‘½ä»¤çª—å£ä½¿ç”¨ï¼Œå¿…é¡»ä½œä¸ºå¤–éƒ¨å®æ–‡ä»¶å‘½ä»¤ä½¿ç”¨ï¼Œå…¶ä¹Ÿæœ‰å›ºå®šçš„ä½¿ç”¨æ ¼å¼ã€‚ æ•°æ®å†™å‡ºæŒ‰è¡Œå†™å‡º! 12345678910*create,datawrite,mac !åˆ›å»ºå®æ–‡ä»¶åå­—Datawrite*cfopen,filedada,txt !åˆ›å»ºå†™å‡ºæ–‡ä»¶çš„æ–‡ä»¶åå­—filedata*do,i,1,2600 !åˆ©ç”¨*doå‘½ä»¤é€ä¸ªå†™å‡ºæ•°ç»„çš„æ•°æ®aa=variable(i) !å°†å…·ä½“çš„æ•°å€¼èµ‹å€¼ç»™å˜é‡AA*vwrite,aa !å†™å‡ºå˜é‡AAçš„æ•°å€¼(f6.3) !å†™å‡ºæ ¼å¼*enddo !ç»“æŸå¾ªç¯*cfclose !å…³é—­æ–‡ä»¶*end !å®æ–‡ä»¶åˆ›å»ºå®Œæ¯•Datawrite !è¿è¡Œå®æ–‡ä»¶ è¿™é‡Œå°†æ•°ç»„é‡Œé¢çš„å†…å®¹å¯¼å…¥åˆ°ä¸€ä¸ªå˜é‡ï¼Œç„¶åå†å†™å…¥åˆ°æ–‡ä»¶ä¸­ã€‚ æ¡ˆä¾‹ã€ä¾‹ã€‘æ•°æ®åº“å·²ç»å®šä¹‰æ•°ç»„nodenum,é‡‡ç”¨*Vwriteå†™å‡ºåˆ°æ•°æ®æ–‡ä»¶ï¼Œæ–‡ä»¶åä¸º Nodenum.txt 1234567891011121314151617/prep7*dim,nodenum,array,20,5!ç»™æ•°ç»„nodenumèµ‹å€¼*do,J,1,20 *do,I,1,5 Nodenum(j,i)=5*(j-1)+i*enddo *enddo*enddo *create,datawrite,mac*cfopen,dda,txt*do,j,1,20*vwrite,nodenum(1,1),nodenum(1,2), nodenum(1,3),nodenum(1,4), nodenum(1,5)(5F8.2)*enddo*cfclose*enddatawrite å¯¹åº”æ—¶é—´å†ç¨‹æ•°æ®çš„å­˜å‚¨é—®é¢˜ï¼š é¦–å…ˆï¼Œç”¨*getè·å–æ€»å…±çš„æ—¶é—´numæ­¥éª¤ï¼› ä¹‹åï¼Œå»ºç«‹æ•°ç»„*dim,ux,array,num*ï¼› æœ€åï¼Œä½¿ç”¨*Vgetå‘½ä»¤å°†å˜é‡çš„å€¼è½¬åŒ–æˆä¸ºæ•°ç»„ã€‚ 1234567891011121314*dim,Uy2,array,29Vget,Uy2,4*status,Uy2*create,Uy2write,mac*cfopen,Uy2,txt*do,i,1,29aa=uy2(i)*vwrite,aa(f7.4)*enddocfclose*endUy2write å®æ–‡ä»¶æ— å‚æ•°çš„å®æ–‡ä»¶åŸºæœ¬æ¦‚å¿µ è®°å½•ä¸€äº›åˆ—é¢‘ç¹ä½¿ç”¨å‘½ä»¤çš„é›†åˆï¼Œåç¼€åä¸ºMacï¼› å‘½ä»¤çš„æ¨¡å—åŒ–ï¼Œé€šè¿‡å¯¹æ¨¡å—çš„é‡æ–°å‘½åï¼Œè‡ªå®šä¹‰ANSYSå‘½ä»¤æ–¹å¼é›†ä½“è°ƒç”¨ï¼› å®æ–‡ä»¶ä¸€èˆ¬å­˜æ”¾äºå·¥ä½œç›®å½•ä¸‹ã€‚ ä¸‹é¢äº‹å®æ–‡ä»¶çš„åˆ›å»ºï¼Œä¹‹é—´å†å‘½ä»¤æµé‡Œé¢è¿›è¡Œåˆ›å»ºçš„ã€‚ 12345678*Create,BLC4-Creat,mac !åˆ›å»ºå®æ–‡ä»¶/prep7Blc4...4,5,5Sphere,1Vsbv,1,2Finish*End !ç»“æŸå®æ–‡ä»¶åˆ›å»ºBLC4-Creat !è¿è¡Œå®æ–‡ä»¶ å½“ç„¶ï¼Œä¹Ÿæ˜¯å¯ä»¥ä¸å†™å‰ç¼€å’Œåç¼€çš„å†…å®¹ï¼Œå°†ä¸»è¦çš„å†…å®¹å¤åˆ¶ç²˜è´´åˆ°å¯¹åº”çš„.txtæ–‡ä»¶ä¸­ï¼Œä¹‹åå°†.txtæ–‡ä»¶è¿›è¡Œæ”¹åå¤„ç†.macã€‚ ä½†æ˜¯ï¼Œä¸Šè¿°çš„æ–¹æ³•æ¯”è¾ƒçš„å¤æ‚ï¼Œéœ€è¦å¾ˆå¤šçš„æ“ä½œã€‚æ°´å“¥å»ºè®®ä½¿ç”¨å‘½ä»¤æµçš„æ–¹æ³•ã€‚ ä½¿ç”¨å®æ–‡ä»¶çš„ä¸»è¦çš„æœ‰ç‚¹ï¼š å¤§å¹…åº¦å‡å°‘ç¨‹åºç¯‡å¹…ï¼Œå¢åŠ ç¨‹åºå¯è¯»æ€§ã€‚ æé«˜ç¨‹åºè¿è¡Œæ•ˆç‡ï¼Œé’ˆå¯¹å‰å¤„ç†å»ºæ¨¡é˜¶æ®µã€‚ äºŒæ¬¡å¼€å‘éœ€è¦ã€‚ æŸäº›ç‰¹æ®Šå‘½ä»¤å¿…é¡»é‡‡ç”¨å®æ–‡ä»¶æ‰§è¡Œã€‚ å®æ–‡ä»¶çš„å‘½å æ–‡ä»¶åçš„å­—ç¬¦ä¸èƒ½æ“è¶…è¿‡32ä¸ªå­—ç¬¦ï¼› æ–‡ä»¶åä¸å¯ä»¥ä½¿ç”¨æ•°å­—ä½œä¸ºå¼€å¤´ï¼Œä¸èƒ½åŒ…å«ç©ºæ ¼ï¼› å‘½åæ—¶è¦é¿å…çš„é‡‡ç”¨åœ¨APDLä¸­å·²ç»å‚åœ¨è¿‡çš„å‘½ä»¤ï¼› æ°´å“¥å»ºè®®ï¼Œåœ¨å®é™…çš„ä½¿ç”¨çš„æ—¶å€™ï¼Œè¦å°†å·¥ç¨‹å¸¸ç”¨çš„å…ƒç´ å¼•å…¥åˆ°å‘½åä¸­ï¼Œå°±æ˜¯å°†æˆ‘ä»¬å¸¸ç”¨è¯æ±‡çš„ç¼©å†™å¼•å…¥åˆ°å‘½ä»¤å½“ä¸­ã€‚ å®æ–‡ä»¶çš„åˆ›å»ºæ–¹å¼ åœ¨å¤–éƒ¨çš„æ–‡æ¡£ç¼–å†™å™¨ï¼Œä¿å­˜ä¸º.macå½¢å¼ï¼› é‡‡ç”¨*createå‘½ä»¤ã€‚ æ¡ˆä¾‹æ¢å•å…ƒå†…åŠ›å›¾çš„ç»˜åˆ¶ å…¶å®workbenchå…¶å®å°±æ˜¯ä½¿ç”¨äº†ä¸€äº›å®æ–‡ä»¶ï¼Œå°†å¸¸ç”¨çš„æ“ä½œå˜æˆå®æ–‡ä»¶ï¼Œè¿›è€Œå°è£…æˆä¸€ä¸ªå·¥å…·æ¡ã€‚ å¸¦å‚æ•°çš„å®æ–‡ä»¶åŸºæœ¬æ¦‚å¿µå®æ–‡ä»¶çš„å˜é‡ä¸»è¦æœ‰å…¨å±€å˜é‡å’Œå±€éƒ¨å˜é‡ä¸¤ç§ï¼š å®æ–‡ä»¶å¤–éƒ¨è¾“å…¥å˜é‡â€”â€”å…¨å±€å˜é‡ï¼› å®æ–‡ä»¶å†…éƒ¨å®šä¹‰å˜é‡â€”â€”å±€éƒ¨å˜é‡ï¼› å¸¦å‚æ•°çš„å®æ–‡ä»¶çš„å®šä¹‰ é€šè¿‡å¤–éƒ¨è¾“å…¥å˜é‡ï¼Œå®ç°å¾ˆå¤šå‚æ•°åŒ–å®æ–‡ä»¶çš„å®šåˆ¶ ä¸€ä¸ªå®å‘½ä»¤ï¼Œæœ€å¤šå¯åŒæ—¶è¾“å…¥19ä¸ªå˜é‡ï¼Œä»£å·åˆ†åˆ«ä¸ºARG1~ARG19 æ¡ˆä¾‹åœ°å€ååº”è°±å®æ–‡ä»¶çš„åˆ›å»º æ¡ˆä¾‹è‡ªå®šä¹‰é˜¶ä¹˜å‡½æ•° è‡ªå®šä¹‰å·¥å…·æ¡ å…¶å®æ˜¯å°†å¸¸ç”¨çš„å‘½ä»¤è¿›è¡Œå°è£…ï¼Œæœ‰ç‚¹ç±»ä¼¼äºå®æ–‡ä»¶ï¼Œæé«˜ä»¿çœŸçš„æ•ˆç‡ã€‚ å·¥å…·æ¡é‡Œé¢çš„é€‰é¡¹æ˜¯å¹³æ—¶å¸¸ç”¨çš„å·¥å…·ï¼Œè€Œä¸æ˜¯å°†æ‰€æœ‰çš„å‘½ä»¤å…¨éƒ¨åšæˆå·¥å…·æ¡ã€‚ å·¥å…·æ¡çš„åˆ¶ä½œ1*Abbr , Abbr_name, string Abbr_nameï¼šå·¥å…·æ¡åç§°ï¼› Stringï¼šå·¥å…·æ¡æ‰€ä»£è¡¨çš„å‘½ä»¤(å¯ä»¥æ˜¯å®æ–‡ä»¶)ã€‚ å·¥å…·æ¡çš„åµŒå¥— æœ€å¥½ä¸è¦åµŒå¥—çš„è¶…è¿‡3å±‚ï¼Œè¿™é‡Œçš„åµŒå¥—å°±æ˜¯ç›¸å½“æ‰“å¼€ä¸‹ä¸€çº§çš„å·¥å…·æ¡ã€‚","link":"/2022/10/19/%E6%9C%89%E9%99%90%E5%85%83%E6%96%B9%E6%B3%95/APDL-learning-3/"},{"title":"VITæ¨¡å‹åŸºç¡€åŠä»£ç å®ç°","text":"hljs.initHighlightingOnLoad(); æœ¬æ–‡é¦–å…ˆç®€å•ä»‹ç»self-attentionæœºåˆ¶ï¼Œä¹‹åå…³æ³¨å…¶åœ¨CVé¢†åŸŸçš„åº”ç”¨VITæ¨¡å‹è¿›è¡Œæ·±å…¥çš„ä»‹ç»ï¼Œæœ€åå¯¹VITçš„å„ä¸ªæ¨¡å—è¿›è¡Œä»£ç å®ç°ã€‚æœ¬æ–‡ä»…ä»…æ¶‰åŠçš„æ˜¯æ¨¡å‹éƒ¨åˆ†çš„å®ç°ï¼Œå¯¹äºè®­ç»ƒéƒ¨åˆ†å…¶å¯¹äºå°æ•°æ®é›†çš„æ•ˆæœä¸æ˜¯å¾ˆå¥½ï¼Œäºæ˜¯æœ¬æ–‡ä¸å†å¤ç°ã€‚ self-Attention æœºåˆ¶æ¦‚è¿° tranformerçš„å¼•å…¥ä¸»è¦æ˜¯é’ˆå¯¹è¯­è¨€æ¨¡å‹çš„ï¼Œåªè¦è§£å†³ä¹‹å‰çš„è¯­è¨€æ¨¡å‹ä¸­çš„å‡ ä¸ªé—®é¢˜ï¼š RNNï¼ŒLSTMæ— æ³•å®ç°å¹¶è¡ŒåŒ–ï¼Œåªæœ‰å°†å‰é¢çš„è®¡ç®—å¥½ä¹‹åæ‰å¯ä»¥è®¡ç®—åé¢çš„èŠ‚ç‚¹ï¼› RNNçš„è®°å¿†æ—¶é—´æ¯”è¾ƒçš„çŸ­ï¼Œè€ŒLSTMä¸»è¦è§£å†³çš„å°±æ˜¯RNNçš„è®°å¿†æ¯”è¾ƒçŸ­çš„é—®é¢˜ï¼› transformeræ¨¡å‹çš„ç²¾é«“å°±æ˜¯ä¸‰ä¸ªå›¾å’Œä¸‰ä¸ªå…¬å¼ã€‚ å•self-attentionæ¨¡å—ä¸‹é¢å¼•å…¥æå®æ¯…è€å¸ˆçš„è§†é¢‘è¯¾æ¥å…·ä½“çš„è¿›è¡Œä»‹ç»ï¼š $W^{q}ã€W^{k}ã€W^{v}$ åœ¨ä»£ç é‡Œé¢æ˜¯é€šè¿‡å…¨è¿æ¥æˆå®ç°çš„ï¼Œå…¶ä¸­è¿™ä¸‰ä¸ªçŸ©é˜µåœ¨æ•´ä¸ªç½‘ç»œä¸­æ˜¯å…±äº«çš„å‚æ•°ï¼Œä¸»è¦çš„ä½œç”¨æ˜¯æ¥è¿›è¡Œç¼–ç ï¼Œæ˜¯å¯ä»¥å­¦ä¹ çš„å‚æ•°ã€‚ $q^i=a^iW^q$ æ˜¯ç”¨æ¥åŒ¹é…çš„é¡¹ï¼› $k^i=a^iW^k$æ˜¯è¢«åŒ¹é…çš„å…³é”®è¯ï¼› $v^i=a^iW^v$ æ˜¯ç”¨æ¥å‚¨å­˜ä¿¡æ¯çš„ç¼–ç é¡¹ï¼› è¿™äº›çŸ©é˜µè¿ç®—æ˜¯å¯ä»¥é€šè¿‡çŸ©é˜µçš„æ‹¼æ¥æ¥å®ç°å¹¶è¡ŒåŒ–çš„æ“ä½œã€‚ è®¡ç®—å®Œ$q,k,v$ä¹‹åï¼Œå°†æ¯ä¸ª$q^i$å–åŒ¹é…å…¶ä½™æ‰€æœ‰çš„$k$ï¼Œè¿™é‡Œçš„ç›¸ä¼¼åº¦çš„è®¡ç®—æ˜¯é€šè¿‡ç‚¹ç§¯æ¥å®šä¹‰çš„ï¼Œå°†æ¯ä¸ª$q^i$å’Œå…¶ä½™çš„$k$å‘é‡è¿›è¡Œç‚¹ç§¯å¾—åˆ°é¡¹ç›¸ä¼¼åº¦ã€‚ è®¡ç®—ç‚¹ç§¯çš„æ“ä½œå’Œç¼–ç çš„è¿‡ç¨‹æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯å¯ä»¥é€šè¿‡çŸ©é˜µæ‹¼æ¥æ¥å¹¶è¡Œè®¡ç®—ã€‚ æœ€åå°†ä¸Šè¿°çš„ç»“æœç›¸åŠ å³å¯ï¼Œäºæ˜¯self-attention å±‚å°±å°†è¾“å…¥çš„$a_1,a_2$è½¬åŒ–æˆä¸º$b_1,b_2$ã€‚ è¿™é‡Œå¯ä»¥å°†ä¸Šè¿°çš„self-attentionæŠ½è±¡æˆä¸ºä¸€ä¸ªæ¨¡å—æ›´å¥½ç†è§£ã€‚ Multii-head Self-Attentionå¼•å…¥ä¸€ä¸ª2-headçš„æƒ…å†µï¼Œæ¥è¿›è¡Œåˆ†æï¼Œå…¶æœ¬è´¨å°±æ˜¯é€šè¿‡çŸ©é˜µè¿ç®—(çº¿æ€§æ˜ å°„)æ¥å°†ä¹‹å‰çš„å‡ ä¸ª$q,k,v$åˆ†è§£æˆä¸ºå¤šä¸ªï¼Œå…¶ä»–æ±‚è§£ç›¸ä¼¼åº¦çš„æ–¹æ³•å’Œä¹‹å‰ç›¸ä¼¼ã€‚ ä¸Šå›¾ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œå°±ç›´æ¥å°†å‰é¢çš„$q,k,v$è¿›è¡Œå¹³å‡çš„æ‹†åˆ†ã€‚ æ ¹æ®ç¬¬äºŒä¸ªä¸‹æ ‡å°†ä¸Šè¿°çš„$q,k,v$å½’ç»“ä¸åŒçš„headé›†åˆé‡Œå»ï¼Œä¹‹åå¯¹ä¸åŒçš„headåˆ†åˆ«è®¡ç®—ç›¸ä¼¼åº¦å€¼ã€‚æ¯”å¦‚å°†$q^{1,1}$å’Œ$q^{2,1}$è¿™ç§ç¬¬äºŒä¸ªä¸‹æ ‡ç›¸åŒçš„æ”¾åˆ°åŒä¸€ä¸ªheadé›†åˆå»ã€‚ åŒæ ·çš„ï¼Œé€šè¿‡çŸ©é˜µæ‹¼æ¥æ“ä½œå¯ä»¥å®ç°å¹¶è¡Œè®¡ç®—ã€‚ ä¹‹åæ ¹æ®ç¬¬ä¸€ä¸ªä¸Šæ ‡é‡æ–°å°†è®¡ç®—çš„å¾—åˆ°çš„ç›¸ä¼¼åº¦é‡æ–°è¿›è¡Œåˆ†ç±»å’Œæ‹¼æ¥æ“ä½œï¼Œæœ¬è´¨å°±æ˜¯å°†ä¹‹å‰åœ¨ä¸åŒheadè®¡ç®—çš„ç›¸ä¼¼åº¦çš„ç»“æœè¿˜åŸå›å»ã€‚ å°†è¿˜åŸå›å»çš„ç»“æœé‡æ–°è¿›è¡Œæ‹¼æ¥æ“ä½œã€‚å¦‚å°†$b_{1,1}$å’Œ$b_{1,2}$è¿›è¡Œæ‹¼æ¥ï¼Œå°†$b_{2,1}$å’Œ$b_{2,2}$æ‹¼æ¥ã€‚ å°†ä¸åŒheadè®¡ç®—çš„ç»“æœé‡æ–°è¿›è¡Œæ‹¼æ¥çš„ä¹‹åï¼Œé€šè¿‡ä¸€ä¸ªçº¿æ€§æ˜ å°„$W^O$æ¥è¿›è¡Œæ•°æ®èåˆã€‚ åŒæ—¶$W^O$çš„å¦ä¸€ä¸ªä½œç”¨æ˜¯ä¸ºäº†ä¿è¯ï¼Œmulti-head attentionçš„å‘é‡çš„é•¿åº¦ä¿æŒä¸å˜ã€‚ æ€»ç»“å¯ä»¥å‘ç°ï¼Œè¿™é‡Œçš„multi-headæœºåˆ¶å…¶å®å’Œä¹‹å‰çš„ResNeXtçš„å¯¹åº”çš„Group Convolutionç±»ä¼¼ã€‚ å°†å…¶ä¹Ÿå¯ä»¥æŠ½è±¡æˆä¸€ä¸ªæ¨¡å—å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ Positional Encodingä½ç½®ç¼–ç é—®é¢˜çš„äº§ç”Ÿï¼š å°†ä¹‹åçš„$a_2,a_3$è¿›è¡Œä½ç½®ä¸Šçš„äº¤æ¢æ“ä½œï¼Œé‡æ–°è®¡ç®—ç›¸ä¼¼åº¦çš„ç¼–ç å…¶å®å¯¹$b_1$æ¥è¯´æ˜¯ä¸å—å½±å“çš„ï¼Œè¿™æ ·å°±æ˜¯é€ æˆå¥‡å¼‚å’Œå®é™…æƒ…å†µä¸ç¬¦ï¼Œå› æ­¤è¿™é‡Œå¼•å…¥ä½ç½®ç¼–ç ã€‚ ä½ç½®ç¼–ç çš„è®¾ç½®æ–¹æ³•ä¸»è¦æœ‰ä¸¤ç§ï¼š ä½¿ç”¨å¯è®­ç»ƒåˆ°çš„ä½ç½®ç¼–ç ï¼› ä½¿ç”¨å…¬å¼å®šä¹‰å¥½çš„ä½ç½®ç¼–ç ï¼Œå…¸å‹çš„å°±æ˜¯ä½™å¼¦ä½ç½®ç¼–ç ã€‚ ä½†æ˜¯å…¶å®ä¸¤ç§æ–¹å¼å¾—åˆ°ä½ç½®ç¼–ç æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼ŒVITæ¨¡å‹ç›®å‰ä½¿ç”¨çš„æ˜¯å¯ä»¥è®­ç»ƒçš„ä½ç½®ç¼–ç ã€‚ Vision Transformer å…¶æœ¬è´¨æ˜¯å°†ä¸€ä¸ªå›¾ç‰‡åˆ†å—ï¼Œå°†ä¸€ä¸ª$16\\times16$çš„patchçœ‹æˆä¸€ä¸ªå•è¯ã€‚ å®éªŒçš„æ•ˆæœå¦‚ä¸‹ï¼š é¦–å…ˆæ˜¯åœ¨GOOGLEçš„JFTæ•°æ®ä¸Šè¿›è¡Œé¢„è®­ç»ƒï¼Œä¹‹ååˆ°ImageNeté‡Œé¢è¿ç§»å­¦ä¹ ã€‚ å…¶ä»–å°±æ˜¯åœ¨ImageNet21Kä¸Šè¿›è¡Œé¢„è®­ç»ƒï¼Œä¹‹ååœ¨ImageNetä¸Šé¢è¿›è¡Œè¿ç§»ã€‚ æ–‡ç« ä¸»è¦çš„å¯¹æ¯”çš„æ¨¡å‹ä¸»è¦åŒ…å«ä»¥ä¸‹å‡ ç§ï¼š çº¯CNNæ¨¡å‹ï¼šResNet101ã€ResNet152ã€ResNet50ç­‰ï¼› Hybridæ¨¡å‹ï¼šä¼ ç»Ÿçš„CNNå’ŒTransformeræ··åˆæ¨¡å‹ï¼Œæ¯”å¦‚å¢åŠ é€šé“self-attentionæœºåˆ¶çš„SE-Netã€CBAMç­‰ï¼› çº¯transformeræ¨¡å‹ï¼šVITã€Swin-transformerç­‰ã€‚ æ¨¡å‹æ­å»º åŸºæœ¬åŸç†å°±æ˜¯å°†å›¾ç‰‡åˆ†æˆå¤šä¸ª $16\\times 16$ patchã€‚ æ¯ä¸ªpatchéœ€è¦é€šè¿‡ä¸€ä¸ªLinearçš„ç½‘ç»œè¿›è¡Œç¼–ç (Embedding)æ“ä½œï¼Œå¾—åˆ°ä¸€ä¸ªå‘é‡(token)ï¼›è¿™é‡Œå› ä¸ºéœ€è¦è¿›è¡Œåˆ†ç±»æ“ä½œï¼Œéœ€è¦åœ¨æœ€å‰é¢å¢åŠ ä¸€ä¸ªclass tokenï¼Œå…¶é•¿åº¦å’Œpatch tokenæ˜¯ç›¸åŒçš„ã€‚ å°†è¿™äº›tokené…åˆæ—¶é—´ç¼–ç (ä½ç½®ä¿¡æ¯)è¾“å…¥åˆ°Transformer Encoderé‡Œé¢ï¼Œå…¶ä¸»è¦å°±æ˜¯å°†è¿™ä¸ªEncoderçš„blocké‡å¤å †å Læ¬¡ã€‚ æœ€åé€šè¿‡Multi-headæœºåˆ¶è¾“å‡ºå¯¹åº”classä¿¡æ¯ã€‚ Embeddingå±‚ä¸‹é¢å°†è¿™äº›å±‚åˆ†å¼€è¿›è¡Œä»‹ç»ï¼Œé¦–å…ˆæ˜¯Embeddingå±‚ã€‚ è¾“å…¥ï¼šå¤§å°ä¸º[num_token,token_dim]çš„äºŒç»´çŸ©é˜µï¼Œå³tokençš„å‘é‡åºåˆ—ã€‚ åœ¨å®ç°patché—´çš„åˆ†å—æ“ä½œæ˜¯é€šè¿‡å·ç§¯æ¥å®ç°çš„ï¼Œé€šè¿‡$16 \\times 16$ çš„å·ç§¯æ ¸ï¼Œstride=16 ï¼Œå…¶ä¸­å·ç§¯æ ¸çš„channel=768ï¼Œä¹‹åå°†[H,W]è¿›è¡Œå±•å¹³ã€‚ ä¸Šé¢çš„class tokenå…¶å®å°±æ˜¯åœ¨åŸæ¥tokençš„åŸºç¡€ä¸Šï¼Œå¢åŠ äº†å‚æ•°æ¥ä»£è¡¨ç±»åˆ«å‚æ•°ã€‚ åœ¨VITä¸­ï¼Œä½ç½®ç¼–ç ä½¿ç”¨çš„æ˜¯å¯ä»¥å­¦ä¹ çš„ä½ç½®ç¼–ç ï¼Œè¿™ä¸ªç¼–ç æ˜¯é‡‡ç”¨ä¸tokenä¸€æ ·çš„é•¿åº¦ï¼Œå°†å…¶ç›´æ¥åŠ åœ¨ä¹‹å‰çš„tokenä¸Šå³å¯ã€‚ ä¸Šè¿°å®éªŒçš„ç»“æœå¯çŸ¥ï¼Œå¯¹äºä½ç½®ç¼–ç è€Œè¨€ï¼Œå…¶æœ‰æ— çš„å·®åˆ«æ¯”è¾ƒå¤§ï¼Œä½†æ˜¯ç›¸åº”çš„ä½ç½®ç¼–ç çš„ç§ç±»çš„å·®åˆ«å…¶å®ä¸æ˜¯å¾ˆå¤§ï¼Œå› æ­¤ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå°±ç”¨1Dçš„ä½ç½®ç¼–ç å³å¯ã€‚ ä»¥ä¸Šæ˜¯ä¸åŒç¼–ç ä½ç½®ä¸Šçš„ä½™å¼¦ç›¸ä¼¼åº¦ï¼Œè¿™é‡Œé‡‡ç”¨çš„patchæ˜¯$32 \\times32$ çš„ï¼Œå› æ­¤å…¶æ˜¯$7\\times7$çš„å½¢å¼ã€‚ å…¶å®å°±æ˜¯é€šè¿‡å­¦ä¹ çš„æ–¹æ³•å­¦ä¹ å¾—åˆ°çš„ä½ç½®ç¼–ç ï¼Œå°†å…¶å±•å¹³ä¹‹åçš„ç»“æœå›¾ï¼Œå¯ä»¥å‘ç°åœ¨åŒä¸€è¡Œå’ŒåŒä¸€åˆ—ä¸Šçš„ç›¸ä¼¼åº¦ä¼šæ¯”è¾ƒçš„å¤§ã€‚ Transformer Encoderå±‚ åœ¨Attentioné‡Œé¢çš„Normé»˜è®¤æ˜¯Layer Normã€‚ Normå±‚çš„ç»“æœä¼šè¾“å…¥åˆ°Multi-Headå±‚ä¸­ï¼Œä¹‹åé€šè¿‡ä¸€ä¸ªDropoutå±‚(ä»£ç å®ç°æ˜¯ç”¨çš„æ˜¯DropPath)ã€‚ ä¸€è¯´DropPathçš„æ•ˆæœä¼šæ¯”ä¸€èˆ¬çš„Dropoutè¦å¥½å¾ˆå¤šã€‚ MLPå’ŒMulti-Headå±‚é‡‡ç”¨çš„éƒ½æ˜¯æ®‹å·®è¿æ¥çš„æ–¹å¼ã€‚ MLP Blockæ˜¯å…ˆå°†ç»´åº¦å‡é«˜æˆä¸ºåŸæ¥çš„4å€ï¼Œä¹‹åå°†å†è¿›è¡Œå°†ä¸ºæ“ä½œå˜å›åŸæ¥çš„ç»´åº¦ã€‚ MLP headå±‚ å¯¹äºè®­ç»ƒæ¯”è¾ƒçš„å¤§çš„æ¨¡å‹è€Œè¨€ï¼Œå…¶åœ¨æœ«ç«¯åŒ…å«äº†å¤šä¸ªå…¨è¿æ¥å±‚ï¼› ä¹‹åå¯¹ç½‘ç»œè¿›è¡Œè¿ç§»æˆ–è€…æ˜¯ç›´æ¥åœ¨å°æ•°æ®é›†ä¸Šä½¿ç”¨çš„æ—¶å€™ï¼Œä¼šæŠŠå…¨è¿æ¥å±‚çš„å±‚æ•°å‡å°‘ã€‚ vIt-B/16æ¨¡å‹çš„æ•´ä½“æ¶æ„ class torkenå’ŒPosition Embedding æ˜¯ä¸€ä¸ªå¯ä»¥è®­ç»ƒçš„å‚æ•°å€¼ï¼› ä¹‹åéœ€è¦ç»è¿‡12å±‚Transformer Encoderå±‚å’Œä¸€ä¸ªlayer Normå±‚ï¼› Layer Normä¹‹åï¼Œå¯¹äºåˆ†ç±»ä»»åŠ¡æ¥è®²ï¼Œå°†ç¬¬ä¸€ä¸ªclass torkenå•ç‹¬æå–å‡ºæ¥ï¼Œè¾“å‡ºåˆ°MLP Headå±‚é‡Œé¢ï¼› å¯¹äºImage Netå’Œè‡ªå·±çš„æ•°æ®é›†è€Œè¨€ï¼Œå…¶å®å°±æ˜¯å¯ä»¥ä¸ç”¨Pre-logitså±‚ã€‚ VITå¸¸ç”¨çš„ä¸‰ä¸ªæ¨¡å‹çš„å‚æ•° ä¸Šè¿°å‚æ•°çš„è¯´æ˜ï¼š Layersæ˜¯Transformer Encoderä¸­é‡å¤å †å Encoder Blockçš„æ¬¡æ•°ï¼› Hidden Sizeæ˜¯é€šè¿‡Embeddingå±‚åæ¯ä¸ªtokençš„dim(å‘é‡çš„é•¿åº¦)ï¼› MLP sizeæ˜¯Transformer Encoderä¸­MLP Blockç¬¬ä¸€ä¸ªå…¨è¿æ¥çš„èŠ‚ç‚¹ä¸ªæ•°(æ˜¯Hidden Sizeçš„å››å€)ï¼› Headsä»£è¡¨Transformerä¸­Multi-Head Attentionçš„headsæ•° Hybrid æ¨¡å‹è¯¦è§£æ¨¡å‹åŸºæœ¬æ¶æ„ Hybridæ··åˆæ¨¡å‹ï¼Œå°±æ˜¯å°†ä¼ ç»ŸCNNç‰¹å¾æå–å’ŒTransformerè¿›è¡Œç»“åˆï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯R50ä½œä¸ºç‰¹å¾æå–å™¨ï¼› R50å’ŒåŸå§‹çš„ResNetä¸åŒï¼Œå…¶ä¸­çš„å·ç§¯å±‚ä¸»è¦é‡‡å–çš„StdConv2dè€Œä¸æ˜¯Conv2dï¼Œå¹¶ä¸”éœ€è¦å°†æ‰€æœ‰çš„BatchNormå±‚æ¢æˆGroupNormï¼› æŠŠstage4ä¸­çš„3ä¸ªBlockç§»åˆ°stage3é‡Œé¢ï¼ŒåŸå§‹çš„R50æœ‰[3,4,6,3]å››ä¸ªä¸‹é‡‡æ ·ï¼Œä½†æ˜¯å®é™…çš„æƒ…å†µæ˜¯å°†å…¶è½¬åŒ–æˆä¸º3ä¸ªä¸‹é‡‡æ ·å±‚ï¼Œæœ€åä¸¤ä¸ªå±‚ç›´æ¥è¿›è¡Œåˆå¹¶ã€‚ è¡¥å……å…³äºå‡ ç§å½’ä¸€åŒ– BNï¼ŒLNï¼ŒINï¼ŒGNä»å­¦æœ¯åŒ–ä¸Šè§£é‡Šå·®å¼‚ï¼š BatchNormï¼šbatchæ–¹å‘åšå½’ä¸€åŒ–ï¼Œç®—NHWçš„å‡å€¼ LayerNormï¼šchannelæ–¹å‘åšå½’ä¸€åŒ–ï¼Œç®—CHWçš„å‡å€¼ InstanceNormï¼šä¸€ä¸ªchannelå†…åšå½’ä¸€åŒ–ï¼Œç®—H*Wçš„å‡å€¼ GroupNormï¼šå°†channelæ–¹å‘åˆ†groupï¼Œç„¶åæ¯ä¸ªgroupå†…åšå½’ä¸€åŒ–ï¼Œç®—(C//G)HWçš„å‡å€¼ LN å’Œ IN åœ¨è§†è§‰è¯†åˆ«ä¸Šçš„æˆåŠŸç‡éƒ½æ˜¯å¾ˆæœ‰é™çš„ï¼Œå¯¹äºè®­ç»ƒåºåˆ—æ¨¡å‹ï¼ˆRNN/LSTMï¼‰æˆ–ç”Ÿæˆæ¨¡å‹ï¼ˆGANï¼‰å¾ˆæœ‰æ•ˆã€‚ æ‰€ä»¥ï¼Œåœ¨è§†è§‰é¢†åŸŸï¼ŒBNç”¨çš„æ¯”è¾ƒå¤šï¼ŒGNå°±æ˜¯ä¸ºäº†æ”¹å–„BNçš„ä¸è¶³è€Œæ¥çš„ã€‚ GN æŠŠé€šé“åˆ†ä¸ºç»„ï¼Œå¹¶è®¡ç®—æ¯ä¸€ç»„ä¹‹å†…çš„å‡å€¼å’Œæ–¹å·®ï¼Œä»¥è¿›è¡Œå½’ä¸€åŒ–ã€‚GN çš„è®¡ç®—ä¸æ‰¹é‡å¤§å°æ— å…³ï¼Œå…¶ç²¾åº¦ä¹Ÿåœ¨å„ç§æ‰¹é‡å¤§å°ä¸‹ä¿æŒç¨³å®šã€‚å¯ä»¥çœ‹åˆ°ï¼ŒGNå’ŒLNå¾ˆåƒã€‚ ç»“æœå¯¹æ¯” åœ¨è®­ç»ƒçš„æ­¤æ—¶æ¯”è¾ƒå°‘çš„æƒ…å†µä¸‹ï¼ŒHybridæ¨¡å‹çš„æ•ˆæœä¼šæ›´å¥½ï¼› åä¹‹ViTæ¨¡å‹ä¼šå¥½äºHybridæ¨¡å‹ã€‚ å¯¹æ¯”å‘ç°ï¼ŒViTå¯¹ç®—ä¾‹çš„è€—è´¹å¾ˆå¤§ï¼Œå®é™…å·¥ç¨‹å¯èƒ½ç”¨ä¸èµ·è¿™ç§æ¨¡å‹ã€‚ VITä»£ç å®ç° éšæœºæ·±åº¦çš„ä»£ç å®ç°è¿™æ®µä»£ç çš„ä¸»è¦çš„åŠŸèƒ½æ˜¯å®ç°éšæœºæ·±åº¦çš„,å…·ä½“çš„è®²è§£å¯ä»¥å‚è€ƒEifficentNetï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚ 12345678910111213141516171819202122232425262728def drop_path(x, drop_prob: float = 0., training: bool = False): &quot;&quot;&quot; Drop paths (Stochastic Depth) per sample (when applied in main path of residual blocks). This is the same as the DropConnect impl I created for EfficientNet, etc networks, however, the original name is misleading as 'Drop Connect' is a different form of dropout in a separate paper... See discussion: https://github.com/tensorflow/tpu/issues/494#issuecomment-532968956 ... I've opted for changing the layer and argument names to 'drop path' rather than mix DropConnect as a layer name and use 'survival rate' as the argument. &quot;&quot;&quot; if drop_prob == 0. or not training: return x keep_prob = 1 - drop_prob shape = (x.shape[0],) + (1,) * (x.ndim - 1) # work with diff dim tensors, not just 2D ConvNets random_tensor = keep_prob + torch.rand(shape, dtype=x.dtype, device=x.device) random_tensor.floor_() # binarize output = x.div(keep_prob) * random_tensor return class DropPath(nn.Module): &quot;&quot;&quot; Drop paths (Stochastic Depth) per sample (when applied in main path of residual blocks). &quot;&quot;&quot; def __init__(self, drop_prob=None): super(DropPath, self).__init__() self.drop_prob = drop_prob def forward(self, x): return drop_path(x, self.drop_prob, self.training) PatchEmbed éƒ¨åˆ†çš„ä»£ç å®ç°æœ¬éƒ¨åˆ†çš„ä¸»è¦çš„åŠŸèƒ½å°±æ˜¯å°†å›¾ç‰‡åˆ†æˆä¸åŒçš„patchå—ï¼Œç„¶åå°†æ¯ä¸ªå—å˜æˆä¸€ä¸ªå‘é‡ã€‚ 12345678910111213141516171819202122232425class PatchEmbed(nn.Module): def __init__(self, img_size=224, patch_size=16, in_c=3, embed_dim=768, norm_layer=None) -&gt; None: super().__init__() img_size = (img_size, img_size) patch_size = (patch_size, patch_size) self.img_size = img_size self.patch_size = patch_size self.grid_size = (img_size[0] // patch_size[0], img_size[1] // patch_size[1]) self.num_patches = self.grid_size[0]*self.grid_size[1] # å®šä¹‰å·ç§¯å±‚ self.proj = nn.Conv2d(in_c, embed_dim, kernel_size=patch_size, stride=patch_size) self.norm = norm_layer(embed_dim) if norm_layer else nn.Identity() def forward(self, x): B, C, H, W = x.shape assert H == self.img_size[0] and W == self.img_size[1], \\ f&quot;Input image size ({H}*{W}) doesn't match model ({self.img_size[0]}*{self.img_size[1]}).&quot; # flatten: [B, C, H, W] -&gt; [B, C, HW] x = self.proj(x).flatten(2) # transpose: [B, C, HW] -&gt; [B, HW, C] x = x.transpose(1, 2) x = self.norm(x) return x Transformer Encoderå±‚çš„å®ç°attention blockçš„å®ç°æœ¬éƒ¨åˆ†ä¸»è¦å®ç°Transformer Encoderå±‚ï¼Œå…¶ä¸»è¦æ˜¯å°†Patch Embeddingçš„å†…å®¹è¿›è¡Œæ³¨æ„åŠ›æœºåˆ¶å¤„ç†ã€‚ å…¶ä¸­éœ€è¦æ³¨æ„çš„è¦ç‚¹æœ‰ï¼š multi-headçš„æ˜¯å°†ä¸€ä¸ªæ•´çš„å‘é‡è¿›è¡Œç­‰åˆ†ï¼š[0,1,2,3,4,5]-&gt;[0,1] [2,3] [4,5] ï¼› å…¶ä¸­å¾ˆå¤šreshape ,permute,transposeä¹Ÿæ˜¯ä¸ºäº†æ–¹ä¾¿è®¡ç®—ç›¸ä¼¼åº¦ï¼› @åœ¨pytorché‡Œé¢æ˜¯çŸ©é˜µç›¸ä¹˜çš„æ„æ€ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556class Attention(nn.Module): def __init__(self, dim, # è¾“å…¥torkençš„dim num_heads=8, qkv_bias=False, qk_scale=None, attn_drop_ratio=0, proj_drop_ratio=0 ) -&gt; None: super().__init__() self.num_heads = num_heads head_dim = dim // num_heads # modelçš„dim / head = q_dim = k_dim = v_dim self.scale = qk_scale or head_dim ** -0.5 # qk_scaleé»˜è®¤æ˜¯None,äºæ˜¯è‡ªå·±è®¡ç®—ä¸€ä¸‹,å¦‚æœä¼ å…¥äº†ï¼Œå°±ä½¿ç”¨ä¼ å…¥çš„ã€‚ # è¿™é‡Œå¯¹åº”çš„å°±æ˜¯ç›¸ä¼¼åº¦å…¬å¼ä¸­é™¤ä»¥sqrt(d_k) self.qkv = nn.Linear(dim, dim*3, bias=qkv_bias) # è®¡ç®—å¾—åˆ°qkv,ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸‰ä¸ªdim-&gt;dimçš„MLP self.attn_drop = nn.Dropout(attn_drop_ratio) # å°†å¤šä¸ªheadçš„ç»“æœæ‹¼æ¥ä¹‹åï¼Œéœ€è¦è¿›è¡Œä¸€éƒ¨æ˜ å°„æ“ä½œ self.proj = nn.Linear(dim, dim) self.proj_drop = nn.Dropout(proj_drop_ratio) def forward(self, x): # [batch_size, num_patches + 1, total_embed_dim] B, N, C = x.shape # qkv(): -&gt; [batch_size, num_patches + 1, 3 * total_embed_dim] # qkvå…¶å®å°±æ˜¯å°†3ä¸ªqã€kã€vå †å èµ·æ¥çš„å¾—åˆ°çš„-&gt;3*total_embed_dim # reshape: -&gt; [batch_size, num_patches + 1, 3, num_heads, embed_dim_per_head] # å°†qkvä¸‰ä¸ªæ‹†å¼€ï¼Œå¹¶ä¸”æ ¹æ®headæ•°å°†q,k,vå‘é‡è¿›è¡Œæ‹†åˆ†[0,1,2,1]-&gt;[0,1][2,1] # permute: -&gt; [3, batch_size, num_heads, num_patches + 1, embed_dim_per_head] qkv = self.qkv(x).reshape(B, N, 3, self.num_heads, C // self.num_heads).permute(2, 0, 3, 1, 4) # [batch_size, num_heads, num_patches + 1, embed_dim_per_head] q, k, v = qkv[0], qkv[1], qkv[2] # make torchscript happy (cannot use tensor as tuple) # ä¸Šè¿°çš„å¤„ç†å…¶å®ä¸»è¦æ˜¯ä¸ºäº†æ–¹ä¾¿åˆ‡ç‰‡è·å–å…ƒç´ ï¼Œå¹¶è®¡ç®—ç›¸ä¼¼åº¦ # transpose: -&gt; [batch_size, num_heads, embed_dim_per_head, num_patches + 1] # @: (çŸ©é˜µä¹˜æ³•æ“ä½œ)multiply -&gt; # çŸ©é˜µä¹˜æ³•ä¹‹åç»“æœçš„ç»´åº¦ -&gt; [batch_size, num_heads, num_patches + 1, num_patches + 1] attn = (q @ k.transpose(-2, -1)) * self.scale # scaleå…¶å®å°±æ˜¯1/sqrt(d_k),ç›¸å½“äºè¿›è¡Œäº†å½’ä¸€åŒ–çš„å¤„ç† attn = attn.softmax(dim=-1) # dim=-1å…¶å®å°±æ˜¯å¯¹æ¯ä¸€è¡Œçš„æ•°æ®çš„è¿›è¡Œå¤„ç† attn = self.attn_drop(attn) # @: multiply -&gt; # çŸ©é˜µä¹˜æ³•ä¹‹åç»“æœçš„ç»´åº¦ -&gt; [batch_size, num_heads, num_patches + 1, embed_dim_per_head] # transpose: -&gt; [batch_size, num_patches + 1, num_heads, embed_dim_per_head] # reshape: -&gt; [batch_size, num_patches + 1, total_embed_dim] # reshapeçš„ç»“æœå…¶å®å°±æ˜¯å¯¹num_headè¿›è¡Œæ‹¼æ¥ x = (attn @ v).transpose(1, 2).reshape(B, N, C) x = self.proj(x) x = self.proj_drop(x) return x MLP Blockçš„ä»£ç å®ç°æœ¬éƒ¨åˆ†ä¸»è¦æ˜¯å°†attentionä¹‹åä»£ç è¿›è¡Œå…¨è¿æ¥çš„æ“ä½œã€‚ 123456789101112131415161718class Mlp(nn.Module): def __init__(self, in_features, hidden_features=None, out_features=None, act_layer=nn.GELU, drop=0.0) -&gt; None: super().__init__() out_features = out_features or in_features hidden_features = hidden_features or in_features self.fc1 = nn.Linear(in_features, hidden_features) self.act = act_layer() self.fc2 = nn.Linear(hidden_features, out_features) self.drop = nn.Dropout(drop) def forward(self, x): # åŸå§‹çš„ç½‘ç»œå…¶å®æ˜¯å…ˆä¸Šé‡‡æ ·åˆ°åŸæ¥çš„å››å€ï¼Œä¹‹åæ¢å¤ x = self.fc1(x) x = self.act(x) x = self.drop(x) x = self.fc2(x) x = self.drop(x) return x Encoder Blockçš„æ­å»º å°†ä¸Šè¿°æ‰€æœ‰çš„å±‚è¿›è¡Œæ±‡æ€»å¯å¾—ä¸‹é¢çš„ç±»ï¼Œå…¶å°±æ˜¯æ³¨æ„åŠ›æœºåˆ¶çš„ç¼–ç å±‚ã€‚ 12345678910111213141516171819202122232425262728class Block(nn.Module): def __init__(self, dim, num_heads, mlp_ratio=4, # åœ¨é»˜è®¤çš„æ¡ä»¶ä¸‹ï¼Œmlpå±‚æ‰©å±•çš„å€æ•° qkv_bias=False, qk_scale=None, drop_ratio=0.0, attn_drop_ratio=0.0, drop_path_ratio=0.0, act_layer=nn.GELU, norm_layer=nn.LayerNorm ) -&gt; None: super().__init__() self.norm1 = norm_layer(dim) self.attn = Attention(dim, num_heads=num_heads, qkv_bias=qkv_bias, qk_scale=qk_scale, attn_drop_ratio=attn_drop_ratio, proj_drop_ratio=drop_ratio) # å®ä¾‹åŒ–multi-headæ³¨æ„åŠ› self.drop_path = DropPath(drop_path_ratio) if drop_path_ratio &gt; 0.0 else nn.Identity() # å¦‚æœå¤§äºdrop_path_ratioæ—¶ï¼Œä¼šä½¿ç”¨Drop_path_ratioçš„æ“ä½œ self.norm2 = norm_layer(dim) mlp_hidden_dim = int(dim*mlp_ratio) self.mlp = Mlp(in_features=dim, hidden_features=mlp_hidden_dim, act_layer=act_layer, drop=drop_ratio) def forward(self, x): x = x + self.drop_path(self.attn(self.norm1(x))) x = x + self.drop_path(self.mlp(self.norm2(x))) return x Vision Transformerå±‚çš„å®ç°ä¸»è¦å‚æ•°ï¼š img_size (int, tuple): input image size patch_size (int, tuple): patch size in_c (int): number of input channels num_classes (int): number of classes for classification head embed_dim (int): embedding dimension depth (int): depth of transformer num_heads (int): number of attention heads mlp_ratio (int): ratio of mlp hidden dim to embedding dim qkv_bias (bool): enable bias for qkv if True qk_scale (float): override default qk scale of head_dim ** -0.5 if set representation_size (Optional[int]): enable and set representation layer (pre-logits) to this value if setï¼Œå…¶ä¸»è¦çš„ä½œç”¨æ˜¯æ˜¯å¦æ„å»ºpre-logitså±‚ã€‚ distilled (bool): model includes a distillation token and head as in DeiT modelsï¼Œå…¶ä¸»è¦å’ŒDeiTæ¨¡å‹ç›¸å…³ï¼Œè¿™é‡Œå¯ä»¥ä¸ç”¨è€ƒè™‘è¿™ä¸ªå‚æ•°ã€‚ drop_ratio (float): dropout rate attn_drop_ratio (float): attention dropout rate drop_path_ratio (float): stochastic depth rate embed_layer (nn.Module): patch embedding layer norm_layer: (nn.Module): normalization layer 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124class VisionTransformer(nn.Module): def __init__(self, img_size=224, patch_size=16, in_c=3, num_classes=1000, embed_dim=768, depth=12, num_heads=12, mlp_ratio=4.0, qkv_bias=True, qk_scale=None, representation_size=None, distilled=False, drop_ratio=0., attn_drop_ratio=0., drop_path_ratio=0., embed_layer=PatchEmbed, norm_layer=None, act_layer=None): super(VisionTransformer, self).__init__() self.num_classes = num_classes self.num_features = self.embed_dim = embed_dim # num_features åœ¨ä¸åŒçš„æ¨¡å‹é‡Œé¢æ˜¯ä¿æŒä¸€è‡´çš„ self.num_tokens = 2 if distilled else 1 # è¿™é‡Œå¯ä»¥ä¸ç”¨ç®¡ï¼Œå°†tokensçœ‹ä½œæ˜¯1å³å¯ norm_layer = norm_layer or partial(nn.LayerNorm, eps=1e-6) # é»˜è®¤norm_layeræ˜¯Noneï¼Œè¿™é‡Œä½¿ç”¨partialæ–¹æ³•ç»™å…¶è¿›è¡Œèµ‹å€¼ act_layer = act_layer or nn.GELU self.patch_embed = embed_layer(img_size=img_size, patch_size=patch_size, in_c=in_c, embed_dim=embed_dim, ) num_patches = self.patch_embed.num_patches # è¿™é‡Œçš„num_patcheså…¶å®å°±æ˜¯14*14=196 # æ„å»ºclass_token self.cls_token = nn.Parameter(torch.zeros(1, 1, embed_dim)) # è¿™é‡Œçš„ç¬¬ä¸€ä¸ªç»´åº¦çš„æ˜¯ä¸ºäº†åç»­è¿›è¡Œconcanteæ‹¼æ¥è€ŒåŠ ä¸Šå»çš„ self.dist_token = nn.Parameter(torch.zeros(1, 1, embed_dim)) if distilled else None # å¢åŠ ä½ç½®ç¼–ç  self.pos_embed = nn.Parameter(torch.zeros(1, num_patches + self.num_tokens, embed_dim)) self.pos_drop = nn.Dropout(p=drop_ratio) dpr = [x.item() for x in torch.linspace(0, drop_path_ratio, depth)] # å¦‚æœé‡‡å–drop_pathæ—¶ï¼Œéšç€å±‚æ•°çš„å¢åŠ drop_ratioä¸æ–­åœ°å¢å¤§ï¼Œä½†æ˜¯é»˜è®¤æ—¶0.0 self.blocks = nn.Sequential( *[Block(dim=embed_dim, num_heads=num_heads, mlp_ratio=mlp_ratio, qkv_bias=qkv_bias, qk_scale=qk_scale, drop_ratio=drop_ratio, attn_drop_ratio=attn_drop_ratio, drop_path_ratio=dpr[i], norm_layer=norm_layer, act_layer=act_layer) for i in range(depth)] ) self.norm = norm_layer(embed_dim) # Representation layer if representation_size and not distilled: self.has_logits = True self.num_features = representation_size # é‡‡å–æœ‰åºå­—å…¸é›†çš„æ–¹æ³•æ¥å¯¹æ¨¡å‹è¿›è¡Œæ„å»º # å…¶åªè¦çš„å±‚å°±åªæœ‰ä¸¤å±‚ self.pre_logits = nn.Sequential(OrderedDict([ (&quot;fc&quot;, nn.Linear(embed_dim, representation_size)), (&quot;act&quot;, nn.Tanh()) ])) else: self.has_logits = False self.pre_logits = nn.Identity() # Classifier head(s) åˆ†ç±»headå…¶å®å°±æ˜¯ä¸€ä¸ªLinearå±‚ self.head = nn.Linear(self.num_features, num_classes) if num_classes &gt; 0 else nn.Identity() self.head_dist = None if distilled: self.head_dist = nn.Linear(self.embed_dim, self.num_classes) if num_classes &gt; 0 else nn.Identity() # Weight init # æƒé‡åˆå§‹åŒ–çš„éƒ¨åˆ† nn.init.trunc_normal_(self.pos_embed, std=0.02) if self.dist_token is not None: nn.init.trunc_normal_(self.dist_token, std=0.02) nn.init.trunc_normal_(self.cls_token, std=0.02) self.apply(_init_vit_weights) # å‰å‘ç‰¹å¾æå–çš„å‡½æ•° def forward_features(self, x): # [B, C, H, W] -&gt; [B, num_patches, embed_dim] x = self.patch_embed(x) # [B, 196, 768] # [1, 1, 768] -&gt; [B, 1, 768] cls_token = self.cls_token.expand(x.shape[0], -1, -1) # è¿™é‡Œçš„æ“ä½œå…¶å®æ˜¯å°†class_tokenåœ¨Batchæ–¹å‘è¿›è¡Œæ‰©å…… if self.dist_token is None: x = torch.cat((cls_token, x), dim=1) # [B, 197, 768] # å°†classè¿›è¡Œæ‰©å……æ“ä½œ else: x = torch.cat((cls_token, self.dist_token.expand(x.shape[0], -1, -1), x), dim=1) x = self.pos_drop(x + self.pos_embed) # å †å Encoder x = self.blocks(x) # Layer_norm x = self.norm(x) if self.dist_token is None: # ä»…ä»…å°†class_tokenéƒ¨åˆ†æå–å‡ºæ¥è¿›è¡Œåˆ†ç±» return self.pre_logits(x[:, 0]) else: return x[:, 0], x[:, 1] # å‰å‘ä¼ æ’­å‡½æ•° def forward(self, x): x = self.forward_features(x) if self.head_dist is not None: x, x_dist = self.head(x[0]), self.head_dist(x[1]) if self.training and not torch.jit.is_scripting(): # during inference, return the average of both classifier predictions return x, x_dist else: return (x + x_dist) / 2 else: x = self.head(x) return x# åˆå§‹åŒ–å‡½æ•°def _init_vit_weights(m): &quot;&quot;&quot; ViT weight initialization :param m: module &quot;&quot;&quot; if isinstance(m, nn.Linear): nn.init.trunc_normal_(m.weight, std=.01) if m.bias is not None: nn.init.zeros_(m.bias) elif isinstance(m, nn.Conv2d): nn.init.kaiming_normal_(m.weight, mode=&quot;fan_out&quot;) if m.bias is not None: nn.init.zeros_(m.bias) elif isinstance(m, nn.LayerNorm): nn.init.zeros_(m.bias) nn.init.ones_(m.weight) VITçš„æ¨¡å‹éœ€è¦ç›¸å½“å¤šçš„æ•°æ®æ‰å¯ä»¥è®­ç»ƒçš„èµ·æ¥ï¼Œå› æ­¤å…¶éœ€è¦çš„åƒä¸‡çº§çš„æ•°æ®é‡æ‰å¯èƒ½çœ‹å¾—åˆ°æ•ˆæœï¼Œä¸€èˆ¬ä½¿ç”¨çš„æ—¶å€™éƒ½æ˜¯ç›´æ¥ä½¿ç”¨å…¶åœ¨ImageNetä¸Šé¢çš„é¢„å…ˆè®­ç»ƒå¥½çš„æƒé‡ï¼Œè€Œä¸æ˜¯è‡ªå·±è®­ç»ƒçš„é‡æ–°å¼€å§‹è®­ç»ƒã€‚","link":"/2022/12/26/%E5%9B%BE%E5%83%8F%E5%88%86%E7%B1%BB%E7%BD%91%E7%BB%9C%E5%8F%8APytorch%E5%AE%9E%E7%8E%B0/VIT%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E5%8F%8A%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0/"}],"tags":[{"name":"Typora","slug":"Typora","link":"/tags/Typora/"},{"name":"Markdown","slug":"Markdown","link":"/tags/Markdown/"},{"name":"auto-encoder","slug":"auto-encoder","link":"/tags/auto-encoder/"},{"name":"ç”Ÿæˆæ¨¡å‹","slug":"ç”Ÿæˆæ¨¡å‹","link":"/tags/%E7%94%9F%E6%88%90%E6%A8%A1%E5%9E%8B/"},{"name":"æ— ç›‘ç£å­¦ä¹ ","slug":"æ— ç›‘ç£å­¦ä¹ ","link":"/tags/%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0/"},{"name":"Generative Adversarial Networks","slug":"Generative-Adversarial-Networks","link":"/tags/Generative-Adversarial-Networks/"},{"name":"pytorch","slug":"pytorch","link":"/tags/pytorch/"},{"name":"GANå®æˆ˜","slug":"GANå®æˆ˜","link":"/tags/GAN%E5%AE%9E%E6%88%98/"},{"name":"Latex","slug":"Latex","link":"/tags/Latex/"},{"name":"SLAM","slug":"SLAM","link":"/tags/SLAM/"},{"name":"Computer Vision","slug":"Computer-Vision","link":"/tags/Computer-Vision/"},{"name":"c++","slug":"c","link":"/tags/c/"},{"name":"opencv","slug":"opencv","link":"/tags/opencv/"},{"name":"python","slug":"python","link":"/tags/python/"},{"name":"object detection","slug":"object-detection","link":"/tags/object-detection/"},{"name":"æœºæ¢°æŒ¯åŠ¨","slug":"æœºæ¢°æŒ¯åŠ¨","link":"/tags/%E6%9C%BA%E6%A2%B0%E6%8C%AF%E5%8A%A8/"},{"name":"å›¾åƒåˆ†ç±»","slug":"å›¾åƒåˆ†ç±»","link":"/tags/%E5%9B%BE%E5%83%8F%E5%88%86%E7%B1%BB/"},{"name":"latex","slug":"latex","link":"/tags/latex/"},{"name":"è®ºæ–‡å†™ä½œ","slug":"è®ºæ–‡å†™ä½œ","link":"/tags/%E8%AE%BA%E6%96%87%E5%86%99%E4%BD%9C/"},{"name":"IEEEæŠ•ç¨¿","slug":"IEEEæŠ•ç¨¿","link":"/tags/IEEE%E6%8A%95%E7%A8%BF/"},{"name":"ç§‘ç ”","slug":"ç§‘ç ”","link":"/tags/%E7%A7%91%E7%A0%94/"},{"name":"æ§åˆ¶ç†è®º","slug":"æ§åˆ¶ç†è®º","link":"/tags/%E6%8E%A7%E5%88%B6%E7%90%86%E8%AE%BA/"},{"name":"control theory","slug":"control-theory","link":"/tags/control-theory/"},{"name":"è‡ªæ³¨æ„åŠ›æœºåˆ¶","slug":"è‡ªæ³¨æ„åŠ›æœºåˆ¶","link":"/tags/%E8%87%AA%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6/"},{"name":"Pytorch","slug":"Pytorch","link":"/tags/Pytorch/"},{"name":"Transformer","slug":"Transformer","link":"/tags/Transformer/"},{"name":"NLP","slug":"NLP","link":"/tags/NLP/"},{"name":"å›¾ç¥ç»ç½‘ç»œ","slug":"å›¾ç¥ç»ç½‘ç»œ","link":"/tags/%E5%9B%BE%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/"},{"name":"Graph","slug":"Graph","link":"/tags/Graph/"},{"name":"Neural Networks","slug":"Neural-Networks","link":"/tags/Neural-Networks/"},{"name":"Machine Learning","slug":"Machine-Learning","link":"/tags/Machine-Learning/"},{"name":"ç›®æ ‡æ£€æµ‹","slug":"ç›®æ ‡æ£€æµ‹","link":"/tags/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B/"},{"name":"è¯­ä¹‰åˆ†å‰²","slug":"è¯­ä¹‰åˆ†å‰²","link":"/tags/%E8%AF%AD%E4%B9%89%E5%88%86%E5%89%B2/"},{"name":"Machine learning","slug":"Machine-learning","link":"/tags/Machine-learning/"},{"name":"Deep learning","slug":"Deep-learning","link":"/tags/Deep-learning/"},{"name":"point cloud","slug":"point-cloud","link":"/tags/point-cloud/"},{"name":"Finite Element Analysis","slug":"Finite-Element-Analysis","link":"/tags/Finite-Element-Analysis/"},{"name":"æœ‰é™å…ƒåˆ†æ","slug":"æœ‰é™å…ƒåˆ†æ","link":"/tags/%E6%9C%89%E9%99%90%E5%85%83%E5%88%86%E6%9E%90/"},{"name":"ANSYS","slug":"ANSYS","link":"/tags/ANSYS/"}],"categories":[{"name":"Typora","slug":"Typora","link":"/categories/Typora/"},{"name":"auto-encoder","slug":"auto-encoder","link":"/categories/auto-encoder/"},{"name":"Generative Adversarial Networks","slug":"Generative-Adversarial-Networks","link":"/categories/Generative-Adversarial-Networks/"},{"name":"PyTorchæ•™ç¨‹ä¸æºç è®²è§£","slug":"PyTorchæ•™ç¨‹ä¸æºç è®²è§£","link":"/categories/PyTorch%E6%95%99%E7%A8%8B%E4%B8%8E%E6%BA%90%E7%A0%81%E8%AE%B2%E8%A7%A3/"},{"name":"Latex","slug":"Latex","link":"/categories/Latex/"},{"name":"SLAM","slug":"SLAM","link":"/categories/SLAM/"},{"name":"opencv","slug":"opencv","link":"/categories/opencv/"},{"name":"æŒ¯åŠ¨åŠ›å­¦","slug":"æŒ¯åŠ¨åŠ›å­¦","link":"/categories/%E6%8C%AF%E5%8A%A8%E5%8A%9B%E5%AD%A6/"},{"name":"å›¾åƒåˆ†ç±»ç½‘ç»œåŠPytorchå®ç°","slug":"å›¾åƒåˆ†ç±»ç½‘ç»œåŠPytorchå®ç°","link":"/categories/%E5%9B%BE%E5%83%8F%E5%88%86%E7%B1%BB%E7%BD%91%E7%BB%9C%E5%8F%8APytorch%E5%AE%9E%E7%8E%B0/"},{"name":"ç§‘ç ”å…¥é—¨ç¬”è®°","slug":"ç§‘ç ”å…¥é—¨ç¬”è®°","link":"/categories/%E7%A7%91%E7%A0%94%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B0/"},{"name":"ç°ä»£æ§åˆ¶ç†è®º","slug":"ç°ä»£æ§åˆ¶ç†è®º","link":"/categories/%E7%8E%B0%E4%BB%A3%E6%8E%A7%E5%88%B6%E7%90%86%E8%AE%BA/"},{"name":"è‡ªæ³¨æ„åŠ›æœºåˆ¶å’ŒTransformer","slug":"è‡ªæ³¨æ„åŠ›æœºåˆ¶å’ŒTransformer","link":"/categories/%E8%87%AA%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6%E5%92%8CTransformer/"},{"name":"å›¾ç¥ç»ç½‘ç»œ","slug":"å›¾ç¥ç»ç½‘ç»œ","link":"/categories/%E5%9B%BE%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/"},{"name":"æœºå™¨å­¦ä¹ åŸºçŸ³","slug":"æœºå™¨å­¦ä¹ åŸºçŸ³","link":"/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%9F%B3/"},{"name":"ç›®æ ‡æ£€æµ‹ä¸pytorchå®ç°","slug":"ç›®æ ‡æ£€æµ‹ä¸pytorchå®ç°","link":"/categories/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E4%B8%8Epytorch%E5%AE%9E%E7%8E%B0/"},{"name":"è¯­ä¹‰åˆ†å‰²åŠPytorchå®ç°","slug":"è¯­ä¹‰åˆ†å‰²åŠPytorchå®ç°","link":"/categories/%E8%AF%AD%E4%B9%89%E5%88%86%E5%89%B2%E5%8F%8APytorch%E5%AE%9E%E7%8E%B0/"},{"name":"é«˜çº§æœºå™¨å­¦ä¹ ","slug":"é«˜çº§æœºå™¨å­¦ä¹ ","link":"/categories/%E9%AB%98%E7%BA%A7%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"},{"name":"Point Cloud","slug":"Point-Cloud","link":"/categories/Point-Cloud/"},{"name":"Finite Element Analysis","slug":"Finite-Element-Analysis","link":"/categories/Finite-Element-Analysis/"}]}